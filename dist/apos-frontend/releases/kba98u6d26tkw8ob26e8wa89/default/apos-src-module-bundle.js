/** src-build.js **/

(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const d of s.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&n(d)}).observe(document,{childList:!0,subtree:!0});function t(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?s.credentials="include":e.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(e){if(e.ep)return;e.ep=!0;const s=t(e);fetch(e.href,s)}})();const C=()=>{const r=window.apos;r.util={},r.util.emit=function(t,n,e){let s;try{s=new window.CustomEvent(n)}catch{s=document.createEvent("Event"),s.initEvent(n,!0,!0)}r.util.assign(s,e||{}),t.dispatchEvent(s)},r.util.getCookie=function(t){const n=document.cookie.match(new RegExp("(^| )"+t+"=([^;]+)"));return n&&n[2]},r.util.removeClass=function(t,n){t.classList?t.classList.remove(n):t.className=t.className.replace(new RegExp("(^|\\b)"+n.split(" ").join("|")+"(\\b|$)","gi")," ")},r.util.addClass=function(t,n){t.classList?t.classList.add(n):t.className+=" "+n},r.util.closest=function(t,n){return t.closest||(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest=function(e){let s=this;if(!document.documentElement.contains(s))return null;do{if(s.matches(e))return s;s=s.parentElement||s.parentNode}while(s!==null&&s.nodeType===1);return null}),t.closest(n)},r.util.assign=function(t,n){if(Object.assign)return Object.assign.apply(Object,arguments);let e,s,d,u;for(e=1;e<arguments.length;e++)for(d=Object.keys(arguments[e]),s=0;s<d.length;s++)u=d[s],t[u]=arguments[e][u];return t};const i={list:{},initialized:!1};r.util.widgetPlayers=new Proxy(i.list,{set(t,n,e){return t[n]=e,i.initialized&&r.util.runPlayers(),!0}}),r.util.onReadyAndRefresh=function(t){n(t),setTimeout(function(){r.bus&&r.bus.$on("refreshed",t)},0);function n(e){document.readyState!=="loading"?setTimeout(e,0):document.addEventListener?document.addEventListener("DOMContentLoaded",e):document.attachEvent("onreadystatechange",function(){document.readyState!=="loading"&&e()})}},r.util.onReady=r.util.onReadyAndRefresh.bind(r.util.onReadyAndRefresh),r.util.runPlayers=function(t){const n=r.util.widgetPlayers,e=Object.keys(n);for(let s=0;s<e.length;s++){const d=n[e[s]];(t||document).querySelectorAll(d.selector).forEach(function(l){l.aposWidgetPlayed||(l.aposWidgetPlayed=!0,d.player(l))})}},r.bus||r.util.onReady(function(){i.initialized=!0,r.util.runPlayers()}),r.util.attachmentUrl=function(t,n){let e=r.uploadsUrl+"/attachments/"+t._id+"-"+t.name;n||(n={});let s;n.crop&&n.crop.width?s=n.crop:t.crop&&t.crop.width&&(s=t.crop),s&&(e+="."+s.left+"."+s.top+"."+s.width+"."+s.height);let d;return!n.size||n.size==="original"?d=!1:d=n.size,d&&(e+="."+d),e+"."+t.extension},r.util.assetUrl=function(t){return r.assetBaseUrl+t},r.util.sameSite=function(t){const n=t.match(/^(https?:)?\/\/([^/]+)/);return n?window.location.host===n[2]:!0}},O=()=>{const r={},i=window.apos;i.http={},i.http.post=function(t,n,e){return i.http.remote("POST",t,n,e)},i.http.get=function(t,n,e){return i.http.remote("GET",t,n,e)},i.http.patch=function(t,n,e){return i.http.remote("PATCH",t,n,e)},i.http.put=function(t,n,e){return i.http.remote("PUT",t,n,e)},i.http.delete=function(t,n,e){return i.http.remote("DELETE",t,n,e)},i.http.remote=function(t,n,e,s){var E;if(!s){if(!window.Promise)throw new Error("If you wish to receive a promise from apos.http methods in older browsers you must have a Promise polyfill. If you do not want to provide one, pass a callback instead.");return new window.Promise(function(c,b){return n?i.http.remote(t,n,e,function(h,v){return h?b(h):c(v)}):b(new Error("url is not defined"))})}if(!n)return s(new Error("url is not defined"));i.sitePrefix&&e.prefix!==!1&&n.substring(0,1)==="/"&&(n=i.sitePrefix+n);let d,u;e.draft!=null&&(e.qs?e.qs=e.draft?i.util.assign({aposMode:"draft"},e.qs):i.util.assign({aposMode:"published"},e.qs):(u=n.indexOf("?"),u!==-1?d=i.http.parseQuery(n.substring(u)):d={},d.aposMode=e.draft?"draft":"published",n=i.http.addQueryToUrl(n,d)));const l=e.busy===!0?"busy":e.busy,o=new XMLHttpRequest;let a=e.body,p,f;u=n.indexOf("?");const m={...u!==-1&&i.http.parseQuery(n.substring(u)),...e.qs||{},...(E=e.qs)!=null&&E.aposLocale?{aposLocale:e.qs.aposLocale}:{aposLocale:i.getActiveLocale()}};n=i.http.addQueryToUrl(n,m),e.busy&&(r[l]||(r[l]=0,i.bus&&i.bus.$emit("busy",{active:!0,name:l})),r[l]++),o.open(t,n);const w=window.FormData&&a instanceof window.FormData,y=e.send==="json"||e.body&&typeof e.body=="object"&&!w;if(y&&o.setRequestHeader("Content-Type","application/json"),e.headers)for(p=Object.keys(e.headers),f=0;f<p.length;f++)o.setRequestHeader(p[f],e.headers[p[f]]);i.util.emit(document.body,"apos-before-"+t.toLowerCase(),{uri:n,data:e.body,request:o}),y?a=JSON.stringify(e.body):a=e.body,o.addEventListener("load",function(){let c=null;const b=this.getResponseHeader("Content-Type");if(b||e.parse==="json")if(e.parse==="json"||b.match(/^application\/json/))try{c=JSON.parse(this.responseText)}catch(h){return s(h)}else c=this.responseText;if(o.status<400)return e.fullResponse?s(null,{body:c,status:o.status,headers:g()}):s(null,c);{const h=new Error(c&&c.message||c&&c.name||"Error");return h.status=o.status,h.name=c&&c.name,h.body=c,h.headers=g(),s(h)}}),o.addEventListener("abort",function(c){return s(c)}),o.addEventListener("error",function(c){return s(c)}),e.downloadProgress&&o.addEventListener("progress",function(c){e.downloadProgress(c.loaded,c.lengthComputable?c.total:null)}),o.upload&&e.uploadProgress&&o.upload.addEventListener("progress",function(c){e.uploadProgress(c.loaded,c.lengthComputable?c.total:null)}),o.addEventListener("loadend",function(c){e.busy&&(r[l]--,r[l]||i.bus&&i.bus.$emit("busy",{active:!1,name:l}))}),o.send(a);function g(){const c=o.getAllResponseHeaders();if(!c)return{};const b=c.trim().split(/[\r\n]+/),h={};return b.forEach(function(v){const L=v.split(": "),A=L.shift();if(!A)return;const P=L.shift();h[A.toLowerCase()]=P}),h}},i.http.parseQuery=function(t){t=t.replace(/^\?/,"");const n={};return t.split("&").forEach(function(d){let u;d.indexOf("=")===-1?s(d,null):(u=d.split("="),u&&s(u[0],u[1]))}),n.root||{};function s(d,u){let l,o="root",a=n;d=decodeURIComponent(d),d.split("[").forEach(function(f){f==="]"?(Array.isArray(a[o])||(a[o]=[]),a=a[o],o=a.length):f.match(/^\d+]/)?(l=f.match(/^\d+/),Array.isArray(a[o])||(a[o]=[]),a=a[o],o=parseInt(l)):(l=f.replace("]",""),a[o]||(a[o]={}),a=a[o],o=l)}),u=u===null?u:decodeURIComponent(u),Array.isArray(a[o])?a[o].push(u):a[o]!==void 0?a[o]=[a[o],u]:a[o]=u}},i.http.addQueryToUrl=function(t,n){let e="";const s=t.indexOf("#");s!==-1&&(e=t.substring(s),t=t.substring(0,s)),t=t.replace(/\?.*$/,"");let d,u;if(n!=null&&typeof n=="object")for(u=l("",n),d=0;d<u.length;d++){const o=u[d][0],a=u[d][1];d>0?t+="&":t+="?",a==null?t+=encodeURIComponent(o):t+=encodeURIComponent(o)+"="+encodeURIComponent(a)}return t+e;function l(o,a){let p=[],f,m;if(Array.isArray(a))for(m=0;m<a.length;m++)w(m,a[m]);else for(f=Object.keys(a),m=0;m<f.length;m++)w(f[m],a[f[m]]);return p;function w(y,g){g!=null&&typeof g=="object"?p=p.concat(l(o.length?o+"["+y+"]":y,g)):p.push([o.length?o+"["+y+"]":y,g])}}}},R=()=>{C(),O()},x=()=>{apos.getActiveLocale=()=>{var r,i;return((i=(r=apos.modal)==null?void 0:r.getActiveLocale)==null?void 0:i.call(r))||apos.locale}};function j(){const r=!(apos.login&&apos.login.user),i=apos.util.getCookie(`${self.apos.shortName}.loggedIn`)==="true";if(!r||!i){sessionStorage.setItem("aposRefreshedPages","{}");return}const t=JSON.parse(sessionStorage.aposRefreshedPages||"{}");t[location.href]||(t[location.href]=!0,sessionStorage.setItem("aposRefreshedPages",JSON.stringify(t)),console.info("Received logged-out content from cache while logged-in, refreshing the page"),location.reload())}const q=()=>{apos.oembedCache||(apos.oembedCache={}),apos.util.widgetPlayers["@apostrophecms/video"]={selector:"[data-apos-video-widget]",player:function(r){const i=r.getAttribute("data-apos-video-url");let t;if(!i)return;n(r,{url:i});function n(u,l){return apos.util.removeClass(u,"apos-oembed-invalid"),apos.util.addClass(u,"apos-oembed-busy"),l.url?e(l,function(o,a){return t=a,o||l.type&&a.type!==l.type?d(o||"inappropriate"):(apos.util.removeClass(u,"apos-oembed-busy"),s(u,a))}):d("undefined")}function e(u,l){if(Object.hasOwn(apos.oembedCache,u.url))return l(null,apos.oembedCache[u.url]);const o={qs:{url:u.url}};return apos.http.get("/api/v1/@apostrophecms/oembed/query",o,function(a,p){return a?l(a):(apos.oembedCache[u.url]=p,l(null,p))})}function s(u,l){const o=document.createElement("div");o.innerHTML=l.html;const a=o.firstChild;a.setAttribute("data-apos-video-canvas",""),u.innerHTML="",a&&(a.removeAttribute("width"),a.removeAttribute("height"),l.width&&l.height&&(a.style.width="100%",a.style.aspectRatio=`${t.width} / ${t.height}`),u.append(a))}function d(u){apos.util.removeClass(r,"apos-oembed-busy"),apos.util.addClass(r,"apos-oembed-invalid"),console.error(u),u!=="undefined"?r.innerHTML="<p>Error loading video</p>":r.innerHTML=""}}}},T=()=>{console.log("Hello World")};(function(){window.apos=window.apos||{};var r=document.body&&document.body.getAttribute("data-apos");if(Object.assign(window.apos,JSON.parse(r||"{}")),r&&document.body.removeAttribute("data-apos"),window.apos.modules)for(const i of Object.values(window.apos.modules))i.alias&&(window.apos[i.alias]=i)})();R();x();j();q();T();