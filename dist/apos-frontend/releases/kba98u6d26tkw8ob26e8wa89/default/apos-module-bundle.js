/** apos-build.js **/

var wi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Mc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var My={exports:{}};function Ty(){}Ty.prototype={on:function(e,t,n){var i=this.e||(this.e={});return(i[e]||(i[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){var i=this;function o(){i.off(e,o),t.apply(n,arguments)}return o._=t,this.on(e,o,n)},emit:function(e){var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),i=0,o=n.length;for(i;i<o;i++)n[i].fn.apply(n[i].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),i=n[e],o=[];if(i&&t)for(var s=0,r=i.length;s<r;s++)i[s].fn!==t&&i[s].fn._!==t&&o.push(i[s]);return o.length?n[e]=o:delete n[e],this}};My.exports=Ty;My.exports.TinyEmitter=Ty;var q6=My.exports,K6=q6,G6=new K6;const Eh=Mc(G6);/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Ey(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const Wt={},Xl=[],fs=()=>{},J6=()=>!1,jp=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Oy=e=>e.startsWith("onUpdate:"),Ln=Object.assign,$y=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},Y6=Object.prototype.hasOwnProperty,Nt=(e,t)=>Y6.call(e,t),qe=Array.isArray,Ql=e=>_u(e)==="[object Map]",Tc=e=>_u(e)==="[object Set]",V_=e=>_u(e)==="[object Date]",ft=e=>typeof e=="function",dn=e=>typeof e=="string",Uo=e=>typeof e=="symbol",Kt=e=>e!==null&&typeof e=="object",Sk=e=>(Kt(e)||ft(e))&&ft(e.then)&&ft(e.catch),xk=Object.prototype.toString,_u=e=>xk.call(e),Z6=e=>_u(e).slice(8,-1),Mk=e=>_u(e)==="[object Object]",Iy=e=>dn(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,wd=Ey(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),qp=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},X6=/-(\w)/g,To=qp(e=>e.replace(X6,(t,n)=>n?n.toUpperCase():"")),Q6=/\B([A-Z])/g,la=qp(e=>e.replace(Q6,"-$1").toLowerCase()),Kp=qp(e=>e.charAt(0).toUpperCase()+e.slice(1)),pf=qp(e=>e?`on${Kp(e)}`:""),jr=(e,t)=>!Object.is(e,t),mf=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},Tk=(e,t,n,i=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:i,value:n})},Rf=e=>{const t=parseFloat(e);return isNaN(t)?e:t},e7=e=>{const t=dn(e)?Number(e):NaN;return isNaN(t)?e:t};let z_;const Gp=()=>z_||(z_=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Vt(e){if(qe(e)){const t={};for(let n=0;n<e.length;n++){const i=e[n],o=dn(i)?o7(i):Vt(i);if(o)for(const s in o)t[s]=o[s]}return t}else if(dn(e)||Kt(e))return e}const t7=/;(?![^(]*\))/g,n7=/:([^]+)/,i7=/\/\*[^]*?\*\//g;function o7(e){const t={};return e.replace(i7,"").split(t7).forEach(n=>{if(n){const i=n.split(n7);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}function te(e){let t="";if(dn(e))t=e;else if(qe(e))for(let n=0;n<e.length;n++){const i=te(e[n]);i&&(t+=i+" ")}else if(Kt(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}function s7(e){if(!e)return null;let{class:t,style:n}=e;return t&&!dn(t)&&(e.class=te(t)),n&&(e.style=Vt(n)),e}const r7="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",a7=Ey(r7);function Ek(e){return!!e||e===""}function l7(e,t){if(e.length!==t.length)return!1;let n=!0;for(let i=0;n&&i<e.length;i++)n=el(e[i],t[i]);return n}function el(e,t){if(e===t)return!0;let n=V_(e),i=V_(t);if(n||i)return n&&i?e.getTime()===t.getTime():!1;if(n=Uo(e),i=Uo(t),n||i)return e===t;if(n=qe(e),i=qe(t),n||i)return n&&i?l7(e,t):!1;if(n=Kt(e),i=Kt(t),n||i){if(!n||!i)return!1;const o=Object.keys(e).length,s=Object.keys(t).length;if(o!==s)return!1;for(const r in e){const a=e.hasOwnProperty(r),l=t.hasOwnProperty(r);if(a&&!l||!a&&l||!el(e[r],t[r]))return!1}}return String(e)===String(t)}function Ly(e,t){return e.findIndex(n=>el(n,t))}const Ok=e=>!!(e&&e.__v_isRef===!0),$=e=>dn(e)?e:e==null?"":qe(e)||Kt(e)&&(e.toString===xk||!ft(e.toString))?Ok(e)?$(e.value):JSON.stringify(e,$k,2):String(e),$k=(e,t)=>Ok(t)?$k(e,t.value):Ql(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[i,o],s)=>(n[Yg(i,s)+" =>"]=o,n),{})}:Tc(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>Yg(n))}:Uo(t)?Yg(t):Kt(t)&&!qe(t)&&!Mk(t)?String(t):t,Yg=(e,t="")=>{var n;return Uo(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let yi;class Ik{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=yi,!t&&yi&&(this.index=(yi.scopes||(yi.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=yi;try{return yi=this,t()}finally{yi=n}}}on(){yi=this}off(){yi=this.parent}stop(t){if(this._active){this._active=!1;let n,i;for(n=0,i=this.effects.length;n<i;n++)this.effects[n].stop();for(this.effects.length=0,n=0,i=this.cleanups.length;n<i;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0}}}function Lk(e){return new Ik(e)}function Dk(){return yi}function c7(e,t=!1){yi&&yi.cleanups.push(e)}let Yt;const Zg=new WeakSet;class Rk{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,yi&&yi.active&&yi.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Zg.has(this)&&(Zg.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Hk(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,N_(this),Vk(this);const t=Yt,n=Bo;Yt=this,Bo=!0;try{return this.fn()}finally{zk(this),Yt=t,Bo=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Py(t);this.deps=this.depsTail=void 0,N_(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Zg.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){rb(this)&&this.run()}get dirty(){return rb(this)}}let Pk=0,_d,Cd;function Hk(e,t=!1){if(e.flags|=8,t){e.next=Cd,Cd=e;return}e.next=_d,_d=e}function Dy(){Pk++}function Ry(){if(--Pk>0)return;if(Cd){let t=Cd;for(Cd=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;_d;){let t=_d;for(_d=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(i){e||(e=i)}t=n}}if(e)throw e}function Vk(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function zk(e){let t,n=e.depsTail,i=n;for(;i;){const o=i.prevDep;i.version===-1?(i===n&&(n=o),Py(i),d7(i)):t=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=o}e.deps=t,e.depsTail=n}function rb(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Nk(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Nk(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===qd))return;e.globalVersion=qd;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!rb(e)){e.flags&=-3;return}const n=Yt,i=Bo;Yt=e,Bo=!0;try{Vk(e);const o=e.fn(e._value);(t.version===0||jr(o,e._value))&&(e._value=o,t.version++)}catch(o){throw t.version++,o}finally{Yt=n,Bo=i,zk(e),e.flags&=-3}}function Py(e,t=!1){const{dep:n,prevSub:i,nextSub:o}=e;if(i&&(i.nextSub=o,e.prevSub=void 0),o&&(o.prevSub=i,e.nextSub=void 0),n.subs===e&&(n.subs=i,!i&&n.computed)){n.computed.flags&=-5;for(let s=n.computed.deps;s;s=s.nextDep)Py(s,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function d7(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let Bo=!0;const Bk=[];function ca(){Bk.push(Bo),Bo=!1}function da(){const e=Bk.pop();Bo=e===void 0?!0:e}function N_(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=Yt;Yt=void 0;try{t()}finally{Yt=n}}}let qd=0,u7=class{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}};class Jp{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!Yt||!Bo||Yt===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Yt)n=this.activeLink=new u7(Yt,this),Yt.deps?(n.prevDep=Yt.depsTail,Yt.depsTail.nextDep=n,Yt.depsTail=n):Yt.deps=Yt.depsTail=n,Fk(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const i=n.nextDep;i.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=i),n.prevDep=Yt.depsTail,n.nextDep=void 0,Yt.depsTail.nextDep=n,Yt.depsTail=n,Yt.deps===n&&(Yt.deps=i)}return n}trigger(t){this.version++,qd++,this.notify(t)}notify(t){Dy();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Ry()}}}function Fk(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let i=t.deps;i;i=i.nextDep)Fk(i)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const Pf=new WeakMap,qa=Symbol(""),ab=Symbol(""),Kd=Symbol("");function ai(e,t,n){if(Bo&&Yt){let i=Pf.get(e);i||Pf.set(e,i=new Map);let o=i.get(n);o||(i.set(n,o=new Jp),o.map=i,o.key=n),o.track()}}function Gs(e,t,n,i,o,s){const r=Pf.get(e);if(!r){qd++;return}const a=l=>{l&&l.trigger()};if(Dy(),t==="clear")r.forEach(a);else{const l=qe(e),c=l&&Iy(n);if(l&&n==="length"){const u=Number(i);r.forEach((f,m)=>{(m==="length"||m===Kd||!Uo(m)&&m>=u)&&a(f)})}else switch((n!==void 0||r.has(void 0))&&a(r.get(n)),c&&a(r.get(Kd)),t){case"add":l?c&&a(r.get("length")):(a(r.get(qa)),Ql(e)&&a(r.get(ab)));break;case"delete":l||(a(r.get(qa)),Ql(e)&&a(r.get(ab)));break;case"set":Ql(e)&&a(r.get(qa));break}}Ry()}function h7(e,t){const n=Pf.get(e);return n&&n.get(t)}function Dl(e){const t=Dt(e);return t===e?t:(ai(t,"iterate",Kd),Co(e)?t:t.map(li))}function Yp(e){return ai(e=Dt(e),"iterate",Kd),e}const f7={__proto__:null,[Symbol.iterator](){return Xg(this,Symbol.iterator,li)},concat(...e){return Dl(this).concat(...e.map(t=>qe(t)?Dl(t):t))},entries(){return Xg(this,"entries",e=>(e[1]=li(e[1]),e))},every(e,t){return Hs(this,"every",e,t,void 0,arguments)},filter(e,t){return Hs(this,"filter",e,t,n=>n.map(li),arguments)},find(e,t){return Hs(this,"find",e,t,li,arguments)},findIndex(e,t){return Hs(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Hs(this,"findLast",e,t,li,arguments)},findLastIndex(e,t){return Hs(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Hs(this,"forEach",e,t,void 0,arguments)},includes(...e){return Qg(this,"includes",e)},indexOf(...e){return Qg(this,"indexOf",e)},join(e){return Dl(this).join(e)},lastIndexOf(...e){return Qg(this,"lastIndexOf",e)},map(e,t){return Hs(this,"map",e,t,void 0,arguments)},pop(){return ed(this,"pop")},push(...e){return ed(this,"push",e)},reduce(e,...t){return B_(this,"reduce",e,t)},reduceRight(e,...t){return B_(this,"reduceRight",e,t)},shift(){return ed(this,"shift")},some(e,t){return Hs(this,"some",e,t,void 0,arguments)},splice(...e){return ed(this,"splice",e)},toReversed(){return Dl(this).toReversed()},toSorted(e){return Dl(this).toSorted(e)},toSpliced(...e){return Dl(this).toSpliced(...e)},unshift(...e){return ed(this,"unshift",e)},values(){return Xg(this,"values",li)}};function Xg(e,t,n){const i=Yp(e),o=i[t]();return i!==e&&!Co(e)&&(o._next=o.next,o.next=()=>{const s=o._next();return s.value&&(s.value=n(s.value)),s}),o}const p7=Array.prototype;function Hs(e,t,n,i,o,s){const r=Yp(e),a=r!==e&&!Co(e),l=r[t];if(l!==p7[t]){const f=l.apply(e,s);return a?li(f):f}let c=n;r!==e&&(a?c=function(f,m){return n.call(this,li(f),m,e)}:n.length>2&&(c=function(f,m){return n.call(this,f,m,e)}));const u=l.call(r,c,i);return a&&o?o(u):u}function B_(e,t,n,i){const o=Yp(e);let s=n;return o!==e&&(Co(e)?n.length>3&&(s=function(r,a,l){return n.call(this,r,a,l,e)}):s=function(r,a,l){return n.call(this,r,li(a),l,e)}),o[t](s,...i)}function Qg(e,t,n){const i=Dt(e);ai(i,"iterate",Kd);const o=i[t](...n);return(o===-1||o===!1)&&zy(n[0])?(n[0]=Dt(n[0]),i[t](...n)):o}function ed(e,t,n=[]){ca(),Dy();const i=Dt(e)[t].apply(e,n);return Ry(),da(),i}const m7=Ey("__proto__,__v_isRef,__isVue"),Wk=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Uo));function g7(e){Uo(e)||(e=String(e));const t=Dt(this);return ai(t,"has",e),t.hasOwnProperty(e)}class Uk{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,i){if(n==="__v_skip")return t.__v_skip;const o=this._isReadonly,s=this._isShallow;if(n==="__v_isReactive")return!o;if(n==="__v_isReadonly")return o;if(n==="__v_isShallow")return s;if(n==="__v_raw")return i===(o?s?x7:Gk:s?Kk:qk).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(i)?t:void 0;const r=qe(t);if(!o){let l;if(r&&(l=f7[n]))return l;if(n==="hasOwnProperty")return g7}const a=Reflect.get(t,n,wn(t)?t:i);return(Uo(n)?Wk.has(n):m7(n))||(o||ai(t,"get",n),s)?a:wn(a)?r&&Iy(n)?a:a.value:Kt(a)?o?Jk(a):Zp(a):a}}class jk extends Uk{constructor(t=!1){super(!1,t)}set(t,n,i,o){let s=t[n];if(!this._isShallow){const l=tl(s);if(!Co(i)&&!tl(i)&&(s=Dt(s),i=Dt(i)),!qe(t)&&wn(s)&&!wn(i))return l?!1:(s.value=i,!0)}const r=qe(t)&&Iy(n)?Number(n)<t.length:Nt(t,n),a=Reflect.set(t,n,i,wn(t)?t:o);return t===Dt(o)&&(r?jr(i,s)&&Gs(t,"set",n,i):Gs(t,"add",n,i)),a}deleteProperty(t,n){const i=Nt(t,n);t[n];const o=Reflect.deleteProperty(t,n);return o&&i&&Gs(t,"delete",n,void 0),o}has(t,n){const i=Reflect.has(t,n);return(!Uo(n)||!Wk.has(n))&&ai(t,"has",n),i}ownKeys(t){return ai(t,"iterate",qe(t)?"length":qa),Reflect.ownKeys(t)}}class b7 extends Uk{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const y7=new jk,v7=new b7,w7=new jk(!0);const lb=e=>e,Oh=e=>Reflect.getPrototypeOf(e);function _7(e,t,n){return function(...i){const o=this.__v_raw,s=Dt(o),r=Ql(s),a=e==="entries"||e===Symbol.iterator&&r,l=e==="keys"&&r,c=o[e](...i),u=n?lb:t?cb:li;return!t&&ai(s,"iterate",l?ab:qa),{next(){const{value:f,done:m}=c.next();return m?{value:f,done:m}:{value:a?[u(f[0]),u(f[1])]:u(f),done:m}},[Symbol.iterator](){return this}}}}function $h(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function C7(e,t){const n={get(o){const s=this.__v_raw,r=Dt(s),a=Dt(o);e||(jr(o,a)&&ai(r,"get",o),ai(r,"get",a));const{has:l}=Oh(r),c=t?lb:e?cb:li;if(l.call(r,o))return c(s.get(o));if(l.call(r,a))return c(s.get(a));s!==r&&s.get(o)},get size(){const o=this.__v_raw;return!e&&ai(Dt(o),"iterate",qa),Reflect.get(o,"size",o)},has(o){const s=this.__v_raw,r=Dt(s),a=Dt(o);return e||(jr(o,a)&&ai(r,"has",o),ai(r,"has",a)),o===a?s.has(o):s.has(o)||s.has(a)},forEach(o,s){const r=this,a=r.__v_raw,l=Dt(a),c=t?lb:e?cb:li;return!e&&ai(l,"iterate",qa),a.forEach((u,f)=>o.call(s,c(u),c(f),r))}};return Ln(n,e?{add:$h("add"),set:$h("set"),delete:$h("delete"),clear:$h("clear")}:{add(o){!t&&!Co(o)&&!tl(o)&&(o=Dt(o));const s=Dt(this);return Oh(s).has.call(s,o)||(s.add(o),Gs(s,"add",o,o)),this},set(o,s){!t&&!Co(s)&&!tl(s)&&(s=Dt(s));const r=Dt(this),{has:a,get:l}=Oh(r);let c=a.call(r,o);c||(o=Dt(o),c=a.call(r,o));const u=l.call(r,o);return r.set(o,s),c?jr(s,u)&&Gs(r,"set",o,s):Gs(r,"add",o,s),this},delete(o){const s=Dt(this),{has:r,get:a}=Oh(s);let l=r.call(s,o);l||(o=Dt(o),l=r.call(s,o)),a&&a.call(s,o);const c=s.delete(o);return l&&Gs(s,"delete",o,void 0),c},clear(){const o=Dt(this),s=o.size!==0,r=o.clear();return s&&Gs(o,"clear",void 0,void 0),r}}),["keys","values","entries",Symbol.iterator].forEach(o=>{n[o]=_7(o,e,t)}),n}function Hy(e,t){const n=C7(e,t);return(i,o,s)=>o==="__v_isReactive"?!e:o==="__v_isReadonly"?e:o==="__v_raw"?i:Reflect.get(Nt(n,o)&&o in i?n:i,o,s)}const A7={get:Hy(!1,!1)},k7={get:Hy(!1,!0)},S7={get:Hy(!0,!1)};const qk=new WeakMap,Kk=new WeakMap,Gk=new WeakMap,x7=new WeakMap;function M7(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function T7(e){return e.__v_skip||!Object.isExtensible(e)?0:M7(Z6(e))}function Zp(e){return tl(e)?e:Vy(e,!1,y7,A7,qk)}function E7(e){return Vy(e,!1,w7,k7,Kk)}function Jk(e){return Vy(e,!0,v7,S7,Gk)}function Vy(e,t,n,i,o){if(!Kt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const s=o.get(e);if(s)return s;const r=T7(e);if(r===0)return e;const a=new Proxy(e,r===2?i:n);return o.set(e,a),a}function qr(e){return tl(e)?qr(e.__v_raw):!!(e&&e.__v_isReactive)}function tl(e){return!!(e&&e.__v_isReadonly)}function Co(e){return!!(e&&e.__v_isShallow)}function zy(e){return e?!!e.__v_raw:!1}function Dt(e){const t=e&&e.__v_raw;return t?Dt(t):e}function Xp(e){return!Nt(e,"__v_skip")&&Object.isExtensible(e)&&Tk(e,"__v_skip",!0),e}const li=e=>Kt(e)?Zp(e):e,cb=e=>Kt(e)?Jk(e):e;function wn(e){return e?e.__v_isRef===!0:!1}function Ve(e){return Yk(e,!1)}function O7(e){return Yk(e,!0)}function Yk(e,t){return wn(e)?e:new $7(e,t)}class $7{constructor(t,n){this.dep=new Jp,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:Dt(t),this._value=n?t:li(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,i=this.__v_isShallow||Co(t)||tl(t);t=i?t:Dt(t),jr(t,n)&&(this._rawValue=t,this._value=i?t:li(t),this.dep.trigger())}}function Zt(e){return wn(e)?e.value:e}const I7={get:(e,t,n)=>t==="__v_raw"?e:Zt(Reflect.get(e,t,n)),set:(e,t,n,i)=>{const o=e[t];return wn(o)&&!wn(n)?(o.value=n,!0):Reflect.set(e,t,n,i)}};function Zk(e){return qr(e)?e:new Proxy(e,I7)}class L7{constructor(t){this.__v_isRef=!0,this._value=void 0;const n=this.dep=new Jp,{get:i,set:o}=t(n.track.bind(n),n.trigger.bind(n));this._get=i,this._set=o}get value(){return this._value=this._get()}set value(t){this._set(t)}}function D7(e){return new L7(e)}function R7(e){const t=qe(e)?new Array(e.length):{};for(const n in e)t[n]=H7(e,n);return t}class P7{constructor(t,n,i){this._object=t,this._key=n,this._defaultValue=i,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return h7(Dt(this._object),this._key)}}function H7(e,t,n){const i=e[t];return wn(i)?i:new P7(e,t,n)}class V7{constructor(t,n,i){this.fn=t,this.setter=n,this._value=void 0,this.dep=new Jp(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=qd-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&Yt!==this)return Hk(this,!0),!0}get value(){const t=this.dep.track();return Nk(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function z7(e,t,n=!1){let i,o;return ft(e)?i=e:(i=e.get,o=e.set),new V7(i,o,n)}const Ih={},Hf=new WeakMap;let Pa;function N7(e,t=!1,n=Pa){if(n){let i=Hf.get(n);i||Hf.set(n,i=[]),i.push(e)}}function B7(e,t,n=Wt){const{immediate:i,deep:o,once:s,scheduler:r,augmentJob:a,call:l}=n,c=M=>o?M:Co(M)||o===!1||o===0?Js(M,1):Js(M);let u,f,m,g,v=!1,w=!1;if(wn(e)?(f=()=>e.value,v=Co(e)):qr(e)?(f=()=>c(e),v=!0):qe(e)?(w=!0,v=e.some(M=>qr(M)||Co(M)),f=()=>e.map(M=>{if(wn(M))return M.value;if(qr(M))return c(M);if(ft(M))return l?l(M,2):M()})):ft(e)?t?f=l?()=>l(e,2):e:f=()=>{if(m){ca();try{m()}finally{da()}}const M=Pa;Pa=u;try{return l?l(e,3,[g]):e(g)}finally{Pa=M}}:f=fs,t&&o){const M=f,F=o===!0?1/0:o;f=()=>Js(M(),F)}const _=Dk(),k=()=>{u.stop(),_&&_.active&&$y(_.effects,u)};if(s&&t){const M=t;t=(...F)=>{M(...F),k()}}let L=w?new Array(e.length).fill(Ih):Ih;const P=M=>{if(!(!(u.flags&1)||!u.dirty&&!M))if(t){const F=u.run();if(o||v||(w?F.some((z,ee)=>jr(z,L[ee])):jr(F,L))){m&&m();const z=Pa;Pa=u;try{const ee=[F,L===Ih?void 0:w&&L[0]===Ih?[]:L,g];l?l(t,3,ee):t(...ee),L=F}finally{Pa=z}}}else u.run()};return a&&a(P),u=new Rk(f),u.scheduler=r?()=>r(P,!1):P,g=M=>N7(M,!1,u),m=u.onStop=()=>{const M=Hf.get(u);if(M){if(l)l(M,4);else for(const F of M)F();Hf.delete(u)}},t?i?P(!0):L=u.run():r?r(P.bind(null,!0),!0):u.run(),k.pause=u.pause.bind(u),k.resume=u.resume.bind(u),k.stop=k,k}function Js(e,t=1/0,n){if(t<=0||!Kt(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,wn(e))Js(e.value,t,n);else if(qe(e))for(let i=0;i<e.length;i++)Js(e[i],t,n);else if(Tc(e)||Ql(e))e.forEach(i=>{Js(i,t,n)});else if(Mk(e)){for(const i in e)Js(e[i],t,n);for(const i of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,i)&&Js(e[i],t,n)}return e}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Cu(e,t,n,i){try{return i?e(...i):e()}catch(o){Qp(o,t,n)}}function jo(e,t,n,i){if(ft(e)){const o=Cu(e,t,n,i);return o&&Sk(o)&&o.catch(s=>{Qp(s,t,n)}),o}if(qe(e)){const o=[];for(let s=0;s<e.length;s++)o.push(jo(e[s],t,n,i));return o}}function Qp(e,t,n,i=!0){const o=t?t.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:r}=t&&t.appContext.config||Wt;if(t){let a=t.parent;const l=t.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const u=a.ec;if(u){for(let f=0;f<u.length;f++)if(u[f](e,l,c)===!1)return}a=a.parent}if(s){ca(),Cu(s,null,10,[e,l,c]),da();return}}F7(e,n,o,i,r)}function F7(e,t,n,i=!0,o=!1){if(o)throw e;console.error(e)}const vi=[];let ns=-1;const ec=[];let Tr=null,Wl=0;const Xk=Promise.resolve();let Vf=null;function wo(e){const t=Vf||Xk;return e?t.then(this?e.bind(this):e):t}function W7(e){let t=ns+1,n=vi.length;for(;t<n;){const i=t+n>>>1,o=vi[i],s=Gd(o);s<e||s===e&&o.flags&2?t=i+1:n=i}return t}function Ny(e){if(!(e.flags&1)){const t=Gd(e),n=vi[vi.length-1];!n||!(e.flags&2)&&t>=Gd(n)?vi.push(e):vi.splice(W7(t),0,e),e.flags|=1,Qk()}}function Qk(){Vf||(Vf=Xk.then(tS))}function U7(e){qe(e)?ec.push(...e):Tr&&e.id===-1?Tr.splice(Wl+1,0,e):e.flags&1||(ec.push(e),e.flags|=1),Qk()}function F_(e,t,n=ns+1){for(;n<vi.length;n++){const i=vi[n];if(i&&i.flags&2){if(e&&i.id!==e.uid)continue;vi.splice(n,1),n--,i.flags&4&&(i.flags&=-2),i(),i.flags&4||(i.flags&=-2)}}}function eS(e){if(ec.length){const t=[...new Set(ec)].sort((n,i)=>Gd(n)-Gd(i));if(ec.length=0,Tr){Tr.push(...t);return}for(Tr=t,Wl=0;Wl<Tr.length;Wl++){const n=Tr[Wl];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Tr=null,Wl=0}}const Gd=e=>e.id==null?e.flags&2?-1:1/0:e.id;function tS(e){try{for(ns=0;ns<vi.length;ns++){const t=vi[ns];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Cu(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;ns<vi.length;ns++){const t=vi[ns];t&&(t.flags&=-2)}ns=-1,vi.length=0,eS(),Vf=null,(vi.length||ec.length)&&tS()}}let In=null,nS=null;function zf(e){const t=In;return In=e,nS=e&&e.type.__scopeId||null,t}function Q(e,t=In,n){if(!t||e._n)return e;const i=(...o)=>{i._d&&Q_(-1);const s=zf(t);let r;try{r=e(...o)}finally{zf(s),i._d&&Q_(1)}return r};return i._n=!0,i._c=!0,i._d=!0,i}function Ke(e,t){if(In===null)return e;const n=sm(In),i=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[s,r,a,l=Wt]=t[o];s&&(ft(s)&&(s={mounted:s,updated:s}),s.deep&&Js(r),i.push({dir:s,instance:n,value:r,oldValue:void 0,arg:a,modifiers:l}))}return e}function Oa(e,t,n,i){const o=e.dirs,s=t&&t.dirs;for(let r=0;r<o.length;r++){const a=o[r];s&&(a.oldValue=s[r].value);let l=a.dir[i];l&&(ca(),jo(l,n,8,[e.el,a,e,t]),da())}}const j7=Symbol("_vte"),iS=e=>e.__isTeleport,Er=Symbol("_leaveCb"),Lh=Symbol("_enterCb");function oS(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return As(()=>{e.isMounted=!0}),pl(()=>{e.isUnmounting=!0}),e}const fo=[Function,Array],sS={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:fo,onEnter:fo,onAfterEnter:fo,onEnterCancelled:fo,onBeforeLeave:fo,onLeave:fo,onAfterLeave:fo,onLeaveCancelled:fo,onBeforeAppear:fo,onAppear:fo,onAfterAppear:fo,onAppearCancelled:fo},rS=e=>{const t=e.subTree;return t.component?rS(t.component):t},q7={name:"BaseTransition",props:sS,setup(e,{slots:t}){const n=ku(),i=oS();return()=>{const o=t.default&&By(t.default(),!0);if(!o||!o.length)return;const s=aS(o),r=Dt(e),{mode:a}=r;if(i.isLeaving)return e1(s);const l=W_(s);if(!l)return e1(s);let c=Jd(l,r,i,n,f=>c=f);l.type!==_i&&nl(l,c);let u=n.subTree&&W_(n.subTree);if(u&&u.type!==_i&&!za(l,u)&&rS(n).type!==_i){let f=Jd(u,r,i,n);if(nl(u,f),a==="out-in"&&l.type!==_i)return i.isLeaving=!0,f.afterLeave=()=>{i.isLeaving=!1,n.job.flags&8||n.update(),delete f.afterLeave,u=void 0},e1(s);a==="in-out"&&l.type!==_i?f.delayLeave=(m,g,v)=>{const w=lS(i,u);w[String(u.key)]=u,m[Er]=()=>{g(),m[Er]=void 0,delete c.delayedLeave,u=void 0},c.delayedLeave=()=>{v(),delete c.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return s}}};function aS(e){let t=e[0];if(e.length>1){for(const n of e)if(n.type!==_i){t=n;break}}return t}const K7=q7;function lS(e,t){const{leavingVNodes:n}=e;let i=n.get(t.type);return i||(i=Object.create(null),n.set(t.type,i)),i}function Jd(e,t,n,i,o){const{appear:s,mode:r,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:u,onEnterCancelled:f,onBeforeLeave:m,onLeave:g,onAfterLeave:v,onLeaveCancelled:w,onBeforeAppear:_,onAppear:k,onAfterAppear:L,onAppearCancelled:P}=t,M=String(e.key),F=lS(n,e),z=(K,ae)=>{K&&jo(K,i,9,ae)},ee=(K,ae)=>{const B=ae[1];z(K,ae),qe(K)?K.every(J=>J.length<=1)&&B():K.length<=1&&B()},ie={mode:r,persisted:a,beforeEnter(K){let ae=l;if(!n.isMounted)if(s)ae=_||l;else return;K[Er]&&K[Er](!0);const B=F[M];B&&za(e,B)&&B.el[Er]&&B.el[Er](),z(ae,[K])},enter(K){let ae=c,B=u,J=f;if(!n.isMounted)if(s)ae=k||c,B=L||u,J=P||f;else return;let he=!1;const ne=K[Lh]=oe=>{he||(he=!0,oe?z(J,[K]):z(B,[K]),ie.delayedLeave&&ie.delayedLeave(),K[Lh]=void 0)};ae?ee(ae,[K,ne]):ne()},leave(K,ae){const B=String(e.key);if(K[Lh]&&K[Lh](!0),n.isUnmounting)return ae();z(m,[K]);let J=!1;const he=K[Er]=ne=>{J||(J=!0,ae(),ne?z(w,[K]):z(v,[K]),K[Er]=void 0,F[B]===e&&delete F[B])};F[B]=e,g?ee(g,[K,he]):he()},clone(K){const ae=Jd(K,t,n,i,o);return o&&o(ae),ae}};return ie}function e1(e){if(tm(e))return e=Qr(e),e.children=null,e}function W_(e){if(!tm(e))return iS(e.type)&&e.children?aS(e.children):e;const{shapeFlag:t,children:n}=e;if(n){if(t&16)return n[0];if(t&32&&ft(n.default))return n.default()}}function nl(e,t){e.shapeFlag&6&&e.component?(e.transition=t,nl(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function By(e,t=!1,n){let i=[],o=0;for(let s=0;s<e.length;s++){let r=e[s];const a=n==null?r.key:String(n)+String(r.key!=null?r.key:s);r.type===Ce?(r.patchFlag&128&&o++,i=i.concat(By(r.children,t,a))):(t||r.type!==_i)&&i.push(a!=null?Qr(r,{key:a}):r)}if(o>1)for(let s=0;s<i.length;s++)i[s].patchFlag=-2;return i}/*! #__NO_SIDE_EFFECTS__ */function em(e,t){return ft(e)?Ln({name:e.name},t,{setup:e}):e}function cS(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function Nf(e){const t=ku(),n=O7(null);if(t){const o=t.refs===Wt?t.refs={}:t.refs;Object.defineProperty(o,e,{enumerable:!0,get:()=>n.value,set:s=>n.value=s})}return n}function Bf(e,t,n,i,o=!1){if(qe(e)){e.forEach((v,w)=>Bf(v,t&&(qe(t)?t[w]:t),n,i,o));return}if(tc(i)&&!o){i.shapeFlag&512&&i.type.__asyncResolved&&i.component.subTree.component&&Bf(e,t,n,i.component.subTree);return}const s=i.shapeFlag&4?sm(i.component):i.el,r=o?null:s,{i:a,r:l}=e,c=t&&t.r,u=a.refs===Wt?a.refs={}:a.refs,f=a.setupState,m=Dt(f),g=f===Wt?()=>!1:v=>Nt(m,v);if(c!=null&&c!==l&&(dn(c)?(u[c]=null,g(c)&&(f[c]=null)):wn(c)&&(c.value=null)),ft(l))Cu(l,a,12,[r,u]);else{const v=dn(l),w=wn(l);if(v||w){const _=()=>{if(e.f){const k=v?g(l)?f[l]:u[l]:l.value;o?qe(k)&&$y(k,s):qe(k)?k.includes(s)||k.push(s):v?(u[l]=[s],g(l)&&(f[l]=u[l])):(l.value=[s],e.k&&(u[e.k]=l.value))}else v?(u[l]=r,g(l)&&(f[l]=r)):w&&(l.value=r,e.k&&(u[e.k]=r))};r?(_.id=-1,Gi(_,n)):_()}}}Gp().requestIdleCallback;Gp().cancelIdleCallback;const tc=e=>!!e.type.__asyncLoader,tm=e=>e.type.__isKeepAlive;function G7(e,t){dS(e,"a",t)}function J7(e,t){dS(e,"da",t)}function dS(e,t,n=Vn){const i=e.__wdc||(e.__wdc=()=>{let o=n;for(;o;){if(o.isDeactivated)return;o=o.parent}return e()});if(nm(t,i,n),n){let o=n.parent;for(;o&&o.parent;)tm(o.parent.vnode)&&Y7(i,t,n,o),o=o.parent}}function Y7(e,t,n,i){const o=nm(t,e,i,!0);Au(()=>{$y(i[t],o)},n)}function nm(e,t,n=Vn,i=!1){if(n){const o=n[e]||(n[e]=[]),s=t.__weh||(t.__weh=(...r)=>{ca();const a=Su(n),l=jo(t,n,e,r);return a(),da(),l});return i?o.unshift(s):o.push(s),s}}const ar=e=>(t,n=Vn)=>{(!Xd||e==="sp")&&nm(e,(...i)=>t(...i),n)},Z7=ar("bm"),As=ar("m"),X7=ar("bu"),uS=ar("u"),pl=ar("bum"),Au=ar("um"),Q7=ar("sp"),e9=ar("rtg"),t9=ar("rtc");function n9(e,t=Vn){nm("ec",e,t)}const Fy="components",i9="directives";function E(e,t){return Wy(Fy,e,!0,t)||e}const hS=Symbol.for("v-ndc");function et(e){return dn(e)?Wy(Fy,e,!1)||e:e||hS}function xi(e){return Wy(i9,e)}function Wy(e,t,n=!0,i=!1){const o=In||Vn;if(o){const s=o.type;if(e===Fy){const a=j9(s,!1);if(a&&(a===t||a===To(t)||a===Kp(To(t))))return s}const r=U_(o[e]||s[e],t)||U_(o.appContext[e],t);return!r&&i?s:r}}function U_(e,t){return e&&(e[t]||e[To(t)]||e[Kp(To(t))])}function Ie(e,t,n,i){let o;const s=n,r=qe(e);if(r||dn(e)){const a=r&&qr(e);let l=!1;a&&(l=!Co(e),e=Yp(e)),o=new Array(e.length);for(let c=0,u=e.length;c<u;c++)o[c]=t(l?li(e[c]):e[c],c,void 0,s)}else if(typeof e=="number"){o=new Array(e);for(let a=0;a<e;a++)o[a]=t(a+1,a,void 0,s)}else if(Kt(e))if(e[Symbol.iterator])o=Array.from(e,(a,l)=>t(a,l,void 0,s));else{const a=Object.keys(e);o=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const u=a[l];o[l]=t(e[u],u,l,s)}}else o=[];return o}function il(e,t){for(let n=0;n<t.length;n++){const i=t[n];if(qe(i))for(let o=0;o<i.length;o++)e[i[o].name]=i[o].fn;else i&&(e[i.name]=i.key?(...o)=>{const s=i.fn(...o);return s&&(s.key=i.key),s}:i.fn)}return e}function gt(e,t,n={},i,o){if(In.ce||In.parent&&tc(In.parent)&&In.parent.ce)return t!=="default"&&(n.name=t),p(),R(Ce,null,[D("slot",n,i&&i())],64);let s=e[t];s&&s._c&&(s._d=!1),p();const r=s&&fS(s(n)),a=n.key||r&&r.key,l=R(Ce,{key:(a&&!Uo(a)?a:`_${t}`)+(!r&&i?"_fb":"")},r||(i?i():[]),r&&e._===1?64:-2);return!o&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),s&&s._c&&(s._d=!0),l}function fS(e){return e.some(t=>Zd(t)?!(t.type===_i||t.type===Ce&&!fS(t.children)):!0)?e:null}function Ec(e,t){const n={};for(const i in e)n[t&&/[A-Z]/.test(i)?`on:${i}`:pf(i)]=e[i];return n}const db=e=>e?RS(e)?sm(e):db(e.parent):null,Ad=Ln(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>db(e.parent),$root:e=>db(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>bS(e),$forceUpdate:e=>e.f||(e.f=()=>{Ny(e.update)}),$nextTick:e=>e.n||(e.n=wo.bind(e.proxy)),$watch:e=>T9.bind(e)}),t1=(e,t)=>e!==Wt&&!e.__isScriptSetup&&Nt(e,t),o9={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:i,data:o,props:s,accessCache:r,type:a,appContext:l}=e;let c;if(t[0]!=="$"){const g=r[t];if(g!==void 0)switch(g){case 1:return i[t];case 2:return o[t];case 4:return n[t];case 3:return s[t]}else{if(t1(i,t))return r[t]=1,i[t];if(o!==Wt&&Nt(o,t))return r[t]=2,o[t];if((c=e.propsOptions[0])&&Nt(c,t))return r[t]=3,s[t];if(n!==Wt&&Nt(n,t))return r[t]=4,n[t];ub&&(r[t]=0)}}const u=Ad[t];let f,m;if(u)return t==="$attrs"&&ai(e.attrs,"get",""),u(e);if((f=a.__cssModules)&&(f=f[t]))return f;if(n!==Wt&&Nt(n,t))return r[t]=4,n[t];if(m=l.config.globalProperties,Nt(m,t))return m[t]},set({_:e},t,n){const{data:i,setupState:o,ctx:s}=e;return t1(o,t)?(o[t]=n,!0):i!==Wt&&Nt(i,t)?(i[t]=n,!0):Nt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(s[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:i,appContext:o,propsOptions:s}},r){let a;return!!n[r]||e!==Wt&&Nt(e,r)||t1(t,r)||(a=s[0])&&Nt(a,r)||Nt(i,r)||Nt(Ad,r)||Nt(o.config.globalProperties,r)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Nt(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function pS(){return mS().slots}function s9(){return mS().attrs}function mS(){const e=ku();return e.setupContext||(e.setupContext=HS(e))}function j_(e){return qe(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let ub=!0;function r9(e){const t=bS(e),n=e.proxy,i=e.ctx;ub=!1,t.beforeCreate&&q_(t.beforeCreate,e,"bc");const{data:o,computed:s,methods:r,watch:a,provide:l,inject:c,created:u,beforeMount:f,mounted:m,beforeUpdate:g,updated:v,activated:w,deactivated:_,beforeDestroy:k,beforeUnmount:L,destroyed:P,unmounted:M,render:F,renderTracked:z,renderTriggered:ee,errorCaptured:ie,serverPrefetch:K,expose:ae,inheritAttrs:B,components:J,directives:he,filters:ne}=t;if(c&&a9(c,i,null),r)for(const q in r){const Z=r[q];ft(Z)&&(i[q]=Z.bind(n))}if(o){const q=o.call(n,n);Kt(q)&&(e.data=Zp(q))}if(ub=!0,s)for(const q in s){const Z=s[q],N=ft(Z)?Z.bind(n,n):ft(Z.get)?Z.get.bind(n,n):fs,le=!ft(Z)&&ft(Z.set)?Z.set.bind(n):fs,ce=Je({get:N,set:le});Object.defineProperty(i,q,{enumerable:!0,configurable:!0,get:()=>ce.value,set:ye=>ce.value=ye})}if(a)for(const q in a)gS(a[q],i,n,q);if(l){const q=ft(l)?l.call(n):l;Reflect.ownKeys(q).forEach(Z=>{f9(Z,q[Z])})}u&&q_(u,e,"c");function W(q,Z){qe(Z)?Z.forEach(N=>q(N.bind(n))):Z&&q(Z.bind(n))}if(W(Z7,f),W(As,m),W(X7,g),W(uS,v),W(G7,w),W(J7,_),W(n9,ie),W(t9,z),W(e9,ee),W(pl,L),W(Au,M),W(Q7,K),qe(ae))if(ae.length){const q=e.exposed||(e.exposed={});ae.forEach(Z=>{Object.defineProperty(q,Z,{get:()=>n[Z],set:N=>n[Z]=N})})}else e.exposed||(e.exposed={});F&&e.render===fs&&(e.render=F),B!=null&&(e.inheritAttrs=B),J&&(e.components=J),he&&(e.directives=he),K&&cS(e)}function a9(e,t,n=fs){qe(e)&&(e=hb(e));for(const i in e){const o=e[i];let s;Kt(o)?"default"in o?s=tr(o.from||i,o.default,!0):s=tr(o.from||i):s=tr(o),wn(s)?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>s.value,set:r=>s.value=r}):t[i]=s}}function q_(e,t,n){jo(qe(e)?e.map(i=>i.bind(t.proxy)):e.bind(t.proxy),t,n)}function gS(e,t,n,i){let o=i.includes(".")?OS(n,i):()=>n[i];if(dn(e)){const s=t[e];ft(s)&&Fo(o,s)}else if(ft(e))Fo(o,e.bind(n));else if(Kt(e))if(qe(e))e.forEach(s=>gS(s,t,n,i));else{const s=ft(e.handler)?e.handler.bind(n):t[e.handler];ft(s)&&Fo(o,s,e)}}function bS(e){const t=e.type,{mixins:n,extends:i}=t,{mixins:o,optionsCache:s,config:{optionMergeStrategies:r}}=e.appContext,a=s.get(t);let l;return a?l=a:!o.length&&!n&&!i?l=t:(l={},o.length&&o.forEach(c=>Ff(l,c,r,!0)),Ff(l,t,r)),Kt(t)&&s.set(t,l),l}function Ff(e,t,n,i=!1){const{mixins:o,extends:s}=t;s&&Ff(e,s,n,!0),o&&o.forEach(r=>Ff(e,r,n,!0));for(const r in t)if(!(i&&r==="expose")){const a=l9[r]||n&&n[r];e[r]=a?a(e[r],t[r]):t[r]}return e}const l9={data:K_,props:G_,emits:G_,methods:ud,computed:ud,beforeCreate:gi,created:gi,beforeMount:gi,mounted:gi,beforeUpdate:gi,updated:gi,beforeDestroy:gi,beforeUnmount:gi,destroyed:gi,unmounted:gi,activated:gi,deactivated:gi,errorCaptured:gi,serverPrefetch:gi,components:ud,directives:ud,watch:d9,provide:K_,inject:c9};function K_(e,t){return t?e?function(){return Ln(ft(e)?e.call(this,this):e,ft(t)?t.call(this,this):t)}:t:e}function c9(e,t){return ud(hb(e),hb(t))}function hb(e){if(qe(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function gi(e,t){return e?[...new Set([].concat(e,t))]:t}function ud(e,t){return e?Ln(Object.create(null),e,t):t}function G_(e,t){return e?qe(e)&&qe(t)?[...new Set([...e,...t])]:Ln(Object.create(null),j_(e),j_(t??{})):t}function d9(e,t){if(!e)return t;if(!t)return e;const n=Ln(Object.create(null),e);for(const i in t)n[i]=gi(e[i],t[i]);return n}function yS(){return{app:null,config:{isNativeTag:J6,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let u9=0;function h9(e,t){return function(i,o=null){ft(i)||(i=Ln({},i)),o!=null&&!Kt(o)&&(o=null);const s=yS(),r=new WeakSet,a=[];let l=!1;const c=s.app={_uid:u9++,_component:i,_props:o,_container:null,_context:s,_instance:null,version:K9,get config(){return s.config},set config(u){},use(u,...f){return r.has(u)||(u&&ft(u.install)?(r.add(u),u.install(c,...f)):ft(u)&&(r.add(u),u(c,...f))),c},mixin(u){return s.mixins.includes(u)||s.mixins.push(u),c},component(u,f){return f?(s.components[u]=f,c):s.components[u]},directive(u,f){return f?(s.directives[u]=f,c):s.directives[u]},mount(u,f,m){if(!l){const g=c._ceVNode||D(i,o);return g.appContext=s,m===!0?m="svg":m===!1&&(m=void 0),e(g,u,m),l=!0,c._container=u,u.__vue_app__=c,sm(g.component)}},onUnmount(u){a.push(u)},unmount(){l&&(jo(a,c._instance,16),e(null,c._container),delete c._container.__vue_app__)},provide(u,f){return s.provides[u]=f,c},runWithContext(u){const f=Ka;Ka=c;try{return u()}finally{Ka=f}}};return c}}let Ka=null;function f9(e,t){if(Vn){let n=Vn.provides;const i=Vn.parent&&Vn.parent.provides;i===n&&(n=Vn.provides=Object.create(i)),n[e]=t}}function tr(e,t,n=!1){const i=Vn||In;if(i||Ka){const o=Ka?Ka._context.provides:i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(o&&e in o)return o[e];if(arguments.length>1)return n&&ft(t)?t.call(i&&i.proxy):t}}function p9(){return!!(Vn||In||Ka)}const vS={},wS=()=>Object.create(vS),_S=e=>Object.getPrototypeOf(e)===vS;function m9(e,t,n,i=!1){const o={},s=wS();e.propsDefaults=Object.create(null),CS(e,t,o,s);for(const r in e.propsOptions[0])r in o||(o[r]=void 0);n?e.props=i?o:E7(o):e.type.props?e.props=o:e.props=s,e.attrs=s}function g9(e,t,n,i){const{props:o,attrs:s,vnode:{patchFlag:r}}=e,a=Dt(o),[l]=e.propsOptions;let c=!1;if((i||r>0)&&!(r&16)){if(r&8){const u=e.vnode.dynamicProps;for(let f=0;f<u.length;f++){let m=u[f];if(im(e.emitsOptions,m))continue;const g=t[m];if(l)if(Nt(s,m))g!==s[m]&&(s[m]=g,c=!0);else{const v=To(m);o[v]=fb(l,a,v,g,e,!1)}else g!==s[m]&&(s[m]=g,c=!0)}}}else{CS(e,t,o,s)&&(c=!0);let u;for(const f in a)(!t||!Nt(t,f)&&((u=la(f))===f||!Nt(t,u)))&&(l?n&&(n[f]!==void 0||n[u]!==void 0)&&(o[f]=fb(l,a,f,void 0,e,!0)):delete o[f]);if(s!==a)for(const f in s)(!t||!Nt(t,f))&&(delete s[f],c=!0)}c&&Gs(e.attrs,"set","")}function CS(e,t,n,i){const[o,s]=e.propsOptions;let r=!1,a;if(t)for(let l in t){if(wd(l))continue;const c=t[l];let u;o&&Nt(o,u=To(l))?!s||!s.includes(u)?n[u]=c:(a||(a={}))[u]=c:im(e.emitsOptions,l)||(!(l in i)||c!==i[l])&&(i[l]=c,r=!0)}if(s){const l=Dt(n),c=a||Wt;for(let u=0;u<s.length;u++){const f=s[u];n[f]=fb(o,l,f,c[f],e,!Nt(c,f))}}return r}function fb(e,t,n,i,o,s){const r=e[n];if(r!=null){const a=Nt(r,"default");if(a&&i===void 0){const l=r.default;if(r.type!==Function&&!r.skipFactory&&ft(l)){const{propsDefaults:c}=o;if(n in c)i=c[n];else{const u=Su(o);i=c[n]=l.call(null,t),u()}}else i=l;o.ce&&o.ce._setProp(n,i)}r[0]&&(s&&!a?i=!1:r[1]&&(i===""||i===la(n))&&(i=!0))}return i}const b9=new WeakMap;function AS(e,t,n=!1){const i=n?b9:t.propsCache,o=i.get(e);if(o)return o;const s=e.props,r={},a=[];let l=!1;if(!ft(e)){const u=f=>{l=!0;const[m,g]=AS(f,t,!0);Ln(r,m),g&&a.push(...g)};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!s&&!l)return Kt(e)&&i.set(e,Xl),Xl;if(qe(s))for(let u=0;u<s.length;u++){const f=To(s[u]);J_(f)&&(r[f]=Wt)}else if(s)for(const u in s){const f=To(u);if(J_(f)){const m=s[u],g=r[f]=qe(m)||ft(m)?{type:m}:Ln({},m),v=g.type;let w=!1,_=!0;if(qe(v))for(let k=0;k<v.length;++k){const L=v[k],P=ft(L)&&L.name;if(P==="Boolean"){w=!0;break}else P==="String"&&(_=!1)}else w=ft(v)&&v.name==="Boolean";g[0]=w,g[1]=_,(w||Nt(g,"default"))&&a.push(f)}}const c=[r,a];return Kt(e)&&i.set(e,c),c}function J_(e){return e[0]!=="$"&&!wd(e)}const kS=e=>e[0]==="_"||e==="$stable",Uy=e=>qe(e)?e.map(ls):[ls(e)],y9=(e,t,n)=>{if(t._n)return t;const i=Q((...o)=>Uy(t(...o)),n);return i._c=!1,i},SS=(e,t,n)=>{const i=e._ctx;for(const o in e){if(kS(o))continue;const s=e[o];if(ft(s))t[o]=y9(o,s,i);else if(s!=null){const r=Uy(s);t[o]=()=>r}}},xS=(e,t)=>{const n=Uy(t);e.slots.default=()=>n},MS=(e,t,n)=>{for(const i in t)(n||i!=="_")&&(e[i]=t[i])},v9=(e,t,n)=>{const i=e.slots=wS();if(e.vnode.shapeFlag&32){const o=t._;o?(MS(i,t,n),n&&Tk(i,"_",o,!0)):SS(t,i)}else t&&xS(e,t)},w9=(e,t,n)=>{const{vnode:i,slots:o}=e;let s=!0,r=Wt;if(i.shapeFlag&32){const a=t._;a?n&&a===1?s=!1:MS(o,t,n):(s=!t.$stable,SS(t,o)),r=t}else t&&(xS(e,t),r={default:1});if(s)for(const a in o)!kS(a)&&r[a]==null&&delete o[a]},Gi=R9;function _9(e){return C9(e)}function C9(e,t){const n=Gp();n.__VUE__=!0;const{insert:i,remove:o,patchProp:s,createElement:r,createText:a,createComment:l,setText:c,setElementText:u,parentNode:f,nextSibling:m,setScopeId:g=fs,insertStaticContent:v}=e,w=(V,j,se,we=null,ve=null,ge=null,Ee=void 0,xe=null,Ae=!!j.dynamicChildren)=>{if(V===j)return;V&&!za(V,j)&&(we=ot(V),ye(V,ve,ge,!0),V=null),j.patchFlag===-2&&(Ae=!1,j.dynamicChildren=null);const{type:me,ref:Ne,shapeFlag:Me}=j;switch(me){case om:_(V,j,se,we);break;case _i:k(V,j,se,we);break;case gf:V==null&&L(j,se,we,Ee);break;case Ce:J(V,j,se,we,ve,ge,Ee,xe,Ae);break;default:Me&1?F(V,j,se,we,ve,ge,Ee,xe,Ae):Me&6?he(V,j,se,we,ve,ge,Ee,xe,Ae):(Me&64||Me&128)&&me.process(V,j,se,we,ve,ge,Ee,xe,Ae,pt)}Ne!=null&&ve&&Bf(Ne,V&&V.ref,ge,j||V,!j)},_=(V,j,se,we)=>{if(V==null)i(j.el=a(j.children),se,we);else{const ve=j.el=V.el;j.children!==V.children&&c(ve,j.children)}},k=(V,j,se,we)=>{V==null?i(j.el=l(j.children||""),se,we):j.el=V.el},L=(V,j,se,we)=>{[V.el,V.anchor]=v(V.children,j,se,we,V.el,V.anchor)},P=({el:V,anchor:j},se,we)=>{let ve;for(;V&&V!==j;)ve=m(V),i(V,se,we),V=ve;i(j,se,we)},M=({el:V,anchor:j})=>{let se;for(;V&&V!==j;)se=m(V),o(V),V=se;o(j)},F=(V,j,se,we,ve,ge,Ee,xe,Ae)=>{j.type==="svg"?Ee="svg":j.type==="math"&&(Ee="mathml"),V==null?z(j,se,we,ve,ge,Ee,xe,Ae):K(V,j,ve,ge,Ee,xe,Ae)},z=(V,j,se,we,ve,ge,Ee,xe)=>{let Ae,me;const{props:Ne,shapeFlag:Me,transition:Fe,dirs:je}=V;if(Ae=V.el=r(V.type,ge,Ne&&Ne.is,Ne),Me&8?u(Ae,V.children):Me&16&&ie(V.children,Ae,null,we,ve,n1(V,ge),Ee,xe),je&&Oa(V,null,we,"created"),ee(Ae,V,V.scopeId,Ee,we),Ne){for(const kt in Ne)kt!=="value"&&!wd(kt)&&s(Ae,kt,null,Ne[kt],ge,we);"value"in Ne&&s(Ae,"value",null,Ne.value,ge),(me=Ne.onVnodeBeforeMount)&&es(me,we,V)}je&&Oa(V,null,we,"beforeMount");const bt=A9(ve,Fe);bt&&Fe.beforeEnter(Ae),i(Ae,j,se),((me=Ne&&Ne.onVnodeMounted)||bt||je)&&Gi(()=>{me&&es(me,we,V),bt&&Fe.enter(Ae),je&&Oa(V,null,we,"mounted")},ve)},ee=(V,j,se,we,ve)=>{if(se&&g(V,se),we)for(let ge=0;ge<we.length;ge++)g(V,we[ge]);if(ve){let ge=ve.subTree;if(j===ge||IS(ge.type)&&(ge.ssContent===j||ge.ssFallback===j)){const Ee=ve.vnode;ee(V,Ee,Ee.scopeId,Ee.slotScopeIds,ve.parent)}}},ie=(V,j,se,we,ve,ge,Ee,xe,Ae=0)=>{for(let me=Ae;me<V.length;me++){const Ne=V[me]=xe?Or(V[me]):ls(V[me]);w(null,Ne,j,se,we,ve,ge,Ee,xe)}},K=(V,j,se,we,ve,ge,Ee)=>{const xe=j.el=V.el;let{patchFlag:Ae,dynamicChildren:me,dirs:Ne}=j;Ae|=V.patchFlag&16;const Me=V.props||Wt,Fe=j.props||Wt;let je;if(se&&$a(se,!1),(je=Fe.onVnodeBeforeUpdate)&&es(je,se,j,V),Ne&&Oa(j,V,se,"beforeUpdate"),se&&$a(se,!0),(Me.innerHTML&&Fe.innerHTML==null||Me.textContent&&Fe.textContent==null)&&u(xe,""),me?ae(V.dynamicChildren,me,xe,se,we,n1(j,ve),ge):Ee||Z(V,j,xe,null,se,we,n1(j,ve),ge,!1),Ae>0){if(Ae&16)B(xe,Me,Fe,se,ve);else if(Ae&2&&Me.class!==Fe.class&&s(xe,"class",null,Fe.class,ve),Ae&4&&s(xe,"style",Me.style,Fe.style,ve),Ae&8){const bt=j.dynamicProps;for(let kt=0;kt<bt.length;kt++){const yt=bt[kt],Mn=Me[yt],_n=Fe[yt];(_n!==Mn||yt==="value")&&s(xe,yt,Mn,_n,ve,se)}}Ae&1&&V.children!==j.children&&u(xe,j.children)}else!Ee&&me==null&&B(xe,Me,Fe,se,ve);((je=Fe.onVnodeUpdated)||Ne)&&Gi(()=>{je&&es(je,se,j,V),Ne&&Oa(j,V,se,"updated")},we)},ae=(V,j,se,we,ve,ge,Ee)=>{for(let xe=0;xe<j.length;xe++){const Ae=V[xe],me=j[xe],Ne=Ae.el&&(Ae.type===Ce||!za(Ae,me)||Ae.shapeFlag&70)?f(Ae.el):se;w(Ae,me,Ne,null,we,ve,ge,Ee,!0)}},B=(V,j,se,we,ve)=>{if(j!==se){if(j!==Wt)for(const ge in j)!wd(ge)&&!(ge in se)&&s(V,ge,j[ge],null,ve,we);for(const ge in se){if(wd(ge))continue;const Ee=se[ge],xe=j[ge];Ee!==xe&&ge!=="value"&&s(V,ge,xe,Ee,ve,we)}"value"in se&&s(V,"value",j.value,se.value,ve)}},J=(V,j,se,we,ve,ge,Ee,xe,Ae)=>{const me=j.el=V?V.el:a(""),Ne=j.anchor=V?V.anchor:a("");let{patchFlag:Me,dynamicChildren:Fe,slotScopeIds:je}=j;je&&(xe=xe?xe.concat(je):je),V==null?(i(me,se,we),i(Ne,se,we),ie(j.children||[],se,Ne,ve,ge,Ee,xe,Ae)):Me>0&&Me&64&&Fe&&V.dynamicChildren?(ae(V.dynamicChildren,Fe,se,ve,ge,Ee,xe),(j.key!=null||ve&&j===ve.subTree)&&TS(V,j,!0)):Z(V,j,se,Ne,ve,ge,Ee,xe,Ae)},he=(V,j,se,we,ve,ge,Ee,xe,Ae)=>{j.slotScopeIds=xe,V==null?j.shapeFlag&512?ve.ctx.activate(j,se,we,Ee,Ae):ne(j,se,we,ve,ge,Ee,Ae):oe(V,j,Ae)},ne=(V,j,se,we,ve,ge,Ee)=>{const xe=V.component=B9(V,we,ve);if(tm(V)&&(xe.ctx.renderer=pt),F9(xe,!1,Ee),xe.asyncDep){if(ve&&ve.registerDep(xe,W,Ee),!V.el){const Ae=xe.subTree=D(_i);k(null,Ae,j,se)}}else W(xe,V,j,se,ve,ge,Ee)},oe=(V,j,se)=>{const we=j.component=V.component;if(L9(V,j,se))if(we.asyncDep&&!we.asyncResolved){q(we,j,se);return}else we.next=j,we.update();else j.el=V.el,we.vnode=j},W=(V,j,se,we,ve,ge,Ee)=>{const xe=()=>{if(V.isMounted){let{next:Me,bu:Fe,u:je,parent:bt,vnode:kt}=V;{const ti=ES(V);if(ti){Me&&(Me.el=kt.el,q(V,Me,Ee)),ti.asyncDep.then(()=>{V.isUnmounted||xe()});return}}let yt=Me,Mn;$a(V,!1),Me?(Me.el=kt.el,q(V,Me,Ee)):Me=kt,Fe&&mf(Fe),(Mn=Me.props&&Me.props.onVnodeBeforeUpdate)&&es(Mn,bt,Me,kt),$a(V,!0);const _n=Z_(V),ei=V.subTree;V.subTree=_n,w(ei,_n,f(ei.el),ot(ei),V,ve,ge),Me.el=_n.el,yt===null&&D9(V,_n.el),je&&Gi(je,ve),(Mn=Me.props&&Me.props.onVnodeUpdated)&&Gi(()=>es(Mn,bt,Me,kt),ve)}else{let Me;const{el:Fe,props:je}=j,{bm:bt,m:kt,parent:yt,root:Mn,type:_n}=V,ei=tc(j);$a(V,!1),bt&&mf(bt),!ei&&(Me=je&&je.onVnodeBeforeMount)&&es(Me,yt,j),$a(V,!0);{Mn.ce&&Mn.ce._injectChildStyle(_n);const ti=V.subTree=Z_(V);w(null,ti,se,we,V,ve,ge),j.el=ti.el}if(kt&&Gi(kt,ve),!ei&&(Me=je&&je.onVnodeMounted)){const ti=j;Gi(()=>es(Me,yt,ti),ve)}(j.shapeFlag&256||yt&&tc(yt.vnode)&&yt.vnode.shapeFlag&256)&&V.a&&Gi(V.a,ve),V.isMounted=!0,j=se=we=null}};V.scope.on();const Ae=V.effect=new Rk(xe);V.scope.off();const me=V.update=Ae.run.bind(Ae),Ne=V.job=Ae.runIfDirty.bind(Ae);Ne.i=V,Ne.id=V.uid,Ae.scheduler=()=>Ny(Ne),$a(V,!0),me()},q=(V,j,se)=>{j.component=V;const we=V.vnode.props;V.vnode=j,V.next=null,g9(V,j.props,we,se),w9(V,j.children,se),ca(),F_(V),da()},Z=(V,j,se,we,ve,ge,Ee,xe,Ae=!1)=>{const me=V&&V.children,Ne=V?V.shapeFlag:0,Me=j.children,{patchFlag:Fe,shapeFlag:je}=j;if(Fe>0){if(Fe&128){le(me,Me,se,we,ve,ge,Ee,xe,Ae);return}else if(Fe&256){N(me,Me,se,we,ve,ge,Ee,xe,Ae);return}}je&8?(Ne&16&&He(me,ve,ge),Me!==me&&u(se,Me)):Ne&16?je&16?le(me,Me,se,we,ve,ge,Ee,xe,Ae):He(me,ve,ge,!0):(Ne&8&&u(se,""),je&16&&ie(Me,se,we,ve,ge,Ee,xe,Ae))},N=(V,j,se,we,ve,ge,Ee,xe,Ae)=>{V=V||Xl,j=j||Xl;const me=V.length,Ne=j.length,Me=Math.min(me,Ne);let Fe;for(Fe=0;Fe<Me;Fe++){const je=j[Fe]=Ae?Or(j[Fe]):ls(j[Fe]);w(V[Fe],je,se,null,ve,ge,Ee,xe,Ae)}me>Ne?He(V,ve,ge,!0,!1,Me):ie(j,se,we,ve,ge,Ee,xe,Ae,Me)},le=(V,j,se,we,ve,ge,Ee,xe,Ae)=>{let me=0;const Ne=j.length;let Me=V.length-1,Fe=Ne-1;for(;me<=Me&&me<=Fe;){const je=V[me],bt=j[me]=Ae?Or(j[me]):ls(j[me]);if(za(je,bt))w(je,bt,se,null,ve,ge,Ee,xe,Ae);else break;me++}for(;me<=Me&&me<=Fe;){const je=V[Me],bt=j[Fe]=Ae?Or(j[Fe]):ls(j[Fe]);if(za(je,bt))w(je,bt,se,null,ve,ge,Ee,xe,Ae);else break;Me--,Fe--}if(me>Me){if(me<=Fe){const je=Fe+1,bt=je<Ne?j[je].el:we;for(;me<=Fe;)w(null,j[me]=Ae?Or(j[me]):ls(j[me]),se,bt,ve,ge,Ee,xe,Ae),me++}}else if(me>Fe)for(;me<=Me;)ye(V[me],ve,ge,!0),me++;else{const je=me,bt=me,kt=new Map;for(me=bt;me<=Fe;me++){const $e=j[me]=Ae?Or(j[me]):ls(j[me]);$e.key!=null&&kt.set($e.key,me)}let yt,Mn=0;const _n=Fe-bt+1;let ei=!1,ti=0;const Io=new Array(_n);for(me=0;me<_n;me++)Io[me]=0;for(me=je;me<=Me;me++){const $e=V[me];if(Mn>=_n){ye($e,ve,ge,!0);continue}let Be;if($e.key!=null)Be=kt.get($e.key);else for(yt=bt;yt<=Fe;yt++)if(Io[yt-bt]===0&&za($e,j[yt])){Be=yt;break}Be===void 0?ye($e,ve,ge,!0):(Io[Be-bt]=me+1,Be>=ti?ti=Be:ei=!0,w($e,j[Be],se,null,ve,ge,Ee,xe,Ae),Mn++)}const de=ei?k9(Io):Xl;for(yt=de.length-1,me=_n-1;me>=0;me--){const $e=bt+me,Be=j[$e],xt=$e+1<Ne?j[$e+1].el:we;Io[me]===0?w(null,Be,se,xt,ve,ge,Ee,xe,Ae):ei&&(yt<0||me!==de[yt]?ce(Be,se,xt,2):yt--)}}},ce=(V,j,se,we,ve=null)=>{const{el:ge,type:Ee,transition:xe,children:Ae,shapeFlag:me}=V;if(me&6){ce(V.component.subTree,j,se,we);return}if(me&128){V.suspense.move(j,se,we);return}if(me&64){Ee.move(V,j,se,pt);return}if(Ee===Ce){i(ge,j,se);for(let Me=0;Me<Ae.length;Me++)ce(Ae[Me],j,se,we);i(V.anchor,j,se);return}if(Ee===gf){P(V,j,se);return}if(we!==2&&me&1&&xe)if(we===0)xe.beforeEnter(ge),i(ge,j,se),Gi(()=>xe.enter(ge),ve);else{const{leave:Me,delayLeave:Fe,afterLeave:je}=xe,bt=()=>i(ge,j,se),kt=()=>{Me(ge,()=>{bt(),je&&je()})};Fe?Fe(ge,bt,kt):kt()}else i(ge,j,se)},ye=(V,j,se,we=!1,ve=!1)=>{const{type:ge,props:Ee,ref:xe,children:Ae,dynamicChildren:me,shapeFlag:Ne,patchFlag:Me,dirs:Fe,cacheIndex:je}=V;if(Me===-2&&(ve=!1),xe!=null&&Bf(xe,null,se,V,!0),je!=null&&(j.renderCache[je]=void 0),Ne&256){j.ctx.deactivate(V);return}const bt=Ne&1&&Fe,kt=!tc(V);let yt;if(kt&&(yt=Ee&&Ee.onVnodeBeforeUnmount)&&es(yt,j,V),Ne&6)Se(V.component,se,we);else{if(Ne&128){V.suspense.unmount(se,we);return}bt&&Oa(V,null,j,"beforeUnmount"),Ne&64?V.type.remove(V,j,se,pt,we):me&&!me.hasOnce&&(ge!==Ce||Me>0&&Me&64)?He(me,j,se,!1,!0):(ge===Ce&&Me&384||!ve&&Ne&16)&&He(Ae,j,se),we&&Le(V)}(kt&&(yt=Ee&&Ee.onVnodeUnmounted)||bt)&&Gi(()=>{yt&&es(yt,j,V),bt&&Oa(V,null,j,"unmounted")},se)},Le=V=>{const{type:j,el:se,anchor:we,transition:ve}=V;if(j===Ce){Re(se,we);return}if(j===gf){M(V);return}const ge=()=>{o(se),ve&&!ve.persisted&&ve.afterLeave&&ve.afterLeave()};if(V.shapeFlag&1&&ve&&!ve.persisted){const{leave:Ee,delayLeave:xe}=ve,Ae=()=>Ee(se,ge);xe?xe(V.el,ge,Ae):Ae()}else ge()},Re=(V,j)=>{let se;for(;V!==j;)se=m(V),o(V),V=se;o(j)},Se=(V,j,se)=>{const{bum:we,scope:ve,job:ge,subTree:Ee,um:xe,m:Ae,a:me}=V;Y_(Ae),Y_(me),we&&mf(we),ve.stop(),ge&&(ge.flags|=8,ye(Ee,V,j,se)),xe&&Gi(xe,j),Gi(()=>{V.isUnmounted=!0},j),j&&j.pendingBranch&&!j.isUnmounted&&V.asyncDep&&!V.asyncResolved&&V.suspenseId===j.pendingId&&(j.deps--,j.deps===0&&j.resolve())},He=(V,j,se,we=!1,ve=!1,ge=0)=>{for(let Ee=ge;Ee<V.length;Ee++)ye(V[Ee],j,se,we,ve)},ot=V=>{if(V.shapeFlag&6)return ot(V.component.subTree);if(V.shapeFlag&128)return V.suspense.next();const j=m(V.anchor||V.el),se=j&&j[j7];return se?m(se):j};let lt=!1;const Lt=(V,j,se)=>{V==null?j._vnode&&ye(j._vnode,null,null,!0):w(j._vnode||null,V,j,null,null,null,se),j._vnode=V,lt||(lt=!0,F_(),eS(),lt=!1)},pt={p:w,um:ye,m:ce,r:Le,mt:ne,mc:ie,pc:Z,pbc:ae,n:ot,o:e};return{render:Lt,hydrate:void 0,createApp:h9(Lt)}}function n1({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function $a({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function A9(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function TS(e,t,n=!1){const i=e.children,o=t.children;if(qe(i)&&qe(o))for(let s=0;s<i.length;s++){const r=i[s];let a=o[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=o[s]=Or(o[s]),a.el=r.el),!n&&a.patchFlag!==-2&&TS(r,a)),a.type===om&&(a.el=r.el)}}function k9(e){const t=e.slice(),n=[0];let i,o,s,r,a;const l=e.length;for(i=0;i<l;i++){const c=e[i];if(c!==0){if(o=n[n.length-1],e[o]<c){t[i]=o,n.push(i);continue}for(s=0,r=n.length-1;s<r;)a=s+r>>1,e[n[a]]<c?s=a+1:r=a;c<e[n[s]]&&(s>0&&(t[i]=n[s-1]),n[s]=i)}}for(s=n.length,r=n[s-1];s-- >0;)n[s]=r,r=t[r];return n}function ES(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:ES(t)}function Y_(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const S9=Symbol.for("v-scx"),x9=()=>tr(S9);function M9(e,t){return jy(e,null,t)}function Fo(e,t,n){return jy(e,t,n)}function jy(e,t,n=Wt){const{immediate:i,deep:o,flush:s,once:r}=n,a=Ln({},n),l=t&&i||!t&&s!=="post";let c;if(Xd){if(s==="sync"){const g=x9();c=g.__watcherHandles||(g.__watcherHandles=[])}else if(!l){const g=()=>{};return g.stop=fs,g.resume=fs,g.pause=fs,g}}const u=Vn;a.call=(g,v,w)=>jo(g,u,v,w);let f=!1;s==="post"?a.scheduler=g=>{Gi(g,u&&u.suspense)}:s!=="sync"&&(f=!0,a.scheduler=(g,v)=>{v?g():Ny(g)}),a.augmentJob=g=>{t&&(g.flags|=4),f&&(g.flags|=2,u&&(g.id=u.uid,g.i=u))};const m=B7(e,t,a);return Xd&&(c?c.push(m):l&&m()),m}function T9(e,t,n){const i=this.proxy,o=dn(e)?e.includes(".")?OS(i,e):()=>i[e]:e.bind(i,i);let s;ft(t)?s=t:(s=t.handler,n=t);const r=Su(this),a=jy(o,s.bind(i),n);return r(),a}function OS(e,t){const n=t.split(".");return()=>{let i=e;for(let o=0;o<n.length&&i;o++)i=i[n[o]];return i}}const E9=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${To(t)}Modifiers`]||e[`${la(t)}Modifiers`];function O9(e,t,...n){if(e.isUnmounted)return;const i=e.vnode.props||Wt;let o=n;const s=t.startsWith("update:"),r=s&&E9(i,t.slice(7));r&&(r.trim&&(o=n.map(u=>dn(u)?u.trim():u)),r.number&&(o=n.map(Rf)));let a,l=i[a=pf(t)]||i[a=pf(To(t))];!l&&s&&(l=i[a=pf(la(t))]),l&&jo(l,e,6,o);const c=i[a+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,jo(c,e,6,o)}}function $S(e,t,n=!1){const i=t.emitsCache,o=i.get(e);if(o!==void 0)return o;const s=e.emits;let r={},a=!1;if(!ft(e)){const l=c=>{const u=$S(c,t,!0);u&&(a=!0,Ln(r,u))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!s&&!a?(Kt(e)&&i.set(e,null),null):(qe(s)?s.forEach(l=>r[l]=null):Ln(r,s),Kt(e)&&i.set(e,r),r)}function im(e,t){return!e||!jp(t)?!1:(t=t.slice(2).replace(/Once$/,""),Nt(e,t[0].toLowerCase()+t.slice(1))||Nt(e,la(t))||Nt(e,t))}function Z_(e){const{type:t,vnode:n,proxy:i,withProxy:o,propsOptions:[s],slots:r,attrs:a,emit:l,render:c,renderCache:u,props:f,data:m,setupState:g,ctx:v,inheritAttrs:w}=e,_=zf(e);let k,L;try{if(n.shapeFlag&4){const M=o||i,F=M;k=ls(c.call(F,M,u,f,g,m,v)),L=a}else{const M=t;k=ls(M.length>1?M(f,{attrs:a,slots:r,emit:l}):M(f,null)),L=t.props?a:$9(a)}}catch(M){kd.length=0,Qp(M,e,1),k=D(_i)}let P=k;if(L&&w!==!1){const M=Object.keys(L),{shapeFlag:F}=P;M.length&&F&7&&(s&&M.some(Oy)&&(L=I9(L,s)),P=Qr(P,L,!1,!0))}return n.dirs&&(P=Qr(P,null,!1,!0),P.dirs=P.dirs?P.dirs.concat(n.dirs):n.dirs),n.transition&&nl(P,n.transition),k=P,zf(_),k}const $9=e=>{let t;for(const n in e)(n==="class"||n==="style"||jp(n))&&((t||(t={}))[n]=e[n]);return t},I9=(e,t)=>{const n={};for(const i in e)(!Oy(i)||!(i.slice(9)in t))&&(n[i]=e[i]);return n};function L9(e,t,n){const{props:i,children:o,component:s}=e,{props:r,children:a,patchFlag:l}=t,c=s.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return i?X_(i,r,c):!!r;if(l&8){const u=t.dynamicProps;for(let f=0;f<u.length;f++){const m=u[f];if(r[m]!==i[m]&&!im(c,m))return!0}}}else return(o||a)&&(!a||!a.$stable)?!0:i===r?!1:i?r?X_(i,r,c):!0:!!r;return!1}function X_(e,t,n){const i=Object.keys(t);if(i.length!==Object.keys(e).length)return!0;for(let o=0;o<i.length;o++){const s=i[o];if(t[s]!==e[s]&&!im(n,s))return!0}return!1}function D9({vnode:e,parent:t},n){for(;t;){const i=t.subTree;if(i.suspense&&i.suspense.activeBranch===e&&(i.el=e.el),i===e)(e=t.vnode).el=n,t=t.parent;else break}}const IS=e=>e.__isSuspense;function R9(e,t){t&&t.pendingBranch?qe(e)?t.effects.push(...e):t.effects.push(e):U7(e)}const Ce=Symbol.for("v-fgt"),om=Symbol.for("v-txt"),_i=Symbol.for("v-cmt"),gf=Symbol.for("v-stc"),kd=[];let Xi=null;function p(e=!1){kd.push(Xi=e?null:[])}function P9(){kd.pop(),Xi=kd[kd.length-1]||null}let Yd=1;function Q_(e,t=!1){Yd+=e,e<0&&Xi&&t&&(Xi.hasOnce=!0)}function LS(e){return e.dynamicChildren=Yd>0?Xi||Xl:null,P9(),Yd>0&&Xi&&Xi.push(e),e}function y(e,t,n,i,o,s){return LS(A(e,t,n,i,o,s,!0))}function R(e,t,n,i,o){return LS(D(e,t,n,i,o,!0))}function Zd(e){return e?e.__v_isVNode===!0:!1}function za(e,t){return e.type===t.type&&e.key===t.key}const DS=({key:e})=>e??null,bf=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?dn(e)||wn(e)||ft(e)?{i:In,r:e,k:t,f:!!n}:e:null);function A(e,t=null,n=null,i=0,o=null,s=e===Ce?0:1,r=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&DS(t),ref:t&&bf(t),scopeId:nS,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:i,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:In};return a?(qy(l,n),s&128&&e.normalize(l)):n&&(l.shapeFlag|=dn(n)?8:16),Yd>0&&!r&&Xi&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&Xi.push(l),l}const D=H9;function H9(e,t=null,n=null,i=0,o=null,s=!1){if((!e||e===hS)&&(e=_i),Zd(e)){const a=Qr(e,t,!0);return n&&qy(a,n),Yd>0&&!s&&Xi&&(a.shapeFlag&6?Xi[Xi.indexOf(e)]=a:Xi.push(a)),a.patchFlag=-2,a}if(q9(e)&&(e=e.__vccOpts),t){t=V9(t);let{class:a,style:l}=t;a&&!dn(a)&&(t.class=te(a)),Kt(l)&&(zy(l)&&!qe(l)&&(l=Ln({},l)),t.style=Vt(l))}const r=dn(e)?1:IS(e)?128:iS(e)?64:Kt(e)?4:ft(e)?2:0;return A(e,t,n,i,o,r,s,!0)}function V9(e){return e?zy(e)||_S(e)?Ln({},e):e:null}function Qr(e,t,n=!1,i=!1){const{props:o,ref:s,patchFlag:r,children:a,transition:l}=e,c=t?X(o||{},t):o,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&DS(c),ref:t&&t.ref?n&&s?qe(s)?s.concat(bf(t)):[s,bf(t)]:bf(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Ce?r===-1?16:r|16:r,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Qr(e.ssContent),ssFallback:e.ssFallback&&Qr(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&i&&nl(u,l.clone(u)),u}function Et(e=" ",t=0){return D(om,null,e,t)}function ml(e,t){const n=D(gf,null,e);return n.staticCount=t,n}function x(e="",t=!1){return t?(p(),R(_i,null,e)):D(_i,null,e)}function ls(e){return e==null||typeof e=="boolean"?D(_i):qe(e)?D(Ce,null,e.slice()):Zd(e)?Or(e):D(om,null,String(e))}function Or(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Qr(e)}function qy(e,t){let n=0;const{shapeFlag:i}=e;if(t==null)t=null;else if(qe(t))n=16;else if(typeof t=="object")if(i&65){const o=t.default;o&&(o._c&&(o._d=!1),qy(e,o()),o._c&&(o._d=!0));return}else{n=32;const o=t._;!o&&!_S(t)?t._ctx=In:o===3&&In&&(In.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ft(t)?(t={default:t,_ctx:In},n=32):(t=String(t),i&64?(n=16,t=[Et(t)]):n=8);e.children=t,e.shapeFlag|=n}function X(...e){const t={};for(let n=0;n<e.length;n++){const i=e[n];for(const o in i)if(o==="class")t.class!==i.class&&(t.class=te([t.class,i.class]));else if(o==="style")t.style=Vt([t.style,i.style]);else if(jp(o)){const s=t[o],r=i[o];r&&s!==r&&!(qe(s)&&s.includes(r))&&(t[o]=s?[].concat(s,r):r)}else o!==""&&(t[o]=i[o])}return t}function es(e,t,n,i=null){jo(e,t,7,[n,i])}const z9=yS();let N9=0;function B9(e,t,n){const i=e.type,o=(t?t.appContext:e.appContext)||z9,s={uid:N9++,vnode:e,type:i,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Ik(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:AS(i,o),emitsOptions:$S(i,o),emit:null,emitted:null,propsDefaults:Wt,inheritAttrs:i.inheritAttrs,ctx:Wt,data:Wt,props:Wt,attrs:Wt,slots:Wt,refs:Wt,setupState:Wt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=O9.bind(null,s),e.ce&&e.ce(s),s}let Vn=null;const ku=()=>Vn||In;let Wf,pb;{const e=Gp(),t=(n,i)=>{let o;return(o=e[n])||(o=e[n]=[]),o.push(i),s=>{o.length>1?o.forEach(r=>r(s)):o[0](s)}};Wf=t("__VUE_INSTANCE_SETTERS__",n=>Vn=n),pb=t("__VUE_SSR_SETTERS__",n=>Xd=n)}const Su=e=>{const t=Vn;return Wf(e),e.scope.on(),()=>{e.scope.off(),Wf(t)}},e2=()=>{Vn&&Vn.scope.off(),Wf(null)};function RS(e){return e.vnode.shapeFlag&4}let Xd=!1;function F9(e,t=!1,n=!1){t&&pb(t);const{props:i,children:o}=e.vnode,s=RS(e);m9(e,i,s,t),v9(e,o,n);const r=s?W9(e,t):void 0;return t&&pb(!1),r}function W9(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,o9);const{setup:i}=n;if(i){ca();const o=e.setupContext=i.length>1?HS(e):null,s=Su(e),r=Cu(i,e,0,[e.props,o]),a=Sk(r);if(da(),s(),(a||e.sp)&&!tc(e)&&cS(e),a){if(r.then(e2,e2),t)return r.then(l=>{t2(e,l)}).catch(l=>{Qp(l,e,0)});e.asyncDep=r}else t2(e,r)}else PS(e)}function t2(e,t,n){ft(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Kt(t)&&(e.setupState=Zk(t)),PS(e)}function PS(e,t,n){const i=e.type;e.render||(e.render=i.render||fs);{const o=Su(e);ca();try{r9(e)}finally{da(),o()}}}const U9={get(e,t){return ai(e,"get",""),e[t]}};function HS(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,U9),slots:e.slots,emit:e.emit,expose:t}}function sm(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Zk(Xp(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Ad)return Ad[n](e)},has(t,n){return n in t||n in Ad}})):e.proxy}function j9(e,t=!0){return ft(e)?e.displayName||e.name:e.name||t&&e.__name}function q9(e){return ft(e)&&"__vccOpts"in e}const Je=(e,t)=>z7(e,t,Xd);function rm(e,t,n){const i=arguments.length;return i===2?Kt(t)&&!qe(t)?Zd(t)?D(e,null,[t]):D(e,t):D(e,null,t):(i>3?n=Array.prototype.slice.call(arguments,2):i===3&&Zd(n)&&(n=[n]),D(e,t,n))}const K9="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let mb;const n2=typeof window<"u"&&window.trustedTypes;if(n2)try{mb=n2.createPolicy("vue",{createHTML:e=>e})}catch{}const VS=mb?e=>mb.createHTML(e):e=>e,G9="http://www.w3.org/2000/svg",J9="http://www.w3.org/1998/Math/MathML",js=typeof document<"u"?document:null,i2=js&&js.createElement("template"),Y9={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,i)=>{const o=t==="svg"?js.createElementNS(G9,e):t==="mathml"?js.createElementNS(J9,e):n?js.createElement(e,{is:n}):js.createElement(e);return e==="select"&&i&&i.multiple!=null&&o.setAttribute("multiple",i.multiple),o},createText:e=>js.createTextNode(e),createComment:e=>js.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>js.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,i,o,s){const r=n?n.previousSibling:t.lastChild;if(o&&(o===s||o.nextSibling))for(;t.insertBefore(o.cloneNode(!0),n),!(o===s||!(o=o.nextSibling)););else{i2.innerHTML=VS(i==="svg"?`<svg>${e}</svg>`:i==="mathml"?`<math>${e}</math>`:e);const a=i2.content;if(i==="svg"||i==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,n)}return[r?r.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},Ar="transition",td="animation",ac=Symbol("_vtc"),zS={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},NS=Ln({},sS,zS),Z9=e=>(e.displayName="Transition",e.props=NS,e),Qi=Z9((e,{slots:t})=>rm(K7,BS(e),t)),Ia=(e,t=[])=>{qe(e)?e.forEach(n=>n(...t)):e&&e(...t)},o2=e=>e?qe(e)?e.some(t=>t.length>1):e.length>1:!1;function BS(e){const t={};for(const J in e)J in zS||(t[J]=e[J]);if(e.css===!1)return t;const{name:n="v",type:i,duration:o,enterFromClass:s=`${n}-enter-from`,enterActiveClass:r=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=s,appearActiveClass:c=r,appearToClass:u=a,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:m=`${n}-leave-active`,leaveToClass:g=`${n}-leave-to`}=e,v=X9(o),w=v&&v[0],_=v&&v[1],{onBeforeEnter:k,onEnter:L,onEnterCancelled:P,onLeave:M,onLeaveCancelled:F,onBeforeAppear:z=k,onAppear:ee=L,onAppearCancelled:ie=P}=t,K=(J,he,ne,oe)=>{J._enterCancelled=oe,Sr(J,he?u:a),Sr(J,he?c:r),ne&&ne()},ae=(J,he)=>{J._isLeaving=!1,Sr(J,f),Sr(J,g),Sr(J,m),he&&he()},B=J=>(he,ne)=>{const oe=J?ee:L,W=()=>K(he,J,ne);Ia(oe,[he,W]),s2(()=>{Sr(he,J?l:s),ts(he,J?u:a),o2(oe)||r2(he,i,w,W)})};return Ln(t,{onBeforeEnter(J){Ia(k,[J]),ts(J,s),ts(J,r)},onBeforeAppear(J){Ia(z,[J]),ts(J,l),ts(J,c)},onEnter:B(!1),onAppear:B(!0),onLeave(J,he){J._isLeaving=!0;const ne=()=>ae(J,he);ts(J,f),J._enterCancelled?(ts(J,m),gb()):(gb(),ts(J,m)),s2(()=>{J._isLeaving&&(Sr(J,f),ts(J,g),o2(M)||r2(J,i,_,ne))}),Ia(M,[J,ne])},onEnterCancelled(J){K(J,!1,void 0,!0),Ia(P,[J])},onAppearCancelled(J){K(J,!0,void 0,!0),Ia(ie,[J])},onLeaveCancelled(J){ae(J),Ia(F,[J])}})}function X9(e){if(e==null)return null;if(Kt(e))return[i1(e.enter),i1(e.leave)];{const t=i1(e);return[t,t]}}function i1(e){return e7(e)}function ts(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[ac]||(e[ac]=new Set)).add(t)}function Sr(e,t){t.split(/\s+/).forEach(i=>i&&e.classList.remove(i));const n=e[ac];n&&(n.delete(t),n.size||(e[ac]=void 0))}function s2(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let Q9=0;function r2(e,t,n,i){const o=e._endId=++Q9,s=()=>{o===e._endId&&i()};if(n!=null)return setTimeout(s,n);const{type:r,timeout:a,propCount:l}=FS(e,t);if(!r)return i();const c=r+"end";let u=0;const f=()=>{e.removeEventListener(c,m),s()},m=g=>{g.target===e&&++u>=l&&f()};setTimeout(()=>{u<l&&f()},a+1),e.addEventListener(c,m)}function FS(e,t){const n=window.getComputedStyle(e),i=v=>(n[v]||"").split(", "),o=i(`${Ar}Delay`),s=i(`${Ar}Duration`),r=a2(o,s),a=i(`${td}Delay`),l=i(`${td}Duration`),c=a2(a,l);let u=null,f=0,m=0;t===Ar?r>0&&(u=Ar,f=r,m=s.length):t===td?c>0&&(u=td,f=c,m=l.length):(f=Math.max(r,c),u=f>0?r>c?Ar:td:null,m=u?u===Ar?s.length:l.length:0);const g=u===Ar&&/\b(transform|all)(,|$)/.test(i(`${Ar}Property`).toString());return{type:u,timeout:f,propCount:m,hasTransform:g}}function a2(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,i)=>l2(n)+l2(e[i])))}function l2(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function gb(){return document.body.offsetHeight}function eD(e,t,n){const i=e[ac];i&&(t=(t?[t,...i]:[...i]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const Uf=Symbol("_vod"),WS=Symbol("_vsh"),on={beforeMount(e,{value:t},{transition:n}){e[Uf]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):nd(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:i}){!t!=!n&&(i?t?(i.beforeEnter(e),nd(e,!0),i.enter(e)):i.leave(e,()=>{nd(e,!1)}):nd(e,t))},beforeUnmount(e,{value:t}){nd(e,t)}};function nd(e,t){e.style.display=t?e[Uf]:"none",e[WS]=!t}const tD=Symbol(""),nD=/(^|;)\s*display\s*:/;function iD(e,t,n){const i=e.style,o=dn(n);let s=!1;if(n&&!o){if(t)if(dn(t))for(const r of t.split(";")){const a=r.slice(0,r.indexOf(":")).trim();n[a]==null&&yf(i,a,"")}else for(const r in t)n[r]==null&&yf(i,r,"");for(const r in n)r==="display"&&(s=!0),yf(i,r,n[r])}else if(o){if(t!==n){const r=i[tD];r&&(n+=";"+r),i.cssText=n,s=nD.test(n)}}else t&&e.removeAttribute("style");Uf in e&&(e[Uf]=s?i.display:"",e[WS]&&(i.display="none"))}const c2=/\s*!important$/;function yf(e,t,n){if(qe(n))n.forEach(i=>yf(e,t,i));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const i=oD(e,t);c2.test(n)?e.setProperty(la(i),n.replace(c2,""),"important"):e[i]=n}}const d2=["Webkit","Moz","ms"],o1={};function oD(e,t){const n=o1[t];if(n)return n;let i=To(t);if(i!=="filter"&&i in e)return o1[t]=i;i=Kp(i);for(let o=0;o<d2.length;o++){const s=d2[o]+i;if(s in e)return o1[t]=s}return t}const u2="http://www.w3.org/1999/xlink";function h2(e,t,n,i,o,s=a7(t)){i&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(u2,t.slice(6,t.length)):e.setAttributeNS(u2,t,n):n==null||s&&!Ek(n)?e.removeAttribute(t):e.setAttribute(t,s?"":Uo(n)?String(n):n)}function f2(e,t,n,i,o){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?VS(n):n);return}const s=e.tagName;if(t==="value"&&s!=="PROGRESS"&&!s.includes("-")){const a=s==="OPTION"?e.getAttribute("value")||"":e.value,l=n==null?e.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in e))&&(e.value=l),n==null&&e.removeAttribute(t),e._value=n;return}let r=!1;if(n===""||n==null){const a=typeof e[t];a==="boolean"?n=Ek(n):n==null&&a==="string"?(n="",r=!0):a==="number"&&(n=0,r=!0)}try{e[t]=n}catch{}r&&e.removeAttribute(o||t)}function Ys(e,t,n,i){e.addEventListener(t,n,i)}function sD(e,t,n,i){e.removeEventListener(t,n,i)}const p2=Symbol("_vei");function rD(e,t,n,i,o=null){const s=e[p2]||(e[p2]={}),r=s[t];if(i&&r)r.value=i;else{const[a,l]=aD(t);if(i){const c=s[t]=dD(i,o);Ys(e,a,c,l)}else r&&(sD(e,a,r,l),s[t]=void 0)}}const m2=/(?:Once|Passive|Capture)$/;function aD(e){let t;if(m2.test(e)){t={};let i;for(;i=e.match(m2);)e=e.slice(0,e.length-i[0].length),t[i[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):la(e.slice(2)),t]}let s1=0;const lD=Promise.resolve(),cD=()=>s1||(lD.then(()=>s1=0),s1=Date.now());function dD(e,t){const n=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=n.attached)return;jo(uD(i,n.value),t,5,[i])};return n.value=e,n.attached=cD(),n}function uD(e,t){if(qe(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(i=>o=>!o._stopped&&i&&i(o))}else return t}const g2=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,hD=(e,t,n,i,o,s)=>{const r=o==="svg";t==="class"?eD(e,i,r):t==="style"?iD(e,n,i):jp(t)?Oy(t)||rD(e,t,n,i,s):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):fD(e,t,i,r))?(f2(e,t,i),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&h2(e,t,i,r,s,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!dn(i))?f2(e,To(t),i,s,t):(t==="true-value"?e._trueValue=i:t==="false-value"&&(e._falseValue=i),h2(e,t,i,r))};function fD(e,t,n,i){if(i)return!!(t==="innerHTML"||t==="textContent"||t in e&&g2(t)&&ft(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const o=e.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return g2(t)&&dn(n)?!1:t in e}const US=new WeakMap,jS=new WeakMap,jf=Symbol("_moveCb"),b2=Symbol("_enterCb"),pD=e=>(delete e.props.mode,e),mD=pD({name:"TransitionGroup",props:Ln({},NS,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=ku(),i=oS();let o,s;return uS(()=>{if(!o.length)return;const r=e.moveClass||`${e.name||"v"}-move`;if(!vD(o[0].el,n.vnode.el,r))return;o.forEach(gD),o.forEach(bD);const a=o.filter(yD);gb(),a.forEach(l=>{const c=l.el,u=c.style;ts(c,r),u.transform=u.webkitTransform=u.transitionDuration="";const f=c[jf]=m=>{m&&m.target!==c||(!m||/transform$/.test(m.propertyName))&&(c.removeEventListener("transitionend",f),c[jf]=null,Sr(c,r))};c.addEventListener("transitionend",f)})}),()=>{const r=Dt(e),a=BS(r);let l=r.tag||Ce;if(o=[],s)for(let c=0;c<s.length;c++){const u=s[c];u.el&&u.el instanceof Element&&(o.push(u),nl(u,Jd(u,a,i,n)),US.set(u,u.el.getBoundingClientRect()))}s=t.default?By(t.default()):[];for(let c=0;c<s.length;c++){const u=s[c];u.key!=null&&nl(u,Jd(u,a,i,n))}return D(l,null,s)}}}),Oc=mD;function gD(e){const t=e.el;t[jf]&&t[jf](),t[b2]&&t[b2]()}function bD(e){jS.set(e,e.el.getBoundingClientRect())}function yD(e){const t=US.get(e),n=jS.get(e),i=t.left-n.left,o=t.top-n.top;if(i||o){const s=e.el.style;return s.transform=s.webkitTransform=`translate(${i}px,${o}px)`,s.transitionDuration="0s",e}}function vD(e,t,n){const i=e.cloneNode(),o=e[ac];o&&o.forEach(a=>{a.split(/\s+/).forEach(l=>l&&i.classList.remove(l))}),n.split(/\s+/).forEach(a=>a&&i.classList.add(a)),i.style.display="none";const s=t.nodeType===1?t:t.parentNode;s.appendChild(i);const{hasTransform:r}=FS(i);return s.removeChild(i),r}const ea=e=>{const t=e.props["onUpdate:modelValue"]||!1;return qe(t)?n=>mf(t,n):t};function wD(e){e.target.composing=!0}function y2(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Ao=Symbol("_assign"),Eo={created(e,{modifiers:{lazy:t,trim:n,number:i}},o){e[Ao]=ea(o);const s=i||o.props&&o.props.type==="number";Ys(e,t?"change":"input",r=>{if(r.target.composing)return;let a=e.value;n&&(a=a.trim()),s&&(a=Rf(a)),e[Ao](a)}),n&&Ys(e,"change",()=>{e.value=e.value.trim()}),t||(Ys(e,"compositionstart",wD),Ys(e,"compositionend",y2),Ys(e,"change",y2))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:i,trim:o,number:s}},r){if(e[Ao]=ea(r),e.composing)return;const a=(s||e.type==="number")&&!/^0\d/.test(e.value)?Rf(e.value):e.value,l=t??"";a!==l&&(document.activeElement===e&&e.type!=="range"&&(i&&t===n||o&&e.value.trim()===l)||(e.value=l))}},qS={deep:!0,created(e,t,n){e[Ao]=ea(n),Ys(e,"change",()=>{const i=e._modelValue,o=lc(e),s=e.checked,r=e[Ao];if(qe(i)){const a=Ly(i,o),l=a!==-1;if(s&&!l)r(i.concat(o));else if(!s&&l){const c=[...i];c.splice(a,1),r(c)}}else if(Tc(i)){const a=new Set(i);s?a.add(o):a.delete(o),r(a)}else r(GS(e,s))})},mounted:v2,beforeUpdate(e,t,n){e[Ao]=ea(n),v2(e,t,n)}};function v2(e,{value:t,oldValue:n},i){e._modelValue=t;let o;if(qe(t))o=Ly(t,i.props.value)>-1;else if(Tc(t))o=t.has(i.props.value);else{if(t===n)return;o=el(t,GS(e,!0))}e.checked!==o&&(e.checked=o)}const _D={created(e,{value:t},n){e.checked=el(t,n.props.value),e[Ao]=ea(n),Ys(e,"change",()=>{e[Ao](lc(e))})},beforeUpdate(e,{value:t,oldValue:n},i){e[Ao]=ea(i),t!==n&&(e.checked=el(t,i.props.value))}},KS={deep:!0,created(e,{value:t,modifiers:{number:n}},i){const o=Tc(t);Ys(e,"change",()=>{const s=Array.prototype.filter.call(e.options,r=>r.selected).map(r=>n?Rf(lc(r)):lc(r));e[Ao](e.multiple?o?new Set(s):s:s[0]),e._assigning=!0,wo(()=>{e._assigning=!1})}),e[Ao]=ea(i)},mounted(e,{value:t}){w2(e,t)},beforeUpdate(e,t,n){e[Ao]=ea(n)},updated(e,{value:t}){e._assigning||w2(e,t)}};function w2(e,t){const n=e.multiple,i=qe(t);if(!(n&&!i&&!Tc(t))){for(let o=0,s=e.options.length;o<s;o++){const r=e.options[o],a=lc(r);if(n)if(i){const l=typeof a;l==="string"||l==="number"?r.selected=t.some(c=>String(c)===String(a)):r.selected=Ly(t,a)>-1}else r.selected=t.has(a);else if(el(lc(r),t)){e.selectedIndex!==o&&(e.selectedIndex=o);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function lc(e){return"_value"in e?e._value:e.value}function GS(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const JS={created(e,t,n){Dh(e,t,n,null,"created")},mounted(e,t,n){Dh(e,t,n,null,"mounted")},beforeUpdate(e,t,n,i){Dh(e,t,n,i,"beforeUpdate")},updated(e,t,n,i){Dh(e,t,n,i,"updated")}};function CD(e,t){switch(e){case"SELECT":return KS;case"TEXTAREA":return Eo;default:switch(t){case"checkbox":return qS;case"radio":return _D;default:return Eo}}}function Dh(e,t,n,i,o){const r=CD(e.tagName,n.props&&n.props.type)[o];r&&r(e,t,n,i)}const AD=["ctrl","shift","alt","meta"],kD={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>AD.some(n=>e[`${n}Key`]&&!t.includes(n))},Ue=(e,t)=>{const n=e._withMods||(e._withMods={}),i=t.join(".");return n[i]||(n[i]=(o,...s)=>{for(let r=0;r<t.length;r++){const a=kD[t[r]];if(a&&a(o,t))return}return e(o,...s)})},SD={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Qe=(e,t)=>{const n=e._withKeys||(e._withKeys={}),i=t.join(".");return n[i]||(n[i]=o=>{if(!("key"in o))return;const s=la(o.key);if(t.some(r=>r===s||SD[r]===s))return e(o)})},xD=Ln({patchProp:hD},Y9);let _2;function MD(){return _2||(_2=_9(xD))}const TD=(...e)=>{const t=MD().createApp(...e),{mount:n}=t;return t.mount=i=>{const o=OD(i);if(!o)return;const s=t._component;!ft(s)&&!s.render&&!s.template&&(s.template=o.innerHTML),o.nodeType===1&&(o.textContent="");const r=n(o,!1,ED(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),r},t};function ED(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function OD(e){return dn(e)?document.querySelector(e):e}const I=(e,t)=>{const n=e.__vccOpts||e;for(const[i,o]of t)n[i]=o;return n},$D={name:"AccountBoxIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},ID=["aria-hidden","aria-label"],LD=["fill","width","height"],DD={d:"M6,17C6,15 10,13.9 12,13.9C14,13.9 18,15 18,17V18H6M15,9A3,3 0 0,1 12,12A3,3 0 0,1 9,9A3,3 0 0,1 12,6A3,3 0 0,1 15,9M3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5A2,2 0 0,0 19,3H5C3.89,3 3,3.9 3,5Z"},RD={key:0};function PD(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon account-box-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",DD,[n.title?(p(),y("title",RD,$(n.title),1)):x("",!0)])],8,LD))],16,ID)}const HD=I($D,[["render",PD]]),VD={name:"AlertCircleIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},zD=["aria-hidden","aria-label"],ND=["fill","width","height"],BD={d:"M13,13H11V7H13M13,17H11V15H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"},FD={key:0};function WD(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon alert-circle-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",BD,[n.title?(p(),y("title",FD,$(n.title),1)):x("",!0)])],8,ND))],16,zD)}const UD=I(VD,[["render",WD]]),jD={name:"AlphaXIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},qD=["aria-hidden","aria-label"],KD=["fill","width","height"],GD={d:"M9,7L11,12L9,17H11L12,14.5L13,17H15L13,12L15,7H13L12,9.5L11,7H9Z"},JD={key:0};function YD(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon alpha-x-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",GD,[n.title?(p(),y("title",JD,$(n.title),1)):x("",!0)])],8,KD))],16,qD)}const ZD=I(jD,[["render",YD]]),XD={name:"AnchorIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},QD=["aria-hidden","aria-label"],eR=["fill","width","height"],tR={d:"M12 2A3 3 0 0 0 9 5A3 3 0 0 0 11 7.83V9H8V11H11V19.92C10.26 19.79 9.5 19.58 8.79 19.27C8.05 18.95 7.4 18.56 6.82 18.09C6.24 17.62 5.78 17.11 5.44 16.55L7 15L3 12V15C3 15.97 3.27 16.88 3.82 17.72C4.37 18.56 5.09 19.31 6 19.95C6.87 20.59 7.84 21.09 8.88 21.45C9.93 21.81 10.97 22 12 22C13.03 22 14.07 21.8 15.12 21.44C16.16 21.08 17.13 20.58 18 19.95C18.92 19.31 19.63 18.57 20.18 17.72C20.73 16.88 21 15.97 21 15V12L17 15L18.56 16.55C18.22 17.11 17.76 17.62 17.18 18.09C16.6 18.56 15.95 18.95 15.21 19.27C14.5 19.58 13.74 19.79 13 19.92V11H16V9H13V7.82A3 3 0 0 0 15 5A3 3 0 0 0 12 2M12 4A1 1 0 0 1 13 5A1 1 0 0 1 12 6A1 1 0 0 1 11 5A1 1 0 0 1 12 4Z"},nR={key:0};function iR(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon anchor-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",tR,[n.title?(p(),y("title",nR,$(n.title),1)):x("",!0)])],8,eR))],16,QD)}const oR=I(XD,[["render",iR]]),sR={name:"AppleKeyboardCapsIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},rR=["aria-hidden","aria-label"],aR=["fill","width","height"],lR={d:"M15,14V8H17.17L12,2.83L6.83,8H9V14H15M12,0L22,10H17V16H7V10H2L12,0M7,18H17V24H7V18M15,20H9V22H15V20Z"},cR={key:0};function dR(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon apple-keyboard-caps-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",lR,[n.title?(p(),y("title",cR,$(n.title),1)):x("",!0)])],8,aR))],16,rR)}const uR=I(sR,[["render",dR]]),hR={name:"AppleKeyboardCommandIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},fR=["aria-hidden","aria-label"],pR=["fill","width","height"],mR={d:"M6,2A4,4 0 0,1 10,6V8H14V6A4,4 0 0,1 18,2A4,4 0 0,1 22,6A4,4 0 0,1 18,10H16V14H18A4,4 0 0,1 22,18A4,4 0 0,1 18,22A4,4 0 0,1 14,18V16H10V18A4,4 0 0,1 6,22A4,4 0 0,1 2,18A4,4 0 0,1 6,14H8V10H6A4,4 0 0,1 2,6A4,4 0 0,1 6,2M16,18A2,2 0 0,0 18,20A2,2 0 0,0 20,18A2,2 0 0,0 18,16H16V18M14,10H10V14H14V10M6,16A2,2 0 0,0 4,18A2,2 0 0,0 6,20A2,2 0 0,0 8,18V16H6M8,6A2,2 0 0,0 6,4A2,2 0 0,0 4,6A2,2 0 0,0 6,8H8V6M18,8A2,2 0 0,0 20,6A2,2 0 0,0 18,4A2,2 0 0,0 16,6V8H18Z"},gR={key:0};function bR(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon apple-keyboard-command-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",mR,[n.title?(p(),y("title",gR,$(n.title),1)):x("",!0)])],8,pR))],16,fR)}const yR=I(hR,[["render",bR]]),vR={name:"AppleKeyboardControlIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},wR=["aria-hidden","aria-label"],_R=["fill","width","height"],CR={d:"M19.78,11.78L18.36,13.19L12,6.83L5.64,13.19L4.22,11.78L12,4L19.78,11.78Z"},AR={key:0};function kR(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon apple-keyboard-control-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",CR,[n.title?(p(),y("title",AR,$(n.title),1)):x("",!0)])],8,_R))],16,wR)}const SR=I(vR,[["render",kR]]),xR={name:"AppleKeyboardOptionIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},MR=["aria-hidden","aria-label"],TR=["fill","width","height"],ER={d:"M3,4H9.11L16.15,18H21V20H14.88L7.84,6H3V4M14,4H21V6H14V4Z"},OR={key:0};function $R(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon apple-keyboard-option-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",ER,[n.title?(p(),y("title",OR,$(n.title),1)):x("",!0)])],8,TR))],16,MR)}const IR=I(xR,[["render",$R]]),LR={name:"AppleKeyboardShiftIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},DR=["aria-hidden","aria-label"],RR=["fill","width","height"],PR={d:"M15,18V12H17.17L12,6.83L6.83,12H9V18H15M12,4L22,14H17V20H7V14H2L12,4Z"},HR={key:0};function VR(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon apple-keyboard-shift-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",PR,[n.title?(p(),y("title",HR,$(n.title),1)):x("",!0)])],8,RR))],16,DR)}const zR=I(LR,[["render",VR]]),NR={name:"ArchiveArrowDownIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},BR=["aria-hidden","aria-label"],FR=["fill","width","height"],WR={d:"M3 3H21V7H3V3M4 21V8H20V21H4M14 14V11H10V14H7L12 19L17 14H14Z"},UR={key:0};function jR(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon archive-arrow-down-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",WR,[n.title?(p(),y("title",UR,$(n.title),1)):x("",!0)])],8,FR))],16,BR)}const qR=I(NR,[["render",jR]]),KR={name:"ArchiveArrowUpIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},GR=["aria-hidden","aria-label"],JR=["fill","width","height"],YR={d:"M4 21H20V8H4M14 15V18H10V15H7L12 10L17 15M3 3H21V7H3"},ZR={key:0};function XR(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon archive-arrow-up-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",YR,[n.title?(p(),y("title",ZR,$(n.title),1)):x("",!0)])],8,JR))],16,GR)}const QR=I(KR,[["render",XR]]),eP={name:"ArrowCollapseVerticalIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},tP=["aria-hidden","aria-label"],nP=["fill","width","height"],iP={d:"M4,12H20V14H4V12M4,9H20V11H4V9M16,4L12,8L8,4H11V1H13V4H16M8,19L12,15L16,19H13V22H11V19H8Z"},oP={key:0};function sP(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon arrow-collapse-vertical-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",iP,[n.title?(p(),y("title",oP,$(n.title),1)):x("",!0)])],8,nP))],16,tP)}const rP=I(eP,[["render",sP]]),aP={name:"ArrowDownIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},lP=["aria-hidden","aria-label"],cP=["fill","width","height"],dP={d:"M11,4H13V16L18.5,10.5L19.92,11.92L12,19.84L4.08,11.92L5.5,10.5L11,16V4Z"},uP={key:0};function hP(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon arrow-down-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",dP,[n.title?(p(),y("title",uP,$(n.title),1)):x("",!0)])],8,cP))],16,lP)}const fP=I(aP,[["render",hP]]),pP={name:"ArrowExpandVerticalIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},mP=["aria-hidden","aria-label"],gP=["fill","width","height"],bP={d:"M13,9V15H16L12,19L8,15H11V9H8L12,5L16,9H13M4,2H20V4H4V2M4,20H20V22H4V20Z"},yP={key:0};function vP(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon arrow-expand-vertical-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",bP,[n.title?(p(),y("title",yP,$(n.title),1)):x("",!0)])],8,gP))],16,mP)}const wP=I(pP,[["render",vP]]),_P={name:"ArrowLeftIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},CP=["aria-hidden","aria-label"],AP=["fill","width","height"],kP={d:"M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z"},SP={key:0};function xP(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon arrow-left-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",kP,[n.title?(p(),y("title",SP,$(n.title),1)):x("",!0)])],8,AP))],16,CP)}const MP=I(_P,[["render",xP]]),TP={name:"ArrowRightIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},EP=["aria-hidden","aria-label"],OP=["fill","width","height"],$P={d:"M4,11V13H16L10.5,18.5L11.92,19.92L19.84,12L11.92,4.08L10.5,5.5L16,11H4Z"},IP={key:0};function LP(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon arrow-right-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",$P,[n.title?(p(),y("title",IP,$(n.title),1)):x("",!0)])],8,OP))],16,EP)}const DP=I(TP,[["render",LP]]),RP={name:"ArrowUpIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},PP=["aria-hidden","aria-label"],HP=["fill","width","height"],VP={d:"M13,20H11V8L5.5,13.5L4.08,12.08L12,4.16L19.92,12.08L18.5,13.5L13,8V20Z"},zP={key:0};function NP(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon arrow-up-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",VP,[n.title?(p(),y("title",zP,$(n.title),1)):x("",!0)])],8,HP))],16,PP)}const BP=I(RP,[["render",NP]]),FP={name:"BinocularsIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},WP=["aria-hidden","aria-label"],UP=["fill","width","height"],jP={d:"M11,6H13V13H11V6M9,20A1,1 0 0,1 8,21H5A1,1 0 0,1 4,20V15L6,6H10V13A1,1 0 0,1 9,14V20M10,5H7V3H10V5M15,20V14A1,1 0 0,1 14,13V6H18L20,15V20A1,1 0 0,1 19,21H16A1,1 0 0,1 15,20M14,5V3H17V5H14Z"},qP={key:0};function KP(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon binoculars-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",jP,[n.title?(p(),y("title",qP,$(n.title),1)):x("",!0)])],8,UP))],16,WP)}const GP=I(FP,[["render",KP]]),JP={name:"CalendarIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},YP=["aria-hidden","aria-label"],ZP=["fill","width","height"],XP={d:"M19,19H5V8H19M16,1V3H8V1H6V3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3H18V1M17,12H12V17H17V12Z"},QP={key:0};function eH(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon calendar-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",XP,[n.title?(p(),y("title",QP,$(n.title),1)):x("",!0)])],8,ZP))],16,YP)}const tH=I(JP,[["render",eH]]),nH={name:"CellphoneIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},iH=["aria-hidden","aria-label"],oH=["fill","width","height"],sH={d:"M17,19H7V5H17M17,1H7C5.89,1 5,1.89 5,3V21A2,2 0 0,0 7,23H17A2,2 0 0,0 19,21V3C19,1.89 18.1,1 17,1Z"},rH={key:0};function aH(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon cellphone-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",sH,[n.title?(p(),y("title",rH,$(n.title),1)):x("",!0)])],8,oH))],16,iH)}const lH=I(nH,[["render",aH]]),cH={name:"CheckAllIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},dH=["aria-hidden","aria-label"],uH=["fill","width","height"],hH={d:"M0.41,13.41L6,19L7.41,17.58L1.83,12M22.24,5.58L11.66,16.17L7.5,12L6.07,13.41L11.66,19L23.66,7M18,7L16.59,5.58L10.24,11.93L11.66,13.34L18,7Z"},fH={key:0};function pH(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon check-all-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",hH,[n.title?(p(),y("title",fH,$(n.title),1)):x("",!0)])],8,uH))],16,dH)}const mH=I(cH,[["render",pH]]),gH={name:"CheckBoldIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},bH=["aria-hidden","aria-label"],yH=["fill","width","height"],vH={d:"M9,20.42L2.79,14.21L5.62,11.38L9,14.77L18.88,4.88L21.71,7.71L9,20.42Z"},wH={key:0};function _H(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon check-bold-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",vH,[n.title?(p(),y("title",wH,$(n.title),1)):x("",!0)])],8,yH))],16,bH)}const CH=I(gH,[["render",_H]]),AH={name:"CheckCircleIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},kH=["aria-hidden","aria-label"],SH=["fill","width","height"],xH={d:"M12 2C6.5 2 2 6.5 2 12S6.5 22 12 22 22 17.5 22 12 17.5 2 12 2M10 17L5 12L6.41 10.59L10 14.17L17.59 6.58L19 8L10 17Z"},MH={key:0};function TH(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon check-circle-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",xH,[n.title?(p(),y("title",MH,$(n.title),1)):x("",!0)])],8,SH))],16,kH)}const EH=I(AH,[["render",TH]]),OH={name:"CheckDecagramIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},$H=["aria-hidden","aria-label"],IH=["fill","width","height"],LH={d:"M23,12L20.56,9.22L20.9,5.54L17.29,4.72L15.4,1.54L12,3L8.6,1.54L6.71,4.72L3.1,5.53L3.44,9.21L1,12L3.44,14.78L3.1,18.47L6.71,19.29L8.6,22.47L12,21L15.4,22.46L17.29,19.28L20.9,18.46L20.56,14.78L23,12M10,17L6,13L7.41,11.59L10,14.17L16.59,7.58L18,9L10,17Z"},DH={key:0};function RH(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon check-decagram-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",LH,[n.title?(p(),y("title",DH,$(n.title),1)):x("",!0)])],8,IH))],16,$H)}const PH=I(OH,[["render",RH]]),HH={name:"CheckboxBlankOutlineIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},VH=["aria-hidden","aria-label"],zH=["fill","width","height"],NH={d:"M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3M19,5V19H5V5H19Z"},BH={key:0};function FH(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon checkbox-blank-outline-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",NH,[n.title?(p(),y("title",BH,$(n.title),1)):x("",!0)])],8,zH))],16,VH)}const WH=I(HH,[["render",FH]]),UH={name:"CheckboxMarkedIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},jH=["aria-hidden","aria-label"],qH=["fill","width","height"],KH={d:"M10,17L5,12L6.41,10.58L10,14.17L17.59,6.58L19,8M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z"},GH={key:0};function JH(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon checkbox-marked-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",KH,[n.title?(p(),y("title",GH,$(n.title),1)):x("",!0)])],8,qH))],16,jH)}const YH=I(UH,[["render",JH]]),ZH={name:"ChevronDownIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},XH=["aria-hidden","aria-label"],QH=["fill","width","height"],eV={d:"M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"},tV={key:0};function nV(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon chevron-down-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",eV,[n.title?(p(),y("title",tV,$(n.title),1)):x("",!0)])],8,QH))],16,XH)}const iV=I(ZH,[["render",nV]]),oV={name:"ChevronLeftIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},sV=["aria-hidden","aria-label"],rV=["fill","width","height"],aV={d:"M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z"},lV={key:0};function cV(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon chevron-left-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",aV,[n.title?(p(),y("title",lV,$(n.title),1)):x("",!0)])],8,rV))],16,sV)}const dV=I(oV,[["render",cV]]),uV={name:"ChevronRightIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},hV=["aria-hidden","aria-label"],fV=["fill","width","height"],pV={d:"M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z"},mV={key:0};function gV(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon chevron-right-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",pV,[n.title?(p(),y("title",mV,$(n.title),1)):x("",!0)])],8,fV))],16,hV)}const YS=I(uV,[["render",gV]]),bV={name:"ChevronUpIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},yV=["aria-hidden","aria-label"],vV=["fill","width","height"],wV={d:"M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z"},_V={key:0};function CV(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon chevron-up-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",wV,[n.title?(p(),y("title",_V,$(n.title),1)):x("",!0)])],8,vV))],16,yV)}const AV=I(bV,[["render",CV]]),kV={name:"CircleIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},SV=["aria-hidden","aria-label"],xV=["fill","width","height"],MV={d:"M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"},TV={key:0};function EV(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon circle-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",MV,[n.title?(p(),y("title",TV,$(n.title),1)):x("",!0)])],8,xV))],16,SV)}const OV=I(kV,[["render",EV]]),$V={name:"CircleMediumIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},IV=["aria-hidden","aria-label"],LV=["fill","width","height"],DV={d:"M12,8A4,4 0 0,0 8,12A4,4 0 0,0 12,16A4,4 0 0,0 16,12A4,4 0 0,0 12,8Z"},RV={key:0};function PV(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon circle-medium-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",DV,[n.title?(p(),y("title",RV,$(n.title),1)):x("",!0)])],8,LV))],16,IV)}const HV=I($V,[["render",PV]]),VV={name:"ClipboardPlusIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},zV=["aria-hidden","aria-label"],NV=["fill","width","height"],BV={d:"M19,3H14.82C14.4,1.84 13.3,1 12,1C10.7,1 9.6,1.84 9.18,3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5A2,2 0 0,0 19,3M12,3A1,1 0 0,1 13,4A1,1 0 0,1 12,5A1,1 0 0,1 11,4A1,1 0 0,1 12,3M13,12H16V14H13V17H11V14H8V12H11V9H13V12Z"},FV={key:0};function WV(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon clipboard-plus-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",BV,[n.title?(p(),y("title",FV,$(n.title),1)):x("",!0)])],8,NV))],16,zV)}const UV=I(VV,[["render",WV]]),jV={name:"ClipboardPlusOutlineIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},qV=["aria-hidden","aria-label"],KV=["fill","width","height"],GV={d:"M19 3H14.82C14.4 1.84 13.3 1 12 1S9.6 1.84 9.18 3H5C3.9 3 3 3.9 3 5V19C3 20.11 3.9 21 5 21H19C20.11 21 21 20.11 21 19V5C21 3.9 20.11 3 19 3M12 3C12.55 3 13 3.45 13 4S12.55 5 12 5 11 4.55 11 4 11.45 3 12 3M7 7H17V5H19V19H5V5H7V7M13 12H16V14H13V17H11V14H8V12H11V9H13V12Z"},JV={key:0};function YV(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon clipboard-plus-outline-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",GV,[n.title?(p(),y("title",JV,$(n.title),1)):x("",!0)])],8,KV))],16,qV)}const ZV=I(jV,[["render",YV]]),XV={name:"ClockIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},QV=["aria-hidden","aria-label"],ez=["fill","width","height"],tz={d:"M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M16.2,16.2L11,13V7H12.5V12.2L17,14.9L16.2,16.2Z"},nz={key:0};function iz(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon clock-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",tz,[n.title?(p(),y("title",nz,$(n.title),1)):x("",!0)])],8,ez))],16,QV)}const oz=I(XV,[["render",iz]]),sz={name:"CloseCircleIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},rz=["aria-hidden","aria-label"],az=["fill","width","height"],lz={d:"M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z"},cz={key:0};function dz(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon close-circle-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",lz,[n.title?(p(),y("title",cz,$(n.title),1)):x("",!0)])],8,az))],16,rz)}const uz=I(sz,[["render",dz]]),hz={name:"CloseIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},fz=["aria-hidden","aria-label"],pz=["fill","width","height"],mz={d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"},gz={key:0};function bz(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon close-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",mz,[n.title?(p(),y("title",gz,$(n.title),1)):x("",!0)])],8,pz))],16,fz)}const Ky=I(hz,[["render",bz]]),yz={name:"CloudUploadIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},vz=["aria-hidden","aria-label"],wz=["fill","width","height"],_z={d:"M14,13V17H10V13H7L12,8L17,13M19.35,10.03C18.67,6.59 15.64,4 12,4C9.11,4 6.6,5.64 5.35,8.03C2.34,8.36 0,10.9 0,14A6,6 0 0,0 6,20H19A5,5 0 0,0 24,15C24,12.36 21.95,10.22 19.35,10.03Z"},Cz={key:0};function Az(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon cloud-upload-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",_z,[n.title?(p(),y("title",Cz,$(n.title),1)):x("",!0)])],8,wz))],16,vz)}const kz=I(yz,[["render",Az]]),Sz={name:"CodeTagsIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},xz=["aria-hidden","aria-label"],Mz=["fill","width","height"],Tz={d:"M14.6,16.6L19.2,12L14.6,7.4L16,6L22,12L16,18L14.6,16.6M9.4,16.6L4.8,12L9.4,7.4L8,6L2,12L8,18L9.4,16.6Z"},Ez={key:0};function Oz(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon code-tags-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",Tz,[n.title?(p(),y("title",Ez,$(n.title),1)):x("",!0)])],8,Mz))],16,xz)}const $z=I(Sz,[["render",Oz]]),Iz={name:"CogIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},Lz=["aria-hidden","aria-label"],Dz=["fill","width","height"],Rz={d:"M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z"},Pz={key:0};function Hz(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon cog-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",Rz,[n.title?(p(),y("title",Pz,$(n.title),1)):x("",!0)])],8,Dz))],16,Lz)}const Vz=I(Iz,[["render",Hz]]),zz={name:"ContentCopyIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},Nz=["aria-hidden","aria-label"],Bz=["fill","width","height"],Fz={d:"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"},Wz={key:0};function Uz(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon content-copy-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",Fz,[n.title?(p(),y("title",Wz,$(n.title),1)):x("",!0)])],8,Bz))],16,Nz)}const jz=I(zz,[["render",Uz]]),qz={name:"ContentCutIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},Kz=["aria-hidden","aria-label"],Gz=["fill","width","height"],Jz={d:"M19,3L13,9L15,11L22,4V3M12,12.5A0.5,0.5 0 0,1 11.5,12A0.5,0.5 0 0,1 12,11.5A0.5,0.5 0 0,1 12.5,12A0.5,0.5 0 0,1 12,12.5M6,20A2,2 0 0,1 4,18C4,16.89 4.9,16 6,16A2,2 0 0,1 8,18C8,19.11 7.1,20 6,20M6,8A2,2 0 0,1 4,6C4,4.89 4.9,4 6,4A2,2 0 0,1 8,6C8,7.11 7.1,8 6,8M9.64,7.64C9.87,7.14 10,6.59 10,6A4,4 0 0,0 6,2A4,4 0 0,0 2,6A4,4 0 0,0 6,10C6.59,10 7.14,9.87 7.64,9.64L10,12L7.64,14.36C7.14,14.13 6.59,14 6,14A4,4 0 0,0 2,18A4,4 0 0,0 6,22A4,4 0 0,0 10,18C10,17.41 9.87,16.86 9.64,16.36L12,14L19,21H22V20L9.64,7.64Z"},Yz={key:0};function Zz(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon content-cut-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",Jz,[n.title?(p(),y("title",Yz,$(n.title),1)):x("",!0)])],8,Gz))],16,Kz)}const Xz=I(qz,[["render",Zz]]),Qz={name:"ContentDuplicateIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},eN=["aria-hidden","aria-label"],tN=["fill","width","height"],nN={d:"M11,17H4A2,2 0 0,1 2,15V3A2,2 0 0,1 4,1H16V3H4V15H11V13L15,16L11,19V17M19,21V7H8V13H6V7A2,2 0 0,1 8,5H19A2,2 0 0,1 21,7V21A2,2 0 0,1 19,23H8A2,2 0 0,1 6,21V19H8V21H19Z"},iN={key:0};function oN(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon content-duplicate-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",nN,[n.title?(p(),y("title",iN,$(n.title),1)):x("",!0)])],8,tN))],16,eN)}const sN=I(Qz,[["render",oN]]),rN={name:"CursorDefaultClickIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},aN=["aria-hidden","aria-label"],lN=["fill","width","height"],cN={d:"M10.76,8.69A0.76,0.76 0 0,0 10,9.45V20.9C10,21.32 10.34,21.66 10.76,21.66C10.95,21.66 11.11,21.6 11.24,21.5L13.15,19.95L14.81,23.57C14.94,23.84 15.21,24 15.5,24C15.61,24 15.72,24 15.83,23.92L18.59,22.64C18.97,22.46 19.15,22 18.95,21.63L17.28,18L19.69,17.55C19.85,17.5 20,17.43 20.12,17.29C20.39,16.97 20.35,16.5 20,16.21L11.26,8.86L11.25,8.87C11.12,8.76 10.95,8.69 10.76,8.69M15,10V8H20V10H15M13.83,4.76L16.66,1.93L18.07,3.34L15.24,6.17L13.83,4.76M10,0H12V5H10V0M3.93,14.66L6.76,11.83L8.17,13.24L5.34,16.07L3.93,14.66M3.93,3.34L5.34,1.93L8.17,4.76L6.76,6.17L3.93,3.34M7,10H2V8H7V10"},dN={key:0};function uN(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon cursor-default-click-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",cN,[n.title?(p(),y("title",dN,$(n.title),1)):x("",!0)])],8,lN))],16,aN)}const hN=I(rN,[["render",uN]]),fN={name:"DeleteIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},pN=["aria-hidden","aria-label"],mN=["fill","width","height"],gN={d:"M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z"},bN={key:0};function yN(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon delete-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",gN,[n.title?(p(),y("title",bN,$(n.title),1)):x("",!0)])],8,mN))],16,pN)}const vN=I(fN,[["render",yN]]),wN={name:"DotsHorizontalIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},_N=["aria-hidden","aria-label"],CN=["fill","width","height"],AN={d:"M16,12A2,2 0 0,1 18,10A2,2 0 0,1 20,12A2,2 0 0,1 18,14A2,2 0 0,1 16,12M10,12A2,2 0 0,1 12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12M4,12A2,2 0 0,1 6,10A2,2 0 0,1 8,12A2,2 0 0,1 6,14A2,2 0 0,1 4,12Z"},kN={key:0};function SN(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon dots-horizontal-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",AN,[n.title?(p(),y("title",kN,$(n.title),1)):x("",!0)])],8,CN))],16,_N)}const xN=I(wN,[["render",SN]]),MN={name:"DotsVerticalIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},TN=["aria-hidden","aria-label"],EN=["fill","width","height"],ON={d:"M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z"},$N={key:0};function IN(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon dots-vertical-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",ON,[n.title?(p(),y("title",$N,$(n.title),1)):x("",!0)])],8,EN))],16,TN)}const LN=I(MN,[["render",IN]]),DN={name:"AppsIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},RN=["aria-hidden","aria-label"],PN=["fill","width","height"],HN={d:"M16,20H20V16H16M16,14H20V10H16M10,8H14V4H10M16,8H20V4H16M10,14H14V10H10M4,14H8V10H4M4,20H8V16H4M10,20H14V16H10M4,8H8V4H4V8Z"},VN={key:0};function zN(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon apps-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",HN,[n.title?(p(),y("title",VN,$(n.title),1)):x("",!0)])],8,PN))],16,RN)}const NN=I(DN,[["render",zN]]),BN={name:"EyeIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},FN=["aria-hidden","aria-label"],WN=["fill","width","height"],UN={d:"M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z"},jN={key:0};function qN(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon eye-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",UN,[n.title?(p(),y("title",jN,$(n.title),1)):x("",!0)])],8,WN))],16,FN)}const KN=I(BN,[["render",qN]]),GN={name:"FileDocumentIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},JN=["aria-hidden","aria-label"],YN=["fill","width","height"],ZN={d:"M13,9H18.5L13,3.5V9M6,2H14L20,8V20A2,2 0 0,1 18,22H6C4.89,22 4,21.1 4,20V4C4,2.89 4.89,2 6,2M15,18V16H6V18H15M18,14V12H6V14H18Z"},XN={key:0};function QN(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon file-document-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",ZN,[n.title?(p(),y("title",XN,$(n.title),1)):x("",!0)])],8,YN))],16,JN)}const eB=I(GN,[["render",QN]]),tB={name:"FileDocumentMultipleOutlineIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},nB=["aria-hidden","aria-label"],iB=["fill","width","height"],oB={d:"M16 0H8C6.9 0 6 .9 6 2V18C6 19.1 6.9 20 8 20H20C21.1 20 22 19.1 22 18V6L16 0M20 18H8V2H15V7H20V18M4 4V22H20V24H4C2.9 24 2 23.1 2 22V4H4M10 10V12H18V10H10M10 14V16H15V14H10Z"},sB={key:0};function rB(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon file-document-multiple-outline-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",oB,[n.title?(p(),y("title",sB,$(n.title),1)):x("",!0)])],8,iB))],16,nB)}const aB=I(tB,[["render",rB]]),lB={name:"FileTreeIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},cB=["aria-hidden","aria-label"],dB=["fill","width","height"],uB={d:"M3,3H9V7H3V3M15,10H21V14H15V10M15,17H21V21H15V17M13,13H7V18H13V20H7L5,20V9H7V11H13V13Z"},hB={key:0};function fB(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon file-tree-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",uB,[n.title?(p(),y("title",hB,$(n.title),1)):x("",!0)])],8,dB))],16,cB)}const pB=I(lB,[["render",fB]]),mB={name:"FlareIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},gB=["aria-hidden","aria-label"],bB=["fill","width","height"],yB={d:"M7,11H1V13H7V11M9.17,7.76L7.05,5.64L5.64,7.05L7.76,9.17L9.17,7.76M13,1H11V7H13V1M18.36,7.05L16.95,5.64L14.83,7.76L16.24,9.17L18.36,7.05M17,11V13H23V11H17M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M14.83,16.24L16.95,18.36L18.36,16.95L16.24,14.83L14.83,16.24M5.64,16.95L7.05,18.36L9.17,16.24L7.76,14.83L5.64,16.95M11,23H13V17H11V23Z"},vB={key:0};function wB(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon flare-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",yB,[n.title?(p(),y("title",vB,$(n.title),1)):x("",!0)])],8,bB))],16,gB)}const _B=I(mB,[["render",wB]]),CB={name:"FormatAlignCenterIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},AB=["aria-hidden","aria-label"],kB=["fill","width","height"],SB={d:"M3,3H21V5H3V3M7,7H17V9H7V7M3,11H21V13H3V11M7,15H17V17H7V15M3,19H21V21H3V19Z"},xB={key:0};function MB(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon format-align-center-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",SB,[n.title?(p(),y("title",xB,$(n.title),1)):x("",!0)])],8,kB))],16,AB)}const TB=I(CB,[["render",MB]]),EB={name:"FormatAlignJustifyIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},OB=["aria-hidden","aria-label"],$B=["fill","width","height"],IB={d:"M3,3H21V5H3V3M3,7H21V9H3V7M3,11H21V13H3V11M3,15H21V17H3V15M3,19H21V21H3V19Z"},LB={key:0};function DB(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon format-align-justify-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",IB,[n.title?(p(),y("title",LB,$(n.title),1)):x("",!0)])],8,$B))],16,OB)}const RB=I(EB,[["render",DB]]),PB={name:"FormatAlignLeftIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},HB=["aria-hidden","aria-label"],VB=["fill","width","height"],zB={d:"M3,3H21V5H3V3M3,7H15V9H3V7M3,11H21V13H3V11M3,15H15V17H3V15M3,19H21V21H3V19Z"},NB={key:0};function BB(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon format-align-left-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",zB,[n.title?(p(),y("title",NB,$(n.title),1)):x("",!0)])],8,VB))],16,HB)}const FB=I(PB,[["render",BB]]),WB={name:"FormatAlignRightIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},UB=["aria-hidden","aria-label"],jB=["fill","width","height"],qB={d:"M3,3H21V5H3V3M9,7H21V9H9V7M3,11H21V13H3V11M9,15H21V17H9V15M3,19H21V21H3V19Z"},KB={key:0};function GB(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon format-align-right-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",qB,[n.title?(p(),y("title",KB,$(n.title),1)):x("",!0)])],8,jB))],16,UB)}const JB=I(WB,[["render",GB]]),YB={name:"FormatBoldIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},ZB=["aria-hidden","aria-label"],XB=["fill","width","height"],QB={d:"M13.5,15.5H10V12.5H13.5A1.5,1.5 0 0,1 15,14A1.5,1.5 0 0,1 13.5,15.5M10,6.5H13A1.5,1.5 0 0,1 14.5,8A1.5,1.5 0 0,1 13,9.5H10M15.6,10.79C16.57,10.11 17.25,9 17.25,8C17.25,5.74 15.5,4 13.25,4H7V18H14.04C16.14,18 17.75,16.3 17.75,14.21C17.75,12.69 16.89,11.39 15.6,10.79Z"},eF={key:0};function tF(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon format-bold-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",QB,[n.title?(p(),y("title",eF,$(n.title),1)):x("",!0)])],8,XB))],16,ZB)}const nF=I(YB,[["render",tF]]),iF={name:"FormatFontIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},oF=["aria-hidden","aria-label"],sF=["fill","width","height"],rF={d:"M17,8H20V20H21V21H17V20H18V17H14L12.5,20H14V21H10V20H11L17,8M18,9L14.5,16H18V9M5,3H10C11.11,3 12,3.89 12,5V16H9V11H6V16H3V5C3,3.89 3.89,3 5,3M6,5V9H9V5H6Z"},aF={key:0};function lF(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon format-font-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",rF,[n.title?(p(),y("title",aF,$(n.title),1)):x("",!0)])],8,sF))],16,oF)}const cF=I(iF,[["render",lF]]),dF={name:"FormatItalicIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},uF=["aria-hidden","aria-label"],hF=["fill","width","height"],fF={d:"M10,4V7H12.21L8.79,15H6V18H14V15H11.79L15.21,7H18V4H10Z"},pF={key:0};function mF(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon format-italic-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",fF,[n.title?(p(),y("title",pF,$(n.title),1)):x("",!0)])],8,hF))],16,uF)}const gF=I(dF,[["render",mF]]),bF={name:"FormatListBulletedIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},yF=["aria-hidden","aria-label"],vF=["fill","width","height"],wF={d:"M7,5H21V7H7V5M7,13V11H21V13H7M4,4.5A1.5,1.5 0 0,1 5.5,6A1.5,1.5 0 0,1 4,7.5A1.5,1.5 0 0,1 2.5,6A1.5,1.5 0 0,1 4,4.5M4,10.5A1.5,1.5 0 0,1 5.5,12A1.5,1.5 0 0,1 4,13.5A1.5,1.5 0 0,1 2.5,12A1.5,1.5 0 0,1 4,10.5M7,19V17H21V19H7M4,16.5A1.5,1.5 0 0,1 5.5,18A1.5,1.5 0 0,1 4,19.5A1.5,1.5 0 0,1 2.5,18A1.5,1.5 0 0,1 4,16.5Z"},_F={key:0};function CF(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon format-list-bulleted-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",wF,[n.title?(p(),y("title",_F,$(n.title),1)):x("",!0)])],8,vF))],16,yF)}const AF=I(bF,[["render",CF]]),kF={name:"FormatListNumberedIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},SF=["aria-hidden","aria-label"],xF=["fill","width","height"],MF={d:"M7,13V11H21V13H7M7,19V17H21V19H7M7,7V5H21V7H7M3,8V5H2V4H4V8H3M2,17V16H5V20H2V19H4V18.5H3V17.5H4V17H2M4.25,10A0.75,0.75 0 0,1 5,10.75C5,10.95 4.92,11.14 4.79,11.27L3.12,13H5V14H2V13.08L4,11H2V10H4.25Z"},TF={key:0};function EF(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon format-list-numbered-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",MF,[n.title?(p(),y("title",TF,$(n.title),1)):x("",!0)])],8,xF))],16,SF)}const OF=I(kF,[["render",EF]]),$F={name:"FormatQuoteCloseIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},IF=["aria-hidden","aria-label"],LF=["fill","width","height"],DF={d:"M14,17H17L19,13V7H13V13H16M6,17H9L11,13V7H5V13H8L6,17Z"},RF={key:0};function PF(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon format-quote-close-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",DF,[n.title?(p(),y("title",RF,$(n.title),1)):x("",!0)])],8,LF))],16,IF)}const HF=I($F,[["render",PF]]),VF={name:"FormatStrikethroughVariantIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},zF=["aria-hidden","aria-label"],NF=["fill","width","height"],BF={d:"M23,12V14H18.61C19.61,16.14 19.56,22 12.38,22C4.05,22.05 4.37,15.5 4.37,15.5L8.34,15.55C8.37,18.92 11.5,18.92 12.12,18.88C12.76,18.83 15.15,18.84 15.34,16.5C15.42,15.41 14.32,14.58 13.12,14H1V12H23M19.41,7.89L15.43,7.86C15.43,7.86 15.6,5.09 12.15,5.08C8.7,5.06 9,7.28 9,7.56C9.04,7.84 9.34,9.22 12,9.88H5.71C5.71,9.88 2.22,3.15 10.74,2C19.45,0.8 19.43,7.91 19.41,7.89Z"},FF={key:0};function WF(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon format-strikethrough-variant-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",BF,[n.title?(p(),y("title",FF,$(n.title),1)):x("",!0)])],8,NF))],16,zF)}const UF=I(VF,[["render",WF]]),jF={name:"FormatSubscriptIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},qF=["aria-hidden","aria-label"],KF=["fill","width","height"],GF={d:"M16,7.41L11.41,12L16,16.59L14.59,18L10,13.41L5.41,18L4,16.59L8.59,12L4,7.41L5.41,6L10,10.59L14.59,6L16,7.41M21.85,21.03H16.97V20.03L17.86,19.23C18.62,18.58 19.18,18.04 19.56,17.6C19.93,17.16 20.12,16.75 20.13,16.36C20.14,16.08 20.05,15.85 19.86,15.66C19.68,15.5 19.39,15.38 19,15.38C18.69,15.38 18.42,15.44 18.16,15.56L17.5,15.94L17.05,14.77C17.32,14.56 17.64,14.38 18.03,14.24C18.42,14.1 18.85,14 19.32,14C20.1,14.04 20.7,14.25 21.1,14.66C21.5,15.07 21.72,15.59 21.72,16.23C21.71,16.79 21.53,17.31 21.18,17.78C20.84,18.25 20.42,18.7 19.91,19.14L19.27,19.66V19.68H21.85V21.03Z"},JF={key:0};function YF(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon format-subscript-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",GF,[n.title?(p(),y("title",JF,$(n.title),1)):x("",!0)])],8,KF))],16,qF)}const ZF=I(jF,[["render",YF]]),XF={name:"FormatSuperscriptIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},QF=["aria-hidden","aria-label"],eW=["fill","width","height"],tW={d:"M16,7.41L11.41,12L16,16.59L14.59,18L10,13.41L5.41,18L4,16.59L8.59,12L4,7.41L5.41,6L10,10.59L14.59,6L16,7.41M21.85,9H16.97V8L17.86,7.18C18.62,6.54 19.18,6 19.56,5.55C19.93,5.11 20.12,4.7 20.13,4.32C20.14,4.04 20.05,3.8 19.86,3.62C19.68,3.43 19.39,3.34 19,3.33C18.69,3.34 18.42,3.4 18.16,3.5L17.5,3.89L17.05,2.72C17.32,2.5 17.64,2.33 18.03,2.19C18.42,2.05 18.85,2 19.32,2C20.1,2 20.7,2.2 21.1,2.61C21.5,3 21.72,3.54 21.72,4.18C21.71,4.74 21.53,5.26 21.18,5.73C20.84,6.21 20.42,6.66 19.91,7.09L19.27,7.61V7.63H21.85V9Z"},nW={key:0};function iW(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon format-superscript-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",tW,[n.title?(p(),y("title",nW,$(n.title),1)):x("",!0)])],8,eW))],16,QF)}const oW=I(XF,[["render",iW]]),sW={name:"FormatTextIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},rW=["aria-hidden","aria-label"],aW=["fill","width","height"],lW={d:"M18.5,4L19.66,8.35L18.7,8.61C18.25,7.74 17.79,6.87 17.26,6.43C16.73,6 16.11,6 15.5,6H13V16.5C13,17 13,17.5 13.33,17.75C13.67,18 14.33,18 15,18V19H9V18C9.67,18 10.33,18 10.67,17.75C11,17.5 11,17 11,16.5V6H8.5C7.89,6 7.27,6 6.74,6.43C6.21,6.87 5.75,7.74 5.3,8.61L4.34,8.35L5.5,4H18.5Z"},cW={key:0};function dW(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon format-text-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",lW,[n.title?(p(),y("title",cW,$(n.title),1)):x("",!0)])],8,aW))],16,rW)}const uW=I(sW,[["render",dW]]),hW={name:"FormatUnderlineIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},fW=["aria-hidden","aria-label"],pW=["fill","width","height"],mW={d:"M5,21H19V19H5V21M12,17A6,6 0 0,0 18,11V3H15.5V11A3.5,3.5 0 0,1 12,14.5A3.5,3.5 0 0,1 8.5,11V3H6V11A6,6 0 0,0 12,17Z"},gW={key:0};function bW(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon format-underline-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",mW,[n.title?(p(),y("title",gW,$(n.title),1)):x("",!0)])],8,pW))],16,fW)}const yW=I(hW,[["render",bW]]),vW={name:"HelpCircleIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},wW=["aria-hidden","aria-label"],_W=["fill","width","height"],CW={d:"M15.07,11.25L14.17,12.17C13.45,12.89 13,13.5 13,15H11V14.5C11,13.39 11.45,12.39 12.17,11.67L13.41,10.41C13.78,10.05 14,9.55 14,9C14,7.89 13.1,7 12,7A2,2 0 0,0 10,9H8A4,4 0 0,1 12,5A4,4 0 0,1 16,9C16,9.88 15.64,10.67 15.07,11.25M13,19H11V17H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12C22,6.47 17.5,2 12,2Z"},AW={key:0};function kW(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon help-circle-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",CW,[n.title?(p(),y("title",AW,$(n.title),1)):x("",!0)])],8,_W))],16,wW)}const SW=I(vW,[["render",kW]]),xW={name:"ImageEditOutlineIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},MW=["aria-hidden","aria-label"],TW=["fill","width","height"],EW={d:"M22.7 14.3L21.7 15.3L19.7 13.3L20.7 12.3C20.8 12.2 20.9 12.1 21.1 12.1C21.2 12.1 21.4 12.2 21.5 12.3L22.8 13.6C22.9 13.8 22.9 14.1 22.7 14.3M13 19.9V22H15.1L21.2 15.9L19.2 13.9L13 19.9M11.21 15.83L9.25 13.47L6.5 17H13.12L15.66 14.55L13.96 12.29L11.21 15.83M11 19.9V19.05L11.05 19H5V5H19V11.31L21 9.38V5C21 3.9 20.11 3 19 3H5C3.9 3 3 3.9 3 5V19C3 20.11 3.9 21 5 21H11V19.9Z"},OW={key:0};function $W(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon image-edit-outline-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",EW,[n.title?(p(),y("title",OW,$(n.title),1)):x("",!0)])],8,TW))],16,MW)}const IW=I(xW,[["render",$W]]),LW={name:"ImageIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},DW=["aria-hidden","aria-label"],RW=["fill","width","height"],PW={d:"M8.5,13.5L11,16.5L14.5,12L19,18H5M21,19V5C21,3.89 20.1,3 19,3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19Z"},HW={key:0};function VW(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon image-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",PW,[n.title?(p(),y("title",HW,$(n.title),1)):x("",!0)])],8,RW))],16,DW)}const zW=I(LW,[["render",VW]]),NW={name:"ImagePlusIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},BW=["aria-hidden","aria-label"],FW=["fill","width","height"],WW={d:"M5,3A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H14.09C14.03,20.67 14,20.34 14,20C14,19.32 14.12,18.64 14.35,18H5L8.5,13.5L11,16.5L14.5,12L16.73,14.97C17.7,14.34 18.84,14 20,14C20.34,14 20.67,14.03 21,14.09V5C21,3.89 20.1,3 19,3H5M19,16V19H16V21H19V24H21V21H24V19H21V16H19Z"},UW={key:0};function jW(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon image-plus-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",WW,[n.title?(p(),y("title",UW,$(n.title),1)):x("",!0)])],8,FW))],16,BW)}const qW=I(NW,[["render",jW]]),KW={name:"ImageSizeSelectActualIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},GW=["aria-hidden","aria-label"],JW=["fill","width","height"],YW={d:"M21,3H3C2,3 1,4 1,5V19A2,2 0 0,0 3,21H21C22,21 23,20 23,19V5C23,4 22,3 21,3M5,17L8.5,12.5L11,15.5L14.5,11L19,17H5Z"},ZW={key:0};function XW(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon image-size-select-actual-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",YW,[n.title?(p(),y("title",ZW,$(n.title),1)):x("",!0)])],8,JW))],16,GW)}const QW=I(KW,[["render",XW]]),eU={name:"InformationIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},tU=["aria-hidden","aria-label"],nU=["fill","width","height"],iU={d:"M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"},oU={key:0};function sU(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon information-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",iU,[n.title?(p(),y("title",oU,$(n.title),1)):x("",!0)])],8,nU))],16,tU)}const ZS=I(eU,[["render",sU]]),rU={name:"InformationOutlineIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},aU=["aria-hidden","aria-label"],lU=["fill","width","height"],cU={d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M11,17H13V11H11V17Z"},dU={key:0};function uU(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon information-outline-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",cU,[n.title?(p(),y("title",dU,$(n.title),1)):x("",!0)])],8,lU))],16,aU)}const hU=I(rU,[["render",uU]]),fU={name:"InstagramIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},pU=["aria-hidden","aria-label"],mU=["fill","width","height"],gU={d:"M7.8,2H16.2C19.4,2 22,4.6 22,7.8V16.2A5.8,5.8 0 0,1 16.2,22H7.8C4.6,22 2,19.4 2,16.2V7.8A5.8,5.8 0 0,1 7.8,2M7.6,4A3.6,3.6 0 0,0 4,7.6V16.4C4,18.39 5.61,20 7.6,20H16.4A3.6,3.6 0 0,0 20,16.4V7.6C20,5.61 18.39,4 16.4,4H7.6M17.25,5.5A1.25,1.25 0 0,1 18.5,6.75A1.25,1.25 0 0,1 17.25,8A1.25,1.25 0 0,1 16,6.75A1.25,1.25 0 0,1 17.25,5.5M12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9Z"},bU={key:0};function yU(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon instagram-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",gU,[n.title?(p(),y("title",bU,$(n.title),1)):x("",!0)])],8,mU))],16,pU)}const vU=I(fU,[["render",yU]]),wU={name:"KeyboardBackspaceIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},_U=["aria-hidden","aria-label"],CU=["fill","width","height"],AU={d:"M21,11H6.83L10.41,7.41L9,6L3,12L9,18L10.41,16.58L6.83,13H21V11Z"},kU={key:0};function SU(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon keyboard-backspace-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",AU,[n.title?(p(),y("title",kU,$(n.title),1)):x("",!0)])],8,CU))],16,_U)}const xU=I(wU,[["render",SU]]),MU={name:"KeyboardEscIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},TU=["aria-hidden","aria-label"],EU=["fill","width","height"],OU={d:"M1 7H7V9H3V11H7V13H3V15H7V17H1V7M11 7H15V9H11V11H13C14.11 11 15 11.9 15 13V15C15 16.11 14.11 17 13 17H9V15H13V13H11C9.9 13 9 12.11 9 11V9C9 7.9 9.9 7 11 7M19 7H21C22.11 7 23 7.9 23 9V10H21V9H19V15H21V14H23V15C23 16.11 22.11 17 21 17H19C17.9 17 17 16.11 17 15V9C17 7.9 17.9 7 19 7Z"},$U={key:0};function IU(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon keyboard-esc-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",OU,[n.title?(p(),y("title",$U,$(n.title),1)):x("",!0)])],8,EU))],16,TU)}const LU=I(MU,[["render",IU]]),DU={name:"KeyboardF1Icon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},RU=["aria-hidden","aria-label"],PU=["fill","width","height"],HU={d:"M6 7H12V9H8V11H11V13H8V17H6V7M14 7H18V17H16V9H14V7Z"},VU={key:0};function zU(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon keyboard-f1-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",HU,[n.title?(p(),y("title",VU,$(n.title),1)):x("",!0)])],8,PU))],16,RU)}const NU=I(DU,[["render",zU]]),BU={name:"KeyboardF10Icon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},FU=["aria-hidden","aria-label"],WU=["fill","width","height"],UU={d:"M2 7H8V9H4V11H7V13H4V17H2V7M10 7H14V17H12V9H10V7M18 7H20C21.11 7 22 7.9 22 9V15C22 16.11 21.11 17 20 17H18C16.9 17 16 16.11 16 15V9C16 7.9 16.9 7 18 7M18 9V15H20V9H18Z"},jU={key:0};function qU(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon keyboard-f10-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",UU,[n.title?(p(),y("title",jU,$(n.title),1)):x("",!0)])],8,WU))],16,FU)}const KU=I(BU,[["render",qU]]),GU={name:"KeyboardF11Icon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},JU=["aria-hidden","aria-label"],YU=["fill","width","height"],ZU={d:"M3 7H9V9H5V11H8V13H5V17H3V7M11 7H15V17H13V9H11V7M17 7H21V17H19V9H17V7Z"},XU={key:0};function QU(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon keyboard-f11-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",ZU,[n.title?(p(),y("title",XU,$(n.title),1)):x("",!0)])],8,YU))],16,JU)}const ej=I(GU,[["render",QU]]),tj={name:"KeyboardF12Icon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},nj=["aria-hidden","aria-label"],ij=["fill","width","height"],oj={d:"M2 7H8V9H4V11H7V13H4V17H2V7M16 7H20C21.11 7 22 7.9 22 9V11C22 12.11 21.11 13 20 13H18V15H22V17H16V13C16 11.9 16.9 11 18 11H20V9H16V7M10 7H14V17H12V9H10V7Z"},sj={key:0};function rj(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon keyboard-f12-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",oj,[n.title?(p(),y("title",sj,$(n.title),1)):x("",!0)])],8,ij))],16,nj)}const aj=I(tj,[["render",rj]]),lj={name:"KeyboardF2Icon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},cj=["aria-hidden","aria-label"],dj=["fill","width","height"],uj={d:"M5 7H11V9H7V11H10V13H7V17H5V7M13 7H17C18.11 7 19 7.9 19 9V11C19 12.11 18.11 13 17 13H15V15H19V17H13V13C13 11.9 13.9 11 15 11H17V9H13V7Z"},hj={key:0};function fj(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon keyboard-f2-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",uj,[n.title?(p(),y("title",hj,$(n.title),1)):x("",!0)])],8,dj))],16,cj)}const pj=I(lj,[["render",fj]]),mj={name:"KeyboardF3Icon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},gj=["aria-hidden","aria-label"],bj=["fill","width","height"],yj={d:"M5 7H11V9H7V11H10V13H7V17H5V7M19 15C19 16.11 18.11 17 17 17H13V15H17V13H15V11H17V9H13V7H17C18.1 7 19 7.89 19 9V10.5C19 11.33 18.33 12 17.5 12C18.33 12 19 12.67 19 13.5V15Z"},vj={key:0};function wj(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon keyboard-f3-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",yj,[n.title?(p(),y("title",vj,$(n.title),1)):x("",!0)])],8,bj))],16,gj)}const _j=I(mj,[["render",wj]]),Cj={name:"KeyboardF4Icon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},Aj=["aria-hidden","aria-label"],kj=["fill","width","height"],Sj={d:"M5 7H11V9H7V11H10V13H7V17H5V7M13 7H15V11H17V7H19V17H17V13H13V7Z"},xj={key:0};function Mj(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon keyboard-f4-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",Sj,[n.title?(p(),y("title",xj,$(n.title),1)):x("",!0)])],8,kj))],16,Aj)}const Tj=I(Cj,[["render",Mj]]),Ej={name:"KeyboardF5Icon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},Oj=["aria-hidden","aria-label"],$j=["fill","width","height"],Ij={d:"M5 7H11V9H7V11H10V13H7V17H5V7M13 7H19V9H15V11H17C18.11 11 19 11.9 19 13V15C19 16.11 18.11 17 17 17H13V15H17V13H13V7Z"},Lj={key:0};function Dj(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon keyboard-f5-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",Ij,[n.title?(p(),y("title",Lj,$(n.title),1)):x("",!0)])],8,$j))],16,Oj)}const Rj=I(Ej,[["render",Dj]]),Pj={name:"KeyboardF6Icon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},Hj=["aria-hidden","aria-label"],Vj=["fill","width","height"],zj={d:"M5 7H11V9H7V11H10V13H7V17H5V7M15 7H19V9H15V11H17C18.11 11 19 11.9 19 13V15C19 16.11 18.11 17 17 17H15C13.9 17 13 16.11 13 15V9C13 7.9 13.9 7 15 7M15 13V15H17V13H15Z"},Nj={key:0};function Bj(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon keyboard-f6-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",zj,[n.title?(p(),y("title",Nj,$(n.title),1)):x("",!0)])],8,Vj))],16,Hj)}const Fj=I(Pj,[["render",Bj]]),Wj={name:"KeyboardF7Icon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},Uj=["aria-hidden","aria-label"],jj=["fill","width","height"],qj={d:"M5 7H11V9H7V11H10V13H7V17H5V7M15 17H13L17 9H13V7H19V9L15 17Z"},Kj={key:0};function Gj(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon keyboard-f7-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",qj,[n.title?(p(),y("title",Kj,$(n.title),1)):x("",!0)])],8,jj))],16,Uj)}const Jj=I(Wj,[["render",Gj]]),Yj={name:"KeyboardF8Icon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},Zj=["aria-hidden","aria-label"],Xj=["fill","width","height"],Qj={d:"M5 7H11V9H7V11H10V13H7V17H5V7M15 13V15H17V13H15M15 9V11H17V9H15M15 17C13.9 17 13 16.11 13 15V13.5C13 12.67 13.67 12 14.5 12C13.67 12 13 11.33 13 10.5V9C13 7.9 13.9 7 15 7H17C18.1 7 19 7.89 19 9V10.5C19 11.33 18.33 12 17.5 12C18.33 12 19 12.67 19 13.5V15C19 16.11 18.11 17 17 17H15Z"},eq={key:0};function tq(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon keyboard-f8-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",Qj,[n.title?(p(),y("title",eq,$(n.title),1)):x("",!0)])],8,Xj))],16,Zj)}const nq=I(Yj,[["render",tq]]),iq={name:"KeyboardF9Icon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},oq=["aria-hidden","aria-label"],sq=["fill","width","height"],rq={d:"M5 7H11V9H7V11H10V13H7V17H5V7M17 17H13V15H17V13H15C13.9 13 13 12.11 13 11V9C13 7.9 13.9 7 15 7H17C18.11 7 19 7.9 19 9V15C19 16.11 18.11 17 17 17M17 11V9H15V11H17Z"},aq={key:0};function lq(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon keyboard-f9-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",rq,[n.title?(p(),y("title",aq,$(n.title),1)):x("",!0)])],8,sq))],16,oq)}const cq=I(iq,[["render",lq]]),dq={name:"KeyboardReturnIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},uq=["aria-hidden","aria-label"],hq=["fill","width","height"],fq={d:"M19,7V11H5.83L9.41,7.41L8,6L2,12L8,18L9.41,16.58L5.83,13H21V7H19Z"},pq={key:0};function mq(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon keyboard-return-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",fq,[n.title?(p(),y("title",pq,$(n.title),1)):x("",!0)])],8,hq))],16,uq)}const gq=I(dq,[["render",mq]]),bq={name:"KeyboardSpaceIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},yq=["aria-hidden","aria-label"],vq=["fill","width","height"],wq={d:"M3 15H5V19H19V15H21V19C21 20.1 20.1 21 19 21H5C3.9 21 3 20.1 3 19V15Z"},_q={key:0};function Cq(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon keyboard-space-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",wq,[n.title?(p(),y("title",_q,$(n.title),1)):x("",!0)])],8,vq))],16,yq)}const Aq=I(bq,[["render",Cq]]),kq={name:"KeyboardTabIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},Sq=["aria-hidden","aria-label"],xq=["fill","width","height"],Mq={d:"M20,18H22V6H20M11.59,7.41L15.17,11H1V13H15.17L11.59,16.58L13,18L19,12L13,6L11.59,7.41Z"},Tq={key:0};function Eq(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon keyboard-tab-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",Mq,[n.title?(p(),y("title",Tq,$(n.title),1)):x("",!0)])],8,xq))],16,Sq)}const Oq=I(kq,[["render",Eq]]),$q={name:"LabelIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},Iq=["aria-hidden","aria-label"],Lq=["fill","width","height"],Dq={d:"M17.63,5.84C17.27,5.33 16.67,5 16,5H5A2,2 0 0,0 3,7V17A2,2 0 0,0 5,19H16C16.67,19 17.27,18.66 17.63,18.15L22,12L17.63,5.84Z"},Rq={key:0};function Pq(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon label-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",Dq,[n.title?(p(),y("title",Rq,$(n.title),1)):x("",!0)])],8,Lq))],16,Iq)}const Hq=I($q,[["render",Pq]]),Vq={name:"LightbulbOnIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},zq=["aria-hidden","aria-label"],Nq=["fill","width","height"],Bq={d:"M12,6A6,6 0 0,1 18,12C18,14.22 16.79,16.16 15,17.2V19A1,1 0 0,1 14,20H10A1,1 0 0,1 9,19V17.2C7.21,16.16 6,14.22 6,12A6,6 0 0,1 12,6M14,21V22A1,1 0 0,1 13,23H11A1,1 0 0,1 10,22V21H14M20,11H23V13H20V11M1,11H4V13H1V11M13,1V4H11V1H13M4.92,3.5L7.05,5.64L5.63,7.05L3.5,4.93L4.92,3.5M16.95,5.63L19.07,3.5L20.5,4.93L18.37,7.05L16.95,5.63Z"},Fq={key:0};function Wq(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon lightbulb-on-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",Bq,[n.title?(p(),y("title",Fq,$(n.title),1)):x("",!0)])],8,Nq))],16,zq)}const Uq=I(Vq,[["render",Wq]]),jq={name:"LinkIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},qq=["aria-hidden","aria-label"],Kq=["fill","width","height"],Gq={d:"M3.9,12C3.9,10.29 5.29,8.9 7,8.9H11V7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H11V15.1H7C5.29,15.1 3.9,13.71 3.9,12M8,13H16V11H8V13M17,7H13V8.9H17C18.71,8.9 20.1,10.29 20.1,12C20.1,13.71 18.71,15.1 17,15.1H13V17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7Z"},Jq={key:0};function Yq(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon link-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",Gq,[n.title?(p(),y("title",Jq,$(n.title),1)):x("",!0)])],8,Kq))],16,qq)}const Zq=I(jq,[["render",Yq]]),Xq={name:"ListStatusIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},Qq=["aria-hidden","aria-label"],eK=["fill","width","height"],tK={d:"M16.5 11L13 7.5L14.4 6.1L16.5 8.2L20.7 4L22.1 5.4L16.5 11M11 7H2V9H11V7M21 13.4L19.6 12L17 14.6L14.4 12L13 13.4L15.6 16L13 18.6L14.4 20L17 17.4L19.6 20L21 18.6L18.4 16L21 13.4M11 15H2V17H11V15Z"},nK={key:0};function iK(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon list-status-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",tK,[n.title?(p(),y("title",nK,$(n.title),1)):x("",!0)])],8,eK))],16,Qq)}const oK=I(Xq,[["render",iK]]),sK={name:"LockIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},rK=["aria-hidden","aria-label"],aK=["fill","width","height"],lK={d:"M12,17A2,2 0 0,0 14,15C14,13.89 13.1,13 12,13A2,2 0 0,0 10,15A2,2 0 0,0 12,17M18,8A2,2 0 0,1 20,10V20A2,2 0 0,1 18,22H6A2,2 0 0,1 4,20V10C4,8.89 4.9,8 6,8H7V6A5,5 0 0,1 12,1A5,5 0 0,1 17,6V8H18M12,3A3,3 0 0,0 9,6V8H15V6A3,3 0 0,0 12,3Z"},cK={key:0};function dK(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon lock-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",lK,[n.title?(p(),y("title",cK,$(n.title),1)):x("",!0)])],8,aK))],16,rK)}const uK=I(sK,[["render",dK]]),hK={name:"MagnifyIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},fK=["aria-hidden","aria-label"],pK=["fill","width","height"],mK={d:"M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"},gK={key:0};function bK(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon magnify-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",mK,[n.title?(p(),y("title",gK,$(n.title),1)):x("",!0)])],8,pK))],16,fK)}const yK=I(hK,[["render",bK]]),vK={name:"MapMarkerIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},wK=["aria-hidden","aria-label"],_K=["fill","width","height"],CK={d:"M12,11.5A2.5,2.5 0 0,1 9.5,9A2.5,2.5 0 0,1 12,6.5A2.5,2.5 0 0,1 14.5,9A2.5,2.5 0 0,1 12,11.5M12,2A7,7 0 0,0 5,9C5,14.25 12,22 12,22C12,22 19,14.25 19,9A7,7 0 0,0 12,2Z"},AK={key:0};function kK(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon map-marker-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",CK,[n.title?(p(),y("title",AK,$(n.title),1)):x("",!0)])],8,_K))],16,wK)}const SK=I(vK,[["render",kK]]),xK={name:"MenuDownIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},MK=["aria-hidden","aria-label"],TK=["fill","width","height"],EK={d:"M7,10L12,15L17,10H7Z"},OK={key:0};function $K(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon menu-down-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",EK,[n.title?(p(),y("title",OK,$(n.title),1)):x("",!0)])],8,TK))],16,MK)}const IK=I(xK,[["render",$K]]),LK={name:"MinusBoxIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},DK=["aria-hidden","aria-label"],RK=["fill","width","height"],PK={d:"M17,13H7V11H17M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z"},HK={key:0};function VK(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon minus-box-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",PK,[n.title?(p(),y("title",HK,$(n.title),1)):x("",!0)])],8,RK))],16,DK)}const zK=I(LK,[["render",VK]]),NK={name:"MinusIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},BK=["aria-hidden","aria-label"],FK=["fill","width","height"],WK={d:"M19,13H5V11H19V13Z"},UK={key:0};function jK(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon minus-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",WK,[n.title?(p(),y("title",UK,$(n.title),1)):x("",!0)])],8,FK))],16,BK)}const qK=I(NK,[["render",jK]]),KK={name:"MonitorIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},GK=["aria-hidden","aria-label"],JK=["fill","width","height"],YK={d:"M21,16H3V4H21M21,2H3C1.89,2 1,2.89 1,4V16A2,2 0 0,0 3,18H10V20H8V22H16V20H14V18H21A2,2 0 0,0 23,16V4C23,2.89 22.1,2 21,2Z"},ZK={key:0};function XK(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon monitor-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",YK,[n.title?(p(),y("title",ZK,$(n.title),1)):x("",!0)])],8,JK))],16,GK)}const QK=I(KK,[["render",XK]]),eG={name:"PaperclipIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},tG=["aria-hidden","aria-label"],nG=["fill","width","height"],iG={d:"M16.5,6V17.5A4,4 0 0,1 12.5,21.5A4,4 0 0,1 8.5,17.5V5A2.5,2.5 0 0,1 11,2.5A2.5,2.5 0 0,1 13.5,5V15.5A1,1 0 0,1 12.5,16.5A1,1 0 0,1 11.5,15.5V6H10V15.5A2.5,2.5 0 0,0 12.5,18A2.5,2.5 0 0,0 15,15.5V5A4,4 0 0,0 11,1A4,4 0 0,0 7,5V17.5A5.5,5.5 0 0,0 12.5,23A5.5,5.5 0 0,0 18,17.5V6H16.5Z"},oG={key:0};function sG(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon paperclip-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",iG,[n.title?(p(),y("title",oG,$(n.title),1)):x("",!0)])],8,nG))],16,tG)}const rG=I(eG,[["render",sG]]),aG={name:"PencilIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},lG=["aria-hidden","aria-label"],cG=["fill","width","height"],dG={d:"M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z"},uG={key:0};function hG(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon pencil-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",dG,[n.title?(p(),y("title",uG,$(n.title),1)):x("",!0)])],8,cG))],16,lG)}const fG=I(aG,[["render",hG]]),pG={name:"PhoneIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},mG=["aria-hidden","aria-label"],gG=["fill","width","height"],bG={d:"M6.62,10.79C8.06,13.62 10.38,15.94 13.21,17.38L15.41,15.18C15.69,14.9 16.08,14.82 16.43,14.93C17.55,15.3 18.75,15.5 20,15.5A1,1 0 0,1 21,16.5V20A1,1 0 0,1 20,21A17,17 0 0,1 3,4A1,1 0 0,1 4,3H7.5A1,1 0 0,1 8.5,4C8.5,5.25 8.7,6.45 9.07,7.57C9.18,7.92 9.1,8.31 8.82,8.59L6.62,10.79Z"},yG={key:0};function vG(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon phone-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",bG,[n.title?(p(),y("title",yG,$(n.title),1)):x("",!0)])],8,gG))],16,mG)}const wG=I(pG,[["render",vG]]),_G={name:"PlayBoxIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},CG=["aria-hidden","aria-label"],AG=["fill","width","height"],kG={d:"M19 3H5C3.89 3 3 3.89 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.89 20.1 3 19 3M10 16V8L15 12"},SG={key:0};function xG(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon play-box-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",kG,[n.title?(p(),y("title",SG,$(n.title),1)):x("",!0)])],8,AG))],16,CG)}const MG=I(_G,[["render",xG]]),TG={name:"PlaylistEditIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},EG=["aria-hidden","aria-label"],OG=["fill","width","height"],$G={d:"M2,6V8H14V6H2M2,10V12H14V10H2M20.04,10.13C19.9,10.13 19.76,10.19 19.65,10.3L18.65,11.3L20.7,13.35L21.7,12.35C21.92,12.14 21.92,11.79 21.7,11.58L20.42,10.3C20.31,10.19 20.18,10.13 20.04,10.13M18.07,11.88L12,17.94V20H14.06L20.12,13.93L18.07,11.88M2,14V16H10V14H2Z"},IG={key:0};function LG(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon playlist-edit-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",$G,[n.title?(p(),y("title",IG,$(n.title),1)):x("",!0)])],8,OG))],16,EG)}const DG=I(TG,[["render",LG]]),RG={name:"PlusIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},PG=["aria-hidden","aria-label"],HG=["fill","width","height"],VG={d:"M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"},zG={key:0};function NG(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon plus-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",VG,[n.title?(p(),y("title",zG,$(n.title),1)):x("",!0)])],8,HG))],16,PG)}const BG=I(RG,[["render",NG]]),FG={name:"RedoVariantIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},WG=["aria-hidden","aria-label"],UG=["fill","width","height"],jG={d:"M10.5,7A6.5,6.5 0 0,0 4,13.5A6.5,6.5 0 0,0 10.5,20H14V18H10.5C8,18 6,16 6,13.5C6,11 8,9 10.5,9H16.17L13.09,12.09L14.5,13.5L20,8L14.5,2.5L13.08,3.91L16.17,7H10.5M18,18H16V20H18V18Z"},qG={key:0};function KG(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon redo-variant-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",jG,[n.title?(p(),y("title",qG,$(n.title),1)):x("",!0)])],8,UG))],16,WG)}const GG=I(FG,[["render",KG]]),JG={name:"RefreshIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},YG=["aria-hidden","aria-label"],ZG=["fill","width","height"],XG={d:"M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z"},QG={key:0};function eJ(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon refresh-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",XG,[n.title?(p(),y("title",QG,$(n.title),1)):x("",!0)])],8,ZG))],16,YG)}const tJ=I(JG,[["render",eJ]]),nJ={name:"ShapeIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},iJ=["aria-hidden","aria-label"],oJ=["fill","width","height"],sJ={d:"M11,13.5V21.5H3V13.5H11M12,2L17.5,11H6.5L12,2M17.5,13C20,13 22,15 22,17.5C22,20 20,22 17.5,22C15,22 13,20 13,17.5C13,15 15,13 17.5,13Z"},rJ={key:0};function aJ(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon shape-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",sJ,[n.title?(p(),y("title",rJ,$(n.title),1)):x("",!0)])],8,oJ))],16,iJ)}const lJ=I(nJ,[["render",aJ]]),cJ={name:"SignTextIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},dJ=["aria-hidden","aria-label"],uJ=["fill","width","height"],hJ={d:"M11,3L12,2L13,3V5H20A1,1 0 0,1 21,6V16A1,1 0 0,1 20,17H13V20A2,2 0 0,1 15,22H9A2,2 0 0,1 11,20V17H4A1,1 0 0,1 3,16V6A1,1 0 0,1 4,5H11V3M6,8V10H18V8H6M6,12V14H13V12H6Z"},fJ={key:0};function pJ(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon sign-text-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",hJ,[n.title?(p(),y("title",fJ,$(n.title),1)):x("",!0)])],8,uJ))],16,dJ)}const mJ=I(cJ,[["render",pJ]]),gJ={name:"TabletIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},bJ=["aria-hidden","aria-label"],yJ=["fill","width","height"],vJ={d:"M19,18H5V6H19M21,4H3C1.89,4 1,4.89 1,6V18A2,2 0 0,0 3,20H21A2,2 0 0,0 23,18V6C23,4.89 22.1,4 21,4Z"},wJ={key:0};function _J(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon tablet-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",vJ,[n.title?(p(),y("title",wJ,$(n.title),1)):x("",!0)])],8,yJ))],16,bJ)}const CJ=I(gJ,[["render",_J]]),AJ={name:"TagIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},kJ=["aria-hidden","aria-label"],SJ=["fill","width","height"],xJ={d:"M5.5,7A1.5,1.5 0 0,1 4,5.5A1.5,1.5 0 0,1 5.5,4A1.5,1.5 0 0,1 7,5.5A1.5,1.5 0 0,1 5.5,7M21.41,11.58L12.41,2.58C12.05,2.22 11.55,2 11,2H4C2.89,2 2,2.89 2,4V11C2,11.55 2.22,12.05 2.59,12.41L11.58,21.41C11.95,21.77 12.45,22 13,22C13.55,22 14.05,21.77 14.41,21.41L21.41,14.41C21.78,14.05 22,13.55 22,13C22,12.44 21.77,11.94 21.41,11.58Z"},MJ={key:0};function TJ(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon tag-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",xJ,[n.title?(p(),y("title",MJ,$(n.title),1)):x("",!0)])],8,SJ))],16,kJ)}const EJ=I(AJ,[["render",TJ]]),OJ={name:"TextBoxIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},$J=["aria-hidden","aria-label"],IJ=["fill","width","height"],LJ={d:"M14,17H7V15H14M17,13H7V11H17M17,9H7V7H17M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z"},DJ={key:0};function RJ(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon text-box-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",LJ,[n.title?(p(),y("title",DJ,$(n.title),1)):x("",!0)])],8,IJ))],16,$J)}const PJ=I(OJ,[["render",RJ]]),HJ={name:"TextBoxMultipleIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},VJ=["aria-hidden","aria-label"],zJ=["fill","width","height"],NJ={d:"M16,15H9V13H16M19,11H9V9H19M19,7H9V5H19M21,1H7C5.89,1 5,1.89 5,3V17C5,18.11 5.9,19 7,19H21C22.11,19 23,18.11 23,17V3C23,1.89 22.1,1 21,1M3,5V21H19V23H3A2,2 0 0,1 1,21V5H3Z"},BJ={key:0};function FJ(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon text-box-multiple-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",NJ,[n.title?(p(),y("title",BJ,$(n.title),1)):x("",!0)])],8,zJ))],16,VJ)}const WJ=I(HJ,[["render",FJ]]),UJ={name:"TextBoxRemoveIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},jJ=["aria-hidden","aria-label"],qJ=["fill","width","height"],KJ={d:"M14.46,15.88L15.88,14.46L18,16.59L20.12,14.46L21.54,15.88L19.41,18L21.54,20.12L20.12,21.54L18,19.41L15.88,21.54L14.46,20.12L16.59,18L14.46,15.88M12,17V15H7V17H12M17,11H7V13H14.69C13.07,14.07 12,15.91 12,18C12,19.09 12.29,20.12 12.8,21H5C3.89,21 3,20.1 3,19V5C3,3.89 3.89,3 5,3H19A2,2 0 0,1 21,5V12.8C20.12,12.29 19.09,12 18,12L17,12.08V11M17,9V7H7V9H17Z"},GJ={key:0};function JJ(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon text-box-remove-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",KJ,[n.title?(p(),y("title",GJ,$(n.title),1)):x("",!0)])],8,qJ))],16,jJ)}const YJ=I(UJ,[["render",JJ]]),ZJ={name:"TrashCanIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},XJ=["aria-hidden","aria-label"],QJ=["fill","width","height"],eY={d:"M9,3V4H4V6H5V19A2,2 0 0,0 7,21H17A2,2 0 0,0 19,19V6H20V4H15V3H9M9,8H11V17H9V8M13,8H15V17H13V8Z"},tY={key:0};function nY(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon trash-can-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",eY,[n.title?(p(),y("title",tY,$(n.title),1)):x("",!0)])],8,QJ))],16,XJ)}const iY=I(ZJ,[["render",nY]]),oY={name:"TrashCanOutlineIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},sY=["aria-hidden","aria-label"],rY=["fill","width","height"],aY={d:"M9,3V4H4V6H5V19A2,2 0 0,0 7,21H17A2,2 0 0,0 19,19V6H20V4H15V3H9M7,6H17V19H7V6M9,8V17H11V8H9M13,8V17H15V8H13Z"},lY={key:0};function cY(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon trash-can-outline-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",aY,[n.title?(p(),y("title",lY,$(n.title),1)):x("",!0)])],8,rY))],16,sY)}const dY=I(oY,[["render",cY]]),uY={name:"TuneIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},hY=["aria-hidden","aria-label"],fY=["fill","width","height"],pY={d:"M3,17V19H9V17H3M3,5V7H13V5H3M13,21V19H21V17H13V15H11V21H13M7,9V11H3V13H7V15H9V9H7M21,13V11H11V13H21M15,9H17V7H21V5H17V3H15V9Z"},mY={key:0};function gY(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon tune-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",pY,[n.title?(p(),y("title",mY,$(n.title),1)):x("",!0)])],8,fY))],16,hY)}const bY=I(uY,[["render",gY]]),yY={name:"UndoVariantIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},vY=["aria-hidden","aria-label"],wY=["fill","width","height"],_Y={d:"M13.5,7A6.5,6.5 0 0,1 20,13.5A6.5,6.5 0 0,1 13.5,20H10V18H13.5C16,18 18,16 18,13.5C18,11 16,9 13.5,9H7.83L10.91,12.09L9.5,13.5L4,8L9.5,2.5L10.92,3.91L7.83,7H13.5M6,18H8V20H6V18Z"},CY={key:0};function AY(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon undo-variant-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",_Y,[n.title?(p(),y("title",CY,$(n.title),1)):x("",!0)])],8,wY))],16,vY)}const kY=I(yY,[["render",AY]]),SY={name:"UnfoldLessHorizontalIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},xY=["aria-hidden","aria-label"],MY=["fill","width","height"],TY={d:"M16.59,5.41L15.17,4L12,7.17L8.83,4L7.41,5.41L12,10M7.41,18.59L8.83,20L12,16.83L15.17,20L16.58,18.59L12,14L7.41,18.59Z"},EY={key:0};function OY(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon unfold-less-horizontal-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",TY,[n.title?(p(),y("title",EY,$(n.title),1)):x("",!0)])],8,MY))],16,xY)}const $Y=I(SY,[["render",OY]]),IY={name:"UnfoldMoreHorizontalIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},LY=["aria-hidden","aria-label"],DY=["fill","width","height"],RY={d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"},PY={key:0};function HY(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon unfold-more-horizontal-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",RY,[n.title?(p(),y("title",PY,$(n.title),1)):x("",!0)])],8,DY))],16,LY)}const VY=I(IY,[["render",HY]]),zY={name:"VideoIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},NY=["aria-hidden","aria-label"],BY=["fill","width","height"],FY={d:"M17,10.5V7A1,1 0 0,0 16,6H4A1,1 0 0,0 3,7V17A1,1 0 0,0 4,18H16A1,1 0 0,0 17,17V13.5L21,17.5V6.5L17,10.5Z"},WY={key:0};function UY(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon video-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",FY,[n.title?(p(),y("title",WY,$(n.title),1)):x("",!0)])],8,BY))],16,NY)}const jY=I(zY,[["render",UY]]),qY={name:"ViewColumnIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},KY=["aria-hidden","aria-label"],GY=["fill","width","height"],JY={d:"M16,5V18H21V5M4,18H9V5H4M10,18H15V5H10V18Z"},YY={key:0};function ZY(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon view-column-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",JY,[n.title?(p(),y("title",YY,$(n.title),1)):x("",!0)])],8,GY))],16,KY)}const XY=I(qY,[["render",ZY]]),QY={name:"WaterOffIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},eZ=["aria-hidden","aria-label"],tZ=["fill","width","height"],nZ={d:"M20.84 22.73L16.29 18.18C15.2 19.3 13.69 20 12 20C8.69 20 6 17.31 6 14C6 12.67 6.67 11.03 7.55 9.44L1.11 3L2.39 1.73L22.11 21.46L20.84 22.73M18 14C18 10 12 3.25 12 3.25S10.84 4.55 9.55 6.35L17.95 14.75C18 14.5 18 14.25 18 14Z"},iZ={key:0};function oZ(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon water-off-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",nZ,[n.title?(p(),y("title",iZ,$(n.title),1)):x("",!0)])],8,tZ))],16,eZ)}const sZ=I(QY,[["render",oZ]]),rZ={name:"WebIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},aZ=["aria-hidden","aria-label"],lZ=["fill","width","height"],cZ={d:"M16.36,14C16.44,13.34 16.5,12.68 16.5,12C16.5,11.32 16.44,10.66 16.36,10H19.74C19.9,10.64 20,11.31 20,12C20,12.69 19.9,13.36 19.74,14M14.59,19.56C15.19,18.45 15.65,17.25 15.97,16H18.92C17.96,17.65 16.43,18.93 14.59,19.56M14.34,14H9.66C9.56,13.34 9.5,12.68 9.5,12C9.5,11.32 9.56,10.65 9.66,10H14.34C14.43,10.65 14.5,11.32 14.5,12C14.5,12.68 14.43,13.34 14.34,14M12,19.96C11.17,18.76 10.5,17.43 10.09,16H13.91C13.5,17.43 12.83,18.76 12,19.96M8,8H5.08C6.03,6.34 7.57,5.06 9.4,4.44C8.8,5.55 8.35,6.75 8,8M5.08,16H8C8.35,17.25 8.8,18.45 9.4,19.56C7.57,18.93 6.03,17.65 5.08,16M4.26,14C4.1,13.36 4,12.69 4,12C4,11.31 4.1,10.64 4.26,10H7.64C7.56,10.66 7.5,11.32 7.5,12C7.5,12.68 7.56,13.34 7.64,14M12,4.03C12.83,5.23 13.5,6.57 13.91,8H10.09C10.5,6.57 11.17,5.23 12,4.03M18.92,8H15.97C15.65,6.75 15.19,5.55 14.59,4.44C16.43,5.07 17.96,6.34 18.92,8M12,2C6.47,2 2,6.5 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"},dZ={key:0};function uZ(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon web-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",cZ,[n.title?(p(),y("title",dZ,$(n.title),1)):x("",!0)])],8,lZ))],16,aZ)}const hZ=I(rZ,[["render",uZ]]),fZ={name:"DatabaseExportIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},pZ=["aria-hidden","aria-label"],mZ=["fill","width","height"],gZ={d:"M12,3C7.58,3 4,4.79 4,7C4,9.21 7.58,11 12,11C12.5,11 13,10.97 13.5,10.92V9.5H16.39L15.39,8.5L18.9,5C17.5,3.8 14.94,3 12,3M18.92,7.08L17.5,8.5L20,11H15V13H20L17.5,15.5L18.92,16.92L23.84,12M4,9V12C4,14.21 7.58,16 12,16C13.17,16 14.26,15.85 15.25,15.63L16.38,14.5H13.5V12.92C13,12.97 12.5,13 12,13C7.58,13 4,11.21 4,9M4,14V17C4,19.21 7.58,21 12,21C14.94,21 17.5,20.2 18.9,19L17,17.1C15.61,17.66 13.9,18 12,18C7.58,18 4,16.21 4,14Z"},bZ={key:0};function yZ(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon database-export-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",gZ,[n.title?(p(),y("title",bZ,$(n.title),1)):x("",!0)])],8,mZ))],16,pZ)}const vZ=I(fZ,[["render",yZ]]),wZ={name:"FormatColorHighlightIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},_Z=["aria-hidden","aria-label"],CZ=["fill","width","height"],AZ={d:"M4,17L6.75,14.25L6.72,14.23C6.14,13.64 6.14,12.69 6.72,12.11L11.46,7.37L15.7,11.61L10.96,16.35C10.39,16.93 9.46,16.93 8.87,16.37L8.24,17H4M15.91,2.91C16.5,2.33 17.45,2.33 18.03,2.91L20.16,5.03C20.74,5.62 20.74,6.57 20.16,7.16L16.86,10.45L12.62,6.21L15.91,2.91Z"},kZ={key:0};function SZ(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon format-color-highlight-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",AZ,[n.title?(p(),y("title",kZ,$(n.title),1)):x("",!0)])],8,CZ))],16,_Z)}const xZ=I(wZ,[["render",SZ]]),MZ={name:"TableIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},TZ=["aria-hidden","aria-label"],EZ=["fill","width","height"],OZ={d:"M5,4H19A2,2 0 0,1 21,6V18A2,2 0 0,1 19,20H5A2,2 0 0,1 3,18V6A2,2 0 0,1 5,4M5,8V12H11V8H5M13,8V12H19V8H13M5,14V18H11V14H5M13,14V18H19V14H13Z"},$Z={key:0};function IZ(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon table-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",OZ,[n.title?(p(),y("title",$Z,$(n.title),1)):x("",!0)])],8,EZ))],16,TZ)}const LZ=I(MZ,[["render",IZ]]),DZ={name:"PaletteSwatchIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},RZ=["aria-hidden","aria-label"],PZ=["fill","width","height"],HZ={d:"M2.53,19.65L3.87,20.21V11.18L1.44,17.04C1.03,18.06 1.5,19.23 2.53,19.65M22.03,15.95L17.07,4C16.76,3.23 16.03,2.77 15.26,2.75C15,2.75 14.73,2.79 14.47,2.9L7.1,5.95C6.35,6.26 5.89,7 5.87,7.75C5.86,8 5.91,8.29 6,8.55L11,20.5C11.29,21.28 12.03,21.74 12.81,21.75C13.07,21.75 13.33,21.7 13.58,21.6L20.94,18.55C21.96,18.13 22.45,16.96 22.03,15.95M7.88,8.75A1,1 0 0,1 6.88,7.75A1,1 0 0,1 7.88,6.75C8.43,6.75 8.88,7.2 8.88,7.75C8.88,8.3 8.43,8.75 7.88,8.75M5.88,19.75A2,2 0 0,0 7.88,21.75H9.33L5.88,13.41V19.75Z"},VZ={key:0};function zZ(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon palette-swatch-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",HZ,[n.title?(p(),y("title",VZ,$(n.title),1)):x("",!0)])],8,PZ))],16,RZ)}const NZ=I(DZ,[["render",zZ]]),BZ={name:"TableRowPlusAfterIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},FZ=["aria-hidden","aria-label"],WZ=["fill","width","height"],UZ={d:"M22,10A2,2 0 0,1 20,12H4A2,2 0 0,1 2,10V3H4V5H8V3H10V5H14V3H16V5H20V3H22V10M4,10H8V7H4V10M10,10H14V7H10V10M20,10V7H16V10H20M11,14H13V17H16V19H13V22H11V19H8V17H11V14Z"},jZ={key:0};function qZ(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon table-row-plus-after-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",UZ,[n.title?(p(),y("title",jZ,$(n.title),1)):x("",!0)])],8,WZ))],16,FZ)}const KZ=I(BZ,[["render",qZ]]),GZ={name:"TableColumnPlusAfterIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},JZ=["aria-hidden","aria-label"],YZ=["fill","width","height"],ZZ={d:"M11,2A2,2 0 0,1 13,4V20A2,2 0 0,1 11,22H2V2H11M4,10V14H11V10H4M4,16V20H11V16H4M4,4V8H11V4H4M15,11H18V8H20V11H23V13H20V16H18V13H15V11Z"},XZ={key:0};function QZ(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon table-column-plus-after-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",ZZ,[n.title?(p(),y("title",XZ,$(n.title),1)):x("",!0)])],8,YZ))],16,JZ)}const eX=I(GZ,[["render",QZ]]),tX={name:"TableColumnRemoveIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},nX=["aria-hidden","aria-label"],iX=["fill","width","height"],oX={d:"M4,2H11A2,2 0 0,1 13,4V20A2,2 0 0,1 11,22H4A2,2 0 0,1 2,20V4A2,2 0 0,1 4,2M4,10V14H11V10H4M4,16V20H11V16H4M4,4V8H11V4H4M17.59,12L15,9.41L16.41,8L19,10.59L21.59,8L23,9.41L20.41,12L23,14.59L21.59,16L19,13.41L16.41,16L15,14.59L17.59,12Z"},sX={key:0};function rX(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon table-column-remove-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",oX,[n.title?(p(),y("title",sX,$(n.title),1)):x("",!0)])],8,iX))],16,nX)}const aX=I(tX,[["render",rX]]),lX={name:"TableRowRemoveIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},cX=["aria-hidden","aria-label"],dX=["fill","width","height"],uX={d:"M9.41,13L12,15.59L14.59,13L16,14.41L13.41,17L16,19.59L14.59,21L12,18.41L9.41,21L8,19.59L10.59,17L8,14.41L9.41,13M22,9A2,2 0 0,1 20,11H4A2,2 0 0,1 2,9V6A2,2 0 0,1 4,4H20A2,2 0 0,1 22,6V9M4,9H8V6H4V9M10,9H14V6H10V9M16,9H20V6H16V9Z"},hX={key:0};function fX(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon table-row-remove-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",uX,[n.title?(p(),y("title",hX,$(n.title),1)):x("",!0)])],8,dX))],16,cX)}const pX=I(lX,[["render",fX]]),mX={name:"TablePlusIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},gX=["aria-hidden","aria-label"],bX=["fill","width","height"],yX={d:"M18,14H20V17H23V19H20V22H18V19H15V17H18V14M4,3H18A2,2 0 0,1 20,5V12.08C18.45,11.82 16.92,12.18 15.68,13H12V17H13.08C12.97,17.68 12.97,18.35 13.08,19H4A2,2 0 0,1 2,17V5A2,2 0 0,1 4,3M4,7V11H10V7H4M12,7V11H18V7H12M4,13V17H10V13H4Z"},vX={key:0};function wX(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon table-plus-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",yX,[n.title?(p(),y("title",vX,$(n.title),1)):x("",!0)])],8,bX))],16,gX)}const _X=I(mX,[["render",wX]]),CX={name:"TableMinusIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},AX=["aria-hidden","aria-label"],kX=["fill","width","height"],SX={d:"M15 19V17H23V19H15M4 3H18C19.11 3 20 3.9 20 5V12.08C18.45 11.82 16.92 12.18 15.68 13H12V17H13.08C12.97 17.68 12.97 18.35 13.08 19H4C2.9 19 2 18.11 2 17V5C2 3.9 2.9 3 4 3M4 7V11H10V7H4M12 7V11H18V7H12M4 13V17H10V13H4Z"},xX={key:0};function MX(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon table-minus-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",SX,[n.title?(p(),y("title",xX,$(n.title),1)):x("",!0)])],8,kX))],16,AX)}const TX=I(CX,[["render",MX]]),EX={name:"TableColumnIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},OX=["aria-hidden","aria-label"],$X=["fill","width","height"],IX={d:"M8,2H16A2,2 0 0,1 18,4V20A2,2 0 0,1 16,22H8A2,2 0 0,1 6,20V4A2,2 0 0,1 8,2M8,10V14H16V10H8M8,16V20H16V16H8M8,4V8H16V4H8Z"},LX={key:0};function DX(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon table-column-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",IX,[n.title?(p(),y("title",LX,$(n.title),1)):x("",!0)])],8,$X))],16,OX)}const RX=I(EX,[["render",DX]]),PX={name:"TableRowIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},HX=["aria-hidden","aria-label"],VX=["fill","width","height"],zX={d:"M22,14A2,2 0 0,1 20,16H4A2,2 0 0,1 2,14V10A2,2 0 0,1 4,8H20A2,2 0 0,1 22,10V14M4,14H8V10H4V14M10,14H14V10H10V14M16,14H20V10H16V14Z"},NX={key:0};function BX(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon table-row-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",zX,[n.title?(p(),y("title",NX,$(n.title),1)):x("",!0)])],8,VX))],16,HX)}const FX=I(PX,[["render",BX]]),WX={name:"TableSplitCellIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},UX=["aria-hidden","aria-label"],jX=["fill","width","height"],qX={d:"M19 14H21V20H3V14H5V18H19V14M3 4V10H5V6H19V10H21V4H3M11 11V13H8V15L5 12L8 9V11H11M16 11V9L19 12L16 15V13H13V11H16Z"},KX={key:0};function GX(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon table-split-cell-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",qX,[n.title?(p(),y("title",KX,$(n.title),1)):x("",!0)])],8,jX))],16,UX)}const JX=I(WX,[["render",GX]]),YX={name:"TableMergeCellsIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},ZX=["aria-hidden","aria-label"],XX=["fill","width","height"],QX={d:"M5,10H3V4H11V6H5V10M19,18H13V20H21V14H19V18M5,18V14H3V20H11V18H5M21,4H13V6H19V10H21V4M8,13V15L11,12L8,9V11H3V13H8M16,11V9L13,12L16,15V13H21V11H16Z"},eQ={key:0};function tQ(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon table-merge-cells-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",QX,[n.title?(p(),y("title",eQ,$(n.title),1)):x("",!0)])],8,XX))],16,ZX)}const nQ=I(YX,[["render",tQ]]),iQ={name:"EarthIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},oQ=["aria-hidden","aria-label"],sQ=["fill","width","height"],rQ={d:"M17.9,17.39C17.64,16.59 16.89,16 16,16H15V13A1,1 0 0,0 14,12H8V10H10A1,1 0 0,0 11,9V7H13A2,2 0 0,0 15,5V4.59C17.93,5.77 20,8.64 20,12C20,14.08 19.2,15.97 17.9,17.39M11,19.93C7.05,19.44 4,16.08 4,12C4,11.38 4.08,10.78 4.21,10.21L9,15V16A2,2 0 0,0 11,18M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"},aQ={key:0};function lQ(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon earth-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",rQ,[n.title?(p(),y("title",aQ,$(n.title),1)):x("",!0)])],8,sQ))],16,oQ)}const cQ=I(iQ,[["render",lQ]]),dQ={name:"DatabaseCheckIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},uQ=["aria-hidden","aria-label"],hQ=["fill","width","height"],fQ={d:"M12 3C16.42 3 20 4.79 20 7S16.42 11 12 11 4 9.21 4 7 7.58 3 12 3M4 9C4 11.21 7.58 13 12 13S20 11.21 20 9V12.08L19 12C16.41 12 14.2 13.64 13.36 15.94L12 16C7.58 16 4 14.21 4 12V9M4 14C4 16.21 7.58 18 12 18H13C13 19.05 13.27 20.04 13.75 20.9L12 21C7.58 21 4 19.21 4 17V14M18 21.08L15.25 18.08L16.41 16.92L18 18.5L21.59 14.92L22.75 16.33L18 21.08"},pQ={key:0};function mQ(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon database-check-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",fQ,[n.title?(p(),y("title",pQ,$(n.title),1)):x("",!0)])],8,hQ))],16,uQ)}const gQ=I(dQ,[["render",mQ]]),bQ={name:"TrayFullIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},yQ=["aria-hidden","aria-label"],vQ=["fill","width","height"],wQ={d:"M18 5H6V7H18M6 9H18V11H6M2 12H4V17H20V12H22V17A2 2 0 0 1 20 19H4A2 2 0 0 1 2 17M18 13H6V15H18Z"},_Q={key:0};function CQ(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon tray-full-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",wQ,[n.title?(p(),y("title",_Q,$(n.title),1)):x("",!0)])],8,vQ))],16,yQ)}const AQ=I(bQ,[["render",CQ]]),kQ={name:"AposI18nLocalize",props:{doc:{required:!1,type:Object,default:null},locale:{required:!1,type:Object,default:null},moduleName:{required:!0,type:String}},emits:["modal-result"],data(){var e;return{modal:{busy:!1,busyTitle:this.$t("apostrophe:localizingBusy"),disableHeader:!0,active:!1,showModal:!1},locales:Object.entries(window.apos.i18n.locales).map(([t,n])=>({name:t,label:n.label||t,_edit:n._edit})),localized:{},tooltips:{relatedDocSettings:this.$t("apostrophe:relatedDocsDefinition"),localizeAllAndOverwrite:this.$t("apostrophe:relatedDocOverwriteWarning")},wizard:{step:"selectContent",busy:!1,sections:{selectContent:{title:this.$t("apostrophe:selectContent"),if(){if(!this.allRelatedDocsKnown)return!0;const t=this.allRelatedDocs.length>0;return t||(this.wizard.values.toLocalize.data="thisDoc"),t}},selectLocales:{title:this.$t("apostrophe:selectLocales"),filter:"",if(){return!this.locale},complete(){return this.selectedLocales.length>0}},confirmSettings:{title:this.$t("apostrophe:confirmSettings"),complete(){const{toLocalize:t,relatedDocTypesToLocalize:n}=this.wizard.values;return t.data!=="relatedDocsOnly"||this.relatedDocTypes.find(({value:i})=>n.data.includes(i))}}},values:{toLocalize:{data:"thisDocAndRelated"},toLocales:{data:this.locale?[this.locale]:[]},relatedDocSettings:{data:"localizeNewRelated"},relatedDocTypesToLocalize:{data:[]},translateContent:{data:!1},translateTargets:{data:[]},translateProvider:{data:((e=apos.translation.providers[0])==null?void 0:e.name)||null}}},fullDoc:this.doc,relatedDocs:[],allRelatedDocs:[],allRelatedDocsKnown:!1,docTypesSeen:[],searchField:{label:this.$t("apostrophe:searchLocales"),placeholder:`${this.$t("apostrophe:searchLocales")}...`},searchValue:{value:"",error:!1},toLocalizeChoices:[],toLocalizeChoicesStandalone:[{value:"thisDoc",label:"apostrophe:thisDocument"},{value:"thisDocAndRelated",label:"apostrophe:thisDocumentAndRelated"},{value:"relatedDocsOnly",label:"apostrophe:relatedDocsOnly"}],toLocalizeChoicesBatch:[{value:"thisDoc",label:"apostrophe:theseDocuments"},{value:"thisDocAndRelated",label:"apostrophe:theseDocumentsAndRelated"},{value:"relatedDocsOnly",label:"apostrophe:relatedDocsOnly"}],translationEnabled:apos.modules["@apostrophecms/translation"].enabled,translationErrMsg:null,translationShowRetry:!1,translationShowLoader:!1,automaticTranslationDisclaimer:this.$t("apostrophe:automaticTranslationDisclaimer")}},computed:{moduleOptions(){return window.apos.i18n},batchOptions(){return this.$attrs.action==="localize"?{enabled:!0,action:this.$attrs.action,label:this.$attrs.label,messages:this.$attrs.messages,checked:this.$attrs.checked,checkedTypes:this.$attrs.checkedTypes||[this.moduleName],permission:this.$attrs.permission}:{enabled:!1}},isBatchMode(){return this.batchOptions.enabled},currentLocale(){var e;return((e=this.$attrs["modal-data"])==null?void 0:e.locale)??this.moduleOptions.locale},action(){return this.doc.slug.startsWith("/")?apos.page.action:apos.modules[this.doc.type].action},filteredLocales(){const e=t=>t.toLowerCase().includes(this.wizard.sections.selectLocales.filter.toLowerCase());return this.locales.filter(({name:t,label:n})=>e(t)||e(n))},selectedLocales(){return this.wizard.values.toLocales.data},allSelected(){return this.selectedLocales.length===this.locales.filter(e=>!this.isCurrentLocale(e)&&this.canEditLocale(e)).length},relatedDocTypes(){if(this.isBatchMode)return this.getRelatedSchemaTypes(this.batchOptions.checkedTypes);const e={};for(const t of this.relatedDocs)e[t.type]||(e[t.type]={value:t.type,count:0,readOnly:!1}),e[t.type].count++;for(const t of Object.values(e)){const n=this.plural(t.value);t.label={key:"apostrophe:typeWithCount",type:this.$t(n),count:t.count}}return Object.values(e)},relatedDocTypesField(){return{name:"related-doc-types-to-localize",label:"apostrophe:relatedDocTypesToLocalize",choices:this.relatedDocTypes}},visibleSections(){const e=this;return Object.entries(this.wizard.sections).filter(([,n])=>n.if?n.if.bind(e)():!0).map(([n,i])=>({name:n,...i}))},visibleStepNames(){return this.visibleSections.map(e=>e.name)},previousStepName(){const e=this.visibleStepNames;return e[e.indexOf(this.wizard.step)-1]},nextStepName(){const e=this.visibleStepNames;return e[e.indexOf(this.wizard.step)+1]}},watch:{"wizard.values.relatedDocSettings.data"(){this.isBatchMode||this.updateRelatedDocs()},"wizard.values.toLocalize.data"(){this.isBatchMode||this.updateRelatedDocs()},async"wizard.values.translateContent.data"(e){await this.checkAvailableTranslations(e)},selectedLocales(){this.isBatchMode||this.updateRelatedDocs()},relatedDocs(){for(const e of this.relatedDocs)this.docTypesSeen.includes(e.type)||(this.docTypesSeen.push(e.type),apos.modules[e.type].relatedDocument&&this.wizard.values.relatedDocTypesToLocalize.data.push(e.type))},relatedDocTypes(e){if(this.isBatchMode)for(const t of e)this.docTypesSeen.includes(t.value)||(this.docTypesSeen.push(t.value),this.wizard.values.relatedDocTypesToLocalize.data.push(t.value))}},async mounted(){if(this.modal.active=!0,this.wizard.busy=!0,this.normalizeConfig(),this.isBatchMode)this.wizard.step=this.visibleStepNames[0],this.wizard.busy=!1;else try{this.fullDoc=await apos.http.get(`${this.action}/${this.doc._id}`,{busy:!0});const e=await apos.http.get(`${this.action}/${this.fullDoc._id}/locales`,{busy:!0});this.localized=Object.fromEntries(e.results.filter(t=>t.aposLocale.endsWith(":draft")).map(t=>[t.aposLocale.split(":")[0],t])),await this.updateRelatedDocs()}finally{this.wizard.step=this.visibleStepNames[0],this.wizard.busy=!1}},methods:{normalizeConfig(){this.isBatchMode?this.toLocalizeChoices=this.toLocalizeChoicesBatch:this.toLocalizeChoices=this.toLocalizeChoicesStandalone},close(){this.modal.busy||(this.modal.showModal=!1)},goTo(e){this.wizard.step=e},goToPrevious(){this.wizard.step=this.previousStepName,this.uncheckTranslate()},uncheckTranslate(){this.wizard.values.translateContent.data=!1,this.wizard.values.translateTargets.data=[],this.translationErrMsg=null,this.translationShowRetry=!1},goToNext(){this.goTo(this.nextStepName)},isFirstStep(){return this.wizard.step===this.visibleStepNames[0]},isLastStep(){return this.wizard.step===this.visibleStepNames[this.visibleStepNames.length-1]},isStep(e){return this.wizard.step===e},isCurrentLocale(e){return this.currentLocale===e.name},canEditLocale(e){return!!e._edit},isSelected(e){return this.wizard.values.toLocales.data.some(({name:t})=>t===e.name)},isLocalized(e){return!!this.localized[e.name]},selectAll(){this.wizard.values.toLocales.data=this.locales.filter(e=>!this.isCurrentLocale(e)&&this.canEditLocale(e))},deselectAll(){this.wizard.values.toLocales.data=[]},toggleLocale(e){!this.isSelected(e)&&!this.isCurrentLocale(e)&&this.canEditLocale(e)?this.wizard.values.toLocales.data=[...this.wizard.values.toLocales.data,e]:this.isSelected(e)&&(this.wizard.values.toLocales.data=this.wizard.values.toLocales.data.filter(t=>t!==e)),this.filteredLocales.length<2&&(this.wizard.sections.selectLocales.filter="",this.searchValue.data="",this.$refs.searchInput.$el.querySelector("input").focus())},removeLocale(e){this.wizard.values.toLocales.data=this.wizard.values.toLocales.data.filter(t=>t.name!==e.name)},complete(e){e||(e=this.wizard.step);const t=this.wizard.sections[e].complete;return!t||t.bind(this)()},completedPrevious(e){for(const t of this.visibleStepNames){if(e===t)return!0;if(!this.complete(t))return!1}},localeClasses(e){const t={};return this.isCurrentLocale(e)&&(t["apos-current-locale"]=!0),this.canEditLocale(e)||(t["apos-disabled-locale"]=!0),t},singular(e){const t=apos.modules[e]||{};return t.action==="@apostrophecms/page"?"apostrophe:page":t.label||e},plural(e){const t=apos.modules[e]||{};return t.action==="@apostrophecms/page"?"apostrophe:pages":t.pluralLabel||t.label||e},updateFilter(e){e&&e.data!==void 0&&(this.wizard.sections.selectLocales.filter=e.data)},async submit(){var n,i,o,s;if(this.isBatchMode)return this.submitBatch();let e=[];const t=[];if(this.wizard.busy=!0,this.wizard.values.toLocalize.data!=="relatedDocsOnly"&&e.push(this.fullDoc),this.wizard.values.toLocalize.data!=="thisDoc")for(const r of this.relatedDocTypes){const a=this.relatedDocs.filter(l=>l.type===r.value);e=[...e,...a]}for(const r of e)if(!(r._id!==this.fullDoc._id&&!this.wizard.values.relatedDocTypesToLocalize.data.includes(r.type))){this.modal.busy=!0;for(const a of this.selectedLocales)try{if(await apos.http.post(`${apos.modules[r.type].action}/${r._id}/localize`,{body:{toLocale:a.name,update:r._id===this.fullDoc._id||this.wizard.values.relatedDocSettings.data!=="localizeNewRelated"},qs:{aposTranslateTargets:this.wizard.values.translateTargets.data,aposTranslateProvider:this.wizard.values.translateProvider.data},busy:!0}),t.push({type:"success",locale:a,docTypeLabel:this.singular(r.type),doc:r,relationship:r._id===this.fullDoc._id}),this.locale){const l=await apos.http.post(`${this.moduleOptions.action}/locale`,{body:{contextDocId:apos.adminBar.context&&apos.adminBar.context._id,locale:a.name}});l.redirectTo&&window.location.assign(l.redirectTo)}}catch(l){if(l.status!==409){const c=(i=(n=l==null?void 0:l.body)==null?void 0:n.data)!=null&&i.parentNotLocalized?this.$t("apostrophe:parentNotLocalized"):(s=(o=l==null?void 0:l.body)==null?void 0:o.data)!=null&&s.detail?this.$t(l.body.data.detail):null;t.push({type:"error",locale:a,docTypeLabel:this.singular(r.type),doc:r,relationship:r._id===this.fullDoc._id,detail:c})}}}if(t.some(({type:r})=>r==="error"))this.modal.busy=!1,this.close(),await apos.report({heading:"apostrophe:localizingReportHeading",description:"apostrophe:localizingReportDesc",footerMessageDanger:"apostrophe:localizingReportHeading",items:t,headers:[{name:"doc.aposDocId",label:"_id",format:"last:5"},{name:"docTypeLabel",label:"apostrophe:type",sortable:!0},{name:"locale.label",label:"apostrophe:locale",sortable:!0},{name:"relationship",label:"apostrophe:relationship",format:"yesno",visibility:"export",sortable:!0},{name:"doc.title",label:"apostrophe:title",width:"20%",sortable:!0},{name:"detail",label:"apostrophe:details",width:"20%"}]});else for(const r of t)await apos.notify("apostrophe:localized",{type:"success",interpolate:{type:this.$t(this.singular(r.doc.type)),title:r.doc.title,locale:r.locale.name},dismiss:!0});setTimeout(()=>{this.modal.busy=!1,this.close()},250)},async submitBatch(){const e=this.wizard.values.toLocalize.data==="thisDoc"?[]:this.wizard.values.relatedDocTypesToLocalize.data,t=apos.modules[this.moduleName].action;try{await apos.http.post(`${t}/${this.batchOptions.action}`,{busy:!0,qs:{aposTranslateTargets:this.wizard.values.translateTargets.data,aposTranslateProvider:this.wizard.values.translateProvider.data},body:{_ids:this.batchOptions.checked,relatedTypes:e,toLocales:this.selectedLocales.map(n=>n.name),update:this.wizard.values.relatedDocSettings.data!=="localizeNewRelated",relatedOnly:this.wizard.values.toLocalize.data==="relatedDocsOnly",messages:this.batchOptions.messages}})}catch{apos.notify("apostrophe:error",{type:"danger",dismiss:!0})}finally{this.modal.busy=!1,this.close()}},getRelatedSchemaTypes(e){const t=this,n={},i=new Set;return e.forEach(r=>o(apos.modules[r].schema,n,i)),Object.values(n).filter(r=>s(r.value));function o(r,a={},l=new Set){var c,u,f;for(const m of r||[])if(!l.has(m._id))switch(l.add(m._id),m.type){case"array":case"object":o(m.schema,a,l);break;case"area":{for(const g of Object.keys(((c=m.options)==null?void 0:c.widgets)||{}))o((u=apos.modules[`${g}-widget`])==null?void 0:u.schema,a,l);break}case"relationship":{a[f=m.withType]||(a[f]={value:m.withType,count:0}),a[m.withType].count||(a[m.withType].label=t.plural(m.withType)),a[m.withType].count++;break}}}function s(r){return["@apostrophecms/page","@apostrophecms/any-page-type"].includes(r)?!1:window.apos.modules[r].relatedDocument!==!1&&window.apos.modules[r].localized!==!1}},async getRelatedDocs(e){const t=this.wizard.busy;this.wizard.busy=!0;const n=apos.modules[e.type].schema,i=o(e,n);if(!i.length)return[];try{const s=await apos.http.post(`${apos.doc.action}/editable?aposMode=draft`,{body:{ids:i.map(a=>a._id)}});return i.filter(a=>s.editable.includes(a._id))}finally{this.wizard.busy=t}function o(s,r){var l,c;let a=[];for(const u of r)if(u.type==="array")for(const f of s[u.name]||[])a=[...a,...o(f,u.schema)];else if(u.type==="object")s[u.name]&&(a=[...a,...o(s[u.name],u.schema)]);else if(u.type==="area")for(const f of((l=s[u.name])==null?void 0:l.items)||[])a=[...a,...o(f,((c=apos.modules[`${f==null?void 0:f.type}-widget`])==null?void 0:c.schema)||[])];else u.type==="relationship"&&(a=[...a,...s[u.name]||[]]);return a.filter(u=>apos.modules[u.type].relatedDocument!==!1&&apos.modules[u.type].localized!==!1)}},async updateRelatedDocs(){if(this.wizard.values.toLocalize.data==="thisDoc")return;const e=this.wizard.busy;this.wizard.busy=!0;let t=await this.getRelatedDocs(this.fullDoc);if(this.allRelatedDocs=t,this.allRelatedDocsKnown=!0,this.wizard.values.relatedDocSettings.data==="localizeNewRelated"){const n=new Set;for(const i of this.selectedLocales){const o=(await apos.http.post(`${apos.modules["@apostrophecms/i18n"].action}/exist-in-locale`,{busy:!0,body:{ids:t.map(s=>s._id),locale:i.name}})).originalLocaleIds;for(const s of t.map(r=>r._id))o.includes(s)||n.add(s)}t=t.filter(i=>n.has(i._id))}this.relatedDocs=t,this.wizard.busy=e},wait(e){return new Promise(t=>{setTimeout(()=>{t()},e)})},async retryTranslationCheck(){await this.checkAvailableTranslations(!1),this.translationShowLoader=!0,await this.wait(500),await this.checkAvailableTranslations(!0),this.translationShowLoader=!1},async checkAvailableTranslations(e){var r;if(!e){this.translationErrMsg=null,this.translationShowRetry=!1,this.wizard.values.translateTargets.data=[];return}const t=this.currentLocale,n=this.wizard.values.toLocales.data;let i;try{i=await apos.http.get(`${apos.translation.action}/languages`,{qs:{provider:this.wizard.values.translateProvider.data,source:[t],target:n.map(({name:a})=>a)}})}catch(a){console.error("An error happened while getting available languages: ",a),this.wizard.values.translateTargets.data=[],this.translationErrMsg=this.$t("apostrophe:automaticTranslationErrMsg"),this.translationShowRetry=!0;return}const o=!i.source[0].supported,s=i.target.filter(({supported:a})=>!a).map(({code:a})=>{var l;return((l=n.find(c=>c.name===a))==null?void 0:l.label)||a});if(o){const a=(r=this.moduleOptions.locales[t])==null?void 0:r.label;this.translationErrMsg=this.$t("apostrophe:automaticTranslationSourceErrMsg",{source:a}),this.wizard.values.translateTargets.data=[];return}if(s.length){const a=s.length>1;this.translationErrMsg=this.$t(`apostrophe:automaticTranslationTargetErrMsg${a?"_plural":""}`,{targets:s.join(", ")})}if(s.length>=n.length){this.wizard.values.translateTargets.data=[];return}this.wizard.values.translateTargets.data=i.target.filter(({supported:a})=>a).map(({code:a})=>a)}}},SQ={class:"apos-wizard__navigation__items"},xQ={class:"apos-modal__footer"},MQ={class:"apos-wizard__header"},TQ={class:"apos-modal__heading"},EQ={key:0,class:"apos-wizard__step apos-wizard__step-select-content"},OQ={class:"apos-wizard__help-text"},$Q={key:1,class:"apos-wizard__step apos-wizard__step-select-locales"},IQ={class:"apos-locales"},LQ=["onClick"],DQ={class:"apos-locale"},RQ={class:"apos-locale-name"},PQ={key:2,class:"apos-wizard__step apos-wizard__step-confirm-settings"},HQ={class:"apos-selected-locales"},VQ={key:0,class:"apos-wizard__field-group"},zQ={class:"apos-wizard__field-group-heading"},NQ={key:1,class:"apos-wizard__help-text"},BQ={key:1,class:"apos-wizard__translation"},FQ={class:"apos-wizard__translation-title"},WQ={class:"apos-wizard__translation-title-text"},UQ={key:0,class:"apos-wizard__translation-disclaimer"},jQ={key:1},qQ=["innerHTML"],KQ={key:2,class:"apos-wizard__translation-spinner"};function GQ(e,t,n,i,o,s){const r=E("AposButton"),a=E("AposModalBody"),l=E("AposInputRadio"),c=E("AposIndicator"),u=E("AposInputString"),f=E("AposInputCheckboxes"),m=E("AposTranslationIndicator"),g=E("AposCheckbox"),v=E("AposSpinner"),w=E("AposModal"),_=xi("apos-tooltip");return p(),R(w,{class:te(["apos-wizard apos-i18n-localize",{"apos-wizard-busy":o.wizard.busy}]),modal:o.modal,onEsc:s.close,onInactive:t[9]||(t[9]=k=>o.modal.active=!1),onShowModal:t[10]||(t[10]=k=>o.modal.showModal=!0)},{leftRail:Q(()=>[D(a,{class:"apos-wizard__navigation"},{bodyMain:Q(()=>[A("ul",SQ,[(p(!0),y(Ce,null,Ie(s.visibleSections,k=>(p(),y("li",{key:k.title,class:te(["apos-wizard__navigation__item",{"apos-is-active":s.isStep(k.name)}])},$(k.title),3))),128))])]),footer:Q(()=>[A("div",xQ,[D(r,{type:"default",label:"apostrophe:cancel",modifiers:["block"],onClick:s.close},null,8,["onClick"])])]),_:1})]),main:Q(()=>[D(a,{class:"apos-wizard__content"},{bodyMain:Q(()=>[A("header",MQ,[A("h2",TQ,$(e.$t("apostrophe:localizeContent")),1)]),A("form",{class:"apos-wizard__form",onSubmit:t[6]||(t[6]=Ue(()=>{},["prevent"]))},[s.isStep("selectContent")?(p(),y("fieldset",EQ,[D(l,{modelValue:o.wizard.values.toLocalize,"onUpdate:modelValue":t[0]||(t[0]=k=>o.wizard.values.toLocalize=k),field:{name:"to-localize",label:"apostrophe:selectContentToLocalize",choices:o.toLocalizeChoices}},null,8,["modelValue","field"]),A("p",OQ,[D(c,{class:"apos-wizard__help-text__icon",icon:"information-icon","icon-size":16}),Et(" "+$(e.$t("apostrophe:relatedDocsDefinition")),1)])])):x("",!0),s.isStep("selectLocales")?(p(),y("fieldset",$Q,[D(r,X({class:"apos-locale-select-all",label:s.allSelected?e.$t("apostrophe:deselectAll"):e.$t("apostrophe:selectAll"),type:"quiet",modifiers:["inline"]},Ec({click:s.allSelected?s.deselectAll:s.selectAll})),null,16,["label"]),D(u,{ref:"searchInput",modelValue:o.searchValue,"onUpdate:modelValue":[t[1]||(t[1]=k=>o.searchValue=k),s.updateFilter],field:o.searchField,class:"apos-locales-filter"},null,8,["modelValue","field","onUpdate:modelValue"]),D(Oc,{tag:"ul",name:"selected-list",class:"apos-selected-locales"},{default:Q(()=>[(p(!0),y(Ce,null,Ie(s.selectedLocales,k=>(p(),y("li",{key:k.name,class:"apos-locale-item--selected"},[D(r,{type:"primary",class:"apos-locale-button",modifiers:["small"],icon:"close-icon","icon-size":12,label:k.label,onClick:Ue(L=>s.removeLocale(k),["prevent"])},null,8,["label","onClick"])]))),128))]),_:1}),A("ul",IQ,[(p(!0),y(Ce,null,Ie(s.filteredLocales,k=>(p(),y("li",{key:k.name,class:te(["apos-locale-item",s.localeClasses(k)]),"data-apos-test":"localeItem",onClick:L=>s.toggleLocale(k)},[A("span",DQ,[s.isCurrentLocale(k)&&!s.isSelected(k)?(p(),R(c,{key:0,icon:"map-marker-icon",class:"apos-current-locale-icon","icon-size":14,title:e.$t("apostrophe:i18nDefaultLocale"),tooltip:"apostrophe:i18nCurrentLocale"},null,8,["title"])):x("",!0),s.isSelected(k)?(p(),R(c,{key:1,icon:"check-bold-icon",class:"apos-check-icon","icon-size":10,title:e.$t("apostrophe:i18nCurrentlySelectedLocale")},null,8,["title"])):x("",!0),Et(" "+$(k.label)+" ",1),A("span",RQ," ("+$(k.name)+") ",1),Ke(A("span",{class:te(["apos-locale-localized",{"apos-state-is-localized":s.isLocalized(k)}])},null,2),[[_,s.isLocalized(k)?"apostrophe:localizeLocalized":"apostrophe:localizeNotYetLocalized"]])])],10,LQ))),128))])])):x("",!0),s.isStep("confirmSettings")?(p(),y("fieldset",PQ,[A("ul",HQ,[(p(!0),y(Ce,null,Ie(s.selectedLocales,k=>(p(),y("li",{key:k.name,class:"apos-locale-item--selected"},[D(r,{type:"primary",class:"apos-locale-to-localize",modifiers:["small"],label:k.label,disabled:!0},null,8,["label"])]))),128))]),o.wizard.values.toLocalize.data!=="thisDoc"?(p(),y("div",VQ,[A("p",zQ,[Et($(e.$t("apostrophe:relatedDocSettings"))+" ",1),D(c,{class:"apos-wizard__field-group-heading__info",icon:"information-icon","icon-size":14,tooltip:o.tooltips.relatedDocSettings},null,8,["tooltip"])]),D(l,{modelValue:o.wizard.values.relatedDocSettings,"onUpdate:modelValue":t[2]||(t[2]=k=>o.wizard.values.relatedDocSettings=k),field:{name:"relatedDocSettings",choices:[{value:"localizeNewRelated",label:"apostrophe:localizeNewRelated"},{value:"localizeAllRelatedAndOverwriteExisting",label:"apostrophe:localizeAllRelated",tooltip:o.tooltips.localizeAllAndOverwrite}]}},null,8,["modelValue","field"]),s.relatedDocTypes.length?(p(),R(f,{key:0,modelValue:o.wizard.values.relatedDocTypesToLocalize,"onUpdate:modelValue":t[3]||(t[3]=k=>o.wizard.values.relatedDocTypesToLocalize=k),field:s.relatedDocTypesField},null,8,["modelValue","field"])):(p(),y("p",NQ,[D(c,{class:"apos-wizard__help-text__icon",icon:"lightbulb-on-icon","icon-color":"var(--a-success)","icon-size":16}),Et(" "+$(e.$t("apostrophe:noNewRelatedDocuments")),1)]))])):x("",!0),o.translationEnabled?(p(),y("div",BQ,[A("p",FQ,[D(m,{size:18}),A("span",WQ,$(e.$t("apostrophe:automaticTranslationSettings")),1)]),o.automaticTranslationDisclaimer?(p(),y("p",UQ,$(o.automaticTranslationDisclaimer),1)):x("",!0),D(g,{modelValue:o.wizard.values.translateContent.data,"onUpdate:modelValue":t[4]||(t[4]=k=>o.wizard.values.translateContent.data=k),field:{name:"translate"},choice:{value:o.wizard.values.translateContent.data,label:e.$t("apostrophe:automaticTranslationCheckbox"),htmlHelp:e.$t("apostrophe:automaticTranslationCheckboxHelp")},"data-apos-test":"localizationTranslationCheck"},null,8,["modelValue","choice"]),o.translationErrMsg?(p(),y("div",jQ,[A("p",{class:"apos-wizard__translation-error","data-apos-test":"localizationTranslationErr",innerHTML:o.translationErrMsg},null,8,qQ),o.translationShowRetry?(p(),R(r,{key:0,label:"apostrophe:retry",modifiers:["quiet","no-motion"],"data-apos-test":"localizationTranslationRetry",onClick:t[5]||(t[5]=k=>s.retryTranslationCheck())})):x("",!0)])):o.translationShowLoader?(p(),y("div",KQ,[D(v)])):x("",!0)])):x("",!0)])):x("",!0)],32)]),footer:Q(()=>[s.isLastStep()?(p(),R(r,{key:0,attrs:{"data-apos-focus-priority":!0},type:"primary",label:"apostrophe:localizeContent",disabled:!s.complete()||o.wizard.busy,onClick:s.submit},null,8,["disabled","onClick"])):(p(),R(r,{key:1,attrs:{"data-apos-focus-priority":!0},type:"primary",icon:"arrow-right-icon",modifiers:["icon-right"],disabled:!s.complete()||o.wizard.busy,"icon-size":12,label:"apostrophe:next",onClick:t[7]||(t[7]=k=>s.goToNext())},null,8,["disabled"])),s.isFirstStep()?x("",!0):(p(),R(r,{key:2,type:"default",disabled:o.wizard.busy,label:"apostrophe:back",onClick:t[8]||(t[8]=k=>s.goToPrevious())},null,8,["disabled"]))]),_:1})]),_:1},8,["class","modal","onEsc"])}const JQ=I(kQ,[["render",GQ],["__scopeId","data-v-6862849f"]]),ks={data(){return{cancelHeading:"apostrophe:unsavedChanges",cancelDescription:"apostrophe:discardChangesPrompt",cancelNegativeLabel:"apostrophe:resumeEditing",cancelAffirmativeLabel:"apostrophe:discardChanges"}},methods:{async confirmAndCancel(){let e;return this.isModified?await apos.confirm({heading:this.cancelHeading,description:this.cancelDescription,negativeLabel:this.cancelNegativeLabel,affirmativeLabel:this.cancelAffirmativeLabel})?(await apos.notify("apostrophe:changesDiscarded",{dismiss:!0}),e=!0):e=!1:e=!0,e&&(this.modal?this.modal.showModal=!1:this.close()),e}}};function at(e){if(typeof e!="object")return e;var t,n,i=Object.prototype.toString.call(e);if(i==="[object Object]"){if(e.constructor!==Object&&typeof e.constructor=="function"){n=new e.constructor;for(t in e)e.hasOwnProperty(t)&&n[t]!==e[t]&&(n[t]=at(e[t]))}else{n={};for(t in e)t==="__proto__"?Object.defineProperty(n,t,{value:at(e[t]),configurable:!0,enumerable:!0,writable:!0}):n[t]=at(e[t])}return n}if(i==="[object Array]"){for(t=e.length,n=Array(t);t--;)n[t]=at(e[t]);return n}return i==="[object Set]"?(n=new Set,e.forEach(function(o){n.add(at(o))}),n):i==="[object Map]"?(n=new Map,e.forEach(function(o,s){n.set(at(s),at(o))}),n):i==="[object Date]"?new Date(+e):i==="[object RegExp]"?(n=new RegExp(e.source,e.flags),n.lastIndex=e.lastIndex,n):i==="[object DataView]"?new e.constructor(at(e.buffer)):i==="[object ArrayBuffer]"?e.slice(0):i.slice(-6)==="Array]"?new e.constructor(e):e}function cc(e,t,n=()=>null){return Object.entries(t).every(([i,o])=>{if(i==="$or")return YQ(e,o,n);if(i==="$and")return ZQ(e,o,n);const s=QS(e,i);return n(i,o,s)===!1?!1:XS(i)?!0:XQ(s,o)})}function XS(e){return e.endsWith(")")}function YQ(e,t,n){return t.some(i=>cc(e,i,n))}function ZQ(e,t,n){return t.every(i=>cc(e,i,n))}function QS(e,t){if(!t.includes("."))return e==null?void 0:e[t];const n=t.split(".");let i=e;for(;n.length>0;){if(i==null||typeof(i==null?void 0:i[n[0]])==null)return;if(Array.isArray(i)&&!Object.hasOwn(i,n[0]))return i.flatMap(s=>QS(s,n.join(".")));const o=n.shift();i=i[o]}return i}const no={};no.$eq=(e,t)=>Array.isArray(e)?Array.isArray(t)?e.length===t.length&&t.every(n=>e.includes(n)):e.includes(t):e===t;no.$ne=(e,t)=>no.$eq(e,t)===!1;no.$exists=(e,t)=>t?e!=null:e==null;no.$in=(e,t)=>{if(!Array.isArray(t))throw new Error("$in and $nin operators require an array as condition value");return Array.isArray(e)?t.some(n=>e.includes(n)):t.includes(e)};no.$nin=(e,t)=>no.$in(e,t)===!1;no.$gt=(e,t)=>e>t;no.$lt=(e,t)=>e<t;no.$gte=(e,t)=>e>=t;no.$lte=(e,t)=>e<=t;function XQ(e,t){return typeof t=="object"&&t!==null?Object.keys(t).length===0?!1:Object.entries(t).every(([n,i])=>{switch(n){case"min":return e>=i;case"max":return e<=i;default:{if(no[n])return no[n](e,i);throw new Error(`Unsupported operator: ${n}`)}}}):Array.isArray(e)?e.includes(t):t===e}const Qd=["if","requiredIf"],ta=()=>Object.fromEntries(Qd.map(e=>[e,{}]));async function e3(e,t,n){const i=ta();for(const s of e)for(const r of Qd)if(s[r]){const a=Object.entries(s[r]).flatMap(c=>o(c,r)).filter(Boolean),l=[...new Set(a)];try{const c=l.map(f=>i[r][f]!==void 0?null:QQ(f,s._id,t)).filter(Boolean),u=await Promise.all(c);i[r]={...i[r],...Object.fromEntries(u)}}catch{await apos.notify(n("apostrophe:errorEvaluatingExternalCondition",{name:s.name}),{type:"danger",icon:"alert-circle-icon",dismiss:!0,localize:!1})}}return i;function o([s,r],a){return s==="$or"?r.flatMap(l=>Object.entries(l).map(c=>o(c,a))):t3(s,a)?s:null}}async function QQ(e,t,n){const{result:i}=await apos.http.get(`${apos.schema.action}/evaluate-external-condition`,{qs:{fieldId:t,docId:n,conditionKey:e},busy:!0});return[e,i]}function t3(e,t){if(!XS(e))return!1;const[n]=e.split("(");return e.endsWith("()")||console.warn(`Warning in \`${t}\` definition: "${n}()" should not be passed any argument.`),!0}function n3(e,t,n){const i=ta();for(const s of e)for(const r of Qd)s[r]&&(i[r][s.name]=cc(t,s[r],(a,l,c)=>o(a,l,r)));return i;function o(s,r,a){var l,c;if(t3(s,a))return((l=n[a])==null?void 0:l[s])===r;if(((c=i[a])==null?void 0:c[s])===!1)return!1}}function i3(e){return e.filter(i=>Qd.some(o=>i[o])).flatMap(i=>Qd.map(o=>i[o]).filter(Boolean)).some(n);function n(i){if(!i)return!1;for(const[o,s]of Object.entries(i)){if(o.startsWith("<"))return!0;if(Array.isArray(s)){if(s.some(r=>n(r)))return!0;continue}if(s&&typeof s=="object"&&n(s))return!0}return!1}}const lr={props:{parentFollowingValues:{type:Object,default:null}},data(){return{docFields:{data:{}},serverErrors:null,restoreOnly:!1,readOnly:!1,changed:[],externalConditionsResults:ta(),conditionalFields:ta()}},computed:{schema(){let e=(this.moduleOptions.schema||[]).filter(t=>apos.schema.components.fields[t.type]);if(this.restoreOnly||this.readOnly){e=at(e);for(const t of e)t.readOnly=!0}return e=e.filter(t=>t.name!=="archived"),e},docMeta(){var e;return((e=this.docFields.data)==null?void 0:e.aposMeta)||{}}},watch:{docType:{async handler(){this.moduleName==="@apostrophecms/page"&&(await this.evaluateExternalConditions(),this.evaluateConditions())}}},methods:{async evaluateExternalConditions(){var e,t,n,i;this.externalConditionsResults=await e3(this.schema,this.docId||((t=(e=this.docFields)==null?void 0:e.data)==null?void 0:t._docId)||((i=(n=this.docFields)==null?void 0:n.data)==null?void 0:i._id),this.$t)},followingValues(e,t=!1){const n=this.getFieldsByCategory(e),i={},o={};for(const[s,r]of Object.entries(this.parentFollowingValues||{}))o[`<${s}`]=r;if(t)return o;for(const s of n)if(s.following){const r=Array.isArray(s.following)?s.following:[s.following];i[s.name]={};for(const a of r)a.startsWith("<")?i[s.name][a]=o[a]:i[s.name][a]=this.getFieldValue(a)}return i},getFieldsByCategory(e){return e&&this.utilityFields?e==="other"?this.schema.filter(t=>!this.utilityFields.includes(t.name)):this.schema.filter(t=>this.utilityFields.includes(t.name)):this.schema},getConditionalFields(e){const t={...this.followingValues(e,!0),...this.currentDoc?this.currentDoc.data:this.docFields.data};return n3(this.getFieldsByCategory(e),t,this.externalConditionsResults)},evaluateConditions(){this.conditionalFields=this.getConditionalFields()},getFieldValue(e){return this.docFields.data[e]},getAposSchema(e){return this.$refs.schema},async handleSaveError(e,{fallback:t}){var n,i,o;if(console.error(e),e.body&&e.body.data&&e.body.data.errors){const s={};let r;if(e.body.data.errors.forEach(a=>{r=r||a,s[a.path]=a}),this.serverErrors=s,r){const a=this.schema.find(l=>l.name===r.path);a&&(a.group.name!=="utility"&&this.switchPane&&this.switchPane(a.group.name),this.$nextTick(()=>{this.getAposSchema(a).scrollFieldIntoView(a.name)}))}}else{const s=((i=(n=e.body)==null?void 0:n.data)==null?void 0:i.detail)||((o=e.body)==null?void 0:o.message);await apos.notify(s||t,{type:"danger",icon:"alert-circle-icon",dismiss:!0})}},triggerValidate(){this.triggerValidation=!0,this.$nextTick(()=>{this.triggerValidation=!1})},async postprocess(){console.warn(`The function postprocess from AposEditorMixin does not do anything anymore.
Relationship postprocessing is made at input level in AposInputRelationship and in some cases globally like in AposImageWidget.`)}}};var ua={},tn={},ha={};Object.defineProperty(ha,"__esModule",{value:!0});ha.anumber=bb;ha.abytes=o3;ha.ahash=tee;ha.aexists=nee;ha.aoutput=iee;function bb(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function eee(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function o3(e,...t){if(!eee(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function tee(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");bb(e.outputLen),bb(e.blockLen)}function nee(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function iee(e,t){o3(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}var ut={};Object.defineProperty(ut,"__esModule",{value:!0});ut.add5L=ut.add5H=ut.add4H=ut.add4L=ut.add3H=ut.add3L=ut.rotlBL=ut.rotlBH=ut.rotlSL=ut.rotlSH=ut.rotr32L=ut.rotr32H=ut.rotrBL=ut.rotrBH=ut.rotrSL=ut.rotrSH=ut.shrSL=ut.shrSH=ut.toBig=void 0;ut.fromBig=Gy;ut.split=s3;ut.add=v3;const Rh=BigInt(2**32-1),yb=BigInt(32);function Gy(e,t=!1){return t?{h:Number(e&Rh),l:Number(e>>yb&Rh)}:{h:Number(e>>yb&Rh)|0,l:Number(e&Rh)|0}}function s3(e,t=!1){let n=new Uint32Array(e.length),i=new Uint32Array(e.length);for(let o=0;o<e.length;o++){const{h:s,l:r}=Gy(e[o],t);[n[o],i[o]]=[s,r]}return[n,i]}const r3=(e,t)=>BigInt(e>>>0)<<yb|BigInt(t>>>0);ut.toBig=r3;const a3=(e,t,n)=>e>>>n;ut.shrSH=a3;const l3=(e,t,n)=>e<<32-n|t>>>n;ut.shrSL=l3;const c3=(e,t,n)=>e>>>n|t<<32-n;ut.rotrSH=c3;const d3=(e,t,n)=>e<<32-n|t>>>n;ut.rotrSL=d3;const u3=(e,t,n)=>e<<64-n|t>>>n-32;ut.rotrBH=u3;const h3=(e,t,n)=>e>>>n-32|t<<64-n;ut.rotrBL=h3;const f3=(e,t)=>t;ut.rotr32H=f3;const p3=(e,t)=>e;ut.rotr32L=p3;const m3=(e,t,n)=>e<<n|t>>>32-n;ut.rotlSH=m3;const g3=(e,t,n)=>t<<n|e>>>32-n;ut.rotlSL=g3;const b3=(e,t,n)=>t<<n-32|e>>>64-n;ut.rotlBH=b3;const y3=(e,t,n)=>e<<n-32|t>>>64-n;ut.rotlBL=y3;function v3(e,t,n,i){const o=(t>>>0)+(i>>>0);return{h:e+n+(o/2**32|0)|0,l:o|0}}const w3=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0);ut.add3L=w3;const _3=(e,t,n,i)=>t+n+i+(e/2**32|0)|0;ut.add3H=_3;const C3=(e,t,n,i)=>(e>>>0)+(t>>>0)+(n>>>0)+(i>>>0);ut.add4L=C3;const A3=(e,t,n,i,o)=>t+n+i+o+(e/2**32|0)|0;ut.add4H=A3;const k3=(e,t,n,i,o)=>(e>>>0)+(t>>>0)+(n>>>0)+(i>>>0)+(o>>>0);ut.add5L=k3;const S3=(e,t,n,i,o,s)=>t+n+i+o+s+(e/2**32|0)|0;ut.add5H=S3;const oee={fromBig:Gy,split:s3,toBig:r3,shrSH:a3,shrSL:l3,rotrSH:c3,rotrSL:d3,rotrBH:u3,rotrBL:h3,rotr32H:f3,rotr32L:p3,rotlSH:m3,rotlSL:g3,rotlBH:b3,rotlBL:y3,add:v3,add3L:w3,add3H:_3,add4L:C3,add4H:A3,add5H:S3,add5L:k3};ut.default=oee;var x3={},am={};Object.defineProperty(am,"__esModule",{value:!0});am.crypto=void 0;am.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;(function(e){/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(e,"__esModule",{value:!0}),e.Hash=e.nextTick=e.byteSwapIfBE=e.isLE=void 0,e.isBytes=i,e.u8=o,e.u32=s,e.createView=r,e.rotr=a,e.rotl=l,e.byteSwap=c,e.byteSwap32=u,e.bytesToHex=m,e.hexToBytes=w,e.asyncLoop=k,e.utf8ToBytes=L,e.toBytes=P,e.concatBytes=M,e.checkOpts=z,e.wrapConstructor=ee,e.wrapConstructorWithOpts=ie,e.wrapXOFConstructorWithOpts=K,e.randomBytes=ae;const t=am,n=ha;function i(B){return B instanceof Uint8Array||ArrayBuffer.isView(B)&&B.constructor.name==="Uint8Array"}function o(B){return new Uint8Array(B.buffer,B.byteOffset,B.byteLength)}function s(B){return new Uint32Array(B.buffer,B.byteOffset,Math.floor(B.byteLength/4))}function r(B){return new DataView(B.buffer,B.byteOffset,B.byteLength)}function a(B,J){return B<<32-J|B>>>J}function l(B,J){return B<<J|B>>>32-J>>>0}e.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function c(B){return B<<24&4278190080|B<<8&16711680|B>>>8&65280|B>>>24&255}e.byteSwapIfBE=e.isLE?B=>B:B=>c(B);function u(B){for(let J=0;J<B.length;J++)B[J]=c(B[J])}const f=Array.from({length:256},(B,J)=>J.toString(16).padStart(2,"0"));function m(B){(0,n.abytes)(B);let J="";for(let he=0;he<B.length;he++)J+=f[B[he]];return J}const g={_0:48,_9:57,A:65,F:70,a:97,f:102};function v(B){if(B>=g._0&&B<=g._9)return B-g._0;if(B>=g.A&&B<=g.F)return B-(g.A-10);if(B>=g.a&&B<=g.f)return B-(g.a-10)}function w(B){if(typeof B!="string")throw new Error("hex string expected, got "+typeof B);const J=B.length,he=J/2;if(J%2)throw new Error("hex string expected, got unpadded hex of length "+J);const ne=new Uint8Array(he);for(let oe=0,W=0;oe<he;oe++,W+=2){const q=v(B.charCodeAt(W)),Z=v(B.charCodeAt(W+1));if(q===void 0||Z===void 0){const N=B[W]+B[W+1];throw new Error('hex string expected, got non-hex character "'+N+'" at index '+W)}ne[oe]=q*16+Z}return ne}const _=async()=>{};e.nextTick=_;async function k(B,J,he){let ne=Date.now();for(let oe=0;oe<B;oe++){he(oe);const W=Date.now()-ne;W>=0&&W<J||(await(0,e.nextTick)(),ne+=W)}}function L(B){if(typeof B!="string")throw new Error("utf8ToBytes expected string, got "+typeof B);return new Uint8Array(new TextEncoder().encode(B))}function P(B){return typeof B=="string"&&(B=L(B)),(0,n.abytes)(B),B}function M(...B){let J=0;for(let ne=0;ne<B.length;ne++){const oe=B[ne];(0,n.abytes)(oe),J+=oe.length}const he=new Uint8Array(J);for(let ne=0,oe=0;ne<B.length;ne++){const W=B[ne];he.set(W,oe),oe+=W.length}return he}class F{clone(){return this._cloneInto()}}e.Hash=F;function z(B,J){if(J!==void 0&&{}.toString.call(J)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(B,J)}function ee(B){const J=ne=>B().update(P(ne)).digest(),he=B();return J.outputLen=he.outputLen,J.blockLen=he.blockLen,J.create=()=>B(),J}function ie(B){const J=(ne,oe)=>B(oe).update(P(ne)).digest(),he=B({});return J.outputLen=he.outputLen,J.blockLen=he.blockLen,J.create=ne=>B(ne),J}function K(B){const J=(ne,oe)=>B(oe).update(P(ne)).digest(),he=B({});return J.outputLen=he.outputLen,J.blockLen=he.blockLen,J.create=ne=>B(ne),J}function ae(B=32){if(t.crypto&&typeof t.crypto.getRandomValues=="function")return t.crypto.getRandomValues(new Uint8Array(B));if(t.crypto&&typeof t.crypto.randomBytes=="function")return t.crypto.randomBytes(B);throw new Error("crypto.getRandomValues must be defined")}})(x3);Object.defineProperty(tn,"__esModule",{value:!0});tn.shake256=tn.shake128=tn.keccak_512=tn.keccak_384=tn.keccak_256=tn.keccak_224=tn.sha3_512=tn.sha3_384=tn.sha3_256=tn.sha3_224=tn.Keccak=void 0;tn.keccakP=O3;const Rl=ha,eu=ut,qs=x3,M3=[],T3=[],E3=[],see=BigInt(0),id=BigInt(1),ree=BigInt(2),aee=BigInt(7),lee=BigInt(256),cee=BigInt(113);for(let e=0,t=id,n=1,i=0;e<24;e++){[n,i]=[i,(2*n+3*i)%5],M3.push(2*(5*i+n)),T3.push((e+1)*(e+2)/2%64);let o=see;for(let s=0;s<7;s++)t=(t<<id^(t>>aee)*cee)%lee,t&ree&&(o^=id<<(id<<BigInt(s))-id);E3.push(o)}const[dee,uee]=(0,eu.split)(E3,!0),C2=(e,t,n)=>n>32?(0,eu.rotlBH)(e,t,n):(0,eu.rotlSH)(e,t,n),A2=(e,t,n)=>n>32?(0,eu.rotlBL)(e,t,n):(0,eu.rotlSL)(e,t,n);function O3(e,t=24){const n=new Uint32Array(10);for(let i=24-t;i<24;i++){for(let r=0;r<10;r++)n[r]=e[r]^e[r+10]^e[r+20]^e[r+30]^e[r+40];for(let r=0;r<10;r+=2){const a=(r+8)%10,l=(r+2)%10,c=n[l],u=n[l+1],f=C2(c,u,1)^n[a],m=A2(c,u,1)^n[a+1];for(let g=0;g<50;g+=10)e[r+g]^=f,e[r+g+1]^=m}let o=e[2],s=e[3];for(let r=0;r<24;r++){const a=T3[r],l=C2(o,s,a),c=A2(o,s,a),u=M3[r];o=e[u],s=e[u+1],e[u]=l,e[u+1]=c}for(let r=0;r<50;r+=10){for(let a=0;a<10;a++)n[a]=e[r+a];for(let a=0;a<10;a++)e[r+a]^=~n[(a+2)%10]&n[(a+4)%10]}e[0]^=dee[i],e[1]^=uee[i]}n.fill(0)}let Jy=class $3 extends qs.Hash{constructor(t,n,i,o=!1,s=24){if(super(),this.blockLen=t,this.suffix=n,this.outputLen=i,this.enableXOF=o,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,Rl.anumber)(i),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,qs.u32)(this.state)}keccak(){qs.isLE||(0,qs.byteSwap32)(this.state32),O3(this.state32,this.rounds),qs.isLE||(0,qs.byteSwap32)(this.state32),this.posOut=0,this.pos=0}update(t){(0,Rl.aexists)(this);const{blockLen:n,state:i}=this;t=(0,qs.toBytes)(t);const o=t.length;for(let s=0;s<o;){const r=Math.min(n-this.pos,o-s);for(let a=0;a<r;a++)i[this.pos++]^=t[s++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:n,pos:i,blockLen:o}=this;t[i]^=n,n&128&&i===o-1&&this.keccak(),t[o-1]^=128,this.keccak()}writeInto(t){(0,Rl.aexists)(this,!1),(0,Rl.abytes)(t),this.finish();const n=this.state,{blockLen:i}=this;for(let o=0,s=t.length;o<s;){this.posOut>=i&&this.keccak();const r=Math.min(i-this.posOut,s-o);t.set(n.subarray(this.posOut,this.posOut+r),o),this.posOut+=r,o+=r}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return(0,Rl.anumber)(t),this.xofInto(new Uint8Array(t))}digestInto(t){if((0,Rl.aoutput)(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:n,suffix:i,outputLen:o,rounds:s,enableXOF:r}=this;return t||(t=new $3(n,i,o,r,s)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=s,t.suffix=i,t.outputLen=o,t.enableXOF=r,t.destroyed=this.destroyed,t}};tn.Keccak=Jy;const fa=(e,t,n)=>(0,qs.wrapConstructor)(()=>new Jy(t,e,n));tn.sha3_224=fa(6,144,224/8);tn.sha3_256=fa(6,136,256/8);tn.sha3_384=fa(6,104,384/8);tn.sha3_512=fa(6,72,512/8);tn.keccak_224=fa(1,144,224/8);tn.keccak_256=fa(1,136,256/8);tn.keccak_384=fa(1,104,384/8);tn.keccak_512=fa(1,72,512/8);const I3=(e,t,n)=>(0,qs.wrapXOFConstructorWithOpts)((i={})=>new Jy(t,e,i.dkLen===void 0?n:i.dkLen,!0));tn.shake128=I3(31,168,128/8);tn.shake256=I3(31,136,256/8);const{sha3_512:hee}=tn,L3=24,Sd=32,vb=(e=4,t=Math.random)=>{let n="";for(;n.length<e;)n=n+Math.floor(t()*36).toString(36);return n};function D3(e){let t=8n,n=0n;for(const i of e.values()){const o=BigInt(i);n=(n<<t)+o}return n}const R3=(e="")=>D3(hee(e)).toString(36).slice(1),k2=Array.from({length:26},(e,t)=>String.fromCharCode(t+97)),fee=e=>k2[Math.floor(e()*k2.length)],P3=({globalObj:e=typeof wi<"u"?wi:typeof window<"u"?window:{},random:t=Math.random}={})=>{const n=Object.keys(e).toString(),i=n.length?n+vb(Sd,t):vb(Sd,t);return R3(i).substring(0,Sd)},H3=e=>()=>e++,pee=476782367,V3=({random:e=Math.random,counter:t=H3(Math.floor(e()*pee)),length:n=L3,fingerprint:i=P3({random:e})}={})=>function(){const s=fee(e),r=Date.now().toString(36),a=t().toString(36),l=vb(n,e),c=`${r+l+a+i}`;return`${s+R3(c).substring(1,n)}`},mee=V3(),gee=(e,{minLength:t=2,maxLength:n=Sd}={})=>{const i=e.length,o=/^[0-9a-z]+$/;try{if(typeof e=="string"&&i>=t&&i<=n&&o.test(e))return!0}finally{}return!1};ua.getConstants=()=>({defaultLength:L3,bigLength:Sd});ua.init=V3;ua.createId=mee;ua.bufToBigInt=D3;ua.createCounter=H3;ua.createFingerprint=P3;ua.isCuid=gee;const{createId:bee}=ua;var qt=bee,qf={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */qf.exports;(function(e,t){(function(){var n,i="4.17.21",o=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",r="Expected a function",a="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",c=500,u="__lodash_placeholder__",f=1,m=2,g=4,v=1,w=2,_=1,k=2,L=4,P=8,M=16,F=32,z=64,ee=128,ie=256,K=512,ae=30,B="...",J=800,he=16,ne=1,oe=2,W=3,q=1/0,Z=9007199254740991,N=17976931348623157e292,le=NaN,ce=4294967295,ye=ce-1,Le=ce>>>1,Re=[["ary",ee],["bind",_],["bindKey",k],["curry",P],["curryRight",M],["flip",K],["partial",F],["partialRight",z],["rearg",ie]],Se="[object Arguments]",He="[object Array]",ot="[object AsyncFunction]",lt="[object Boolean]",Lt="[object Date]",pt="[object DOMException]",Gt="[object Error]",V="[object Function]",j="[object GeneratorFunction]",se="[object Map]",we="[object Number]",ve="[object Null]",ge="[object Object]",Ee="[object Promise]",xe="[object Proxy]",Ae="[object RegExp]",me="[object Set]",Ne="[object String]",Me="[object Symbol]",Fe="[object Undefined]",je="[object WeakMap]",bt="[object WeakSet]",kt="[object ArrayBuffer]",yt="[object DataView]",Mn="[object Float32Array]",_n="[object Float64Array]",ei="[object Int8Array]",ti="[object Int16Array]",Io="[object Int32Array]",de="[object Uint8Array]",$e="[object Uint8ClampedArray]",Be="[object Uint16Array]",xt="[object Uint32Array]",Ot=/\b__p \+= '';/g,Wn=/\b(__p \+=) '' \+/g,Mi=/(__e\(.*?\)|\b__t\)) \+\n'';/g,xs=/&(?:amp|lt|gt|quot|#39);/g,Pc=/[&<>"']/g,Ms=RegExp(xs.source),Hc=RegExp(Pc.source),yl=/<%-([\s\S]+?)%>/g,fr=/<%([\s\S]+?)%>/g,Nu=/<%=([\s\S]+?)%>/g,Vc=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,vl=/^\w*$/,CT=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Vm=/[\\^$.*+?()[\]{}|]/g,AT=RegExp(Vm.source),zm=/^\s+/,kT=/\s/,ST=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,xT=/\{\n\/\* \[wrapped with (.+)\] \*/,MT=/,? & /,TT=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ET=/[()=,{}\[\]\/\s]/,OT=/\\(\\)?/g,$T=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,hv=/\w*$/,IT=/^[-+]0x[0-9a-f]+$/i,LT=/^0b[01]+$/i,DT=/^\[object .+?Constructor\]$/,RT=/^0o[0-7]+$/i,PT=/^(?:0|[1-9]\d*)$/,HT=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Bu=/($^)/,VT=/['\n\r\u2028\u2029\\]/g,Fu="\\ud800-\\udfff",zT="\\u0300-\\u036f",NT="\\ufe20-\\ufe2f",BT="\\u20d0-\\u20ff",fv=zT+NT+BT,pv="\\u2700-\\u27bf",mv="a-z\\xdf-\\xf6\\xf8-\\xff",FT="\\xac\\xb1\\xd7\\xf7",WT="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",UT="\\u2000-\\u206f",jT=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",gv="A-Z\\xc0-\\xd6\\xd8-\\xde",bv="\\ufe0e\\ufe0f",yv=FT+WT+UT+jT,Nm="[']",qT="["+Fu+"]",vv="["+yv+"]",Wu="["+fv+"]",wv="\\d+",KT="["+pv+"]",_v="["+mv+"]",Cv="[^"+Fu+yv+wv+pv+mv+gv+"]",Bm="\\ud83c[\\udffb-\\udfff]",GT="(?:"+Wu+"|"+Bm+")",Av="[^"+Fu+"]",Fm="(?:\\ud83c[\\udde6-\\uddff]){2}",Wm="[\\ud800-\\udbff][\\udc00-\\udfff]",wl="["+gv+"]",kv="\\u200d",Sv="(?:"+_v+"|"+Cv+")",JT="(?:"+wl+"|"+Cv+")",xv="(?:"+Nm+"(?:d|ll|m|re|s|t|ve))?",Mv="(?:"+Nm+"(?:D|LL|M|RE|S|T|VE))?",Tv=GT+"?",Ev="["+bv+"]?",YT="(?:"+kv+"(?:"+[Av,Fm,Wm].join("|")+")"+Ev+Tv+")*",ZT="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",XT="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ov=Ev+Tv+YT,QT="(?:"+[KT,Fm,Wm].join("|")+")"+Ov,eE="(?:"+[Av+Wu+"?",Wu,Fm,Wm,qT].join("|")+")",tE=RegExp(Nm,"g"),nE=RegExp(Wu,"g"),Um=RegExp(Bm+"(?="+Bm+")|"+eE+Ov,"g"),iE=RegExp([wl+"?"+_v+"+"+xv+"(?="+[vv,wl,"$"].join("|")+")",JT+"+"+Mv+"(?="+[vv,wl+Sv,"$"].join("|")+")",wl+"?"+Sv+"+"+xv,wl+"+"+Mv,XT,ZT,wv,QT].join("|"),"g"),oE=RegExp("["+kv+Fu+fv+bv+"]"),sE=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,rE=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],aE=-1,Qt={};Qt[Mn]=Qt[_n]=Qt[ei]=Qt[ti]=Qt[Io]=Qt[de]=Qt[$e]=Qt[Be]=Qt[xt]=!0,Qt[Se]=Qt[He]=Qt[kt]=Qt[lt]=Qt[yt]=Qt[Lt]=Qt[Gt]=Qt[V]=Qt[se]=Qt[we]=Qt[ge]=Qt[Ae]=Qt[me]=Qt[Ne]=Qt[je]=!1;var Jt={};Jt[Se]=Jt[He]=Jt[kt]=Jt[yt]=Jt[lt]=Jt[Lt]=Jt[Mn]=Jt[_n]=Jt[ei]=Jt[ti]=Jt[Io]=Jt[se]=Jt[we]=Jt[ge]=Jt[Ae]=Jt[me]=Jt[Ne]=Jt[Me]=Jt[de]=Jt[$e]=Jt[Be]=Jt[xt]=!0,Jt[Gt]=Jt[V]=Jt[je]=!1;var lE={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},cE={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},dE={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},uE={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},hE=parseFloat,fE=parseInt,$v=typeof wi=="object"&&wi&&wi.Object===Object&&wi,pE=typeof self=="object"&&self&&self.Object===Object&&self,Un=$v||pE||Function("return this")(),jm=t&&!t.nodeType&&t,_a=jm&&!0&&e&&!e.nodeType&&e,Iv=_a&&_a.exports===jm,qm=Iv&&$v.process,oo=function(){try{var G=_a&&_a.require&&_a.require("util").types;return G||qm&&qm.binding&&qm.binding("util")}catch{}}(),Lv=oo&&oo.isArrayBuffer,Dv=oo&&oo.isDate,Rv=oo&&oo.isMap,Pv=oo&&oo.isRegExp,Hv=oo&&oo.isSet,Vv=oo&&oo.isTypedArray;function zi(G,ue,re){switch(re.length){case 0:return G.call(ue);case 1:return G.call(ue,re[0]);case 2:return G.call(ue,re[0],re[1]);case 3:return G.call(ue,re[0],re[1],re[2])}return G.apply(ue,re)}function mE(G,ue,re,Pe){for(var ct=-1,Ht=G==null?0:G.length;++ct<Ht;){var Tn=G[ct];ue(Pe,Tn,re(Tn),G)}return Pe}function so(G,ue){for(var re=-1,Pe=G==null?0:G.length;++re<Pe&&ue(G[re],re,G)!==!1;);return G}function gE(G,ue){for(var re=G==null?0:G.length;re--&&ue(G[re],re,G)!==!1;);return G}function zv(G,ue){for(var re=-1,Pe=G==null?0:G.length;++re<Pe;)if(!ue(G[re],re,G))return!1;return!0}function pr(G,ue){for(var re=-1,Pe=G==null?0:G.length,ct=0,Ht=[];++re<Pe;){var Tn=G[re];ue(Tn,re,G)&&(Ht[ct++]=Tn)}return Ht}function Uu(G,ue){var re=G==null?0:G.length;return!!re&&_l(G,ue,0)>-1}function Km(G,ue,re){for(var Pe=-1,ct=G==null?0:G.length;++Pe<ct;)if(re(ue,G[Pe]))return!0;return!1}function sn(G,ue){for(var re=-1,Pe=G==null?0:G.length,ct=Array(Pe);++re<Pe;)ct[re]=ue(G[re],re,G);return ct}function mr(G,ue){for(var re=-1,Pe=ue.length,ct=G.length;++re<Pe;)G[ct+re]=ue[re];return G}function Gm(G,ue,re,Pe){var ct=-1,Ht=G==null?0:G.length;for(Pe&&Ht&&(re=G[++ct]);++ct<Ht;)re=ue(re,G[ct],ct,G);return re}function bE(G,ue,re,Pe){var ct=G==null?0:G.length;for(Pe&&ct&&(re=G[--ct]);ct--;)re=ue(re,G[ct],ct,G);return re}function Jm(G,ue){for(var re=-1,Pe=G==null?0:G.length;++re<Pe;)if(ue(G[re],re,G))return!0;return!1}var yE=Ym("length");function vE(G){return G.split("")}function wE(G){return G.match(TT)||[]}function Nv(G,ue,re){var Pe;return re(G,function(ct,Ht,Tn){if(ue(ct,Ht,Tn))return Pe=Ht,!1}),Pe}function ju(G,ue,re,Pe){for(var ct=G.length,Ht=re+(Pe?1:-1);Pe?Ht--:++Ht<ct;)if(ue(G[Ht],Ht,G))return Ht;return-1}function _l(G,ue,re){return ue===ue?IE(G,ue,re):ju(G,Bv,re)}function _E(G,ue,re,Pe){for(var ct=re-1,Ht=G.length;++ct<Ht;)if(Pe(G[ct],ue))return ct;return-1}function Bv(G){return G!==G}function Fv(G,ue){var re=G==null?0:G.length;return re?Xm(G,ue)/re:le}function Ym(G){return function(ue){return ue==null?n:ue[G]}}function Zm(G){return function(ue){return G==null?n:G[ue]}}function Wv(G,ue,re,Pe,ct){return ct(G,function(Ht,Tn,Ut){re=Pe?(Pe=!1,Ht):ue(re,Ht,Tn,Ut)}),re}function CE(G,ue){var re=G.length;for(G.sort(ue);re--;)G[re]=G[re].value;return G}function Xm(G,ue){for(var re,Pe=-1,ct=G.length;++Pe<ct;){var Ht=ue(G[Pe]);Ht!==n&&(re=re===n?Ht:re+Ht)}return re}function Qm(G,ue){for(var re=-1,Pe=Array(G);++re<G;)Pe[re]=ue(re);return Pe}function AE(G,ue){return sn(ue,function(re){return[re,G[re]]})}function Uv(G){return G&&G.slice(0,Gv(G)+1).replace(zm,"")}function Ni(G){return function(ue){return G(ue)}}function eg(G,ue){return sn(ue,function(re){return G[re]})}function zc(G,ue){return G.has(ue)}function jv(G,ue){for(var re=-1,Pe=G.length;++re<Pe&&_l(ue,G[re],0)>-1;);return re}function qv(G,ue){for(var re=G.length;re--&&_l(ue,G[re],0)>-1;);return re}function kE(G,ue){for(var re=G.length,Pe=0;re--;)G[re]===ue&&++Pe;return Pe}var SE=Zm(lE),xE=Zm(cE);function ME(G){return"\\"+uE[G]}function TE(G,ue){return G==null?n:G[ue]}function Cl(G){return oE.test(G)}function EE(G){return sE.test(G)}function OE(G){for(var ue,re=[];!(ue=G.next()).done;)re.push(ue.value);return re}function tg(G){var ue=-1,re=Array(G.size);return G.forEach(function(Pe,ct){re[++ue]=[ct,Pe]}),re}function Kv(G,ue){return function(re){return G(ue(re))}}function gr(G,ue){for(var re=-1,Pe=G.length,ct=0,Ht=[];++re<Pe;){var Tn=G[re];(Tn===ue||Tn===u)&&(G[re]=u,Ht[ct++]=re)}return Ht}function qu(G){var ue=-1,re=Array(G.size);return G.forEach(function(Pe){re[++ue]=Pe}),re}function $E(G){var ue=-1,re=Array(G.size);return G.forEach(function(Pe){re[++ue]=[Pe,Pe]}),re}function IE(G,ue,re){for(var Pe=re-1,ct=G.length;++Pe<ct;)if(G[Pe]===ue)return Pe;return-1}function LE(G,ue,re){for(var Pe=re+1;Pe--;)if(G[Pe]===ue)return Pe;return Pe}function Al(G){return Cl(G)?RE(G):yE(G)}function Lo(G){return Cl(G)?PE(G):vE(G)}function Gv(G){for(var ue=G.length;ue--&&kT.test(G.charAt(ue)););return ue}var DE=Zm(dE);function RE(G){for(var ue=Um.lastIndex=0;Um.test(G);)++ue;return ue}function PE(G){return G.match(Um)||[]}function HE(G){return G.match(iE)||[]}var VE=function G(ue){ue=ue==null?Un:kl.defaults(Un.Object(),ue,kl.pick(Un,rE));var re=ue.Array,Pe=ue.Date,ct=ue.Error,Ht=ue.Function,Tn=ue.Math,Ut=ue.Object,ng=ue.RegExp,zE=ue.String,ro=ue.TypeError,Ku=re.prototype,NE=Ht.prototype,Sl=Ut.prototype,Gu=ue["__core-js_shared__"],Ju=NE.toString,Ft=Sl.hasOwnProperty,BE=0,Jv=function(){var d=/[^.]+$/.exec(Gu&&Gu.keys&&Gu.keys.IE_PROTO||"");return d?"Symbol(src)_1."+d:""}(),Yu=Sl.toString,FE=Ju.call(Ut),WE=Un._,UE=ng("^"+Ju.call(Ft).replace(Vm,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Zu=Iv?ue.Buffer:n,br=ue.Symbol,Xu=ue.Uint8Array,Yv=Zu?Zu.allocUnsafe:n,Qu=Kv(Ut.getPrototypeOf,Ut),Zv=Ut.create,Xv=Sl.propertyIsEnumerable,eh=Ku.splice,Qv=br?br.isConcatSpreadable:n,Nc=br?br.iterator:n,Ca=br?br.toStringTag:n,th=function(){try{var d=Ma(Ut,"defineProperty");return d({},"",{}),d}catch{}}(),jE=ue.clearTimeout!==Un.clearTimeout&&ue.clearTimeout,qE=Pe&&Pe.now!==Un.Date.now&&Pe.now,KE=ue.setTimeout!==Un.setTimeout&&ue.setTimeout,nh=Tn.ceil,ih=Tn.floor,ig=Ut.getOwnPropertySymbols,GE=Zu?Zu.isBuffer:n,ew=ue.isFinite,JE=Ku.join,YE=Kv(Ut.keys,Ut),En=Tn.max,ni=Tn.min,ZE=Pe.now,XE=ue.parseInt,tw=Tn.random,QE=Ku.reverse,og=Ma(ue,"DataView"),Bc=Ma(ue,"Map"),sg=Ma(ue,"Promise"),xl=Ma(ue,"Set"),Fc=Ma(ue,"WeakMap"),Wc=Ma(Ut,"create"),oh=Fc&&new Fc,Ml={},eO=Ta(og),tO=Ta(Bc),nO=Ta(sg),iO=Ta(xl),oO=Ta(Fc),sh=br?br.prototype:n,Uc=sh?sh.valueOf:n,nw=sh?sh.toString:n;function T(d){if(un(d)&&!mt(d)&&!(d instanceof Mt)){if(d instanceof ao)return d;if(Ft.call(d,"__wrapped__"))return i_(d)}return new ao(d)}var Tl=function(){function d(){}return function(h){if(!an(h))return{};if(Zv)return Zv(h);d.prototype=h;var b=new d;return d.prototype=n,b}}();function rh(){}function ao(d,h){this.__wrapped__=d,this.__actions__=[],this.__chain__=!!h,this.__index__=0,this.__values__=n}T.templateSettings={escape:yl,evaluate:fr,interpolate:Nu,variable:"",imports:{_:T}},T.prototype=rh.prototype,T.prototype.constructor=T,ao.prototype=Tl(rh.prototype),ao.prototype.constructor=ao;function Mt(d){this.__wrapped__=d,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ce,this.__views__=[]}function sO(){var d=new Mt(this.__wrapped__);return d.__actions__=Ti(this.__actions__),d.__dir__=this.__dir__,d.__filtered__=this.__filtered__,d.__iteratees__=Ti(this.__iteratees__),d.__takeCount__=this.__takeCount__,d.__views__=Ti(this.__views__),d}function rO(){if(this.__filtered__){var d=new Mt(this);d.__dir__=-1,d.__filtered__=!0}else d=this.clone(),d.__dir__*=-1;return d}function aO(){var d=this.__wrapped__.value(),h=this.__dir__,b=mt(d),C=h<0,S=b?d.length:0,O=v$(0,S,this.__views__),H=O.start,U=O.end,Y=U-H,fe=C?U:H-1,pe=this.__iteratees__,_e=pe.length,De=0,We=ni(Y,this.__takeCount__);if(!b||!C&&S==Y&&We==Y)return xw(d,this.__actions__);var tt=[];e:for(;Y--&&De<We;){fe+=h;for(var wt=-1,nt=d[fe];++wt<_e;){var St=pe[wt],$t=St.iteratee,Wi=St.type,mi=$t(nt);if(Wi==oe)nt=mi;else if(!mi){if(Wi==ne)continue e;break e}}tt[De++]=nt}return tt}Mt.prototype=Tl(rh.prototype),Mt.prototype.constructor=Mt;function Aa(d){var h=-1,b=d==null?0:d.length;for(this.clear();++h<b;){var C=d[h];this.set(C[0],C[1])}}function lO(){this.__data__=Wc?Wc(null):{},this.size=0}function cO(d){var h=this.has(d)&&delete this.__data__[d];return this.size-=h?1:0,h}function dO(d){var h=this.__data__;if(Wc){var b=h[d];return b===l?n:b}return Ft.call(h,d)?h[d]:n}function uO(d){var h=this.__data__;return Wc?h[d]!==n:Ft.call(h,d)}function hO(d,h){var b=this.__data__;return this.size+=this.has(d)?0:1,b[d]=Wc&&h===n?l:h,this}Aa.prototype.clear=lO,Aa.prototype.delete=cO,Aa.prototype.get=dO,Aa.prototype.has=uO,Aa.prototype.set=hO;function Ts(d){var h=-1,b=d==null?0:d.length;for(this.clear();++h<b;){var C=d[h];this.set(C[0],C[1])}}function fO(){this.__data__=[],this.size=0}function pO(d){var h=this.__data__,b=ah(h,d);if(b<0)return!1;var C=h.length-1;return b==C?h.pop():eh.call(h,b,1),--this.size,!0}function mO(d){var h=this.__data__,b=ah(h,d);return b<0?n:h[b][1]}function gO(d){return ah(this.__data__,d)>-1}function bO(d,h){var b=this.__data__,C=ah(b,d);return C<0?(++this.size,b.push([d,h])):b[C][1]=h,this}Ts.prototype.clear=fO,Ts.prototype.delete=pO,Ts.prototype.get=mO,Ts.prototype.has=gO,Ts.prototype.set=bO;function Es(d){var h=-1,b=d==null?0:d.length;for(this.clear();++h<b;){var C=d[h];this.set(C[0],C[1])}}function yO(){this.size=0,this.__data__={hash:new Aa,map:new(Bc||Ts),string:new Aa}}function vO(d){var h=vh(this,d).delete(d);return this.size-=h?1:0,h}function wO(d){return vh(this,d).get(d)}function _O(d){return vh(this,d).has(d)}function CO(d,h){var b=vh(this,d),C=b.size;return b.set(d,h),this.size+=b.size==C?0:1,this}Es.prototype.clear=yO,Es.prototype.delete=vO,Es.prototype.get=wO,Es.prototype.has=_O,Es.prototype.set=CO;function ka(d){var h=-1,b=d==null?0:d.length;for(this.__data__=new Es;++h<b;)this.add(d[h])}function AO(d){return this.__data__.set(d,l),this}function kO(d){return this.__data__.has(d)}ka.prototype.add=ka.prototype.push=AO,ka.prototype.has=kO;function Do(d){var h=this.__data__=new Ts(d);this.size=h.size}function SO(){this.__data__=new Ts,this.size=0}function xO(d){var h=this.__data__,b=h.delete(d);return this.size=h.size,b}function MO(d){return this.__data__.get(d)}function TO(d){return this.__data__.has(d)}function EO(d,h){var b=this.__data__;if(b instanceof Ts){var C=b.__data__;if(!Bc||C.length<o-1)return C.push([d,h]),this.size=++b.size,this;b=this.__data__=new Es(C)}return b.set(d,h),this.size=b.size,this}Do.prototype.clear=SO,Do.prototype.delete=xO,Do.prototype.get=MO,Do.prototype.has=TO,Do.prototype.set=EO;function iw(d,h){var b=mt(d),C=!b&&Ea(d),S=!b&&!C&&Cr(d),O=!b&&!C&&!S&&Il(d),H=b||C||S||O,U=H?Qm(d.length,zE):[],Y=U.length;for(var fe in d)(h||Ft.call(d,fe))&&!(H&&(fe=="length"||S&&(fe=="offset"||fe=="parent")||O&&(fe=="buffer"||fe=="byteLength"||fe=="byteOffset")||Ls(fe,Y)))&&U.push(fe);return U}function ow(d){var h=d.length;return h?d[gg(0,h-1)]:n}function OO(d,h){return wh(Ti(d),Sa(h,0,d.length))}function $O(d){return wh(Ti(d))}function rg(d,h,b){(b!==n&&!Ro(d[h],b)||b===n&&!(h in d))&&Os(d,h,b)}function jc(d,h,b){var C=d[h];(!(Ft.call(d,h)&&Ro(C,b))||b===n&&!(h in d))&&Os(d,h,b)}function ah(d,h){for(var b=d.length;b--;)if(Ro(d[b][0],h))return b;return-1}function IO(d,h,b,C){return yr(d,function(S,O,H){h(C,S,b(S),H)}),C}function sw(d,h){return d&&Xo(h,Rn(h),d)}function LO(d,h){return d&&Xo(h,Oi(h),d)}function Os(d,h,b){h=="__proto__"&&th?th(d,h,{configurable:!0,enumerable:!0,value:b,writable:!0}):d[h]=b}function ag(d,h){for(var b=-1,C=h.length,S=re(C),O=d==null;++b<C;)S[b]=O?n:Bg(d,h[b]);return S}function Sa(d,h,b){return d===d&&(b!==n&&(d=d<=b?d:b),h!==n&&(d=d>=h?d:h)),d}function lo(d,h,b,C,S,O){var H,U=h&f,Y=h&m,fe=h&g;if(b&&(H=S?b(d,C,S,O):b(d)),H!==n)return H;if(!an(d))return d;var pe=mt(d);if(pe){if(H=_$(d),!U)return Ti(d,H)}else{var _e=ii(d),De=_e==V||_e==j;if(Cr(d))return Ew(d,U);if(_e==ge||_e==Se||De&&!S){if(H=Y||De?{}:Gw(d),!U)return Y?d$(d,LO(H,d)):c$(d,sw(H,d))}else{if(!Jt[_e])return S?d:{};H=C$(d,_e,U)}}O||(O=new Do);var We=O.get(d);if(We)return We;O.set(d,H),A_(d)?d.forEach(function(nt){H.add(lo(nt,h,b,nt,d,O))}):__(d)&&d.forEach(function(nt,St){H.set(St,lo(nt,h,b,St,d,O))});var tt=fe?Y?Mg:xg:Y?Oi:Rn,wt=pe?n:tt(d);return so(wt||d,function(nt,St){wt&&(St=nt,nt=d[St]),jc(H,St,lo(nt,h,b,St,d,O))}),H}function DO(d){var h=Rn(d);return function(b){return rw(b,d,h)}}function rw(d,h,b){var C=b.length;if(d==null)return!C;for(d=Ut(d);C--;){var S=b[C],O=h[S],H=d[S];if(H===n&&!(S in d)||!O(H))return!1}return!0}function aw(d,h,b){if(typeof d!="function")throw new ro(r);return Xc(function(){d.apply(n,b)},h)}function qc(d,h,b,C){var S=-1,O=Uu,H=!0,U=d.length,Y=[],fe=h.length;if(!U)return Y;b&&(h=sn(h,Ni(b))),C?(O=Km,H=!1):h.length>=o&&(O=zc,H=!1,h=new ka(h));e:for(;++S<U;){var pe=d[S],_e=b==null?pe:b(pe);if(pe=C||pe!==0?pe:0,H&&_e===_e){for(var De=fe;De--;)if(h[De]===_e)continue e;Y.push(pe)}else O(h,_e,C)||Y.push(pe)}return Y}var yr=Dw(Zo),lw=Dw(cg,!0);function RO(d,h){var b=!0;return yr(d,function(C,S,O){return b=!!h(C,S,O),b}),b}function lh(d,h,b){for(var C=-1,S=d.length;++C<S;){var O=d[C],H=h(O);if(H!=null&&(U===n?H===H&&!Fi(H):b(H,U)))var U=H,Y=O}return Y}function PO(d,h,b,C){var S=d.length;for(b=vt(b),b<0&&(b=-b>S?0:S+b),C=C===n||C>S?S:vt(C),C<0&&(C+=S),C=b>C?0:S_(C);b<C;)d[b++]=h;return d}function cw(d,h){var b=[];return yr(d,function(C,S,O){h(C,S,O)&&b.push(C)}),b}function jn(d,h,b,C,S){var O=-1,H=d.length;for(b||(b=k$),S||(S=[]);++O<H;){var U=d[O];h>0&&b(U)?h>1?jn(U,h-1,b,C,S):mr(S,U):C||(S[S.length]=U)}return S}var lg=Rw(),dw=Rw(!0);function Zo(d,h){return d&&lg(d,h,Rn)}function cg(d,h){return d&&dw(d,h,Rn)}function ch(d,h){return pr(h,function(b){return Ds(d[b])})}function xa(d,h){h=wr(h,d);for(var b=0,C=h.length;d!=null&&b<C;)d=d[Qo(h[b++])];return b&&b==C?d:n}function uw(d,h,b){var C=h(d);return mt(d)?C:mr(C,b(d))}function fi(d){return d==null?d===n?Fe:ve:Ca&&Ca in Ut(d)?y$(d):$$(d)}function dg(d,h){return d>h}function HO(d,h){return d!=null&&Ft.call(d,h)}function VO(d,h){return d!=null&&h in Ut(d)}function zO(d,h,b){return d>=ni(h,b)&&d<En(h,b)}function ug(d,h,b){for(var C=b?Km:Uu,S=d[0].length,O=d.length,H=O,U=re(O),Y=1/0,fe=[];H--;){var pe=d[H];H&&h&&(pe=sn(pe,Ni(h))),Y=ni(pe.length,Y),U[H]=!b&&(h||S>=120&&pe.length>=120)?new ka(H&&pe):n}pe=d[0];var _e=-1,De=U[0];e:for(;++_e<S&&fe.length<Y;){var We=pe[_e],tt=h?h(We):We;if(We=b||We!==0?We:0,!(De?zc(De,tt):C(fe,tt,b))){for(H=O;--H;){var wt=U[H];if(!(wt?zc(wt,tt):C(d[H],tt,b)))continue e}De&&De.push(tt),fe.push(We)}}return fe}function NO(d,h,b,C){return Zo(d,function(S,O,H){h(C,b(S),O,H)}),C}function Kc(d,h,b){h=wr(h,d),d=Xw(d,h);var C=d==null?d:d[Qo(uo(h))];return C==null?n:zi(C,d,b)}function hw(d){return un(d)&&fi(d)==Se}function BO(d){return un(d)&&fi(d)==kt}function FO(d){return un(d)&&fi(d)==Lt}function Gc(d,h,b,C,S){return d===h?!0:d==null||h==null||!un(d)&&!un(h)?d!==d&&h!==h:WO(d,h,b,C,Gc,S)}function WO(d,h,b,C,S,O){var H=mt(d),U=mt(h),Y=H?He:ii(d),fe=U?He:ii(h);Y=Y==Se?ge:Y,fe=fe==Se?ge:fe;var pe=Y==ge,_e=fe==ge,De=Y==fe;if(De&&Cr(d)){if(!Cr(h))return!1;H=!0,pe=!1}if(De&&!pe)return O||(O=new Do),H||Il(d)?jw(d,h,b,C,S,O):g$(d,h,Y,b,C,S,O);if(!(b&v)){var We=pe&&Ft.call(d,"__wrapped__"),tt=_e&&Ft.call(h,"__wrapped__");if(We||tt){var wt=We?d.value():d,nt=tt?h.value():h;return O||(O=new Do),S(wt,nt,b,C,O)}}return De?(O||(O=new Do),b$(d,h,b,C,S,O)):!1}function UO(d){return un(d)&&ii(d)==se}function hg(d,h,b,C){var S=b.length,O=S,H=!C;if(d==null)return!O;for(d=Ut(d);S--;){var U=b[S];if(H&&U[2]?U[1]!==d[U[0]]:!(U[0]in d))return!1}for(;++S<O;){U=b[S];var Y=U[0],fe=d[Y],pe=U[1];if(H&&U[2]){if(fe===n&&!(Y in d))return!1}else{var _e=new Do;if(C)var De=C(fe,pe,Y,d,h,_e);if(!(De===n?Gc(pe,fe,v|w,C,_e):De))return!1}}return!0}function fw(d){if(!an(d)||x$(d))return!1;var h=Ds(d)?UE:DT;return h.test(Ta(d))}function jO(d){return un(d)&&fi(d)==Ae}function qO(d){return un(d)&&ii(d)==me}function KO(d){return un(d)&&xh(d.length)&&!!Qt[fi(d)]}function pw(d){return typeof d=="function"?d:d==null?$i:typeof d=="object"?mt(d)?bw(d[0],d[1]):gw(d):P_(d)}function fg(d){if(!Zc(d))return YE(d);var h=[];for(var b in Ut(d))Ft.call(d,b)&&b!="constructor"&&h.push(b);return h}function GO(d){if(!an(d))return O$(d);var h=Zc(d),b=[];for(var C in d)C=="constructor"&&(h||!Ft.call(d,C))||b.push(C);return b}function pg(d,h){return d<h}function mw(d,h){var b=-1,C=Ei(d)?re(d.length):[];return yr(d,function(S,O,H){C[++b]=h(S,O,H)}),C}function gw(d){var h=Eg(d);return h.length==1&&h[0][2]?Yw(h[0][0],h[0][1]):function(b){return b===d||hg(b,d,h)}}function bw(d,h){return $g(d)&&Jw(h)?Yw(Qo(d),h):function(b){var C=Bg(b,d);return C===n&&C===h?Fg(b,d):Gc(h,C,v|w)}}function dh(d,h,b,C,S){d!==h&&lg(h,function(O,H){if(S||(S=new Do),an(O))JO(d,h,H,b,dh,C,S);else{var U=C?C(Lg(d,H),O,H+"",d,h,S):n;U===n&&(U=O),rg(d,H,U)}},Oi)}function JO(d,h,b,C,S,O,H){var U=Lg(d,b),Y=Lg(h,b),fe=H.get(Y);if(fe){rg(d,b,fe);return}var pe=O?O(U,Y,b+"",d,h,H):n,_e=pe===n;if(_e){var De=mt(Y),We=!De&&Cr(Y),tt=!De&&!We&&Il(Y);pe=Y,De||We||tt?mt(U)?pe=U:yn(U)?pe=Ti(U):We?(_e=!1,pe=Ew(Y,!0)):tt?(_e=!1,pe=Ow(Y,!0)):pe=[]:Qc(Y)||Ea(Y)?(pe=U,Ea(U)?pe=x_(U):(!an(U)||Ds(U))&&(pe=Gw(Y))):_e=!1}_e&&(H.set(Y,pe),S(pe,Y,C,O,H),H.delete(Y)),rg(d,b,pe)}function yw(d,h){var b=d.length;if(b)return h+=h<0?b:0,Ls(h,b)?d[h]:n}function vw(d,h,b){h.length?h=sn(h,function(O){return mt(O)?function(H){return xa(H,O.length===1?O[0]:O)}:O}):h=[$i];var C=-1;h=sn(h,Ni(Xe()));var S=mw(d,function(O,H,U){var Y=sn(h,function(fe){return fe(O)});return{criteria:Y,index:++C,value:O}});return CE(S,function(O,H){return l$(O,H,b)})}function YO(d,h){return ww(d,h,function(b,C){return Fg(d,C)})}function ww(d,h,b){for(var C=-1,S=h.length,O={};++C<S;){var H=h[C],U=xa(d,H);b(U,H)&&Jc(O,wr(H,d),U)}return O}function ZO(d){return function(h){return xa(h,d)}}function mg(d,h,b,C){var S=C?_E:_l,O=-1,H=h.length,U=d;for(d===h&&(h=Ti(h)),b&&(U=sn(d,Ni(b)));++O<H;)for(var Y=0,fe=h[O],pe=b?b(fe):fe;(Y=S(U,pe,Y,C))>-1;)U!==d&&eh.call(U,Y,1),eh.call(d,Y,1);return d}function _w(d,h){for(var b=d?h.length:0,C=b-1;b--;){var S=h[b];if(b==C||S!==O){var O=S;Ls(S)?eh.call(d,S,1):vg(d,S)}}return d}function gg(d,h){return d+ih(tw()*(h-d+1))}function XO(d,h,b,C){for(var S=-1,O=En(nh((h-d)/(b||1)),0),H=re(O);O--;)H[C?O:++S]=d,d+=b;return H}function bg(d,h){var b="";if(!d||h<1||h>Z)return b;do h%2&&(b+=d),h=ih(h/2),h&&(d+=d);while(h);return b}function At(d,h){return Dg(Zw(d,h,$i),d+"")}function QO(d){return ow(Ll(d))}function e$(d,h){var b=Ll(d);return wh(b,Sa(h,0,b.length))}function Jc(d,h,b,C){if(!an(d))return d;h=wr(h,d);for(var S=-1,O=h.length,H=O-1,U=d;U!=null&&++S<O;){var Y=Qo(h[S]),fe=b;if(Y==="__proto__"||Y==="constructor"||Y==="prototype")return d;if(S!=H){var pe=U[Y];fe=C?C(pe,Y,U):n,fe===n&&(fe=an(pe)?pe:Ls(h[S+1])?[]:{})}jc(U,Y,fe),U=U[Y]}return d}var Cw=oh?function(d,h){return oh.set(d,h),d}:$i,t$=th?function(d,h){return th(d,"toString",{configurable:!0,enumerable:!1,value:Ug(h),writable:!0})}:$i;function n$(d){return wh(Ll(d))}function co(d,h,b){var C=-1,S=d.length;h<0&&(h=-h>S?0:S+h),b=b>S?S:b,b<0&&(b+=S),S=h>b?0:b-h>>>0,h>>>=0;for(var O=re(S);++C<S;)O[C]=d[C+h];return O}function i$(d,h){var b;return yr(d,function(C,S,O){return b=h(C,S,O),!b}),!!b}function uh(d,h,b){var C=0,S=d==null?C:d.length;if(typeof h=="number"&&h===h&&S<=Le){for(;C<S;){var O=C+S>>>1,H=d[O];H!==null&&!Fi(H)&&(b?H<=h:H<h)?C=O+1:S=O}return S}return yg(d,h,$i,b)}function yg(d,h,b,C){var S=0,O=d==null?0:d.length;if(O===0)return 0;h=b(h);for(var H=h!==h,U=h===null,Y=Fi(h),fe=h===n;S<O;){var pe=ih((S+O)/2),_e=b(d[pe]),De=_e!==n,We=_e===null,tt=_e===_e,wt=Fi(_e);if(H)var nt=C||tt;else fe?nt=tt&&(C||De):U?nt=tt&&De&&(C||!We):Y?nt=tt&&De&&!We&&(C||!wt):We||wt?nt=!1:nt=C?_e<=h:_e<h;nt?S=pe+1:O=pe}return ni(O,ye)}function Aw(d,h){for(var b=-1,C=d.length,S=0,O=[];++b<C;){var H=d[b],U=h?h(H):H;if(!b||!Ro(U,Y)){var Y=U;O[S++]=H===0?0:H}}return O}function kw(d){return typeof d=="number"?d:Fi(d)?le:+d}function Bi(d){if(typeof d=="string")return d;if(mt(d))return sn(d,Bi)+"";if(Fi(d))return nw?nw.call(d):"";var h=d+"";return h=="0"&&1/d==-1/0?"-0":h}function vr(d,h,b){var C=-1,S=Uu,O=d.length,H=!0,U=[],Y=U;if(b)H=!1,S=Km;else if(O>=o){var fe=h?null:p$(d);if(fe)return qu(fe);H=!1,S=zc,Y=new ka}else Y=h?[]:U;e:for(;++C<O;){var pe=d[C],_e=h?h(pe):pe;if(pe=b||pe!==0?pe:0,H&&_e===_e){for(var De=Y.length;De--;)if(Y[De]===_e)continue e;h&&Y.push(_e),U.push(pe)}else S(Y,_e,b)||(Y!==U&&Y.push(_e),U.push(pe))}return U}function vg(d,h){return h=wr(h,d),d=Xw(d,h),d==null||delete d[Qo(uo(h))]}function Sw(d,h,b,C){return Jc(d,h,b(xa(d,h)),C)}function hh(d,h,b,C){for(var S=d.length,O=C?S:-1;(C?O--:++O<S)&&h(d[O],O,d););return b?co(d,C?0:O,C?O+1:S):co(d,C?O+1:0,C?S:O)}function xw(d,h){var b=d;return b instanceof Mt&&(b=b.value()),Gm(h,function(C,S){return S.func.apply(S.thisArg,mr([C],S.args))},b)}function wg(d,h,b){var C=d.length;if(C<2)return C?vr(d[0]):[];for(var S=-1,O=re(C);++S<C;)for(var H=d[S],U=-1;++U<C;)U!=S&&(O[S]=qc(O[S]||H,d[U],h,b));return vr(jn(O,1),h,b)}function Mw(d,h,b){for(var C=-1,S=d.length,O=h.length,H={};++C<S;){var U=C<O?h[C]:n;b(H,d[C],U)}return H}function _g(d){return yn(d)?d:[]}function Cg(d){return typeof d=="function"?d:$i}function wr(d,h){return mt(d)?d:$g(d,h)?[d]:n_(zt(d))}var o$=At;function _r(d,h,b){var C=d.length;return b=b===n?C:b,!h&&b>=C?d:co(d,h,b)}var Tw=jE||function(d){return Un.clearTimeout(d)};function Ew(d,h){if(h)return d.slice();var b=d.length,C=Yv?Yv(b):new d.constructor(b);return d.copy(C),C}function Ag(d){var h=new d.constructor(d.byteLength);return new Xu(h).set(new Xu(d)),h}function s$(d,h){var b=h?Ag(d.buffer):d.buffer;return new d.constructor(b,d.byteOffset,d.byteLength)}function r$(d){var h=new d.constructor(d.source,hv.exec(d));return h.lastIndex=d.lastIndex,h}function a$(d){return Uc?Ut(Uc.call(d)):{}}function Ow(d,h){var b=h?Ag(d.buffer):d.buffer;return new d.constructor(b,d.byteOffset,d.length)}function $w(d,h){if(d!==h){var b=d!==n,C=d===null,S=d===d,O=Fi(d),H=h!==n,U=h===null,Y=h===h,fe=Fi(h);if(!U&&!fe&&!O&&d>h||O&&H&&Y&&!U&&!fe||C&&H&&Y||!b&&Y||!S)return 1;if(!C&&!O&&!fe&&d<h||fe&&b&&S&&!C&&!O||U&&b&&S||!H&&S||!Y)return-1}return 0}function l$(d,h,b){for(var C=-1,S=d.criteria,O=h.criteria,H=S.length,U=b.length;++C<H;){var Y=$w(S[C],O[C]);if(Y){if(C>=U)return Y;var fe=b[C];return Y*(fe=="desc"?-1:1)}}return d.index-h.index}function Iw(d,h,b,C){for(var S=-1,O=d.length,H=b.length,U=-1,Y=h.length,fe=En(O-H,0),pe=re(Y+fe),_e=!C;++U<Y;)pe[U]=h[U];for(;++S<H;)(_e||S<O)&&(pe[b[S]]=d[S]);for(;fe--;)pe[U++]=d[S++];return pe}function Lw(d,h,b,C){for(var S=-1,O=d.length,H=-1,U=b.length,Y=-1,fe=h.length,pe=En(O-U,0),_e=re(pe+fe),De=!C;++S<pe;)_e[S]=d[S];for(var We=S;++Y<fe;)_e[We+Y]=h[Y];for(;++H<U;)(De||S<O)&&(_e[We+b[H]]=d[S++]);return _e}function Ti(d,h){var b=-1,C=d.length;for(h||(h=re(C));++b<C;)h[b]=d[b];return h}function Xo(d,h,b,C){var S=!b;b||(b={});for(var O=-1,H=h.length;++O<H;){var U=h[O],Y=C?C(b[U],d[U],U,b,d):n;Y===n&&(Y=d[U]),S?Os(b,U,Y):jc(b,U,Y)}return b}function c$(d,h){return Xo(d,Og(d),h)}function d$(d,h){return Xo(d,qw(d),h)}function fh(d,h){return function(b,C){var S=mt(b)?mE:IO,O=h?h():{};return S(b,d,Xe(C,2),O)}}function El(d){return At(function(h,b){var C=-1,S=b.length,O=S>1?b[S-1]:n,H=S>2?b[2]:n;for(O=d.length>3&&typeof O=="function"?(S--,O):n,H&&pi(b[0],b[1],H)&&(O=S<3?n:O,S=1),h=Ut(h);++C<S;){var U=b[C];U&&d(h,U,C,O)}return h})}function Dw(d,h){return function(b,C){if(b==null)return b;if(!Ei(b))return d(b,C);for(var S=b.length,O=h?S:-1,H=Ut(b);(h?O--:++O<S)&&C(H[O],O,H)!==!1;);return b}}function Rw(d){return function(h,b,C){for(var S=-1,O=Ut(h),H=C(h),U=H.length;U--;){var Y=H[d?U:++S];if(b(O[Y],Y,O)===!1)break}return h}}function u$(d,h,b){var C=h&_,S=Yc(d);function O(){var H=this&&this!==Un&&this instanceof O?S:d;return H.apply(C?b:this,arguments)}return O}function Pw(d){return function(h){h=zt(h);var b=Cl(h)?Lo(h):n,C=b?b[0]:h.charAt(0),S=b?_r(b,1).join(""):h.slice(1);return C[d]()+S}}function Ol(d){return function(h){return Gm(D_(L_(h).replace(tE,"")),d,"")}}function Yc(d){return function(){var h=arguments;switch(h.length){case 0:return new d;case 1:return new d(h[0]);case 2:return new d(h[0],h[1]);case 3:return new d(h[0],h[1],h[2]);case 4:return new d(h[0],h[1],h[2],h[3]);case 5:return new d(h[0],h[1],h[2],h[3],h[4]);case 6:return new d(h[0],h[1],h[2],h[3],h[4],h[5]);case 7:return new d(h[0],h[1],h[2],h[3],h[4],h[5],h[6])}var b=Tl(d.prototype),C=d.apply(b,h);return an(C)?C:b}}function h$(d,h,b){var C=Yc(d);function S(){for(var O=arguments.length,H=re(O),U=O,Y=$l(S);U--;)H[U]=arguments[U];var fe=O<3&&H[0]!==Y&&H[O-1]!==Y?[]:gr(H,Y);if(O-=fe.length,O<b)return Bw(d,h,ph,S.placeholder,n,H,fe,n,n,b-O);var pe=this&&this!==Un&&this instanceof S?C:d;return zi(pe,this,H)}return S}function Hw(d){return function(h,b,C){var S=Ut(h);if(!Ei(h)){var O=Xe(b,3);h=Rn(h),b=function(U){return O(S[U],U,S)}}var H=d(h,b,C);return H>-1?S[O?h[H]:H]:n}}function Vw(d){return Is(function(h){var b=h.length,C=b,S=ao.prototype.thru;for(d&&h.reverse();C--;){var O=h[C];if(typeof O!="function")throw new ro(r);if(S&&!H&&yh(O)=="wrapper")var H=new ao([],!0)}for(C=H?C:b;++C<b;){O=h[C];var U=yh(O),Y=U=="wrapper"?Tg(O):n;Y&&Ig(Y[0])&&Y[1]==(ee|P|F|ie)&&!Y[4].length&&Y[9]==1?H=H[yh(Y[0])].apply(H,Y[3]):H=O.length==1&&Ig(O)?H[U]():H.thru(O)}return function(){var fe=arguments,pe=fe[0];if(H&&fe.length==1&&mt(pe))return H.plant(pe).value();for(var _e=0,De=b?h[_e].apply(this,fe):pe;++_e<b;)De=h[_e].call(this,De);return De}})}function ph(d,h,b,C,S,O,H,U,Y,fe){var pe=h&ee,_e=h&_,De=h&k,We=h&(P|M),tt=h&K,wt=De?n:Yc(d);function nt(){for(var St=arguments.length,$t=re(St),Wi=St;Wi--;)$t[Wi]=arguments[Wi];if(We)var mi=$l(nt),Ui=kE($t,mi);if(C&&($t=Iw($t,C,S,We)),O&&($t=Lw($t,O,H,We)),St-=Ui,We&&St<fe){var vn=gr($t,mi);return Bw(d,h,ph,nt.placeholder,b,$t,vn,U,Y,fe-St)}var Po=_e?b:this,Ps=De?Po[d]:d;return St=$t.length,U?$t=I$($t,U):tt&&St>1&&$t.reverse(),pe&&Y<St&&($t.length=Y),this&&this!==Un&&this instanceof nt&&(Ps=wt||Yc(Ps)),Ps.apply(Po,$t)}return nt}function zw(d,h){return function(b,C){return NO(b,d,h(C),{})}}function mh(d,h){return function(b,C){var S;if(b===n&&C===n)return h;if(b!==n&&(S=b),C!==n){if(S===n)return C;typeof b=="string"||typeof C=="string"?(b=Bi(b),C=Bi(C)):(b=kw(b),C=kw(C)),S=d(b,C)}return S}}function kg(d){return Is(function(h){return h=sn(h,Ni(Xe())),At(function(b){var C=this;return d(h,function(S){return zi(S,C,b)})})})}function gh(d,h){h=h===n?" ":Bi(h);var b=h.length;if(b<2)return b?bg(h,d):h;var C=bg(h,nh(d/Al(h)));return Cl(h)?_r(Lo(C),0,d).join(""):C.slice(0,d)}function f$(d,h,b,C){var S=h&_,O=Yc(d);function H(){for(var U=-1,Y=arguments.length,fe=-1,pe=C.length,_e=re(pe+Y),De=this&&this!==Un&&this instanceof H?O:d;++fe<pe;)_e[fe]=C[fe];for(;Y--;)_e[fe++]=arguments[++U];return zi(De,S?b:this,_e)}return H}function Nw(d){return function(h,b,C){return C&&typeof C!="number"&&pi(h,b,C)&&(b=C=n),h=Rs(h),b===n?(b=h,h=0):b=Rs(b),C=C===n?h<b?1:-1:Rs(C),XO(h,b,C,d)}}function bh(d){return function(h,b){return typeof h=="string"&&typeof b=="string"||(h=ho(h),b=ho(b)),d(h,b)}}function Bw(d,h,b,C,S,O,H,U,Y,fe){var pe=h&P,_e=pe?H:n,De=pe?n:H,We=pe?O:n,tt=pe?n:O;h|=pe?F:z,h&=~(pe?z:F),h&L||(h&=-4);var wt=[d,h,S,We,_e,tt,De,U,Y,fe],nt=b.apply(n,wt);return Ig(d)&&Qw(nt,wt),nt.placeholder=C,e_(nt,d,h)}function Sg(d){var h=Tn[d];return function(b,C){if(b=ho(b),C=C==null?0:ni(vt(C),292),C&&ew(b)){var S=(zt(b)+"e").split("e"),O=h(S[0]+"e"+(+S[1]+C));return S=(zt(O)+"e").split("e"),+(S[0]+"e"+(+S[1]-C))}return h(b)}}var p$=xl&&1/qu(new xl([,-0]))[1]==q?function(d){return new xl(d)}:Kg;function Fw(d){return function(h){var b=ii(h);return b==se?tg(h):b==me?$E(h):AE(h,d(h))}}function $s(d,h,b,C,S,O,H,U){var Y=h&k;if(!Y&&typeof d!="function")throw new ro(r);var fe=C?C.length:0;if(fe||(h&=-97,C=S=n),H=H===n?H:En(vt(H),0),U=U===n?U:vt(U),fe-=S?S.length:0,h&z){var pe=C,_e=S;C=S=n}var De=Y?n:Tg(d),We=[d,h,b,C,S,pe,_e,O,H,U];if(De&&E$(We,De),d=We[0],h=We[1],b=We[2],C=We[3],S=We[4],U=We[9]=We[9]===n?Y?0:d.length:En(We[9]-fe,0),!U&&h&(P|M)&&(h&=-25),!h||h==_)var tt=u$(d,h,b);else h==P||h==M?tt=h$(d,h,U):(h==F||h==(_|F))&&!S.length?tt=f$(d,h,b,C):tt=ph.apply(n,We);var wt=De?Cw:Qw;return e_(wt(tt,We),d,h)}function Ww(d,h,b,C){return d===n||Ro(d,Sl[b])&&!Ft.call(C,b)?h:d}function Uw(d,h,b,C,S,O){return an(d)&&an(h)&&(O.set(h,d),dh(d,h,n,Uw,O),O.delete(h)),d}function m$(d){return Qc(d)?n:d}function jw(d,h,b,C,S,O){var H=b&v,U=d.length,Y=h.length;if(U!=Y&&!(H&&Y>U))return!1;var fe=O.get(d),pe=O.get(h);if(fe&&pe)return fe==h&&pe==d;var _e=-1,De=!0,We=b&w?new ka:n;for(O.set(d,h),O.set(h,d);++_e<U;){var tt=d[_e],wt=h[_e];if(C)var nt=H?C(wt,tt,_e,h,d,O):C(tt,wt,_e,d,h,O);if(nt!==n){if(nt)continue;De=!1;break}if(We){if(!Jm(h,function(St,$t){if(!zc(We,$t)&&(tt===St||S(tt,St,b,C,O)))return We.push($t)})){De=!1;break}}else if(!(tt===wt||S(tt,wt,b,C,O))){De=!1;break}}return O.delete(d),O.delete(h),De}function g$(d,h,b,C,S,O,H){switch(b){case yt:if(d.byteLength!=h.byteLength||d.byteOffset!=h.byteOffset)return!1;d=d.buffer,h=h.buffer;case kt:return!(d.byteLength!=h.byteLength||!O(new Xu(d),new Xu(h)));case lt:case Lt:case we:return Ro(+d,+h);case Gt:return d.name==h.name&&d.message==h.message;case Ae:case Ne:return d==h+"";case se:var U=tg;case me:var Y=C&v;if(U||(U=qu),d.size!=h.size&&!Y)return!1;var fe=H.get(d);if(fe)return fe==h;C|=w,H.set(d,h);var pe=jw(U(d),U(h),C,S,O,H);return H.delete(d),pe;case Me:if(Uc)return Uc.call(d)==Uc.call(h)}return!1}function b$(d,h,b,C,S,O){var H=b&v,U=xg(d),Y=U.length,fe=xg(h),pe=fe.length;if(Y!=pe&&!H)return!1;for(var _e=Y;_e--;){var De=U[_e];if(!(H?De in h:Ft.call(h,De)))return!1}var We=O.get(d),tt=O.get(h);if(We&&tt)return We==h&&tt==d;var wt=!0;O.set(d,h),O.set(h,d);for(var nt=H;++_e<Y;){De=U[_e];var St=d[De],$t=h[De];if(C)var Wi=H?C($t,St,De,h,d,O):C(St,$t,De,d,h,O);if(!(Wi===n?St===$t||S(St,$t,b,C,O):Wi)){wt=!1;break}nt||(nt=De=="constructor")}if(wt&&!nt){var mi=d.constructor,Ui=h.constructor;mi!=Ui&&"constructor"in d&&"constructor"in h&&!(typeof mi=="function"&&mi instanceof mi&&typeof Ui=="function"&&Ui instanceof Ui)&&(wt=!1)}return O.delete(d),O.delete(h),wt}function Is(d){return Dg(Zw(d,n,r_),d+"")}function xg(d){return uw(d,Rn,Og)}function Mg(d){return uw(d,Oi,qw)}var Tg=oh?function(d){return oh.get(d)}:Kg;function yh(d){for(var h=d.name+"",b=Ml[h],C=Ft.call(Ml,h)?b.length:0;C--;){var S=b[C],O=S.func;if(O==null||O==d)return S.name}return h}function $l(d){var h=Ft.call(T,"placeholder")?T:d;return h.placeholder}function Xe(){var d=T.iteratee||jg;return d=d===jg?pw:d,arguments.length?d(arguments[0],arguments[1]):d}function vh(d,h){var b=d.__data__;return S$(h)?b[typeof h=="string"?"string":"hash"]:b.map}function Eg(d){for(var h=Rn(d),b=h.length;b--;){var C=h[b],S=d[C];h[b]=[C,S,Jw(S)]}return h}function Ma(d,h){var b=TE(d,h);return fw(b)?b:n}function y$(d){var h=Ft.call(d,Ca),b=d[Ca];try{d[Ca]=n;var C=!0}catch{}var S=Yu.call(d);return C&&(h?d[Ca]=b:delete d[Ca]),S}var Og=ig?function(d){return d==null?[]:(d=Ut(d),pr(ig(d),function(h){return Xv.call(d,h)}))}:Gg,qw=ig?function(d){for(var h=[];d;)mr(h,Og(d)),d=Qu(d);return h}:Gg,ii=fi;(og&&ii(new og(new ArrayBuffer(1)))!=yt||Bc&&ii(new Bc)!=se||sg&&ii(sg.resolve())!=Ee||xl&&ii(new xl)!=me||Fc&&ii(new Fc)!=je)&&(ii=function(d){var h=fi(d),b=h==ge?d.constructor:n,C=b?Ta(b):"";if(C)switch(C){case eO:return yt;case tO:return se;case nO:return Ee;case iO:return me;case oO:return je}return h});function v$(d,h,b){for(var C=-1,S=b.length;++C<S;){var O=b[C],H=O.size;switch(O.type){case"drop":d+=H;break;case"dropRight":h-=H;break;case"take":h=ni(h,d+H);break;case"takeRight":d=En(d,h-H);break}}return{start:d,end:h}}function w$(d){var h=d.match(xT);return h?h[1].split(MT):[]}function Kw(d,h,b){h=wr(h,d);for(var C=-1,S=h.length,O=!1;++C<S;){var H=Qo(h[C]);if(!(O=d!=null&&b(d,H)))break;d=d[H]}return O||++C!=S?O:(S=d==null?0:d.length,!!S&&xh(S)&&Ls(H,S)&&(mt(d)||Ea(d)))}function _$(d){var h=d.length,b=new d.constructor(h);return h&&typeof d[0]=="string"&&Ft.call(d,"index")&&(b.index=d.index,b.input=d.input),b}function Gw(d){return typeof d.constructor=="function"&&!Zc(d)?Tl(Qu(d)):{}}function C$(d,h,b){var C=d.constructor;switch(h){case kt:return Ag(d);case lt:case Lt:return new C(+d);case yt:return s$(d,b);case Mn:case _n:case ei:case ti:case Io:case de:case $e:case Be:case xt:return Ow(d,b);case se:return new C;case we:case Ne:return new C(d);case Ae:return r$(d);case me:return new C;case Me:return a$(d)}}function A$(d,h){var b=h.length;if(!b)return d;var C=b-1;return h[C]=(b>1?"& ":"")+h[C],h=h.join(b>2?", ":" "),d.replace(ST,`{
/* [wrapped with `+h+`] */
`)}function k$(d){return mt(d)||Ea(d)||!!(Qv&&d&&d[Qv])}function Ls(d,h){var b=typeof d;return h=h??Z,!!h&&(b=="number"||b!="symbol"&&PT.test(d))&&d>-1&&d%1==0&&d<h}function pi(d,h,b){if(!an(b))return!1;var C=typeof h;return(C=="number"?Ei(b)&&Ls(h,b.length):C=="string"&&h in b)?Ro(b[h],d):!1}function $g(d,h){if(mt(d))return!1;var b=typeof d;return b=="number"||b=="symbol"||b=="boolean"||d==null||Fi(d)?!0:vl.test(d)||!Vc.test(d)||h!=null&&d in Ut(h)}function S$(d){var h=typeof d;return h=="string"||h=="number"||h=="symbol"||h=="boolean"?d!=="__proto__":d===null}function Ig(d){var h=yh(d),b=T[h];if(typeof b!="function"||!(h in Mt.prototype))return!1;if(d===b)return!0;var C=Tg(b);return!!C&&d===C[0]}function x$(d){return!!Jv&&Jv in d}var M$=Gu?Ds:Jg;function Zc(d){var h=d&&d.constructor,b=typeof h=="function"&&h.prototype||Sl;return d===b}function Jw(d){return d===d&&!an(d)}function Yw(d,h){return function(b){return b==null?!1:b[d]===h&&(h!==n||d in Ut(b))}}function T$(d){var h=kh(d,function(C){return b.size===c&&b.clear(),C}),b=h.cache;return h}function E$(d,h){var b=d[1],C=h[1],S=b|C,O=S<(_|k|ee),H=C==ee&&b==P||C==ee&&b==ie&&d[7].length<=h[8]||C==(ee|ie)&&h[7].length<=h[8]&&b==P;if(!(O||H))return d;C&_&&(d[2]=h[2],S|=b&_?0:L);var U=h[3];if(U){var Y=d[3];d[3]=Y?Iw(Y,U,h[4]):U,d[4]=Y?gr(d[3],u):h[4]}return U=h[5],U&&(Y=d[5],d[5]=Y?Lw(Y,U,h[6]):U,d[6]=Y?gr(d[5],u):h[6]),U=h[7],U&&(d[7]=U),C&ee&&(d[8]=d[8]==null?h[8]:ni(d[8],h[8])),d[9]==null&&(d[9]=h[9]),d[0]=h[0],d[1]=S,d}function O$(d){var h=[];if(d!=null)for(var b in Ut(d))h.push(b);return h}function $$(d){return Yu.call(d)}function Zw(d,h,b){return h=En(h===n?d.length-1:h,0),function(){for(var C=arguments,S=-1,O=En(C.length-h,0),H=re(O);++S<O;)H[S]=C[h+S];S=-1;for(var U=re(h+1);++S<h;)U[S]=C[S];return U[h]=b(H),zi(d,this,U)}}function Xw(d,h){return h.length<2?d:xa(d,co(h,0,-1))}function I$(d,h){for(var b=d.length,C=ni(h.length,b),S=Ti(d);C--;){var O=h[C];d[C]=Ls(O,b)?S[O]:n}return d}function Lg(d,h){if(!(h==="constructor"&&typeof d[h]=="function")&&h!="__proto__")return d[h]}var Qw=t_(Cw),Xc=KE||function(d,h){return Un.setTimeout(d,h)},Dg=t_(t$);function e_(d,h,b){var C=h+"";return Dg(d,A$(C,L$(w$(C),b)))}function t_(d){var h=0,b=0;return function(){var C=ZE(),S=he-(C-b);if(b=C,S>0){if(++h>=J)return arguments[0]}else h=0;return d.apply(n,arguments)}}function wh(d,h){var b=-1,C=d.length,S=C-1;for(h=h===n?C:h;++b<h;){var O=gg(b,S),H=d[O];d[O]=d[b],d[b]=H}return d.length=h,d}var n_=T$(function(d){var h=[];return d.charCodeAt(0)===46&&h.push(""),d.replace(CT,function(b,C,S,O){h.push(S?O.replace(OT,"$1"):C||b)}),h});function Qo(d){if(typeof d=="string"||Fi(d))return d;var h=d+"";return h=="0"&&1/d==-1/0?"-0":h}function Ta(d){if(d!=null){try{return Ju.call(d)}catch{}try{return d+""}catch{}}return""}function L$(d,h){return so(Re,function(b){var C="_."+b[0];h&b[1]&&!Uu(d,C)&&d.push(C)}),d.sort()}function i_(d){if(d instanceof Mt)return d.clone();var h=new ao(d.__wrapped__,d.__chain__);return h.__actions__=Ti(d.__actions__),h.__index__=d.__index__,h.__values__=d.__values__,h}function D$(d,h,b){(b?pi(d,h,b):h===n)?h=1:h=En(vt(h),0);var C=d==null?0:d.length;if(!C||h<1)return[];for(var S=0,O=0,H=re(nh(C/h));S<C;)H[O++]=co(d,S,S+=h);return H}function R$(d){for(var h=-1,b=d==null?0:d.length,C=0,S=[];++h<b;){var O=d[h];O&&(S[C++]=O)}return S}function P$(){var d=arguments.length;if(!d)return[];for(var h=re(d-1),b=arguments[0],C=d;C--;)h[C-1]=arguments[C];return mr(mt(b)?Ti(b):[b],jn(h,1))}var H$=At(function(d,h){return yn(d)?qc(d,jn(h,1,yn,!0)):[]}),V$=At(function(d,h){var b=uo(h);return yn(b)&&(b=n),yn(d)?qc(d,jn(h,1,yn,!0),Xe(b,2)):[]}),z$=At(function(d,h){var b=uo(h);return yn(b)&&(b=n),yn(d)?qc(d,jn(h,1,yn,!0),n,b):[]});function N$(d,h,b){var C=d==null?0:d.length;return C?(h=b||h===n?1:vt(h),co(d,h<0?0:h,C)):[]}function B$(d,h,b){var C=d==null?0:d.length;return C?(h=b||h===n?1:vt(h),h=C-h,co(d,0,h<0?0:h)):[]}function F$(d,h){return d&&d.length?hh(d,Xe(h,3),!0,!0):[]}function W$(d,h){return d&&d.length?hh(d,Xe(h,3),!0):[]}function U$(d,h,b,C){var S=d==null?0:d.length;return S?(b&&typeof b!="number"&&pi(d,h,b)&&(b=0,C=S),PO(d,h,b,C)):[]}function o_(d,h,b){var C=d==null?0:d.length;if(!C)return-1;var S=b==null?0:vt(b);return S<0&&(S=En(C+S,0)),ju(d,Xe(h,3),S)}function s_(d,h,b){var C=d==null?0:d.length;if(!C)return-1;var S=C-1;return b!==n&&(S=vt(b),S=b<0?En(C+S,0):ni(S,C-1)),ju(d,Xe(h,3),S,!0)}function r_(d){var h=d==null?0:d.length;return h?jn(d,1):[]}function j$(d){var h=d==null?0:d.length;return h?jn(d,q):[]}function q$(d,h){var b=d==null?0:d.length;return b?(h=h===n?1:vt(h),jn(d,h)):[]}function K$(d){for(var h=-1,b=d==null?0:d.length,C={};++h<b;){var S=d[h];C[S[0]]=S[1]}return C}function a_(d){return d&&d.length?d[0]:n}function G$(d,h,b){var C=d==null?0:d.length;if(!C)return-1;var S=b==null?0:vt(b);return S<0&&(S=En(C+S,0)),_l(d,h,S)}function J$(d){var h=d==null?0:d.length;return h?co(d,0,-1):[]}var Y$=At(function(d){var h=sn(d,_g);return h.length&&h[0]===d[0]?ug(h):[]}),Z$=At(function(d){var h=uo(d),b=sn(d,_g);return h===uo(b)?h=n:b.pop(),b.length&&b[0]===d[0]?ug(b,Xe(h,2)):[]}),X$=At(function(d){var h=uo(d),b=sn(d,_g);return h=typeof h=="function"?h:n,h&&b.pop(),b.length&&b[0]===d[0]?ug(b,n,h):[]});function Q$(d,h){return d==null?"":JE.call(d,h)}function uo(d){var h=d==null?0:d.length;return h?d[h-1]:n}function e8(d,h,b){var C=d==null?0:d.length;if(!C)return-1;var S=C;return b!==n&&(S=vt(b),S=S<0?En(C+S,0):ni(S,C-1)),h===h?LE(d,h,S):ju(d,Bv,S,!0)}function t8(d,h){return d&&d.length?yw(d,vt(h)):n}var n8=At(l_);function l_(d,h){return d&&d.length&&h&&h.length?mg(d,h):d}function i8(d,h,b){return d&&d.length&&h&&h.length?mg(d,h,Xe(b,2)):d}function o8(d,h,b){return d&&d.length&&h&&h.length?mg(d,h,n,b):d}var s8=Is(function(d,h){var b=d==null?0:d.length,C=ag(d,h);return _w(d,sn(h,function(S){return Ls(S,b)?+S:S}).sort($w)),C});function r8(d,h){var b=[];if(!(d&&d.length))return b;var C=-1,S=[],O=d.length;for(h=Xe(h,3);++C<O;){var H=d[C];h(H,C,d)&&(b.push(H),S.push(C))}return _w(d,S),b}function Rg(d){return d==null?d:QE.call(d)}function a8(d,h,b){var C=d==null?0:d.length;return C?(b&&typeof b!="number"&&pi(d,h,b)?(h=0,b=C):(h=h==null?0:vt(h),b=b===n?C:vt(b)),co(d,h,b)):[]}function l8(d,h){return uh(d,h)}function c8(d,h,b){return yg(d,h,Xe(b,2))}function d8(d,h){var b=d==null?0:d.length;if(b){var C=uh(d,h);if(C<b&&Ro(d[C],h))return C}return-1}function u8(d,h){return uh(d,h,!0)}function h8(d,h,b){return yg(d,h,Xe(b,2),!0)}function f8(d,h){var b=d==null?0:d.length;if(b){var C=uh(d,h,!0)-1;if(Ro(d[C],h))return C}return-1}function p8(d){return d&&d.length?Aw(d):[]}function m8(d,h){return d&&d.length?Aw(d,Xe(h,2)):[]}function g8(d){var h=d==null?0:d.length;return h?co(d,1,h):[]}function b8(d,h,b){return d&&d.length?(h=b||h===n?1:vt(h),co(d,0,h<0?0:h)):[]}function y8(d,h,b){var C=d==null?0:d.length;return C?(h=b||h===n?1:vt(h),h=C-h,co(d,h<0?0:h,C)):[]}function v8(d,h){return d&&d.length?hh(d,Xe(h,3),!1,!0):[]}function w8(d,h){return d&&d.length?hh(d,Xe(h,3)):[]}var _8=At(function(d){return vr(jn(d,1,yn,!0))}),C8=At(function(d){var h=uo(d);return yn(h)&&(h=n),vr(jn(d,1,yn,!0),Xe(h,2))}),A8=At(function(d){var h=uo(d);return h=typeof h=="function"?h:n,vr(jn(d,1,yn,!0),n,h)});function k8(d){return d&&d.length?vr(d):[]}function S8(d,h){return d&&d.length?vr(d,Xe(h,2)):[]}function x8(d,h){return h=typeof h=="function"?h:n,d&&d.length?vr(d,n,h):[]}function Pg(d){if(!(d&&d.length))return[];var h=0;return d=pr(d,function(b){if(yn(b))return h=En(b.length,h),!0}),Qm(h,function(b){return sn(d,Ym(b))})}function c_(d,h){if(!(d&&d.length))return[];var b=Pg(d);return h==null?b:sn(b,function(C){return zi(h,n,C)})}var M8=At(function(d,h){return yn(d)?qc(d,h):[]}),T8=At(function(d){return wg(pr(d,yn))}),E8=At(function(d){var h=uo(d);return yn(h)&&(h=n),wg(pr(d,yn),Xe(h,2))}),O8=At(function(d){var h=uo(d);return h=typeof h=="function"?h:n,wg(pr(d,yn),n,h)}),$8=At(Pg);function I8(d,h){return Mw(d||[],h||[],jc)}function L8(d,h){return Mw(d||[],h||[],Jc)}var D8=At(function(d){var h=d.length,b=h>1?d[h-1]:n;return b=typeof b=="function"?(d.pop(),b):n,c_(d,b)});function d_(d){var h=T(d);return h.__chain__=!0,h}function R8(d,h){return h(d),d}function _h(d,h){return h(d)}var P8=Is(function(d){var h=d.length,b=h?d[0]:0,C=this.__wrapped__,S=function(O){return ag(O,d)};return h>1||this.__actions__.length||!(C instanceof Mt)||!Ls(b)?this.thru(S):(C=C.slice(b,+b+(h?1:0)),C.__actions__.push({func:_h,args:[S],thisArg:n}),new ao(C,this.__chain__).thru(function(O){return h&&!O.length&&O.push(n),O}))});function H8(){return d_(this)}function V8(){return new ao(this.value(),this.__chain__)}function z8(){this.__values__===n&&(this.__values__=k_(this.value()));var d=this.__index__>=this.__values__.length,h=d?n:this.__values__[this.__index__++];return{done:d,value:h}}function N8(){return this}function B8(d){for(var h,b=this;b instanceof rh;){var C=i_(b);C.__index__=0,C.__values__=n,h?S.__wrapped__=C:h=C;var S=C;b=b.__wrapped__}return S.__wrapped__=d,h}function F8(){var d=this.__wrapped__;if(d instanceof Mt){var h=d;return this.__actions__.length&&(h=new Mt(this)),h=h.reverse(),h.__actions__.push({func:_h,args:[Rg],thisArg:n}),new ao(h,this.__chain__)}return this.thru(Rg)}function W8(){return xw(this.__wrapped__,this.__actions__)}var U8=fh(function(d,h,b){Ft.call(d,b)?++d[b]:Os(d,b,1)});function j8(d,h,b){var C=mt(d)?zv:RO;return b&&pi(d,h,b)&&(h=n),C(d,Xe(h,3))}function q8(d,h){var b=mt(d)?pr:cw;return b(d,Xe(h,3))}var K8=Hw(o_),G8=Hw(s_);function J8(d,h){return jn(Ch(d,h),1)}function Y8(d,h){return jn(Ch(d,h),q)}function Z8(d,h,b){return b=b===n?1:vt(b),jn(Ch(d,h),b)}function u_(d,h){var b=mt(d)?so:yr;return b(d,Xe(h,3))}function h_(d,h){var b=mt(d)?gE:lw;return b(d,Xe(h,3))}var X8=fh(function(d,h,b){Ft.call(d,b)?d[b].push(h):Os(d,b,[h])});function Q8(d,h,b,C){d=Ei(d)?d:Ll(d),b=b&&!C?vt(b):0;var S=d.length;return b<0&&(b=En(S+b,0)),Mh(d)?b<=S&&d.indexOf(h,b)>-1:!!S&&_l(d,h,b)>-1}var eI=At(function(d,h,b){var C=-1,S=typeof h=="function",O=Ei(d)?re(d.length):[];return yr(d,function(H){O[++C]=S?zi(h,H,b):Kc(H,h,b)}),O}),tI=fh(function(d,h,b){Os(d,b,h)});function Ch(d,h){var b=mt(d)?sn:mw;return b(d,Xe(h,3))}function nI(d,h,b,C){return d==null?[]:(mt(h)||(h=h==null?[]:[h]),b=C?n:b,mt(b)||(b=b==null?[]:[b]),vw(d,h,b))}var iI=fh(function(d,h,b){d[b?0:1].push(h)},function(){return[[],[]]});function oI(d,h,b){var C=mt(d)?Gm:Wv,S=arguments.length<3;return C(d,Xe(h,4),b,S,yr)}function sI(d,h,b){var C=mt(d)?bE:Wv,S=arguments.length<3;return C(d,Xe(h,4),b,S,lw)}function rI(d,h){var b=mt(d)?pr:cw;return b(d,Sh(Xe(h,3)))}function aI(d){var h=mt(d)?ow:QO;return h(d)}function lI(d,h,b){(b?pi(d,h,b):h===n)?h=1:h=vt(h);var C=mt(d)?OO:e$;return C(d,h)}function cI(d){var h=mt(d)?$O:n$;return h(d)}function dI(d){if(d==null)return 0;if(Ei(d))return Mh(d)?Al(d):d.length;var h=ii(d);return h==se||h==me?d.size:fg(d).length}function uI(d,h,b){var C=mt(d)?Jm:i$;return b&&pi(d,h,b)&&(h=n),C(d,Xe(h,3))}var hI=At(function(d,h){if(d==null)return[];var b=h.length;return b>1&&pi(d,h[0],h[1])?h=[]:b>2&&pi(h[0],h[1],h[2])&&(h=[h[0]]),vw(d,jn(h,1),[])}),Ah=qE||function(){return Un.Date.now()};function fI(d,h){if(typeof h!="function")throw new ro(r);return d=vt(d),function(){if(--d<1)return h.apply(this,arguments)}}function f_(d,h,b){return h=b?n:h,h=d&&h==null?d.length:h,$s(d,ee,n,n,n,n,h)}function p_(d,h){var b;if(typeof h!="function")throw new ro(r);return d=vt(d),function(){return--d>0&&(b=h.apply(this,arguments)),d<=1&&(h=n),b}}var Hg=At(function(d,h,b){var C=_;if(b.length){var S=gr(b,$l(Hg));C|=F}return $s(d,C,h,b,S)}),m_=At(function(d,h,b){var C=_|k;if(b.length){var S=gr(b,$l(m_));C|=F}return $s(h,C,d,b,S)});function g_(d,h,b){h=b?n:h;var C=$s(d,P,n,n,n,n,n,h);return C.placeholder=g_.placeholder,C}function b_(d,h,b){h=b?n:h;var C=$s(d,M,n,n,n,n,n,h);return C.placeholder=b_.placeholder,C}function y_(d,h,b){var C,S,O,H,U,Y,fe=0,pe=!1,_e=!1,De=!0;if(typeof d!="function")throw new ro(r);h=ho(h)||0,an(b)&&(pe=!!b.leading,_e="maxWait"in b,O=_e?En(ho(b.maxWait)||0,h):O,De="trailing"in b?!!b.trailing:De);function We(vn){var Po=C,Ps=S;return C=S=n,fe=vn,H=d.apply(Ps,Po),H}function tt(vn){return fe=vn,U=Xc(St,h),pe?We(vn):H}function wt(vn){var Po=vn-Y,Ps=vn-fe,H_=h-Po;return _e?ni(H_,O-Ps):H_}function nt(vn){var Po=vn-Y,Ps=vn-fe;return Y===n||Po>=h||Po<0||_e&&Ps>=O}function St(){var vn=Ah();if(nt(vn))return $t(vn);U=Xc(St,wt(vn))}function $t(vn){return U=n,De&&C?We(vn):(C=S=n,H)}function Wi(){U!==n&&Tw(U),fe=0,C=Y=S=U=n}function mi(){return U===n?H:$t(Ah())}function Ui(){var vn=Ah(),Po=nt(vn);if(C=arguments,S=this,Y=vn,Po){if(U===n)return tt(Y);if(_e)return Tw(U),U=Xc(St,h),We(Y)}return U===n&&(U=Xc(St,h)),H}return Ui.cancel=Wi,Ui.flush=mi,Ui}var pI=At(function(d,h){return aw(d,1,h)}),mI=At(function(d,h,b){return aw(d,ho(h)||0,b)});function gI(d){return $s(d,K)}function kh(d,h){if(typeof d!="function"||h!=null&&typeof h!="function")throw new ro(r);var b=function(){var C=arguments,S=h?h.apply(this,C):C[0],O=b.cache;if(O.has(S))return O.get(S);var H=d.apply(this,C);return b.cache=O.set(S,H)||O,H};return b.cache=new(kh.Cache||Es),b}kh.Cache=Es;function Sh(d){if(typeof d!="function")throw new ro(r);return function(){var h=arguments;switch(h.length){case 0:return!d.call(this);case 1:return!d.call(this,h[0]);case 2:return!d.call(this,h[0],h[1]);case 3:return!d.call(this,h[0],h[1],h[2])}return!d.apply(this,h)}}function bI(d){return p_(2,d)}var yI=o$(function(d,h){h=h.length==1&&mt(h[0])?sn(h[0],Ni(Xe())):sn(jn(h,1),Ni(Xe()));var b=h.length;return At(function(C){for(var S=-1,O=ni(C.length,b);++S<O;)C[S]=h[S].call(this,C[S]);return zi(d,this,C)})}),Vg=At(function(d,h){var b=gr(h,$l(Vg));return $s(d,F,n,h,b)}),v_=At(function(d,h){var b=gr(h,$l(v_));return $s(d,z,n,h,b)}),vI=Is(function(d,h){return $s(d,ie,n,n,n,h)});function wI(d,h){if(typeof d!="function")throw new ro(r);return h=h===n?h:vt(h),At(d,h)}function _I(d,h){if(typeof d!="function")throw new ro(r);return h=h==null?0:En(vt(h),0),At(function(b){var C=b[h],S=_r(b,0,h);return C&&mr(S,C),zi(d,this,S)})}function CI(d,h,b){var C=!0,S=!0;if(typeof d!="function")throw new ro(r);return an(b)&&(C="leading"in b?!!b.leading:C,S="trailing"in b?!!b.trailing:S),y_(d,h,{leading:C,maxWait:h,trailing:S})}function AI(d){return f_(d,1)}function kI(d,h){return Vg(Cg(h),d)}function SI(){if(!arguments.length)return[];var d=arguments[0];return mt(d)?d:[d]}function xI(d){return lo(d,g)}function MI(d,h){return h=typeof h=="function"?h:n,lo(d,g,h)}function TI(d){return lo(d,f|g)}function EI(d,h){return h=typeof h=="function"?h:n,lo(d,f|g,h)}function OI(d,h){return h==null||rw(d,h,Rn(h))}function Ro(d,h){return d===h||d!==d&&h!==h}var $I=bh(dg),II=bh(function(d,h){return d>=h}),Ea=hw(function(){return arguments}())?hw:function(d){return un(d)&&Ft.call(d,"callee")&&!Xv.call(d,"callee")},mt=re.isArray,LI=Lv?Ni(Lv):BO;function Ei(d){return d!=null&&xh(d.length)&&!Ds(d)}function yn(d){return un(d)&&Ei(d)}function DI(d){return d===!0||d===!1||un(d)&&fi(d)==lt}var Cr=GE||Jg,RI=Dv?Ni(Dv):FO;function PI(d){return un(d)&&d.nodeType===1&&!Qc(d)}function HI(d){if(d==null)return!0;if(Ei(d)&&(mt(d)||typeof d=="string"||typeof d.splice=="function"||Cr(d)||Il(d)||Ea(d)))return!d.length;var h=ii(d);if(h==se||h==me)return!d.size;if(Zc(d))return!fg(d).length;for(var b in d)if(Ft.call(d,b))return!1;return!0}function VI(d,h){return Gc(d,h)}function zI(d,h,b){b=typeof b=="function"?b:n;var C=b?b(d,h):n;return C===n?Gc(d,h,n,b):!!C}function zg(d){if(!un(d))return!1;var h=fi(d);return h==Gt||h==pt||typeof d.message=="string"&&typeof d.name=="string"&&!Qc(d)}function NI(d){return typeof d=="number"&&ew(d)}function Ds(d){if(!an(d))return!1;var h=fi(d);return h==V||h==j||h==ot||h==xe}function w_(d){return typeof d=="number"&&d==vt(d)}function xh(d){return typeof d=="number"&&d>-1&&d%1==0&&d<=Z}function an(d){var h=typeof d;return d!=null&&(h=="object"||h=="function")}function un(d){return d!=null&&typeof d=="object"}var __=Rv?Ni(Rv):UO;function BI(d,h){return d===h||hg(d,h,Eg(h))}function FI(d,h,b){return b=typeof b=="function"?b:n,hg(d,h,Eg(h),b)}function WI(d){return C_(d)&&d!=+d}function UI(d){if(M$(d))throw new ct(s);return fw(d)}function jI(d){return d===null}function qI(d){return d==null}function C_(d){return typeof d=="number"||un(d)&&fi(d)==we}function Qc(d){if(!un(d)||fi(d)!=ge)return!1;var h=Qu(d);if(h===null)return!0;var b=Ft.call(h,"constructor")&&h.constructor;return typeof b=="function"&&b instanceof b&&Ju.call(b)==FE}var Ng=Pv?Ni(Pv):jO;function KI(d){return w_(d)&&d>=-9007199254740991&&d<=Z}var A_=Hv?Ni(Hv):qO;function Mh(d){return typeof d=="string"||!mt(d)&&un(d)&&fi(d)==Ne}function Fi(d){return typeof d=="symbol"||un(d)&&fi(d)==Me}var Il=Vv?Ni(Vv):KO;function GI(d){return d===n}function JI(d){return un(d)&&ii(d)==je}function YI(d){return un(d)&&fi(d)==bt}var ZI=bh(pg),XI=bh(function(d,h){return d<=h});function k_(d){if(!d)return[];if(Ei(d))return Mh(d)?Lo(d):Ti(d);if(Nc&&d[Nc])return OE(d[Nc]());var h=ii(d),b=h==se?tg:h==me?qu:Ll;return b(d)}function Rs(d){if(!d)return d===0?d:0;if(d=ho(d),d===q||d===-1/0){var h=d<0?-1:1;return h*N}return d===d?d:0}function vt(d){var h=Rs(d),b=h%1;return h===h?b?h-b:h:0}function S_(d){return d?Sa(vt(d),0,ce):0}function ho(d){if(typeof d=="number")return d;if(Fi(d))return le;if(an(d)){var h=typeof d.valueOf=="function"?d.valueOf():d;d=an(h)?h+"":h}if(typeof d!="string")return d===0?d:+d;d=Uv(d);var b=LT.test(d);return b||RT.test(d)?fE(d.slice(2),b?2:8):IT.test(d)?le:+d}function x_(d){return Xo(d,Oi(d))}function QI(d){return d?Sa(vt(d),-9007199254740991,Z):d===0?d:0}function zt(d){return d==null?"":Bi(d)}var eL=El(function(d,h){if(Zc(h)||Ei(h)){Xo(h,Rn(h),d);return}for(var b in h)Ft.call(h,b)&&jc(d,b,h[b])}),M_=El(function(d,h){Xo(h,Oi(h),d)}),Th=El(function(d,h,b,C){Xo(h,Oi(h),d,C)}),tL=El(function(d,h,b,C){Xo(h,Rn(h),d,C)}),nL=Is(ag);function iL(d,h){var b=Tl(d);return h==null?b:sw(b,h)}var oL=At(function(d,h){d=Ut(d);var b=-1,C=h.length,S=C>2?h[2]:n;for(S&&pi(h[0],h[1],S)&&(C=1);++b<C;)for(var O=h[b],H=Oi(O),U=-1,Y=H.length;++U<Y;){var fe=H[U],pe=d[fe];(pe===n||Ro(pe,Sl[fe])&&!Ft.call(d,fe))&&(d[fe]=O[fe])}return d}),sL=At(function(d){return d.push(n,Uw),zi(T_,n,d)});function rL(d,h){return Nv(d,Xe(h,3),Zo)}function aL(d,h){return Nv(d,Xe(h,3),cg)}function lL(d,h){return d==null?d:lg(d,Xe(h,3),Oi)}function cL(d,h){return d==null?d:dw(d,Xe(h,3),Oi)}function dL(d,h){return d&&Zo(d,Xe(h,3))}function uL(d,h){return d&&cg(d,Xe(h,3))}function hL(d){return d==null?[]:ch(d,Rn(d))}function fL(d){return d==null?[]:ch(d,Oi(d))}function Bg(d,h,b){var C=d==null?n:xa(d,h);return C===n?b:C}function pL(d,h){return d!=null&&Kw(d,h,HO)}function Fg(d,h){return d!=null&&Kw(d,h,VO)}var mL=zw(function(d,h,b){h!=null&&typeof h.toString!="function"&&(h=Yu.call(h)),d[h]=b},Ug($i)),gL=zw(function(d,h,b){h!=null&&typeof h.toString!="function"&&(h=Yu.call(h)),Ft.call(d,h)?d[h].push(b):d[h]=[b]},Xe),bL=At(Kc);function Rn(d){return Ei(d)?iw(d):fg(d)}function Oi(d){return Ei(d)?iw(d,!0):GO(d)}function yL(d,h){var b={};return h=Xe(h,3),Zo(d,function(C,S,O){Os(b,h(C,S,O),C)}),b}function vL(d,h){var b={};return h=Xe(h,3),Zo(d,function(C,S,O){Os(b,S,h(C,S,O))}),b}var wL=El(function(d,h,b){dh(d,h,b)}),T_=El(function(d,h,b,C){dh(d,h,b,C)}),_L=Is(function(d,h){var b={};if(d==null)return b;var C=!1;h=sn(h,function(O){return O=wr(O,d),C||(C=O.length>1),O}),Xo(d,Mg(d),b),C&&(b=lo(b,f|m|g,m$));for(var S=h.length;S--;)vg(b,h[S]);return b});function CL(d,h){return E_(d,Sh(Xe(h)))}var AL=Is(function(d,h){return d==null?{}:YO(d,h)});function E_(d,h){if(d==null)return{};var b=sn(Mg(d),function(C){return[C]});return h=Xe(h),ww(d,b,function(C,S){return h(C,S[0])})}function kL(d,h,b){h=wr(h,d);var C=-1,S=h.length;for(S||(S=1,d=n);++C<S;){var O=d==null?n:d[Qo(h[C])];O===n&&(C=S,O=b),d=Ds(O)?O.call(d):O}return d}function SL(d,h,b){return d==null?d:Jc(d,h,b)}function xL(d,h,b,C){return C=typeof C=="function"?C:n,d==null?d:Jc(d,h,b,C)}var O_=Fw(Rn),$_=Fw(Oi);function ML(d,h,b){var C=mt(d),S=C||Cr(d)||Il(d);if(h=Xe(h,4),b==null){var O=d&&d.constructor;S?b=C?new O:[]:an(d)?b=Ds(O)?Tl(Qu(d)):{}:b={}}return(S?so:Zo)(d,function(H,U,Y){return h(b,H,U,Y)}),b}function TL(d,h){return d==null?!0:vg(d,h)}function EL(d,h,b){return d==null?d:Sw(d,h,Cg(b))}function OL(d,h,b,C){return C=typeof C=="function"?C:n,d==null?d:Sw(d,h,Cg(b),C)}function Ll(d){return d==null?[]:eg(d,Rn(d))}function $L(d){return d==null?[]:eg(d,Oi(d))}function IL(d,h,b){return b===n&&(b=h,h=n),b!==n&&(b=ho(b),b=b===b?b:0),h!==n&&(h=ho(h),h=h===h?h:0),Sa(ho(d),h,b)}function LL(d,h,b){return h=Rs(h),b===n?(b=h,h=0):b=Rs(b),d=ho(d),zO(d,h,b)}function DL(d,h,b){if(b&&typeof b!="boolean"&&pi(d,h,b)&&(h=b=n),b===n&&(typeof h=="boolean"?(b=h,h=n):typeof d=="boolean"&&(b=d,d=n)),d===n&&h===n?(d=0,h=1):(d=Rs(d),h===n?(h=d,d=0):h=Rs(h)),d>h){var C=d;d=h,h=C}if(b||d%1||h%1){var S=tw();return ni(d+S*(h-d+hE("1e-"+((S+"").length-1))),h)}return gg(d,h)}var RL=Ol(function(d,h,b){return h=h.toLowerCase(),d+(b?I_(h):h)});function I_(d){return Wg(zt(d).toLowerCase())}function L_(d){return d=zt(d),d&&d.replace(HT,SE).replace(nE,"")}function PL(d,h,b){d=zt(d),h=Bi(h);var C=d.length;b=b===n?C:Sa(vt(b),0,C);var S=b;return b-=h.length,b>=0&&d.slice(b,S)==h}function HL(d){return d=zt(d),d&&Hc.test(d)?d.replace(Pc,xE):d}function VL(d){return d=zt(d),d&&AT.test(d)?d.replace(Vm,"\\$&"):d}var zL=Ol(function(d,h,b){return d+(b?"-":"")+h.toLowerCase()}),NL=Ol(function(d,h,b){return d+(b?" ":"")+h.toLowerCase()}),BL=Pw("toLowerCase");function FL(d,h,b){d=zt(d),h=vt(h);var C=h?Al(d):0;if(!h||C>=h)return d;var S=(h-C)/2;return gh(ih(S),b)+d+gh(nh(S),b)}function WL(d,h,b){d=zt(d),h=vt(h);var C=h?Al(d):0;return h&&C<h?d+gh(h-C,b):d}function UL(d,h,b){d=zt(d),h=vt(h);var C=h?Al(d):0;return h&&C<h?gh(h-C,b)+d:d}function jL(d,h,b){return b||h==null?h=0:h&&(h=+h),XE(zt(d).replace(zm,""),h||0)}function qL(d,h,b){return(b?pi(d,h,b):h===n)?h=1:h=vt(h),bg(zt(d),h)}function KL(){var d=arguments,h=zt(d[0]);return d.length<3?h:h.replace(d[1],d[2])}var GL=Ol(function(d,h,b){return d+(b?"_":"")+h.toLowerCase()});function JL(d,h,b){return b&&typeof b!="number"&&pi(d,h,b)&&(h=b=n),b=b===n?ce:b>>>0,b?(d=zt(d),d&&(typeof h=="string"||h!=null&&!Ng(h))&&(h=Bi(h),!h&&Cl(d))?_r(Lo(d),0,b):d.split(h,b)):[]}var YL=Ol(function(d,h,b){return d+(b?" ":"")+Wg(h)});function ZL(d,h,b){return d=zt(d),b=b==null?0:Sa(vt(b),0,d.length),h=Bi(h),d.slice(b,b+h.length)==h}function XL(d,h,b){var C=T.templateSettings;b&&pi(d,h,b)&&(h=n),d=zt(d),h=Th({},h,C,Ww);var S=Th({},h.imports,C.imports,Ww),O=Rn(S),H=eg(S,O),U,Y,fe=0,pe=h.interpolate||Bu,_e="__p += '",De=ng((h.escape||Bu).source+"|"+pe.source+"|"+(pe===Nu?$T:Bu).source+"|"+(h.evaluate||Bu).source+"|$","g"),We="//# sourceURL="+(Ft.call(h,"sourceURL")?(h.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++aE+"]")+`
`;d.replace(De,function(nt,St,$t,Wi,mi,Ui){return $t||($t=Wi),_e+=d.slice(fe,Ui).replace(VT,ME),St&&(U=!0,_e+=`' +
__e(`+St+`) +
'`),mi&&(Y=!0,_e+=`';
`+mi+`;
__p += '`),$t&&(_e+=`' +
((__t = (`+$t+`)) == null ? '' : __t) +
'`),fe=Ui+nt.length,nt}),_e+=`';
`;var tt=Ft.call(h,"variable")&&h.variable;if(!tt)_e=`with (obj) {
`+_e+`
}
`;else if(ET.test(tt))throw new ct(a);_e=(Y?_e.replace(Ot,""):_e).replace(Wn,"$1").replace(Mi,"$1;"),_e="function("+(tt||"obj")+`) {
`+(tt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(U?", __e = _.escape":"")+(Y?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+_e+`return __p
}`;var wt=R_(function(){return Ht(O,We+"return "+_e).apply(n,H)});if(wt.source=_e,zg(wt))throw wt;return wt}function QL(d){return zt(d).toLowerCase()}function e6(d){return zt(d).toUpperCase()}function t6(d,h,b){if(d=zt(d),d&&(b||h===n))return Uv(d);if(!d||!(h=Bi(h)))return d;var C=Lo(d),S=Lo(h),O=jv(C,S),H=qv(C,S)+1;return _r(C,O,H).join("")}function n6(d,h,b){if(d=zt(d),d&&(b||h===n))return d.slice(0,Gv(d)+1);if(!d||!(h=Bi(h)))return d;var C=Lo(d),S=qv(C,Lo(h))+1;return _r(C,0,S).join("")}function i6(d,h,b){if(d=zt(d),d&&(b||h===n))return d.replace(zm,"");if(!d||!(h=Bi(h)))return d;var C=Lo(d),S=jv(C,Lo(h));return _r(C,S).join("")}function o6(d,h){var b=ae,C=B;if(an(h)){var S="separator"in h?h.separator:S;b="length"in h?vt(h.length):b,C="omission"in h?Bi(h.omission):C}d=zt(d);var O=d.length;if(Cl(d)){var H=Lo(d);O=H.length}if(b>=O)return d;var U=b-Al(C);if(U<1)return C;var Y=H?_r(H,0,U).join(""):d.slice(0,U);if(S===n)return Y+C;if(H&&(U+=Y.length-U),Ng(S)){if(d.slice(U).search(S)){var fe,pe=Y;for(S.global||(S=ng(S.source,zt(hv.exec(S))+"g")),S.lastIndex=0;fe=S.exec(pe);)var _e=fe.index;Y=Y.slice(0,_e===n?U:_e)}}else if(d.indexOf(Bi(S),U)!=U){var De=Y.lastIndexOf(S);De>-1&&(Y=Y.slice(0,De))}return Y+C}function s6(d){return d=zt(d),d&&Ms.test(d)?d.replace(xs,DE):d}var r6=Ol(function(d,h,b){return d+(b?" ":"")+h.toUpperCase()}),Wg=Pw("toUpperCase");function D_(d,h,b){return d=zt(d),h=b?n:h,h===n?EE(d)?HE(d):wE(d):d.match(h)||[]}var R_=At(function(d,h){try{return zi(d,n,h)}catch(b){return zg(b)?b:new ct(b)}}),a6=Is(function(d,h){return so(h,function(b){b=Qo(b),Os(d,b,Hg(d[b],d))}),d});function l6(d){var h=d==null?0:d.length,b=Xe();return d=h?sn(d,function(C){if(typeof C[1]!="function")throw new ro(r);return[b(C[0]),C[1]]}):[],At(function(C){for(var S=-1;++S<h;){var O=d[S];if(zi(O[0],this,C))return zi(O[1],this,C)}})}function c6(d){return DO(lo(d,f))}function Ug(d){return function(){return d}}function d6(d,h){return d==null||d!==d?h:d}var u6=Vw(),h6=Vw(!0);function $i(d){return d}function jg(d){return pw(typeof d=="function"?d:lo(d,f))}function f6(d){return gw(lo(d,f))}function p6(d,h){return bw(d,lo(h,f))}var m6=At(function(d,h){return function(b){return Kc(b,d,h)}}),g6=At(function(d,h){return function(b){return Kc(d,b,h)}});function qg(d,h,b){var C=Rn(h),S=ch(h,C);b==null&&!(an(h)&&(S.length||!C.length))&&(b=h,h=d,d=this,S=ch(h,Rn(h)));var O=!(an(b)&&"chain"in b)||!!b.chain,H=Ds(d);return so(S,function(U){var Y=h[U];d[U]=Y,H&&(d.prototype[U]=function(){var fe=this.__chain__;if(O||fe){var pe=d(this.__wrapped__),_e=pe.__actions__=Ti(this.__actions__);return _e.push({func:Y,args:arguments,thisArg:d}),pe.__chain__=fe,pe}return Y.apply(d,mr([this.value()],arguments))})}),d}function b6(){return Un._===this&&(Un._=WE),this}function Kg(){}function y6(d){return d=vt(d),At(function(h){return yw(h,d)})}var v6=kg(sn),w6=kg(zv),_6=kg(Jm);function P_(d){return $g(d)?Ym(Qo(d)):ZO(d)}function C6(d){return function(h){return d==null?n:xa(d,h)}}var A6=Nw(),k6=Nw(!0);function Gg(){return[]}function Jg(){return!1}function S6(){return{}}function x6(){return""}function M6(){return!0}function T6(d,h){if(d=vt(d),d<1||d>Z)return[];var b=ce,C=ni(d,ce);h=Xe(h),d-=ce;for(var S=Qm(C,h);++b<d;)h(b);return S}function E6(d){return mt(d)?sn(d,Qo):Fi(d)?[d]:Ti(n_(zt(d)))}function O6(d){var h=++BE;return zt(d)+h}var $6=mh(function(d,h){return d+h},0),I6=Sg("ceil"),L6=mh(function(d,h){return d/h},1),D6=Sg("floor");function R6(d){return d&&d.length?lh(d,$i,dg):n}function P6(d,h){return d&&d.length?lh(d,Xe(h,2),dg):n}function H6(d){return Fv(d,$i)}function V6(d,h){return Fv(d,Xe(h,2))}function z6(d){return d&&d.length?lh(d,$i,pg):n}function N6(d,h){return d&&d.length?lh(d,Xe(h,2),pg):n}var B6=mh(function(d,h){return d*h},1),F6=Sg("round"),W6=mh(function(d,h){return d-h},0);function U6(d){return d&&d.length?Xm(d,$i):0}function j6(d,h){return d&&d.length?Xm(d,Xe(h,2)):0}return T.after=fI,T.ary=f_,T.assign=eL,T.assignIn=M_,T.assignInWith=Th,T.assignWith=tL,T.at=nL,T.before=p_,T.bind=Hg,T.bindAll=a6,T.bindKey=m_,T.castArray=SI,T.chain=d_,T.chunk=D$,T.compact=R$,T.concat=P$,T.cond=l6,T.conforms=c6,T.constant=Ug,T.countBy=U8,T.create=iL,T.curry=g_,T.curryRight=b_,T.debounce=y_,T.defaults=oL,T.defaultsDeep=sL,T.defer=pI,T.delay=mI,T.difference=H$,T.differenceBy=V$,T.differenceWith=z$,T.drop=N$,T.dropRight=B$,T.dropRightWhile=F$,T.dropWhile=W$,T.fill=U$,T.filter=q8,T.flatMap=J8,T.flatMapDeep=Y8,T.flatMapDepth=Z8,T.flatten=r_,T.flattenDeep=j$,T.flattenDepth=q$,T.flip=gI,T.flow=u6,T.flowRight=h6,T.fromPairs=K$,T.functions=hL,T.functionsIn=fL,T.groupBy=X8,T.initial=J$,T.intersection=Y$,T.intersectionBy=Z$,T.intersectionWith=X$,T.invert=mL,T.invertBy=gL,T.invokeMap=eI,T.iteratee=jg,T.keyBy=tI,T.keys=Rn,T.keysIn=Oi,T.map=Ch,T.mapKeys=yL,T.mapValues=vL,T.matches=f6,T.matchesProperty=p6,T.memoize=kh,T.merge=wL,T.mergeWith=T_,T.method=m6,T.methodOf=g6,T.mixin=qg,T.negate=Sh,T.nthArg=y6,T.omit=_L,T.omitBy=CL,T.once=bI,T.orderBy=nI,T.over=v6,T.overArgs=yI,T.overEvery=w6,T.overSome=_6,T.partial=Vg,T.partialRight=v_,T.partition=iI,T.pick=AL,T.pickBy=E_,T.property=P_,T.propertyOf=C6,T.pull=n8,T.pullAll=l_,T.pullAllBy=i8,T.pullAllWith=o8,T.pullAt=s8,T.range=A6,T.rangeRight=k6,T.rearg=vI,T.reject=rI,T.remove=r8,T.rest=wI,T.reverse=Rg,T.sampleSize=lI,T.set=SL,T.setWith=xL,T.shuffle=cI,T.slice=a8,T.sortBy=hI,T.sortedUniq=p8,T.sortedUniqBy=m8,T.split=JL,T.spread=_I,T.tail=g8,T.take=b8,T.takeRight=y8,T.takeRightWhile=v8,T.takeWhile=w8,T.tap=R8,T.throttle=CI,T.thru=_h,T.toArray=k_,T.toPairs=O_,T.toPairsIn=$_,T.toPath=E6,T.toPlainObject=x_,T.transform=ML,T.unary=AI,T.union=_8,T.unionBy=C8,T.unionWith=A8,T.uniq=k8,T.uniqBy=S8,T.uniqWith=x8,T.unset=TL,T.unzip=Pg,T.unzipWith=c_,T.update=EL,T.updateWith=OL,T.values=Ll,T.valuesIn=$L,T.without=M8,T.words=D_,T.wrap=kI,T.xor=T8,T.xorBy=E8,T.xorWith=O8,T.zip=$8,T.zipObject=I8,T.zipObjectDeep=L8,T.zipWith=D8,T.entries=O_,T.entriesIn=$_,T.extend=M_,T.extendWith=Th,qg(T,T),T.add=$6,T.attempt=R_,T.camelCase=RL,T.capitalize=I_,T.ceil=I6,T.clamp=IL,T.clone=xI,T.cloneDeep=TI,T.cloneDeepWith=EI,T.cloneWith=MI,T.conformsTo=OI,T.deburr=L_,T.defaultTo=d6,T.divide=L6,T.endsWith=PL,T.eq=Ro,T.escape=HL,T.escapeRegExp=VL,T.every=j8,T.find=K8,T.findIndex=o_,T.findKey=rL,T.findLast=G8,T.findLastIndex=s_,T.findLastKey=aL,T.floor=D6,T.forEach=u_,T.forEachRight=h_,T.forIn=lL,T.forInRight=cL,T.forOwn=dL,T.forOwnRight=uL,T.get=Bg,T.gt=$I,T.gte=II,T.has=pL,T.hasIn=Fg,T.head=a_,T.identity=$i,T.includes=Q8,T.indexOf=G$,T.inRange=LL,T.invoke=bL,T.isArguments=Ea,T.isArray=mt,T.isArrayBuffer=LI,T.isArrayLike=Ei,T.isArrayLikeObject=yn,T.isBoolean=DI,T.isBuffer=Cr,T.isDate=RI,T.isElement=PI,T.isEmpty=HI,T.isEqual=VI,T.isEqualWith=zI,T.isError=zg,T.isFinite=NI,T.isFunction=Ds,T.isInteger=w_,T.isLength=xh,T.isMap=__,T.isMatch=BI,T.isMatchWith=FI,T.isNaN=WI,T.isNative=UI,T.isNil=qI,T.isNull=jI,T.isNumber=C_,T.isObject=an,T.isObjectLike=un,T.isPlainObject=Qc,T.isRegExp=Ng,T.isSafeInteger=KI,T.isSet=A_,T.isString=Mh,T.isSymbol=Fi,T.isTypedArray=Il,T.isUndefined=GI,T.isWeakMap=JI,T.isWeakSet=YI,T.join=Q$,T.kebabCase=zL,T.last=uo,T.lastIndexOf=e8,T.lowerCase=NL,T.lowerFirst=BL,T.lt=ZI,T.lte=XI,T.max=R6,T.maxBy=P6,T.mean=H6,T.meanBy=V6,T.min=z6,T.minBy=N6,T.stubArray=Gg,T.stubFalse=Jg,T.stubObject=S6,T.stubString=x6,T.stubTrue=M6,T.multiply=B6,T.nth=t8,T.noConflict=b6,T.noop=Kg,T.now=Ah,T.pad=FL,T.padEnd=WL,T.padStart=UL,T.parseInt=jL,T.random=DL,T.reduce=oI,T.reduceRight=sI,T.repeat=qL,T.replace=KL,T.result=kL,T.round=F6,T.runInContext=G,T.sample=aI,T.size=dI,T.snakeCase=GL,T.some=uI,T.sortedIndex=l8,T.sortedIndexBy=c8,T.sortedIndexOf=d8,T.sortedLastIndex=u8,T.sortedLastIndexBy=h8,T.sortedLastIndexOf=f8,T.startCase=YL,T.startsWith=ZL,T.subtract=W6,T.sum=U6,T.sumBy=j6,T.template=XL,T.times=T6,T.toFinite=Rs,T.toInteger=vt,T.toLength=S_,T.toLower=QL,T.toNumber=ho,T.toSafeInteger=QI,T.toString=zt,T.toUpper=e6,T.trim=t6,T.trimEnd=n6,T.trimStart=i6,T.truncate=o6,T.unescape=s6,T.uniqueId=O6,T.upperCase=r6,T.upperFirst=Wg,T.each=u_,T.eachRight=h_,T.first=a_,qg(T,function(){var d={};return Zo(T,function(h,b){Ft.call(T.prototype,b)||(d[b]=h)}),d}(),{chain:!1}),T.VERSION=i,so(["bind","bindKey","curry","curryRight","partial","partialRight"],function(d){T[d].placeholder=T}),so(["drop","take"],function(d,h){Mt.prototype[d]=function(b){b=b===n?1:En(vt(b),0);var C=this.__filtered__&&!h?new Mt(this):this.clone();return C.__filtered__?C.__takeCount__=ni(b,C.__takeCount__):C.__views__.push({size:ni(b,ce),type:d+(C.__dir__<0?"Right":"")}),C},Mt.prototype[d+"Right"]=function(b){return this.reverse()[d](b).reverse()}}),so(["filter","map","takeWhile"],function(d,h){var b=h+1,C=b==ne||b==W;Mt.prototype[d]=function(S){var O=this.clone();return O.__iteratees__.push({iteratee:Xe(S,3),type:b}),O.__filtered__=O.__filtered__||C,O}}),so(["head","last"],function(d,h){var b="take"+(h?"Right":"");Mt.prototype[d]=function(){return this[b](1).value()[0]}}),so(["initial","tail"],function(d,h){var b="drop"+(h?"":"Right");Mt.prototype[d]=function(){return this.__filtered__?new Mt(this):this[b](1)}}),Mt.prototype.compact=function(){return this.filter($i)},Mt.prototype.find=function(d){return this.filter(d).head()},Mt.prototype.findLast=function(d){return this.reverse().find(d)},Mt.prototype.invokeMap=At(function(d,h){return typeof d=="function"?new Mt(this):this.map(function(b){return Kc(b,d,h)})}),Mt.prototype.reject=function(d){return this.filter(Sh(Xe(d)))},Mt.prototype.slice=function(d,h){d=vt(d);var b=this;return b.__filtered__&&(d>0||h<0)?new Mt(b):(d<0?b=b.takeRight(-d):d&&(b=b.drop(d)),h!==n&&(h=vt(h),b=h<0?b.dropRight(-h):b.take(h-d)),b)},Mt.prototype.takeRightWhile=function(d){return this.reverse().takeWhile(d).reverse()},Mt.prototype.toArray=function(){return this.take(ce)},Zo(Mt.prototype,function(d,h){var b=/^(?:filter|find|map|reject)|While$/.test(h),C=/^(?:head|last)$/.test(h),S=T[C?"take"+(h=="last"?"Right":""):h],O=C||/^find/.test(h);S&&(T.prototype[h]=function(){var H=this.__wrapped__,U=C?[1]:arguments,Y=H instanceof Mt,fe=U[0],pe=Y||mt(H),_e=function(St){var $t=S.apply(T,mr([St],U));return C&&De?$t[0]:$t};pe&&b&&typeof fe=="function"&&fe.length!=1&&(Y=pe=!1);var De=this.__chain__,We=!!this.__actions__.length,tt=O&&!De,wt=Y&&!We;if(!O&&pe){H=wt?H:new Mt(this);var nt=d.apply(H,U);return nt.__actions__.push({func:_h,args:[_e],thisArg:n}),new ao(nt,De)}return tt&&wt?d.apply(this,U):(nt=this.thru(_e),tt?C?nt.value()[0]:nt.value():nt)})}),so(["pop","push","shift","sort","splice","unshift"],function(d){var h=Ku[d],b=/^(?:push|sort|unshift)$/.test(d)?"tap":"thru",C=/^(?:pop|shift)$/.test(d);T.prototype[d]=function(){var S=arguments;if(C&&!this.__chain__){var O=this.value();return h.apply(mt(O)?O:[],S)}return this[b](function(H){return h.apply(mt(H)?H:[],S)})}}),Zo(Mt.prototype,function(d,h){var b=T[h];if(b){var C=b.name+"";Ft.call(Ml,C)||(Ml[C]=[]),Ml[C].push({name:h,func:b})}}),Ml[ph(n,k).name]=[{name:"wrapper",func:n}],Mt.prototype.clone=sO,Mt.prototype.reverse=rO,Mt.prototype.value=aO,T.prototype.at=P8,T.prototype.chain=H8,T.prototype.commit=V8,T.prototype.next=z8,T.prototype.plant=B8,T.prototype.reverse=F8,T.prototype.toJSON=T.prototype.valueOf=T.prototype.value=W8,T.prototype.first=T.prototype.head,Nc&&(T.prototype[Nc]=N8),T},kl=VE();_a?((_a.exports=kl)._=kl,jm._=kl):Un._=kl}).call(wi)})(qf,qf.exports);var ol=qf.exports;function ko(e,t,n,i={}){if(!t)return!!n;if(!n)return!!t;if(i.differences){const o=[];return e.forEach(s=>{wb(s,t[s.name],n[s.name])&&o.push(s.name)}),o}else return e.some(o=>wb(o,t[o.name],n[o.name]))}function wb(e,t,n){if(e.type==="relationshipReverse"||(e.type==="relationship"?(t=o(t),n=o(n)):(t=i(t),n=i(n)),ol.isEqual(t,n)))return!1;return!t&&!n?t===!1&&n!==!1||t!==!1&&n===!1:!(!t&&Array.isArray(n)&&n.length===0);function i(s){if(s!=null&&typeof s=="object"){const r={};for(const[a,l]of Object.entries(s))if(a==="_docId")r._docId=s._docId==null?null:s._docId.replace(/:.*$/,"");else if(a==="_id")r._id=s._id.replace(/:[\w-]+:[\w]+$/,"");else if(a.substring(0,1)==="_")if(Array.isArray(s[a]))r[a]=o(s[a]);else continue;else r[a]=i(l);return r}return s}function o(s){return Array.isArray(s)?s.map(r=>({_id:r._id.replace(/:[\w-]+:[\w]+$/,""),_fields:i(r._fields)})):[]}}var z3={};function Fs(e){if(typeof e!="object")return e;var t,n,i=Object.prototype.toString.call(e);if(i==="[object Object]"){if(e.constructor!==Object&&typeof e.constructor=="function"){n=new e.constructor;for(t in e)e.hasOwnProperty(t)&&n[t]!==e[t]&&(n[t]=Fs(e[t]))}else{n={};for(t in e)t==="__proto__"?Object.defineProperty(n,t,{value:Fs(e[t]),configurable:!0,enumerable:!0,writable:!0}):n[t]=Fs(e[t])}return n}if(i==="[object Array]"){for(t=e.length,n=Array(t);t--;)n[t]=Fs(e[t]);return n}return i==="[object Set]"?(n=new Set,e.forEach(function(o){n.add(Fs(o))}),n):i==="[object Map]"?(n=new Map,e.forEach(function(o,s){n.set(Fs(s),Fs(o))}),n):i==="[object Date]"?new Date(+e):i==="[object RegExp]"?(n=new RegExp(e.source,e.flags),n.lastIndex=e.lastIndex,n):i==="[object DataView]"?new e.constructor(Fs(e.buffer)):i==="[object ArrayBuffer]"?e.slice(0):i.slice(-6)==="Array]"?new e.constructor(e):e}z3.klona=Fs;var xu={},pa={},nn={},ht={};Object.defineProperty(ht,"__esModule",{value:!0});ht.toBig=ht.shrSL=ht.shrSH=ht.rotrSL=ht.rotrSH=ht.rotrBL=ht.rotrBH=ht.rotr32L=ht.rotr32H=ht.rotlSL=ht.rotlSH=ht.rotlBL=ht.rotlBH=ht.add5L=ht.add5H=ht.add4L=ht.add4H=ht.add3L=ht.add3H=void 0;ht.add=e4;ht.fromBig=Yy;ht.split=N3;const Ph=BigInt(2**32-1),_b=BigInt(32);function Yy(e,t=!1){return t?{h:Number(e&Ph),l:Number(e>>_b&Ph)}:{h:Number(e>>_b&Ph)|0,l:Number(e&Ph)|0}}function N3(e,t=!1){const n=e.length;let i=new Uint32Array(n),o=new Uint32Array(n);for(let s=0;s<n;s++){const{h:r,l:a}=Yy(e[s],t);[i[s],o[s]]=[r,a]}return[i,o]}const B3=(e,t)=>BigInt(e>>>0)<<_b|BigInt(t>>>0);ht.toBig=B3;const F3=(e,t,n)=>e>>>n;ht.shrSH=F3;const W3=(e,t,n)=>e<<32-n|t>>>n;ht.shrSL=W3;const U3=(e,t,n)=>e>>>n|t<<32-n;ht.rotrSH=U3;const j3=(e,t,n)=>e<<32-n|t>>>n;ht.rotrSL=j3;const q3=(e,t,n)=>e<<64-n|t>>>n-32;ht.rotrBH=q3;const K3=(e,t,n)=>e>>>n-32|t<<64-n;ht.rotrBL=K3;const G3=(e,t)=>t;ht.rotr32H=G3;const J3=(e,t)=>e;ht.rotr32L=J3;const Y3=(e,t,n)=>e<<n|t>>>32-n;ht.rotlSH=Y3;const Z3=(e,t,n)=>t<<n|e>>>32-n;ht.rotlSL=Z3;const X3=(e,t,n)=>t<<n-32|e>>>64-n;ht.rotlBH=X3;const Q3=(e,t,n)=>e<<n-32|t>>>64-n;ht.rotlBL=Q3;function e4(e,t,n,i){const o=(t>>>0)+(i>>>0);return{h:e+n+(o/2**32|0)|0,l:o|0}}const t4=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0);ht.add3L=t4;const n4=(e,t,n,i)=>t+n+i+(e/2**32|0)|0;ht.add3H=n4;const i4=(e,t,n,i)=>(e>>>0)+(t>>>0)+(n>>>0)+(i>>>0);ht.add4L=i4;const o4=(e,t,n,i,o)=>t+n+i+o+(e/2**32|0)|0;ht.add4H=o4;const s4=(e,t,n,i,o)=>(e>>>0)+(t>>>0)+(n>>>0)+(i>>>0)+(o>>>0);ht.add5L=s4;const r4=(e,t,n,i,o,s)=>t+n+i+o+s+(e/2**32|0)|0;ht.add5H=r4;const yee={fromBig:Yy,split:N3,toBig:B3,shrSH:F3,shrSL:W3,rotrSH:U3,rotrSL:j3,rotrBH:q3,rotrBL:K3,rotr32H:G3,rotr32L:J3,rotlSH:Y3,rotlSL:Z3,rotlBH:X3,rotlBL:Q3,add:e4,add3L:t4,add3H:n4,add4L:i4,add4H:o4,add5H:r4,add5L:s4};ht.default=yee;var a4={},lm={};Object.defineProperty(lm,"__esModule",{value:!0});lm.crypto=void 0;lm.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;(function(e){/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(e,"__esModule",{value:!0}),e.wrapXOFConstructorWithOpts=e.wrapConstructorWithOpts=e.wrapConstructor=e.Hash=e.nextTick=e.swap32IfBE=e.byteSwapIfBE=e.swap8IfBE=e.isLE=void 0,e.isBytes=n,e.anumber=i,e.abytes=o,e.ahash=s,e.aexists=r,e.aoutput=a,e.u8=l,e.u32=c,e.clean=u,e.createView=f,e.rotr=m,e.rotl=g,e.byteSwap=v,e.byteSwap32=w,e.bytesToHex=L,e.hexToBytes=F,e.asyncLoop=ee,e.utf8ToBytes=ie,e.bytesToUtf8=K,e.toBytes=ae,e.kdfInputToBytes=B,e.concatBytes=J,e.checkOpts=he,e.createHasher=oe,e.createOptHasher=W,e.createXOFer=q,e.randomBytes=Z;const t=lm;function n(N){return N instanceof Uint8Array||ArrayBuffer.isView(N)&&N.constructor.name==="Uint8Array"}function i(N){if(!Number.isSafeInteger(N)||N<0)throw new Error("positive integer expected, got "+N)}function o(N,...le){if(!n(N))throw new Error("Uint8Array expected");if(le.length>0&&!le.includes(N.length))throw new Error("Uint8Array expected of length "+le+", got length="+N.length)}function s(N){if(typeof N!="function"||typeof N.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");i(N.outputLen),i(N.blockLen)}function r(N,le=!0){if(N.destroyed)throw new Error("Hash instance has been destroyed");if(le&&N.finished)throw new Error("Hash#digest() has already been called")}function a(N,le){o(N);const ce=le.outputLen;if(N.length<ce)throw new Error("digestInto() expects output buffer of length at least "+ce)}function l(N){return new Uint8Array(N.buffer,N.byteOffset,N.byteLength)}function c(N){return new Uint32Array(N.buffer,N.byteOffset,Math.floor(N.byteLength/4))}function u(...N){for(let le=0;le<N.length;le++)N[le].fill(0)}function f(N){return new DataView(N.buffer,N.byteOffset,N.byteLength)}function m(N,le){return N<<32-le|N>>>le}function g(N,le){return N<<le|N>>>32-le>>>0}e.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function v(N){return N<<24&4278190080|N<<8&16711680|N>>>8&65280|N>>>24&255}e.swap8IfBE=e.isLE?N=>N:N=>v(N),e.byteSwapIfBE=e.swap8IfBE;function w(N){for(let le=0;le<N.length;le++)N[le]=v(N[le]);return N}e.swap32IfBE=e.isLE?N=>N:w;const _=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",k=Array.from({length:256},(N,le)=>le.toString(16).padStart(2,"0"));function L(N){if(o(N),_)return N.toHex();let le="";for(let ce=0;ce<N.length;ce++)le+=k[N[ce]];return le}const P={_0:48,_9:57,A:65,F:70,a:97,f:102};function M(N){if(N>=P._0&&N<=P._9)return N-P._0;if(N>=P.A&&N<=P.F)return N-(P.A-10);if(N>=P.a&&N<=P.f)return N-(P.a-10)}function F(N){if(typeof N!="string")throw new Error("hex string expected, got "+typeof N);if(_)return Uint8Array.fromHex(N);const le=N.length,ce=le/2;if(le%2)throw new Error("hex string expected, got unpadded hex of length "+le);const ye=new Uint8Array(ce);for(let Le=0,Re=0;Le<ce;Le++,Re+=2){const Se=M(N.charCodeAt(Re)),He=M(N.charCodeAt(Re+1));if(Se===void 0||He===void 0){const ot=N[Re]+N[Re+1];throw new Error('hex string expected, got non-hex character "'+ot+'" at index '+Re)}ye[Le]=Se*16+He}return ye}const z=async()=>{};e.nextTick=z;async function ee(N,le,ce){let ye=Date.now();for(let Le=0;Le<N;Le++){ce(Le);const Re=Date.now()-ye;Re>=0&&Re<le||(await(0,e.nextTick)(),ye+=Re)}}function ie(N){if(typeof N!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(N))}function K(N){return new TextDecoder().decode(N)}function ae(N){return typeof N=="string"&&(N=ie(N)),o(N),N}function B(N){return typeof N=="string"&&(N=ie(N)),o(N),N}function J(...N){let le=0;for(let ye=0;ye<N.length;ye++){const Le=N[ye];o(Le),le+=Le.length}const ce=new Uint8Array(le);for(let ye=0,Le=0;ye<N.length;ye++){const Re=N[ye];ce.set(Re,Le),Le+=Re.length}return ce}function he(N,le){if(le!==void 0&&{}.toString.call(le)!=="[object Object]")throw new Error("options should be object or undefined");return Object.assign(N,le)}class ne{}e.Hash=ne;function oe(N){const le=ye=>N().update(ae(ye)).digest(),ce=N();return le.outputLen=ce.outputLen,le.blockLen=ce.blockLen,le.create=()=>N(),le}function W(N){const le=(ye,Le)=>N(Le).update(ae(ye)).digest(),ce=N({});return le.outputLen=ce.outputLen,le.blockLen=ce.blockLen,le.create=ye=>N(ye),le}function q(N){const le=(ye,Le)=>N(Le).update(ae(ye)).digest(),ce=N({});return le.outputLen=ce.outputLen,le.blockLen=ce.blockLen,le.create=ye=>N(ye),le}e.wrapConstructor=oe,e.wrapConstructorWithOpts=W,e.wrapXOFConstructorWithOpts=q;function Z(N=32){if(t.crypto&&typeof t.crypto.getRandomValues=="function")return t.crypto.getRandomValues(new Uint8Array(N));if(t.crypto&&typeof t.crypto.randomBytes=="function")return Uint8Array.from(t.crypto.randomBytes(N));throw new Error("crypto.getRandomValues must be defined")}})(a4);Object.defineProperty(nn,"__esModule",{value:!0});nn.shake256=nn.shake128=nn.keccak_512=nn.keccak_384=nn.keccak_256=nn.keccak_224=nn.sha3_512=nn.sha3_384=nn.sha3_256=nn.sha3_224=nn.Keccak=void 0;nn.keccakP=h4;const tu=ht,si=a4,vee=BigInt(0),od=BigInt(1),wee=BigInt(2),_ee=BigInt(7),Cee=BigInt(256),Aee=BigInt(113),l4=[],c4=[],d4=[];for(let e=0,t=od,n=1,i=0;e<24;e++){[n,i]=[i,(2*n+3*i)%5],l4.push(2*(5*i+n)),c4.push((e+1)*(e+2)/2%64);let o=vee;for(let s=0;s<7;s++)t=(t<<od^(t>>_ee)*Aee)%Cee,t&wee&&(o^=od<<(od<<BigInt(s))-od);d4.push(o)}const u4=(0,tu.split)(d4,!0),kee=u4[0],See=u4[1],S2=(e,t,n)=>n>32?(0,tu.rotlBH)(e,t,n):(0,tu.rotlSH)(e,t,n),x2=(e,t,n)=>n>32?(0,tu.rotlBL)(e,t,n):(0,tu.rotlSL)(e,t,n);function h4(e,t=24){const n=new Uint32Array(10);for(let i=24-t;i<24;i++){for(let r=0;r<10;r++)n[r]=e[r]^e[r+10]^e[r+20]^e[r+30]^e[r+40];for(let r=0;r<10;r+=2){const a=(r+8)%10,l=(r+2)%10,c=n[l],u=n[l+1],f=S2(c,u,1)^n[a],m=x2(c,u,1)^n[a+1];for(let g=0;g<50;g+=10)e[r+g]^=f,e[r+g+1]^=m}let o=e[2],s=e[3];for(let r=0;r<24;r++){const a=c4[r],l=S2(o,s,a),c=x2(o,s,a),u=l4[r];o=e[u],s=e[u+1],e[u]=l,e[u+1]=c}for(let r=0;r<50;r+=10){for(let a=0;a<10;a++)n[a]=e[r+a];for(let a=0;a<10;a++)e[r+a]^=~n[(a+2)%10]&n[(a+4)%10]}e[0]^=kee[i],e[1]^=See[i]}(0,si.clean)(n)}class Mu extends si.Hash{constructor(t,n,i,o=!1,s=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=t,this.suffix=n,this.outputLen=i,this.enableXOF=o,this.rounds=s,(0,si.anumber)(i),!(0<t&&t<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=(0,si.u32)(this.state)}clone(){return this._cloneInto()}keccak(){(0,si.swap32IfBE)(this.state32),h4(this.state32,this.rounds),(0,si.swap32IfBE)(this.state32),this.posOut=0,this.pos=0}update(t){(0,si.aexists)(this),t=(0,si.toBytes)(t),(0,si.abytes)(t);const{blockLen:n,state:i}=this,o=t.length;for(let s=0;s<o;){const r=Math.min(n-this.pos,o-s);for(let a=0;a<r;a++)i[this.pos++]^=t[s++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:n,pos:i,blockLen:o}=this;t[i]^=n,n&128&&i===o-1&&this.keccak(),t[o-1]^=128,this.keccak()}writeInto(t){(0,si.aexists)(this,!1),(0,si.abytes)(t),this.finish();const n=this.state,{blockLen:i}=this;for(let o=0,s=t.length;o<s;){this.posOut>=i&&this.keccak();const r=Math.min(i-this.posOut,s-o);t.set(n.subarray(this.posOut,this.posOut+r),o),this.posOut+=r,o+=r}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return(0,si.anumber)(t),this.xofInto(new Uint8Array(t))}digestInto(t){if((0,si.aoutput)(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,(0,si.clean)(this.state)}_cloneInto(t){const{blockLen:n,suffix:i,outputLen:o,rounds:s,enableXOF:r}=this;return t||(t=new Mu(n,i,o,r,s)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=s,t.suffix=i,t.outputLen=o,t.enableXOF=r,t.destroyed=this.destroyed,t}}nn.Keccak=Mu;const ma=(e,t,n)=>(0,si.createHasher)(()=>new Mu(t,e,n));nn.sha3_224=ma(6,144,224/8);nn.sha3_256=ma(6,136,256/8);nn.sha3_384=ma(6,104,384/8);nn.sha3_512=ma(6,72,512/8);nn.keccak_224=ma(1,144,224/8);nn.keccak_256=ma(1,136,256/8);nn.keccak_384=ma(1,104,384/8);nn.keccak_512=ma(1,72,512/8);const f4=(e,t,n)=>(0,si.createXOFer)((i={})=>new Mu(t,e,i.dkLen===void 0?n:i.dkLen,!0));nn.shake128=f4(31,168,128/8);nn.shake256=f4(31,136,256/8);const{sha3_512:xee}=nn,p4=24,xd=32,Cb=(e=4,t=Math.random)=>{let n="";for(;n.length<e;)n=n+Math.floor(t()*36).toString(36);return n};function m4(e){let t=8n,n=0n;for(const i of e.values()){const o=BigInt(i);n=(n<<t)+o}return n}const g4=(e="")=>m4(xee(e)).toString(36).slice(1),M2=Array.from({length:26},(e,t)=>String.fromCharCode(t+97)),Mee=e=>M2[Math.floor(e()*M2.length)],b4=({globalObj:e=typeof wi<"u"?wi:typeof window<"u"?window:{},random:t=Math.random}={})=>{const n=Object.keys(e).toString(),i=n.length?n+Cb(xd,t):Cb(xd,t);return g4(i).substring(0,xd)},y4=e=>()=>e++,Tee=476782367,v4=({random:e=Math.random,counter:t=y4(Math.floor(e()*Tee)),length:n=p4,fingerprint:i=b4({random:e})}={})=>function(){const s=Mee(e),r=Date.now().toString(36),a=t().toString(36),l=Cb(n,e),c=`${r+l+a+i}`;return`${s+g4(c).substring(1,n)}`},Eee=v4(),Oee=(e,{minLength:t=2,maxLength:n=xd}={})=>{const i=e.length,o=/^[0-9a-z]+$/;try{if(typeof e=="string"&&i>=t&&i<=n&&o.test(e))return!0}finally{}return!1};pa.getConstants=()=>({defaultLength:p4,bigLength:xd});pa.init=v4;pa.createId=Eee;pa.bufToBigInt=m4;pa.createCounter=y4;pa.createFingerprint=b4;pa.isCuid=Oee;const{createId:$ee,init:Iee,getConstants:Lee,isCuid:Dee}=pa;xu.createId=$ee;xu.init=Iee;xu.getConstants=Lee;xu.isCuid=Dee;const{klona:Ree}=z3,{createId:Pee}=xu;var Hee=w4;function w4(e){const t={};for(const n of e)n.def!==void 0?t[n.name]=Ree(n.def):t[n.name]=null,n.type==="area"&&!t[n.name]&&(t[n.name]={metaType:"area",items:[],_id:Pee()}),n.type==="object"&&(!t[n.name]||Object.keys(t[n.name]).length===0)&&(t[n.name]=w4(n.schema));return t}const $c=Mc(Hee),Vee={name:"AposArrayEditor",mixins:[ks,lr],props:{items:{required:!0,type:Array},meta:{type:Object,default:()=>({})},field:{required:!0,type:Object},inputSchema:{type:Array,required:!0},serverError:{type:Object,default:null},docId:{type:String,default:null}},emits:["modal-result"],data(){const e=this.items.map(t=>({...t,_id:t._id||qt()}));return{currentId:null,currentDoc:{data:{}},modal:{active:!1,type:"overlay",showModal:!1,triggerFocusRefresh:0},modalTitle:{key:"apostrophe:editType",type:this.$t(this.field.label)},titleFieldChoices:null,next:at(e),original:at(e),triggerValidation:!1,minError:!1,maxError:!1,cancelDescription:"apostrophe:arrayCancelDescription"}},computed:{moduleOptions(){return window.apos.schema||{}},itemError(){return this.currentDoc&&this.currentDoc.hasErrors},valid(){return!(this.minError||this.maxError||this.itemError)},maxed(){return this.field.max!==void 0&&this.next.length>=this.field.max},schema(){return(this.inputSchema||this.field.schema||[]).filter(e=>apos.schema.components.fields[e.type])},countLabel(){return this.$t("apostrophe:numberAdded",{count:this.next.length})},minLabel(){return this.effectiveMin?this.$t("apostrophe:minUi",{number:this.effectiveMin}):!1},maxLabel(){return typeof this.field.max=="number"?this.$t("apostrophe:maxUi",{number:this.field.max}):!1},effectiveMin(){return this.field.min?this.field.min:this.field.required?1:0},currentDocServerErrors(){let e=null;return(this.serverError&&this.serverError.data&&this.serverError.data.errors||[]).forEach(t=>{const[n,i]=t.path.split(".");n===this.currentId&&(e=e||{},e[i]=t)}),e},currentDocMeta(){var e;return((e=this.meta[this.currentId])==null?void 0:e.aposMeta)||{}},isModified(){if(this.currentId){const e=this.next.findIndex(t=>t._id===this.currentId);if(ko(this.schema,this.next[e],this.currentDoc.data))return!0}if(this.next.length!==this.original.length)return!0;for(let e=0;e<this.next.length;e++)if(this.next[e]._id!==this.original[e]._id||ko(this.schema,this.next[e],this.original[e]))return!0;return!1}},async mounted(){var e,t,n,i;if(this.modal.active=!0,await this.evaluateExternalConditions(),this.next.length&&this.setCurrentDoc(this.next.at(0)._id),(n=(t=(e=this.serverError)==null?void 0:e.data)==null?void 0:t.errors)!=null&&n.length){const o=this.serverError.data.errors[0],[s,r]=((i=o.path)==null?void 0:i.split("."))||[];if(s){await this.select(s);const a=this.$refs.schema;await this.$nextTick(),r&&a.scrollFieldIntoView(r)}}this.titleFieldChoices=await this.getTitleFieldChoices(),this.modal.triggerFocusRefresh++},methods:{setCurrentDoc(e){this.currentId=e,this.currentDoc={hasErrors:!1,data:this.next.find(t=>t._id===e)},this.evaluateConditions(),this.triggerValidation=!1},async select(e){this.currentId!==e&&await this.validate(!0,!1)&&(this.currentDocToCurrentItem(),this.setCurrentDoc(e))},update(e){var t;this.next=e.map(n=>this.next.find(i=>n._id===i._id)),this.currentId&&(this.next.some(n=>n._id===this.currentId)||(this.currentId=((t=this.next.at(0))==null?void 0:t._id)||null,this.currentDoc={data:this.next.at(0)||{}})),this.updateMinMax()},currentDocUpdate(e){this.currentDoc=e,this.evaluateConditions()},async add(){if(await this.validate(!0,!1)){const e=this.newInstance();e._id=qt(),this.next.push(e),await this.select(e._id),this.updateMinMax(),this.modal.triggerFocusRefresh++}},updateMinMax(){let e=!1,t=!1;this.effectiveMin&&this.next.length<this.effectiveMin&&(e=!0),this.field.max!==void 0&&this.next.length>this.field.max&&(t=!0),this.minError=e,this.maxError=t},async submit(){if(await this.validate(!0,!0)){this.currentDocToCurrentItem();for(const e of this.next)e.metaType="arrayItem",e.scopedArrayName=this.field.scopedArrayName;this.$emit("modal-result",this.next),this.modal.showModal=!1}},currentDocToCurrentItem(){if(!this.currentId)return;const e=this.next.findIndex(t=>t._id===this.currentId);this.next[e]=this.currentDoc.data},getFieldValue(e){return this.currentDoc.data[e]},async validate(e,t){return e&&this.next.length>0&&this.currentId&&(this.triggerValidation=!0),await this.$nextTick(),t&&this.updateMinMax(),t&&(this.minError||this.maxError)||e&&this.currentDoc&&this.currentDoc.hasErrors?(await apos.notify("apostrophe:resolveErrorsFirst",{type:"warning",icon:"alert-circle-icon",dismiss:!0}),!1):!0},newInstance(){return $c(this.schema)},label(e){let t;if(this.field.titleField){if(t=ol.get(e,this.field.titleField),this.titleFieldChoices){const n=this.titleFieldChoices.find(i=>i.value===t);n&&n.label&&(t=n.label)}}else this.schema.find(n=>n.name==="title")&&e.title!==void 0&&(t=e.title);if(t==null||t===""){for(let n=0;n<this.next.length;n++)if(this.next[n]._id===e._id){t=`#${n+1}`;break}}return t},withLabels(e){return e.map(n=>({...n,title:this.label(n)}))},async getTitleFieldChoices(){let e=null;const t=this.schema.find(n=>n.name===this.field.titleField);if(t!=null&&t.choices)if(typeof t.choices=="string"){const n=`${this.moduleOptions.action}/choices`;try{const i=await apos.http.get(n,{qs:{fieldId:t._id}});i&&i.choices&&(e=i.choices)}catch{console.error(this.$t("apostrophe:errorFetchingTitleFieldChoicesByMethod",{name:t.name}))}}else Array.isArray(t.choices)&&(e=t.choices);return e}}},zee={name:"AposArrayEditor",mixins:[Vee]},Nee={class:"apos-modal-array-items"},Bee={class:"apos-modal-array-items__heading"},Fee={class:"apos-modal-array-items__label"},Wee={key:0},Uee={class:"apos-modal-array-item"},jee={class:"apos-modal-array-item__wrapper"},qee={class:"apos-modal-array-item__pane"},Kee={class:"apos-array-item__body"};function Gee(e,t,n,i,o,s){const r=E("AposButton"),a=E("AposSlatList"),l=E("AposModalRail"),c=E("AposSchema"),u=E("AposModalBody"),f=E("AposModal");return p(),R(f,{class:"apos-array-editor",modal:e.modal,"modal-title":e.modalTitle,onInactive:t[0]||(t[0]=m=>e.modal.active=!1),onShowModal:t[1]||(t[1]=m=>e.modal.showModal=!0),onEsc:e.confirmAndCancel},{secondaryControls:Q(()=>[D(r,{type:"default",label:"apostrophe:cancel",onClick:e.confirmAndCancel},null,8,["onClick"])]),primaryControls:Q(()=>[D(r,{type:"primary",label:"apostrophe:save",disabled:!e.valid,onClick:e.submit},null,8,["disabled","onClick"])]),leftRail:Q(()=>[D(l,null,{default:Q(()=>[A("div",Nee,[A("div",Bee,[A("div",Fee,[e.countLabel?(p(),y("span",Wee,$(e.countLabel),1)):x("",!0),e.minLabel?(p(),y("span",{key:1,class:te(e.minError?"apos-modal-array-min-error":"")},$(e.minLabel),3)):x("",!0),e.maxLabel?(p(),y("span",{key:2,class:te(e.maxError?"apos-modal-array-max-error":"")},$(e.maxLabel),3)):x("",!0)]),D(r,{class:"apos-modal-array-items__add",label:"apostrophe:addItem","icon-only":!0,icon:"plus-icon",modifiers:["tiny","round"],attrs:{"data-apos-focus-priority":!0},disabled:e.maxed||e.itemError,onClick:Ue(e.add,["prevent"])},null,8,["disabled","onClick"])]),D(a,{class:"apos-modal-array-items__items",selected:e.currentId,"model-value":e.withLabels(e.next),"onUpdate:modelValue":e.update,onSelect:e.select},null,8,["selected","model-value","onUpdate:modelValue","onSelect"])])]),_:1})]),main:Q(()=>[D(u,null,{bodyMain:Q(()=>[A("div",Uee,[A("div",jee,[A("div",qee,[A("div",Kee,[Ke(D(c,{ref:"schema",schema:e.schema,"trigger-validation":e.triggerValidation,"following-values":e.followingValues(),"conditional-fields":e.conditionalFields,"model-value":e.currentDoc,meta:e.currentDocMeta,"server-errors":e.currentDocServerErrors,"doc-id":e.docId,"onUpdate:modelValue":e.currentDocUpdate,onValidate:e.triggerValidate},null,8,["schema","trigger-validation","following-values","conditional-fields","model-value","meta","server-errors","doc-id","onUpdate:modelValue","onValidate"]),[[on,e.currentId]])])])])])]),_:1})]),_:1},8,["modal","modal-title","onEsc"])}const Jee=I(zee,[["render",Gee],["__scopeId","data-v-b61a178c"]]),Qn={emits:["update:modelValue"],props:{modelValue:{type:Object,required:!0},field:{type:Object,required:!0},meta:{type:Object,default(){return{}}},modifiers:{default:function(){return[]},type:Array},followingValues:{type:Object,required:!1},conditionMet:{type:Boolean,required:!1},triggerValidation:{type:Boolean,default:!1},displayOptions:{type:Object,default(){return{}}},docId:{type:String,required:!1},serverError:{type:Object,required:!1},noBlurEmit:{type:Boolean,default:!1}},data(){return{next:this.modelValue&&this.modelValue.data!==void 0?this.modelValue.data:"",error:!1,uid:Math.random(),focus:!1,fieldReady:!0}},mounted(){this.$el.addEventListener("focusin",this.focusInListener),this.$el.addEventListener("focusout",this.focusOutListener)},unmounted(){this.$el.removeEventListener("focusin",this.focusInListener),this.$el.removeEventListener("focusout",this.focusOutListener)},computed:{options(){return window.apos.schema},iconSize(){return this.modifiers.includes("small")?14:20},tooltip(){let e=!1;return this.field.readOnly&&(e="apostrophe:inputFieldIsDisabled"),e},effectiveError(){return this.error||this.serverError},fieldMeta(){var e;return((e=this.meta)==null?void 0:e[this.field.name])||{}}},watch:{modelValue:{deep:!0,handler(e){this.watchValue()}},next:{deep:!0,handler(e){this.watchNext()}},triggerValidation(e){e&&this.validateAndEmit()},focus(e){!this.noBlurEmit&&!e&&this.validateAndEmit()}},methods:{validateAndEmit(){if(!this.fieldReady)return;const e=this.conditionMet!==!1,t=e?this.validate(this.next):!1;this.$emit("update:modelValue",{data:t?this.next:this.convert(this.next),error:t,ranValidation:e?!0:this.modelValue.ranValidation})},replaceFieldValue(e){this.next=e},watchValue(){this.error=this.modelValue.error,this.next=this.modelValue.data},watchNext(){this.validateAndEmit()},focusInListener(){this.focus=!0},focusOutListener(){this.focus=!1},convert(){return this.next},convertMetaToItems(e=[]){const t=at(this.fieldMeta),n=this.meta||{},i={};for(const o of Object.keys(n))if(o.startsWith("@")&&!e.some(s=>n[`@${s._id}`])){i[o]=n[o];continue}for(const o of e){const s=n[`@${o._id}`]||{},r=s.aposMeta;t[o._id]={...s,aposMeta:{...r||{},...i}}}return t}}},Yee={name:"AposInputArea",mixins:[Qn],props:{generation:{type:Number,required:!1,default(){return null}}},data(){return{next:this.modelValue.data||this.getEmptyValue(),error:!1,uid:Math.random()}},computed:{editorComponent(){return window.apos.area.components.editor},choices(){var n,i;const e=[];let t=this.field.options.widgets||{};if(this.field.options.groups)for(const o of Object.entries(this.field.options.groups))t={...t,...o.widgets};for(const[o,s]of Object.entries(t))e.push({name:o,label:s.addLabel||((n=apos.modules[`${o}-widget`])==null?void 0:n.label),icon:(i=apos.modules[`${o}-widget`])==null?void 0:i.icon});return e},areaMeta(){var t;const e=this.convertMetaToItems(this.next.items);return(t=this.meta)!=null&&t[`@${this.next._id}`]?{...e,...this.meta[`@${this.next._id}`]}:e}},methods:{getEmptyValue(){return{metaType:"area",_id:qt(),items:[]}},watchValue(){this.error=this.modelValue.error,this.next=this.modelValue.data||this.getEmptyValue()},validate(e){return this.field.required&&!e.items.length?"required":this.field.min&&e.items.length&&e.items.length<this.field.min?"min":this.field.max&&e.items.length&&e.items.length>this.field.max?"max":!1},changed(e){this.next={...this.next,items:e.items}}}},Zee={name:"AposInputArea",mixins:[Yee]};function Xee(e,t,n,i,o,s){const r=E("AposInputWrapper");return p(),R(r,{field:e.field,error:e.effectiveError,uid:e.uid,"display-options":e.displayOptions,modifiers:[...e.modifiers,"full-width"],items:e.next.items,meta:e.areaMeta},{body:Q(()=>[A("div",{class:te(["apos-input-wrapper",e.next.items.length?null:"apos-is-empty"]),"data-apos-schema-area":""},[(p(),R(et(e.editorComponent),{id:e.next._id,options:e.field.options,items:e.next.items,meta:e.areaMeta,choices:e.choices,"field-id":e.field._id,field:e.field,"following-values":e.followingValues,generation:e.generation,onChanged:e.changed},null,40,["id","options","items","meta","choices","field-id","field","following-values","generation","onChanged"]))],2)]),_:1},8,["field","error","uid","display-options","modifiers","items","meta"])}const Qee=I(Zee,[["render",Xee],["__scopeId","data-v-dcde449b"]]),_4={methods:{computeFollowingValues(e,t=!1){const n={},i={};for(const[o,s]of Object.entries(this.followingValues||{}))i[`<${o}`]=s;if(t)return i;for(const o of this.schema)if(o.following){const s=Array.isArray(o.following)?o.following:[o.following];n[o.name]={};for(const r of s)r.startsWith("<")?n[o.name][r]=i[r]:n[o.name][r]=e[r]}return n}}},C4={data(){return{externalConditionsResults:ta(),conditionalFields:ta()}},methods:{async evaluateExternalConditions(){this.externalConditionsResults=await e3(this.schema,this.docId,this.$t)},getConditionalFields(e){return n3(this.schema,e,this.externalConditionsResults)},evaluateConditions(e={}){this.conditionalFields=this.getConditionalFields(e)}}};/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function T2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,i)}return n}function bs(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?T2(Object(n),!0).forEach(function(i){ete(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T2(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function vf(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?vf=function(t){return typeof t}:vf=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vf(e)}function ete(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sr(){return sr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},sr.apply(this,arguments)}function tte(e,t){if(e==null)return{};var n={},i=Object.keys(e),o,s;for(s=0;s<i.length;s++)o=i[s],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}function nte(e,t){if(e==null)return{};var n=tte(e,t),i,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(o=0;o<s.length;o++)i=s[o],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}var ite="1.15.6";function nr(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var cr=nr(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Tu=nr(/Edge/i),E2=nr(/firefox/i),Md=nr(/safari/i)&&!nr(/chrome/i)&&!nr(/android/i),Zy=nr(/iP(ad|od|hone)/i),A4=nr(/chrome/i)&&nr(/android/i),k4={capture:!1,passive:!1};function It(e,t,n){e.addEventListener(t,n,!cr&&k4)}function Tt(e,t,n){e.removeEventListener(t,n,!cr&&k4)}function Kf(e,t){if(t){if(t[0]===">"&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch{return!1}return!1}}function S4(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function Vo(e,t,n,i){if(e){n=n||document;do{if(t!=null&&(t[0]===">"?e.parentNode===n&&Kf(e,t):Kf(e,t))||i&&e===n)return e;if(e===n)break}while(e=S4(e))}return null}var O2=/\s+/g;function qi(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var i=(" "+e.className+" ").replace(O2," ").replace(" "+t+" "," ");e.className=(i+(n?" "+t:"")).replace(O2," ")}}function st(e,t,n){var i=e&&e.style;if(i){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),t===void 0?n:n[t];!(t in i)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),i[t]=n+(typeof n=="string"?"":"px")}}function nc(e,t){var n="";if(typeof e=="string")n=e;else do{var i=st(e,"transform");i&&i!=="none"&&(n=i+" "+n)}while(!t&&(e=e.parentNode));var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(n)}function x4(e,t,n){if(e){var i=e.getElementsByTagName(t),o=0,s=i.length;if(n)for(;o<s;o++)n(i[o],o);return i}return[]}function ps(){var e=document.scrollingElement;return e||document.documentElement}function An(e,t,n,i,o){if(!(!e.getBoundingClientRect&&e!==window)){var s,r,a,l,c,u,f;if(e!==window&&e.parentNode&&e!==ps()?(s=e.getBoundingClientRect(),r=s.top,a=s.left,l=s.bottom,c=s.right,u=s.height,f=s.width):(r=0,a=0,l=window.innerHeight,c=window.innerWidth,u=window.innerHeight,f=window.innerWidth),(t||n)&&e!==window&&(o=o||e.parentNode,!cr))do if(o&&o.getBoundingClientRect&&(st(o,"transform")!=="none"||n&&st(o,"position")!=="static")){var m=o.getBoundingClientRect();r-=m.top+parseInt(st(o,"border-top-width")),a-=m.left+parseInt(st(o,"border-left-width")),l=r+s.height,c=a+s.width;break}while(o=o.parentNode);if(i&&e!==window){var g=nc(o||e),v=g&&g.a,w=g&&g.d;g&&(r/=w,a/=v,f/=v,u/=w,l=r+u,c=a+f)}return{top:r,left:a,bottom:l,right:c,width:f,height:u}}}function $2(e,t,n){for(var i=Nr(e,!0),o=An(e)[t];i;){var s=An(i)[n],r=void 0;if(r=o>=s,!r)return i;if(i===ps())break;i=Nr(i,!1)}return!1}function dc(e,t,n,i){for(var o=0,s=0,r=e.children;s<r.length;){if(r[s].style.display!=="none"&&r[s]!==rt.ghost&&(i||r[s]!==rt.dragged)&&Vo(r[s],n.draggable,e,!1)){if(o===t)return r[s];o++}s++}return null}function Xy(e,t){for(var n=e.lastElementChild;n&&(n===rt.ghost||st(n,"display")==="none"||t&&!Kf(n,t));)n=n.previousElementSibling;return n||null}function bo(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==rt.clone&&(!t||Kf(e,t))&&n++;return n}function I2(e){var t=0,n=0,i=ps();if(e)do{var o=nc(e),s=o.a,r=o.d;t+=e.scrollLeft*s,n+=e.scrollTop*r}while(e!==i&&(e=e.parentNode));return[t,n]}function ote(e,t){for(var n in e)if(e.hasOwnProperty(n)){for(var i in t)if(t.hasOwnProperty(i)&&t[i]===e[n][i])return Number(n)}return-1}function Nr(e,t){if(!e||!e.getBoundingClientRect)return ps();var n=e,i=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var o=st(n);if(n.clientWidth<n.scrollWidth&&(o.overflowX=="auto"||o.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(o.overflowY=="auto"||o.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return ps();if(i||t)return n;i=!0}}while(n=n.parentNode);return ps()}function ste(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function r1(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}var Td;function M4(e,t){return function(){if(!Td){var n=arguments,i=this;n.length===1?e.call(i,n[0]):e.apply(i,n),Td=setTimeout(function(){Td=void 0},t)}}}function rte(){clearTimeout(Td),Td=void 0}function T4(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function E4(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}function O4(e,t,n){var i={};return Array.from(e.children).forEach(function(o){var s,r,a,l;if(!(!Vo(o,t.draggable,e,!1)||o.animated||o===n)){var c=An(o);i.left=Math.min((s=i.left)!==null&&s!==void 0?s:1/0,c.left),i.top=Math.min((r=i.top)!==null&&r!==void 0?r:1/0,c.top),i.right=Math.max((a=i.right)!==null&&a!==void 0?a:-1/0,c.right),i.bottom=Math.max((l=i.bottom)!==null&&l!==void 0?l:-1/0,c.bottom)}}),i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}var Di="Sortable"+new Date().getTime();function ate(){var e=[],t;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var i=[].slice.call(this.el.children);i.forEach(function(o){if(!(st(o,"display")==="none"||o===rt.ghost)){e.push({target:o,rect:An(o)});var s=bs({},e[e.length-1].rect);if(o.thisAnimationDuration){var r=nc(o,!0);r&&(s.top-=r.f,s.left-=r.e)}o.fromRect=s}})}},addAnimationState:function(i){e.push(i)},removeAnimationState:function(i){e.splice(ote(e,{target:i}),1)},animateAll:function(i){var o=this;if(!this.options.animation){clearTimeout(t),typeof i=="function"&&i();return}var s=!1,r=0;e.forEach(function(a){var l=0,c=a.target,u=c.fromRect,f=An(c),m=c.prevFromRect,g=c.prevToRect,v=a.rect,w=nc(c,!0);w&&(f.top-=w.f,f.left-=w.e),c.toRect=f,c.thisAnimationDuration&&r1(m,f)&&!r1(u,f)&&(v.top-f.top)/(v.left-f.left)===(u.top-f.top)/(u.left-f.left)&&(l=cte(v,m,g,o.options)),r1(f,u)||(c.prevFromRect=u,c.prevToRect=f,l||(l=o.options.animation),o.animate(c,v,f,l)),l&&(s=!0,r=Math.max(r,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(t),s?t=setTimeout(function(){typeof i=="function"&&i()},r):typeof i=="function"&&i(),e=[]},animate:function(i,o,s,r){if(r){st(i,"transition",""),st(i,"transform","");var a=nc(this.el),l=a&&a.a,c=a&&a.d,u=(o.left-s.left)/(l||1),f=(o.top-s.top)/(c||1);i.animatingX=!!u,i.animatingY=!!f,st(i,"transform","translate3d("+u+"px,"+f+"px,0)"),this.forRepaintDummy=lte(i),st(i,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),st(i,"transform","translate3d(0,0,0)"),typeof i.animated=="number"&&clearTimeout(i.animated),i.animated=setTimeout(function(){st(i,"transition",""),st(i,"transform",""),i.animated=!1,i.animatingX=!1,i.animatingY=!1},r)}}}}function lte(e){return e.offsetWidth}function cte(e,t,n,i){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*i.animation}var Pl=[],a1={initializeByDefault:!0},Eu={mount:function(t){for(var n in a1)a1.hasOwnProperty(n)&&!(n in t)&&(t[n]=a1[n]);Pl.forEach(function(i){if(i.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),Pl.push(t)},pluginEvent:function(t,n,i){var o=this;this.eventCanceled=!1,i.cancel=function(){o.eventCanceled=!0};var s=t+"Global";Pl.forEach(function(r){n[r.pluginName]&&(n[r.pluginName][s]&&n[r.pluginName][s](bs({sortable:n},i)),n.options[r.pluginName]&&n[r.pluginName][t]&&n[r.pluginName][t](bs({sortable:n},i)))})},initializePlugins:function(t,n,i,o){Pl.forEach(function(a){var l=a.pluginName;if(!(!t.options[l]&&!a.initializeByDefault)){var c=new a(t,n,t.options);c.sortable=t,c.options=t.options,t[l]=c,sr(i,c.defaults)}});for(var s in t.options)if(t.options.hasOwnProperty(s)){var r=this.modifyOption(t,s,t.options[s]);typeof r<"u"&&(t.options[s]=r)}},getEventProperties:function(t,n){var i={};return Pl.forEach(function(o){typeof o.eventProperties=="function"&&sr(i,o.eventProperties.call(n[o.pluginName],t))}),i},modifyOption:function(t,n,i){var o;return Pl.forEach(function(s){t[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[n]=="function"&&(o=s.optionListeners[n].call(t[s.pluginName],i))}),o}};function dte(e){var t=e.sortable,n=e.rootEl,i=e.name,o=e.targetEl,s=e.cloneEl,r=e.toEl,a=e.fromEl,l=e.oldIndex,c=e.newIndex,u=e.oldDraggableIndex,f=e.newDraggableIndex,m=e.originalEvent,g=e.putSortable,v=e.extraEventProperties;if(t=t||n&&n[Di],!!t){var w,_=t.options,k="on"+i.charAt(0).toUpperCase()+i.substr(1);window.CustomEvent&&!cr&&!Tu?w=new CustomEvent(i,{bubbles:!0,cancelable:!0}):(w=document.createEvent("Event"),w.initEvent(i,!0,!0)),w.to=r||n,w.from=a||n,w.item=o||n,w.clone=s,w.oldIndex=l,w.newIndex=c,w.oldDraggableIndex=u,w.newDraggableIndex=f,w.originalEvent=m,w.pullMode=g?g.lastPutMode:void 0;var L=bs(bs({},v),Eu.getEventProperties(i,t));for(var P in L)w[P]=L[P];n&&n.dispatchEvent(w),_[k]&&_[k].call(t,w)}}var ute=["evt"],Ii=function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=i.evt,s=nte(i,ute);Eu.pluginEvent.bind(rt)(t,n,bs({dragEl:Te,parentEl:fn,ghostEl:dt,rootEl:rn,nextEl:Ha,lastDownEl:wf,cloneEl:ln,cloneHidden:Rr,dragStarted:hd,putSortable:qn,activeSortable:rt.active,originalEvent:o,oldIndex:Jl,oldDraggableIndex:Ed,newIndex:Ji,newDraggableIndex:$r,hideGhostForTarget:D4,unhideGhostForTarget:R4,cloneNowHidden:function(){Rr=!0},cloneNowShown:function(){Rr=!1},dispatchSortableEvent:function(a){bi({sortable:n,name:a,originalEvent:o})}},s))};function bi(e){dte(bs({putSortable:qn,cloneEl:ln,targetEl:Te,rootEl:rn,oldIndex:Jl,oldDraggableIndex:Ed,newIndex:Ji,newDraggableIndex:$r},e))}var Te,fn,dt,rn,Ha,wf,ln,Rr,Jl,Ji,Ed,$r,Hh,qn,Ul=!1,Gf=!1,Jf=[],La,Ho,l1,c1,L2,D2,hd,Hl,Od,$d=!1,Vh=!1,_f,oi,d1=[],Ab=!1,Yf=[],cm=typeof document<"u",zh=Zy,R2=Tu||cr?"cssFloat":"float",hte=cm&&!A4&&!Zy&&"draggable"in document.createElement("div"),$4=function(){if(cm){if(cr)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),I4=function(t,n){var i=st(t),o=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),s=dc(t,0,n),r=dc(t,1,n),a=s&&st(s),l=r&&st(r),c=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+An(s).width,u=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+An(r).width;if(i.display==="flex")return i.flexDirection==="column"||i.flexDirection==="column-reverse"?"vertical":"horizontal";if(i.display==="grid")return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&a.float&&a.float!=="none"){var f=a.float==="left"?"left":"right";return r&&(l.clear==="both"||l.clear===f)?"vertical":"horizontal"}return s&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||c>=o&&i[R2]==="none"||r&&i[R2]==="none"&&c+u>o)?"vertical":"horizontal"},fte=function(t,n,i){var o=i?t.left:t.top,s=i?t.right:t.bottom,r=i?t.width:t.height,a=i?n.left:n.top,l=i?n.right:n.bottom,c=i?n.width:n.height;return o===a||s===l||o+r/2===a+c/2},pte=function(t,n){var i;return Jf.some(function(o){var s=o[Di].options.emptyInsertThreshold;if(!(!s||Xy(o))){var r=An(o),a=t>=r.left-s&&t<=r.right+s,l=n>=r.top-s&&n<=r.bottom+s;if(a&&l)return i=o}}),i},L4=function(t){function n(s,r){return function(a,l,c,u){var f=a.options.group.name&&l.options.group.name&&a.options.group.name===l.options.group.name;if(s==null&&(r||f))return!0;if(s==null||s===!1)return!1;if(r&&s==="clone")return s;if(typeof s=="function")return n(s(a,l,c,u),r)(a,l,c,u);var m=(r?a:l).options.group.name;return s===!0||typeof s=="string"&&s===m||s.join&&s.indexOf(m)>-1}}var i={},o=t.group;(!o||vf(o)!="object")&&(o={name:o}),i.name=o.name,i.checkPull=n(o.pull,!0),i.checkPut=n(o.put),i.revertClone=o.revertClone,t.group=i},D4=function(){!$4&&dt&&st(dt,"display","none")},R4=function(){!$4&&dt&&st(dt,"display","")};cm&&!A4&&document.addEventListener("click",function(e){if(Gf)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),Gf=!1,!1},!0);var Da=function(t){if(Te){t=t.touches?t.touches[0]:t;var n=pte(t.clientX,t.clientY);if(n){var i={};for(var o in t)t.hasOwnProperty(o)&&(i[o]=t[o]);i.target=i.rootEl=n,i.preventDefault=void 0,i.stopPropagation=void 0,n[Di]._onDragOver(i)}}},mte=function(t){Te&&Te.parentNode[Di]._isOutsideThisEl(t.target)};function rt(e,t){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=sr({},t),e[Di]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return I4(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(r,a){r.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:rt.supportPointer!==!1&&"PointerEvent"in window&&(!Md||Zy),emptyInsertThreshold:5};Eu.initializePlugins(this,e,n);for(var i in n)!(i in t)&&(t[i]=n[i]);L4(t);for(var o in this)o.charAt(0)==="_"&&typeof this[o]=="function"&&(this[o]=this[o].bind(this));this.nativeDraggable=t.forceFallback?!1:hte,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?It(e,"pointerdown",this._onTapStart):(It(e,"mousedown",this._onTapStart),It(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(It(e,"dragover",this),It(e,"dragenter",this)),Jf.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),sr(this,ate())}rt.prototype={constructor:rt,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(Hl=null)},_getDirection:function(t,n){return typeof this.options.direction=="function"?this.options.direction.call(this,t,n,Te):this.options.direction},_onTapStart:function(t){if(t.cancelable){var n=this,i=this.el,o=this.options,s=o.preventOnFilter,r=t.type,a=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,l=(a||t).target,c=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||l,u=o.filter;if(Ate(i),!Te&&!(/mousedown|pointerdown/.test(r)&&t.button!==0||o.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&Md&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=Vo(l,o.draggable,i,!1),!(l&&l.animated)&&wf!==l)){if(Jl=bo(l),Ed=bo(l,o.draggable),typeof u=="function"){if(u.call(this,t,l,this)){bi({sortable:n,rootEl:c,name:"filter",targetEl:l,toEl:i,fromEl:i}),Ii("filter",n,{evt:t}),s&&t.preventDefault();return}}else if(u&&(u=u.split(",").some(function(f){if(f=Vo(c,f.trim(),i,!1),f)return bi({sortable:n,rootEl:f,name:"filter",targetEl:l,fromEl:i,toEl:i}),Ii("filter",n,{evt:t}),!0}),u)){s&&t.preventDefault();return}o.handle&&!Vo(c,o.handle,i,!1)||this._prepareDragStart(t,a,l)}}},_prepareDragStart:function(t,n,i){var o=this,s=o.el,r=o.options,a=s.ownerDocument,l;if(i&&!Te&&i.parentNode===s){var c=An(i);if(rn=s,Te=i,fn=Te.parentNode,Ha=Te.nextSibling,wf=i,Hh=r.group,rt.dragged=Te,La={target:Te,clientX:(n||t).clientX,clientY:(n||t).clientY},L2=La.clientX-c.left,D2=La.clientY-c.top,this._lastX=(n||t).clientX,this._lastY=(n||t).clientY,Te.style["will-change"]="all",l=function(){if(Ii("delayEnded",o,{evt:t}),rt.eventCanceled){o._onDrop();return}o._disableDelayedDragEvents(),!E2&&o.nativeDraggable&&(Te.draggable=!0),o._triggerDragStart(t,n),bi({sortable:o,name:"choose",originalEvent:t}),qi(Te,r.chosenClass,!0)},r.ignore.split(",").forEach(function(u){x4(Te,u.trim(),u1)}),It(a,"dragover",Da),It(a,"mousemove",Da),It(a,"touchmove",Da),r.supportPointer?(It(a,"pointerup",o._onDrop),!this.nativeDraggable&&It(a,"pointercancel",o._onDrop)):(It(a,"mouseup",o._onDrop),It(a,"touchend",o._onDrop),It(a,"touchcancel",o._onDrop)),E2&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Te.draggable=!0),Ii("delayStart",this,{evt:t}),r.delay&&(!r.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(Tu||cr))){if(rt.eventCanceled){this._onDrop();return}r.supportPointer?(It(a,"pointerup",o._disableDelayedDrag),It(a,"pointercancel",o._disableDelayedDrag)):(It(a,"mouseup",o._disableDelayedDrag),It(a,"touchend",o._disableDelayedDrag),It(a,"touchcancel",o._disableDelayedDrag)),It(a,"mousemove",o._delayedDragTouchMoveHandler),It(a,"touchmove",o._delayedDragTouchMoveHandler),r.supportPointer&&It(a,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(l,r.delay)}else l()}},_delayedDragTouchMoveHandler:function(t){var n=t.touches?t.touches[0]:t;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Te&&u1(Te),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;Tt(t,"mouseup",this._disableDelayedDrag),Tt(t,"touchend",this._disableDelayedDrag),Tt(t,"touchcancel",this._disableDelayedDrag),Tt(t,"pointerup",this._disableDelayedDrag),Tt(t,"pointercancel",this._disableDelayedDrag),Tt(t,"mousemove",this._delayedDragTouchMoveHandler),Tt(t,"touchmove",this._delayedDragTouchMoveHandler),Tt(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,n){n=n||t.pointerType=="touch"&&t,!this.nativeDraggable||n?this.options.supportPointer?It(document,"pointermove",this._onTouchMove):n?It(document,"touchmove",this._onTouchMove):It(document,"mousemove",this._onTouchMove):(It(Te,"dragend",this),It(rn,"dragstart",this._onDragStart));try{document.selection?Cf(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,n){if(Ul=!1,rn&&Te){Ii("dragStarted",this,{evt:n}),this.nativeDraggable&&It(document,"dragover",mte);var i=this.options;!t&&qi(Te,i.dragClass,!1),qi(Te,i.ghostClass,!0),rt.active=this,t&&this._appendGhost(),bi({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(Ho){this._lastX=Ho.clientX,this._lastY=Ho.clientY,D4();for(var t=document.elementFromPoint(Ho.clientX,Ho.clientY),n=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(Ho.clientX,Ho.clientY),t!==n);)n=t;if(Te.parentNode[Di]._isOutsideThisEl(t),n)do{if(n[Di]){var i=void 0;if(i=n[Di]._onDragOver({clientX:Ho.clientX,clientY:Ho.clientY,target:t,rootEl:n}),i&&!this.options.dragoverBubble)break}t=n}while(n=S4(n));R4()}},_onTouchMove:function(t){if(La){var n=this.options,i=n.fallbackTolerance,o=n.fallbackOffset,s=t.touches?t.touches[0]:t,r=dt&&nc(dt,!0),a=dt&&r&&r.a,l=dt&&r&&r.d,c=zh&&oi&&I2(oi),u=(s.clientX-La.clientX+o.x)/(a||1)+(c?c[0]-d1[0]:0)/(a||1),f=(s.clientY-La.clientY+o.y)/(l||1)+(c?c[1]-d1[1]:0)/(l||1);if(!rt.active&&!Ul){if(i&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<i)return;this._onDragStart(t,!0)}if(dt){r?(r.e+=u-(l1||0),r.f+=f-(c1||0)):r={a:1,b:0,c:0,d:1,e:u,f};var m="matrix(".concat(r.a,",").concat(r.b,",").concat(r.c,",").concat(r.d,",").concat(r.e,",").concat(r.f,")");st(dt,"webkitTransform",m),st(dt,"mozTransform",m),st(dt,"msTransform",m),st(dt,"transform",m),l1=u,c1=f,Ho=s}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!dt){var t=this.options.fallbackOnBody?document.body:rn,n=An(Te,!0,zh,!0,t),i=this.options;if(zh){for(oi=t;st(oi,"position")==="static"&&st(oi,"transform")==="none"&&oi!==document;)oi=oi.parentNode;oi!==document.body&&oi!==document.documentElement?(oi===document&&(oi=ps()),n.top+=oi.scrollTop,n.left+=oi.scrollLeft):oi=ps(),d1=I2(oi)}dt=Te.cloneNode(!0),qi(dt,i.ghostClass,!1),qi(dt,i.fallbackClass,!0),qi(dt,i.dragClass,!0),st(dt,"transition",""),st(dt,"transform",""),st(dt,"box-sizing","border-box"),st(dt,"margin",0),st(dt,"top",n.top),st(dt,"left",n.left),st(dt,"width",n.width),st(dt,"height",n.height),st(dt,"opacity","0.8"),st(dt,"position",zh?"absolute":"fixed"),st(dt,"zIndex","100000"),st(dt,"pointerEvents","none"),rt.ghost=dt,t.appendChild(dt),st(dt,"transform-origin",L2/parseInt(dt.style.width)*100+"% "+D2/parseInt(dt.style.height)*100+"%")}},_onDragStart:function(t,n){var i=this,o=t.dataTransfer,s=i.options;if(Ii("dragStart",this,{evt:t}),rt.eventCanceled){this._onDrop();return}Ii("setupClone",this),rt.eventCanceled||(ln=E4(Te),ln.removeAttribute("id"),ln.draggable=!1,ln.style["will-change"]="",this._hideClone(),qi(ln,this.options.chosenClass,!1),rt.clone=ln),i.cloneId=Cf(function(){Ii("clone",i),!rt.eventCanceled&&(i.options.removeCloneOnHide||rn.insertBefore(ln,Te),i._hideClone(),bi({sortable:i,name:"clone"}))}),!n&&qi(Te,s.dragClass,!0),n?(Gf=!0,i._loopId=setInterval(i._emulateDragOver,50)):(Tt(document,"mouseup",i._onDrop),Tt(document,"touchend",i._onDrop),Tt(document,"touchcancel",i._onDrop),o&&(o.effectAllowed="move",s.setData&&s.setData.call(i,o,Te)),It(document,"drop",i),st(Te,"transform","translateZ(0)")),Ul=!0,i._dragStartId=Cf(i._dragStarted.bind(i,n,t)),It(document,"selectstart",i),hd=!0,window.getSelection().removeAllRanges(),Md&&st(document.body,"user-select","none")},_onDragOver:function(t){var n=this.el,i=t.target,o,s,r,a=this.options,l=a.group,c=rt.active,u=Hh===l,f=a.sort,m=qn||c,g,v=this,w=!1;if(Ab)return;function _(Z,N){Ii(Z,v,bs({evt:t,isOwner:u,axis:g?"vertical":"horizontal",revert:r,dragRect:o,targetRect:s,canSort:f,fromSortable:m,target:i,completed:L,onMove:function(ce,ye){return Nh(rn,n,Te,o,ce,An(ce),t,ye)},changed:P},N))}function k(){_("dragOverAnimationCapture"),v.captureAnimationState(),v!==m&&m.captureAnimationState()}function L(Z){return _("dragOverCompleted",{insertion:Z}),Z&&(u?c._hideClone():c._showClone(v),v!==m&&(qi(Te,qn?qn.options.ghostClass:c.options.ghostClass,!1),qi(Te,a.ghostClass,!0)),qn!==v&&v!==rt.active?qn=v:v===rt.active&&qn&&(qn=null),m===v&&(v._ignoreWhileAnimating=i),v.animateAll(function(){_("dragOverAnimationComplete"),v._ignoreWhileAnimating=null}),v!==m&&(m.animateAll(),m._ignoreWhileAnimating=null)),(i===Te&&!Te.animated||i===n&&!i.animated)&&(Hl=null),!a.dragoverBubble&&!t.rootEl&&i!==document&&(Te.parentNode[Di]._isOutsideThisEl(t.target),!Z&&Da(t)),!a.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),w=!0}function P(){Ji=bo(Te),$r=bo(Te,a.draggable),bi({sortable:v,name:"change",toEl:n,newIndex:Ji,newDraggableIndex:$r,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),i=Vo(i,a.draggable,n,!0),_("dragOver"),rt.eventCanceled)return w;if(Te.contains(t.target)||i.animated&&i.animatingX&&i.animatingY||v._ignoreWhileAnimating===i)return L(!1);if(Gf=!1,c&&!a.disabled&&(u?f||(r=fn!==rn):qn===this||(this.lastPutMode=Hh.checkPull(this,c,Te,t))&&l.checkPut(this,c,Te,t))){if(g=this._getDirection(t,i)==="vertical",o=An(Te),_("dragOverValid"),rt.eventCanceled)return w;if(r)return fn=rn,k(),this._hideClone(),_("revert"),rt.eventCanceled||(Ha?rn.insertBefore(Te,Ha):rn.appendChild(Te)),L(!0);var M=Xy(n,a.draggable);if(!M||vte(t,g,this)&&!M.animated){if(M===Te)return L(!1);if(M&&n===t.target&&(i=M),i&&(s=An(i)),Nh(rn,n,Te,o,i,s,t,!!i)!==!1)return k(),M&&M.nextSibling?n.insertBefore(Te,M.nextSibling):n.appendChild(Te),fn=n,P(),L(!0)}else if(M&&yte(t,g,this)){var F=dc(n,0,a,!0);if(F===Te)return L(!1);if(i=F,s=An(i),Nh(rn,n,Te,o,i,s,t,!1)!==!1)return k(),n.insertBefore(Te,F),fn=n,P(),L(!0)}else if(i.parentNode===n){s=An(i);var z=0,ee,ie=Te.parentNode!==n,K=!fte(Te.animated&&Te.toRect||o,i.animated&&i.toRect||s,g),ae=g?"top":"left",B=$2(i,"top","top")||$2(Te,"top","top"),J=B?B.scrollTop:void 0;Hl!==i&&(ee=s[ae],$d=!1,Vh=!K&&a.invertSwap||ie),z=wte(t,i,s,g,K?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,Vh,Hl===i);var he;if(z!==0){var ne=bo(Te);do ne-=z,he=fn.children[ne];while(he&&(st(he,"display")==="none"||he===dt))}if(z===0||he===i)return L(!1);Hl=i,Od=z;var oe=i.nextElementSibling,W=!1;W=z===1;var q=Nh(rn,n,Te,o,i,s,t,W);if(q!==!1)return(q===1||q===-1)&&(W=q===1),Ab=!0,setTimeout(bte,30),k(),W&&!oe?n.appendChild(Te):i.parentNode.insertBefore(Te,W?oe:i),B&&T4(B,0,J-B.scrollTop),fn=Te.parentNode,ee!==void 0&&!Vh&&(_f=Math.abs(ee-An(i)[ae])),P(),L(!0)}if(n.contains(Te))return L(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Tt(document,"mousemove",this._onTouchMove),Tt(document,"touchmove",this._onTouchMove),Tt(document,"pointermove",this._onTouchMove),Tt(document,"dragover",Da),Tt(document,"mousemove",Da),Tt(document,"touchmove",Da)},_offUpEvents:function(){var t=this.el.ownerDocument;Tt(t,"mouseup",this._onDrop),Tt(t,"touchend",this._onDrop),Tt(t,"pointerup",this._onDrop),Tt(t,"pointercancel",this._onDrop),Tt(t,"touchcancel",this._onDrop),Tt(document,"selectstart",this)},_onDrop:function(t){var n=this.el,i=this.options;if(Ji=bo(Te),$r=bo(Te,i.draggable),Ii("drop",this,{evt:t}),fn=Te&&Te.parentNode,Ji=bo(Te),$r=bo(Te,i.draggable),rt.eventCanceled){this._nulling();return}Ul=!1,Vh=!1,$d=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),kb(this.cloneId),kb(this._dragStartId),this.nativeDraggable&&(Tt(document,"drop",this),Tt(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Md&&st(document.body,"user-select",""),st(Te,"transform",""),t&&(hd&&(t.cancelable&&t.preventDefault(),!i.dropBubble&&t.stopPropagation()),dt&&dt.parentNode&&dt.parentNode.removeChild(dt),(rn===fn||qn&&qn.lastPutMode!=="clone")&&ln&&ln.parentNode&&ln.parentNode.removeChild(ln),Te&&(this.nativeDraggable&&Tt(Te,"dragend",this),u1(Te),Te.style["will-change"]="",hd&&!Ul&&qi(Te,qn?qn.options.ghostClass:this.options.ghostClass,!1),qi(Te,this.options.chosenClass,!1),bi({sortable:this,name:"unchoose",toEl:fn,newIndex:null,newDraggableIndex:null,originalEvent:t}),rn!==fn?(Ji>=0&&(bi({rootEl:fn,name:"add",toEl:fn,fromEl:rn,originalEvent:t}),bi({sortable:this,name:"remove",toEl:fn,originalEvent:t}),bi({rootEl:fn,name:"sort",toEl:fn,fromEl:rn,originalEvent:t}),bi({sortable:this,name:"sort",toEl:fn,originalEvent:t})),qn&&qn.save()):Ji!==Jl&&Ji>=0&&(bi({sortable:this,name:"update",toEl:fn,originalEvent:t}),bi({sortable:this,name:"sort",toEl:fn,originalEvent:t})),rt.active&&((Ji==null||Ji===-1)&&(Ji=Jl,$r=Ed),bi({sortable:this,name:"end",toEl:fn,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){Ii("nulling",this),rn=Te=fn=dt=Ha=ln=wf=Rr=La=Ho=hd=Ji=$r=Jl=Ed=Hl=Od=qn=Hh=rt.dragged=rt.ghost=rt.clone=rt.active=null,Yf.forEach(function(t){t.checked=!0}),Yf.length=l1=c1=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":Te&&(this._onDragOver(t),gte(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],n,i=this.el.children,o=0,s=i.length,r=this.options;o<s;o++)n=i[o],Vo(n,r.draggable,this.el,!1)&&t.push(n.getAttribute(r.dataIdAttr)||Cte(n));return t},sort:function(t,n){var i={},o=this.el;this.toArray().forEach(function(s,r){var a=o.children[r];Vo(a,this.options.draggable,o,!1)&&(i[s]=a)},this),n&&this.captureAnimationState(),t.forEach(function(s){i[s]&&(o.removeChild(i[s]),o.appendChild(i[s]))}),n&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,n){return Vo(t,n||this.options.draggable,this.el,!1)},option:function(t,n){var i=this.options;if(n===void 0)return i[t];var o=Eu.modifyOption(this,t,n);typeof o<"u"?i[t]=o:i[t]=n,t==="group"&&L4(i)},destroy:function(){Ii("destroy",this);var t=this.el;t[Di]=null,Tt(t,"mousedown",this._onTapStart),Tt(t,"touchstart",this._onTapStart),Tt(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(Tt(t,"dragover",this),Tt(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Jf.splice(Jf.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!Rr){if(Ii("hideClone",this),rt.eventCanceled)return;st(ln,"display","none"),this.options.removeCloneOnHide&&ln.parentNode&&ln.parentNode.removeChild(ln),Rr=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(Rr){if(Ii("showClone",this),rt.eventCanceled)return;Te.parentNode==rn&&!this.options.group.revertClone?rn.insertBefore(ln,Te):Ha?rn.insertBefore(ln,Ha):rn.appendChild(ln),this.options.group.revertClone&&this.animate(Te,ln),st(ln,"display",""),Rr=!1}}};function gte(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function Nh(e,t,n,i,o,s,r,a){var l,c=e[Di],u=c.options.onMove,f;return window.CustomEvent&&!cr&&!Tu?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=t,l.from=e,l.dragged=n,l.draggedRect=i,l.related=o||t,l.relatedRect=s||An(t),l.willInsertAfter=a,l.originalEvent=r,e.dispatchEvent(l),u&&(f=u.call(c,l,r)),f}function u1(e){e.draggable=!1}function bte(){Ab=!1}function yte(e,t,n){var i=An(dc(n.el,0,n.options,!0)),o=O4(n.el,n.options,dt),s=10;return t?e.clientX<o.left-s||e.clientY<i.top&&e.clientX<i.right:e.clientY<o.top-s||e.clientY<i.bottom&&e.clientX<i.left}function vte(e,t,n){var i=An(Xy(n.el,n.options.draggable)),o=O4(n.el,n.options,dt),s=10;return t?e.clientX>o.right+s||e.clientY>i.bottom&&e.clientX>i.left:e.clientY>o.bottom+s||e.clientX>i.right&&e.clientY>i.top}function wte(e,t,n,i,o,s,r,a){var l=i?e.clientY:e.clientX,c=i?n.height:n.width,u=i?n.top:n.left,f=i?n.bottom:n.right,m=!1;if(!r){if(a&&_f<c*o){if(!$d&&(Od===1?l>u+c*s/2:l<f-c*s/2)&&($d=!0),$d)m=!0;else if(Od===1?l<u+_f:l>f-_f)return-Od}else if(l>u+c*(1-o)/2&&l<f-c*(1-o)/2)return _te(t)}return m=m||r,m&&(l<u+c*s/2||l>f-c*s/2)?l>u+c/2?1:-1:0}function _te(e){return bo(Te)<bo(e)?1:-1}function Cte(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,i=0;n--;)i+=t.charCodeAt(n);return i.toString(36)}function Ate(e){Yf.length=0;for(var t=e.getElementsByTagName("input"),n=t.length;n--;){var i=t[n];i.checked&&Yf.push(i)}}function Cf(e){return setTimeout(e,0)}function kb(e){return clearTimeout(e)}cm&&It(document,"touchmove",function(e){(rt.active||Ul)&&e.cancelable&&e.preventDefault()});rt.utils={on:It,off:Tt,css:st,find:x4,is:function(t,n){return!!Vo(t,n,t,!1)},extend:ste,throttle:M4,closest:Vo,toggleClass:qi,clone:E4,index:bo,nextTick:Cf,cancelNextTick:kb,detectDirection:I4,getChild:dc,expando:Di};rt.get=function(e){return e[Di]};rt.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach(function(i){if(!i.prototype||!i.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(i));i.utils&&(rt.utils=bs(bs({},rt.utils),i.utils)),Eu.mount(i)})};rt.create=function(e,t){return new rt(e,t)};rt.version=ite;var Cn=[],fd,Sb,xb=!1,h1,f1,Zf,pd;function kte(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return e.prototype={dragStarted:function(n){var i=n.originalEvent;this.sortable.nativeDraggable?It(document,"dragover",this._handleAutoScroll):this.options.supportPointer?It(document,"pointermove",this._handleFallbackAutoScroll):i.touches?It(document,"touchmove",this._handleFallbackAutoScroll):It(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var i=n.originalEvent;!this.options.dragOverBubble&&!i.rootEl&&this._handleAutoScroll(i)},drop:function(){this.sortable.nativeDraggable?Tt(document,"dragover",this._handleAutoScroll):(Tt(document,"pointermove",this._handleFallbackAutoScroll),Tt(document,"touchmove",this._handleFallbackAutoScroll),Tt(document,"mousemove",this._handleFallbackAutoScroll)),P2(),Af(),rte()},nulling:function(){Zf=Sb=fd=xb=pd=h1=f1=null,Cn.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,i){var o=this,s=(n.touches?n.touches[0]:n).clientX,r=(n.touches?n.touches[0]:n).clientY,a=document.elementFromPoint(s,r);if(Zf=n,i||this.options.forceAutoScrollFallback||Tu||cr||Md){p1(n,this.options,a,i);var l=Nr(a,!0);xb&&(!pd||s!==h1||r!==f1)&&(pd&&P2(),pd=setInterval(function(){var c=Nr(document.elementFromPoint(s,r),!0);c!==l&&(l=c,Af()),p1(n,o.options,c,i)},10),h1=s,f1=r)}else{if(!this.options.bubbleScroll||Nr(a,!0)===ps()){Af();return}p1(n,this.options,Nr(a,!1),!1)}}},sr(e,{pluginName:"scroll",initializeByDefault:!0})}function Af(){Cn.forEach(function(e){clearInterval(e.pid)}),Cn=[]}function P2(){clearInterval(pd)}var p1=M4(function(e,t,n,i){if(t.scroll){var o=(e.touches?e.touches[0]:e).clientX,s=(e.touches?e.touches[0]:e).clientY,r=t.scrollSensitivity,a=t.scrollSpeed,l=ps(),c=!1,u;Sb!==n&&(Sb=n,Af(),fd=t.scroll,u=t.scrollFn,fd===!0&&(fd=Nr(n,!0)));var f=0,m=fd;do{var g=m,v=An(g),w=v.top,_=v.bottom,k=v.left,L=v.right,P=v.width,M=v.height,F=void 0,z=void 0,ee=g.scrollWidth,ie=g.scrollHeight,K=st(g),ae=g.scrollLeft,B=g.scrollTop;g===l?(F=P<ee&&(K.overflowX==="auto"||K.overflowX==="scroll"||K.overflowX==="visible"),z=M<ie&&(K.overflowY==="auto"||K.overflowY==="scroll"||K.overflowY==="visible")):(F=P<ee&&(K.overflowX==="auto"||K.overflowX==="scroll"),z=M<ie&&(K.overflowY==="auto"||K.overflowY==="scroll"));var J=F&&(Math.abs(L-o)<=r&&ae+P<ee)-(Math.abs(k-o)<=r&&!!ae),he=z&&(Math.abs(_-s)<=r&&B+M<ie)-(Math.abs(w-s)<=r&&!!B);if(!Cn[f])for(var ne=0;ne<=f;ne++)Cn[ne]||(Cn[ne]={});(Cn[f].vx!=J||Cn[f].vy!=he||Cn[f].el!==g)&&(Cn[f].el=g,Cn[f].vx=J,Cn[f].vy=he,clearInterval(Cn[f].pid),(J!=0||he!=0)&&(c=!0,Cn[f].pid=setInterval((function(){i&&this.layer===0&&rt.active._onTouchMove(Zf);var oe=Cn[this.layer].vy?Cn[this.layer].vy*a:0,W=Cn[this.layer].vx?Cn[this.layer].vx*a:0;typeof u=="function"&&u.call(rt.dragged.parentNode[Di],W,oe,e,Zf,Cn[this.layer].el)!=="continue"||T4(Cn[this.layer].el,W,oe)}).bind({layer:f}),24))),f++}while(t.bubbleScroll&&m!==l&&(m=Nr(m,!1)));xb=c}},30),P4=function(t){var n=t.originalEvent,i=t.putSortable,o=t.dragEl,s=t.activeSortable,r=t.dispatchSortableEvent,a=t.hideGhostForTarget,l=t.unhideGhostForTarget;if(n){var c=i||s;a();var u=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,f=document.elementFromPoint(u.clientX,u.clientY);l(),c&&!c.el.contains(f)&&(r("spill"),this.onSpill({dragEl:o,putSortable:i}))}};function Qy(){}Qy.prototype={startIndex:null,dragStart:function(t){var n=t.oldDraggableIndex;this.startIndex=n},onSpill:function(t){var n=t.dragEl,i=t.putSortable;this.sortable.captureAnimationState(),i&&i.captureAnimationState();var o=dc(this.sortable.el,this.startIndex,this.options);o?this.sortable.el.insertBefore(n,o):this.sortable.el.appendChild(n),this.sortable.animateAll(),i&&i.animateAll()},drop:P4};sr(Qy,{pluginName:"revertOnSpill"});function e0(){}e0.prototype={onSpill:function(t){var n=t.dragEl,i=t.putSortable,o=i||this.sortable;o.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),o.animateAll()},drop:P4};sr(e0,{pluginName:"removeOnSpill"});rt.mount(new kte);rt.mount(e0,Qy);const dm=em({__name:"Sortable",props:{options:{type:Object,default:null,required:!1},list:{type:[Array,Object],default:[],required:!0},itemKey:{type:[String,Function],default:"",required:!0},tag:{type:String,default:"div",required:!1}},emits:["choose","unchoose","start","end","add","update","sort","remove","filter","move","clone","change"],setup(e,{expose:t,emit:n}){const i=e,o=n,s=s9(),r=Ve(!1),a=Ve(null),l=Ve(null),c=Je(()=>typeof i.itemKey=="string"?u=>u[i.itemKey]:i.itemKey);return t({containerRef:a,sortable:l,isDragging:r}),Fo(a,u=>{u&&(l.value=new rt(u,{...i.options,onChoose:f=>o("choose",f),onUnchoose:f=>o("unchoose",f),onStart:f=>{r.value=!0,o("start",f)},onEnd:f=>{setTimeout(()=>{r.value=!1,o("end",f)})},onAdd:f=>o("add",f),onUpdate:f=>o("update",f),onSort:f=>o("sort",f),onRemove:f=>o("remove",f),onFilter:f=>o("filter",f),onMove:(f,m)=>"onMoveCapture"in s?s.onMoveCapture(f,m):o("move",f,m),onClone:f=>o("clone",f),onChange:f=>o("change",f)}))}),Fo(()=>i.options,u=>{if(u&&(l!=null&&l.value))for(const f in u)l.value.option(f,u[f])}),Au(()=>{l.value&&(l.value.destroy(),a.value=null,l.value=null)}),(u,f)=>(p(),R(et(u.$props.tag),{ref_key:"containerRef",ref:a,class:te(u.$props.class)},{default:Q(()=>[gt(u.$slots,"header"),(p(!0),y(Ce,null,Ie(e.list,(m,g)=>gt(u.$slots,"item",{key:c.value(m),element:m,index:g})),128)),gt(u.$slots,"footer")]),_:3},8,["class"]))}}),Ste={name:"AposInputArray",components:{draggable:dm},mixins:[Qn,_4,C4],emits:["validate"],props:{generation:{type:Number,required:!1,default:null}},data(){var n,i,o,s;const e=this.getNext(),t=H2(e,this.field,this.field.schema);return{next:e,items:t,isDragging:!1,itemsConditionalFields:Object.fromEntries(t.map(({_id:r})=>[r,ta()])),emptyWhenIcon:((i=(n=this.field)==null?void 0:n.whenEmpty)==null?void 0:i.icon)||"text-box-multiple-icon",emptyWhenLabel:((s=(o=this.field)==null?void 0:o.whenEmpty)==null?void 0:s.label)||"apostrophe:noItemsAdded"}},computed:{isInlineTable(){return this.field.style==="table"&&this.isInline},isInlineStandard(){return this.field.style!=="table"&&this.isInline},isInline(){return!!this.field.inline},shouldResetConditionalFields(){return this.isInline?i3(this.schema):!1},isDraggable(){return!(this.field.draggable===!1||this.field.readOnly||this.next.length<=1)},isAddDisabled(){return this.field.readOnly||this.field.max&&this.items.length>=this.field.max},inlineContextMenu(){return[...this.isDraggable?[{label:this.$t("apostrophe:moveUp"),action:"move-up"},{label:this.$t("apostrophe:moveDown"),action:"move-down"}]:[],...this.field.duplicate!==!1?[{label:this.$t("apostrophe:duplicate"),action:"duplicate"}]:[],{label:this.$t("apostrophe:remove"),action:"remove",modifiers:["danger"]}]},schema(){return this.field.schema},listId(){return`sortableList-${qt()}`},dragOptions(){return{disabled:!this.isDraggable,ghostClass:"apos-is-ghost",handle:this.isInlineTable?".apos-drag-handle":".apos-input-array-inline-header",dragClass:"apos-is-dragging",forceFallback:!0,fallbackTolerance:5}},itemLabel(){return this.field.itemLabel?{key:"apostrophe:addType",type:this.$t(this.field.itemLabel)}:"apostrophe:addItem"},editLabel(){return{key:"apostrophe:editType",type:this.$t(this.field.label)}},effectiveError(){const e=this.error||this.serverError;return((e==null?void 0:e.name)||e)==="invalid"&&!this.serverError?!1:e},arrayMeta(){return this.convertMetaToItems(this.items)}},watch:{generation(){this.next=this.getNext(),this.items=H2(this.next,this.field,this.schema)},items:{deep:!0,handler(){const e=this.items.filter(t=>t.schemaInput.hasErrors);if(e.length)e.forEach(t=>{t.open||(t.open=!0)});else{const t=this.items.map(n=>({...n.schemaInput.data,_id:n._id,metaType:"arrayItem",scopedArrayName:this.field.scopedArrayName}));this.next=t}this.triggerValidation&&this.validateAndEmit()}},followingValues:{async handler(e){this.shouldResetConditionalFields&&this.setItemsConditionalFields()},deep:!0}},async mounted(){this.isInline&&(await this.evaluateExternalConditions(),this.setItemsConditionalFields())},methods:{toggleAll(e){this.items=this.items.map(t=>({...t,open:e}))},startDragging(e){this.isDragging=!0,this.disengageAll(),this.toggleEngage({target:e.item})},stopDragging(e){this.isDragging=!1,document.getSelection().removeAllRanges(),this.focusElement(e.item.getAttribute("data-id"))},getInlineMenuItems(e){const t=at(this.inlineContextMenu);return e===0&&t.some(n=>n.action==="move-up")&&(t.find(n=>n.action==="move-up").modifiers=["disabled"]),e+1===this.items.length&&t.some(n=>n.action==="move-down")&&(t.find(n=>n.action==="move-down").modifiers=["disabled"]),t},getTableHeaderClass(e,t){const n=/[^a-zA-Z0-9_-]/g,i=this.$t(e.label).replace(n,"-").toLowerCase();return`${t}--${i}`},toggleEngage(e,t={}){let n=e.target.getAttribute("data-id");if(!n&&!t.exact&&(n=e.target.closest("[data-id]").getAttribute("data-id")),!n)return;const i=this.items.find(s=>s._id===n),o=i.engaged;this.disengageAll(),i.engaged=!o,t.prevent&&e.preventDefault()},disengageAll(){this.items.forEach(e=>{e.engaged=!1})},moveUpdate({oldIndex:e,newIndex:t}){this.items.splice(t,0,this.items.splice(e,1)[0])},getItemData(e){var t;return(t=this.items.find(n=>n._id===e))==null?void 0:t.schemaInput.data},getItemDataWithFollowingValues(e){const t=this.getItemData(e)||{};return{...this.computeFollowingValues(t,!0),...t}},setItemsConditionalFields(e){if(e){this.itemsConditionalFields[e]=this.getConditionalFields(this.getItemDataWithFollowingValues(e));return}for(const t of Object.keys(this.itemsConditionalFields))this.itemsConditionalFields[t]=this.getConditionalFields(this.getItemDataWithFollowingValues(t))},emitValidate(){this.$emit("validate")},validate(e){if(this.items.find(t=>t.schemaInput.hasErrors))return"invalid";if(this.field.required&&!e.length)return"required";if(this.field.min&&e.length<this.field.min)return"min";if(this.field.max&&e.length>this.field.max)return"max";if(e.length&&this.field.fields&&this.field.fields.add){const[t,n]=Object.entries(this.field.fields.add).find(([,i])=>i.unique)||[];if(t){const i=this.next.map(o=>Array.isArray(o[t])?o[t].map(s=>s._id).sort().join("|"):o[t]).filter((o,s,r)=>r.indexOf(o)!==s);if(i.length)return i.forEach(o=>{this.items.forEach(s=>{var r;n.type==="relationship"?(r=s.schemaInput.data[t])==null||r.forEach(a=>{s.schemaInput.fieldState[t].duplicate=o.split("|").find(l=>l===a._id)}):s.schemaInput.fieldState[t].duplicate=s.schemaInput.data[t]===o})}),{name:"duplicate",message:`${this.$t("apostrophe:duplicateError")} ${this.$t(n.label)||t}`}}}return!1},async edit(){const e=await apos.modal.execute("AposArrayEditor",{field:this.field,inputSchema:this.schema,items:this.next,serverError:this.serverError,docId:this.docId,parentFollowingValues:this.followingValues,meta:this.arrayMeta});e&&(this.next=e)},getNext(){return this.modelValue&&Array.isArray(this.modelValue.data)?this.modelValue.data:this.field.def||[]},disableAdd(){return this.field.max&&this.items.length>=this.field.max},remove(e){this.items=this.items.filter(t=>t._id!==e),delete this.itemsConditionalFields[e]},add(){const e=qt();this.items.push({_id:e,schemaInput:{data:this.newInstance()},open:!0,engaged:!1}),this.setItemsConditionalFields(e),this.focusElement(e)},duplicate(e,t){const n=this.items.find(a=>a._id===e),i=this.field.titleField||null,o=qt(),s={_id:o,schemaInput:at(n.schemaInput),open:!1,engaged:!1},r=ol.get(s.schemaInput.data,i);i&&(s.schemaInput.data[i]=`${this.$t("apostrophe:duplicateOf")} ${r}`),t+1===this.items.length?this.items.push(s):this.items.splice(t+1,0,s),this.focusElement(o)},newInstance(){return $c(this.schema)},getLabel(e,t){const n=this.field.titleField||"title",i=this.items.find(o=>o._id===e);return ol.get(i.schemaInput.data,n)||`Item ${t+1}`},toggleOpenInlineItem(e){if(!e)return;const t=e.target.getAttribute("data-id")?e.target.getAttribute("data-id"):e.target.closest("[data-id]").getAttribute("data-id"),n=this.items.find(i=>i._id===t);n&&(n.open=!n.open)},moveEngaged(e,t,n,i={}){const o=this.items.find(r=>r._id===t),s=this.items.indexOf(o);s+n===this.items.length||s+n<0||o.engaged&&(this.moveUpdate({oldIndex:s,newIndex:s+n}),this.focusElement(t),i.prevent&&e.preventDefault())},focusElement(e){this.$nextTick(()=>{const t=this.$refs.root.$el.querySelector(`[data-id="${e}"]`);t&&t.focus()})},getFollowingValues(e){return this.computeFollowingValues(e.schemaInput.data)},visibleSchema(){if(this.field.style!=="table")return this.schema;const e=this.items.find(t=>t.open)||this.items[this.items.length-1];return this.schema.filter(t=>{var n;return((n=this.itemsConditionalFields[e._id])==null?void 0:n.if[t.name])!==!1})},inlineMenuHandler(e,{index:t,id:n}){switch(e.action){case"move-up":this.moveUpdate({oldIndex:t,newIndex:t-1});break;case"move-down":this.moveUpdate({oldIndex:t,newIndex:t+1});break;case"remove":this.remove(n);break;case"duplicate":this.duplicate(n,t);break}}}};function H2(e,t,n){return e.map(i=>({_id:i._id||qt(),schemaInput:{data:i||{}},open:!1,engaged:!1}))}const xte={name:"AposInputArray",components:{draggable:dm},mixins:[Ste]},Mte={class:"apos-input-array-inline-all-controls"},Tte={key:0,class:"apos-input-array-inline-empty"},Ete={class:"apos-input-array-inline-empty-label"},Ote={key:1},$te={key:0,class:"apos-input-array-inline-table"},Ite={class:"apos-input-array-inline-table-header"},Lte={key:0,class:"apos-input-array-inline-table-header-cell"},Dte={class:"apos-input-array-inline-table-cell apos-input-array-inline-table-cell--controls apos-input-array-inline-table-cell--controls--menu"},Rte={key:2},Pte=["data-id","aria-pressed","onKeydown"],Hte={class:"apos-input-array-inline-header-ui apos-input-array-inline-header-ui--left"},Vte={class:"apos-input-array-inline-label"},zte={class:"apos-input-array-inline-header-ui apos-input-array-inline-header-ui--right"},Nte={class:"apos-input-array-inline-body"},Bte={key:3,class:"apos-input-array"},Fte={class:"apos-input-wrapper"};function Wte(e,t,n,i,o,s){const r=E("AposMinMaxCount"),a=E("AposButton"),l=E("AposIndicator"),c=E("AposContextMenu"),u=E("AposSchema"),f=E("draggable"),m=E("AposInputWrapper");return p(),R(m,{ref:"root",field:e.field,error:e.effectiveError,uid:e.uid,items:e.next,"display-options":e.displayOptions,modifiers:[...e.isInlineTable?["full-width"]:[]],meta:e.arrayMeta},il({additional:Q(()=>[D(r,{field:e.field,"model-value":e.next},null,8,["field","model-value"])]),body:Q(()=>[(e.isInlineStandard||e.isInlineTable)&&!e.items.length?(p(),y("div",Tte,[(p(),R(et(e.emptyWhenIcon),{size:50})),A("label",Ete,$(e.$t(e.emptyWhenLabel)),1)])):x("",!0),e.isInlineTable?(p(),y("div",Ote,[e.items.length?(p(),y("table",$te,[A("thead",Ite,[A("tr",null,[e.isDraggable?(p(),y("th",Lte)):x("",!0),(p(!0),y(Ce,null,Ie(e.visibleSchema(),g=>(p(),y("th",{key:g._id,class:te(["apos-input-array-inline-table-header-cell",e.getTableHeaderClass(g,"apos-input-array-inline-table-header-cell")]),style:Vt(g.columnStyle||{})},$(e.$t(g.label)),7))),128)),t[17]||(t[17]=A("th",{class:"apos-input-array-inline-table-header-cell"},null,-1))])]),D(f,{id:e.listId,"item-key":"_id",role:"list",class:te({"apos-input-array-inline-array--is-dragging":e.isDragging}),options:e.dragOptions,tag:"tbody",list:e.items,onUpdate:e.moveUpdate,onStart:e.startDragging,onEnd:e.stopDragging},{item:Q(({element:g,index:v})=>{var w;return[(p(),R(u,{key:g._id,modelValue:g.schemaInput,"onUpdate:modelValue":[_=>g.schemaInput=_,_=>e.setItemsConditionalFields(g._id)],"data-id":g._id,tabindex:e.isDraggable?"0":"-1",class:te(["apos-input-array-inline-table-row",{"apos-input-array-inline-table-row--active":g.open,"apos-input-array-inline-table-row--engaged":g.engaged}]),"data-apos-input-array-inline-item":"",meta:(w=e.arrayMeta[g._id])==null?void 0:w.aposMeta,schema:e.schema,"trigger-validation":e.triggerValidation,generation:e.generation,modifiers:["small","inverted"],"doc-id":e.docId,"following-values":e.getFollowingValues(g),"conditional-fields":e.itemsConditionalFields[g._id],"field-style":"table",onValidate:t[4]||(t[4]=_=>e.emitValidate()),onKeydown:[t[5]||(t[5]=Qe(_=>e.isDraggable?e.toggleEngage(_,{exact:!0,prevent:!0}):{},["space"])),t[6]||(t[6]=Qe(_=>e.isDraggable?e.toggleEngage(_,{exact:!0,prevent:!0}):{},["enter"])),Qe(_=>e.isDraggable?e.moveEngaged(_,g._id,-1,{prevent:!0}):{},["arrow-up"]),Qe(_=>e.isDraggable?e.moveEngaged(_,g._id,1,{prevent:!0}):{},["arrow-down"])]},{before:Q(()=>[e.isDraggable?(p(),y("td",{key:0,class:"apos-input-array-inline-table-cell apos-input-array-inline-table-cell--controls",style:Vt(e.field.columnStyle)},[D(l,{icon:"drag-icon",class:"apos-input-array-inline-table-cell-drag-handle apos-drag-handle",decorative:!1,onKeydown:[Qe(Ue(_=>e.toggleEngage(_,g._id),["prevent"]),["space"]),Qe(Ue(_=>e.toggleEngage(_,g._id),["prevent"]),["enter"])]},null,8,["onKeydown"])],4)):x("",!0)]),after:Q(()=>[A("td",Dte,[e.getInlineMenuItems(v).length>1?(p(),R(c,{key:0,ref:"menu","data-apos-input-array-inline-item-menu":"",class:"",button:{label:"apostrophe:moreOperations",iconOnly:!0,icon:"dots-vertical-icon",type:"subtle",modifiers:["small","no-motion"]},menu:e.getInlineMenuItems(v),"menu-placement":"bottom-end",onKeydown:[t[2]||(t[2]=Qe(_=>_.stopImmediatePropagation(),["space"])),t[3]||(t[3]=Qe(_=>_.stopImmediatePropagation(),["enter"]))],onItemClicked:_=>e.inlineMenuHandler(_,{index:v,id:g._id})},null,8,["menu","onItemClicked"])):(p(),R(a,{key:1,"data-apos-input-array-inline-item-remove":"",label:"apostrophe:removeItem",icon:"close-icon",type:"subtle",modifiers:["inline","no-motion"],"icon-only":!0,onClick:_=>e.remove(g._id)},null,8,["onClick"]))])]),_:2},1032,["modelValue","onUpdate:modelValue","data-id","tabindex","meta","class","schema","trigger-validation","generation","doc-id","following-values","conditional-fields","onKeydown"]))]}),_:1},8,["id","class","options","list","onUpdate","onStart","onEnd"])])):x("",!0)])):e.field.inline?(p(),y("div",Rte,[D(f,{id:e.listId,"item-key":"_id",class:te(["apos-input-array-inline-standard",{"apos-input-array-inline-array--is-dragging":e.isDragging}]),role:"list",options:e.dragOptions,tag:"div",list:e.items,onUpdate:e.moveUpdate,onStart:e.startDragging,onEnd:e.stopDragging},{item:Q(({element:g,index:v})=>[(p(),y("div",{key:g._id,class:te(["apos-input-array-inline-item",{"apos-input-array-inline-item--open":g.open,"apos-input-array-inline-item--engaged":g.engaged,"apos-input-array-inline-item--drag-disabled":!e.isDraggable}]),"data-apos-input-array-inline-item":"","data-id":g._id,tabindex:"0","aria-pressed":g.engaged,role:"listitem",onKeydown:[t[16]||(t[16]=Qe(Ue(w=>e.isDraggable?e.toggleOpenInlineItem(w):{},["prevent","exact"]),["space"])),Qe(Ue(w=>e.isDraggable?e.toggleEngage(w,g._id):{},["prevent","shift"]),["space"]),Qe(Ue(w=>e.isDraggable?e.toggleEngage(w,g._id):{},["prevent"]),["enter"]),Qe(Ue(w=>e.isDraggable?e.moveEngaged(w,g._id,-1):{},["prevent"]),["arrow-up"]),Qe(Ue(w=>e.isDraggable?e.moveEngaged(w,g._id,1):{},["prevent"]),["arrow-down"])]},[A("div",{class:"apos-input-array-inline-header",onDblclick:t[12]||(t[12]=w=>e.toggleOpenInlineItem(w))},[A("div",Hte,[e.isDraggable?(p(),R(l,{key:0,icon:"drag-icon",class:"apos-input-array-inline-header-ui-element"})):x("",!0),A("div",Vte,$(e.getLabel(g._id,v)),1)]),A("div",zte,[D(a,{class:"apos-input-array-inline-header-ui-element apos-input-array-inline-collapse","icon-size":16,label:"apostrophe:close",tooltip:g.open?"Collapse item":"Expand item",icon:g.open?"arrow-collapse-vertical-icon":"arrow-expand-vertical-icon",type:"subtle",modifiers:["inline","no-motion"],"icon-only":!0,onClick:t[7]||(t[7]=w=>e.toggleOpenInlineItem(w)),onKeydown:[t[8]||(t[8]=Qe(w=>w.stopImmediatePropagation(),["space"])),t[9]||(t[9]=Qe(w=>w.stopImmediatePropagation(),["enter"]))]},null,8,["tooltip","icon"]),D(c,{ref:"menu",class:"apos-input-array-inline-header-ui-element","data-apos-input-array-inline-item-menu":"",button:{label:"apostrophe:moreOperations",iconOnly:!0,icon:"dots-vertical-icon",type:"subtle",modifiers:["small","no-motion"]},menu:e.getInlineMenuItems(v),"menu-placement":"bottom-end",onKeydown:[t[10]||(t[10]=Qe(w=>w.stopImmediatePropagation(),["space"])),t[11]||(t[11]=Qe(w=>w.stopImmediatePropagation(),["enter"]))],onItemClicked:w=>e.inlineMenuHandler(w,{index:v,id:g._id})},null,8,["menu","onItemClicked"])])],32),D(Qi,{name:"collapse",duration:400},{default:Q(()=>{var w;return[Ke(A("div",Nte,[(p(),R(u,{key:g._id,modelValue:g.schemaInput,"onUpdate:modelValue":[_=>g.schemaInput=_,_=>e.setItemsConditionalFields(g._id)],"data-apos-id":g._id,class:te(["apos-input-array-inline-schema",g.open?"apos-input-array-inline-item--active":null]),meta:(w=e.arrayMeta[g._id])==null?void 0:w.aposMeta,schema:e.schema,"trigger-validation":e.triggerValidation,generation:e.generation,modifiers:["small","inverted"],"doc-id":e.docId,"following-values":e.getFollowingValues(g),"conditional-fields":e.itemsConditionalFields[g._id],"field-style":e.field.style,onValidate:t[13]||(t[13]=_=>e.emitValidate()),onKeydown:[t[14]||(t[14]=Qe(_=>_.stopImmediatePropagation(),["space"])),t[15]||(t[15]=Qe(_=>_.stopImmediatePropagation(),["enter"]))]},null,8,["modelValue","onUpdate:modelValue","data-apos-id","meta","class","schema","trigger-validation","generation","doc-id","following-values","conditional-fields","field-style"]))],512),[[on,g.open]])]}),_:2},1024)],42,Pte))]),_:1},8,["id","class","options","list","onUpdate","onStart","onEnd"])])):(p(),y("div",Bte,[A("label",Fte,[D(a,{label:e.editLabel,disabled:e.field.readOnly,tooltip:e.tooltip,onClick:e.edit},null,8,["label","disabled","tooltip","onClick"])])])),e.isInlineStandard||e.isInlineTable?(p(),R(a,{key:4,type:"primary",class:"apos-input-array-inline-add-button",label:e.itemLabel,icon:"plus-icon",disabled:e.isAddDisabled,modifiers:["block"],onClick:e.add},null,8,["label","disabled","onClick"])):x("",!0)]),_:2},[e.isInlineStandard?{name:"meta",fn:Q(()=>[A("div",Mte,[D(a,{class:"apos-input-array-inline-all-control apos-input-array-inline-all-control--expand",label:"apostrophe:expandAll",type:"subtle",modifiers:["inline","no-motion"],onClick:t[0]||(t[0]=g=>e.toggleAll(!0))}),D(a,{class:"apos-input-array-inline-all-control apos-input-array-inline-all-control--collapse",label:"apostrophe:collapseAll",type:"subtle",modifiers:["inline","no-motion"],onClick:t[1]||(t[1]=g=>e.toggleAll(!1))})])]),key:"0"}:void 0]),1032,["field","error","uid","items","display-options","modifiers","meta"])}const Ute=I(xte,[["render",Wte],["__scopeId","data-v-ad18fb2e"]]),jte={name:"AposInputAttachment",mixins:[Qn],emits:["upload-started","upload-complete"],data(){return{next:this.modelValue&&typeof this.modelValue.data=="object"?this.modelValue.data:this.field.def||null,disabled:!1,uploading:!1}},async mounted(){this.disabled=this.field.readOnly},methods:{updated(e){this.next=e.length>0?e[0]:null},validate(e){return this.field.required&&!e?"required":!1},async uploadMedia(e){if(!this.disabled||!this.limitReached)try{this.disabled=!0,this.uploading=!0,await apos.notify("apostrophe:uploading",{dismiss:!0,icon:"cloud-upload-icon",interpolate:{name:e.name}});const t=new window.FormData;t.append("file",e);const n=await apos.http.post("/api/v1/@apostrophecms/attachment/upload",{body:t});await apos.notify("apostrophe:uploaded",{type:"success",dismiss:!0,icon:"check-all-icon",interpolate:{name:e.name,count:1}}),this.$emit("upload-complete"),this.modelValue.data=n}catch(t){console.error("Error uploading file.",t);const n=t.body&&t.body.message?t.body.message:this.$t("apostrophe:uploadError");await apos.notify(n,{type:"danger",icon:"alert-circle-icon",dismiss:!0,localize:!1})}finally{this.disabled=!1,this.uploading=!1}}}},qte={name:"AposInputAttachment",mixins:[jte]},Kte={class:"apos-attachment"};function Gte(e,t,n,i,o,s){const r=E("AposFile"),a=E("AposInputWrapper");return p(),R(a,{field:e.field,error:e.effectiveError,uid:e.uid,modifiers:e.modifiers,"display-options":e.displayOptions},{body:Q(()=>[A("div",Kte,[D(r,{"allowed-extensions":e.field.accept,uploading:e.uploading,disabled:e.disabled,attachment:e.next,def:e.field.def,onUploadFile:e.uploadMedia,onUpdate:e.updated},null,8,["allowed-extensions","uploading","disabled","attachment","def","onUploadFile","onUpdate"])])]),_:1},8,["field","error","uid","modifiers","display-options"])}const Jte=I(qte,[["render",Gte]]),Yte={name:"AposInputBoolean",mixins:[Qn],computed:{classList:function(){return["apos-input-wrapper","apos-boolean",{"apos-boolean--toggle":this.field.toggle}]},trueLabel:function(){return this.field.toggle&&this.field.toggle.true&&typeof this.field.toggle.true=="string"?this.field.toggle.true:!1},falseLabel:function(){return this.field.toggle&&this.field.toggle&&typeof this.field.toggle.false=="string"?this.field.toggle.false:!1}},methods:{setValue(e){this.next=e,this.$refs[(!e).toString()].checked=!1},validate(e){return this.field.required&&!e&&e!==!1?"required":!1}}},Zte={name:"AposInputBoolean",mixins:[Yte]},Xte=["id","checked","disabled"],Qte=["for"],ene=["id","checked","disabled"],tne=["for"];function nne(e,t,n,i,o,s){const r=E("circle-icon"),a=E("AposInputWrapper");return p(),R(a,{modifiers:e.modifiers,field:e.field,error:e.effectiveError,uid:e.uid,"display-options":e.displayOptions},{body:Q(()=>[A("div",{class:te(e.classList)},[A("input",{id:`${e.uid}-true`,ref:"true",class:"apos-sr-only apos-boolean__input apos-boolean__input--true",type:"radio",value:!0,checked:e.modelValue.data===!0,disabled:e.field.readOnly,onChange:t[0]||(t[0]=l=>e.setValue(!0))},null,40,Xte),A("label",{for:`${e.uid}-true`,class:"apos-boolean__label apos-input"},[Ke(D(r,{size:12,class:"apos-boolean__icon",title:""},null,512),[[on,!e.field.toggle]]),Et(" "+$(e.trueLabel||e.$t("apostrophe:yes")),1)],8,Qte),A("input",{id:`${e.uid}-false`,ref:"false",class:"apos-sr-only apos-boolean__input apos-boolean__input--false",type:"radio",value:!1,checked:e.modelValue.data===!1,disabled:e.field.readOnly,onChange:t[1]||(t[1]=l=>e.setValue(!1))},null,40,ene),A("label",{for:`${e.uid}-false`,class:"apos-boolean__label apos-input"},[Ke(D(r,{size:12,class:"apos-boolean__icon",title:""},null,512),[[on,!e.field.toggle]]),Et(" "+$(e.falseLabel||e.$t("apostrophe:no")),1)],8,tne)],2)]),_:1},8,["modifiers","field","error","uid","display-options"])}const ine=I(Zte,[["render",nne],["__scopeId","data-v-dfcadec8"]]);function na(e,t,n={}){const i=new Error("debounce:canceled");i.name="debounce.canceled";let o,s=!1,r=!0,a=!1;const l=(u,f,m,g)=>{function v(){if(s)return f(i);if(!r){clearTimeout(o),o=l(u,f,m,g||100);return}r=!1;const w=e.apply(this,m);if(w instanceof Promise)return w.then(_=>{if(s)return f(i);u(_)}).catch(f).finally(()=>{r=!0});r=!0,u(w)}return setTimeout(v,g)},c=async(...u)=>{const f=new Promise((m,g)=>{if(s)return g(i);if(a){a=!1,o=l(m,g,u,0);return}clearTimeout(o),o=l(m,g,u,t)});try{const m=await f;return n.onSuccess?(await n.onSuccess(m),null):f}catch(m){if(m.name!=="debounce.canceled"||!n.onSuccess)throw m;return null}};return c.cancel=()=>{s=!0,clearTimeout(o),o=null},c.skipDelay=(...u)=>(a=!0,c(...u)),c}class one{constructor(){this.queue=[],this.running=!1}hasTasks(){return this.queue.length>0||this.running}count(){return this.queue.length}add(t){return new Promise((n,i)=>{this.queue.push({task:t,resolve:n,reject:i}),this.run()})}async run(){if(this.running)return;const t=this.queue.shift();if(!t)return!1;try{this.running=!0;const n=await t.task();this.running=!1,t.resolve(n)}catch(n){this.running=!1,t.reject(n)}finally{this.run()}return!0}}function H4(){const e=new one;return{add:t=>e.add(t),count:()=>e.count(),hasTasks:()=>e.hasTasks()}}const sne=500,t0={data(){return{choices:[],fieldReady:!1}},async mounted(){this.debouncedUpdateChoices=na(this.getChoices,sne,{onSuccess:this.updateChoices}),await this.debouncedUpdateChoices.skipDelay(),this.fieldReady=!0},watch:{followingValues:{deep:!0,handler(){return this.debouncedUpdateChoices&&this.debouncedUpdateChoices()}}},methods:{async getChoices(){if(this.fieldReady=!1,typeof this.field.choices=="string"){const e=this.options.action,t=await apos.http.post(`${e}/choices`,{qs:{fieldId:this.field._id,docId:this.docId},busy:!0,body:{following:{...this.followingValues}}});if(t.choices)return t.choices}else return this.field.choices},updateChoices(e){this.choices=e,this.fieldReady=!0,this.field.type==="select"&&this.prependEmptyChoice(),this.validate(this.next)},prependEmptyChoice(){const e=Object.hasOwn(this.field,"def"),t=this.choices.find(n=>n.value===null);!e&&!t&&this.choices.unshift({label:"",value:null})}}},rne={name:"AposInputCheckboxes",mixins:[Qn,t0],beforeMount(){this.modelValue.data=Array.isArray(this.modelValue.data)?this.modelValue.data:[]},methods:{getChoiceId(e,t){return(e+JSON.stringify(t)).replace(/\s+/g,"")},watchValue(){this.error=this.modelValue.error,this.next=this.modelValue.data||[]},validate(e){return!Array.isArray(this.choices)||!Array.isArray(e)?"malformed":this.field.required&&!e.length?"required":this.field.min&&e!=null&&e.length<this.field.min?this.$t("apostrophe:minUi",{number:this.field.min}):this.field.max&&e!=null&&e.length>this.field.max?this.$t("apostrophe:maxUi",{number:this.field.max}):(Array.isArray(e)&&e.forEach(t=>{if(!this.choices.map(n=>n.value).includes(t))return"invalid"}),!1)},selectItems(e){if(e.value==="__all"){this.modelValue.data=this.choices.length===this.modelValue.data.length?[]:this.choices.map(({value:t})=>t);return}this.modelValue.data.includes(e.value)?this.modelValue.data=this.modelValue.data.filter(t=>t!==e.value):this.modelValue.data.push(e.value)}}},ane={name:"AposInputCheckboxes",mixins:[rne]};function lne(e,t,n,i,o,s){const r=E("AposCombo"),a=E("AposCheckbox"),l=E("AposInputWrapper");return p(),R(l,{field:e.field,error:e.effectiveError,uid:e.uid,modifiers:e.modifiers,"display-options":e.displayOptions},{body:Q(()=>[e.field.style==="combo"&&e.choices.length?(p(),R(r,{key:0,choices:e.choices,field:e.field,"model-value":e.modelValue,onSelectItems:e.selectItems},null,8,["choices","field","model-value","onSelectItems"])):(p(!0),y(Ce,{key:1},Ie(e.choices,c=>(p(),R(a,{id:e.getChoiceId(e.uid,c.value),key:c.value,modelValue:e.next,"onUpdate:modelValue":t[0]||(t[0]=u=>e.next=u),for:e.getChoiceId(e.uid,c.value),choice:c,field:e.field},null,8,["id","modelValue","for","choice","field"]))),128))]),_:1},8,["field","error","uid","modifiers","display-options"])}const cne=I(ane,[["render",lne]]);var V4={exports:{}};(function(e,t){(function(n,i){e.exports=i()})(wi,function(){var n=1e3,i=6e4,o=36e5,s="millisecond",r="second",a="minute",l="hour",c="day",u="week",f="month",m="quarter",g="year",v="date",w="Invalid Date",_=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,k=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,L={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(ne){var oe=["th","st","nd","rd"],W=ne%100;return"["+ne+(oe[(W-20)%10]||oe[W]||oe[0])+"]"}},P=function(ne,oe,W){var q=String(ne);return!q||q.length>=oe?ne:""+Array(oe+1-q.length).join(W)+ne},M={s:P,z:function(ne){var oe=-ne.utcOffset(),W=Math.abs(oe),q=Math.floor(W/60),Z=W%60;return(oe<=0?"+":"-")+P(q,2,"0")+":"+P(Z,2,"0")},m:function ne(oe,W){if(oe.date()<W.date())return-ne(W,oe);var q=12*(W.year()-oe.year())+(W.month()-oe.month()),Z=oe.clone().add(q,f),N=W-Z<0,le=oe.clone().add(q+(N?-1:1),f);return+(-(q+(W-Z)/(N?Z-le:le-Z))||0)},a:function(ne){return ne<0?Math.ceil(ne)||0:Math.floor(ne)},p:function(ne){return{M:f,y:g,w:u,d:c,D:v,h:l,m:a,s:r,ms:s,Q:m}[ne]||String(ne||"").toLowerCase().replace(/s$/,"")},u:function(ne){return ne===void 0}},F="en",z={};z[F]=L;var ee="$isDayjsObject",ie=function(ne){return ne instanceof J||!(!ne||!ne[ee])},K=function ne(oe,W,q){var Z;if(!oe)return F;if(typeof oe=="string"){var N=oe.toLowerCase();z[N]&&(Z=N),W&&(z[N]=W,Z=N);var le=oe.split("-");if(!Z&&le.length>1)return ne(le[0])}else{var ce=oe.name;z[ce]=oe,Z=ce}return!q&&Z&&(F=Z),Z||!q&&F},ae=function(ne,oe){if(ie(ne))return ne.clone();var W=typeof oe=="object"?oe:{};return W.date=ne,W.args=arguments,new J(W)},B=M;B.l=K,B.i=ie,B.w=function(ne,oe){return ae(ne,{locale:oe.$L,utc:oe.$u,x:oe.$x,$offset:oe.$offset})};var J=function(){function ne(W){this.$L=K(W.locale,null,!0),this.parse(W),this.$x=this.$x||W.x||{},this[ee]=!0}var oe=ne.prototype;return oe.parse=function(W){this.$d=function(q){var Z=q.date,N=q.utc;if(Z===null)return new Date(NaN);if(B.u(Z))return new Date;if(Z instanceof Date)return new Date(Z);if(typeof Z=="string"&&!/Z$/i.test(Z)){var le=Z.match(_);if(le){var ce=le[2]-1||0,ye=(le[7]||"0").substring(0,3);return N?new Date(Date.UTC(le[1],ce,le[3]||1,le[4]||0,le[5]||0,le[6]||0,ye)):new Date(le[1],ce,le[3]||1,le[4]||0,le[5]||0,le[6]||0,ye)}}return new Date(Z)}(W),this.init()},oe.init=function(){var W=this.$d;this.$y=W.getFullYear(),this.$M=W.getMonth(),this.$D=W.getDate(),this.$W=W.getDay(),this.$H=W.getHours(),this.$m=W.getMinutes(),this.$s=W.getSeconds(),this.$ms=W.getMilliseconds()},oe.$utils=function(){return B},oe.isValid=function(){return this.$d.toString()!==w},oe.isSame=function(W,q){var Z=ae(W);return this.startOf(q)<=Z&&Z<=this.endOf(q)},oe.isAfter=function(W,q){return ae(W)<this.startOf(q)},oe.isBefore=function(W,q){return this.endOf(q)<ae(W)},oe.$g=function(W,q,Z){return B.u(W)?this[q]:this.set(Z,W)},oe.unix=function(){return Math.floor(this.valueOf()/1e3)},oe.valueOf=function(){return this.$d.getTime()},oe.startOf=function(W,q){var Z=this,N=!!B.u(q)||q,le=B.p(W),ce=function(Lt,pt){var Gt=B.w(Z.$u?Date.UTC(Z.$y,pt,Lt):new Date(Z.$y,pt,Lt),Z);return N?Gt:Gt.endOf(c)},ye=function(Lt,pt){return B.w(Z.toDate()[Lt].apply(Z.toDate("s"),(N?[0,0,0,0]:[23,59,59,999]).slice(pt)),Z)},Le=this.$W,Re=this.$M,Se=this.$D,He="set"+(this.$u?"UTC":"");switch(le){case g:return N?ce(1,0):ce(31,11);case f:return N?ce(1,Re):ce(0,Re+1);case u:var ot=this.$locale().weekStart||0,lt=(Le<ot?Le+7:Le)-ot;return ce(N?Se-lt:Se+(6-lt),Re);case c:case v:return ye(He+"Hours",0);case l:return ye(He+"Minutes",1);case a:return ye(He+"Seconds",2);case r:return ye(He+"Milliseconds",3);default:return this.clone()}},oe.endOf=function(W){return this.startOf(W,!1)},oe.$set=function(W,q){var Z,N=B.p(W),le="set"+(this.$u?"UTC":""),ce=(Z={},Z[c]=le+"Date",Z[v]=le+"Date",Z[f]=le+"Month",Z[g]=le+"FullYear",Z[l]=le+"Hours",Z[a]=le+"Minutes",Z[r]=le+"Seconds",Z[s]=le+"Milliseconds",Z)[N],ye=N===c?this.$D+(q-this.$W):q;if(N===f||N===g){var Le=this.clone().set(v,1);Le.$d[ce](ye),Le.init(),this.$d=Le.set(v,Math.min(this.$D,Le.daysInMonth())).$d}else ce&&this.$d[ce](ye);return this.init(),this},oe.set=function(W,q){return this.clone().$set(W,q)},oe.get=function(W){return this[B.p(W)]()},oe.add=function(W,q){var Z,N=this;W=Number(W);var le=B.p(q),ce=function(Re){var Se=ae(N);return B.w(Se.date(Se.date()+Math.round(Re*W)),N)};if(le===f)return this.set(f,this.$M+W);if(le===g)return this.set(g,this.$y+W);if(le===c)return ce(1);if(le===u)return ce(7);var ye=(Z={},Z[a]=i,Z[l]=o,Z[r]=n,Z)[le]||1,Le=this.$d.getTime()+W*ye;return B.w(Le,this)},oe.subtract=function(W,q){return this.add(-1*W,q)},oe.format=function(W){var q=this,Z=this.$locale();if(!this.isValid())return Z.invalidDate||w;var N=W||"YYYY-MM-DDTHH:mm:ssZ",le=B.z(this),ce=this.$H,ye=this.$m,Le=this.$M,Re=Z.weekdays,Se=Z.months,He=Z.meridiem,ot=function(pt,Gt,V,j){return pt&&(pt[Gt]||pt(q,N))||V[Gt].slice(0,j)},lt=function(pt){return B.s(ce%12||12,pt,"0")},Lt=He||function(pt,Gt,V){var j=pt<12?"AM":"PM";return V?j.toLowerCase():j};return N.replace(k,function(pt,Gt){return Gt||function(V){switch(V){case"YY":return String(q.$y).slice(-2);case"YYYY":return B.s(q.$y,4,"0");case"M":return Le+1;case"MM":return B.s(Le+1,2,"0");case"MMM":return ot(Z.monthsShort,Le,Se,3);case"MMMM":return ot(Se,Le);case"D":return q.$D;case"DD":return B.s(q.$D,2,"0");case"d":return String(q.$W);case"dd":return ot(Z.weekdaysMin,q.$W,Re,2);case"ddd":return ot(Z.weekdaysShort,q.$W,Re,3);case"dddd":return Re[q.$W];case"H":return String(ce);case"HH":return B.s(ce,2,"0");case"h":return lt(1);case"hh":return lt(2);case"a":return Lt(ce,ye,!0);case"A":return Lt(ce,ye,!1);case"m":return String(ye);case"mm":return B.s(ye,2,"0");case"s":return String(q.$s);case"ss":return B.s(q.$s,2,"0");case"SSS":return B.s(q.$ms,3,"0");case"Z":return le}return null}(pt)||le.replace(":","")})},oe.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},oe.diff=function(W,q,Z){var N,le=this,ce=B.p(q),ye=ae(W),Le=(ye.utcOffset()-this.utcOffset())*i,Re=this-ye,Se=function(){return B.m(le,ye)};switch(ce){case g:N=Se()/12;break;case f:N=Se();break;case m:N=Se()/3;break;case u:N=(Re-Le)/6048e5;break;case c:N=(Re-Le)/864e5;break;case l:N=Re/o;break;case a:N=Re/i;break;case r:N=Re/n;break;default:N=Re}return Z?N:B.a(N)},oe.daysInMonth=function(){return this.endOf(f).$D},oe.$locale=function(){return z[this.$L]},oe.locale=function(W,q){if(!W)return this.$L;var Z=this.clone(),N=K(W,q,!0);return N&&(Z.$L=N),Z},oe.clone=function(){return B.w(this.$d,this)},oe.toDate=function(){return new Date(this.valueOf())},oe.toJSON=function(){return this.isValid()?this.toISOString():null},oe.toISOString=function(){return this.$d.toISOString()},oe.toString=function(){return this.$d.toUTCString()},ne}(),he=J.prototype;return ae.prototype=he,[["$ms",s],["$s",r],["$m",a],["$H",l],["$W",c],["$M",f],["$y",g],["$D",v]].forEach(function(ne){he[ne[1]]=function(oe){return this.$g(oe,ne[0],ne[1])}}),ae.extend=function(ne,oe){return ne.$i||(ne(oe,J,ae),ne.$i=!0),ae},ae.locale=K,ae.isDayjs=ie,ae.unix=function(ne){return ae(1e3*ne)},ae.en=z[F],ae.Ls=z,ae.p={},ae})})(V4);var dne=V4.exports;const Kr=Mc(dne),une={mixins:[Qn],emits:["return"],data(){return{next:this.modelValue&&this.modelValue.data||null,date:"",time:"",disabled:!this.field.required}},mounted(){this.initDateAndTime()},watch:{"field.required"(e){e&&(this.disabled=!1,this.date&&this.setDateAndTime())}},methods:{toggle(){this.disabled=!this.disabled,this.disabled&&(this.next=null)},validate(){if(this.field.required&&!this.next)return"required"},initDateAndTime(){this.next&&(this.date=Kr(this.next).format("YYYY-MM-DD"),this.time=Kr(this.next).format("HH:mm:ss"),this.disabled=!1)},setDateAndTime(){this.date?(this.next=Kr(`${this.date} ${this.time}`.trim()).toISOString(),this.disabled=!1):(this.next=null,this.disabled=!0)}}},hne={name:"AposInputDateAndTime",mixins:[une]},fne={class:"apos-input-wrapper"},pne={class:"apos-input--label"};function mne(e,t,n,i,o,s){const r=E("AposToggle"),a=E("AposInputWrapper");return p(),R(a,{modifiers:e.modifiers,field:e.field,error:e.effectiveError,uid:e.uid,"display-options":e.displayOptions},{body:Q(()=>[A("div",fne,[e.field.required?x("",!0):(p(),R(r,{key:0,modelValue:e.disabled,"onUpdate:modelValue":t[0]||(t[0]=l=>e.disabled=l),class:"apos-toggle",onToggle:e.toggle},null,8,["modelValue","onToggle"])),Ke(A("input",{"onUpdate:modelValue":t[1]||(t[1]=l=>e.date=l),class:te(["apos-input apos-input--date",{"apos-input--disabled":e.disabled}]),type:"date",onChange:t[2]||(t[2]=(...l)=>e.setDateAndTime&&e.setDateAndTime(...l))},null,34),[[Eo,e.date]]),A("span",pne,$(e.$t("apostrophe:at")),1),Ke(A("input",{"onUpdate:modelValue":t[3]||(t[3]=l=>e.time=l),class:te(["apos-input apos-input--time",{"apos-input--disabled":e.disabled}]),type:"time",onChange:t[4]||(t[4]=(...l)=>e.setDateAndTime&&e.setDateAndTime(...l))},null,34),[[Eo,e.time]])])]),_:1},8,["modifiers","field","error","uid","display-options"])}const gne=I(hne,[["render",mne],["__scopeId","data-v-0b54bbde"]]),bne={name:"AposInputObject",emits:["validate"],mixins:[Qn,_4,C4],props:{generation:{type:Number,required:!1,default(){return null}},docId:{type:String,required:!1,default(){return null}}},data(){const e=this.getNext();return{schemaInput:{data:e},next:e}},computed:{followingValuesWithParent(){return this.computeFollowingValues(this.schemaInput.data)},dataWithfollowingValues(){return{...this.computeFollowingValues(this.schemaInput.data,!0),...this.values}},shouldResetConditionalFields(){return i3(this.schema)},schema(){return this.field.schema},values(){return this.schemaInput.data||{}},objectMeta(){const e=at(this.fieldMeta),t={};for(const n of Object.keys(this.meta))n.startsWith("@")&&(t[n]=this.meta[n]);return e.aposMeta={...this.fieldMeta.aposMeta||{},...t},e},currentDocMeta(){return this.objectMeta.aposMeta||{}},currentDocServerErrors(){var t,n;let e=null;return(((n=(t=this.serverError)==null?void 0:t.data)==null?void 0:n.errors)||[]).forEach(i=>{i.path&&(e=e||{},e[i.path]=i)}),e}},watch:{schemaInput:{deep:!0,handler(){this.schemaInput.hasErrors||(this.next=this.schemaInput.data),this.triggerValidation&&this.validateAndEmit()}},followingValues:{async handler(e){this.shouldResetConditionalFields&&this.evaluateConditions(this.dataWithfollowingValues)},deep:!0},generation(){this.next=this.getNext(),this.schemaInput={data:this.next}}},async created(){await this.evaluateExternalConditions(this.values),this.evaluateConditions(this.dataWithfollowingValues)},methods:{emitValidate(){this.$emit("validate")},validate(e){if(this.schemaInput.hasErrors)return"invalid"},getNext(){var e;return(e=this.modelValue)!=null&&e.data?this.modelValue.data:this.field.def||{}}}},yne={name:"AposInputObject",mixins:[bne]},vne={class:"apos-input-object"},wne={class:"apos-input-wrapper"};function _ne(e,t,n,i,o,s){const r=E("AposSchema"),a=E("AposInputWrapper");return p(),R(a,{field:e.field,error:null,uid:e.uid,"display-options":e.displayOptions,meta:e.objectMeta},{body:Q(()=>[A("div",vne,[A("div",wne,[D(r,{ref:"schema",modelValue:e.schemaInput,"onUpdate:modelValue":[t[0]||(t[0]=l=>e.schemaInput=l),t[1]||(t[1]=l=>e.evaluateConditions(e.values))],meta:e.currentDocMeta,schema:e.schema,"trigger-validation":e.triggerValidation,generation:e.generation,"doc-id":e.docId,"conditional-fields":e.conditionalFields,"following-values":e.followingValuesWithParent,"server-errors":e.currentDocServerErrors,onValidate:t[2]||(t[2]=l=>e.emitValidate())},null,8,["modelValue","meta","schema","trigger-validation","generation","doc-id","conditional-fields","following-values","server-errors"])])])]),_:1},8,["field","uid","display-options","meta"])}const Cne=I(yne,[["render",_ne],["__scopeId","data-v-50968169"]]),Ane={name:"AposInputPassword",mixins:[Qn],emits:["return"],computed:{tabindex(){return this.field.disableFocus?"-1":"0"}},methods:{validate(e){return this.field.required&&!e.length?{message:"required"}:this.field.min&&e.length&&e.length<this.field.min?{message:this.$t("apostrophe:passwordErrorMin",{min:this.field.min})}:this.field.max&&e.length&&e.length>this.field.max?{message:this.$t("apostrophe:passwordErrorMax",{max:this.field.max})}:!1},emitReturn(){this.$emit("return")}}},kne={name:"AposInputPassword",mixins:[Ane],emits:["return"]},Sne={class:"apos-input-wrapper"},xne=["id","placeholder","disabled","required","tabindex","autocomplete"];function Mne(e,t,n,i,o,s){const r=E("AposInputWrapper");return p(),R(r,{modifiers:e.modifiers,field:e.field,error:e.effectiveError,uid:e.uid,"display-options":e.displayOptions},{body:Q(()=>[A("div",Sne,[Ke(A("input",{id:e.uid,"onUpdate:modelValue":t[0]||(t[0]=a=>e.next=a),type:"password",class:"apos-input apos-input--password",placeholder:e.$t(e.field.placeholder),disabled:e.field.readOnly,required:e.field.required,tabindex:e.tabindex,autocomplete:e.field.autocomplete,onKeydown:t[1]||(t[1]=Qe((...a)=>e.emitReturn&&e.emitReturn(...a),["enter"]))},null,40,xne),[[Eo,e.next]])])]),_:1},8,["modifiers","field","error","uid","display-options"])}const Tne=I(kne,[["render",Mne]]),Ene={name:"AposInputRadio",components:{InformationIcon:ZS},mixins:[Qn,t0],methods:{getChoiceId(e,t){return(e+JSON.stringify(t)).replace(/\s+/g,"")},validate(e){const t=this.choices.some(n=>n.value===e);return this.field.required&&!t&&!e?"required":e&&!t?"invalid":!1},change(e){this.next=this.choices.find(t=>t.value===JSON.parse(e)).value}}},One={name:"AposInputRadio",mixins:[Ene]},$ne=["for"],Ine=["id","value","name","checked","disabled","onChange"],Lne={class:"apos-input-indicator","aria-hidden":"true"},Dne={class:"apos-choice-label-text"};function Rne(e,t,n,i,o,s){const r=E("AposIndicator"),a=E("AposInputWrapper");return p(),R(a,{field:e.field,error:e.effectiveError,uid:e.uid,"display-options":e.displayOptions,modifiers:e.modifiers},{body:Q(()=>[(p(!0),y(Ce,null,Ie(e.choices,({label:l,value:c,tooltip:u})=>(p(),y("label",{key:c,class:te(["apos-choice-label",{"apos-choice-label--disabled":e.field.readOnly}]),for:e.getChoiceId(e.uid,c)},[A("input",{id:e.getChoiceId(e.uid,c),type:"radio",class:"apos-sr-only apos-input--choice apos-input--radio",value:JSON.stringify(c),name:e.field.name,checked:e.next===c,tabindex:"1",disabled:e.field.readOnly,onChange:f=>e.change(f.target.value)},null,40,Ine),A("span",Lne,[e.next===c?(p(),R(et(`${e.next===c?"check-bold-icon":"span"}`),{key:0,size:8})):x("",!0)]),A("span",Dne,[Et($(e.$t(l))+" ",1),u?(p(),R(r,{key:0,class:"apos-choice-label-info",tooltip:u,"icon-size":14,icon:"information-icon"},null,8,["tooltip"])):x("",!0)])],10,$ne))),128))]),_:1},8,["field","error","uid","display-options","modifiers"])}const Pne=I(One,[["render",Rne],["__scopeId","data-v-6e505048"]]),Hne={name:"AposInputRange",mixins:[Qn],data(){return{next:this.initNext(),unit:this.field.unit||""}},mounted(){this.$refs.range.addEventListener("input",this.updateUI),this.updateUI()},computed:{isMicro(){return this.modifiers.includes("micro")},minLabel(){return this.field.min+this.unit},maxLabel(){return this.field.max+this.unit},valueLabel(){return this.next+this.unit},isSet(){return typeof this.next=="number"&&this.next>=this.field.min}},methods:{initNext(){return this.modelValue&&typeof this.modelValue.data=="number"?this.modelValue.data:this.getDefault()},unset(){this.next=this.getDefault(),this.updateUI()},getDefault(){return typeof this.field.def=="number"?this.field.def:this.field.min-1},updateUI(){const e=this.$refs.range.min,t=this.$refs.range.max,n=this.next<e?e:this.next;this.$refs.range.style.backgroundSize=(n-e)*100/(t-e)+"% 100%"},validate(e){return this.field.required&&!e&&e!==0?"required":!1}}},Vne={name:"AposInputRange",mixins:[Hne]},zne={class:"apos-range__value","aria-hidden":"true"},Nne={class:"apos-range__value-input"},Bne={key:0},Fne={class:"apos-input-wrapper"},Wne={class:"apos-range"},Une=["id","min","max","step","disabled"],jne={key:0,class:"apos-range__scale"},qne={class:"apos-sr-only"},Kne={class:"apos-sr-only"};function Gne(e,t,n,i,o,s){const r=E("AposIndicator"),a=E("AposButton"),l=E("AposInputWrapper"),c=xi("apos-tooltip");return p(),R(l,{modifiers:e.modifiers,field:e.field,error:e.effectiveError,uid:e.uid,"display-options":e.displayOptions},il({body:Q(()=>[A("div",Fne,[Ke((p(),y("div",Wne,[Ke(A("input",{id:e.uid,ref:"range","onUpdate:modelValue":t[0]||(t[0]=u=>e.next=u),type:"range",min:e.field.min,max:e.field.max,step:e.field.step,class:"apos-range__input",disabled:e.field.readOnly},null,8,Une),[[Eo,e.next,void 0,{number:!0}]]),e.isMicro?x("",!0):(p(),y("div",jne,[A("span",null,[A("span",qne,$(e.$t("apostrophe:minLabel")),1),Et(" "+$(e.minLabel),1)]),A("span",null,[A("span",Kne,$(e.$t("apostrophe:maxLabel")),1),Et(" "+$(e.maxLabel),1)])]))])),[[c,e.tooltip]]),e.isMicro?x("",!0):(p(),y("div",{key:0,class:te(["apos-range__value",{"apos-is-unset":!e.isSet}]),"aria-hidden":"true"},[Et($(e.valueLabel)+" ",1),D(a,{type:"quiet",label:"apostrophe:clear",class:"apos-range__clear",modifiers:["no-motion"],onClick:e.unset},null,8,["onClick"])],2))])]),_:2},[e.isMicro?{name:"info",fn:Q(()=>[A("div",zne,[e.isSet?(p(),R(r,{key:0,class:"apos-range__clear",icon:"close-icon",onClick:e.unset},null,8,["onClick"])):x("",!0),A("div",Nne,[e.isSet?(p(),y("span",Bne,$(e.valueLabel),1)):x("",!0)])])]),key:"0"}:void 0]),1032,["modifiers","field","error","uid","display-options"])}const Jne=I(Vne,[["render",Gne],["__scopeId","data-v-ca37506c"]]);async function V2(e,t,n){const i=Tb(e,t);for(const{value:o,field:s,context:r}of i)r[s.name]=await Mb(o,s,n)}async function Mb(e,t,n){if(!t.postprocessor||!e)return e;const i=apos.modules[t.withType];return(await apos.http.post(`${i.action}/${t.postprocessor}`,{qs:{aposMode:"draft"},body:{relationship:e,widgetOptions:n},busy:!0})).relationship}function Tb(e,t){let n=[];for(const i of e)if(i.type==="relationship")n.push({context:t,field:i,value:t[i.name]});else if(i.type==="array")for(const o of t[i.name]||[])n=[...n,Tb(i.schema,o)];else i.type==="object"&&(n=[...n,Tb(i.schema,t[i.name]||{})]);return n}const Yne={name:"AposInputRelationship",mixins:[Qn],emits:["input"],data(){var i;const e=this.modelValue&&Array.isArray(this.modelValue.data)?at(this.modelValue.data):at(this.field.def)||[],t=Object.fromEntries((e||[]).filter(o=>o._fields).map(o=>[o._id,o._fields])),n=this.field.suggestionFields||((i=apos.modules[this.field.withType])==null?void 0:i.relationshipSuggestionFields);return{searchTerm:"",searchList:[],searchFocusIndex:null,searchHint:null,searchSuggestion:null,suggestionFields:n,next:e,subfields:t,disabled:!1,searching:!1,choosing:!1,relationshipSchema:null}},computed:{limitReached(){return this.field.max===this.next.length},pluralLabel(){return apos.modules[this.field.withType].pluralLabel},placeholder(){return this.field.placeholder||{key:"apostrophe:searchDocType",type:this.$t(this.pluralLabel)}},browseLabel(){return{key:"apostrophe:browseDocType",type:this.$t(this.pluralLabel)}},suggestion(){return{disabled:!0,tooltip:!1,icon:!1,classes:["suggestion"],title:this.$t(this.field.suggestionLabel),help:this.$t({key:this.field.suggestionHelp||"apostrophe:relationshipSuggestionHelp",type:this.$t(this.pluralLabel)}),customFields:["help"]}},hint(){return{disabled:!0,tooltip:!1,icon:"binoculars-icon",iconSize:35,classes:["hint"],title:this.$t("apostrophe:relationshipSuggestionNoResults"),help:this.$t({key:this.field.browse?"apostrophe:relationshipSuggestionSearchAndBrowse":"apostrophe:relationshipSuggestionSearch",type:this.$t(this.pluralLabel)}),customFields:["help"]}},chooserComponent(){return apos.modules[this.field.withType].components.managerModal},disableUnpublished(){return apos.modules[this.field.withType].localized},buttonModifiers(){const e=["small"];return this.modifiers.includes("no-search")&&e.push("block"),e},minSize(){const[e={}]=apos.area.widgetOptions;return e.minSize||[]},duplicate(){var e;return(e=this.modelValue)!=null&&e.duplicate?"apos-input--error":null},widgetOptions(){return apos.area.widgetOptions[0]}},watch:{next(e,t){for(const n of t)this.subfields[n._id]=n._fields;for(const n of e)Object.keys(n._fields||{}).length||(n._fields=this.field.schema&&(this.subfields[n._id]?this.subfields[n._id]:this.getDefault()))}},mounted(){this.checkLimit()},methods:{validate(e){return this.checkLimit(),this.field.required&&!e.length?{message:"required"}:this.field.min&&this.field.min>e.length?{message:`minimum of ${this.field.min} required`}:!1},checkLimit(){this.limitReached?this.searchTerm="Limit reached!":this.searchTerm==="Limit reached!"&&(this.searchTerm=""),this.disabled=!!this.limitReached},async updateSelected(e){this.next=await Mb(e,this.field,this.widgetOptions)},async search(e){const t=apos.modules[this.field.withType].action,n=apos.modules["@apostrophecms/page"].validPageTypes.includes(this.field.withType);this.field.suggestionLimit&&(e.perPage=this.field.suggestionLimit),this.field.suggestionSort&&(e.sort=this.field.suggestionSort),this.field.withType==="@apostrophecms/image"&&apos.bus.$emit("piece-relationship-query",e),n&&(e.type=this.field.withType),this.searching=!0;const i=await apos.http.get(t,{busy:!1,draft:!0,qs:e}),o=a=>!this.next.map(l=>l._id).includes(a._id),s=a=>({...a,disabled:this.disableUnpublished&&!a.lastPublishedAt}),r=(i.results||[]).filter(o).map(s);this.searchSuggestion=e.autocomplete?null:this.suggestion,this.searchHint=!e.autocomplete||!r.length?this.hint:null,this.searchList=[...r].filter(Boolean),this.searching=!1},async input(){if(this.searching)return;const e=this.searchTerm.trim(),t=e.length?{autocomplete:e}:{};await this.search(t),this.searchList.length&&(this.searchFocusIndex=0)},handleFocusOut(){setTimeout(()=>{this.searchList=[]},300),this.searchFocusIndex=null},handleKeydown(e){switch(e.key){case"ArrowDown":if(this.searchFocusIndex+1<this.searchList.length){this.searchFocusIndex++;return}this.searchList.length||this.input();break;case"ArrowUp":if(this.searchFocusIndex-1>=0)return this.searchFocusIndex--;this.searchList.length||this.input();break;case"Enter":this.searchFocusIndex!==null&&this.searchList[this.searchFocusIndex]&&(this.updateSelected([...this.next,this.searchList[this.searchFocusIndex]]),this.handleFocusOut(),this.input());break;case"Escape":this.handleFocusOut(),e.stopPropagation();break}},watchValue(){this.error=this.modelValue.error,this.next=Array.isArray(this.modelValue.data)?this.modelValue.data:[]},async choose(){const e=await apos.modal.execute(this.chooserComponent,{title:this.field.label||this.field.name,moduleName:this.field.withType,chosen:this.next,relationshipField:this.field});e&&this.updateSelected(e)},getDefault(){return $c(this.field.schema)},async editRelationship(e){const t=this.field.editor||"AposRelationshipEditor",n=await apos.modal.execute(t,{schema:this.field.schema,item:e,title:e.title,"model-value":e._fields});if(!n)return;const i=this.next.map(o=>o._id===e._id?{...e,_fields:n}:o);this.next=await Mb(i,this.field,this.widgetOptions)}}},Zne={name:"AposInputRelationship",mixins:[Yne]},Xne={key:0,class:"apos-field__min-size"},Qne={class:"apos-input-wrapper apos-input-relationship"},eie={class:"apos-input-relationship__input-wrapper"},tie=["id","aria-owns","aria-expanded","placeholder","disabled","required"];function nie(e,t,n,i,o,s){const r=E("AposMinMaxCount"),a=E("AposButton"),l=E("AposSlatList"),c=E("AposSearchList"),u=E("AposInputWrapper");return p(),R(u,{field:e.field,error:e.effectiveError,uid:e.uid,items:e.next,"display-options":e.displayOptions,modifiers:e.modifiers},{additional:Q(()=>[e.minSize[0]||e.minSize[1]?(p(),y("div",Xne,$(e.$t("apostrophe:minSize",{width:e.minSize[0]||"???",height:e.minSize[1]||"???"})),1)):x("",!0),e.field.max>1?(p(),R(r,{key:1,field:e.field,"model-value":e.next},null,8,["field","model-value"])):x("",!0)]),body:Q(()=>[A("div",Qne,[A("div",eie,[e.modifiers.includes("no-search")?x("",!0):Ke((p(),y("input",{key:0,id:e.uid,"onUpdate:modelValue":t[0]||(t[0]=f=>e.searchTerm=f),class:"apos-input apos-input--text apos-input--relationship",type:"text",role:"combobox","aria-owns":`apos-relationship-${e.field._id}`,"aria-expanded":!!e.searchList.length,"aria-autocomplete":"both",placeholder:e.$t(e.placeholder),disabled:e.field.readOnly||e.limitReached,required:e.field.required,tabindex:"0",onInput:t[1]||(t[1]=(...f)=>e.input&&e.input(...f)),onFocus:t[2]||(t[2]=(...f)=>e.input&&e.input(...f)),onFocusout:t[3]||(t[3]=(...f)=>e.handleFocusOut&&e.handleFocusOut(...f)),onKeydown:t[4]||(t[4]=(...f)=>e.handleKeydown&&e.handleKeydown(...f))},null,40,tie)),[[Eo,e.searchTerm]]),e.field.browse!==!1?(p(),R(a,{key:1,class:"apos-input-relationship__button",disabled:e.field.readOnly,label:e.browseLabel,modifiers:e.buttonModifiers,type:"input",attrs:{"data-apos-focus-priority":!0},onClick:e.choose},null,8,["disabled","label","modifiers","onClick"])):x("",!0)]),e.next.length?(p(),R(l,{key:0,class:"apos-input-relationship__items","model-value":e.next,duplicate:e.duplicate,disabled:e.field.readOnly,"relationship-schema":e.field.schema,"editor-label":e.field.editorLabel,"editor-icon":e.field.editorIcon,"onUpdate:modelValue":e.updateSelected,onItemClicked:e.editRelationship},null,8,["model-value","duplicate","disabled","relationship-schema","editor-label","editor-icon","onUpdate:modelValue","onItemClicked"])):x("",!0),D(c,{"aria-id":`apos-relationship-${e.field._id}`,list:e.searchList,"selected-items":e.next,icon:e.field.suggestionIcon,"icon-size":e.field.suggestionIconSize,fields:e.suggestionFields,"focus-index":e.searchFocusIndex,suggestion:e.searchSuggestion,hint:e.searchHint,"disabled-tooltip":"apostrophe:publishBeforeUsingTooltip",onSelect:e.updateSelected},null,8,["aria-id","list","selected-items","icon","icon-size","fields","focus-index","suggestion","hint","onSelect"])])]),_:1},8,["field","error","uid","items","display-options","modifiers"])}const iie=I(Zne,[["render",nie],["__scopeId","data-v-c0b7c142"]]),oie={name:"AposInputSelect",mixins:[Qn,t0],props:{icon:{type:String,default:"menu-down-icon"}},data(){return{next:this.modelValue.data==null?null:this.modelValue.data,choices:[]}},computed:{classes(){var e;return[((e=this.modelValue)==null?void 0:e.duplicate)&&"apos-input--error"]}},methods:{validate(e){return this.field.required&&e===null?"required":e&&!this.choices.find(t=>t.value===e)?"invalid":!1},change(e){this.next=this.choices.find(t=>t.value===e).value}}},sie={name:"AposInputSelect",mixins:[oie]};function rie(e,t,n,i,o,s){const r=E("AposSelect"),a=E("AposInputWrapper");return p(),R(a,{field:e.field,error:e.effectiveError,uid:e.uid,modifiers:e.modifiers,"display-options":e.displayOptions},{body:Q(()=>[D(r,{icon:e.icon,choices:e.choices,classes:e.classes,disabled:e.field.readOnly,selected:e.modelValue.data,autocomplete:e.field.autocomplete,onChange:e.change},null,8,["icon","choices","classes","disabled","selected","autocomplete","onChange"])]),_:1},8,["field","error","uid","modifiers","display-options"])}const aie=I(sie,[["render",rie]]);var z4={exports:{}};(function(e){var t,n=function(i,o){var s="",r;i==null&&(i=""),typeof i!="string"&&(i.toString?i=i.toString():i=""),o||(o={});var a=o.separator||"-",l,c,u=!0,f;for(l=0;l<i.length;l++){var m=i.charCodeAt(l);if(r=!1,!(o.allow!==void 0&&o.allow.includes(i.charAt(l))))for(var g=0,v=t.length-1;;){if(c=g+v>>1,m>=t[c][0]&&m<=t[c][1]){r=!0;break}if(c===g)break;m<=t[c][0]?v=c-1:g=c+1}r?u||(f=s.length,s+=a):s+=i.charAt(l).toLowerCase(),u=r}return u&&(s=s.substr(0,f)),s.length||(s=o.def==null?"none":o.def),s};e.exports?e.exports=n:window.sluggo=n,t=[[0,47],[58,64],[91,96],[123,169],[171,177],[180,180],[182,184],[187,187],[191,191],[215,215],[247,247],[706,709],[722,735],[741,747],[749,749],[751,879],[885,885],[888,889],[894,894],[896,901],[903,903],[907,907],[909,909],[930,930],[1014,1014],[1154,1161],[1328,1328],[1367,1368],[1370,1376],[1416,1487],[1515,1519],[1523,1567],[1611,1631],[1642,1645],[1648,1648],[1748,1748],[1750,1764],[1767,1773],[1789,1790],[1792,1807],[1809,1809],[1840,1868],[1958,1968],[1970,1983],[2027,2035],[2038,2041],[2043,2047],[2070,2073],[2075,2083],[2085,2087],[2089,2111],[2137,2207],[2227,2307],[2362,2364],[2366,2383],[2385,2391],[2402,2405],[2416,2416],[2433,2436],[2445,2446],[2449,2450],[2473,2473],[2481,2481],[2483,2485],[2490,2492],[2494,2509],[2511,2523],[2526,2526],[2530,2533],[2546,2547],[2554,2564],[2571,2574],[2577,2578],[2601,2601],[2609,2609],[2612,2612],[2615,2615],[2618,2648],[2653,2653],[2655,2661],[2672,2673],[2677,2692],[2702,2702],[2706,2706],[2729,2729],[2737,2737],[2740,2740],[2746,2748],[2750,2767],[2769,2783],[2786,2789],[2800,2820],[2829,2830],[2833,2834],[2857,2857],[2865,2865],[2868,2868],[2874,2876],[2878,2907],[2910,2910],[2914,2917],[2928,2928],[2936,2946],[2948,2948],[2955,2957],[2961,2961],[2966,2968],[2971,2971],[2973,2973],[2976,2978],[2981,2983],[2987,2989],[3002,3023],[3025,3045],[3059,3076],[3085,3085],[3089,3089],[3113,3113],[3130,3132],[3134,3159],[3162,3167],[3170,3173],[3184,3191],[3199,3204],[3213,3213],[3217,3217],[3241,3241],[3252,3252],[3258,3260],[3262,3293],[3295,3295],[3298,3301],[3312,3312],[3315,3332],[3341,3341],[3345,3345],[3387,3388],[3390,3405],[3407,3423],[3426,3429],[3446,3449],[3456,3460],[3479,3481],[3506,3506],[3516,3516],[3518,3519],[3527,3557],[3568,3584],[3633,3633],[3636,3647],[3655,3663],[3674,3712],[3715,3715],[3717,3718],[3721,3721],[3723,3724],[3726,3731],[3736,3736],[3744,3744],[3748,3748],[3750,3750],[3752,3753],[3756,3756],[3761,3761],[3764,3772],[3774,3775],[3781,3781],[3783,3791],[3802,3803],[3808,3839],[3841,3871],[3892,3903],[3912,3912],[3949,3975],[3981,4095],[4139,4158],[4170,4175],[4182,4185],[4190,4192],[4194,4196],[4199,4205],[4209,4212],[4226,4237],[4239,4239],[4250,4255],[4294,4294],[4296,4300],[4302,4303],[4347,4347],[4681,4681],[4686,4687],[4695,4695],[4697,4697],[4702,4703],[4745,4745],[4750,4751],[4785,4785],[4790,4791],[4799,4799],[4801,4801],[4806,4807],[4823,4823],[4881,4881],[4886,4887],[4955,4968],[4989,4991],[5008,5023],[5109,5120],[5741,5742],[5760,5760],[5787,5791],[5867,5869],[5881,5887],[5901,5901],[5906,5919],[5938,5951],[5970,5983],[5997,5997],[6001,6015],[6068,6102],[6104,6107],[6109,6111],[6122,6127],[6138,6159],[6170,6175],[6264,6271],[6313,6313],[6315,6319],[6390,6399],[6431,6469],[6510,6511],[6517,6527],[6572,6592],[6600,6607],[6619,6655],[6679,6687],[6741,6783],[6794,6799],[6810,6822],[6824,6916],[6964,6980],[6988,6991],[7002,7042],[7073,7085],[7142,7167],[7204,7231],[7242,7244],[7294,7400],[7405,7405],[7410,7412],[7415,7423],[7616,7679],[7958,7959],[7966,7967],[8006,8007],[8014,8015],[8024,8024],[8026,8026],[8028,8028],[8030,8030],[8062,8063],[8117,8117],[8125,8125],[8127,8129],[8133,8133],[8141,8143],[8148,8149],[8156,8159],[8173,8177],[8181,8181],[8189,8303],[8306,8307],[8314,8318],[8330,8335],[8349,8449],[8451,8454],[8456,8457],[8468,8468],[8470,8472],[8478,8483],[8485,8485],[8487,8487],[8489,8489],[8494,8494],[8506,8507],[8512,8516],[8522,8525],[8527,8527],[8586,9311],[9372,9449],[9472,10101],[10132,11263],[11311,11311],[11359,11359],[11493,11498],[11503,11505],[11508,11516],[11518,11519],[11558,11558],[11560,11564],[11566,11567],[11624,11630],[11632,11647],[11671,11679],[11687,11687],[11695,11695],[11703,11703],[11711,11711],[11719,11719],[11727,11727],[11735,11735],[11743,11822],[11824,12292],[12296,12320],[12330,12336],[12342,12343],[12349,12352],[12439,12444],[12448,12448],[12539,12539],[12544,12548],[12590,12592],[12687,12689],[12694,12703],[12731,12783],[12800,12831],[12842,12871],[12880,12880],[12896,12927],[12938,12976],[12992,13311],[19894,19967],[40909,40959],[42125,42191],[42238,42239],[42509,42511],[42540,42559],[42607,42622],[42654,42655],[42736,42774],[42784,42785],[42889,42890],[42895,42895],[42926,42927],[42930,42998],[43010,43010],[43014,43014],[43019,43019],[43043,43055],[43062,43071],[43124,43137],[43188,43215],[43226,43249],[43256,43258],[43260,43263],[43302,43311],[43335,43359],[43389,43395],[43443,43470],[43482,43487],[43493,43493],[43519,43519],[43561,43583],[43587,43587],[43596,43599],[43610,43615],[43639,43641],[43643,43645],[43696,43696],[43698,43700],[43703,43704],[43710,43711],[43713,43713],[43715,43738],[43742,43743],[43755,43761],[43765,43776],[43783,43784],[43791,43792],[43799,43807],[43815,43815],[43823,43823],[43867,43867],[43872,43875],[43878,43967],[44003,44015],[44026,44031],[55204,55215],[55239,55242],[55292,63743],[64110,64111],[64218,64255],[64263,64274],[64280,64284],[64286,64286],[64297,64297],[64311,64311],[64317,64317],[64319,64319],[64322,64322],[64325,64325],[64434,64466],[64830,64847],[64912,64913],[64968,65007],[65020,65135],[65141,65141],[65277,65295],[65306,65312],[65339,65344],[65371,65381],[65471,65473],[65480,65481],[65488,65489],[65496,65497],[65501,65535],[65548,65548],[65575,65575],[65595,65595],[65598,65598],[65614,65615],[65630,65663],[65787,65798],[65844,65855],[65913,65929],[65932,66175],[66205,66207],[66257,66272],[66300,66303],[66340,66351],[66379,66383],[66422,66431],[66462,66463],[66500,66503],[66512,66512],[66518,66559],[66718,66719],[66730,66815],[66856,66863],[66916,67071],[67383,67391],[67414,67423],[67432,67583],[67590,67591],[67593,67593],[67638,67638],[67641,67643],[67645,67646],[67670,67671],[67703,67704],[67743,67750],[67760,67839],[67868,67871],[67898,67967],[68024,68029],[68032,68095],[68097,68111],[68116,68116],[68120,68120],[68148,68159],[68168,68191],[68223,68223],[68256,68287],[68296,68296],[68325,68330],[68336,68351],[68406,68415],[68438,68439],[68467,68471],[68498,68520],[68528,68607],[68681,69215],[69247,69634],[69688,69713],[69744,69762],[69808,69839],[69865,69871],[69882,69890],[69927,69941],[69952,69967],[70003,70005],[70007,70018],[70067,70080],[70085,70095],[70107,70112],[70133,70143],[70162,70162],[70188,70319],[70367,70383],[70394,70404],[70413,70414],[70417,70418],[70441,70441],[70449,70449],[70452,70452],[70458,70460],[70462,70492],[70498,70783],[70832,70851],[70854,70854],[70856,70863],[70874,71039],[71087,71167],[71216,71235],[71237,71247],[71258,71295],[71339,71359],[71370,71839],[71923,71934],[71936,72383],[72441,73727],[74649,74751],[74863,77823],[78895,92159],[92729,92735],[92767,92767],[92778,92879],[92910,92927],[92976,92991],[92996,93007],[93018,93018],[93026,93026],[93048,93052],[93072,93951],[94021,94031],[94033,94098],[94112,110591],[110594,113663],[113771,113775],[113789,113791],[113801,113807],[113818,119647],[119666,119807],[119893,119893],[119965,119965],[119968,119969],[119971,119972],[119975,119976],[119981,119981],[119994,119994],[119996,119996],[120004,120004],[120070,120070],[120075,120076],[120085,120085],[120093,120093],[120122,120122],[120127,120127],[120133,120133],[120135,120137],[120145,120145],[120486,120487],[120513,120513],[120539,120539],[120571,120571],[120597,120597],[120629,120629],[120655,120655],[120687,120687],[120713,120713],[120745,120745],[120771,120771],[120780,120781],[120832,124927],[125125,125126],[125136,126463],[126468,126468],[126496,126496],[126499,126499],[126501,126502],[126504,126504],[126515,126515],[126520,126520],[126522,126522],[126524,126529],[126531,126534],[126536,126536],[126538,126538],[126540,126540],[126544,126544],[126547,126547],[126549,126550],[126552,126552],[126554,126554],[126556,126556],[126558,126558],[126560,126560],[126563,126563],[126565,126566],[126571,126571],[126579,126579],[126584,126584],[126589,126589],[126591,126591],[126602,126602],[126620,126624],[126628,126628],[126634,126634],[126652,127231],[127245,131071],[173783,173823],[177973,177983],[178206,194559],[195102,1114112]]})(z4);var lie=z4.exports;const z2=Mc(lie),cie={name:"AposInputSlug",mixins:[Qn],emits:["return"],data(){return{conflict:!1,isArchived:null,originalParentSlug:""}},computed:{tabindex(){return this.field.disableFocus?"-1":"0"},type(){return this.field.type?this.field.type:"text"},classes(){return["apos-input","apos-input--text","apos-input--slug"]},wrapperClasses(){return["apos-input-wrapper"].concat(this.localePrefix?["apos-input-wrapper--with-prefix"]:[])},icon(){return this.error?"circle-medium-icon":this.field.icon?this.field.icon:null},prefix(){return this.field.prefix||""},localePrefix(){return this.field.page&&apos.i18n.locales[apos.i18n.locale].prefix}},watch:{followingValues:{handler(e,t){if(this.field.followingIgnore===!0)return;let n=at(e),i=at(t);Array.isArray(this.field.followingIgnore)&&(n=Object.fromEntries(Object.entries(e).filter(([l])=>!this.field.followingIgnore.includes(l))),i=Object.fromEntries(Object.entries(t).filter(([l])=>!this.field.followingIgnore.includes(l)))),this.isArchived=e.archived,delete n.archived,delete i.archived;const o=Object.values(i).join(" ").replace(/\//g," "),s=Object.values(n).join(" ").replace(/\//g," ");if(o===s||!this.compatible(o,this.next)||e.archived)return;if(!this.field.page){this.next=this.slugify(s);return}const a=this.getParentSlug(this.next);if(this.originalParentSlug===a){const l=this.slugify(s,{componentOnly:!0});this.next=`${a}/${l}`}}}},async mounted(){this.debouncedCheckConflict=na(this.requestCheckConflict,250,{onSuccess:this.setConflict}),this.next.length&&await this.debouncedCheckConflict.skipDelay(),this.originalParentSlug=this.getParentSlug(this.next)},onBeforeUnmount(){this.debouncedCheckConflict.cancel()},methods:{getParentSlug(e=""){return e.slice(-1)==="/"?e.substring(0,e.length-1):e.split("/").slice(0,-1).join("/")},async watchNext(){this.next=this.slugify(this.next),this.validateAndEmit(),await this.debouncedCheckConflict()},validate(e){return this.conflict?{name:"conflict",message:"apostrophe:slugInUse"}:this.field.required&&!e.length?"required":this.field.min&&e.length&&e.length<this.field.min?"min":this.field.max&&e.length&&e.length>this.field.max?"max":!1},compatible(e="",t){if(this.field.page){const n=t.match(/[^/]+$/);t=n&&n[0]||""}return e===""&&t===`${this.prefix}`||this.slugify(e)===this.slugify(t)},slugify(e,{componentOnly:t=!1}={}){const n={def:""};this.field.page&&!t&&(n.allow="/");let i=!1;this.focus&&e.length&&z2(e.charAt(e.length-1),n)===""&&(i=!0);let o=z2(e,n);return i&&(o+="-"),this.field.page&&!t&&(!o.charAt(0)!=="/"&&(o=`/${o}`),o=o.replace(/\/+/g,"/")),t||(o=this.setPrefix(o)),o},setPrefix(e){let t=e;const n=new RegExp(`^deduplicate-[a-z0-9]+-${this.prefix}`);if(!t.startsWith(this.prefix)||this.isArchived&&!t.match(n)){let i="";this.isArchived&&(i=t.match(/^deduplicate-[a-z0-9]+-/),t=t.replace(i,"")),this.prefix.startsWith(t)?t=this.prefix:t=t.startsWith(this.prefix)?t:this.prefix+t,t=this.isArchived&&i?`${i}${t}`:t}return t},async requestCheckConflict(){let e;try{if(e=this.next,e.length)return await apos.http.post(`${apos.doc.action}/slug-taken`,{body:{slug:e,_id:this.docId},draft:!0}),e===this.next?!1:null}catch(t){if(t.status===409)return e===this.next?!0:null;throw t}},async setConflict(e){e!==null&&(this.conflict=e,this.validateAndEmit())},passFocus(){this.$refs.input.focus()},emitReturn(){this.$emit("return")}}},die={name:"AposInputSlug",mixins:[cie]},uie=["id","type","placeholder","disabled","required","tabindex","autocomplete"];function hie(e,t,n,i,o,s){const r=E("AposInputWrapper"),a=xi("apos-tooltip");return p(),R(r,{modifiers:e.modifiers,field:e.field,error:e.effectiveError,uid:e.uid,"display-options":e.displayOptions,meta:e.fieldMeta,onReplaceFieldValue:e.replaceFieldValue},{body:Q(()=>[A("div",{class:te(e.wrapperClasses)},[e.localePrefix?Ke((p(),y("span",{key:0,class:"apos-input__slug-locale-prefix",onClick:t[0]||(t[0]=(...l)=>e.passFocus&&e.passFocus(...l))},[Et($(e.localePrefix),1)])),[[a,"apostrophe:cannotChangeSlugPrefix"]]):x("",!0),Ke(A("input",{id:e.uid,ref:"input","onUpdate:modelValue":t[1]||(t[1]=l=>e.next=l),class:te(e.classes),type:e.type,placeholder:e.$t(e.field.placeholder),disabled:e.field.readOnly,required:e.field.required,tabindex:e.tabindex,autocomplete:e.field.autocomplete,onKeydown:t[2]||(t[2]=Qe((...l)=>e.emitReturn&&e.emitReturn(...l),["enter"]))},null,42,uie),[[JS,e.next]]),e.icon?(p(),R(et(e.icon),{key:1,size:e.iconSize,class:"apos-input-icon"},null,8,["size"])):x("",!0)],2)]),_:1},8,["modifiers","field","error","uid","display-options","meta","onReplaceFieldValue"])}const fie=I(die,[["render",hie],["__scopeId","data-v-5e0068cb"]]),pie={name:"AposInputString",mixins:[Qn],emits:["return"],props:{rows:{type:Number,default:5}},data(){return{step:void 0,wasPopulated:!1}},computed:{tabindex(){return this.field.disableFocus?"-1":"0"},type(){return this.field.type?this.field.type==="float"||this.field.type==="integer"?"number":this.field.type==="string"&&this.field.textarea?"textarea":this.field.type==="string"||this.field.type==="slug"?"text":this.field.type:"text"},classes(){var e;return["apos-input",`apos-input--${this.type}`,((e=this.modelValue)==null?void 0:e.duplicate)&&"apos-input--error"]},icon(){return this.error?"circle-medium-icon":this.field.icon?this.field.icon:null}},watch:{followingValues:{deep:!0,handler(e,t){if(this.field.followingIgnore===!0)return;let n=t,i=e;Array.isArray(this.field.followingIgnore)&&(n=Object.fromEntries(Object.entries(t).filter(([o])=>!this.field.followingIgnore.includes(o))),i=Object.fromEntries(Object.entries(e).filter(([o])=>!this.field.followingIgnore.includes(o)))),t=Object.values(n).join(" ").trim(),e=Object.values(i).join(" ").trim(),(!this.wasPopulated&&(this.next==null||!this.next.length)||this.next===t)&&(this.next=e)}},next(){this.next&&this.next.length&&(this.wasPopulated=!0)}},mounted(){this.defineStep(),this.wasPopulated=this.next&&this.next.length},methods:{enterEmit(){this.field.enterSubmittable?this.$emit("return",{data:this.next,error:this.validate(this.next)}):this.$emit("return")},validate(e=""){const t=typeof e=="string";if(t&&!e.length)return this.field.required?"required":!1;const n=["integer","float","string","date","password"];return typeof e=="string"&&this.field.pattern&&!new RegExp(this.field.pattern).test(e)?"invalid":this.field.min&&n.includes(this.field.type)&&(!t||e.length)&&this.minMaxComparable(e)<this.field.min?"min":this.field.max&&n.includes(this.field.type)&&(!t||e.length)&&this.minMaxComparable(e)>this.field.max?"max":this.field.type==="email"&&e&&!e.match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)?"invalid":!1},defineStep(){this.type==="number"&&(this.step=this.field.type==="float"?"any":1)},convert(e){return this.field.type==="integer"?e==null||e===""?e:parseInt(e):this.field.type==="float"?e==null||e===""||this.focus&&`${e}`.match(/\.[0]*$/)?e:parseFloat(e):e==null?"":e.toString()},minMaxComparable(e){const t=this.convert(e);return["integer","float","date","range","time"].includes(this.field.type)?t:t.length}}},mie={name:"AposInputString",mixins:[pie]},gie={class:"apos-input-wrapper"},bie=["id","rows","placeholder","disabled","required","tabindex","autocomplete"],yie=["id","type","placeholder","disabled","required","tabindex","step","autocomplete"];function vie(e,t,n,i,o,s){const r=E("AposInputWrapper");return p(),R(r,{modifiers:e.modifiers,field:e.field,error:e.effectiveError,uid:e.uid,"display-options":e.displayOptions,meta:e.fieldMeta,onReplaceFieldValue:e.replaceFieldValue},{body:Q(()=>[A("div",gie,[e.field.textarea&&e.field.type==="string"?Ke((p(),y("textarea",{key:0,id:e.uid,"onUpdate:modelValue":t[0]||(t[0]=a=>e.next=a),rows:e.rows,class:te(e.classes),placeholder:e.$t(e.field.placeholder),disabled:e.field.readOnly,required:e.field.required,tabindex:e.tabindex,autocomplete:e.field.autocomplete,onKeydown:t[1]||(t[1]=Qe((...a)=>e.enterEmit&&e.enterEmit(...a),["enter"]))},null,42,bie)),[[Eo,e.next]]):Ke((p(),y("input",{key:1,id:e.uid,"onUpdate:modelValue":t[2]||(t[2]=a=>e.next=a),class:te(e.classes),type:e.type,placeholder:e.$t(e.field.placeholder),disabled:e.field.readOnly||e.field.disabled,required:e.field.required,tabindex:e.tabindex,step:e.step,autocomplete:e.field.autocomplete,onKeydown:t[3]||(t[3]=Qe((...a)=>e.enterEmit&&e.enterEmit(...a),["enter"]))},null,42,yie)),[[JS,e.next]]),e.icon?(p(),R(et(e.icon),{key:2,size:e.iconSize,class:"apos-input-icon"},null,8,["size"])):x("",!0)])]),_:1},8,["modifiers","field","error","uid","display-options","meta","onReplaceFieldValue"])}const wie=I(mie,[["render",vie],["__scopeId","data-v-f95537d7"]]),_ie={name:"AposInputWrapper",inject:{originalDoc:{default:()=>({ref:null})}},emits:["replace-field-value"],props:{field:{type:Object,required:!0},meta:{type:Object,default(){return{}}},error:{type:[String,Boolean,Object],default:null},uid:{type:Number,required:!0},modifiers:{type:Array,default(){return[]}},items:{type:Array,default(){return[]}},displayOptions:{type:Object,default(){return{}}}},data(){return{wrapEl:"div",labelEl:"label"}},computed:{label(){const{label:e,publishedLabel:t}=this.field;return this.originalDoc.ref&&this.originalDoc.ref.lastPublishedAt&&t?t:e},classList:function(){const e=["apos-field",`apos-field--${this.field.type}`,`apos-field--${this.field.name}`];return this.field.classes&&e.push(this.field.classes),this.errorClasses&&e.push(this.errorClasses),this.modifiers&&this.modifiers.forEach(t=>{e.push(`apos-field--${t}`)}),e},errorClasses:function(){if(!this.error)return null;let e="unknown";return typeof this.error=="string"?e=this.error:this.error.name&&(e=this.error.name),`apos-field--error apos-field--error-${e}`},errorMessage(){return this.error?typeof this.error=="string"?this.error:this.error.message?this.error.message:"Error":!1},metaComponents(){const e={};for(const t of Object.keys(this.meta)){const[n,i]=t.split(":",2);i&&(e[n]||(e[n]={}),e[n][i]=this.meta[t])}return apos.schema.fieldMetadataComponents.map(({name:t,namespace:n})=>({name:t,namespace:n,data:e[n]||{}}))},hasExtraInfo(){return this.$slots.info}},mounted:function(){(this.field.type==="radio"||this.field.type==="checkbox")&&(this.wrapEl="fieldset",this.labelEl="legend")},methods:{replaceFieldValue(e){this.$emit("replace-field-value",e)}}},Cie={name:"AposInputWrapper",mixins:[_ie],methods:{getTranslatedErrorMessage(e){return e==="required"?this.$t("apostrophe:required"):e==="invalid"?this.$t("apostrophe:invalid"):this.$t(e)}}},Aie={class:"apos-field__info"},kie={class:"apos-field_label-info"},Sie={key:0,class:"apos-field__required"},xie={key:2,"data-apos-test":"field-help-tooltip",class:"apos-field__help-tooltip"},Mie={key:3,class:"apos-field__changed","data-apos-test":"field-changed"},Tie={key:0,class:"apos-field__label-extra-info"},Eie={"data-apos-test":"field-meta-wrapper",class:"apos-field__label-meta"},Oie=["innerHTML"],$ie={key:0,class:"apos-field__error","data-apos-test":"field-error"};function Iie(e,t,n,i,o,s){const r=E("AposLabel"),a=E("AposIndicator");return p(),y("div",{class:te(["apos-field__wrapper",{[`apos-field__wrapper--${e.field.type}`]:!0,"apos-field__wrapper--full-width":e.modifiers.includes("full-width")}])},[(p(),R(et(e.wrapEl),{class:te(e.classList)},{default:Q(()=>[A("div",Aie,[e.field.label?(p(),R(et(e.labelEl),{key:0,class:te(["apos-field__label",{"apos-sr-only":e.field.hideLabel,"apos-field__label--meta-left":e.field.meta&&e.field.meta.position==="left"}]),for:e.uid,"data-apos-test-name":e.field.name,"data-apos-test-label":e.field.label,"data-apos-test":"field-label"},{default:Q(()=>[A("span",kie,[Et($(e.$t(e.label))+" ",1),e.field.required?(p(),y("span",Sie," * ")):x("",!0),e.field.tag?(p(),R(r,{key:1,class:"apos-field__tag",label:e.field.tag.value||e.field.tag,modifiers:[`apos-is-${e.field.tag.type||"success"}`,"apos-is-filled"],"data-apos-test":"field-tag"},null,8,["label","modifiers"])):x("",!0),(e.field.help||e.field.htmlHelp)&&e.displayOptions.helpTooltip?(p(),y("span",xie,[D(a,{icon:"help-circle-icon",class:"apos-field__help-tooltip__icon",tooltip:e.$t(e.field.help||e.field.htmlHelp),"icon-size":11,"icon-color":"var(--a-base-4)"},null,8,["tooltip"])])):x("",!0),e.displayOptions.changed?(p(),y("span",Mie,[D(r,{label:"apostrophe:changed",class:"apos-field__changed__label",modifiers:["apos-is-warning","apos-is-filled"],tooltip:"apostrophe:fieldHasUnpublishedChanges"})])):x("",!0)]),A("div",null,[e.hasExtraInfo?(p(),y("div",Tie,[gt(e.$slots,"info",{},void 0,!0)])):x("",!0),A("span",Eie,[gt(e.$slots,"meta",{},()=>[(p(!0),y(Ce,null,Ie(e.metaComponents,({name:l,namespace:c,data:u})=>(p(),R(et(l),{key:l,field:e.field,items:e.items,namespace:c,meta:u,"meta-raw":e.meta,"data-apos-test-component":l,"data-apos-test-namespace":c,"data-apos-test":"field-meta",onReplaceFieldValue:e.replaceFieldValue},null,40,["field","items","namespace","meta","meta-raw","data-apos-test-component","data-apos-test-namespace","onReplaceFieldValue"]))),128))],!0)])])]),_:3},8,["class","for","data-apos-test-name","data-apos-test-label"])):x("",!0),(e.field.help||e.field.htmlHelp)&&!e.displayOptions.helpTooltip?(p(),y("p",{key:1,class:"apos-field__help",innerHTML:e.$t(e.field.help||e.field.htmlHelp)},null,8,Oie)):x("",!0),gt(e.$slots,"additional",{},void 0,!0)]),gt(e.$slots,"body",{},void 0,!0),e.errorMessage?(p(),y("div",$ie,$(s.getTranslatedErrorMessage(e.errorMessage)),1)):x("",!0)]),_:3},8,["class"])),gt(e.$slots,"secondary",{},void 0,!0)],2)}const Lie=I(Cie,[["render",Iie],["__scopeId","data-v-b0f7d2ad"]]),Die={},Rie={viewBox:"0 0 959.64 230.39"};function Pie(e,t){return p(),y("svg",Rie,t[0]||(t[0]=[ml('<defs><linearGradient id="circle" x1="173.17" y1="86.95" x2="141.86" y2="141.17" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#cc9300"></stop><stop offset=".47" stop-color="#ea433a"></stop><stop offset="1" stop-color="#b327bf"></stop></linearGradient><linearGradient id="square" x1="92.49" y1="41" x2="67.07" y2="110.85" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#cc9300"></stop><stop offset=".26" stop-color="#ea433a"></stop><stop offset=".47" stop-color="#b327bf"></stop><stop offset=".76" stop-color="#66f"></stop><stop offset="1" stop-color="#00bf9a"></stop></linearGradient><linearGradient id="triangle" x1="75.13" y1="190.31" x2="120.2" y2="143.64" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#b327bf"></stop><stop offset=".47" stop-color="#66f"></stop><stop offset="1" stop-color="#00c09a"></stop></linearGradient></defs><path fill="#ffffff" d="M290.25 154.82h-14.78l33.21-92.29h16.09L358 154.82h-14.8l-8.43-24.42h-36zm12.53-36.14h27.94l-13.61-39.39h-.72zM369.18 180.78V85.6h13.16v11.22h1.13a42.54 42.54 0 013.4-5 19.13 19.13 0 016.13-5q3.94-2.15 10.34-2.14a26.87 26.87 0 0114.94 4.24 28.72 28.72 0 0110.34 12.21q3.78 8 3.79 19.2t-3.74 19.22a28.8 28.8 0 01-10.28 12.32 26.55 26.55 0 01-14.92 4.28 21.77 21.77 0 01-10.27-2.11 19.92 19.92 0 01-6.24-5 36.14 36.14 0 01-3.49-5h-.82v36.73zm13.2-60.57q0 10.91 4.69 17.69t13.39 6.78a15.79 15.79 0 0010.11-3.22 19.62 19.62 0 006.15-8.76 35.3 35.3 0 002.08-12.49 34.86 34.86 0 00-2.05-12.32 19.2 19.2 0 00-6.11-8.59 16.1 16.1 0 00-10.18-3.15q-8.83 0-13.46 6.6t-4.62 17.46zM475.65 156.22a31.8 31.8 0 01-17-4.46 30 30 0 01-11.27-12.51 41.48 41.48 0 01-4-18.72 41.89 41.89 0 014-18.84 30 30 0 0111.27-12.53 34.63 34.63 0 0134 0 30.08 30.08 0 0111.24 12.53 41.75 41.75 0 014 18.84 41.35 41.35 0 01-4 18.72 30.09 30.09 0 01-11.24 12.51 31.77 31.77 0 01-17 4.46zm0-11.31a16.09 16.09 0 0010.48-3.34 19.76 19.76 0 006.13-8.9 38.21 38.21 0 000-24.4 19.92 19.92 0 00-6.13-9 18.1 18.1 0 00-21 0 20 20 0 00-6.17 9 37.68 37.68 0 000 24.4 19.83 19.83 0 006.17 8.9 16.17 16.17 0 0010.56 3.34zM571.36 102.5l-12.21 2.16a15.24 15.24 0 00-4.35-6.37q-3.18-2.91-9.48-2.91a17 17 0 00-9.58 2.55 7.49 7.49 0 00-3.81 6.55 6.7 6.7 0 002.55 5.61c1.72 1.4 4.5 2.55 8.31 3.45l11 2.53q18.93 4.37 18.93 18.74a18.11 18.11 0 01-3.59 11.09 23.84 23.84 0 01-10 7.57 37 37 0 01-14.76 2.75q-11.67 0-19-5a21.06 21.06 0 01-9-14.17l13-2q2.43 10.28 14.87 10.28 6.63 0 10.59-2.77t4-6.79q0-6.62-9.78-8.78l-11.72-2.57q-9.74-2.16-14.33-7a17.12 17.12 0 01-4.59-12.21 17.57 17.57 0 013.42-10.75 22.33 22.33 0 019.46-7.19 35.14 35.14 0 0113.84-2.57q11.22 0 17.67 4.87a22.82 22.82 0 018.56 12.93zM618.79 85.6v10.82H604.6v38.08q0 5.85 2.5 7.55a10.16 10.16 0 005.79 1.69 15.76 15.76 0 002.84-.23l1.89-.36 2.43 11.13a24.72 24.72 0 01-3.35.93 28.34 28.34 0 01-5.39.51 23.94 23.94 0 01-9.94-1.89 16.78 16.78 0 01-7.43-6.13 18.08 18.08 0 01-2.82-10.41V96.42H581V85.6h10.14V69h13.46v16.6zM632.65 154.82V85.6h13v11h.72a16.88 16.88 0 016.69-8.81A19.1 19.1 0 01664 84.56c.87 0 1.88 0 3 .09s2 .14 2.7.23v12.89a27.1 27.1 0 00-2.86-.52 30.32 30.32 0 00-4.17-.29 16.62 16.62 0 00-11.85 4.39 14.66 14.66 0 00-4.69 11.2v42.27zM706.38 156.22a31.82 31.82 0 01-17-4.46 30.09 30.09 0 01-11.27-12.51 41.48 41.48 0 01-4-18.72 41.89 41.89 0 014-18.84 30.08 30.08 0 0111.27-12.53 34.63 34.63 0 0134 0 30.08 30.08 0 0111.24 12.53 41.75 41.75 0 014 18.84 41.35 41.35 0 01-4 18.72 30.09 30.09 0 01-11.24 12.51 31.77 31.77 0 01-17 4.46zm0-11.31a16.09 16.09 0 0010.48-3.34 19.76 19.76 0 006.13-8.9 38 38 0 000-24.4 19.92 19.92 0 00-6.13-9 18.1 18.1 0 00-21 0 20 20 0 00-6.17 9 37.68 37.68 0 000 24.4 19.83 19.83 0 006.17 8.9 16.21 16.21 0 0010.56 3.34zM750.86 180.78V85.6H764v11.22h1.13a42.54 42.54 0 013.4-5 19 19 0 016.13-5q3.97-2.12 10.34-2.12a26.87 26.87 0 0115 4.24 28.72 28.72 0 0110.34 12.21q3.8 8 3.79 19.2t-3.74 19.22a28.8 28.8 0 01-10.28 12.32 26.56 26.56 0 01-14.91 4.28 21.78 21.78 0 01-10.28-2.11 20 20 0 01-6.24-5 36.14 36.14 0 01-3.49-5h-.82v36.73zm13.2-60.57q0 10.91 4.69 17.69t13.39 6.78a15.79 15.79 0 0010.11-3.22 19.62 19.62 0 006.15-8.76 35.3 35.3 0 002.08-12.49 34.86 34.86 0 00-2.05-12.32 19.2 19.2 0 00-6.11-8.59 16.1 16.1 0 00-10.18-3.15q-8.83 0-13.46 6.6t-4.62 17.46zM840.12 113.72v41.1h-13.47V62.53h13.29v34.34h.86a19.7 19.7 0 017.43-8.9q5-3.27 13.07-3.27 10.68 0 17.19 6.58t6.51 19.51v44h-13.47v-42.4q0-7.62-3.92-11.83t-10.91-4.19a16.41 16.41 0 00-11.89 4.53q-4.69 4.53-4.69 12.82zM930 156.22a33.6 33.6 0 01-17.58-4.42A29.35 29.35 0 01901 139.39a41.51 41.51 0 01-4-18.73 41.91 41.91 0 014-18.74 29.83 29.83 0 0128-17.22 33 33 0 0114.85 3.49 27.09 27.09 0 0111.4 11.13q4.39 7.65 4.39 20.17v4.78h-49.21q.27 10 5.64 15.41t14 5.41a19.22 19.22 0 0010-2.48 13.85 13.85 0 006-7.39l12.75 2.3a23.37 23.37 0 01-9.92 13.56q-7.64 5.14-18.9 5.14zm-19.47-42h36a18.91 18.91 0 00-4.87-13.22q-4.73-5.21-12.57-5.21a17.59 17.59 0 00-9.53 2.55 18.68 18.68 0 00-6.45 6.71 20.52 20.52 0 00-2.63 9.12z"></path><path d="M154.49 220.39l-44.16 7c-30.12 4.77-41.53 3.36-53.48-.78a62.25 62.25 0 01-29.59-21.5C19.63 195 14.77 184.61 10 154.49l-7-44.16c-4.77-30.12-3.36-41.53.78-53.48a62.25 62.25 0 0121.5-29.59C35.36 19.63 45.78 14.77 75.9 10l44.16-7c30.12-4.77 41.53-3.36 53.48.78a62.18 62.18 0 0129.58 21.5c7.64 10.08 12.5 20.5 17.27 50.62l7 44.16c4.77 30.12 3.36 41.53-.78 53.48a62.18 62.18 0 01-21.5 29.58c-10.11 7.64-20.5 12.5-50.62 17.27z"></path><path d="M162.43 145.1a31.43 31.43 0 10-35.65-26.17 31.28 31.28 0 0035.65 26.17zm-1.57-9.94a21.37 21.37 0 1117.45-24.39 21.2 21.2 0 01-17.45 24.39z" fill="url(#circle)"></path><path d="M61 107.94l46.64-7.38a5 5 0 004.18-5.76l-7.4-46.71a5 5 0 00-5.76-4.19L52 51.29a5 5 0 00-4.18 5.76l7.4 46.71a5 5 0 005.78 4.18zm3.39-10.72l-5.87-36.77 36.7-5.81L101 91.41z" fill="url(#square)"></path><path d="M90.56 124.91l-20.23 56.65a5 5 0 005.53 6.67l56.94-9a5 5 0 003.2-8.05l-36.71-47.65a5 5 0 00-8.73 1.38zM96.94 137l25.91 33.62L82.66 177z" fill="url(#triangle)"></path>',6)]))}const Hie=I(Die,[["render",Pie]]),Vie={},zie={viewBox:"0 0 230.39 230.39"};function Nie(e,t){return p(),y("svg",zie,t[0]||(t[0]=[ml('<defs><linearGradient id="circle" x1="173.17" y1="86.95" x2="141.86" y2="141.17" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#cc9300"></stop><stop offset="0.47" stop-color="#ea433a"></stop><stop offset="1" stop-color="#b327bf"></stop></linearGradient><linearGradient id="square" x1="92.49" y1="41" x2="67.07" y2="110.85" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#cc9300"></stop><stop offset="0.26" stop-color="#ea433a"></stop><stop offset="0.47" stop-color="#b327bf"></stop><stop offset="0.76" stop-color="#66f"></stop><stop offset="1" stop-color="#00bf9a"></stop></linearGradient><linearGradient id="triangle" x1="75.13" y1="190.31" x2="120.2" y2="143.64" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#b327bf"></stop><stop offset="0.47" stop-color="#66f"></stop><stop offset="1" stop-color="#00c09a"></stop></linearGradient></defs><path d="M154.49,220.39l-44.16,7c-30.12,4.77-41.53,3.36-53.48-.78a62.25,62.25,0,0,1-29.59-21.5C19.63,195,14.77,184.61,10,154.49L3,110.33C-1.77,80.21-.36,68.8,3.78,56.85a62.25,62.25,0,0,1,21.5-29.59C35.36,19.63,45.78,14.77,75.9,10l44.16-7c30.12-4.77,41.53-3.36,53.48.78a62.18,62.18,0,0,1,29.58,21.5c7.64,10.08,12.5,20.5,17.27,50.62l7,44.16c4.77,30.12,3.36,41.53-.78,53.48a62.18,62.18,0,0,1-21.5,29.58C195,210.76,184.61,215.62,154.49,220.39Z" fill="#000000"></path><path d="M162.43,145.1a31.43,31.43,0,1,0-35.65-26.17A31.28,31.28,0,0,0,162.43,145.1Zm-1.57-9.94a21.37,21.37,0,1,1,17.45-24.39A21.2,21.2,0,0,1,160.86,135.16Z" fill="url(#circle)"></path><path d="M61,107.94l46.64-7.38a5,5,0,0,0,4.18-5.76l-7.4-46.71a5,5,0,0,0-5.76-4.19L52,51.29a5,5,0,0,0-4.18,5.76l7.4,46.71A5,5,0,0,0,61,107.94Zm3.39-10.72L58.52,60.45l36.7-5.81L101,91.41Z" fill="url(#square)"></path><path d="M90.56,124.91,70.33,181.56a5,5,0,0,0,5.53,6.67l56.94-9a5,5,0,0,0,3.2-8.05L99.29,123.53A5,5,0,0,0,90.56,124.91ZM96.94,137l25.91,33.62L82.66,177Z" fill="url(#triangle)"></path>',5)]))}const Bie=I(Vie,[["render",Nie]]),Fie={},Wie={viewBox:"0 0 141.5 144.5"};function Uie(e,t){return p(),y("svg",Wie,t[0]||(t[0]=[ml('<linearGradient id="circle" gradientUnits="userSpaceOnUse" x1="125.627" y1="71.954" x2="94.317" y2="17.734" gradientTransform="matrix(1 0 0 -1 0 115.192)"><stop offset="0" stop-color="#cc9300"></stop><stop offset=".47" stop-color="#ea433a"></stop><stop offset="1" stop-color="#b327bf"></stop></linearGradient><path d="M114.7 101.3c17.2-2.5 29-18.5 26.5-35.7s-18.5-29-35.7-26.5S76.4 57.6 79 74.8v.3c2.7 17.1 18.6 28.8 35.7 26.2zm-1.6-10c-11.6 2-22.7-5.8-24.7-17.4-2-11.6 5.8-22.7 17.4-24.7s22.7 5.8 24.7 17.4c0 .1 0 .2.1.3 1.9 11.6-5.9 22.5-17.5 24.4z" fill="url(#circle)"></path><linearGradient id="square" gradientUnits="userSpaceOnUse" x1="44.783" y1="118.039" x2="19.355" y2="48.165" gradientTransform="matrix(1 0 0 -1 0 115.192)"><stop offset="0" stop-color="#cc9300"></stop><stop offset=".26" stop-color="#ea433a"></stop><stop offset=".47" stop-color="#b327bf"></stop><stop offset=".76" stop-color="#66f"></stop><stop offset="1" stop-color="#00bf9a"></stop></linearGradient><path d="M13.2 64.1l46.6-7.4c2.7-.4 4.6-3 4.2-5.7v-.1L56.7 4.3c-.4-2.7-3-4.6-5.7-4.2h-.1L4.2 7.5c-2.7.4-4.6 3-4.2 5.7v.1L7.4 60c.5 2.7 3 4.5 5.8 4.1zm3.4-10.7l-5.9-36.8 36.7-5.8 5.8 36.8-36.6 5.8z" fill="url(#square)"></path><linearGradient id="triangle" gradientUnits="userSpaceOnUse" x1="27.361" y1="-31.323" x2="72.461" y2="15.378" gradientTransform="matrix(1 0 0 -1 0 115.192)"><stop offset="0" stop-color="#b327bf"></stop><stop offset=".47" stop-color="#66f"></stop><stop offset="1" stop-color="#00c09a"></stop></linearGradient><path d="M42.8 81.1l-20.2 56.6c-1 2.6.4 5.5 2.9 6.4.8.3 1.7.4 2.6.2l56.9-9c2.7-.4 4.6-2.9 4.2-5.7-.1-.9-.5-1.7-1-2.4L51.5 79.7c-1.7-2.2-4.8-2.7-7-1-.8.6-1.4 1.4-1.7 2.4zm6.4 12.1l25.9 33.6-40.2 6.4 14.3-40z" fill="url(#triangle)"></path>',6)]))}const jie=I(Fie,[["render",Uie]]),qie={name:"AposSchema",props:{modelValue:{type:Object,required:!0,default(){return{data:{}}}},meta:{type:Object,default(){return{}}},generation:{type:Number,required:!1,default(){return null}},schema:{type:Array,required:!0},fieldStyle:{type:String,required:!1,default:""},currentFields:{type:Array,default(){return null}},followingValues:{type:Object,default(){return{}}},conditionalFields:{type:Object,default(){return ta()}},modifiers:{type:Array,default(){return[]}},fieldModifiers:{type:Object,default:()=>({})},triggerValidation:Boolean,utilityRail:{type:Boolean,default(){return!1}},docId:{type:String,default(){return null}},serverErrors:{type:Object,default(){return null}},displayOptions:{type:Object,default(){return{}}},changed:{type:Array,default(){return[]}}},emits:["update:model-value","reset","validate","update-doc-data"],data(){return{schemaReady:!1,next:{hasErrors:!1,data:{},fieldErrors:{}},fieldState:{},fieldComponentMap:window.apos.schema.components.fields||{}}},computed:{fields(){return this.schema.reduce((e,t)=>{const{requiredIf:n}=this.conditionalFields,i=Object.hasOwn(n,t.name)?n[t.name]:t.required;return{...e,[t.name]:{field:{...t,required:i},value:{data:this.modelValue.data[t.name]},serverError:this.serverErrors&&this.serverErrors[t.name],modifiers:this.computeModifiers(t)}}},{})},hasCompareMeta(){return this.schema.some(e=>{var t;return(t=this.meta[e.name])==null?void 0:t["@apostrophecms/schema:compare"]})},classes(){const e=[];return this.hasCompareMeta&&e.push("apos-schema--compare"),e},compareMetaState(){if(!this.hasCompareMeta)return{};const e={};return this.schema.forEach(t=>{var n;e[t.name]={error:!1,data:(n=this.meta[t.name])==null?void 0:n["@apostrophecms/schema:compare"]}}),e}},watch:{schema(){this.populateDocData()},"modelValue.data._id"(e){(!this.fieldState._id&&e||this.fieldState._id&&e!==this.fieldState._id.data)&&this.populateDocData()},generation(){this.populateDocData()},conditionalFields:{handler(e,t){for(const[n,i]of Object.entries(t))for(const[o,s]of Object.entries(i))if(!(s===e[n][o]||!this.fieldState[o]||!this.fieldState[o].ranValidation)){this.emitValidate();return}}}},created(){this.populateDocData()},methods:{emitValidate(){this.$emit("validate")},getDisplayOptions(e){let t={};return this.displayOptions&&(t={...this.displayOptions}),this.changed&&this.changed.includes(e)&&(t.changed=!0),t},populateDocData(){this.schemaReady=!1;const e={hasErrors:!1,data:{}},t={};this.modelValue.data._id&&(e.data._id=this.modelValue.data._id,t._id={data:this.modelValue.data._id}),this.modelValue.data.archived!==void 0&&(e.data.archived=this.modelValue.data.archived,t.archived={data:this.modelValue.data.archived}),this.schema.forEach(n=>{const i=this.modelValue.data[n.name];t[n.name]={error:!1,data:i===void 0?n.def:i},e.data[n.name]=t[n.name].data}),this.next=e,this.fieldState=t,this.$nextTick(()=>{this.schemaReady=!0,this.$emit("reset")})},async updateNextAndEmit(){if(!this.schemaReady)return;const e=this.next.hasErrors,t={...this.next.fieldState},n={...this.fieldState};let i=!1;this.next.hasErrors=!1,this.next.fieldState={...this.fieldState},this.schema.filter(o=>this.displayComponent(o)).forEach(o=>{this.fieldState[o.name].error&&(this.next.hasErrors=!0),this.fieldState[o.name].data!==void 0&&wb(o,this.next.data[o.name],this.fieldState[o.name].data)?(i=!0,this.next.data[o.name]=this.fieldState[o.name].data):this.next.data[o.name]=this.modelValue.data[o.name]}),(e!==this.next.hasErrors||t!==n)&&(i=!0),i&&this.$emit("update:model-value",{...this.next})},displayComponent({name:e,hidden:t=!1}){return!(t===!0||this.currentFields&&!this.currentFields.includes(e)||this.conditionalFields.if[e]===!1)},scrollFieldIntoView(e){var t,n,i;(i=(n=(t=this.$refs[e])==null?void 0:t[0])==null?void 0:n.$el)!=null&&i.scrollIntoView&&this.$refs[e][0].$el.scrollIntoView()},onUpdateDocData(e){this.$emit("update-doc-data",e)},highlight(e){var t;return(t=this.meta[e])==null?void 0:t["@apostrophecms/schema:highlight"]},generateItemUniqueKey(e){var t,n;return`${e.name}:${e._id??""}:${((n=(t=this.modelValue)==null?void 0:t.data)==null?void 0:n._id)??""}`},computeModifiers(e){const t=this.fieldModifiers[e.type]||this.modifiers;return[...new Set(t.concat(e.modifiers||[]))]}}},Kie={name:"AposSchema",mixins:[qie]};function Gie(e,t,n,i,o,s){return p(),R(et(e.fieldStyle==="table"?"tr":"div"),{class:te(["apos-schema",e.classes])},{default:Q(()=>[gt(e.$slots,"before",{},void 0,!0),(p(!0),y(Ce,null,Ie(e.schema,r=>(p(),R(et(e.fieldStyle==="table"?"td":"div"),{key:e.generateItemUniqueKey(r),"data-apos-field":r.name,style:Vt(e.fieldStyle==="table"&&r.columnStyle||{}),class:te({"apos-field--hidden":!e.displayComponent(r)})},{default:Q(()=>{var a,l;return[(p(),R(et(e.fieldComponentMap[r.type]),{ref_for:!0,ref:r.name,modelValue:e.fieldState[r.name],"onUpdate:modelValue":[c=>e.fieldState[r.name]=c,e.updateNextAndEmit],class:te({"apos-field__wrapper--highlight":e.highlight(r.name)}),"following-values":e.followingValues[r.name],"condition-met":(a=e.conditionalFields)==null?void 0:a.if[r.name],field:e.fields[r.name].field,meta:e.meta,modifiers:e.fields[r.name].modifiers,"display-options":e.getDisplayOptions(r.name),"trigger-validation":e.triggerValidation,"server-error":e.fields[r.name].serverError,"doc-id":e.docId,generation:e.generation,onUpdateDocData:e.onUpdateDocData,onValidate:t[0]||(t[0]=c=>e.emitValidate())},null,40,["modelValue","onUpdate:modelValue","class","following-values","condition-met","field","meta","modifiers","display-options","trigger-validation","server-error","doc-id","generation","onUpdateDocData"])),e.hasCompareMeta?Ke((p(),R(et(e.fieldComponentMap[r.type]),{key:0,ref_for:!0,ref:r.name,modelValue:e.compareMetaState[r.name],"onUpdate:modelValue":c=>e.compareMetaState[r.name]=c,class:te({"apos-field__wrapper--highlight":e.highlight(r.name)}),"following-values":e.followingValues[r.name],"condition-met":(l=e.conditionalFields)==null?void 0:l.if[r.name],field:e.fields[r.name].field,meta:e.meta,modifiers:e.fields[r.name].modifiers,"display-options":e.getDisplayOptions(r.name),"trigger-validation":e.triggerValidation,"server-error":e.fields[r.name].serverError,"doc-id":e.docId,generation:e.generation,onUpdateDocData:e.onUpdateDocData,onValidate:t[1]||(t[1]=c=>e.emitValidate())},null,40,["modelValue","onUpdate:modelValue","class","following-values","condition-met","field","meta","modifiers","display-options","trigger-validation","server-error","doc-id","generation","onUpdateDocData"])),[[on,e.displayComponent(r)]]):x("",!0)]}),_:2},1032,["data-apos-field","style","class"]))),128)),gt(e.$slots,"after",{},void 0,!0)]),_:3},8,["class"])}const Jie=I(Kie,[["render",Gie],["__scopeId","data-v-39df3d27"]]),Yie={name:"AposSearchList",props:{list:{type:Array,default(){return[]}},hint:{type:Object,default(){return null}},suggestion:{type:Object,default(){return null}},ariaId:{type:String,default:null},customFields:{type:Array,default(){return[]}},selectedItems:{type:Array,default(){return[]}},disabledTooltip:{type:String,default:null},label:{type:String,default:""},help:{type:[String,Object],default:""},icon:{type:String,default:"text-box-icon"},iconSize:{type:Number,default:20},fields:{type:Array,default(){return["slug"]}},focusIndex:{type:Number,default:null}},emits:["select"],methods:{select(e){const t=this.selectedItems;t.some(n=>n._id===e._id)||this.$emit("select",[...t,e])},getClasses(e,t){const n={"apos-search__item":!0};return e.disabled&&(n["apos-search__item--disabled"]=!0),e.classes&&Array.isArray(e.classes)&&e.classes.forEach(i=>{n[`apos-search__item--${i}`]=!0}),e.attachment&&(n["apos-search__item--attachment"]=!0),t===this.focusIndex&&(n["apos-search__item--is-focused"]=!0),n},getTooltip(e){return e.disabled&&e.tooltip!==!1?this.disabledTooltip:null},getIcon(e){return{icon:e.icon??this.icon,iconSize:e.iconSize||this.iconSize}}}},Zie={name:"AposSearchList",mixins:[Yie]},Xie=["id","aria-hidden"],Qie={key:0,class:"apos-search__item__title"},eoe={key:1,class:"apos-search__item__field"},toe=["onClick"],noe={key:0,class:"apos-search-image"},ioe=["src"],ooe={class:"apos-search__item__title"},soe={key:1,class:"apos-search__item__title"},roe={key:2,class:"apos-search__item__field"};function aoe(e,t,n,i,o,s){const r=E("AposIndicator"),a=xi("apos-tooltip");return Ke((p(),y("ul",{id:e.ariaId,"aria-hidden":!e.list.length,role:"listbox",class:"apos-primary-scrollbar apos-search"},[e.suggestion?(p(),y("li",{key:0,class:te(e.getClasses(e.suggestion))},[e.suggestion.title?(p(),y("div",Qie,$(e.suggestion.title),1)):x("",!0),e.suggestion.help?(p(),y("div",eoe,$(e.suggestion.help),1)):x("",!0)],2)):x("",!0),(p(!0),y(Ce,null,Ie(e.list,(l,c)=>{var u,f;return Ke((p(),y("li",{key:l._id,"aria-selected":"false",class:te(e.getClasses(l,c)),onClick:m=>e.select(l)},[(f=(u=l==null?void 0:l.attachment)==null?void 0:u._urls)!=null&&f["one-sixth"]?(p(),y("div",noe,[A("img",{src:l.attachment._urls["one-sixth"]},null,8,ioe)])):e.getIcon(l).icon?(p(),R(r,{key:1,icon:e.getIcon(l).icon,"icon-size":e.getIcon(l).iconSize,class:"apos-button__icon","fill-color":"currentColor"},null,8,["icon","icon-size"])):x("",!0),A("div",ooe,$(l.title),1),(p(!0),y(Ce,null,Ie(e.fields,m=>(p(),y("div",{key:m,class:"apos-search__item__field"},$(l[m]),1))),128)),(p(!0),y(Ce,null,Ie(l.customFields,m=>(p(),y("div",{key:m,class:"apos-search__item__field"},$(l[m]),1))),128))],10,toe)),[[a,e.getTooltip(l)]])}),128)),e.hint?(p(),y("li",{key:1,class:te(e.getClasses(e.hint))},[e.hint.icon?(p(),R(r,{key:0,icon:e.getIcon(e.hint).icon,"icon-size":e.getIcon(e.hint).iconSize,class:"apos-button__icon","fill-color":"currentColor"},null,8,["icon","icon-size"])):x("",!0),e.hint.title?(p(),y("div",soe,$(e.hint.title),1)):x("",!0),e.hint.help?(p(),y("div",roe,$(e.hint.help),1)):x("",!0)],2)):x("",!0)],8,Xie)),[[on,e.list.length]])}const loe=I(Zie,[["render",aoe],["__scopeId","data-v-61f405a9"]]),coe={name:"AposSubform",mixins:[lr],props:{errors:{type:Object,default:null},subform:{type:Object,required:!0},values:{type:Object,required:!0},busy:{type:Boolean,default:!1},expanded:{type:Boolean,default:!0},updateIndicator:{type:Boolean,default:!1},separator:{type:Boolean,default:!1}},emits:["submit","cancel","update-expanded"],data(){return{docFields:{data:{},hasErrors:!1},triggerValidation:!1,triggerHover:!1,scrollTimeout:null}},computed:{schema(){return this.subform.schema??[]},serverError(){return this.error||!!this.serverErrors}},watch:{values(e){this.docFields.data=at(e)},errors(e){this.serverErrors=e},expanded(e){this.triggerHover=!1,e&&setTimeout(()=>{this.scrollIntoView()},350)}},async mounted(){await this.evaluateExternalConditions(),this.evaluateConditions(),this.docFields.data=at(this.values)},beforeUnmount(){clearTimeout(this.scrollTimeout)},methods:{scrollIntoView(){this.$el.scrollIntoView()},toggleExpanded(){this.$emit("update-expanded",{name:this.subform.name,value:!this.expanded})},updateDocFields(e){this.docFields=e,this.evaluateConditions()},async submit(){this.triggerValidation=!0,this.$nextTick(async()=>{if(this.docFields.hasErrors){this.triggerValidation=!1;return}this.$emit("submit",{name:this.subform.name,values:this.docFields.data})})},async cancel(){this.$emit("cancel",{name:this.subform.name}),this.toggleExpanded(),this.$nextTick(()=>{this.clearPasswords()})},clearPasswords(){this.subform.schema.filter(e=>e.type==="password").forEach(e=>{this.docFields.data[e.name]=""})}}},doe={name:"AposSubform",mixins:[coe]},uoe={key:0,class:"apos-subform__schema"},hoe={key:0,class:"apos-subform__schema-label"},foe={class:"apos-subform__controls"},poe={key:0,class:"apos-subform__preview"},moe={class:"apos-subform__preview-grid"},goe={key:0,class:"apos-subform__preview-update-indicator"},boe={key:1,class:"apos-subform__preview-edit-indicator"};function yoe(e,t,n,i,o,s){const r=E("AposSchema"),a=E("AposButton"),l=E("AposSubformPreview"),c=E("AposIndicator");return p(),y("div",{class:te(["apos-subform",{"apos-separator":e.separator}])},[D(Qi,{name:"slide-fade"},{default:Q(()=>[e.expanded?(p(),y("div",uoe,[e.subform.label?(p(),y("span",hoe,$(e.$t(e.subform.label)),1)):x("",!0),D(r,{ref:"schema","data-apos-test":"subformSchema",class:te({"apos-subform__disabled":e.busy}),"data-apos-test-name":e.subform.name,"trigger-validation":e.triggerValidation,schema:e.schema,"model-value":e.docFields,"following-values":e.followingValues(),"conditional-fields":e.conditionalFields,"server-errors":e.serverErrors,modifiers:["small"],"onUpdate:modelValue":e.updateDocFields,onValidate:e.triggerValidate},null,8,["class","data-apos-test-name","trigger-validation","schema","model-value","following-values","conditional-fields","server-errors","onUpdate:modelValue","onValidate"]),A("div",foe,[D(a,{"data-apos-test":"subformCancel",disabled:e.busy,type:"subtle",label:"apostrophe:cancel",onClick:e.cancel},null,8,["disabled","onClick"]),D(a,{"data-apos-test":"subformSubmit",disabled:e.busy||e.docFields.hasErrors,type:"primary",label:"apostrophe:save",onClick:e.submit},null,8,["disabled","onClick"])])])):x("",!0)]),_:1}),e.expanded?x("",!0):(p(),y("div",poe,[A("div",moe,[D(l,{subform:e.subform,values:e.values},null,8,["subform","values"]),e.updateIndicator&&!e.triggerHover?(p(),y("span",goe,$(e.$t("apostrophe:updated")),1)):e.triggerHover?(p(),y("span",boe,$(e.$t("apostrophe:edit")),1)):(p(),R(c,{key:2,class:"apos-subform__preview-icon",icon:"chevron-down-icon"}))]),A("button",{class:"apos-subform__preview-trigger",onClick:t[0]||(t[0]=(...u)=>e.toggleExpanded&&e.toggleExpanded(...u)),onMouseenter:t[1]||(t[1]=u=>e.triggerHover=!0),onMouseleave:t[2]||(t[2]=u=>e.triggerHover=!1)},null,32)]))],2)}const voe=I(doe,[["render",yoe],["__scopeId","data-v-222c8255"]]);function n0(){return{themeClass:Je(N4)}}function N4(){const e=[];return e.push(`apos-theme--primary-${window.apos.ui.theme.primary}`),e}const Ou={computed:{themeClass(){return N4()}}},woe={name:"TheAposBusy",mixins:[Ou],data(){return{busy:!1,busyCount:0}},computed:{classes(){const e=[];return this.busy&&e.push("apos-is-busy"),e.concat(this.themeClass)}},mounted(){apos.bus.$on("busy",e=>{e.active===!1&&this.busyCount>=0&&this.busyCount--,this.busyCount===0&&(this.busy=e.active),e.active===!0&&this.busyCount++})}};function _oe(e,t,n,i,o,s){const r=E("AposSpinner");return p(),y("div",{class:te(["apos-busy",s.classes])},[D(r,{class:"apos-busy__spinner"})],2)}const Coe=I(woe,[["render",_oe],["__scopeId","data-v-c762ca25"]]),Aoe={name:"AposInputRole",mixins:[Qn],data(){return{next:this.modelValue.data==null?null:this.modelValue.data,choices:[]}},async mounted(){!this.field.required&&!this.field.choices.find(e=>e.value===null)&&this.choices.push({label:"",value:null}),this.choices=this.choices.concat(this.field.choices),this.$nextTick(()=>{this.field.required&&this.next==null&&this.field.choices[0]!=null&&(this.next=this.field.choices[0].value)})},methods:{validate(e){return this.field.required&&!e.length?"required":e&&!this.field.choices.find(t=>t.value===e)?"invalid":!1},change(e){this.next=this.choices.find(t=>t.value===e).value}}};function koe(e,t,n,i,o,s){const r=E("AposSelect"),a=E("AposPermissionGrid"),l=E("AposInputWrapper");return p(),R(l,{field:e.field,error:e.effectiveError,uid:e.uid,modifiers:e.modifiers,"display-options":e.displayOptions},{body:Q(()=>[D(r,{id:e.uid,choices:o.choices,disabled:e.field.readOnly,selected:e.modelValue.data,classes:["apos-input__role"],"wrapper-classes":["apos-input__role"],onChange:s.change},null,8,["id","choices","disabled","selected","onChange"]),D(a,{"api-params":{role:o.next}},null,8,["api-params"])]),_:1},8,["field","error","uid","modifiers","display-options"])}const Soe=I(Aoe,[["render",koe]]),xoe={name:"AposPermissionGrid",props:{apiParams:{type:Object,required:!0,validator(e){if(typeof e!="object")return!1;const t="role",n="rolesByType",i="_groups",o=Object.keys(e),[s]=o;return!(o.length>1||![t,n,i].includes(s)||e[t]&&typeof e[t]!="string"||e[n]&&!Array.isArray(e[n])||e[i]&&!Array.isArray(e[i]))}}},data(){return{permissionSets:[]}},watch:{apiParams:{async handler(){this.permissionSets=await this.getPermissionSets()},deep:!0}},async mounted(){this.permissionSets=await this.getPermissionSets()},methods:{getTooltip(e){const t=document.createElement("div");t.setAttribute("class","apos-info");const n=document.createElement("ul"),i=document.createElement("p"),o=document.createElement("p");return i.appendChild(document.createTextNode(this.$t("apostrophe:piecePermissionsIntro"))),o.appendChild(document.createTextNode(this.$t("apostrophe:piecePermissionsPieceTypeList"))),t.appendChild(i),t.appendChild(o),e.forEach(s=>{const r=document.createElement("li");r.appendChild(document.createTextNode(this.$t(s))),n.appendChild(r)}),t.appendChild(n),{content:t.innerHTML,localize:!1}},async getPermissionSets(){const{permissionSets:e}=await apos.http.post(`${apos.permission.action}/grid`,{body:this.apiParams,busy:!0});return e}}},Moe={class:"apos-input__role__permission-grid"},Toe={class:"apos-input__role__permission-grid__set-name"},Eoe={class:"apos-input__role__permission-grid__list"},Ooe={class:"apos-input__role__permission-grid__value"},$oe={key:0,class:"apos-sr-only"},Ioe={key:1,class:"apos-sr-only"},Loe={class:"apos-input__role__permission-grid__label"};function Doe(e,t,n,i,o,s){const r=E("AposIndicator");return p(),y("div",Moe,[(p(!0),y(Ce,null,Ie(o.permissionSets,a=>(p(),y("div",{key:a.name,class:"apos-input__role__permission-grid__set"},[A("h4",Toe,[Et($(e.$t(a.label))+" ",1),a.includes?(p(),R(r,{key:0,icon:"help-circle-icon",class:"apos-input__role__permission-grid__help",tooltip:s.getTooltip(a.includes),"icon-size":11,"icon-color":"var(--a-base-4)"},null,8,["tooltip"])):x("",!0)]),A("dl",Eoe,[(p(!0),y(Ce,null,Ie(a.permissions,l=>(p(),y("div",{key:l.name,class:"apos-input__role__permission-grid__row"},[A("dd",Ooe,[D(r,{icon:l.value?"check-bold-icon":"close-icon","icon-color":l.value?"var(--a-success)":"var(--a-base-5)"},null,8,["icon","icon-color"]),l.value?(p(),y("span",$oe,$(e.$t("apostrophe:enabled")),1)):(p(),y("span",Ioe,$(e.$t("apostrophe:disabled")),1))]),A("dt",Loe,$(e.$t(l.label)),1)]))),128))])]))),128))])}const Roe=I(xoe,[["render",Doe],["__scopeId","data-v-67762f31"]]),Poe={name:"TheAposAdminBar",mixins:[Ou],props:{items:{type:Array,required:!0}},computed:{menuItems(){return this.items.filter(e=>{var t;return!((t=e.options)!=null&&t.user)})},userItems(){return this.items.filter(e=>{var t;return(t=e.options)==null?void 0:t.user})},moduleOptions(){return window.apos.adminBar},bars(){return this.moduleOptions.bars}},mounted(){this.setSpacer()},methods:{setSpacer(){window.apos.adminBar.height=this.$refs.adminBar.offsetHeight,this.$refs.spacer.style.height=`${this.$refs.adminBar.offsetHeight}px`,apos.bus.$emit("admin-menu-height-changed")},hasLocales(){return Object.keys(window.apos.i18n.locales).length>1}}},Hoe={ref:"spacer",class:"apos-admin-bar-spacer"},Voe={ref:"adminBar",class:"apos-admin-bar",role:"menubar","aria-label":"Apostrophe Admin Bar"},zoe={class:"apos-admin-bar__row"};function Noe(e,t,n,i,o,s){const r=E("AposLogoPadless"),a=E("TheAposAdminBarMenu"),l=E("TheAposAdminBarLocale"),c=E("TheAposAdminBarUser"),u=E("TheAposContextBar");return p(),y("div",{"data-apos-test":"adminBar",class:te(["apos-admin-bar-wrapper",e.themeClass])},[A("div",Hoe,null,512),A("nav",Voe,[A("div",zoe,[D(r,{class:"apos-admin-bar__logo"}),D(a,{items:s.menuItems},null,8,["items"]),s.hasLocales()?(p(),R(l,{key:0})):x("",!0),D(c,{"data-apos-test":"authenticatedUserMenuTrigger",class:"apos-admin-bar__user",items:s.userItems},null,8,["items"])]),D(u,{onVisibilityChanged:s.setSpacer},null,8,["onVisibilityChanged"]),(p(!0),y(Ce,null,Ie(s.bars,f=>(p(),R(et(f.componentName),X({ref_for:!0},f.props||{},{key:f.id}),null,16))),128))],512)],2)}const Boe=I(Poe,[["render",Noe],["__scopeId","data-v-2621341c"]]),Foe={name:"TheAposAdminBarLocale",data(){return{search:"",locales:Object.entries(window.apos.i18n.locales).map(([e,t])=>({name:e,label:t.label||e})),localized:{},isOpen:!1}},computed:{locale(){return window.apos.i18n.locale},button(){return{label:{key:apos.i18n.locale,localize:!1},icon:"chevron-down-icon",modifiers:["icon-right","no-motion","uppercase"],type:"quiet"}},action(){var e;return(e=apos.modules[apos.adminBar.context.type])==null?void 0:e.action}},methods:{close(){this.isOpen=!1},async open(){if(apos.adminBar.context){const e=await apos.http.get(`${this.action}/${apos.adminBar.context._id}/locales`,{busy:!0});this.localized=Object.fromEntries(e.results.filter(t=>t.aposLocale.endsWith(":draft")).map(t=>[t.aposLocale.split(":")[0],t]))}this.isOpen=!0},isActive(e){return window.apos.i18n.locale===e.name},isLocalized(e){return!!this.localized[e.name]},async switchLocale(e){const{name:t}=e,n=await apos.http.post(`${apos.i18n.action}/locale`,{body:{contextDocId:apos.adminBar.context&&apos.adminBar.context._id,locale:t,clipboard:localStorage.getItem("aposWidgetClipboard")}});if(this.isLocalized(e))n.redirectTo?window.location.assign(n.redirectTo):window.location.reload();else{const i=apos.i18n.locales[apos.locale];this.$refs.menu.hide(),await apos.confirm({icon:!1,heading:"apostrophe:switchLocalesAndLocalizePage",description:"apostrophe:notInLocale",negativeLabel:"apostrophe:noJustSwitchLocales",affirmativeLabel:"apostrophe:yesLocalizeAndSwitchLocales"},{interpolate:{label:e.label,currentLocale:i.label}})?(this.$refs.menu.hide(),apos.bus.$emit("admin-menu-click",{itemName:"@apostrophecms/i18n:localize",props:{doc:apos.adminBar.context,locale:e}})):window.location.assign(n.redirectTo)}}}};function Woe(e,t,n,i,o,s){const r=E("AposLocalePicker"),a=E("AposContextMenu");return p(),R(a,{ref:"menu",class:"apos-admin-locales",identifier:"localePickerTrigger",button:s.button,unpadded:!0,"center-on-icon":!0,"menu-placement":"bottom-end",onOpen:s.open,onClose:t[0]||(t[0]=l=>o.isOpen=!1)},{default:Q(()=>[D(r,{"current-locale":s.locale,localized:o.localized,"is-open":o.isOpen,onSwitchLocale:s.switchLocale},null,8,["current-locale","localized","is-open","onSwitchLocale"])]),_:1},8,["button","onOpen"])}const Uoe=I(Foe,[["render",Woe],["__scopeId","data-v-0e190270"]]),joe={name:"TheAposAdminBarMenu",props:{items:{type:Array,default:function(){return[]}}},data(){return{createMenu:[],menuItems:[],trayItems:[],trayItemState:{}}},computed:{moduleOptions(){return window.apos.adminBar},pageTree(){return this.moduleOptions.pageTree}},async mounted(){const e=at(this.items);this.menuItems=e.filter(t=>!(t.options&&t.options.contextUtility)).map(t=>(t.items&&t.items.forEach(n=>{n.action=n.action||n.name}),t)),this.trayItems=e.filter(t=>t.options&&t.options.contextUtility),Object.values(apos.modules).forEach(t=>{t.quickCreate&&this.createMenu.push({label:t.label||t.name,name:t.name,action:`${t.name}:editor`})})},methods:{emitEvent(e){apos.bus.$emit("admin-menu-click",e.action);const t=this.trayItems.find(n=>n.name===e.action);t&&t.options.toggle&&(this.trayItemState={...this.trayItemState,[e.action]:!this.trayItemState[e.action]})},trayItemTooltip(e){var t;return e.options.toggle?this.trayItemState[e.name]&&((t=e.options.tooltip)!=null&&t.deactivate)?{content:e.options.tooltip.deactivate,placement:"bottom"}:e.options.tooltip&&e.options.tooltip.activate?{content:e.options.tooltip.activate,placement:"bottom"}:!1:e.options.tooltip}}},qoe={class:"apos-admin-bar__items",role:"menu"},Koe={key:0,class:"apos-admin-bar__item"},Goe={key:1,class:"apos-admin-bar__item"},Joe={key:2,class:"apos-admin-bar__item apos-admin-bar__tray-items"};function Yoe(e,t,n,i,o,s){const r=E("AposButton"),a=E("AposContextMenu");return p(),y("ol",qoe,[s.pageTree?(p(),y("li",Koe,[D(r,{type:"subtle",label:"apostrophe:pages",class:"apos-admin-bar__btn",modifiers:["no-motion"],role:"menuitem",onClick:t[0]||(t[0]=l=>s.emitEvent({action:"@apostrophecms/page:manager"}))})])):x("",!0),(p(!0),y(Ce,null,Ie(o.menuItems,l=>(p(),y("li",{key:l.name,class:"apos-admin-bar__item"},[l.items?(p(),R(a,{key:0,class:"apos-admin-bar__sub",menu:l.items,button:{label:l.label,modifiers:["no-motion"],class:"apos-admin-bar__btn",type:"subtle"},role:"menuitem",onItemClicked:s.emitEvent},null,8,["menu","button","onItemClicked"])):(p(),R(et(l.options&&l.options.component||"AposButton"),{key:1,type:"subtle",label:l.label,modifiers:["no-motion"],class:"apos-admin-bar__btn",role:"menuitem",onClick:c=>s.emitEvent(l)},null,8,["label","onClick"]))]))),128)),o.createMenu.length>0?(p(),y("li",Goe,[D(a,{class:"apos-admin-bar__create",menu:o.createMenu,button:{label:"apostrophe:newItem",iconOnly:!0,icon:"plus-icon",type:"primary",modifiers:["round","no-motion"]},role:"menuitem",onItemClicked:s.emitEvent},null,8,["menu","onItemClicked"])])):x("",!0),o.trayItems.length>0?(p(),y("li",Joe,[(p(!0),y(Ce,null,Ie(o.trayItems,l=>(p(),y(Ce,null,[l.options.component?(p(),R(et(l.options.component),{key:`${l.name}.component`,action:l.action},null,8,["action"])):(p(),R(r,{key:`${l.name}.fallback`,type:"subtle",modifiers:["small","no-motion"],tooltip:s.trayItemTooltip(l),class:"apos-admin-bar__context-button",icon:l.options.icon,"icon-only":!0,label:l.label,action:l.action,state:o.trayItemState[l.name]?["active"]:[],onClick:c=>s.emitEvent(l)},null,8,["tooltip","icon","label","action","state","onClick"]))],64))),256))])):x("",!0)])}const Zoe=I(joe,[["render",Yoe],["__scopeId","data-v-0cc7bd0b"]]),Xoe={name:"TheAposAdminBarUser",props:{items:{type:Array,required:!0}},computed:{button(){return{label:{key:this.user.title||"",localize:!1},icon:"chevron-down-icon",modifiers:["icon-right","no-motion"],type:"quiet"}},user(){return window.apos.login.user}},methods:{emitEvent(e){apos.bus.$emit("admin-menu-click",e.action)}}};function Qoe(e,t,n,i,o,s){const r=E("AposAvatar"),a=E("AposContextMenu");return p(),R(a,{class:"apos-admin-user",button:s.button,menu:n.items,"center-on-icon":!0,"menu-placement":"bottom-end",onItemClicked:s.emitEvent},{prebutton:Q(()=>[D(r,{class:"apos-admin-user__avatar",user:s.user},null,8,["user"])]),_:1},8,["button","menu","onItemClicked"])}const ese=I(Xoe,[["render",Qoe],["__scopeId","data-v-d479e45c"]]),$u={computed:{manuallyPublished(){return this.moduleOptions.localized&&!this.moduleOptions.autopublish}},methods:{async publish(e){const t=!!e.lastPublishedAt,n=window.apos.modules[e.type].action;try{return e=await apos.http.post(`${n}/${e._id}/publish`,{body:{},busy:!0}),await apos.notify("apostrophe:changesPublished",{type:"success",dismiss:!0,icon:"check-all-icon",buttons:[{type:"event",label:"apostrophe:undoPublish",name:t?"revert-published-to-previous":"unpublish",data:{action:n,_id:e._id}}]}),apos.bus.$emit("content-changed",{doc:e,action:"publish",localeSwitched:!!this.localeSwitched}),e}catch(i){if(i.name==="invalid"&&i.body&&i.body.data&&i.body.data.unpublishedAncestors){if(await apos.confirm({heading:"apostrophe:unpublishedParent",description:"apostrophe:unpublishedParentDescription"},{interpolate:{unpublishedParents:i.body.data.unpublishedAncestors.map(o=>o.title).join(this.$t("apostrophe:listJoiner"))}}))try{for(const o of i.body.data.unpublishedAncestors)await apos.http.post(`${n}/${o._id}/publish`,{body:{},busy:!0});return this.publish(e)}catch(o){const s=o.name==="forbidden"?"apostrophe:errorWhilePublishingParentPageForbidden":o.message;await apos.alert({heading:this.$t("apostrophe:errorWhilePublishing"),description:s||this.$t("apostrophe:errorWhilePublishingParentPage"),localize:!1})}}else await apos.alert({heading:this.$t("apostrophe:errorWhilePublishing"),description:i.message||this.$t("apostrophe:errorWhilePublishingDocument"),localize:!1});return!1}},async unpublish(e){const t=window.apos.modules[e.type].action;try{return e=await apos.http.post(`${t}/${e._id}/unpublish`,{body:{},busy:!0}),await apos.notify("apostrophe:noLongerPublished",{type:"success",dismiss:!0}),apos.bus.$emit("content-changed",{doc:e,action:"unpublish",localeSwitched:!!this.localeSwitched}),e}catch(n){return await apos.alert({heading:this.$t("apostrophe:error"),description:n.message||this.$t("apostrophe:errorWhileUnpublishing"),localize:!1}),!1}},async submitDraft(e){const t=window.apos.modules[e.type].action;try{const n=await apos.http.post(`${t}/${e._id}/submit`,{busy:!0,body:{},draft:!0}),i={...e,submitted:n};return await apos.notify("apostrophe:submittedForReview",{type:"success",icon:"list-status-icon",dismiss:!0}),apos.bus.$emit("content-changed",{doc:i,action:"submit",localeSwitched:!!this.localeSwitched}),n}catch(n){return await apos.alert({heading:this.$t("apostrophe:errorWhileSubmitting"),description:n.message||this.$t("apostrophe:errorWhileSubmittingDescription"),localize:!1}),!1}},async dismissSubmission(e){const t=window.apos.modules[e.type].action;try{await apos.http.post(`${t}/${e._id}/dismiss-submission`,{body:{},busy:!0}),await apos.notify("apostrophe:dismissedSubmission",{type:"success",dismiss:!0,icon:"close-circle-icon"});const n={...e,submitted:null};apos.bus.$emit("content-changed",{doc:n,action:"dismiss-submission",localeSwitched:!!this.localeSwitched})}catch(n){return await apos.alert({heading:this.$t("apostrophe:errorWhileDismissing"),description:n.message||this.$t("apostrophe:errorWhileDismissingDescription"),localize:!1}),!1}},async discardDraft(e){const t=!!e.lastPublishedAt;try{if(await apos.confirm({heading:t?"apostrophe:discardDraft":"apostrophe:deleteDraft",description:t?"apostrophe:discardDraftDescription":"apostrophe:deleteDraftDescription",affirmativeLabel:t?"apostrophe:discardDraftAffirmativeLabel":"apostrophe:deleteDraftAffirmativeLabel",interpolate:{title:e.title}})){const n=window.apos.modules[e.type].action;if(t){const i=await apos.http.post(`${n}/${e._id}/revert-draft-to-published`,{body:{},busy:!0});return await apos.notify("apostrophe:draftDiscarded",{type:"success",dismiss:!0,icon:"text-box-remove-icon"}),apos.bus.$emit("content-changed",{doc:i,action:"revert-draft-to-published",localeSwitched:!!this.localeSwitched}),{doc:i}}else return await apos.http.delete(`${n}/${e._id}`,{body:{},busy:!0}),await apos.notify("apostrophe:draftDeleted",{type:"success",dismiss:!0}),apos.bus.$emit("content-changed",{doc:e,action:"delete",localeSwitched:!!this.localeSwitched}),{}}}catch(n){await apos.alert({heading:this.$t("apostrophe:error"),description:n.message||this.$t("apostrophe:errorWhileRestoringPrevious"),localize:!1})}}}},nu={data(){return{locked:!1,lockTimeout:null,lockRefreshing:null,lockApiUrl:null}},async unmounted(){await this.unlock()},methods:{async lock(e){this.lockApiUrl=e;try{return await apos.http.patch(e,{body:{_advisoryLock:{tabId:apos.adminBar.tabId,lock:!0}},draft:!0,busy:!0}),this.markLockedAndScheduleRefresh(),!0}catch(t){if(this.isLockedError(t))if(await apos.confirm({heading:t.body.data.me?"apostrophe:docInUseBySelf":"apostrophe:docInUseByAnother",description:t.body.data.me?"apostrophe:takeControlFromSelf":"apostrophe:takeControlFromOther"},{interpolate:{who:t.body.data.title}}))try{return await apos.http.patch(this.lockApiUrl,{body:{_advisoryLock:{tabId:apos.adminBar.tabId,lock:!0,force:!0}},draft:!0,busy:!0}),this.markLockedAndScheduleRefresh(),!0}catch(n){return await apos.notify(n.message,{type:"danger",localize:!1}),!1}else return!1}},async showLockedError(e){await apos.alert({heading:"apostrophe:multipleEditors",description:e.body.data.me?"apostrophe:youTookControl":"apostrophe:someoneElseTookControl",interpolate:{who:e.body.data.title}})},isLockedError(e){return e&&e.body&&e.body.name==="locked"},addLockToRequest(e){e._advisoryLock={tabId:apos.adminBar.tabId,lock:!0}},async unlock(){if(this.locked){clearTimeout(this.lockTimeout),this.lockRefreshing&&await this.lockRefreshing;try{await apos.http.patch(this.lockApiUrl,{body:{_advisoryLock:{tabId:apos.adminBar.tabId,lock:!1}},draft:!0,busy:!0})}catch{}}},markLockedAndScheduleRefresh(){this.locked=!0,this.lockTimeout=setTimeout(this.refreshLock,1e4)},refreshLock(){this.lockRefreshing=(async()=>{try{await apos.http.patch(this.lockApiUrl,{body:{_advisoryLock:{tabId:apos.adminBar.tabId,lock:!0}},draft:!0}),this.lockTimeout=setTimeout(this.refreshLock,1e4)}catch(e){if(this.isLockedError(e))return await this.showLockedError(e),clearTimeout(this.lockTimeout),this.lockTimeout=null,this.locked=!1,this.lockNotAvailable()}this.lockRefreshing=null})()}}},tse={name:"TheAposContextBar",mixins:[$u,nu],emits:["visibility-changed"],data(){const e=apos.http.parseQuery(location.search),t=e.aposMode||"published";if(t==="draft"){const n={...e};delete n.aposMode,history.replaceState(null,"",apos.http.addQueryToUrl(location.href,n))}return{patchesSinceLoaded:[],undone:[],patchesSinceSave:[],editMode:!1,draftMode:t,queryDraftMode:e.aposMode,original:null,saving:!1,editing:!1,editingTimeout:null,retrying:!1,saved:!1,savingTimeout:null,published:null,context:window.apos.adminBar.context?{...window.apos.adminBar.context}:{},contextStack:[],draftIsEditable:!1}},computed:{contextBarActive(){return window.apos.adminBar.contextBar&&(this.canEdit||this.moduleOptions.canLocalize)},canEdit(){return this.context._edit||this.context.aposLocale&&this.context.aposLocale.endsWith(":published")&&this.draftIsEditable},classes(){return this.contextBarActive?{"apos-admin-bar__row":!0,"apos-admin-bar__row--utils":!0}:{}},needToAutosave(){return!!this.patchesSinceSave.length},canPublish(){return this.context._publish||apos.modules[this.context.type].canPublish},readyToPublish(){return this.canPublish?this.context.modified&&!this.needToAutosave&&!this.editing:this.context.submitted?this.context.updatedAt>this.context.submitted.at:this.context.lastPublishedAt?this.context.updatedAt>this.context.lastPublishedAt:!0},moduleOptions(){return window.apos.adminBar},action(){return apos.modules[this.context.type].action},hasCustomUi(){return this.contextStack.length>0},customPublishLabel(){return this.hasCustomUi&&apos.modules[this.context.type].publishLabel||null},canUndo(){return this.patchesSinceLoaded.length>0},canRedo(){return this.undone.length>0},autopublish(){return this.context.autopublish??this.moduleOptions.autopublish},isBreakpointPreviewModeEnabled(){return this.moduleOptions.breakpointPreviewMode.enable||!1},breakpointPreviewModeScreens(){return this.moduleOptions.breakpointPreviewMode.screens||{}},breakpointPreviewModeResizable(){return this.moduleOptions.breakpointPreviewMode.resizable||!1}},watch:{editMode(e){window.apos.adminBar.editMode=e},contextBarActive(){this.$nextTick(()=>{this.$emit("visibility-changed")})}},async mounted(){apos.bus.$on("revert-published-to-previous",this.onRevertPublishedToPrevious),apos.bus.$on("set-context",this.onSetContext),apos.bus.$on("push-context",this.onPushContext),apos.bus.$on("pop-context",this.onPopContext),apos.bus.$on("context-editing",this.onContextEditing),apos.bus.$on("context-edited",this.onContextEdited),apos.bus.$on("content-changed",this.onContentChanged),window.addEventListener("beforeunload",this.onBeforeUnload),window.addEventListener("storage",this.onStorage);let e=sessionStorage.getItem("aposTabId");e||(e=qt(),sessionStorage.setItem("aposTabId",e)),window.apos.adminBar.tabId=e,window.apos.adminBar.editMode=!1;const t=JSON.parse(sessionStorage.getItem("aposLastBaseContext")||"{}");t.draftMode=this.queryDraftMode||t.draftMode,t.aposDocId===this.context.aposDocId&&(t.draftMode!==this.draftMode&&await this.setContext({mode:t.draftMode}),this.editMode!==t.editMode&&await this.switchEditMode(!0)),await this.updateDraftIsEditable(),this.rememberLastBaseContext(),this.published=await this.getPublished(),apos.util.onReadyAndRefresh(()=>{window.apos.adminBar.scrollPosition&&setTimeout(()=>{window.scroll({left:window.apos.adminBar.scrollPosition.x,top:window.apos.adminBar.scrollPosition.y}),window.apos.adminBar.scrollPosition=null},0)})},methods:{async onSetContext({mode:e,locale:t,doc:n}){await this.setContext({mode:e,locale:t,doc:n,navigate:!0}),apos.bus.$emit("context-changed",{mode:e,locale:t,doc:n})},async onPushContext({doc:e}){!this.draftMode!=="draft"&&await this.switchDraftMode("draft"),this.editMode||await this.switchEditMode(!0),this.contextStack.push({doc:this.context,original:this.original,patchesSinceLoaded:this.patchesSinceLoaded,undone:this.undone}),this.original=at(e),this.patchesSinceLoaded=[],this.undone=[],await this.setContext({doc:e,mode:"draft",navigate:!1}),await this.refresh()},async onPopContext(){const e=this.contextStack.pop();this.original=e.original,this.patchesSinceLoaded=e.patchesSinceLoaded,this.undone=e.undone,await this.setContext({doc:e.doc}),await this.refresh()},async onContextEditing(e){typeof e=="boolean"?this.editing=e:(this.editing||(this.editing=!0),this.editingTimeout&&clearTimeout(this.editingTimeout),this.editingTimeout=setTimeout(()=>{this.editing=!1},1100))},async onPublish(){if(this.canPublish){const e=await this.publish(this.context);e&&(this.context={...this.context,lastPublishedAt:Date.now(),modified:!1},this.published=e)}else{const e=await this.submitDraft(this.context);e&&(this.context={...this.context,submitted:e})}},onBeforeUnload(e){(this.patchesSinceSave.length||this.saving||this.editing)&&(e.preventDefault(),e.returnValue="")},async save(){for(;this.patchesSinceSave.length;){const e=this.patchesSinceSave;this.retrying=!1,this.saving=!0,this.patchesSinceSave=[];try{this.saved=!1;const t={_patches:e};this.addLockToRequest(t);const n=await apos.http.patch(`${this.action}/${this.context._id}`,{body:t});this.context=n,this.retrying=!1}catch(t){if(this.isLockedError(t))return await this.showLockedError(t),this.lockNotAvailable();this.patchesSinceSave=[...e,...this.patchesSinceSave],await new Promise((n,i)=>{setTimeout(()=>n(),5e3)}),this.retrying=!0}}this.saving=!1,this.saved=!0},async switchDraftMode(e){await this.setContext({mode:e})},async setContext({mode:e,locale:t,doc:n,navigate:i=!1}){if(e=e||this.draftMode,t=t||apos.i18n.locale,n=n||this.context,!!n){if(e===this.draftMode&&t===apos.i18n.locale){if(this.context._id===n._id&&!this.urlDiffers(n._url))return;if(i&&this.urlDiffers(n._url))return await this.unlock(),window.location.assign(n._url);await this.unlock()}try{const o=window.apos.modules[n.type].action,s=await apos.http.get(`${o}/${n._id}`,{busy:!0,qs:{aposMode:e,aposLocale:t}});if(i&&!s._url){await apos.alert({heading:"apostrophe:pageDoesNotExistYet",description:"apostrophe:pageDoesNotExistYetDescription",interpolate:{mode:e,locale:t}});return}window.sessionStorage.setItem("aposStateChange",Date.now()),window.sessionStorage.setItem("aposStateChangeSeen","{}"),e==="published"&&(this.editMode=!1),window.apos.adminBar.context=s,window.apos.adminBar.contextId=s._id,this.context=s,this.published=await this.getPublished(),await this.updateDraftIsEditable(),this.draftMode=e,i?await this.refreshOrReload(s._url)||this.editMode&&(await this.lock(`${this.action}/${this.context._id}`)||this.lockNotAvailable()):(this.editMode&&(await this.lock(`${this.action}/${this.context._id}`)||this.lockNotAvailable()),this.contextStack.length||await this.refresh())}catch(o){o.status===404?await apos.alert({heading:"apostrophe:doesNotExistYet",description:"apostrophe:doesNotExistYetDescription"}):await apos.alert({heading:"apostrophe:error",description:"apostrophe:unableToSwitchModes"})}this.rememberLastBaseContext()}},onContextEdited(e){e=at(e),this.patchesSinceLoaded.push(e),this.patchesSinceSave.push(e),this.undone=[],this.saving||this.save()},async onContentChanged(e){(e.doc&&e.doc._id===this.context._id||e.docIds&&e.docIds.includes(this.context._id))&&(e.action==="delete"?this.contextStack.length||location.assign(`${window.apos.prefix}/`):this.context=await apos.http.get(`${this.action}/${this.context._id}`,{busy:!0}));const t=this.context?apos.modules[this.context.type]:{contentChangedRefresh:!0};!e.localeSwitched&&t.contentChangedRefresh&&await this.refresh({scrollcheck:e.action==="history"})},async switchEditMode(e){if(this.editMode=e,e&&!await this.lock(`${this.action}/${this.context._id}`)){this.lockNotAvailable();return}this.draftMode!=="draft"?await this.switchDraftMode("draft"):await this.refresh()},async refresh(e={}){const t=document.querySelector("[data-apos-refreshable-body]")||document.querySelector("[data-apos-refreshable]");if(e.scrollcheck&&(window.apos.adminBar.scrollPosition={x:window.scrollX,y:window.scrollY}),!t){apos.bus.$emit("refreshed"),this.rememberLastBaseContext();return}const{action:n}=window.apos.modules[this.context.type];let i;try{i=await apos.http.get(`${n}/${this.context.aposDocId}`,{qs:{aposMode:this.draftMode,project:{_url:1}}})}catch{return}this.urlDiffers(i._url)&&(i._url=i._url+(window.location.search||""),history.replaceState(null,"",i._url));const o={...apos.http.parseQuery(window.location.search),aposRefresh:"1",aposMode:this.draftMode,...this.editMode?{aposEdit:"1"}:{}};if(i._url&&(t.innerHTML=await apos.http.get(i._url,{qs:o,headers:{"Cache-Control":"no-cache"},draft:!0,busy:!0,prefix:!1})),this.editMode&&!this.original){this.original={};const s=Array.from(document.querySelectorAll("[data-apos-area-newly-editable]")).filter(r=>r.getAttribute("data-doc-id")===this.context._id);s.sort((r,a)=>{const l=N2(r),c=N2(a);return l<c?-1:c>l?1:0});for(const r of s){const a=JSON.parse(r.getAttribute("data"));this.original[`@${a._id}`]=a}}apos.bus.$emit("refreshed"),this.rememberLastBaseContext()},async onDismissSubmission(){await this.dismissSubmission(this.context)&&(this.context={...this.context,submitted:null})},async onRevertPublishedToPrevious(e){try{const t=await apos.http.post(`${e.action}/${e._id}/revert-published-to-previous`,{body:{},busy:!0});await apos.notify("apostrophe:restoredPrevious",{type:"success",dismiss:!0}),e._id.replace(/:.*$/,"")===this.context._id.replace(/:.*$/,"")&&(this.context={...this.context,modified:!0,lastPublishedAt:t&&(t.lastPublishedAt||t.updatedAt)})}catch(t){await apos.alert({heading:this.$t("apostrophe:error"),description:t.message||this.$t("apostrophe:errorWhileRestoring"),localize:!1})}},async undo(){this.canUndo&&(this.undone.push(this.patchesSinceLoaded.pop()),await this.refreshAfterHistoryChange("apostrophe:undoFailed"))},async redo(){this.canRedo&&(this.patchesSinceLoaded.push(this.undone.pop()),await this.refreshAfterHistoryChange("apostrophe:redoFailed"))},async refreshAfterHistoryChange(e){this.saving=!0;try{const t=await apos.http.patch(`${this.action}/${this.context._id}`,{body:{_patches:[this.original,...this.patchesSinceLoaded]},busy:!0});this.contextStack.length?apos.bus.$emit("content-changed",{doc:t,action:"history"}):await this.refresh({scrollcheck:!0})}catch(t){console.error(t),apos.notify(e,{type:"error"})}finally{this.saving=!1}},async refreshOrReload(e){return this.urlDiffers(e)?(window.location.assign(e),!0):(await this.refresh(),!1)},urlDiffers(e){if(!e)return!1;const t=e.replace(/^https?:\/\/[^/]+\//,"/"),n=window.location.pathname+window.location.search;return t!==n},lockNotAvailable(){this.contextStack.length?apos.bus.$emit("context-close",this.context):this.switchEditMode(!1)},async updateDraftIsEditable(){if(this.context.aposLocale&&this.context.aposLocale.endsWith("published")&&!this.context._edit)try{const e=await apos.http.get(`${this.action}/${this.context._id}`,{busy:!0,qs:{aposMode:"draft",aposLocale:this.context.aposLocale.split(":")[0]}});this.draftIsEditable=e&&e._edit}catch(e){console.error(e)}},async getPublished(){var n;const e=(n=window.apos.modules)==null?void 0:n[this.context.type];if((e==null?void 0:e.localized)&&!this.autopublish&&this.context.lastPublishedAt){const i=window.apos.modules[this.context.type].action;try{return await apos.http.get(`${i}/${this.context._id}`,{busy:!0,qs:{aposMode:"published"}})}catch(o){console.error(o)}}return null},rememberLastBaseContext(){sessionStorage.setItem("aposLastBaseContext",JSON.stringify({aposDocId:this.context.aposDocId,draftMode:this.draftMode,editMode:this.editMode}))},addContextLabel({label:e}){var t;(t=document.querySelector("[data-apos-context-label]"))==null||t.replaceChildren(document.createTextNode(this.$t(e)))},removeContextLabel(){var e;(e=document.querySelector("[data-apos-context-label]"))==null||e.replaceChildren()}}};function N2(e){let t=0;for(;e;)e=e.parentNode,t++;return t}const nse={class:"apos-admin-bar__control-group"};function ise(e,t,n,i,o,s){const r=E("TheAposContextUndoRedo"),a=E("TheAposContextBreakpointPreviewMode"),l=E("TheAposSavingIndicator"),c=E("TheAposContextTitle"),u=E("TheAposContextModeAndSettings");return p(),y("div",{class:te(s.classes)},[s.contextBarActive?(p(),y(Ce,{key:0},[A("div",nse,[D(r,{"v-if":o.editMode,"can-undo":s.canUndo,"can-redo":s.canRedo,onUndo:s.undo,onRedo:s.redo},null,8,["v-if","can-undo","can-redo","onUndo","onRedo"]),s.isBreakpointPreviewModeEnabled?(p(),R(a,{key:0,screens:s.breakpointPreviewModeScreens,resizable:s.breakpointPreviewModeResizable,onSwitchBreakpointPreviewMode:s.addContextLabel,onResetBreakpointPreviewMode:s.removeContextLabel},null,8,["screens","resizable","onSwitchBreakpointPreviewMode","onResetBreakpointPreviewMode"])):x("",!0),(p(),R(l,{key:"status",retrying:o.retrying,editing:o.editing,saving:o.saving,saved:o.saved},null,8,["retrying","editing","saving","saved"]))]),s.hasCustomUi?x("",!0):(p(),R(c,{key:0,class:"apos-admin-bar__control-group",context:o.context,"draft-mode":o.draftMode,onSwitchDraftMode:s.switchDraftMode},null,8,["context","draft-mode","onSwitchDraftMode"])),D(u,{class:"apos-admin-bar__control-group",context:o.context,published:o.published,"edit-mode":o.editMode,"has-custom-ui":s.hasCustomUi,"can-publish":s.canPublish,"ready-to-publish":s.readyToPublish,"custom-publish-label":s.customPublishLabel,onSwitchEditMode:s.switchEditMode,onPublish:s.onPublish},null,8,["context","published","edit-mode","has-custom-ui","can-publish","ready-to-publish","custom-publish-label","onSwitchEditMode","onPublish"])],64)):x("",!0)],2)}const ose=I(tse,[["render",ise],["__scopeId","data-v-aea25e04"]]),sse={name:"TheAposContextBreakpointPreviewMode",props:{screens:{type:Object,validator(e,t){return Object.values(e).every(n=>typeof n.label=="string"&&typeof n.width=="string"&&typeof n.height=="string"&&typeof n.icon=="string")},default:()=>({})},resizable:{type:Boolean,default:!1}},emits:["switch-breakpoint-preview-mode","reset-breakpoint-preview-mode"],data(){return{mode:null,originalBodyBackground:null,shortcuts:this.getShortcuts(),breakpoints:this.getBreakpointItems(),showDropdown:!1,bodyEl:null,refreshableBodyEl:null,observer:new MutationObserver(this.observerCallback)}},computed:{activeScreen(){return this.mode&&this.screens[this.mode]},button(){var t;let e="apos-admin-bar__breakpoint-preview-mode-dropdown-btn";return this.activeScreen||(e+=" apos-admin-bar__breakpoint-preview-mode-dropdown-btn--inactive"),{class:e,label:{key:((t=this.activeScreen)==null?void 0:t.label)||"apostrophe:breakpointPreviewSelect",localize:!0},icon:"chevron-down-icon",secondIcon:this.activeScreen?this.getScreenIcon(this.activeScreen):null,modifiers:["icon-right","no-motion"],type:"outline"}},modifiers(){const e="apos-admin-bar__breakpoint-preview-mode",t=[];return Object.keys(this.shortcuts).length||t.push(`${e}--no-shortcuts`),this.showDropdown||t.push(`${e}--no-dropdown`),t}},mounted(){var t;this.bodyEl=document.querySelector("body"),this.setShowDropdown(),apos.bus.$on("command-menu-admin-bar-toggle-breakpoint-preview-mode",this.toggleBreakpointPreviewMode),this.originalBodyBackground=((t=window.getComputedStyle(document.querySelector("body")))==null?void 0:t.background)||"#fff";const e=this.loadState();e.mode&&this.toggleBreakpointPreviewMode(e)},unmounted(){apos.bus.$off("command-menu-admin-bar-toggle-breakpoint-preview-mode",this.toggleBreakpointPreviewMode)},methods:{observerCallback(e,t){for(const n of e){if(n.type!=="attributes"||n.attributeName.startsWith("data-apos")||n.attributeName==="data-breakpoint-preview-mode")continue;const i=n.target.getAttribute(n.attributeName);this.refreshableBodyEl.setAttribute(n.attributeName,i)}},createFakeBody(e){this.refreshableBodyEl=document.createElement("div"),this.refreshableBodyEl.setAttribute("data-apos-refreshable-body",""),Array.from(e.childNodes).forEach(t=>{this.refreshableBodyEl.append(t)}),Array.from(this.bodyEl.attributes||{}).filter(({name:t})=>!t.startsWith("data-apos")).forEach(({name:t,value:n})=>{this.refreshableBodyEl.setAttribute(t,n)}),e.append(this.refreshableBodyEl)},switchBreakpointPreviewMode({mode:e,label:t,width:n,height:i}){const o=document.querySelector("[data-apos-refreshable]");this.mode||(this.createFakeBody(o),this.observer.observe(this.bodyEl,{attributes:!0})),this.bodyEl.setAttribute("data-breakpoint-preview-mode",e),o.setAttribute("data-resizable",this.resizable),o.setAttribute("data-label",this.$t(t)),o.style.width=n,o.style.height=i,this.mode=e,this.$emit("switch-breakpoint-preview-mode",{mode:e,label:t,width:n,height:i}),this.saveState({mode:e,label:t,width:n,height:i})},toggleBreakpointPreviewMode(e){if(this.mode===e.mode||e.mode===null){this.resetBreakpointPreview();return}this.switchBreakpointPreviewMode(e)},resetBreakpointPreview(){const e=document.querySelector("[data-apos-refreshable]");this.observer.disconnect(),this.refreshableBodyEl&&(Array.from(this.refreshableBodyEl.childNodes).forEach(t=>{(t.nodeType!==Node.TEXT_NODE||t.nodeValue.trim())&&e.append(t)}),this.refreshableBodyEl.remove(),this.refreshableBodyEl=null,this.bodyEl.removeAttribute("data-breakpoint-preview-mode"),e.removeAttribute("data-resizable"),e.removeAttribute("data-label"),e.style.removeProperty("width"),e.style.removeProperty("height"),this.mode=null,this.$emit("reset-breakpoint-preview-mode"),this.saveState({mode:this.mode}))},loadState(){return JSON.parse(sessionStorage.getItem("aposBreakpointPreviewMode")||"{}")},saveState({mode:e=null,label:t=null,width:n=null,height:i=null}={}){this.loadState().mode!==e&&sessionStorage.setItem("aposBreakpointPreviewMode",JSON.stringify({mode:e,label:t,width:n,height:i}))},getShortcuts(){return Object.fromEntries(Object.entries(this.screens).filter(([e,{shortcut:t}])=>t))},getBreakpointItems(){return Object.entries(this.screens).map(([e,t])=>({name:e,action:e,label:t.label,width:t.width,height:t.height,icon:this.getScreenIcon(t)}))},getScreenIcon(e){if(e.icon)return e.icon;const t=parseInt(e.width);return t>1024?"monitor-icon":t>540?"tablet-icon":"cellphone-icon"},selectBreakpoint(e){const{name:t,label:n,width:i,height:o}=this.breakpoints.find(({name:s})=>s===e.action);this.toggleBreakpointPreviewMode({mode:t,label:n,width:i,height:o})},setShowDropdown(){this.showDropdown=Object.values(this.screens).some(({shortcut:e})=>!e)}}},rse={class:"apos-admin-bar__breakpoint-preview-mode-shortcuts"};function ase(e,t,n,i,o,s){const r=E("AposContextMenu"),a=E("AposButton");return p(),y("div",{"data-apos-test":"breakpointPreviewMode",class:te(["apos-admin-bar__breakpoint-preview-mode",s.modifiers])},[A("div",rse,[(p(!0),y(Ce,null,Ie(o.shortcuts,(l,c)=>(p(),R(et("AposButton"),{key:c,"data-apos-test":`breakpointPreviewMode:${c}`,modifiers:["small","no-motion"],label:l.label,tooltip:e.$t(l.label),title:e.$t(l.label),icon:l.icon,"icon-only":!0,type:"subtle",class:te(["apos-admin-bar__breakpoint-preview-mode-button",{"apos-is-active":o.mode===c}]),onClick:u=>s.toggleBreakpointPreviewMode({mode:c,label:l.label,width:l.width,height:l.height})},null,8,["data-apos-test","label","tooltip","title","icon","class","onClick"]))),128))]),o.showDropdown?(p(),R(r,{key:0,class:"apos-admin-bar__breakpoint-preview-mode-dropdown",button:s.button,menu:o.breakpoints,"active-item":o.mode,"center-on-icon":!0,"menu-placement":"bottom-end",onItemClicked:s.selectBreakpoint},null,8,["button","menu","active-item","onItemClicked"])):x("",!0),D(Qi,null,{default:Q(()=>[Ke(D(a,{tooltip:"apostrophe:breakpointPreviewClear","icon-only":!0,icon:"close-icon",modifiers:["small","no-motion"],label:"apostrophe:breakpointPreviewClear",type:"subtle",onClick:t[0]||(t[0]=l=>s.toggleBreakpointPreviewMode({mode:o.mode,...s.activeScreen}))},null,512),[[on,s.activeScreen]])]),_:1})],2)}const lse=I(sse,[["render",ase],["__scopeId","data-v-87d6241a"]]),cse={name:"TheAposContextModeAndSettings",props:{customPublishLabel:{type:String,default(){return null}},hasCustomUi:{type:Boolean,required:!0},context:{type:Object,required:!0},published:{type:Object,default(){return null}},editMode:Boolean,readyToPublish:Boolean,canPublish:Boolean},emits:["switch-edit-mode","discard-draft","publish","dismiss-submission"],data(){return{hasBeenPublishedButNotUpdated:!1}},computed:{moduleOptions(){return window.apos.adminBar},contextEditorName(){return this.moduleOptions.contextEditorName},publishLabel(){return this.canPublish?this.context.lastPublishedAt?this.hasBeenPublishedThisPageload&&!this.readyToPublish&&this.hasBeenPublishedButNotUpdated?"apostrophe:published":this.hasBeenPublishedThisPageload&&!this.readyToPublish?"apostrophe:updated":"apostrophe:update":"apostrophe:publish":this.hasBeenPublishedThisPageload&&!this.readyToPublish?"apostrophe:submitted":this.context.lastPublishedAt?"apostrophe:submitUpdate":"apostrophe:submit"},publishTooltip(){return this.canPublish&&this.context.lastPublishedAt&&!this.hasBeenPublishedThisPageload?{content:"apostrophe:updateTooltip",placement:"bottom"}:!1},isAutopublished(){return this.context._aposAutopublish??(window.apos.modules[this.context.type].autopublish||!1)},hasBeenPublishedThisPageload(){return this.context.lastPublishedAt>this.mountedAt||(this.context.submitted&&this.context.submitted.at)>this.mountedAt},canSwitchToEditMode(){return!this.editMode},canSwitchToPreviewMode(){return this.editMode&&!this.hasCustomUi}},mounted(){this.mountedAt=new Date().toISOString(),apos.bus.$on("command-menu-admin-bar-toggle-edit-preview",this.toggleEditPreviewMode),apos.bus.$on("command-menu-admin-bar-publish-draft",this.onPublish)},unmounted(){apos.bus.$off("command-menu-admin-bar-toggle-edit-preview",this.toggleEditPreviewMode),apos.bus.$off("command-menu-admin-bar-publish-draft",this.onPublish)},methods:{toggleEditPreviewMode(){this.canSwitchToEditMode?this.switchEditMode(!0):this.canSwitchToPreviewMode&&this.switchEditMode(!1)},switchEditMode(e){this.$emit("switch-edit-mode",e)},onPublish(){!this.editMode||!this.readyToPublish||(this.context.lastPublishedAt?this.hasBeenPublishedButNotUpdated=!1:this.hasBeenPublishedButNotUpdated=!0,this.$emit("publish"))}}},dse={key:"switchToEditMode",class:"apos-admin-bar__control-set__group"},use={key:"switchToPreviewMode",class:"apos-admin-bar__control-set__group"};function hse(e,t,n,i,o,s){const r=E("AposButton"),a=E("AposDocContextMenu");return p(),R(Oc,{tag:"div",class:"apos-admin-bar__control-set apos-admin-bar__control-set--mode-and-settings",name:"flip"},{default:Q(()=>[n.editMode?x("",!0):(p(),y("div",dse,[D(r,{class:"apos-admin-bar__context-button",label:"apostrophe:edit",type:"subtle",modifiers:["small","no-motion"],tooltip:{content:"apostrophe:toggleEditMode",placement:"bottom"},onClick:t[0]||(t[0]=l=>s.switchEditMode(!0))})])),n.editMode?(p(),y("div",use,[D(a,{doc:n.context,published:n.published,"show-preview":!1},null,8,["doc","published"]),s.canSwitchToPreviewMode&&!s.isAutopublished?(p(),R(r,{key:0,class:"apos-admin-bar__context-button",label:"apostrophe:preview",tooltip:{content:"apostrophe:previewTooltip",placement:"bottom"},type:"subtle",modifiers:["small","no-motion"],onClick:t[1]||(t[1]=l=>s.switchEditMode(!1))})):x("",!0),n.editMode&&!s.isAutopublished?(p(),R(r,{key:1,type:"primary",label:s.publishLabel,tooltip:s.publishTooltip,disabled:!n.readyToPublish,class:"apos-admin-bar__btn apos-admin-bar__context-button",modifiers:["no-motion"],onClick:s.onPublish},null,8,["label","tooltip","disabled","onClick"])):x("",!0)])):x("",!0)]),_:1})}const fse=I(cse,[["render",hse],["__scopeId","data-v-d074db14"]]),pse={name:"TheAposContextTitle",props:{draftMode:{type:String,required:!0},hasCustomUi:Boolean,context:{type:Object,default(){return{}}}},emits:["switch-draft-mode"],computed:{updatedBy(){let e="ApostropheCMS ";if(this.context.updatedBy){const t=this.context.updatedBy;e="",e+=t.title?`${t.title} `:"",e+=t.username?`(${t.username})`:""}return e},draftButton(){return{label:this.draftMode==="draft"?"apostrophe:draft":"apostrophe:published",icon:"chevron-down-icon",modifiers:["icon-right","no-motion"],type:"quiet"}},isUnpublished(){return!this.context.lastPublishedAt},docTooltip(){return{key:"apostrophe:lastUpdatedBy",updatedAt:Kr(this.context.updatedAt).format(this.$t("apostrophe:dayjsTitleDateFormat")),updatedBy:this.updatedBy}},draftMenu(){return[{label:"apostrophe:draft",name:"draft",action:"draft",modifiers:this.draftMode==="draft"?["disabled","selected"]:null},{label:"apostrophe:published",name:"published",action:"published",modifiers:this.draftMode==="published"?["disabled","selected"]:null}]},canTogglePublishDraftMode(){return!this.isUnpublished&&!this.hasCustomUi},moduleOptions(){return window.apos.adminBar},isAutopublished(){return this.context._aposAutopublish??(window.apos.modules[this.context.type].autopublish||!1)}},mounted(){apos.bus.$on("command-menu-admin-bar-toggle-publish-draft",this.togglePublishDraftMode)},unmounted(){apos.bus.$off("command-menu-admin-bar-toggle-publish-draft",this.togglePublishDraftMode)},methods:{togglePublishDraftMode(){this.canTogglePublishDraftMode&&this.switchDraftMode({action:this.draftMode==="draft"?"published":"draft"})},switchDraftMode(e){this.$emit("switch-draft-mode",e.action)}}},mse={key:"title",class:"apos-admin-bar__title"},gse={class:"apos-admin-bar__title__document-title"},bse={key:0,class:"apos-admin-bar__title__context"};function yse(e,t,n,i,o,s){const r=E("AposIndicator"),a=E("AposContextMenu"),l=E("AposLabel");return p(),R(Oc,{tag:"div",class:"apos-admin-bar__control-set apos-admin-bar__control-set--title",name:"flip"},{default:Q(()=>[Ke((p(),y("span",mse,[D(r,{icon:"information-outline-icon","fill-color":"var(--a-primary)",tooltip:s.docTooltip,class:"apos-admin-bar__title__indicator"},null,8,["tooltip"]),A("span",gse,$(n.context.title),1),s.isAutopublished?x("",!0):(p(),y("div",bse,[t[0]||(t[0]=A("span",{class:"apos-admin-bar__title__separator"},"  ",-1)),s.isUnpublished?(p(),R(l,{key:1,label:"apostrophe:draft",tooltip:"apostrophe:notYetPublished",modifiers:["apos-is-warning","apos-is-filled"]})):(p(),R(a,{key:0,class:"apos-admin-bar__title__document",button:s.draftButton,menu:s.draftMenu,disabled:n.hasCustomUi||s.isUnpublished,"center-on-icon":!0,"menu-placement":"bottom-end",onItemClicked:s.switchDraftMode},null,8,["button","menu","disabled","onItemClicked"]))])),(p(!0),y(Ce,null,Ie(s.moduleOptions.contextLabels,({id:c,label:u,tooltip:f="",modifiers:m=[]})=>(p(),R(l,{key:c,class:"apos-admin-bar__title-context-label",label:u,tooltip:f,modifiers:m},null,8,["label","tooltip","modifiers"]))),128))])),[[on,!0]])]),_:1})}const vse=I(pse,[["render",yse],["__scopeId","data-v-a3b8a8de"]]),wse={name:"TheAposContextUndoRedo",props:{canUndo:Boolean,canRedo:Boolean},emits:["undo","redo"],computed:{undoTooltips(){const e={undo:"apostrophe:undoTooltip",redo:"apostrophe:redoTooltip"};return this.canUndo||(e.undo="apostrophe:undoTooltipNoChanges"),this.canRedo||(e.redo="apostrophe:redoTooltipNoChanges"),e}},mounted(){apos.bus.$on("command-menu-admin-bar-undo",this.undo),apos.bus.$on("command-menu-admin-bar-redo",this.redo)},unmounted(){apos.bus.$off("command-menu-admin-bar-undo",this.undo),apos.bus.$off("command-menu-admin-bar-redo",this.redo)},methods:{undo(){this.canUndo&&this.$emit("undo")},redo(){this.canRedo&&this.$emit("redo")}}},_se={key:"undo"},Cse={key:"redo"};function Ase(e,t,n,i,o,s){const r=E("AposButton"),a=xi("apos-tooltip");return p(),R(Oc,{tag:"div",class:"apos-admin-bar__control-set apos-admin-bar__control-set--context-controls",name:"flip"},{default:Q(()=>[Ke((p(),y("div",_se,[D(r,{disabled:!n.canUndo,type:"subtle",modifiers:["small","no-motion"],label:"apostrophe:undo",class:"apos-admin-bar__context-button",icon:"undo-icon","icon-only":!0,onClick:s.undo},null,8,["disabled","onClick"])])),[[a,s.undoTooltips.undo]]),Ke((p(),y("div",Cse,[D(r,{disabled:!n.canRedo,type:"subtle",modifiers:["small","no-motion"],label:"apostrophe:redo",class:"apos-admin-bar__context-button",icon:"redo-icon","icon-only":!0,onClick:s.redo},null,8,["disabled","onClick"])])),[[a,s.undoTooltips.redo]])]),_:1})}const kse=I(wse,[["render",Ase],["__scopeId","data-v-75dbbce8"]]),Sse={name:"TheAposSavingIndicator",props:{retrying:Boolean,editing:Boolean,saving:Boolean,saved:Boolean},data(){return{savingStatus:{transitioning:!1,messages:{1:{label:"apostrophe:documentSaved",icon:"database-check-icon",class:"apos-is-success"},2:{label:"apostrophe:savingDocument",component:"AposSpinner"},3:{label:"apostrophe:retryingSaveDocument",component:"AposSpinner",class:"apos-is-warning"}}}}},computed:{savingIndicator(){let e="";const t={};if(this.savingStep){const n=this.savingStatus.messages[this.savingStep];n.component?e=n.component:e="AposIndicator",n.icon&&(t.icon=n.icon,t.iconSize=15),n.class&&(t.class=n.class),e==="AposIndicator"&&(t.tooltip=this.savingStatus.messages[this.savingStep].label)}return{componentName:e,options:t}},savingStep(){let e=null;return this.retrying?e=3:this.saving||this.editing?e=2:this.saved&&(e=1),e},savingLabel(){return this.savingStep?this.savingStatus.messages[this.savingStep].label:""}},watch:{savingStep(e){if(this.$refs.statusLabel){const t=this;apos.util.removeClass(t.$refs.statusLabel,"apos-is-hidden"),this.savingTimeout&&clearTimeout(this.savingTimeout),this.savingTimeout=setTimeout(()=>{t.$refs.statusLabel&&apos.util.addClass(t.$refs.statusLabel,"apos-is-hidden")},5e3)}}}},xse={key:"status",class:"apos-admin-bar__status"},Mse={class:"apos-admin-bar__status__inner"};function Tse(e,t,n,i,o,s){var r;return p(),y("div",xse,[A("span",Mse,[(r=s.savingIndicator)!=null&&r.componentName?(p(),R(et(s.savingIndicator.componentName),X({key:0},s.savingIndicator.options,{class:"apos-admin-bar__status__icon"}),null,16)):x("",!0),A("div",{ref:"statusLabel",class:"apos-admin-bar__status__label"},$(e.$t(s.savingLabel)),513)])])}const Ese=I(Sse,[["render",Tse],["__scopeId","data-v-023413d6"]]);/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let B4;const um=e=>B4=e,F4=Symbol();function Eb(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var Id;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Id||(Id={}));function Ose(){const e=Lk(!0),t=e.run(()=>Ve({}));let n=[],i=[];const o=Xp({install(s){um(o),o._a=s,s.provide(F4,o),s.config.globalProperties.$pinia=o,i.forEach(r=>n.push(r)),i=[]},use(s){return this._a?n.push(s):i.push(s),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return o}const W4=()=>{};function B2(e,t,n,i=W4){e.push(t);const o=()=>{const s=e.indexOf(t);s>-1&&(e.splice(s,1),i())};return!n&&Dk()&&c7(o),o}function Vl(e,...t){e.slice().forEach(n=>{n(...t)})}const $se=e=>e(),F2=Symbol(),m1=Symbol();function Ob(e,t){e instanceof Map&&t instanceof Map?t.forEach((n,i)=>e.set(i,n)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const i=t[n],o=e[n];Eb(o)&&Eb(i)&&e.hasOwnProperty(n)&&!wn(i)&&!qr(i)?e[n]=Ob(o,i):e[n]=i}return e}const Ise=Symbol();function Lse(e){return!Eb(e)||!e.hasOwnProperty(Ise)}const{assign:xr}=Object;function Dse(e){return!!(wn(e)&&e.effect)}function Rse(e,t,n,i){const{state:o,actions:s,getters:r}=t,a=n.state.value[e];let l;function c(){a||(n.state.value[e]=o?o():{});const u=R7(n.state.value[e]);return xr(u,s,Object.keys(r||{}).reduce((f,m)=>(f[m]=Xp(Je(()=>{um(n);const g=n._s.get(e);return r[m].call(g,g)})),f),{}))}return l=U4(e,c,t,n,i,!0),l}function U4(e,t,n={},i,o,s){let r;const a=xr({actions:{}},n),l={deep:!0};let c,u,f=[],m=[],g;const v=i.state.value[e];!s&&!v&&(i.state.value[e]={}),Ve({});let w;function _(ie){let K;c=u=!1,typeof ie=="function"?(ie(i.state.value[e]),K={type:Id.patchFunction,storeId:e,events:g}):(Ob(i.state.value[e],ie),K={type:Id.patchObject,payload:ie,storeId:e,events:g});const ae=w=Symbol();wo().then(()=>{w===ae&&(c=!0)}),u=!0,Vl(f,K,i.state.value[e])}const k=s?function(){const{state:K}=n,ae=K?K():{};this.$patch(B=>{xr(B,ae)})}:W4;function L(){r.stop(),f=[],m=[],i._s.delete(e)}const P=(ie,K="")=>{if(F2 in ie)return ie[m1]=K,ie;const ae=function(){um(i);const B=Array.from(arguments),J=[],he=[];function ne(q){J.push(q)}function oe(q){he.push(q)}Vl(m,{args:B,name:ae[m1],store:F,after:ne,onError:oe});let W;try{W=ie.apply(this&&this.$id===e?this:F,B)}catch(q){throw Vl(he,q),q}return W instanceof Promise?W.then(q=>(Vl(J,q),q)).catch(q=>(Vl(he,q),Promise.reject(q))):(Vl(J,W),W)};return ae[F2]=!0,ae[m1]=K,ae},M={_p:i,$id:e,$onAction:B2.bind(null,m),$patch:_,$reset:k,$subscribe(ie,K={}){const ae=B2(f,ie,K.detached,()=>B()),B=r.run(()=>Fo(()=>i.state.value[e],J=>{(K.flush==="sync"?u:c)&&ie({storeId:e,type:Id.direct,events:g},J)},xr({},l,K)));return ae},$dispose:L},F=Zp(M);i._s.set(e,F);const ee=(i._a&&i._a.runWithContext||$se)(()=>i._e.run(()=>(r=Lk()).run(()=>t({action:P}))));for(const ie in ee){const K=ee[ie];if(wn(K)&&!Dse(K)||qr(K))s||(v&&Lse(K)&&(wn(K)?K.value=v[ie]:Ob(K,v[ie])),i.state.value[e][ie]=K);else if(typeof K=="function"){const ae=P(K,ie);ee[ie]=ae,a.actions[ie]=K}}return xr(F,ee),xr(Dt(F),ee),Object.defineProperty(F,"$state",{get:()=>i.state.value[e],set:ie=>{_(K=>{xr(K,ie)})}}),i._p.forEach(ie=>{xr(F,r.run(()=>ie({store:F,app:i._a,pinia:i,options:a})))}),v&&s&&n.hydrate&&n.hydrate(F.$state,v),c=!0,u=!0,F}/*! #__NO_SIDE_EFFECTS__ */function j4(e,t,n){let i,o;const s=typeof t=="function";typeof e=="string"?(i=e,o=s?n:t):(o=e,i=e.id);function r(a,l){const c=p9();return a=a||(c?tr(F4,null):null),a&&um(a),a=B4,a._s.has(i)||(s?U4(i,t,o,a):Rse(i,o,a)),a._s.get(i)}return r.$id=i,r}function q4(e,t){return Array.isArray(t)?t.reduce((n,i)=>(n[i]=function(){return e(this.$pinia)[i]},n),{}):Object.keys(t).reduce((n,i)=>(n[i]=function(){const o=e(this.$pinia),s=t[i];return typeof s=="function"?s.call(this,o):o[s]},n),{})}function K4(e,t){return Array.isArray(t)?t.reduce((n,i)=>(n[i]=function(...o){return e(this.$pinia)[i](...o)},n),{}):Object.keys(t).reduce((n,i)=>(n[i]=function(...o){return e(this.$pinia)[t[i]](...o)},n),{})}const i0=j4("notification",()=>{const e=Ve([]),t=Ve([]),n=Ve([]),i=Ve({}),o=Je(()=>[...t.value,...e.value].sort((m,g)=>m.updatedAt>g.updatedAt?1:-1));async function s(m,g={}){g.dismiss===!0&&(g.dismiss=5);const v={message:m,interpolate:g.interpolate||{},type:g.type,icon:g.icon,dismiss:g.dismiss,buttons:g.buttons,localize:g.localize};if(!g.clientOnly){const{noteId:_}=await apos.http.post(apos.notification.action,{body:v});return _}const w={_id:qt(),updatedAt:new Date,...v};return t.value=[...t.value,w],w._id}async function r(m){await apos.http.patch(`${apos.notification.action}/${m}`,{body:{dismissed:!0}}),e.value=e.value.filter(({_id:g})=>m!==g),t.value=t.value.filter(({_id:g})=>m!==g),i.value[m]&&delete i.value[m]}async function a(){try{if(document.visibilityState==="hidden")setTimeout(a,5e3);else{const g=[...e.value,...n.value].map(({updatedAt:w})=>w).sort().at(-1),v=await apos.http.get(apos.notification.action,{...g&&{qs:{modifiedOnOrSince:g}}});e.value=[...e.value,...v.notifications||[]],n.value=[...n.value,...v.dismissed||[]],v.dismissed.length&&(e.value=e.value.filter(w=>!v.dismissed.some(_=>w._id===_._id))),setTimeout(a,50)}}catch(m){console.error(m),setTimeout(a,5e3)}}function l(m){i.value[m]={processed:0,percent:0,total:1}}function c(m,g,v=null){if(!i.value[m])return;const w=v||i[m].value.total;i.value={...i.value,[m]:{processed:g,total:w,percent:(g/w*100).toFixed(2)}}}async function u(m,g){try{const v=await apos.http.get(g.value.route,{});if(c(m,v.processed,v.total),v.processed<v.total&&!v.ended){setTimeout(()=>u(m,g),500);return}apos.bus.$emit("content-changed",{docIds:g.value.ids||[],action:g.value.action||"batch-update",docTypes:g.value.docTypes})}catch(v){console.error(v),r(m)}}async function f(m){return await apos.http.post(`${apos.notification.action}/${m}/clear-event`,{body:{}})}return{notifications:o,processes:i,startProcess:l,updateProcess:c,notify:s,poll:a,pollJob:u,dismiss:r,clearEvent:f}}),Pse={class:"apos-notification__indicator"},Hse={ref:"label",class:"apos-notification__label"},Vse=["data-apos-bus-event"],zse={key:0,class:"apos-notification__progress"},Nse={class:"apos-notification__progress-bar"},Bse=["aria-valuenow","aria-valuemax"],Fse={class:"apos-notification__progress-value"},Wse={__name:"AposNotification",props:{notification:{type:Object,required:!0}},emits:["close"],setup(e,{emit:t}){const n=e,i=tr("i18n"),o=t,s=i0(),r=n.notification.job&&n.notification.job._id,a=Ve(r?{route:`${apos.modules["@apostrophecms/job"].action}/${n.notification.job._id}`,action:n.notification.job.action,ids:n.notification.job.ids,docTypes:n.notification.job.docTypes}:null),l=Je(()=>s.processes[n.notification._id]||null),c=Je(()=>{const g=["apos-notification"];Array.isArray(n.notification.classes)&&n.notification.classes.length&&g.push(...n.notification.classes),n.notification.type&&n.notification.type!=="none"&&g.push(`apos-notification--${n.notification.type}`),a.value&&g.push("apos-notification--progress");const v=document.createElement("div");return v.innerHTML=m(n.notification.message),(v.textContent||v.innerText||"").length>160&&g.push("apos-notification--long"),g.join(" ")}),u=Je(()=>n.notification.icon?n.notification.icon:"circle-icon");As(async()=>{var g;if(n.notification.dismiss&&setTimeout(()=>{o("close",n.notification._id)},1e3*n.notification.dismiss),(r||n.notification.type==="progress")&&s.startProcess(n.notification._id),r&&s.pollJob(n.notification._id,a),(g=n.notification.event)!=null&&g.name)try{await s.clearEvent(n.notification._id)&&apos.bus.$emit(n.notification.event.name,n.notification.event.data)}catch{console.error(i("apostrophe:notificationClearEventError"))}});function f(){o("close",n.notification._id)}function m(g){return n.notification.localize!==!1?i(g,n.notification.interpolate||{}):g}return(g,v)=>{const w=E("AposIndicator");return p(),y("div",{role:"alert",class:te(c.value)},[A("span",Pse,[D(w,{icon:u.value,class:"apos-notification__indicator__icon","icon-size":e.notification.icon?16:12},null,8,["icon","icon-size"])]),A("span",Hse,[Et($(m(e.notification.message))+" ",1),(p(!0),y(Ce,null,Ie(e.notification.buttons,(_,k)=>(p(),y("button",{key:k,"data-apos-bus-event":JSON.stringify({name:_.name,data:_.data}),onClick:f},$(m(_.label)),9,Vse))),128))],512),l.value?(p(),y("div",zse,[A("div",Nse,[A("div",{class:"apos-notification__progress-now",role:"progressbar","aria-valuenow":l.value.processed||0,style:Vt(`width: ${l.value.percent+"%"}`),"aria-valuemin":"0","aria-valuemax":l.value.total},null,12,Bse)]),A("span",Fse,$(Math.floor(l.value.percent)+"%"),1)])):x("",!0),l.value?x("",!0):(p(),y("button",{key:1,class:"apos-notification__button",onClick:f},[D(Ky,{class:"apos-notification__close-icon",title:"Close Notification",size:14})]))],2)}}},Use=I(Wse,[["__scopeId","data-v-c8952492"]]),jse={name:"TheAposNotifications",setup(){const{themeClass:e}=n0(),t=i0();return{themeClass:e,store:t}}};function qse(e,t,n,i,o,s){const r=E("AposNotification");return p(),R(Oc,{name:"list",tag:"div",class:te(["apos-notifications",i.themeClass])},{default:Q(()=>[(p(!0),y(Ce,null,Ie(i.store.notifications,a=>(p(),R(r,{key:a._id,notification:a,onClose:i.store.dismiss},null,8,["notification","onClose"]))),128))]),_:1},8,["class"])}const Kse=I(jse,[["render",qse],["__scopeId","data-v-388ecac4"]]),o0={props:{contextError:{type:String,default:""},context:{type:Object,default:function(){return{}}}},data(){return{error:"",doc:{data:{},hasErrors:!1}}},computed:{passwordResetEnabled(){return apos.login.passwordResetEnabled}},watch:{contextError(e){!this.contextErrorReceived&&e&&!this.error&&(this.error=e,this.contextErrorReceived=!0)}},mounted(){this.error=this.contextError,this.contextError&&(this.contextErrorReceived=!0)}},Gse={mixins:[o0],emits:["set-stage"],data(){return{busy:!1,done:!1,schema:[{name:"email",label:"apostrophe:email",placeholder:"apostrophe:loginEnterEmail",type:"email",required:!0}]}},computed:{disabled(){return this.doc.hasErrors},help(){return this.done?this.$t("apostrophe:loginResetRequestDone",{email:this.doc.data.email}):this.$t("apostrophe:loginResetPasswordRequest")}},created(){this.passwordResetEnabled||this.$emit("set-stage","login")},methods:{async submit(){this.busy||(this.busy=!0,this.error="",await this.requestReset())},async requestReset(){try{await apos.http.post(`${apos.login.action}/reset-request`,{busy:!0,body:{...this.doc.data}}),this.done=!0}catch(e){this.error=e.message||"apostrophe:loginErrorGeneric"}finally{this.busy=!1}}}},Jse={name:"AposForgotPasswordForm",mixins:[Gse],emits:["set-stage"]},Yse={key:0,class:"apos-login-form"},Zse={class:"apos-login-form__body","data-apos-test":"pwdResetRequestForm"};function Xse(e,t,n,i,o,s){const r=E("TheAposLoginHeader"),a=E("AposButton"),l=E("AposSchema");return e.passwordResetEnabled?(p(),y("div",Yse,[D(r,{env:e.context.env,title:e.$t("apostrophe:loginResetPassword"),subtitle:e.context.name,help:e.help,error:e.$t(e.error)},null,8,["env","title","subtitle","help","error"]),A("div",Zse,[e.done?(p(),R(a,{key:0,"data-apos-test":"loginBack",busy:e.busy,type:"primary",label:"apostrophe:loginBack",class:"apos-login-form__submit",modifiers:["block"],onClick:t[0]||(t[0]=c=>e.$emit("set-stage","login"))},null,8,["busy"])):(p(),y("form",{key:1,onSubmit:t[2]||(t[2]=Ue((...c)=>e.submit&&e.submit(...c),["prevent"]))},[D(l,{modelValue:e.doc,"onUpdate:modelValue":t[1]||(t[1]=c=>e.doc=c),schema:e.schema},null,8,["modelValue","schema"]),D(a,{"data-apos-test":"pwdResetRequestSubmit",busy:e.busy,disabled:e.disabled,type:"primary",label:"apostrophe:loginResetPassword","button-type":"submit",class:"apos-login-form__submit",modifiers:["gradient-on-hover","block"],onClick:e.submit},null,8,["busy","disabled","onClick"])],32))])])):x("",!0)}const Qse=I(Jse,[["render",Xse],["__scopeId","data-v-71e9a202"]]),ere={mixins:[o0],emits:["redirect","set-stage"],data(){return{phase:"beforeSubmit",busy:!1,schema:apos.login.schema,requirements:tre(),requirementProps:{},fetchingRequirementProps:!1}},computed:{disabled(){return this.doc.hasErrors||!!this.beforeSubmitRequirements.find(e=>!e.done)},beforeSubmitRequirements(){return this.requirements.filter(e=>e.phase==="beforeSubmit")},uponSubmitRequirements(){return this.requirements.filter(e=>e.phase==="uponSubmit")},activeSoloRequirement(){return this.phase==="afterPasswordVerified"&&this.requirements.find(e=>e.phase==="afterPasswordVerified"&&!e.done)}},watch:{context(e){this.requirementProps=e.requirementProps},async activeSoloRequirement(e){if(this.phase==="afterPasswordVerified"&&(e==null?void 0:e.phase)==="afterPasswordVerified"&&e.propsRequired&&!(e.success||e.error))try{this.fetchingRequirementProps=!0;const t=await apos.http.post(`${apos.login.action}/requirement-props`,{busy:!0,body:{name:e.name,incompleteToken:this.incompleteToken}});this.requirementProps={...this.requirementProps,[e.name]:t}}catch(t){this.error=t.message||"apostrophe:loginErrorGeneric"}finally{this.fetchingRequirementProps=!1}else return null},uponSubmitRequirements:{deep:!0,async handler(e){if(this.phase!=="uponSubmit"||e.some(o=>o.done===null))return;if(e.every(o=>o.done===!0)||this.uponSubmitRequirements.length===0){await this.postSubmit();return}if(e.some(o=>o.done===!1)){for(const o of this.uponSubmitRequirements)o.done=null,o.value=null;this.phase="beforeSubmit",this.busy=!1,this.error=""}}}},created(){this.requirementProps=this.context.requirementProps},methods:{async submit(){this.busy||(this.busy=!0,this.error="",this.uponSubmitRequirements.length?this.uponSubmit():await this.postSubmit())},uponSubmit(){this.phase="uponSubmit"},async postSubmit(){await this.invokeInitialLoginApi()},async invokeInitialLoginApi(){try{const e=await apos.http.post(`${apos.login.action}/login`,{busy:!0,body:{...this.doc.data,requirements:this.getInitialSubmitRequirementsData(),session:!0}});e&&e.incompleteToken?(this.incompleteToken=e.incompleteToken,this.phase="afterPasswordVerified"):this.redirectAfterLogin()}catch(e){this.error=e.message||"An error occurred. Please try again.",this.phase="beforeSubmit"}finally{this.busy=!1}},getInitialSubmitRequirementsData(){return Object.fromEntries(this.requirements.filter(e=>e.phase!=="afterPasswordVerified"||!e.done).map(e=>[e.name,e.value]))},async invokeFinalLoginApi(){try{await apos.http.post(`${apos.login.action}/login`,{busy:!0,body:{...this.doc.data,incompleteToken:this.incompleteToken,requirements:this.getFinalSubmitRequirementsData(),session:!0}}),this.redirectAfterLogin()}catch(e){this.error=e.message||"An error occurred. Please try again.",this.phase="beforeSubmit"}finally{this.busy=!1}},getFinalSubmitRequirementsData(){return Object.fromEntries(this.requirements.filter(e=>e.phase==="afterPasswordVerified").map(e=>[e.name,e.value]))},redirectAfterLogin(){this.$emit("redirect",`${apos.prefix}/`)},async requirementBlock(e){const t=this.requirements.find(n=>n.name===e.name);t.done=!1,t.value=void 0},async requirementDone(e,t){const n=this.requirements.find(i=>i.name===e.name);if(n.phase==="beforeSubmit"||n.phase==="uponSubmit"){n.done=!0,n.value=t;return}n.error=null;try{await apos.http.post(`${apos.login.action}/requirement-verify`,{busy:!0,body:{name:n.name,value:t,incompleteToken:this.incompleteToken}}),n.success=!0}catch(i){n.error=i}this.requirements=[...this.requirements],n.success&&!n.askForConfirmation&&(n.done=!0,this.activeSoloRequirement||await this.invokeFinalLoginApi())},async requirementConfirmed(e){const t=this.requirements.find(n=>n.name===e.name);t.done=!0,this.activeSoloRequirement||await this.invokeFinalLoginApi()},getRequirementProps(e){return this.requirementProps[e]||{}}}};function tre(){const e=Object.entries(apos.login.requirements).map(([t,n])=>({name:t,component:n.component||t,...n,done:null,value:null,success:null,error:null}));return[...e.filter(t=>t.phase==="beforeSubmit"),...e.filter(t=>t.phase==="uponSubmit"),...e.filter(t=>t.phase==="afterPasswordVerified")]}const nre={name:"AposLoginForm",mixins:[ere],emits:["set-stage"]},ire={key:"1",class:"apos-login-form"},ore={class:"apos-login-form__body"},sre={key:"2",class:"apos-login-form"},rre={class:"apos-login-form__body"};function are(e,t,n,i,o,s){const r=E("TheAposLoginHeader"),a=E("AposSchema"),l=E("AposButton");return e.phase==="beforeSubmit"||e.phase==="uponSubmit"?(p(),y("div",ire,[D(r,{env:e.context.env,title:e.context.name,error:e.$t(e.error)},null,8,["env","title","error"]),A("div",ore,[A("form",{"data-apos-test":"loginForm",onSubmit:t[2]||(t[2]=Ue((...c)=>e.submit&&e.submit(...c),["prevent"]))},[D(a,{modelValue:e.doc,"onUpdate:modelValue":t[0]||(t[0]=c=>e.doc=c),schema:e.schema},null,8,["modelValue","schema"]),e.passwordResetEnabled?(p(),y("a",{key:0,href:"#",class:"apos-login-form__link",onClick:t[1]||(t[1]=Ue(c=>e.$emit("set-stage","forgotPassword"),["prevent"]))},$(e.$t("apostrophe:loginResetPassword")),1)):x("",!0),(p(!0),y(Ce,null,Ie(e.beforeSubmitRequirements,c=>(p(),R(et(c.component),X({ref_for:!0},e.getRequirementProps(c.name),{key:c.name,onDone:u=>e.requirementDone(c,u),onBlock:u=>e.requirementBlock(c)}),null,16,["onDone","onBlock"]))),128)),e.phase==="uponSubmit"?(p(!0),y(Ce,{key:1},Ie(e.uponSubmitRequirements,c=>(p(),R(et(c.component),X({key:c.name,ref_for:!0},e.getRequirementProps(c.name),{onDone:u=>e.requirementDone(c,u),onBlock:u=>e.requirementBlock(c)}),null,16,["onDone","onBlock"]))),128)):x("",!0),D(l,{"data-apos-test":"loginSubmit",busy:e.busy,disabled:e.disabled,type:"primary",label:"apostrophe:login","button-type":"submit",class:"apos-login-form__submit",modifiers:["gradient-on-hover","block"],onClick:e.submit},null,8,["busy","disabled","onClick"])],32)])])):e.activeSoloRequirement?(p(),y("div",sre,[D(r,{env:e.context.env,title:e.context.name,error:e.$t(e.error),tiny:!0},null,8,["env","title","error"]),A("div",rre,[e.fetchingRequirementProps?x("",!0):(p(),R(et(e.activeSoloRequirement.component),X({key:0},e.getRequirementProps(e.activeSoloRequirement.name),{success:e.activeSoloRequirement.success,error:e.activeSoloRequirement.error,onDone:t[3]||(t[3]=c=>e.requirementDone(e.activeSoloRequirement,c)),onConfirm:t[4]||(t[4]=c=>e.requirementConfirmed(e.activeSoloRequirement))}),null,16,["success","error"]))])])):x("",!0)}const lre=I(nre,[["render",are],["__scopeId","data-v-dc94ac99"]]),cre={name:"AposResetPasswordForm",mixins:[o0],props:{data:{type:Object,default:function(){return{}}}},emits:["set-stage"],data(){return{ready:!1,busy:!1,valid:!0,done:!1,contextErrorReceived:!1,schema:[{name:"password",label:"apostrophe:newPassword",type:"password",required:!0}]}},computed:{disabled(){return this.doc.hasErrors},help(){return this.valid?this.done?this.error?"":this.$t("apostrophe:loginResetDone"):this.$t("apostrophe:loginResetInfo",{email:this.data.email}):""}},async created(){if(!this.passwordResetEnabled){this.$emit("set-stage","login");return}this.busy=!0,await this.verify(),this.ready=!0},methods:{async submit(){this.busy||(this.busy=!0,this.error="",await this.reset())},async verify(){try{await apos.http.get(`${apos.login.action}/reset`,{busy:!0,qs:{...this.data}}),this.valid=!0}catch(e){this.valid=!1,this.done=!0,this.error=e.message||"apostrophe:loginErrorGeneric"}finally{this.busy=!1}},async reset(){try{await apos.http.post(`${apos.login.action}/reset`,{busy:!0,body:{...this.data,...this.doc.data}}),this.done=!0}catch(e){this.error=e.message||"apostrophe:loginErrorGeneric"}finally{this.busy=!1}}}},dre={name:"AposResetPasswordForm",mixins:[cre],emits:["set-stage"]},ure={key:0,class:"apos-login-form"},hre={class:"apos-login-form__body"};function fre(e,t,n,i,o,s){const r=E("TheAposLoginHeader"),a=E("AposButton"),l=E("AposSchema");return e.passwordResetEnabled&&e.ready?(p(),y("div",ure,[D(r,{env:e.context.env,title:e.$t("apostrophe:loginResetPassword"),subtitle:e.context.name,help:e.help,error:e.$t(e.error)},null,8,["env","title","subtitle","help","error"]),A("div",hre,[e.done&&e.valid?(p(),R(a,{key:0,"data-apos-test":"loginBack",busy:e.busy,type:"primary",label:"apostrophe:loginBack",class:"apos-login-form__submit",modifiers:["block"],onClick:t[0]||(t[0]=c=>e.$emit("set-stage","login"))},null,8,["busy"])):!e.done&&e.valid?(p(),y("form",{key:1,"data-apos-test":"pwdResetForm",onSubmit:t[2]||(t[2]=Ue((...c)=>e.submit&&e.submit(...c),["prevent"]))},[D(l,{modelValue:e.doc,"onUpdate:modelValue":t[1]||(t[1]=c=>e.doc=c),schema:e.schema},null,8,["modelValue","schema"]),D(a,{"data-apos-test":"pwdResetSubmit",busy:e.busy,disabled:e.disabled,type:"primary",label:"apostrophe:save","button-type":"submit",class:"apos-login-form__submit",modifiers:["gradient-on-hover","block"],onClick:e.submit},null,8,["busy","disabled","onClick"])],32)):x("",!0)])])):x("",!0)}const pre=I(dre,[["render",fre],["__scopeId","data-v-e42754a1"]]),sd=["login","forgotPassword","resetPassword"],mre={mixins:[Ou],data(){return{stage:sd[0],mounted:!1,beforeCreateFinished:!1,error:"",passwordResetData:{},context:{}}},computed:{loaded(){return this.mounted&&this.beforeCreateFinished},showNav(){return this.stage!==sd[0]},homeUrl(){return`${apos.prefix}/`}},async beforeCreate(){const e=parseInt(window.sessionStorage.getItem("aposStateChange")),t=JSON.parse(window.sessionStorage.getItem("aposStateChangeSeen")||"{}");if(!t[window.location.href]){const n=Date.parse(document.lastModified);if(e&&n&&n<e){t[window.location.href]=!0,window.sessionStorage.setItem("aposStateChangeSeen",JSON.stringify(t)),location.reload();return}}try{this.context=await apos.http.post(`${apos.login.action}/context`,{busy:!0})}catch(n){this.context={},this.error=n.message||"apostrophe:loginErrorGeneric"}finally{this.beforeCreateFinished=!0}},created(){const e=new URL(document.location),t={email:e.searchParams.get("email"),reset:e.searchParams.get("reset")};t.email&&t.reset&&(this.passwordResetData=t,this.setStage("resetPassword"))},mounted(){this.mounted=!0},methods:{setStage(e){var n;if(!(((n=this[`${e}Enabled`])==null?void 0:n.call(this))??!0)){this.stage=sd[0];return}if(sd.includes(e)){this.stage=e;return}this.stage=sd[0]},forgotPasswordEnabled(){return apos.login.passwordResetEnabled},resetPasswordEnabled(){return apos.login.passwordResetEnabled},onRedirect(e){window.sessionStorage.setItem("aposStateChange",Date.now()),window.sessionStorage.setItem("aposStateChangeSeen","{}"),location.assign(e)}}},gre={name:"TheAposLogin",mixins:[mre]},bre={key:0,class:"apos-login__nav"},yre=["href"],vre={class:"apos-login__wrapper"},wre={class:"apos-login__footer"},_re={"data-apos-test":"projectVersion",class:"apos-login__project-version"};function Cre(e,t,n,i,o,s){const r=E("AposForgotPasswordForm"),a=E("AposResetPasswordForm"),l=E("AposLoginForm"),c=E("AposLogo");return p(),R(Qi,{name:"fade-stage"},{default:Q(()=>[Ke(A("div",{class:te(["apos-login apos-theme-dark",e.themeClass]),"data-apos-test":"loginPage"},[D(Qi,{name:"fade-outer"},{default:Q(()=>[e.showNav?(p(),y("div",bre,[A("a",{href:"#",class:"apos-login__link apos-login--arrow-left",onClick:t[0]||(t[0]=Ue(u=>e.setStage("login"),["prevent"]))},$(e.$t("apostrophe:loginBack")),1),A("a",{href:e.homeUrl,class:"apos-login__link apos-login--arrow-right"},$(e.$t("apostrophe:loginHome")),9,yre)])):x("",!0)]),_:1}),A("div",vre,[D(Qi,{name:"fade-body",mode:"out-in"},{default:Q(()=>[e.loaded&&e.stage==="forgotPassword"?(p(),R(r,{key:0,context:e.context,"context-error":e.error,onRedirect:e.onRedirect,onSetStage:e.setStage},null,8,["context","context-error","onRedirect","onSetStage"])):e.loaded&&e.stage==="resetPassword"?(p(),R(a,{key:1,context:e.context,data:e.passwordResetData,"context-error":e.error,onRedirect:e.onRedirect,onSetStage:e.setStage},null,8,["context","data","context-error","onRedirect","onSetStage"])):e.loaded?(p(),R(l,{key:2,context:e.context,"context-error":e.error,onRedirect:e.onRedirect,onSetStage:e.setStage},null,8,["context","context-error","onRedirect","onSetStage"])):x("",!0)]),_:1})]),D(Qi,{name:"fade-outer"},{default:Q(()=>[Ke(A("div",wre,[D(c,{class:"apos-login__logo"}),A("label",_re," Version "+$(e.context.version),1)],512),[[on,e.loaded]])]),_:1})],2),[[on,e.loaded]])]),_:1})}const Are=I(gre,[["render",Cre],["__scopeId","data-v-a37501cd"]]),kre={props:{env:{type:String,default:""},title:{type:String,default:""},subtitle:{type:String,default:""},help:{type:String,default:""},error:{type:String,default:""},tiny:{type:Boolean,default:!1}}},Sre={class:"apos-login__project-header"},xre={key:0,class:"apos-login__project apos-login__project-subtitle"},Mre={class:"apos-login__project apos-login__project-name"},Tre={key:0,class:"apos-login--help"},Ere={class:"apos-login--error"};function Ore(e,t,n,i,o,s){return p(),y("div",{class:te(["apos-login__header",{"apos-login__header--tiny":n.tiny,"apos-login__header--center":!!n.subtitle}])},[A("div",Sre,[A("label",{class:te(["apos-login__project apos-login__project-env",[`apos-login__project-env--${n.env}`]]),"data-apos-test":"environment"},$(n.env),3),n.subtitle?(p(),y("label",xre,$(n.subtitle),1)):x("",!0)]),A("label",Mre,$(n.title),1),n.help?(p(),y("label",Tre,$(n.help),1)):x("",!0),A("label",Ere,$(n.error),1)],2)}const $re=I(kre,[["render",Ore],["__scopeId","data-v-ee9b2155"]]),Ire={props:{selectedState:{type:String,required:!0},batchTags:{type:Array,default:()=>[]},filterChoices:{type:Object,default:()=>({})},filterValues:{type:Object,default:()=>({})},filters:{type:Array,default:()=>[]},totalPages:{type:Number,default:1},currentPage:{type:Number,default:1},isRelationship:{type:Boolean,default:!1},labels:{type:Object,default:()=>({})},options:{type:Object,default:()=>({})},batchOperations:{type:Array,default:()=>[]},displayedItems:{type:Number,required:!0},checked:{type:Array,default:()=>[]},checkedTypes:{type:Array,default:null},checkedCount:{type:Number,required:!0},checkedDocsTags:{type:Object,default:()=>({})},moduleName:{type:String,required:!0}},emits:["batch","filter","page-change","refresh-data","search","select-click"],data(){return{searchField:{field:{name:"search",placeholder:{key:"apostrophe:searchDocType",type:this.$t(this.labels.plural)},icon:"magnify-icon",enterSubmittable:!0},status:{},value:{data:""}},activeOperations:[]}},computed:{checkboxIcon(){return this.selectedState==="checked"?"checkbox-marked-icon":this.selectedState==="indeterminate"?"minus-box-icon":"checkbox-blank-icon"},canSelectAll(){return this.displayedItems},canArchive(){return this.checkedCount},hasSearch(){return!this.options.noSearch}},mounted(){this.computeActiveOperations(),apos.bus.$on("command-menu-manager-select-all",this.selectAll),apos.bus.$on("command-menu-manager-archive-selected",this.archiveSelected),apos.bus.$on("command-menu-manager-focus-search",this.focusSearch)},unmounted(){apos.bus.$off("command-menu-manager-select-all",this.selectAll),apos.bus.$off("command-menu-manager-archive-selected",this.archiveSelected),apos.bus.$off("command-menu-manager-focus-search",this.focusSearch)},methods:{selectAll(){this.canSelectAll&&this.$emit("select-click")},archiveSelected(){const[e]=this.activeOperations.filter(t=>t.action==="archive");e&&this.canArchive&&this.confirmOperation(e)},focusSearch(){this.hasSearch&&this.$refs.search.$el.querySelector("input").focus()},computeActiveOperations(){if(this.isRelationship){this.activeOperations=[];return}this.activeOperations=this.batchOperations.map(({operations:e,...t})=>e?{operations:e.filter(n=>this.isOperationActive(n)),...t}:{...t,operations:e}).filter(e=>e.operations&&!e.operations.length?!1:this.isOperationActive(e))},isOperationActive(e){return Object.entries(e.if||{}).every(([t,n])=>Array.isArray(n)?n.includes(this.filterValues[t]):this.filterValues[t]===n)},filter(e,t){this.$emit("filter",e,t.data),this.filterValues[e]!==t&&this.computeActiveOperations()},search(e){this.$emit("search",e.data)},registerPageChange(e){this.$emit("page-change",e)},executeOperation(e){return e.modal?this.modalOperation(e):this.confirmOperation(e)},async beginGroupedOperation(e,t){const n=t.find(i=>i.action===e.action);n.modal?await this.modalOperation(n):await this.confirmOperation(n)},async modalOperation({modal:e,...t}){await apos.modal.execute(e,{checked:this.checked,checkedTypes:this.checkedTypes,moduleName:this.moduleName,...t})},async confirmOperation({modalOptions:e={},action:t,operations:n,label:i,...o}){const{title:s=i,description:r="",confirmationButton:a="apostrophe:affirmativeLabel",form:l}=t&&n?n.find(f=>f.action===t).modalOptions:e,c={count:this.checkedCount,type:this.checkedCount===1?this.$t(this.labels.singular):this.$t(this.labels.plural)};await apos.confirm({heading:this.$t(s,c),description:this.$t(r,c),affirmativeLabel:a,localize:!1,...l&&l})&&this.$emit("batch",{label:i,action:t,...o})},updateTag(e,t){var o;const n=this.activeOperations.find(s=>s.action==="tag"),i=((o=n.messages)==null?void 0:o[e])||{};this.$emit("batch",{...n,messages:i,requestOptions:{operation:e,...t}})}}};function Lre(e,t,n,i,o,s){const r=E("AposButton"),a=E("AposTagApply"),l=E("AposContextMenu"),c=E("AposPager"),u=E("AposFilterMenu"),f=E("AposInputString"),m=E("AposModalToolbar");return p(),R(m,{"class-name":"apos-manager-toolbar"},{leftControls:Q(()=>[s.canSelectAll?(p(),R(r,{key:0,ref:"selectAll",label:"apostrophe:select",type:"outline",modifiers:["small"],"text-color":"var(--a-base-1)","icon-only":!0,icon:s.checkboxIcon,"data-apos-test":"selectAll",onClick:s.selectAll},null,8,["icon","onClick"])):x("",!0),(p(!0),y(Ce,null,Ie(o.activeOperations,({action:g,label:v,icon:w,operations:_,...k})=>(p(),y("div",{key:g},[g==="tag"?(p(),R(a,{key:0,tags:n.batchTags,"apply-to":n.checkedDocsTags,onAdded:t[0]||(t[0]=L=>s.updateTag("create",{title:L})),onChecked:t[1]||(t[1]=L=>s.updateTag("add",{slug:L})),onUnchecked:t[2]||(t[2]=L=>s.updateTag("remove",{slug:L})),onRefreshData:t[3]||(t[3]=L=>e.$emit("refresh-data"))},null,8,["tags","apply-to"])):_?(p(),R(l,{key:2,button:{label:v,icon:w,iconOnly:!0,type:"outline"},disabled:!n.checkedCount,menu:_,onItemClicked:L=>s.beginGroupedOperation(L,_)},null,8,["button","disabled","menu","onItemClicked"])):(p(),R(r,{key:1,label:v,action:g,icon:w,disabled:!n.checkedCount,modifiers:["small"],type:"outline",onClick:L=>s.executeOperation({action:g,label:v,...k})},null,8,["label","action","icon","disabled","onClick"]))]))),128))]),rightControls:Q(()=>[!n.options.noPager&&n.totalPages!==0?(p(),R(c,{key:0,"total-pages":n.totalPages,"current-page":n.currentPage,onClick:s.registerPageChange,onChange:s.registerPageChange},null,8,["total-pages","current-page","onClick","onChange"])):x("",!0),n.filters.length?(p(),R(u,{key:1,filters:n.filters,choices:n.filterChoices,values:n.filterValues,onInput:s.filter},null,8,["filters","choices","values","onInput"])):x("",!0),s.hasSearch?(p(),R(f,{key:2,ref:"search",field:o.searchField.field,status:o.searchField.status,"model-value":o.searchField.value,modifiers:["small"],"no-blur-emit":!0,"onUpdate:modelValue":s.search,onReturn:t[4]||(t[4]=g=>s.search(g))},null,8,["field","status","model-value","onUpdate:modelValue"])):x("",!0)]),_:1})}const Dre=I(Ire,[["render",Lre],["__scopeId","data-v-27cc17e4"]]),ia=j4("modal",()=>{const e=Ve([]),t=Ve(null),n=Je(()=>e.value.find(_=>t.value===_.id));function i(_){e.value.push(_)}function o(_){const k=r(_);if(!k)return;k.resolve(k.result),apos.bus.$emit("modal-resolved",k),e.value=e.value.filter(P=>_!==P.id);const L=a(-1);t.value=L.id||null}function s(){var _;return((_=n.value)==null?void 0:_.locale)||apos.i18n.locale}function r(_){return _?e.value.find(k=>_===k.id):e.value}function a(_){const k=e.value.length-1,L=_<0?k+1+_:_>e.value.length?k:_;return e.value[L]||{}}function l(_){const k=e.value.find(P=>_===P.id);return!k||!apos.modal.modals?{}:{...apos.modal.modals.find(P=>P.componentName===k.componentName&&P.props.moduleName===k.props.moduleName)}}async function c(_,k){const L=_.split("|");_=L.pop();const P=L;for(const M of P)k=await apos.ui.transformers[M](k);return new Promise(M=>{var z;const F={id:`modal:${qt()}`,componentName:_,resolve:M,props:k||{},elementsToFocus:[],focusedElement:null,locale:((z=n.value)==null?void 0:z.locale)||apos.i18n.locale,hasContextLocale:n.value?n.value.hasContextLocale||n.value.locale!==apos.i18n.locale:!1};t.value=F.id,e.value.push(F),apos.bus.$emit("modal-launched",F)})}function u(_,k){e.value=e.value.map(L=>L.id===_?{...L,...k}:L)}function f(_,k){e.value=e.value.map(L=>L.id===_?{...L,result:k}:L)}async function m(_,k={}){return c(apos.modal.components.confirm,{content:_,mode:"confirm",options:k})}async function g(_,k={}){return c(apos.modal.components.confirm,{content:_,mode:"alert",options:k})}async function v(_,k={}){const{items:L,headers:P,...M}=_;return c(apos.modal.components.report,{items:L,headers:P,content:M,options:k})}function w(_,k){if(k.matches("[data-apos-menu]"))return!1;if(!_.isConnected)return!0;if(_.matches("[data-apos-modal]")||(_=_.closest("[data-apos-modal]")||document),k.matches("[data-apos-modal]")||(k=k.closest("[data-apos-modal]")||document),_===document)return!1;if(k===document)return!0;const L=e.value.findIndex(M=>M.modalEl===_),P=e.value.findIndex(M=>M.modalEl===k);if(L===-1)throw new Error("apos.modal.onTopOf: el1 is not in the modal stack");if(P===-1)throw new Error("apos.modal.onTopOf: el2 is not in the modal stack");return L>P}return{stack:e,activeId:t,activeModal:n,getActiveLocale:s,add:i,remove:o,get:r,getAt:a,getProperties:l,execute:c,updateModalData:u,setModalResult:f,confirm:m,alert:g,report:v,onTopOf:w}});function G4(){var f,m;const e=Ve([]),t=Ve(null),n=ia();return{elementsToFocus:e,focusedElement:t,activeModal:n.activeModal,activeModalElementsToFocus:(f=n.activeModal)==null?void 0:f.elementsToFocus,activeModalFocusedElement:(m=n.activeModal)==null?void 0:m.focusedElement,cycleElementsToFocus:i,focusLastModalFocusedElement:r,storeFocusedElement:a,focusElement:l,isElementVisible:c,findPriorityElementOrFirst:u};function i(g,v,w){const _=v||e.value;if(!_.length||!(g.key==="Tab"||g.code==="Tab"))return;let L=_.at(0),P=_.at(-1);const M=o(L,_),F=o(P,_);L=s(L,M),P=s(P,F);const z=w||((ee,ie)=>{ie.focus(),ee.preventDefault()});if(g.shiftKey){(document.activeElement===L||M.includes(document.activeElement))&&z(g,P);return}(document.activeElement===P||F.includes(document.activeElement))&&z(g,L)}function o(g,v){return g.getAttribute("type")==="radio"?v.filter(w=>w.getAttribute("type")==="radio"&&w.getAttribute("name")===g.getAttribute("name")):[]}function s(g,v=[]){const w=v.find(_=>_.hasAttribute("checked"));return w||g}function r(){const g=n.activeModal;if(!g)return;const{focusedElement:v,elementsToFocus:w}=g;l(v,u(w))}function a(g){t.value=g.target}function l(...g){for(const v of g){const w=document.activeElement===v;if(!(!v||!c(v))){w||v.focus();return}}}function c(g){return g.offsetParent!==null}function u(g){return g.find(v=>v.hasAttribute("data-apos-focus-priority"))||g[0]}}const Rre=["aria-labelledby"],Pre={key:0,class:"apos-modal__busy"},Hre={class:"apos-modal__busy-text"},Vre={class:"apos-modal__content","data-apos-test":"modal-content"},zre={key:0,class:"apos-modal__header"},Nre={class:"apos-modal__header__main"},Bre={key:0,class:"apos-modal__controls--secondary"},Fre=["id"],Wre={key:0,class:"apos-sr-only"},Ure={key:1,class:"apos-modal__controls--header"},jre={key:0,class:"apos-modal__locale"},qre={key:2,class:"apos-modal__controls--primary"},Kre={key:0,class:"apos-modal__breadcrumbs"},Gre={key:1,class:"apos-modal__footer"},Jre={class:"apos-modal__footer__inner"},Yre={__name:"AposModal",props:{modal:{type:Object,required:!0},modalTitle:{type:[String,Object],default:""},modalData:{type:Object,required:!0}},emits:["inactive","esc","show-modal","no-modal","ready"],setup(e,{emit:t}){var oe;const{cycleElementsToFocus:n,focusElement:i,focusLastModalFocusedElement:o,storeFocusedElement:s,findPriorityElementOrFirst:r}=G4(),a=e,l=ia(),c=pS(),u=t,f=Ve(null),m=Ve(3),g=Ve(0),v=Ve(!0),w=Ve(((oe=l.activeModal)==null?void 0:oe.locale)||apos.i18n.locale),_=Je(()=>a.modal.type!=="slide"?"fade":a.modal.origin==="left"?"slide-right":"slide-left"),k=Je(()=>a.modal.trapFocus||a.modal.trapFocus===void 0),L=Je(()=>a.modal.triggerFocusRefresh),P=Je(()=>Object.keys(apos.i18n.locales).length>1);function M(W){return!!c[W]}const F=Je(()=>{const W=["apos-modal"];return W.push(`apos-modal--${a.modal.type}`),a.modal.type==="slide"&&(a.modal.origin?W.push(`apos-modal--origin-${a.modal.origin}`):W.push("apos-modal--origin-right"),W.push("apos-modal--full-height")),a.modal.busy&&W.push("apos-modal--busy"),W.join(" ")}),z=Je(()=>{const W=[];return a.modal.width&&W.push(`apos-modal__inner--${a.modal.width}`),W}),ee=Je(()=>{const W=M("leftRail"),q=M("rightRail");return W&&q?"apos-modal__main--with-rails":W&&!q?"apos-modal__main--with-left-rail":!W&&q?"apos-modal__main--with-right-rail":!1});Fo(L,W=>{k.value&&wo(he)}),As(async()=>{await wo(),k.value?await he():v.value=!1,l.updateModalData(a.modalData.id,{modalEl:f.value}),window.addEventListener("keydown",ie)}),Au(()=>{window.removeEventListener("keydown",ie)});function ie(W){W.keyCode===27&&ne()}function K(W){n(W,a.modalData.elementsToFocus)}async function ae(){u("show-modal"),await wo(),u("ready")}function B(){l.remove(a.modalData.id),o(),u("no-modal")}function J(W){s(W),l.updateModalData(a.modalData.id,{focusedElement:W.target})}async function he(){if(f!=null&&f.value){const Z=["[tabindex]","[href]","input","select","textarea","button","[data-apos-focus-priority]"].map(W).join(", "),N=[...f.value.querySelectorAll(Z)];l.updateModalData(a.modalData.id,{elementsToFocus:N});const le=r(N);if(!(le==null?void 0:le.hasAttribute("data-apos-focus-priority"))&&m.value>g.value){await new Promise(ye=>setTimeout(ye,50)),g.value++,await he();return}v.value=!1,await wo(),i(a.modalData.focusedElement,le)}function W(q){return`${q}:not([tabindex="-1"]):not([disabled]):not([type="hidden"]):not([aria-hidden]):not(.apos-sr-only)`}}function ne(){var q;((q=l.activeModal)==null?void 0:q.id)===a.modalData.id&&u("esc")}return(W,q)=>{const Z=E("AposSpinner"),N=E("AposLocale");return p(),R(Qi,{name:_.value,duration:250,onEnter:ae,onLeave:B},{default:Q(()=>[Ke(A("section",{ref_key:"modalEl",ref:f,class:te(F.value),role:"dialog","aria-modal":"true","aria-labelledby":a.modalData.id,"data-apos-modal":"",onFocusCapture:J,onEsc:ne,onKeydown:Qe(K,["tab"])},[D(Qi,{name:_.value},{default:Q(()=>[e.modal.showModal?(p(),y("div",{key:0,class:"apos-modal__overlay",onClick:q[0]||(q[0]=le=>u("esc"))})):x("",!0)]),_:1},8,["name"]),D(Qi,{name:_.value,onAfterLeave:q[1]||(q[1]=le=>W.$emit("inactive"))},{default:Q(()=>[e.modal.showModal?(p(),y("div",{key:0,class:te([z.value,"apos-modal__inner"]),"data-apos-modal-inner":""},[e.modal.busy?(p(),y("div",Pre,[A("p",Hre,$(e.modal.busyTitle),1),D(Z,{weight:"heavy",class:"apos-busy__spinner"})])):x("",!0),Ke(A("div",Vre,[e.modal.disableHeader?x("",!0):(p(),y("header",zre,[A("div",Nre,[M("secondaryControls")?(p(),y("div",Bre,[gt(W.$slots,"secondaryControls",{},void 0,!0)])):x("",!0),A("h2",{id:a.modalData.id,class:"apos-modal__heading"},[e.modal.a11yTitle?(p(),y("span",Wre,$(W.$t(e.modal.a11yTitle)),1)):x("",!0),Et(" "+$(W.$t(e.modalTitle)),1)],8,Fre),P.value||M("primaryControls")||M("localeDisplay")?(p(),y("div",Ure,[M("localeDisplay")?(p(),y("div",jre,[gt(W.$slots,"localeDisplay",{},void 0,!0)])):P.value?(p(),R(N,{key:1,class:"apos-modal__locale",locale:w.value},null,8,["locale"])):x("",!0),M("primaryControls")?(p(),y("div",qre,[gt(W.$slots,"primaryControls",{},void 0,!0)])):x("",!0)])):x("",!0)]),M("breadcrumbs")?(p(),y("div",Kre,[gt(W.$slots,"breadcrumbs",{class:"apos-modal__breadcrumbs"},void 0,!0)])):x("",!0)])),A("div",{class:te(["apos-modal__main",ee.value])},[gt(W.$slots,"leftRail",{},void 0,!0),gt(W.$slots,"main",{},void 0,!0),gt(W.$slots,"rightRail",{},void 0,!0)],2),M("footer")?(p(),y("footer",Gre,[A("div",Jre,[gt(W.$slots,"footer",{},void 0,!0)])])):x("",!0)],512),[[on,!v.value&&!e.modal.busy]])],2)):x("",!0)]),_:3},8,["name"])],42,Rre),[[on,e.modal.active]])]),_:3},8,["name"])}}},Zre=I(Yre,[["__scopeId","data-v-d39a73af"]]),Xre={name:"AposModalBody",data(){return{headerHeight:0}},async mounted(){this.$refs.bodyHeader&&(await this.$nextTick(),this.headerHeight=this.$refs.bodyHeader.offsetHeight)},methods:{hasSlot(e){return!!this.$slots[e]},getBodyMainRef(){return this.$refs.bodyMain}}},Qre={class:"apos-modal__body-inner"},eae={key:0,ref:"bodyHeader",class:"apos-modal__body-header"},tae={ref:"bodyMain",class:"apos-modal__body-main"},nae={key:0,class:"apos-modal__body-footer"};function iae(e,t,n,i,o,s){return p(),y("div",{class:te(["apos-modal__body",{"apos-modal__body--flex":s.hasSlot("footer")}])},[A("div",Qre,[s.hasSlot("bodyHeader")?(p(),y("div",eae,[gt(e.$slots,"bodyHeader",{},void 0,!0)],512)):x("",!0),A("div",tae,[gt(e.$slots,"bodyMain",{},void 0,!0)],512)]),s.hasSlot("footer")?(p(),y("div",nae,[gt(e.$slots,"footer",{},void 0,!0)])):x("",!0)],2)}const oae=I(Xre,[["render",iae],["__scopeId","data-v-9552d3e3"]]),sae={name:"AposModalBreadcrumbs",components:{ChevronRightIcon:YS},props:{label:{default:"apostrophe:modalBreadcrumbsDefaultLabel",type:String},modifier:{default:"",type:String},items:{default(){return[]},type:Array},variant:{type:String,default:null}},emits:["return-to"],computed:{last(){return Object.keys(this.items).length-1},classObj:function(){return{"apos-breadcrumb--dark":this.variant==="dark"}}}},rae={class:"apos-breadcrumb__items"};function aae(e,t,n,i,o,s){const r=E("ChevronRightIcon");return p(),y("nav",{class:te(["apos-breadcrumb",s.classObj]),"aria-label":"breadcrumb"},[A("ol",rae,[(p(!0),y(Ce,null,Ie(n.items,(a,l)=>(p(),y("li",{key:l,class:te(`apos-breadcrumb__item ${n.modifier}`)},[(p(),R(et(a.target?"button":"span"),{"data-apos-target":a.target,type:a.target?"button":null,"aria-label":a.target?{key:"apostrophe:returnToPage",label:e.$t(a.label)}:null,onClick:c=>a.target?e.$emit("return-to",a.target):null},{default:Q(()=>[Et($(a.label),1)]),_:2},1032,["data-apos-target","type","aria-label","onClick"])),l!==s.last?(p(),R(r,{key:0,class:"apos-breadcrumb__chevron",size:13})):x("",!0)],2))),128))])],2)}const lae=I(sae,[["render",aae],["__scopeId","data-v-739f1aed"]]),cae={props:{mode:{type:String,default:"confirm"},content:{type:Object,required:!0},callbackName:{type:String,default:""},options:{type:Object,default(){return{}}}},emits:["confirm-response","modal-result"],data(){return{modal:{title:"",active:!1,type:"overlay",showModal:!1,disableHeader:!0},formValues:null}},computed:{affirmativeLabel(){return this.mode==="confirm"?this.localize(this.content.affirmativeLabel)||this.$t("Confirm"):this.localize(this.content.affirmativeLabel)||this.$t("OK")},isDisabled(){if(!this.formValues)return!1;let e=!1;return this.content.form.schema&&this.content.form.schema.forEach(t=>{t.required&&!this.formValues.data[t.name]&&(e=!0)}),e}},async mounted(){this.modal.active=!0,this.content.form&&(this.formValues=this.content.form.value)},methods:{close(){this.modal.showModal=!1,this.$emit("modal-result",null)},ready(){this.$refs.confirm.$el.querySelector("button").focus()},confirm(){this.modal.showModal=!1;const e=this.content.form?this.formValues:!0;this.$emit("modal-result",e)},async cancel(){this.modal.showModal=!1,this.$emit("modal-result",!1)},localize(e){return this.options.localize===!1?e:this.$t(e,this.options.interpolate||{})}}},dae=["src"],uae={key:3,class:"apos-confirm__heading"},hae={key:4,class:"apos-confirm__description"},fae={key:6,class:"apos-confirm__schema"},pae={class:"apos-confirm__btns"},mae={key:7,class:"apos-confirm__note"};function gae(e,t,n,i,o,s){const r=E("AposIndicator"),a=E("AposLogoIcon"),l=E("AposSchema"),c=E("AposButton"),u=E("AposModalBody"),f=E("AposModal");return p(),R(f,X({modal:o.modal,class:["apos-confirm",{"apos-confirm--tiny":n.options.tiny}]},Ec(n.mode!=="alert"?{esc:s.close}:null),{onInactive:t[1]||(t[1]=m=>o.modal.active=!1),onShowModal:t[2]||(t[2]=m=>o.modal.showModal=!0),onReady:s.ready}),{main:Q(()=>[D(u,null,{bodyMain:Q(()=>[n.options.hasCloseButton?(p(),R(r,{key:0,icon:"close-icon",class:"apos-confirm__close-btn","icon-size":20,onClick:s.close},null,8,["onClick"])):x("",!0),n.content.icon?(p(),y("img",{key:1,class:"apos-confirm__custom-logo",src:n.content.icon,alt:""},null,8,dae)):n.content.icon!==!1?(p(),R(a,{key:2,class:"apos-confirm__logo"})):x("",!0),n.content.heading?(p(),y("h2",uae,$(s.localize(n.content.heading)),1)):x("",!0),n.content.description?(p(),y("p",hae,$(s.localize(n.content.description)),1)):x("",!0),n.content.body?(p(),R(et(n.content.body.component),s7(X({key:5},n.content.body.props)),null,16)):x("",!0),n.content.form?(p(),y("div",fae,[o.formValues?(p(),R(l,{key:0,modelValue:o.formValues,"onUpdate:modelValue":t[0]||(t[0]=m=>o.formValues=m),schema:n.content.form.schema,"trigger-validation":!0},null,8,["modelValue","schema"])):x("",!0)])):x("",!0),A("div",pae,[n.mode!=="alert"?(p(),R(c,{key:0,attrs:{"data-apos-focus-priority":n.mode!=="alert"?!0:null},class:"apos-confirm__btn",label:n.content.negativeLabel||"apostrophe:cancel",onClick:s.cancel},null,8,["attrs","label","onClick"])):x("",!0),D(c,{ref:"confirm",attrs:{"data-apos-focus-priority":n.mode==="alert"?!0:null},class:"apos-confirm__btn",label:s.affirmativeLabel,type:n.content.theme||"primary",disabled:s.isDisabled,onClick:s.confirm},null,8,["attrs","label","type","disabled","onClick"])]),n.content.note?(p(),y("p",mae,$(s.localize(n.content.note)),1)):x("",!0)]),_:1})]),_:1},16,["modal","class","onReady"])}const bae=I(cae,[["render",gae],["__scopeId","data-v-3b5d4bc3"]]),yae={name:"AposModalLip",props:{shadow:{type:String,default:"0 0 0 0 0   0 0 0 0 0   0 0 0 0 0   0 0 0 0.0812386775 0"},refresh:{type:String,default:"hello"}},watch:{refresh(e){this.padParent()}},mounted(){this.padParent()},methods:{padParent(){this.$parent.$el.style.marginBottom=`${this.$refs.lip.offsetHeight+10}px`}}},vae={ref:"lip",class:"apos-modal-lip"},wae={class:"apos-modal-lip__shadow"},_ae={width:"406px",height:"56px",viewBox:"0 0 406 56",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},Cae={id:"shadow-filter-4",x:"-6.2%",y:"-28.9%",width:"112.5%",height:"165.1%",filterUnits:"objectBoundingBox"},Aae=["values"],kae={class:"apos-modal-lip__content"};function Sae(e,t,n,i,o,s){return p(),y("div",vae,[A("div",wae,[(p(),y("svg",_ae,[t[6]||(t[6]=A("title",null,"Shadow",-1)),A("defs",null,[t[4]||(t[4]=A("rect",{id:"shadow-path-1",x:"0",y:"0",width:"406",height:"56"},null,-1)),t[5]||(t[5]=A("rect",{id:"shadow-path-3",x:"-13",y:"20",width:"432",height:"83"},null,-1)),A("filter",Cae,[t[0]||(t[0]=A("feMorphology",{radius:"3",operator:"dilate",in:"SourceAlpha",result:"shadowSpreadOuter1"},null,-1)),t[1]||(t[1]=A("feOffset",{dx:"0",dy:"0",in:"shadowSpreadOuter1",result:"shadowOffsetOuter1"},null,-1)),t[2]||(t[2]=A("feGaussianBlur",{stdDeviation:"6.5",in:"shadowOffsetOuter1",result:"shadowBlurOuter1"},null,-1)),t[3]||(t[3]=A("feComposite",{in:"shadowBlurOuter1",in2:"SourceAlpha",operator:"out",result:"shadowBlurOuter1"},null,-1)),A("feColorMatrix",{values:n.shadow,type:"matrix",in:"shadowBlurOuter1"},null,8,Aae)])]),t[7]||(t[7]=ml('<g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" data-v-f2981e2c><g transform="translate(0.000000, -1.000000)" data-v-f2981e2c><mask id="shadow-mask-2" fill="white" data-v-f2981e2c><use xlink:href="#shadow-path-1" data-v-f2981e2c></use></mask><g id="Mask" data-v-f2981e2c></g><g fill-rule="nonzero" mask="url(#mask-2)" data-v-f2981e2c><use fill="black" fill-opacity="1" filter="url(#shadow-filter-4)" xlink:href="#shadow-path-3" data-v-f2981e2c></use><rect stroke-width="1" stroke-linejoin="square" fill="transparent" fill-rule="evenodd" x="-12.5" y="20.5" width="431" height="82" data-v-f2981e2c></rect></g></g></g>',1))]))]),A("div",kae,[gt(e.$slots,"default",{},void 0,!0)])],512)}const xae=I(yae,[["render",Sae],["__scopeId","data-v-f2981e2c"]]),Mae={name:"AposModalRail",props:{type:{type:String,default:"left"}},computed:{}};function Tae(e,t,n,i,o,s){return p(),y("div",{class:te(["apos-modal__rail",`apos-modal__rail--${n.type}`])},[gt(e.$slots,"default",{},void 0,!0)],2)}const Eae=I(Mae,[["render",Tae],["__scopeId","data-v-870e0ed4"]]),Oae={name:"AposModalReport",props:{headers:{required:!0,type:Array},items:{required:!0,type:Array},content:{type:Object,required:!0},options:{type:Object,default(){return{}}}},emits:["confirm-response","modal-result"],data(){return{modal:{type:"overlay",disableHeader:!0,active:!1,showModal:!1},tableWidth:"750px",currentSort:{column:null,direction:"asc"},sortedItems:[]}},computed:{tableMode(){return this.options.mode??"error"},finalHeaders(){return this.headers.map(e=>({...e,action:e.sortable?"sort":!1,icon:this.currentSort.column===e.name?this.currentSort.direction==="asc"?"arrow-up-icon":"arrow-down-icon":e.icon}))},finalItems(){return this.tableMode==="all"?this.sortedItems:this.sortedItems.filter(e=>e.type===this.tableMode)},finalItemsCount(){return this.finalItems.length},exportHeaders(){return this.headers.filter(e=>["always","export"].includes(e.visibility??"always"))},contentHeadingText(){return this.localize(this.content.heading,{count:this.finalItemsCount,total:this.items.length})},contentDescriptionText(){return this.localize(this.content.description,{count:this.finalItemsCount,total:this.items.length})},contentFooterMessageInfo(){return this.localize(this.content.footerMessageInfo,{count:this.finalItemsCount,total:this.items.length})},contentFooterMessageDanger(){return this.localize(this.content.footerMessageDanger,{count:this.finalItemsCount,total:this.items.length})}},async mounted(){this.modal.active=!0,this.sortedItems=[...this.items]},methods:{sortBy({header:e}){if(e.action!=="sort")return;this.currentSort.column===e.name?this.currentSort.direction=this.currentSort.direction==="asc"?"desc":"asc":(this.currentSort.column=e.name,this.currentSort.direction="asc");const t=[...this.sortedItems];t.sort((n,i)=>{const o=this.$refs.table.getValue(n,e,!1),s=this.$refs.table.getValue(i,e,!1);return o===s?0:this.currentSort.direction==="asc"?o>s?1:-1:o<s?1:-1}),this.sortedItems=t},localize(e,t={}){return e?this.options.localize===!1?e:this.$t(e,{...this.options.interpolate||{},...t}):""},closeModal(){this.modal.showModal=!1,this.$emit("modal-result",!0)},exportJson(){const e=new Blob([this.toJson()],{type:"application/json;charset=utf-8;"}),t=URL.createObjectURL(e);this.download(t,"report.json")},exportCsv(){const e=new Blob([this.toCSV()],{type:"text/csv;charset=utf-8;"}),t=URL.createObjectURL(e);this.download(t,"report.csv")},download(e,t){const n=document.createElement("a");n.setAttribute("href",e),n.setAttribute("download",t),n.style.visibility="hidden",document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(e)},toCSV(){if(this.finalItems.length===0)return"";const e=this.exportHeaders.map(n=>JSON.stringify(this.$t(n.label))),t=this.finalItems.map(n=>this.exportHeaders.map(i=>JSON.stringify(this.$refs.table.getValue(n,i,!1))).join(","));return[e.join(","),...t].join(`
`)},toJson(){if(this.finalItems.length===0)return"[]";const e=[];for(const t of this.finalItems){const n={};for(const i of this.exportHeaders)n[this.$t(i.label)]=this.$refs.table.getValue(t,i,!1);e.push(n)}return JSON.stringify(e,null,2)}}},$ae={class:"apos-report__body"},Iae={key:0,class:"apos-report__heading"},Lae={key:1,class:"apos-report__description"},Dae={key:0,class:"apos-primary-scrollbar apos-report__table apos-report__table--bordered"},Rae={class:"apos-report__export"},Pae={class:"apos-report__footer"},Hae={key:0,class:"apos-report--footer-info","data-apos-test":"footerError"},Vae={key:1,class:"apos-report--footer-danger","data-apos-test":"footerError"};function zae(e,t,n,i,o,s){const r=E("AposTable"),a=E("AposButton"),l=E("AposModalBody"),c=E("AposModal");return p(),R(c,{class:"apos-report",modal:o.modal,"data-apos-test":"reportModal",onInactive:t[0]||(t[0]=u=>o.modal.active=!1),onShowModal:t[1]||(t[1]=u=>o.modal.showModal=!0)},{main:Q(()=>[D(l,{"data-apos-test":"reportContent"},{bodyMain:Q(()=>[A("div",$ae,[A("div",null,[s.contentHeadingText?(p(),y("h2",Iae,$(s.contentHeadingText),1)):x("",!0),s.contentDescriptionText?(p(),y("p",Lae,$(s.contentDescriptionText),1)):x("",!0)]),s.finalItems.length?(p(),y("div",Dae,[D(r,{ref:"table",items:s.finalItems,headers:s.finalHeaders,options:n.options,width:o.tableWidth,onColClick:s.sortBy},null,8,["items","headers","options","width","onColClick"])])):x("",!0),A("div",Rae,[A("span",null,$(e.$t("apostrophe:downloadAs")),1),D(a,{type:"quiet",label:"JSON","data-apos-test":"exportJson",onClick:s.exportJson},null,8,["onClick"]),D(a,{type:"quiet",label:"CSV","data-apos-test":"exportCsv",onClick:s.exportCsv},null,8,["onClick"])]),A("div",Pae,[s.contentFooterMessageInfo?(p(),y("span",Hae,$(s.contentFooterMessageInfo),1)):x("",!0),s.contentFooterMessageDanger?(p(),y("span",Vae,$(s.contentFooterMessageDanger),1)):x("",!0),D(a,{type:"primary",label:"apostrophe:close",onClick:s.closeModal},null,8,["onClick"])])])]),_:1})]),_:1},8,["modal"])}const Nae=I(Oae,[["render",zae],["__scopeId","data-v-efc6d326"]]),Bae={name:"LinkVariantIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},Fae=["aria-hidden","aria-label"],Wae=["fill","width","height"],Uae={d:"M10.59,13.41C11,13.8 11,14.44 10.59,14.83C10.2,15.22 9.56,15.22 9.17,14.83C7.22,12.88 7.22,9.71 9.17,7.76V7.76L12.71,4.22C14.66,2.27 17.83,2.27 19.78,4.22C21.73,6.17 21.73,9.34 19.78,11.29L18.29,12.78C18.3,11.96 18.17,11.14 17.89,10.36L18.36,9.88C19.54,8.71 19.54,6.81 18.36,5.64C17.19,4.46 15.29,4.46 14.12,5.64L10.59,9.17C9.41,10.34 9.41,12.24 10.59,13.41M13.41,9.17C13.8,8.78 14.44,8.78 14.83,9.17C16.78,11.12 16.78,14.29 14.83,16.24V16.24L11.29,19.78C9.34,21.73 6.17,21.73 4.22,19.78C2.27,17.83 2.27,14.66 4.22,12.71L5.71,11.22C5.7,12.04 5.83,12.86 6.11,13.65L5.64,14.12C4.46,15.29 4.46,17.19 5.64,18.36C6.81,19.54 8.71,19.54 9.88,18.36L13.41,14.83C14.59,13.66 14.59,11.76 13.41,10.59C13,10.2 13,9.56 13.41,9.17Z"},jae={key:0};function qae(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon link-variant-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",Uae,[n.title?(p(),y("title",jae,$(n.title),1)):x("",!0)])],8,Wae))],16,Fae)}const Kae=I(Bae,[["render",qae]]),Gae={components:{Close:Ky,LinkVariant:Kae},props:{doc:{type:Object,required:!0}},data(){return{modal:{active:!1,type:"overlay",showModal:!1,disableHeader:!0},shareUrl:"",disabled:!0}},async mounted(){this.modal.active=!0,await this.checkUrlProp(),await this.getAposShareKey()},methods:{async copy(){await navigator.clipboard.writeText(this.shareUrl)},async toggle(){this.disabled=!this.disabled,await this.setShareUrl()},async setShareUrl(){try{const{aposShareKey:e}=await apos.http.post(`${apos.modules[this.doc.type].action}/${this.doc._id}/share`,{busy:!0,body:{share:!this.disabled},draft:!0});if(this.disabled){setTimeout(()=>{this.shareUrl=""},200);return}if(!e)return this.showError();this.shareUrl=this.generateShareUrl(e)}catch{if(this.disabled){this.shareUrl="";return}await this.showError()}},close(){this.modal.showModal=!1},async checkUrlProp(){this.doc._url||await this.showError()},async getAposShareKey(){try{const{aposShareKey:e}=await apos.http.get(`${apos.modules[this.doc.type].action}/${this.doc._id}`,{});e&&(this.disabled=!1,this.shareUrl=this.generateShareUrl(e))}catch{await this.showError()}},async showError(){await apos.notify("apostrophe:shareDraftError",{type:"danger",icon:"alert-circle-icon",dismiss:!0})},generateShareUrl(e){const n=/^https?:\/\//.test(this.doc._url)?this.doc._url:`${location.origin}${this.doc._url}`,i=new URL(n),o={url:i.href};return apos.bus.$emit("shared-draft-link",o),apos.http.addQueryToUrl(o.url,{...i.search?apos.http.parseQuery(i.search):{},aposShareKey:e,aposShareId:this.doc._id})}}},Jae={class:"apos-share-draft__header"},Yae={class:"apos-share-draft__heading"},Zae={class:"apos-share-draft__content"},Xae={class:"apos-share-draft__toggle-wrapper"},Qae={class:"apos-share-draft__description"},ele={class:"apos-share-draft__url-block"};function tle(e,t,n,i,o,s){const r=E("Close"),a=E("AposToggle"),l=E("LinkVariant"),c=E("AposModalBody"),u=E("AposModal");return p(),R(u,X({modal:o.modal,class:"apos-share-draft","data-apos-test":"share-draft-modal"},Ec({esc:s.close}),{onInactive:t[4]||(t[4]=f=>o.modal.active=!1),onShowModal:t[5]||(t[5]=f=>o.modal.showModal=!0)}),{main:Q(()=>[D(c,null,{bodyMain:Q(()=>[A("div",Jae,[A("h2",Yae,$(e.$t("apostrophe:shareDraftHeader")),1),D(r,{class:"apos-share-draft__close",tabindex:"0",title:e.$t("apostrophe:close"),size:18,onClick:Ue(s.close,["prevent"])},null,8,["title","onClick"])]),A("div",Zae,[A("div",Xae,[D(a,{modelValue:o.disabled,"onUpdate:modelValue":t[0]||(t[0]=f=>o.disabled=f),class:"apos-share-draft__toggle","data-apos-focus-priority":"",onToggle:s.toggle},null,8,["modelValue","onToggle"]),A("p",{class:"apos-share-draft__toggle-label",onClick:t[1]||(t[1]=(...f)=>s.toggle&&s.toggle(...f))},$(e.$t("apostrophe:shareDraftEnable")),1)]),A("p",Qae,$(e.$t("apostrophe:shareDraftDescription")),1),D(Qi,{name:"collapse",duration:200},{default:Q(()=>[Ke(A("div",ele,[Ke(A("input",{"onUpdate:modelValue":t[2]||(t[2]=f=>o.shareUrl=f),type:"text",disabled:"",tabindex:"-1",class:"apos-share-draft__url"},null,512),[[Eo,o.shareUrl]]),A("a",{href:"",class:"apos-share-draft__link-copy",onClick:t[3]||(t[3]=Ue((...f)=>s.copy&&s.copy(...f),["prevent"]))},[D(l,{class:"apos-share-draft__link-icon",title:e.$t("apostrophe:shareDraftCopyLink"),size:16},null,8,["title"]),Et(" "+$(e.$t("apostrophe:shareDraftCopyLink")),1)])],512),[[on,!o.disabled]])]),_:1})])]),_:1})]),_:1},16,["modal"])}const nle=I(Gae,[["render",tle],["__scopeId","data-v-71a17335"]]),ile={name:"AposModalTabs",props:{tabs:{required:!0,type:Array},current:{type:String,default:""},errors:{type:Object,default(){return{}}}},emits:["select-tab"],computed:{tabErrors(){const e={};for(const t in this.errors){e[t]=[];for(const n in this.errors[t])this.errors[t][n]&&e[t].push(t)}return e}},methods:{generateErrorLabel(e){return e>1?this.$t("apostrophe:modalTabsErrors"):this.$t("apostrophe:modalTabsError")},selectTab:function(e){const n=e.target.id;this.$emit("select-tab",n)}}},ole={class:"apos-modal-tabs"},sle={class:"apos-modal-tabs__tabs"},rle=["id","aria-selected"],ale={key:0,class:"apos-modal-tabs__label apos-modal-tabs__label--error"};function lle(e,t,n,i,o,s){return p(),y("div",ole,[A("ul",sle,[(p(!0),y(Ce,null,Ie(n.tabs,r=>Ke((p(),y("li",{key:r.name,class:"apos-modal-tabs__tab"},[A("button",{id:r.name,class:"apos-modal-tabs__btn","aria-selected":r.name===n.current,onClick:t[0]||(t[0]=(...a)=>s.selectTab&&s.selectTab(...a))},[Et($(e.$t(r.label))+" ",1),s.tabErrors[r.name]&&s.tabErrors[r.name].length?(p(),y("span",ale,$(s.tabErrors[r.name].length)+" "+$(s.generateErrorLabel(s.tabErrors[r.name].length)),1)):x("",!0)],8,rle)])),[[on,r.isVisible!==!1]])),128))])])}const cle=I(ile,[["render",lle],["__scopeId","data-v-5d310f0d"]]),dle={name:"AposModalTabsBody"},ule={class:"apos-modal-tabs"},hle={class:"apos-modal-tabs__wrapper"},fle={class:"apos-modal-tabs__pane"};function ple(e,t,n,i,o,s){return p(),y("div",ule,[A("div",hle,[A("div",fle,[gt(e.$slots,"default",{},void 0,!0)])])])}const mle=I(dle,[["render",ple],["__scopeId","data-v-3924daf3"]]),gle={props:{className:{type:String,default:""}},computed:{hasLeftControls(){return!!this.$slots.leftControls},hasRightControls(){return!!this.$slots.rightControls}}},ble={class:"apos-toolbar__group apos-toolbar__group--left"},yle={key:0,class:"apos-toolbar__group apos-toolbar__group--right"};function vle(e,t,n,i,o,s){return p(),y("div",{class:te([n.className,"apos-toolbar"])},[A("div",ble,[gt(e.$slots,"leftControls",{},void 0,!0)]),s.hasRightControls?(p(),y("div",yle,[gt(e.$slots,"rightControls",{},void 0,!0)])):x("",!0)],2)}const wle=I(gle,[["render",vle],["__scopeId","data-v-d48a877c"]]),_le={name:"AposWidgetModalTabs",props:{tabs:{required:!0,type:Array},current:{type:String,default:""},errors:{type:Object,default(){return{}}},orientation:{type:String,default:"vertical"}},emits:["select-tab"],data(){const e=[];for(let t=0;t<this.tabs.length;t++){const n={...this.tabs[t]};n.action=n.name,t<5&&e.push(n)}return{visibleTabs:e,moreMenuButton:{icon:"dots-vertical-icon",iconOnly:!0,type:"subtle"}}},computed:{tabErrors(){const e={};for(const t in this.errors){e[t]=[];for(const n in this.errors[t])this.errors[t][n]&&e[t].push(t)}return e},menuTabs(){return this.tabs.map(e=>{const t=[];return e.name===this.current&&(t.push("selected"),(!this.tabErrors[e.name]||!this.tabErrors[e.name].length)&&t.push("primary")),this.tabErrors[e.name]&&this.tabErrors[e.name].length&&t.push("danger"),{...e,action:e.name,modifiers:t}})}},methods:{generateErrorLabel(e){return e>1?this.$t("apostrophe:modalTabsErrors"):this.$t("apostrophe:modalTabsError")},selectTab:function(e){const n=e.target.id;this.$emit("select-tab",n)},moreMenuHandler(e){this.$emit("select-tab",e.action)}}},Cle={class:"apos-modal-tabs__tabs","data-apos-test":"widget-tabs"},Ale=["id","aria-selected"],kle={key:0,class:"apos-modal-tabs__label apos-modal-tabs__label--error","data-apos-test":"widget-tabs-error"},Sle={key:"placeholder-for-hidden-tabs",class:"apos-modal-tabs__tab apos-modal-tabs__tab--small"};function xle(e,t,n,i,o,s){const r=E("AposContextMenu");return p(),y("div",{class:te(["apos-modal-tabs",{"apos-modal-tabs--horizontal":n.orientation==="horizontal"}])},[A("ul",Cle,[(p(!0),y(Ce,null,Ie(o.visibleTabs,a=>Ke((p(),y("li",{key:a.name,class:"apos-modal-tabs__tab","data-apos-test":"widget-tabs-item"},[A("button",{id:a.name,class:"apos-modal-tabs__btn","aria-selected":a.name===n.current,"data-apos-test":"widget-tabs-button",onClick:t[0]||(t[0]=(...l)=>s.selectTab&&s.selectTab(...l))},[Et($(e.$t(a.label))+" ",1),s.tabErrors[a.name]&&s.tabErrors[a.name].length?(p(),y("span",kle,$(s.tabErrors[a.name].length)+""+$(s.generateErrorLabel(s.tabErrors[a.name].length)),1)):x("",!0)],8,Ale)])),[[on,a.isVisible!==!1]])),128)),s.menuTabs.length?(p(),y("li",Sle)):x("",!0)]),s.menuTabs.length?(p(),R(r,{key:0,menu:s.menuTabs,"menu-placement":"bottom-end",button:o.moreMenuButton,"data-apos-test":"context-menu-tabs",onItemClicked:t[1]||(t[1]=a=>s.moreMenuHandler(a))},null,8,["menu","button"])):x("",!0)],2)}const Mle=I(_le,[["render",xle],["__scopeId","data-v-2c8aa7c1"]]),Tle={name:"TheAposModals",setup(){const{themeClass:e}=n0(),t=ia();As(()=>{apos.bus.$on("admin-menu-click",async i=>{let o;i==="@apostrophecms/global:singleton-editor"?o={...apos.modal.modals.find(s=>s.itemName==="@apostrophecms/global:editor"),props:{docId:apos.modules["@apostrophecms/global"]._id}}:typeof i=="object"?o={...apos.modal.modals.find(s=>s.itemName===i.itemName),...i}:o=apos.modal.modals.find(s=>s.itemName===i),o&&await t.execute(o.componentName,{...o.props,moduleName:o.moduleName||n(o.itemName)})})});function n(i){return i?i.indexOf(":")>-1?i.split(":")[0]:i:null}return{themeClass:e,store:t}}};function Ele(e,t,n,i,o,s){return p(),y("div",{class:te(i.themeClass)},[(p(!0),y(Ce,null,Ie(i.store.stack,r=>(p(),R(et(r.componentName),X({ref_for:!0},r.props,{key:r.id,"modal-data":r,onModalResult:a=>i.store.setModalResult(r.id,a)}),null,16,["modal-data","onModalResult"]))),128))],2)}const Ole=I(Tle,[["render",Ele]]),s0={methods:{async archive(e){const t=window.apos.modules[e.type],n=e.slug.startsWith("/");try{n&&(e=await apos.http.get(`${t.action}/${e._id}`,{draft:!0,qs:{children:{depth:10}}}));const r=i(e),a=o(e),l=s(e),c=window.apos.modules[e.type].action,u=!!e.lastPublishedAt,f=e.aposDocId===window.apos.adminBar.context.aposDocId,m=n?this.$t("apostrophe:page"):this.$t(t.label)||this.$t("apostrophe:document"),g=[];g.push(this.$t("apostrophe:confirmArchive",{type:m,title:e.title})),a>0&&g.push(this.$t("apostrophe:archivingPageHasChild",{count:a})),l>0&&g.push(this.$t("apostrophe:archivingDraftChildCount",{count:l})),u&&g.push(this.$t("apostrophe:archivingWillUnpublish",{type:this.$t(m)})),l>0&&g.push(this.$t("apostrophe:archivingWillDeleteDraftChildren")),r&&(n?g.push(this.$t("apostrophe:archivingPageWillLoseDraftChanges")):g.push(this.$t("apostrophe:archivingWillLoseDraftChanges")));const v=await apos.confirm({heading:this.$t("apostrophe:archiveType",{type:m}),description:g.join(this.$t("apostrophe:sentenceJoiner")),affirmativeLabel:this.$t("apostrophe:archiveTypeAffirmativeLabel",{type:m}),note:f?this.$t("apostrophe:archiveTypeNote",{type:m}):null,localize:!1,form:a>0?{schema:[{type:"radio",name:"choice",required:!0,choices:[{label:this.$t("apostrophe:archiveOnlyThisPage"),value:"this"},{label:this.$t("apostrophe:archivePageAndSubpages"),value:"all"}]}],value:{data:{}}}:null});if(v){const w={archived:!0};if(n&&(w._targetId="_archive",w._position="lastChild",v.data&&v.data.choice==="this"))for(const _ of e._children)await apos.http.patch(`${c}/${_._id}`,{body:{_targetId:e._id,_position:"before"},busy:!1,draft:!0});if(e=await apos.http.patch(`${c}/${e._id}`,{body:w,busy:!0,draft:!0}),await apos.notify("apostrophe:contentArchived",{type:"success",icon:"archive-arrow-down-icon",dismiss:!0}),f){location.assign(`${window.apos.prefix}/`);return}return apos.bus.$emit("content-changed",{doc:e,action:"archive",localeSwitched:!!this.localeSwitched}),!0}}catch(r){await apos.alert({heading:this.$t("apostrophe:error"),description:r.message||this.$t("apostrophe:errorWhileArchiving"),localize:!1})}function i(r){return r.modified?!0:(r._children||[]).find(a=>i(a))}function o(r){if(!n)return 0;let a=0;for(const l of r._children)a++,a+=o(l);return a}function s(r){if(!n)return 0;let a=0;for(const l of r._children)a+=l.lastPublishedAt?0:1,a+=s(l);return a}},async restore(e){const t=apos.modules[e.type],n=e.slug.startsWith("/"),i=window.apos.modules[e.type].action,o=n?"page":t.label||"content";let s=null;try{if(n&&e._children&&e._children.length){const a=e._children.length,l=`You are going to restore the ${o} ${e.title}, which has ${a} child ${o}${e._children.length>1?"s":""}.`;s=await apos.confirm({heading:"apostrophe:restoreType",description:l,affirmativeLabel:"apostrophe:restoreTypeAffirmativeLabel",form:{schema:[{type:"radio",name:"choice",required:!0,choices:[{label:"apostrophe:restoreOnlyThisPage",value:"this"},{label:"apostrophe:restoreThisPageAndSubpages",value:"all"}]}],value:{data:{}}},interpolate:{type:o}})}if(s&&s.data.choice==="this")for(const a of e._children)await apos.http.patch(`${i}/${a._id}`,{body:{_targetId:"_archive",_position:"lastChild",archived:!0},busy:!1,draft:!0});const r={archived:!1,_targetId:n?"_home":null,_position:n?"firstChild":null};return nu.methods.addLockToRequest(r),e=await apos.http.patch(`${i}/${e._id}`,{body:r,busy:!0,draft:!0}),await apos.notify("apostrophe:contentRestored",{type:"success",icon:"archive-arrow-up-icon",dismiss:!0}),apos.bus.$emit("content-changed",{doc:e,action:"restore",localeSwitched:!!this.localeSwitched}),e}catch(r){nu.methods.isLockedError(r)?await this.showLockedError(r):await apos.alert({heading:this.$t("apostrophe:error"),description:r.message||this.$t("apostrophe:errorWhileRestoringArchive"),localize:!1})}}}},$le={name:"AposDocContextMenu",mixins:[$u,s0,ks],props:{doc:{type:Object,required:!0},current:{type:Object,default(){return null}},published:{type:Object,default(){return null}},showEdit:{type:Boolean,default(){return!0}},showPreview:{type:Boolean,default(){return!0}},showDiscardDraft:{type:Boolean,default(){return!0}},canDeleteDraft:{type:Boolean,default(){return!0}},showCopy:{type:Boolean,default(){return!0}},showArchive:{type:Boolean,default(){return!0}},showRestore:{type:Boolean,default(){return!0}},showDismissSubmission:{type:Boolean,default(){return!1}},disabled:{type:Boolean,default:!1},localeSwitched:{type:Boolean,default:!1},moduleLabels:{type:Object,default:null}},emits:["menu-open","menu-close","close"],data(){return{context:this.doc,customOperations:apos.modules["@apostrophecms/doc"].contextOperations}},computed:{menu(){return[...this.showEdit&&this.context._edit?[{label:this.context.archived?"apostrophe:view":"apostrophe:edit",action:"edit"}]:[],...this.showPreview&&this.canPreview?[{label:"apostrophe:preview",action:"preview"}]:[],...this.showDismissSubmission&&this.canDismissSubmission?[{label:"apostrophe:dismissSubmission",action:"dismissSubmission"}]:[],...this.showCopy&&this.canCopy?[{label:"apostrophe:duplicate",action:"copy"}]:[],...this.canLocalize?[{label:"apostrophe:localize",action:"localize"}]:[],...this.customMenusByContext,...this.showDiscardDraft&&this.canDiscardDraft?[{label:this.context.lastPublishedAt?"apostrophe:discardDraft":"apostrophe:deleteDraft",action:"discardDraft",modifiers:["danger"]}]:[],...this.showArchive&&this.canArchive?[{label:"apostrophe:archive",action:"archive",modifiers:["danger"]}]:[],...this.canUnpublish?[{label:"apostrophe:unpublish",action:"unpublish",modifiers:["danger"]}]:[],...this.showRestore&&this.canRestore?[{label:"apostrophe:restore",action:"restore"}]:[]]},customMenusByContext(){if(!this.canEdit)return[];const e=this.customOperationsByContext.map(t=>({label:t.label,action:t.action,modifiers:t.modifiers||[]}));return e.sort((t,n)=>t.modifiers.length-n.modifiers.length),e},customOperationsByContext(){return this.customOperations.filter(({manuallyPublished:e,hasUrl:t,conditions:n,context:i,if:o,moduleIf:s})=>typeof e=="boolean"&&e!==this.manuallyPublished||typeof t=="boolean"&&t!==this.hasUrl||n&&n.some(l=>!this[l])||(o=o||{},s=s||{},!(cc(this.doc,o)&&cc(this.moduleOptions,s)))?!1:i==="update"&&this.isUpdateOperation)},moduleName(){return apos.modules[this.context.type].action===apos.modules["@apostrophecms/page"].action?"@apostrophecms/page":this.context.type},moduleOptions(){return apos.modules[this.moduleName]},isUpdateOperation(){return!!this.context._id},hasUrl(){return!!this.context._url},canPublish(){return this.context._id?this.context._publish:this.moduleOptions.canPublish},canEdit(){return this.context._id?this.context._edit:!0},canDismissSubmission(){return this.canEdit&&this.context.submitted&&(this.canPublish||this.context.submitted.byId===apos.login.user._id)},canDiscardDraft(){return!this.manuallyPublished||!this.context._id||!this.context.lastPublishedAt&&!this.canDeleteDraft&&!this.context._delete||this.context.lastPublishedAt&&(!this.context.modified||!this.context._edit)?!1:!this.context.lastPublishedAt&&!this.moduleOptions.singleton||this.context.lastPublishedAt&&this.isModifiedFromPublished},canLocalize(){return this.moduleOptions.canLocalize&&this.context._id},canArchive(){const e=!!(this.canPublish&&this.context.lastPublishedAt)||!this.manuallyPublished;return this.context._delete&&this.context._id&&!this.moduleOptions.singleton&&!this.context.archived&&!this.context.parked&&e},canUnpublish(){return this.canEdit&&!this.context.parked&&this.moduleOptions.canPublish&&!this.moduleOptions.singleton&&this.context.lastPublishedAt&&this.manuallyPublished},canCopy(){return this.moduleOptions.canCreate&&this.canEdit&&this.moduleOptions.canEdit&&!this.moduleOptions.singleton&&this.context._id},canRestore(){return this.canEdit&&this.context._id&&this.context.archived&&(!this.manuallyPublished&&this.canPublish||this.manuallyPublished)},canPreview(){return this.hasUrl&&!this.context.archived},canShareDraft(){return this.canEdit&&!this.context.archived},manuallyPublished(){return this.moduleOptions.localized&&!this.autopublish},autopublish(){return this.context._aposAutopublish??this.moduleOptions.autopublish},isModified(){return this.current?ko(this.schema,this.context,this.current):!1},isModifiedFromPublished(){return this.context.modified?!0:!this.context.lastPublishedAt||!this.published?!1:ko(this.schema,this.published,this.context)},schema(){let e=(apos.modules[this.context.type].schema||[]).filter(t=>apos.schema.components.fields[t.type]);return e=e.filter(t=>t.name!=="archived"),e}},watch:{doc(){this.context=this.doc}},mounted(){apos.bus.$on("content-changed",this.onContentChanged),apos.bus.$on("command-menu-admin-bar-discard-draft",this.customDiscardDraft)},unmounted(){apos.bus.$off("content-changed",this.onContentChanged),apos.bus.$off("command-menu-admin-bar-discard-draft",this.customDiscardDraft)},methods:{customDiscardDraft(){this.showDiscardDraft&&this.canDiscardDraft&&this.menuHandler({action:"discardDraft"})},async onContentChanged({doc:e,docIds:t}){if(e&&e._id===this.context._id)this.context=e;else if(t&&t.includes(this.context._id))try{this.context=await apos.http.get(`${this.moduleOptions.action}/${this.context._id}`,{busy:!0})}catch(n){n.name!=="notfound"&&console.error(n)}},menuHandler(e){const t=this.customOperations.find(n=>n.action===e.action);if(t){this.customAction(this.context,t);return}this[e.action](this.context)},async edit(e){await apos.modal.execute(e._aposEditorModal||this.moduleOptions.components.editorModal,{moduleName:this.moduleName,docId:e._id,type:e.type})},preview(e){window.open(e._url,"_blank").focus()},async copy(e){if(this.current)if(await this.confirmAndCancel())this.$emit("close",e);else return;await apos.modal.execute(e._aposEditorModal||this.moduleOptions.components.editorModal,{moduleName:this.moduleName,copyOfId:e._id,copyOf:{...this.current||e,_id:e._id},type:e.type})},async customAction(e,t){if(t.replaces){if(!await apos.confirm({heading:"apostrophe:replaceHeadingPrompt",description:this.$t("apostrophe:replaceDescPrompt"),affirmativeLabel:"apostrophe:replace",icon:!1}))return;this.$emit("close",e)}const n={moduleName:t.moduleName||this.moduleName,moduleLabels:this.moduleLabels,doc:e,...i(e),...t.props};if(t.type==="event"){apos.bus.$emit(t.action,n);return}await apos.modal.execute(t.modal,n);function i(o){return Object.fromEntries(Object.entries(t.docProps||{}).map(([s,r])=>[s,o[r]]))}},async localize(e){if(this.current)if(await this.confirmAndCancel())this.$emit("close",e);else return;apos.bus.$emit("admin-menu-click",{itemName:"@apostrophecms/i18n:localize",props:{doc:e}})},close(){this.$emit("close",this.doc)}}},Ile={name:"AposDocContextMenu",mixins:[$le],emits:["menu-open","menu-close","close"]};function Lle(e,t,n,i,o,s){const r=E("AposContextMenu");return p(),R(r,{class:"apos-admin-bar_context-button",menu:e.menu,disabled:e.disabled||e.menu.length===0,"menu-placement":"bottom-end",button:{tooltip:{content:"apostrophe:moreOptions",placement:"bottom"},label:"apostrophe:moreOptions",icon:"dots-vertical-icon",iconOnly:!0,type:"subtle",modifiers:["small","no-motion"]},onItemClicked:e.menuHandler,onOpen:t[0]||(t[0]=a=>e.$emit("menu-open")),onClose:t[1]||(t[1]=a=>e.$emit("menu-close"))},null,8,["menu","disabled","onItemClicked"])}const Dle=I(Ile,[["render",Lle]]),r0={data(){return{tabKey:qt(),currentTab:null}},computed:{groups(){const e={};return this.schema.forEach(t=>{this.filterOutParkedFields&&!this.filterOutParkedFields([t.name]).length||(t.group&&!e[t.group.name]?e[t.group.name]={label:t.group.label,fields:[t.name],schema:[t]}:t.group&&(e[t.group.name].fields.push(t.name),e[t.group.name].schema.push(t)))}),e.utility||(e.utility={label:"apostrophe:utility",fields:[],schema:[]}),e},tabs(){var t;const e=[];for(const n in this.groups)if(n!=="utility"){const i=this.groups[n].fields;e.push({name:n,label:this.groups[n].label,fields:i,isVisible:(t=this.conditionalFields)!=null&&t.if?i.some(o=>this.conditionalFields.if[o]!==!1):!0})}return e},firstVisibleTabName(){const{name:e=null}=this.tabs.find(t=>t.isVisible===!0)||this.tabs[0]||{};return e}},watch:{tabs(){(!this.currentTab||!this.tabs.some(e=>e.isVisible===!0&&e.name===this.currentTab))&&(this.currentTab=this.firstVisibleTabName)}},mounted(){this.currentTab=this.firstVisibleTabName},methods:{switchPane(e){this.currentTab=e}}},a0={data:()=>({fieldErrors:{},errorCount:0}),mounted(){this.prepErrors()},computed:{errorTooltip(){return this.errorCount?{key:"apostrophe:errorCount",count:this.errorCount}:null}},methods:{updateFieldErrors(e){this.tabKey=qt();for(const t in this.groups)this.groups[t].fields.forEach(n=>{e[n]&&(this.fieldErrors[t][n]=e[n].error)});this.updateErrorCount()},updateErrorCount(){let e=0;for(const t in this.fieldErrors)for(const n in this.fieldErrors[t])this.fieldErrors[t][n]&&e++;this.errorCount=e},prepErrors(){this.fieldErrors=Object.keys(this.groups).reduce((e,t)=>({...e,[t]:{}}),{})},focusNextError(){let e;for(const t in this.fieldErrors)for(const n in this.fieldErrors[t])this.fieldErrors[t][n]&&!e&&(e=this.schema.filter(i=>i.name===n)[0],e.group.name!=="utility"&&this.switchPane(e.group.name),this.getAposSchema(e).scrollFieldIntoView(e.name))},getAposSchema(e){return e.group.name==="utility"?this.$refs.utilitySchema:this.$refs[e.group.name][0]}}},Rle={name:"AposDocEditor",mixins:[r0,ks,lr,$u,nu,s0,a0],provide(){return{originalDoc:this.originalDoc,liveOriginalDoc:this.docFields}},props:{moduleName:{type:String,required:!0},docId:{type:String,default:null},type:{type:String,default:null},copyOfId:{type:String,default:null},modalData:{type:Object,required:!0},values:{type:Object,default:null}},emits:["modal-result"],data(){return{docType:this.moduleName,docReady:!1,fieldErrors:{},modal:{active:!1,triggerFocusRefresh:0,type:"overlay",showModal:!1,componentType:"editorModal"},triggerValidation:!1,original:null,originalDoc:{ref:null},published:null,readOnly:!1,restoreOnly:!1,saveMenu:null,generation:0,localeSwitched:this.modalData.hasContextLocale,referenceDocId:this.docId,currentId:this.docId}},computed:{getOnePath(){return`${this.moduleAction}/${this.currentId}`},followingUtils(){return this.followingValues("utility")},canEdit(){return this.original&&this.original._id?this.original._edit||this.moduleOptions.canEdit:this.moduleOptions.canEdit},canPublish(){return this.original&&this.original._id?this.original._publish||this.moduleOptions.canPublish:this.moduleOptions.canPublish},canCreate(){return this.original&&!this.original._id&&this.moduleOptions.canCreate},saveDisabled(){return!this.canCreate&&!this.canEdit?!0:this.restoreOnly?!1:this.errorCount?!0:!this.currentId||this.isModified?!1:this.manuallyPublished?this.canPublish?this.published&&!this.isModifiedFromPublished:!this.original||this.published&&!this.isModifiedFromPublished?!0:!!this.original.submitted:!0},moduleOptions(){return window.apos.modules[this.docType]||{}},moduleAction(){return(window.apos.modules[this.moduleName]||{}).action},utilityFields(){let e=[];return this.groups.utility&&this.groups.utility.fields&&(e=this.groups.utility.fields),this.filterOutParkedFields(e)},modalTitle(){return{key:this.currentId?"apostrophe:editType":"apostrophe:newDocType",type:this.$t(this.moduleOptions.label)}},saveLabel(){return this.restoreOnly?"apostrophe:restore":this.manuallyPublished?this.canPublish?this.copyOfId?"apostrophe:publish":this.original&&this.original.lastPublishedAt?"apostrophe:update":"apostrophe:publish":this.copyOfId?"apostrophe:submit":this.original&&this.original.lastPublishedAt?"apostrophe:submitUpdate":"apostrophe:submit":"apostrophe:save"},isModified(){return this.original?ko(this.schema,this.original,this.docFields.data):!1},isModifiedFromPublished(){return this.published?ko(this.schema,this.published,this.docFields.data):!1},savePreferenceName(){return`apos-${this.moduleName}-save-pref`},savePreference(){let e=window.localStorage.getItem(this.savePreferenceName);return typeof e!="string"&&(e=null),e},showLocalePicker(){return Object.keys(window.apos.i18n.locales).length>1&&this.moduleOptions.localized!==!1&&!this.modalData.hasContextLocale}},watch:{"docFields.data.type":{handler(e){this.moduleName==="@apostrophecms/page"&&this.docType!==e&&(this.docType=e,this.prepErrors())}},manuallyPublished(){this.saveMenu=this.computeSaveMenu()},original(e){this.originalDoc.ref=e,this.saveMenu=this.computeSaveMenu()}},async mounted(){this.modal.active=!0,await this.evaluateExternalConditions(),this.saveMenu=this.computeSaveMenu(),this.cancelDescription={key:"apostrophe:discardChangesToDocTypePrompt",type:this.$t(this.moduleOptions.label)},this.docId?await this.instantiateExistingDoc():this.copyOfId?this.instantiateCopiedDoc():(await this.$nextTick(),await this.instantiateNewDoc()),apos.bus.$on("content-changed",this.onContentChanged)},unmounted(){apos.bus.$off("content-changed",this.onContentChanged)},methods:{...K4(ia,["updateModalData"]),async instantiateExistingDoc(){await this.loadDoc(),this.evaluateConditions();try{this.manuallyPublished&&(this.published=await apos.http.get(this.getOnePath,{busy:!0,qs:{archived:"any",aposMode:"published"}}))}catch(e){e.name!=="notfound"&&(console.error(e),await apos.notify("apostrophe:fetchPublishedVersionFailed",{type:"warning",icon:"alert-circle-icon",dismiss:!0}))}this.modal.triggerFocusRefresh++},async instantiateCopiedDoc(){this.evaluateConditions();const e=await apos.http.get(`${this.moduleOptions.action}/${this.copyOfId}`,{busy:!0});if(delete e.parked,e.title=`Copy of ${e.title}`,e.slug.startsWith("/")){const t=e.slug.match(/\/([^/]+)$/);t?e.slug=`${apos.page.page.slug}/copy-of-${t[1]}`:e.slug="/copy-of-home-page"}else e.slug=e.slug.replace(/([^/]+)$/,"copy-of-$1");delete e._id,delete e._url,this.original=e,e&&e.type!==this.docType&&(this.docType=e.type),this.docFields.data=e,this.prepErrors(),this.docReady=!0,this.modal.triggerFocusRefresh++},async instantiateNewDoc(){this.docReady=!1;const e=await this.getNewInstance();this.original=e,e&&e.type!==this.docType&&(this.docType=e.type),this.values&&Object.assign(e,this.values),this.docFields.data=e;const t=this.schema.find(n=>n.name==="slug");t&&(this.original.slug=this.original.slug||t.def||t.prefix||""),this.prepErrors(),this.docReady=!0,this.evaluateConditions()},async saveHandler(e,t={}){if(this.triggerValidation=!0,await this.$nextTick(),this.savePreference!==e&&this.setSavePreference(e),this.errorCount)this.triggerValidation=!1,await apos.notify("apostrophe:resolveErrorsBeforeSaving",{type:"warning",icon:"alert-circle-icon",dismiss:!0}),this.focusNextError();else return this[e](t)},async loadDoc(){let e;try{e=await apos.http.get(this.getOnePath,{busy:!0,qs:{archived:"any"},draft:!0}),e.archived?this.restoreOnly=!0:this.restoreOnly=!1;const t=e._edit||this.moduleOptions.canEdit;this.readOnly=t===!1,t&&!await this.lock(this.getOnePath,this.currentId)&&this.lockNotAvailable()}catch{await apos.notify("apostrophe:loadDocFailed",{type:"warning",icon:"alert-circle-icon",dismiss:!0}),await this.confirmAndCancel()}finally{e&&(e.type!==this.docType&&(this.docType=e.type),this.original=at(e),this.docFields.data=e,this.published&&(this.changed=ko(this.schema,this.original,this.published,{differences:!0})),this.docReady=!0,this.prepErrors())}},async preview(){await this.confirmAndCancel()&&(window.location=this.original._url)},lockNotAvailable(){this.modal.showModal=!1},async onRestore(){await this.restore(this.original),await this.loadDoc()},async onSave({navigate:e=!1,keepOpen:t=!1,andPublish:n=null}={}){return this.canPublish||!this.manuallyPublished?this.save({andPublish:n??this.manuallyPublished,navigate:e,keepOpen:t}):this.save({andPublish:!1,andSubmit:!0,navigate:e,keepOpen:t})},async onSaveAndView(){await this.onSave({navigate:!0})},async onSaveAndNew(){await this.onSave(),this.startNew()},async onSaveDraftAndNew(){await this.onSaveDraft(),this.startNew()},async onSaveDraftAndView(){await this.onSaveDraft({navigate:!0})},async onSaveDraft({navigate:e=!1}={}){await this.save({andPublish:!1,draft:!0,navigate:e})},async save({andPublish:e=!1,navigate:t=!1,andSubmit:n=!1,draft:i=!1,keepOpen:o=!1}){const s=this.getRequestBody({update:!!this.currentId}),r=this.currentId?`${this.moduleAction}/${this.currentId}`:this.moduleAction,a=this.currentId?apos.http.put:apos.http.post;this.currentId&&this.addLockToRequest(s);let l;try{l=await a(r,{busy:!0,body:s,draft:!0}),n?await this.submitDraft(l):e&&await this.publish(l),apos.bus.$emit("content-changed",{doc:l,action:a===apos.http.put?"update":"insert",localeSwitched:this.localeSwitched})}catch(c){this.isLockedError(c)?(await this.showLockedError(c),this.modal.showModal=!1):await this.handleSaveError(c,{fallback:"An error occurred saving the document."});return}return o||(this.$emit("modal-result",l),this.modal.showModal=!1),i?await apos.notify("apostrophe:draftSaved",{type:"success",dismiss:!0,icon:"file-document-icon"}):!e&&this.moduleOptions.autopublish&&await apos.notify("apostrophe:changesPublished",{type:"success",dismiss:!0,icon:"file-document-icon"}),t&&(l._url?window.location=l._url:await apos.notify(e?"apostrophe:documentPublishedNoPreview":"apostrophe:draftSavedNoPreview",{type:"warning",icon:"alert-circle-icon"})),l},async getNewInstance(){try{const e=this.getRequestBody({newInstance:!0});return await apos.http.post(this.moduleAction,{body:e,draft:!0})}catch{await apos.notify("apostrophe:errorCreatingNewContent",{type:"danger",icon:"alert-circle-icon",dismiss:!0}),console.error(`Error while creating new, empty content. Review your configuration for ${this.docType} (including \`type\` options in \`@apostrophecms/page\` if it's a page type).`),this.modal.showModal=!1}},startNew(){this.modal.showModal=!1,apos.bus.$emit("admin-menu-click",{itemName:`${this.moduleName}:editor`})},onUpdateDocFields(e){this.updateDocFields(e),this.generation++},updateDocFields(e){this.updateFieldErrors(e.fieldState),this.docFields.data={...this.docFields.data,...e.data},this.evaluateConditions()},getAposSchema(e){return e.group.name==="utility"?this.$refs.utilitySchema:this.$refs[e.group.name][0]},filterOutParkedFields(e){return e.filter(t=>!(this.original&&this.original.parked||[]).includes(t))},computeSaveMenu(){const e=this.$t(this.moduleOptions?this.moduleOptions.label:"document"),t=!this.currentId,n=this.original&&(this.original._id?this.original._url:this.original._previewable),i=this.moduleOptions.showCreate,o=this.moduleOptions.singleton,s={saveLabel:this.$t(this.saveLabel),typeLabel:e},r=[{label:this.saveLabel,action:"onSave",description:{...s,key:o?"apostrophe:updateSingleton":t?"apostrophe:insertAndReturn":"apostrophe:updateAndReturn"},def:!0}];return n&&r.push({label:{key:"apostrophe:takeActionAndView",saveLabel:this.$t(this.saveLabel)},action:"onSaveAndView",description:{...s,key:t?"apostrophe:insertAndRedirect":"apostrophe:updateAndRedirect"}}),i&&r.push({label:{key:"apostrophe:takeActionAndCreateNew",saveLabel:this.$t(this.saveLabel),typeLabel:e},action:"onSaveAndNew",description:{...s,key:t?"apostrophe:insertAndNew":"apostrophe:updateAndNew"}}),this.manuallyPublished&&r.push({label:"apostrophe:saveDraft",action:"onSaveDraft",description:"apostrophe:saveDraftDescription"}),this.manuallyPublished&&n&&r.push({label:{key:"apostrophe:saveDraftAndPreview",typeLabel:e},action:"onSaveDraftAndView",description:{key:"apostrophe:saveDraftAndPreviewDescription",typeLabel:e}}),this.manuallyPublished&&i&&r.push({label:"apostrophe:saveDraftAndCreateNew",action:"onSaveDraftAndNew",description:{key:"apostrophe:saveDraftAndCreateNewDescription",typeLabel:e}}),r},setSavePreference(e){window.localStorage.setItem(this.savePreferenceName,e)},onContentChanged({doc:e,action:t}){var n;!e||((n=this.original)==null?void 0:n._id)!==e._id||(e.type!==this.docType&&(this.docType=e.type),this.docFields.data=e,this.generation++,(t==="archive"||t==="unpublish"||t==="delete"||t==="revert-draft-to-published")&&(this.modal.showModal=!1))},close(){this.modal.showModal=!1},async switchLocale({locale:e,localized:t,save:n}){if(n){const i=await this.saveHandler("onSave",{keepOpen:!0,andPublish:!1});if(this.errorCount>0)return;!this.referenceDocId&&i&&(this.referenceDocId=i._id)}this.updateModalData(this.modalData.id,{locale:e}),this.localeSwitched=e!==apos.i18n.locale,this.published=null,t?(this.currentId=t._id,await this.instantiateExistingDoc()):(this.currentId="",this.docType=this.moduleName,await this.instantiateNewDoc())},getRequestBody({newInstance:e=!1,update:t=!1}){const n=e?{_newInstance:!0}:this.docFields.data;return t||(this.moduleName==="@apostrophecms/page"&&(n._targetId=this.localeSwitched?"_home":apos.page.page._id.replace(":published",":draft"),n._position="lastChild"),e||(this.copyOfId?n._copyingId=this.copyOfId:this.localeSwitched&&this.referenceDocId&&(n._createId=this.referenceDocId.split(":")[0]))),n},isPriorityButton(e){let t;return this.restoreOnly&&(t="save"),this.saveMenu&&(t="splitSave"),this.saveDisabled&&(t="cancel"),e===t?!0:null}}},Ple={key:0,class:"apos-doc-editor__body"},Hle={class:"apos-doc-editor__utility"};function Vle(e,t,n,i,o,s){const r=E("AposButton"),a=E("AposDocLocalePicker"),l=E("AposDocContextMenu"),c=E("AposButtonSplit"),u=E("AposModalTabs"),f=E("AposModalRail"),m=E("AposSchema"),g=E("AposModalBody"),v=E("AposModal");return p(),R(v,{class:"apos-doc-editor",modal:o.modal,"modal-title":s.modalTitle,"modal-data":n.modalData,onInactive:t[1]||(t[1]=w=>o.modal.active=!1),onShowModal:t[2]||(t[2]=w=>o.modal.showModal=!0),onEsc:e.confirmAndCancel},il({secondaryControls:Q(()=>[D(r,{type:"default",label:"apostrophe:cancel",attrs:{"data-apos-focus-priority":s.isPriorityButton("cancel")},onClick:e.confirmAndCancel},null,8,["attrs","onClick"])]),primaryControls:Q(()=>[o.original?(p(),R(l,{key:0,disabled:e.errorCount>0||o.restoreOnly,doc:o.original,current:e.docFields.data,published:o.published,"show-edit":!1,"can-delete-draft":s.moduleOptions.canDeleteDraft,"locale-switched":o.localeSwitched,onClose:s.close},null,8,["disabled","doc","current","published","can-delete-draft","locale-switched","onClose"])):x("",!0),o.restoreOnly?(p(),R(r,{key:1,type:"primary",label:s.saveLabel,disabled:s.saveDisabled,tooltip:e.errorTooltip,attrs:{"data-apos-focus-priority":s.isPriorityButton("save")},onClick:s.onRestore},null,8,["label","disabled","tooltip","attrs","onClick"])):o.saveMenu?(p(),R(c,{key:2,menu:o.saveMenu,"menu-label":"Select Save Method",disabled:s.saveDisabled,tooltip:e.errorTooltip,selected:s.savePreference,attrs:{"data-apos-focus-priority":s.isPriorityButton("splitSave")},onClick:t[0]||(t[0]=w=>s.saveHandler(w))},null,8,["menu","disabled","tooltip","selected","attrs"])):x("",!0)]),leftRail:Q(()=>[D(f,null,{default:Q(()=>[e.tabs.length?(p(),R(u,{key:e.tabKey,current:e.currentTab,tabs:e.tabs,errors:o.fieldErrors,onSelectTab:e.switchPane},null,8,["current","tabs","errors","onSelectTab"])):x("",!0)]),_:1})]),main:Q(()=>[D(g,null,{bodyMain:Q(()=>[o.docReady?(p(),y("div",Ple,[(p(!0),y(Ce,null,Ie(e.tabs,w=>Ke((p(),R(m,{key:w.name,ref_for:!0,ref:w.name,changed:e.changed,schema:e.groups[w.name].schema,"current-fields":e.groups[w.name].fields,"trigger-validation":o.triggerValidation,"utility-rail":!1,"following-values":e.followingValues("other"),"conditional-fields":e.conditionalFields,"doc-id":o.currentId,"model-value":e.docFields,meta:e.docMeta,"server-errors":e.serverErrors,generation:o.generation,"onUpdate:modelValue":s.updateDocFields,onValidate:e.triggerValidate,onUpdateDocData:s.onUpdateDocFields},null,8,["changed","schema","current-fields","trigger-validation","following-values","conditional-fields","doc-id","model-value","meta","server-errors","generation","onUpdate:modelValue","onValidate","onUpdateDocData"])),[[on,w.name===e.currentTab]])),128))])):x("",!0)]),_:1})]),rightRail:Q(()=>[D(f,{type:"right"},{default:Q(()=>[A("div",Hle,[o.docReady?(p(),R(m,{key:0,ref:"utilitySchema",schema:e.groups.utility.schema,changed:e.changed,"current-fields":e.groups.utility.fields,"trigger-validation":o.triggerValidation,"utility-rail":!0,"following-values":s.followingUtils,"conditional-fields":e.conditionalFields,"doc-id":o.currentId,"model-value":e.docFields,meta:e.docMeta,modifiers:["small","inverted"],"server-errors":e.serverErrors,generation:o.generation,"onUpdate:modelValue":s.updateDocFields,onValidate:e.triggerValidate},null,8,["schema","changed","current-fields","trigger-validation","following-values","conditional-fields","doc-id","model-value","meta","server-errors","generation","onUpdate:modelValue","onValidate"])):x("",!0)])]),_:1})]),_:2},[s.showLocalePicker?{name:"localeDisplay",fn:Q(()=>[D(a,{locale:n.modalData.locale,"doc-id":o.referenceDocId,"module-options":s.moduleOptions,"is-modified":s.isModified,onSwitchLocale:s.switchLocale},null,8,["locale","doc-id","module-options","is-modified","onSwitchLocale"])]),key:"0"}:void 0]),1032,["modal","modal-title","modal-data","onEsc"])}const zle=I(Rle,[["render",Vle],["__scopeId","data-v-c76f594e"]]),Nle={class:"apos-doc-locales"},Ble={class:"apos-doc-locales__label"},Fle={__name:"AposDocLocalePicker",props:{locale:{type:String,required:!0},docId:{type:String,default:null},moduleOptions:{type:Object,default:()=>({action:"",label:""})},isModified:{type:Boolean,required:!0}},emits:["save-doc","switch-locale"],setup(e,{emit:t}){const n=t,i=e,o=tr("i18n"),s=apos.modules["@apostrophecms/i18n"].action,r=o("apostrophe:localeSwitcherPermissionToCreate",{docType:i.moduleOptions.label.toLowerCase()}),a=Ve(null),l=Ve({}),c=Ve([]),u=Ve(!1),f=Je(()=>{var k;const w=(k=apos.i18n.locales[i.locale])==null?void 0:k.label;return{label:{key:w?`${w} (${i.locale})`:i.locale,localize:!1},icon:"chevron-down-icon",modifiers:["icon-right","no-motion"],type:"quiet"}});async function m(){if(u.value=!0,!!i.docId)try{const w=await apos.http.get(`${i.moduleOptions.action}/${i.docId}/locales`,{busy:!0});l.value=Object.fromEntries(w.results.filter(_=>_.aposLocale.endsWith(":draft")).map(_=>[_.aposLocale.split(":")[0],_])),await g()}catch(w){console.err(w)}}async function g(){const w=Object.keys(apos.i18n.locales).filter(k=>!l.value[k]),_=await apos.http.get(`${s}/locales-permissions`,{qs:{type:i.moduleOptions.name,locales:w,action:"create",aposMode:"draft"}});c.value=w.filter(k=>!_.includes(k))}async function v(w){if(c.value.includes(w.name)||(a.value.hide(),w.name===i.locale))return;const _=i.isModified?await apos.confirm({heading:"apostrophe:unsavedChanges",description:o("apostrophe:localeSwitcherDiscardChangesPrompt",{docType:i.moduleOptions.label.toLowerCase()}),negativeLabel:"apostrophe:localeSwitcherDiscardChangesNegative",affirmativeLabel:"apostrophe:localeSwitcherDiscardChangesAffirmative",icon:!1},{hasCloseButton:!0,tiny:!0}):!1;_!==null&&n("switch-locale",{locale:w.name,localized:l.value[w.name],save:_})}return(w,_)=>{const k=E("AposLocalePicker"),L=E("AposContextMenu");return p(),y("div",Nle,[A("span",Ble,$(Zt(o)("apostrophe:locale"))+": ",1),D(L,{ref_key:"menu",ref:a,class:"apos-doc-locales__switcher",identifier:"localePickerTrigger",button:f.value,unpadded:!0,"center-on-icon":!0,"menu-placement":"bottom-end",onOpen:m,onClose:_[0]||(_[0]=P=>u.value=!1)},{default:Q(()=>[D(k,{"current-locale":e.locale,localized:l.value,forbidden:c.value,"forbidden-tooltip":Zt(r),"is-open":u.value,onSwitchLocale:v},null,8,["current-locale","localized","forbidden","forbidden-tooltip","is-open"])]),_:1},8,["button"])])}}},Wle=I(Fle,[["__scopeId","data-v-8fc24f26"]]),l0={data(){return{icons:{},checked:Array.isArray(this.chosen)?this.chosen.map(e=>e._id):[],checkedDocs:Array.isArray(this.chosen)?at(this.chosen):[],subfields:Object.fromEntries((this.chosen||[]).filter(e=>e._fields).map(e=>[e._id,e._fields])),selectPending:new Set}},props:{chosen:{type:[Array,Boolean],default:!1},relationshipField:{type:[Object,Boolean],default:!1}},emits:["modal-result","sort"],computed:{relationshipErrors(){return this.relationshipField?this.relationshipField.required&&!this.checked.length||this.relationshipField.min&&this.checked.length<this.relationshipField.min?"min":this.relationshipField.max&&this.checked.length>this.relationshipField.max?"max":!1:!1},sort(e){this.$emit("sort",e)},selectAllChoice(){const e=this.checked.length,t=this.items&&this.items.length||0;return{value:"checked",indeterminate:e>0&&e!==t}},selectAllState(){return this.checked.length&&!this.selectAllChoice.indeterminate?"checked":this.checked.length&&this.selectAllChoice.indeterminate?"indeterminate":"empty"},isModified(){return this.relationshipIsModified()},manuallyPublished(){return this.moduleOptions.localized&&!this.moduleOptions.autopublish}},mounted(){this.docsManagerAddEventHandlers()},unmounted(){this.docsManagerRemoveEventHandlers()},watch:{items:function(e){if(e.length&&this.generateUi(),this.selectPending.size>0){const t=[...this.checked,...this.selectPending];this.checked=[...new Set(t)],this.selectPending=new Set}},checkedDocs(e,t){for(const n of t)this.subfields[n._id]=n._fields;for(const n of e)this.subfields[n._id]&&!Object.keys(n._fields||{}).length&&(n._fields=this.subfields[n._id])},checked(){this.updateCheckedDocs()}},methods:{maxReached(e=this.checked.length){return this.relationshipField.max&&e>=this.relationshipField.max},selectAll(){if(!this.checked.length){const e=[];this.items.forEach(t=>{const n=this.manuallyPublished&&!t.lastPublishedAt;this.relationshipField&&(this.maxReached(e.length)||n)||e.push(t._id)}),this.checked=e;return}this.allPiecesSelection&&(this.allPiecesSelection.isSelected=!1),this.checked=[]},iconSize(e){if(e.icon)return e.icon==="Circle"?8:10},generateUi(){this.generateIcons()},generateIcons(){const e={},t=[],n=["true","false"];this.headers.forEach(i=>{i.cellValue&&i.cellValue.icon&&t.push(i.cellValue.icon),i.columnHeaderIcon&&t.push(i.columnHeaderIcon),n.forEach(o=>{i.cellValue&&i.cellValue[o]&&i.cellValue[o].icon&&t.push(i.cellValue[o].icon)}),Array.from(new Set(t)).forEach(o=>{e[o]=`${o.toLowerCase()}-icon`})}),this.icons=e},saveRelationship(){this.$emit("modal-result",this.checkedDocs),this.modal.showModal=!1},relationshipIsModified(){if(!this.relationshipField)return!1;if(this.chosen.length!==this.checkedDocs.length)return!0;for(let e=0;e<this.chosen.length;e++)if(this.chosen[e]._id!==this.checkedDocs[e]._id||this.relationshipField.schema&&ko(this.relationshipField.schema,this.chosen[e]._fields,this.checkedDocs[e]._fields))return!0},docsManagerAddEventHandlers(){apos.bus.$on("content-changed",this.docsManagerOnContentChanged)},docsManagerRemoveEventHandlers(){apos.bus.$off("content-changed",this.docsManagerOnContentChanged)},docsManagerOnContentChanged({doc:e,select:t,action:n}){t&&((e.type===this.moduleName||e.slug.startsWith("/")&&this.moduleName==="@apostrophecms/page")&&this.selectPending.add(e._id.replace(":published",":draft")),n==="archive"&&(this.checked=this.checked.filter(i=>e._id!==i)))},updateCheckedDocs(){if(this.checkedDocs=this.checkedDocs.filter(e=>this.checked.includes(e._id)),this.checked.forEach(e=>{if(this.checkedDocs.findIndex(t=>t._id===e)===-1){const t=this.items.find(n=>n._id===e);t&&this.checkedDocs.push(t)}}),this.allPiecesSelection){const e=this.checked.length===this.allPiecesSelection.total;this.allPiecesSelection.isSelected=e||this.checked.length&&this.maxReached()}},getDocModuleName(e){return e?e.slug.startsWith("/")?"@apostrophecms/page":e.type:this.moduleName},getContentChangedTypes(e,t){const n="@apostrophecms/submitted-draft";if(e){const i=this.getDocModuleName(e);return[i,n,...i!==e.type?[e.type]:[]]}return t?[...t,n]:[this.moduleName,n]}}},Ule={name:"AposDocsManager",mixins:[l0,ks,$u],props:{moduleName:{type:String,required:!0},modalData:{type:Object,required:!0}},emits:["archive"],data(){return{modal:{active:!1,triggerFocusRefresh:0,type:"overlay",showModal:!1},headers:[],items:[],lastSelected:null,totalPages:1,currentPage:1,filterValues:{},queryExtras:{viewContext:this.relationshipField?"relationship":"manage"},holdQueries:!1,filterChoices:{},allPiecesSelection:{isSelected:!1,total:0}}},computed:{...q4(ia,["activeModal"]),moduleOptions(){return window.apos.modules[this.moduleName]},moduleLabels(){return{singular:this.moduleOptions.label,plural:this.moduleOptions.pluralLabel}},saveRelationshipLabel(){return this.relationshipField&&this.relationshipField.max===1?{key:"apostrophe:selectOneLabel",typeLabel:this.$t(this.moduleLabels.singular)}:{key:"apostrophe:selectManyLabel",typeLabel:this.$t(this.moduleLabels.plural)}},modalTitle(){return{key:(this.relationshipField?"choose":"manage")==="choose"?"apostrophe:chooseDocType":"apostrophe:manageDocType",type:this.$t(this.moduleLabels.plural)}},emptyDisplay(){const e=apos.modules[this.moduleName];return e!=null&&e.emptyState?e.emptyState:{icon:"file-document-multiple-outline-icon",title:{key:"apostrophe:noTypeFound",type:this.$t(this.moduleLabels.plural||this.moduleLabels.singular)}}},disableUnpublished(){return this.relationshipField&&apos.modules[this.relationshipField.withType].localized},selectAllChoice(){const e=this.checked.length,t=this.items.some(n=>!this.checked.includes(n._id));return{value:"checked",indeterminate:e&&t}}},created(){this.onSearchDebounced=na(this.onSearch,500,{onSuccess:this.search}),this.moduleOptions.filters.forEach(t=>{this.filterValues[t.name]=t.def,t.choices?typeof t.choices=="string"&&(this.queryExtras.dynamicChoices=[...this.queryExtras.dynamicChoices||[],t.name]):(this.queryExtras.choices=this.queryExtras.choices||[],this.queryExtras.choices.push(t.name))})},async mounted(){this.bindShortcuts(),this.headers=this.computeHeaders(),this.modal.active=!0,await this.managePieces(),await this.manageAllPiecesTotal(),this.modal.triggerFocusRefresh++,apos.bus.$on("content-changed",this.onContentChanged),apos.bus.$on("command-menu-manager-create-new",this.create),apos.bus.$on("command-menu-manager-close",this.confirmAndCancel)},onBeforeUnmount(){this.onSearchDebounced.cancel()},unmounted(){this.destroyShortcuts(),apos.bus.$off("content-changed",this.onContentChanged),apos.bus.$off("command-menu-manager-create-new",this.create),apos.bus.$off("command-menu-manager-close",this.confirmAndCancel)},methods:{async create(){await this.edit(null)},async edit(e){let t=null;typeof e=="object"?t=e:e&&(t=this.items.find(i=>i._id===e));const n=this.getDocModuleName(t);await apos.modal.execute(apos.modules[n].components.editorModal,{moduleName:n,docId:t&&t._id,filterValues:this.filterValues})},async finishSaved(){await this.managePieces()},async request(e){var s;const t={...this.filterValues,...this.queryExtras,...e,withPublished:1},n=(s=this.relationshipField)==null?void 0:s.withType;apos.modules["@apostrophecms/page"].validPageTypes.includes(n)&&(t.type=n);const o=Object.entries(t).reduce((r,[a,l])=>({...r,...l!==void 0&&{[a]:l}}),{});return apos.http.get(this.moduleOptions.action,{qs:o,busy:!0,draft:!0})},async requestPieces(e=1,t={}){const{currentPage:n,pages:i,results:o,choices:s}=await this.request({...t,...this.moduleOptions.managerApiProjection&&{project:this.moduleOptions.managerApiProjection},page:e});return{currentPage:n,pages:i,results:o,choices:s}},async requestAllPiecesTotal(){const{count:e}=await this.request({count:1});return e},async requestData(e=1,t={}){const n=await this.requestPieces(e,t),i=await this.requestAllPiecesTotal();return{...n,total:i}},setPieces(e){this.currentPage=e.currentPage,this.totalPages=e.pages,this.items=e.results,this.filterChoices=e.choices},async managePieces(){if(this.holdQueries)return;this.holdQueries=!0;const{currentPage:e,pages:t,results:n,choices:i}=await this.requestPieces(this.currentPage);this.setPieces({currentPage:e,pages:t,results:n,choices:i}),this.holdQueries=!1},async manageAllPiecesTotal(){const e=await this.requestAllPiecesTotal();this.setAllPiecesSelection({isSelected:!1,total:e})},async selectAllPieces(){const{results:e}=await this.request({project:{_id:1,_url:1,title:1},attachments:!1,perPage:this.allPiecesSelection.total});this.setAllPiecesSelection({isSelected:!0,docs:e})},async updatePage(e){e&&(this.currentPage=e,await this.managePieces())},async onSearch(e){const t={...this.queryExtras};e?t.autocomplete=e:"autocomplete"in this.queryExtras&&(t.autocomplete=void 0);const{total:n,...i}=await this.requestData(1,t);return{pieces:i,total:n}},async search({pieces:e,total:t}){e&&(this.currentPage=1,this.setPieces(e),this.setAllPiecesSelection({isSelected:!1,total:t}))},async filter(e,t){this.filterValues[e]!==t&&(this.filterValues[e]=t,this.currentPage=1,await this.managePieces(),await this.manageAllPiecesTotal(),this.headers=this.computeHeaders(),this.setCheckedDocs([]))},shortcutNew(e){var n;e.keyCode===78&&document.activeElement.tagName!=="INPUT"&&this.$refs.modal.id===((n=this.activeModal)==null?void 0:n.id)&&this.create()},bindShortcuts(){window.addEventListener("keydown",this.shortcutNew)},destroyShortcuts(){window.removeEventListener("keydown",this.shortcutNew)},computeHeaders(){let e=this.moduleOptions.columns||[];return this.filterValues.archived&&(e=e.filter(t=>t.component!=="AposCellLabels")),e},async editRelationship(e){const t=await apos.modal.execute("AposRelationshipEditor",{schema:this.relationshipField.schema,title:e.title,modelValue:e._fields});t&&(this.checkedDocs=this.checkedDocs.map(n=>n._id!==e._id?n:{...n,_fields:t}))},setAllPiecesSelection({isSelected:e,total:t,docs:n}){typeof e=="boolean"&&(this.allPiecesSelection.isSelected=e),typeof t=="number"&&(this.allPiecesSelection.total=t),n&&this.setCheckedDocs(n)},async handleBatchAction({label:e,action:t,requestOptions:n={},messages:i}){if(t)try{await apos.http.post(`${this.moduleOptions.action}/${t}`,{body:{...n,_ids:this.checked,messages:i,type:this.checked.length===1?this.moduleLabels.singular:this.moduleLabels.plural}})}catch(o){apos.notify("apostrophe:errorBatchOperationNoti",{interpolate:{operation:e},type:"danger"}),console.error(o)}},setCheckedDocs(e){var t;this.checkedDocs=e.slice(0,((t=this.relationshipField)==null?void 0:t.max)||e.length),this.checked=this.checkedDocs.map(n=>n._id)},async onContentChanged({doc:e,action:t,docIds:n,docTypes:i}){if(this.getContentChangedTypes(e,i).includes(this.moduleName)&&(n||!e.aposLocale||e.aposLocale.split(":")[0]===this.modalData.locale)&&(await this.managePieces(),await this.manageAllPiecesTotal(),["archive","restore"].includes(t))){const s=n||[e._id];this.checked=this.checked.filter(r=>!s.includes(r))}}}},jle={class:"apos-pieces-manager__relationship__rail"},qle={class:"apos-pieces-manager__relationship__counts"},Kle={key:1,class:"apos-pieces-manager__empty"};function Gle(e,t,n,i,o,s){const r=E("AposButton"),a=E("AposUtilityOperations"),l=E("AposMinMaxCount"),c=E("AposSlatList"),u=E("AposModalRail"),f=E("AposDocsManagerToolbar"),m=E("AposDocsManagerSelectBox"),g=E("AposDocsManagerDisplay"),v=E("AposEmptyState"),w=E("AposModalBody"),_=E("AposModal");return p(),R(_,{ref:"modal",modal:o.modal,"modal-title":s.modalTitle,"modal-data":n.modalData,onEsc:e.confirmAndCancel,onInactive:t[1]||(t[1]=k=>o.modal.active=!1),onShowModal:t[2]||(t[2]=k=>o.modal.showModal=!0)},il({secondaryControls:Q(()=>[e.relationshipField?(p(),R(r,{key:0,type:"default",label:"apostrophe:cancel",onClick:e.confirmAndCancel},null,8,["onClick"])):(p(),R(r,{key:1,type:"default",label:"apostrophe:exit",onClick:e.confirmAndCancel},null,8,["onClick"]))]),primaryControls:Q(()=>[D(a,{"module-options":s.moduleOptions,"has-relationship-field":!!e.relationshipField},null,8,["module-options","has-relationship-field"]),e.relationshipField?(p(),R(r,{key:0,type:"primary",label:s.saveRelationshipLabel,disabled:!!e.relationshipErrors,attrs:{"data-apos-focus-priority":1},onClick:e.saveRelationship},null,8,["label","disabled","onClick"])):s.moduleOptions.canCreate&&s.moduleOptions.showCreate?(p(),R(r,{key:1,label:{key:"apostrophe:newDocType",type:e.$t(s.moduleOptions.label)},type:"primary",attrs:{"data-apos-focus-priority":1},onClick:s.create},null,8,["label","onClick"])):x("",!0)]),main:Q(()=>[D(w,null,{bodyHeader:Q(()=>[D(f,{"selected-state":e.selectAllState,"total-pages":o.totalPages,"current-page":o.currentPage,"filter-choices":o.filterChoices,"filter-values":o.filterValues,filters:s.moduleOptions.filters,labels:s.moduleLabels,"displayed-items":o.items.length,"is-relationship":!!e.relationshipField,checked:e.checked,"checked-count":e.checked.length,"batch-operations":s.moduleOptions.batchOperations,"module-name":n.moduleName,options:{disableUnchecked:e.maxReached()},onSelectClick:e.selectAll,onSearch:e.onSearchDebounced,onPageChange:s.updatePage,onFilter:s.filter,onBatch:s.handleBatchAction},null,8,["selected-state","total-pages","current-page","filter-choices","filter-values","filters","labels","displayed-items","is-relationship","checked","checked-count","batch-operations","module-name","options","onSelectClick","onSearch","onPageChange","onFilter","onBatch"]),D(m,{"selected-state":e.selectAllState,"module-labels":s.moduleLabels,"filter-values":o.filterValues,"checked-ids":e.checked,"all-pieces-selection":o.allPiecesSelection,"displayed-items":o.items.length,onSelectAll:s.selectAllPieces,onSetAllPiecesSelection:s.setAllPiecesSelection},null,8,["selected-state","module-labels","filter-values","checked-ids","all-pieces-selection","displayed-items","onSelectAll","onSetAllPiecesSelection"])]),bodyMain:Q(()=>[o.items.length>0?(p(),R(g,{key:0,checked:e.checked,"onUpdate:checked":t[0]||(t[0]=k=>e.checked=k),items:o.items,headers:o.headers,options:{...s.moduleOptions,disableUnchecked:e.maxReached(),disableUnpublished:s.disableUnpublished,manuallyPublished:e.manuallyPublished},onOpen:s.edit},null,8,["checked","items","headers","options","onOpen"])):(p(),y("div",Kle,[D(v,{"empty-state":s.emptyDisplay},null,8,["empty-state"])]))]),_:1})]),_:2},[e.relationshipField?{name:"leftRail",fn:Q(()=>[D(u,null,{default:Q(()=>{var k;return[A("div",jle,[A("div",qle,[D(l,{field:e.relationshipField,"model-value":e.checkedDocs},null,8,["field","model-value"])]),D(c,{class:"apos-pieces-manager__relationship__items","model-value":e.checkedDocs,"relationship-schema":(k=e.relationshipField)==null?void 0:k.schema,"onUpdate:modelValue":s.setCheckedDocs,onItemClicked:s.editRelationship},null,8,["model-value","relationship-schema","onUpdate:modelValue","onItemClicked"])])]}),_:1})]),key:"0"}:void 0]),1032,["modal","modal-title","modal-data","onEsc"])}const Jle=I(Ule,[["render",Gle],["__scopeId","data-v-11b67ac9"]]),Yle={props:{headers:{type:Array,required:!0},items:{type:Array,required:!0},checked:{type:Array,default(){return[]}},options:{type:Object,default(){return{}}}},emits:["update:checked","open","updated"],data(){const e={_template:{hover:!1}};return this.items.forEach(t=>{e[t._id]=at(e._template)}),{state:e}},computed:{checkProxy:{get(){return this.checked},set(e){this.$emit("update:checked",e)}},contextMenuOptions(){return this.options}},watch:{items(){this.refreshState()}},methods:{canEdit(e){return e._id?e._edit||this.options.canLocalize:this.options.canEdit||this.options.canLocalize},over(e){this.state[e].hover=!0},out(e){this.state[e].hover=!1},refreshState(){const e=at(this.state._template),t={};this.items.forEach(n=>{t[n._id]=at(e)}),t._template=e,this.state=t},getEl(e){return e.action?"button":"span"},emitUpdated(e){this.$emit("updated",e)}}},Zle={class:"apos-table"},Xle={key:"contextMenu",class:"apos-table__header"},Qle=["onMouseover","onMouseout"],ece={class:"apos-table__cell"},tce=["onClick"],nce={class:"apos-table__cell apos-table__cell--context-menu"};function ice(e,t,n,i,o,s){const r=E("AposCheckbox"),a=E("AposCellBasic"),l=E("AposCellContextMenu"),c=xi("apos-tooltip");return p(),y("table",Zle,[A("tbody",null,[A("tr",null,[t[1]||(t[1]=A("th",{class:"apos-table__header"},null,-1)),(p(!0),y(Ce,null,Ie(n.headers,u=>(p(),y("th",{key:u.label,scope:"col",class:te(["apos-table__header",`apos-table__header--${u.name}`])},[(p(),R(et(s.getEl(u)),{class:"apos-table__header-label"},{default:Q(()=>[u.labelIcon?(p(),R(et(e.icons[u.labelIcon]),{key:0,size:e.iconSize(u),class:"apos-table__header-icon"},null,8,["size"])):x("",!0),Et(" "+$(e.$t(u.label)),1)]),_:2},1024))],2))),128)),A("th",Xle,[(p(),R(et(s.getEl({})),{class:"apos-table__header-label apos-is-hidden"},{default:Q(()=>[Et($(e.$t("apostrophe:moreOperations")),1)]),_:1}))])]),(p(!0),y(Ce,null,Ie(n.items,u=>(p(),y("tr",{key:u._id,class:te(["apos-table__row",{"apos-is-selected":!1}]),onMouseover:f=>s.over(u._id),onMouseout:f=>s.out(u._id)},[A("td",ece,[u._id?Ke((p(),R(r,{key:0,modelValue:s.checkProxy,"onUpdate:modelValue":t[0]||(t[0]=f=>s.checkProxy=f),field:{name:u._id,hideLabel:!0,label:e.$t({key:"apostrophe:toggleSelectionOf",title:u.title}),readOnly:n.options.disableUnchecked&&!s.checkProxy.includes(u._id)||n.options.disableUnpublished&&!u.lastPublishedAt},choice:{value:u._id},onUpdated:f=>s.emitUpdated(u._id)},null,8,["modelValue","field","choice","onUpdated"])),[[c,n.options.disableUnpublished&&!u.lastPublishedAt?"apostrophe:publishBeforeUsingTooltip":null]]):x("",!0)]),(p(!0),y(Ce,null,Ie(n.headers,f=>(p(),y("td",{key:f.name,class:te(["apos-table__cell apos-table__cell--pointer",`apos-table__cell--${f.name}`]),onClick:m=>s.canEdit(u)&&e.$emit("open",u)},[f.component?(p(),R(et(f.component),{key:0,header:f,item:u._publishedDoc||u,draft:u,published:u._publishedDoc,"manually-published":n.options.manuallyPublished},null,8,["header","item","draft","published","manually-published"])):(p(),R(a,{key:1,header:f,draft:u,published:u._publishedDoc},null,8,["header","draft","published"]))],10,tce))),128)),A("td",nce,[D(l,{state:o.state[u._id],item:u,draft:u,published:u._publishedDoc,header:{columnHeader:"",property:"contextMenu",component:"AposCellContextMenu"},options:s.contextMenuOptions},null,8,["state","item","draft","published","options"])])],40,Qle))),128))])])}const oce=I(Yle,[["render",ice],["__scopeId","data-v-28dc1d83"]]),sce={props:{selectedState:{type:String,required:!0},moduleLabels:{type:Object,required:!0},checkedIds:{type:Array,required:!0},allPiecesSelection:{type:Object,required:!0},displayedItems:{type:Number,required:!0}},emits:["select-all","clear-select","set-all-pieces-selection"],computed:{showSelectAll(){return!!(this.allPiecesSelection.isSelected||["checked","indeterminate"].includes(this.selectedState)&&this.allPiecesSelection.total>this.displayedItems)},selectBoxMessage(){const e=this.checkedIds.length,t=e===this.allPiecesSelection.total&&e!==1,n=this.allPiecesSelection.isSelected?t?"apostrophe:selectBoxMessageAllSelected":"apostrophe:selectBoxMessageSelected":e>this.displayedItems?"apostrophe:selectBoxMessage":"apostrophe:selectBoxMessagePage";return this.$t(n,{num:this.checkedIds.length,label:this.getLabel(this.checkedIds.length)})},selectBoxMessageButton(){const e=this.allPiecesSelection.total===1?"apostrophe:selectBoxMessageButton":"apostrophe:selectBoxMessageAllButton";return this.$t(e,{num:this.allPiecesSelection.total,label:this.getLabel(this.allPiecesSelection.total)})}},methods:{getLabel(e){return e===1?this.$t(this.moduleLabels.singular).toLowerCase():this.$t(this.moduleLabels.plural).toLowerCase()},clearSelection(){this.$emit("set-all-pieces-selection",{isSelected:!1,docs:[]})}}},rce={class:"apos-select-box"},ace={class:"apos-select-box__content"},lce={class:"apos-select-box__text"};function cce(e,t,n,i,o,s){const r=E("AposButton");return p(),R(Qi,{name:"collapse",duration:300},{default:Q(()=>[Ke(A("div",rce,[A("div",ace,[A("p",lce,[Et($(s.selectBoxMessage)+" ",1),n.allPiecesSelection.isSelected?(p(),R(r,{key:1,type:"subtle",modifiers:["inline","small","no-motion"],label:"apostrophe:clearSelection",class:"apos-select-box__select-all","text-color":"var(--a-primary)",disabled:!s.showSelectAll,onClick:s.clearSelection},null,8,["disabled","onClick"])):(p(),R(r,{key:0,type:"subtle",modifiers:["inline","small","no-motion"],label:s.selectBoxMessageButton,class:"apos-select-box__select-all","text-color":"var(--a-primary)",disabled:!s.showSelectAll,onClick:t[0]||(t[0]=a=>e.$emit("select-all"))},null,8,["label","disabled"]))])])],512),[[on,s.showSelectAll]])]),_:1})}const dce=I(sce,[["render",cce],["__scopeId","data-v-ae0e5c35"]]),uce={name:"AposRelationshipEditor",mixins:[ks,r0,a0],props:{schema:{type:Array,default(){return[]}},modelValue:{type:Object,default(){return null}},title:{type:String,required:!0}},emits:["modal-result"],data(){return{docReady:!1,original:this.modelValue,docFields:{data:{...this.modelValue!=null?this.modelValue:$c(this.schema)},hasErrors:!1},modal:{active:!1,type:"overlay",showModal:!0},modalTitle:{key:"apostrophe:editRelationshipFor",title:this.title},triggerValidation:!1}},async mounted(){this.modal.active=!0,this.docReady=!0},methods:{async submit(){this.triggerValidation=!0,this.$nextTick(async()=>{this.errorCount?(this.triggerValidation=!1,await apos.notify("apostrophe:resolveErrorsBeforeSaving",{type:"warning",icon:"alert-circle-icon",dismiss:!0}),this.focusNextError()):(this.$emit("modal-result",this.docFields.data),this.modal.showModal=!1)})},updateDocFields(e){this.updateFieldErrors(e.fieldState),this.docFields.data={...this.docFields.data,...e.data}},isModified(){return ko(this.schema,this.original,this.docFields.data)}}},hce={class:"apos-doc-editor__body"};function fce(e,t,n,i,o,s){const r=E("AposButton"),a=E("AposModalTabs"),l=E("AposModalRail"),c=E("AposSchema"),u=E("AposModalTabsBody"),f=E("AposModalBody"),m=E("AposModal");return p(),R(m,{class:"apos-doc-editor",modal:o.modal,"modal-title":o.modalTitle,onInactive:t[0]||(t[0]=g=>o.modal.active=!1),onShowModal:t[1]||(t[1]=g=>o.modal.showModal=!0),onEsc:e.confirmAndCancel},{secondaryControls:Q(()=>[D(r,{type:"default",label:"apostrophe:cancel",onClick:e.confirmAndCancel},null,8,["onClick"])]),primaryControls:Q(()=>[D(r,{type:"primary",label:"apostrophe:save",disabled:!!e.errorCount,tooltip:e.errorTooltip,attrs:{"data-apos-focus-priority":!0},onClick:s.submit},null,8,["disabled","tooltip","onClick"])]),leftRail:Q(()=>[D(l,null,{default:Q(()=>[e.tabs.length?(p(),R(a,{key:e.tabKey,current:e.currentTab,tabs:e.tabs,errors:e.fieldErrors,onSelectTab:e.switchPane},null,8,["current","tabs","errors","onSelectTab"])):x("",!0)]),_:1})]),main:Q(()=>[D(f,null,{bodyMain:Q(()=>[D(u,null,{default:Q(()=>[A("div",hce,[(p(!0),y(Ce,null,Ie(e.tabs,g=>Ke((p(),R(c,{key:g.name,ref_for:!0,ref:g.name,schema:e.groups[g.name].schema,"current-fields":e.groups[g.name].fields,"model-value":o.docFields,"trigger-validation":o.triggerValidation,"onUpdate:modelValue":s.updateDocFields},null,8,["schema","current-fields","model-value","trigger-validation","onUpdate:modelValue"])),[[on,g.name===e.currentTab]])),128))])]),_:1})]),_:1})]),_:1},8,["modal","modal-title","onEsc"])}const pce=I(uce,[["render",fce]]),mce={props:{moduleOptions:{type:Object,required:!0},hasRelationshipField:{type:Boolean,required:!0}},data(){return{utilityOperations:{button:{label:"apostrophe:moreOperations",iconOnly:!0,icon:"dots-vertical-icon",type:"outline"},menu:[]}}},computed:{moduleLabels(){return{singular:this.moduleOptions.label,plural:this.moduleOptions.pluralLabel}}},async mounted(){this.setUtilityOperations()},methods:{async handleUtilityOperation(e){const t=[...this.utilityOperations.menu,...this.utilityOperations.buttons].find(r=>r.action===e.action);if(!t){console.error("utility operation definition was not found");return}const{modal:n,...i}=t.modalOptions||{},{event:o,...s}=t.eventOptions||{};n?await apos.modal.execute(n,{moduleName:this.moduleOptions.name,moduleAction:this.moduleOptions.action,action:e.action,labels:this.moduleLabels,messages:t.messages,...i}):o?apos.bus.$emit(o,s):console.error("utility operation has no modalOptions.modal or eventOptions.event property")},setUtilityOperations(){const{utilityOperations:e,canPublish:t,canEdit:n,canArchive:i,canCreate:o}=this.moduleOptions,s=(Array.isArray(e)&&e||[]).filter(r=>{let a=!0;return r.relationship!=null&&(this.hasRelationshipField?a=r.relationship:a=!r.relationship),r.canCreate&&(a=a&&o),r.canEdit&&(a=a&&n),r.canArchive&&(a=a&&i),r.canPublish&&(a=a&&t),a});this.utilityOperations.menu=s.filter(r=>!r.button),this.utilityOperations.buttons=s.filter(r=>r.button)}}},gce={class:"apos-utility-operations"};function bce(e,t,n,i,o,s){const r=E("AposButton"),a=E("AposContextMenu");return p(),y("div",gce,[(p(!0),y(Ce,null,Ie(o.utilityOperations.buttons,l=>(p(),R(r,{key:l.action,type:"default","icon-only":l.iconOnly,icon:l.icon||null,label:l.label,onClick:c=>s.handleUtilityOperation(l)},null,8,["icon-only","icon","label","onClick"]))),128)),o.utilityOperations.menu.length?(p(),R(a,{key:0,button:o.utilityOperations.button,menu:o.utilityOperations.menu,onItemClicked:s.handleUtilityOperation},null,8,["button","menu","onItemClicked"])):x("",!0)])}const yce=I(mce,[["render",bce],["__scopeId","data-v-3d425ba9"]]),vce={name:"AposPagesManager",mixins:[ks,l0,s0,$u],emits:["archive","search","modal-result"],props:{modalData:{type:Object,required:!0}},data(){return{moduleName:"@apostrophecms/page",modal:{active:!1,triggerFocusRefresh:0,type:"slide",showModal:!1,width:"two-thirds"},headers:[],holdQueries:!1,currentPage:1,totalPages:1,pages:[],pagesFlat:[],updateQueue:H4(),updateQueueIndex:0,options:{columns:[{columnHeader:"apostrophe:pageTitle",property:"title",cellValue:"title"},{name:"labels",component:"AposCellLabels"},{columnHeader:"apostrophe:lastEdited",property:"updatedAt",component:"AposCellLastEdited",cellValue:"updatedAt"},{property:"contextMenu",component:"AposCellContextMenu"}]},queryExtras:{},filterValues:{},filterChoices:{},allPiecesSelection:{isSelected:!1,total:0}}},computed:{isModified(){return this.updateQueueIndex>0&&this.updateQueue.hasTasks()?!0:this.relationshipIsModified()},treeOptions(){return{bulkSelect:!0,draggable:!this.filterValues.archived,ghostUnpublished:!0,max:this.relationshipField.max||null}},moduleOptions(){return apos.page},moduleLabels(){return{singular:this.moduleOptions.label,plural:this.moduleOptions.pluralLabel}},saveRelationshipLabel(){return this.relationshipField&&this.relationshipField.max===1?"apostrophe:selectPage":"apostrophe:selectPages"},items(){return!this.pagesFlat||!this.headers.length?[]:at(this.pagesFlat)},selectAllChoice(){const e=this.checked.length,t=this.items.length;return e>0&&e!==t?{value:"checked",indeterminate:!0}:{value:"checked"}},canCreate(){const e=this.items.find(t=>t.aposDocId===this.moduleOptions.page.aposDocId);return e?e._create:this.moduleOptions.canCreate},checkedTypes(){const e=this.checkedDocs.map(t=>t.type);return[...new Set(e)]}},created(){this.onSearch=na(this.search,500),this.moduleOptions.filters.forEach(t=>{this.filterValues[t.name]=t.def,t.choices||(this.queryExtras.choices=this.queryExtras.choices||[],this.queryExtras.choices.push(t.name))})},async mounted(){this.headers=this.computeHeaders(),this.modal.active=!0,await this.getPages(),this.getAllPagesTotal(),this.modal.triggerFocusRefresh++,apos.bus.$on("content-changed",this.onContentChanged),apos.bus.$on("command-menu-manager-create-new",this.create),apos.bus.$on("command-menu-manager-close",this.confirmAndCancel)},unmounted(){apos.bus.$off("content-changed",this.onContentChanged),apos.bus.$off("command-menu-manager-create-new",this.create),apos.bus.$off("command-menu-manager-close",this.confirmAndCancel)},methods:{async create(){const e=await apos.modal.execute(this.moduleOptions.components.editorModal,{moduleName:this.moduleName,filterValues:this.filterValues});e&&(await this.getPages(),this.relationshipField&&(e._fields=e._fields||{},this.checkedDocs.push(e),this.checked.push(e._id)))},onUpdate(e){this.updateQueueIndex++,this.updateQueue.add(()=>this.update(e)).then(()=>{this.updateQueueIndex++}).catch(()=>{this.updateQueueIndex++})},async update(e){var o,s;const t={_targetId:e.endContext,_position:e.endIndex},n=`${this.moduleOptions.action}/${e.changedId}`;let i;try{i=await apos.http.patch(n,{busy:!1,body:t,draft:!0})}catch(r){await apos.notify(r.body.message||this.$t("apostrophe:treeError"),{type:"danger",icon:"alert-circle-icon",dismiss:!0,localize:!1})}if(i.__changed)try{await this.updateTree(i);const r=(o=window.apos.page.page)==null?void 0:o.slug,a=(s=window.apos.page.page)==null?void 0:s.aposDocId,l=this.pagesFlat.find(c=>c.aposDocId===a);l&&l.slug!==r&&location.assign(l._url)}catch(r){await apos.notify(r.body.message||this.$t("apostrophe:treeError"),{type:"danger",icon:"alert-circle-icon",dismiss:!0,localize:!1}),await this.getPages()}else await this.getPages();this.items.some(r=>{var a;return r.aposDocId===((a=window.apos.page.page)==null?void 0:a.aposDocId)&&r.archived})&&location.assign(`${apos.prefix}/`)},async updateTree(e){const{__changed:t,...n}=e,i=t.map(u=>u.slug?{...u,_url:`${window.apos.prefix}${u.slug}`}:u),o=await apos.http.get(`${this.moduleOptions.action}/${n._id.replace(":draft",":published")}`,{busy:!1}),s=i.find(u=>u._id===e._id),r=Object.keys(s).reduce((u,f)=>(u[f]=o[f],u),{});i.push(r);const a=i.reduce((u,f,m)=>(u[f._id]=m,u),{});this.pages.forEach(l);for(const[u,f]of this.pagesFlat.entries())c(f,i,a)&&(this.pagesFlat[u]={...f});this.pages=[...this.pages],this.pagesFlat=[...this.pagesFlat];function l(u){c(u,i,a),u._children&&u._children.forEach(l)}function c(u,f,m){var v;const g=(v=u._publishedDoc)==null?void 0:v._id;return g&&typeof m[g]<"u"&&(Object.assign(u._publishedDoc,f[m[g]]),u._publishedDoc={...u._publishedDoc}),typeof m[u._id]<"u"?(Object.assign(u,f[m[u._id]]),f[m[u._id]].slug&&u._publishedDoc&&(u._publishedDoc.slug=u.slug,u._publishedDoc.path=u.path,u._publishedDoc._url=u._url,u._publishedDoc={...u._publishedDoc}),!0):!1}},async request(e){const t={...this.filterValues,...this.queryExtras,...e,archived:this.relationshipField||!this.filterValues.archived?"0":"any",all:"1",withPublished:1},n=Object.entries(t).reduce((i,[o,s])=>({...i,...s!==void 0&&{[o]:s}}),{});return apos.http.get(this.moduleOptions.action,{qs:n,busy:!0,draft:!0})},async getPages(){if(this.holdQueries){setTimeout(this.getPages,100);return}this.holdQueries=!0;const e=this;try{this.pages=[],this.pagesFlat=[];let i=await this.request({page:this.currentPage});this.filterValues.archived&&(i=i._children.find(o=>o.slug==="/archive"),i=i._children),i=n(i),t(i),!i.length&&i.length!==0&&(i=[i]),this.currentPage=1,this.totalPages=1,this.pages=[...i]}finally{this.holdQueries=!1}function t(i){if(i.length){i.forEach(t);return}i._id&&(e.pagesFlat.push(at(i)),Array.isArray(i._children)&&i._children.forEach(t))}function n(i){if(Array.isArray(i))return i.map(n).filter(s=>s._id);const o={};if(!e.moduleOptions.validPageTypes.includes(i.type))return o;Object.assign(o,i),o._children=[];for(const s of i._children||[]){const r=n(s);r._id&&o._children.push(r)}return o}},getAllPagesTotal(){this.setAllPiecesSelection({isSelected:!1,total:this.items.length})},selectAllPieces(){this.setAllPiecesSelection({isSelected:!0,docs:this.items})},async search(e){if(e)this.queryExtras.autocomplete=e;else if("autocomplete"in this.queryExtras)delete this.queryExtras.autocomplete;else return;this.currentPage=1,await this.getPages()},async filter(e,t){this.filterValues[e]!==t&&(this.filterValues[e]=t,this.currentPage=1,await this.getPages(),this.getAllPagesTotal(),this.headers=this.computeHeaders(),this.setCheckedDocs([]))},computeHeaders(){let e=this.options.columns||[];return this.filterValues.archived&&(e=e.filter(t=>t.component!=="AposCellLabels")),e},async editRelationship(e){const t=await apos.modal.execute("AposRelationshipEditor",{schema:this.relationshipField.schema,title:e.title,modelValue:e._fields});t&&(this.checkedDocs=this.checkedDocs.map(n=>n._id!==e._id?n:{...n,_fields:t}))},setAllPiecesSelection({isSelected:e,total:t,docs:n}){typeof e=="boolean"&&(this.allPiecesSelection.isSelected=e),typeof t=="number"&&(this.allPiecesSelection.total=t),n&&this.setCheckedDocs(n)},async handleBatchAction({label:e,action:t,requestOptions:n={},messages:i}){if(t)try{await apos.http.post(`${this.moduleOptions.action}/${t}`,{body:{...n,_ids:this.checked,messages:i,type:this.checked.length===1?this.moduleLabels.singular:this.moduleLabels.plural}}),t==="archive"&&(await this.getPages(),this.getAllPagesTotal(),this.checked=[])}catch(o){apos.notify("apostrophe:errorBatchOperationNoti",{interpolate:{operation:e},type:"danger"}),console.error(o)}},setCheckedDocs(e){var t;this.checkedDocs=e.slice(0,((t=this.relationshipField)==null?void 0:t.max)||e.length),this.checked=this.checkedDocs.map(n=>n._id)},async onContentChanged({doc:e,action:t,docIds:n,docTypes:i}){this.getContentChangedTypes(e,i).includes(this.moduleName)&&(n||!e.aposLocale||e.aposLocale.split(":")[0]===this.modalData.locale)&&(await this.getPages(),this.getAllPagesTotal(),t==="archive"&&(this.checked=this.checked.filter(s=>e._id!==s)))}}},wce={name:"AposPagesManager",mixins:[vce],emits:["archive","search","modal-result"]},_ce={class:"apos-pages-manager__relationship__rail"},Cce={class:"apos-pages-manager__relationship__counts"};function Ace(e,t,n,i,o,s){const r=E("AposButton"),a=E("AposUtilityOperations"),l=E("AposMinMaxCount"),c=E("AposSlatList"),u=E("AposModalRail"),f=E("AposDocsManagerToolbar"),m=E("AposDocsManagerSelectBox"),g=E("AposTree"),v=E("AposModalBody"),w=E("AposModal");return p(),R(w,{modal:e.modal,"modal-data":e.modalData,"modal-title":"apostrophe:managePages",onEsc:e.confirmAndCancel,onInactive:t[2]||(t[2]=_=>e.modal.active=!1),onShowModal:t[3]||(t[3]=_=>e.modal.showModal=!0)},il({secondaryControls:Q(()=>[e.relationshipField?(p(),R(r,{key:0,type:"default",label:"apostrophe:cancel",onClick:e.confirmAndCancel},null,8,["onClick"])):(p(),R(r,{key:1,type:"default",label:"apostrophe:exit",onClick:e.confirmAndCancel},null,8,["onClick"]))]),primaryControls:Q(()=>[D(a,{"module-options":e.moduleOptions,"has-relationship-field":!!e.relationshipField},null,8,["module-options","has-relationship-field"]),e.relationshipField?(p(),R(r,{key:0,type:"primary",label:e.saveRelationshipLabel,disabled:!!e.relationshipErrors,attrs:{"data-apos-focus-priority":!0},onClick:e.saveRelationship},null,8,["label","disabled","onClick"])):e.canCreate?(p(),R(r,{key:1,type:"primary",label:"apostrophe:newPage",attrs:{"data-apos-focus-priority":!0},onClick:t[0]||(t[0]=_=>e.create())})):x("",!0)]),main:Q(()=>[D(v,null,il({bodyMain:Q(()=>[D(g,{checked:e.checked,"onUpdate:checked":t[1]||(t[1]=_=>e.checked=_),items:e.pages,headers:e.headers,icons:e.icons,options:e.treeOptions,"module-options":e.moduleOptions,onUpdate:e.onUpdate},null,8,["checked","items","headers","icons","options","module-options","onUpdate"])]),_:2},[e.relationshipField?void 0:{name:"bodyHeader",fn:Q(()=>[D(f,{"selected-state":e.selectAllState,"total-pages":e.totalPages,"current-page":e.currentPage,"filter-choices":e.filterChoices,"filter-values":e.filterValues,filters:e.moduleOptions.filters,labels:e.moduleLabels,"displayed-items":e.items.length,"is-relationship":!!e.relationshipField,checked:e.checked,"checked-types":e.checkedTypes,"checked-count":e.checked.length,"batch-operations":e.moduleOptions.batchOperations,"module-name":e.moduleName,options:{disableUnchecked:e.maxReached(),noPager:!0,noSearch:!0},onSelectClick:e.selectAll,onSearch:e.onSearch,onFilter:e.filter,onBatch:e.handleBatchAction},null,8,["selected-state","total-pages","current-page","filter-choices","filter-values","filters","labels","displayed-items","is-relationship","checked","checked-types","checked-count","batch-operations","module-name","options","onSelectClick","onSearch","onFilter","onBatch"]),D(m,{"selected-state":e.selectAllState,"module-labels":e.moduleLabels,"filter-values":e.filterValues,"checked-ids":e.checked,"all-pieces-selection":e.allPiecesSelection,"displayed-items":e.items.length,onSelectAll:e.selectAllPieces,onSetAllPiecesSelection:e.setAllPiecesSelection},null,8,["selected-state","module-labels","filter-values","checked-ids","all-pieces-selection","displayed-items","onSelectAll","onSetAllPiecesSelection"])]),key:"0"}]),1024)]),_:2},[e.relationshipField?{name:"leftRail",fn:Q(()=>[D(u,null,{default:Q(()=>{var _;return[A("div",_ce,[A("div",Cce,[D(l,{field:e.relationshipField,"model-value":e.checkedDocs},null,8,["field","model-value"])]),D(c,{class:"apos-pages-manager__relationship__items","model-value":e.checkedDocs,"relationship-schema":(_=e.relationshipField)==null?void 0:_.schema,"onUpdate:modelValue":e.setCheckedDocs,onItemClicked:e.editRelationship},null,8,["model-value","relationship-schema","onUpdate:modelValue","onItemClicked"])])]}),_:1})]),key:"0"}:void 0]),1032,["modal","modal-data","onEsc"])}const kce=I(wce,[["render",Ace],["__scopeId","data-v-f2975a89"]]);function Sce(e){let t=e.widgets||{};if(e.groups)for(const n of Object.keys(e.groups))t={...t,...e.groups[n].widgets};return t}function J4(e,t){const n=Sce(t);return e.createWidgetOperations.filter(i=>!(i.ifTypesIntersect&&!Object.keys(n).some(s=>i.ifTypesIntersect.includes(s))))}const xce={name:"AposAreaContextualMenu",props:{buttonOptions:{type:Object,required:!0},contextMenuOptions:{type:Object,required:!0},index:{type:Number,default:0},options:{type:Object,required:!0},maxReached:{type:Boolean},disabled:{type:Boolean,default:!1},widgetOptions:{type:Object,default:function(){return{}}},fieldId:{type:String,required:!0},menuId:{type:String,default(){return`areaMenu-${qt()}`}},open:{type:Boolean}},emits:["add"],data(){return{active:0,groupIsFocused:!1,inContext:!0,buttonOpen:!1}},computed:{moduleOptions(){return window.apos.area},isDisabled(){let e=this.disabled;return this.maxReached&&(e=!0),e},extendedContextMenuOptions(){const e=["unpadded"];return this.groupedMenus||e.push("tb-padded"),{menuPlacement:"bottom",menuOffset:15,...this.contextMenuOptions,modifiers:e}},groupedMenus(){let e=!1;return this.contextMenuOptions.menu.forEach(t=>{t.items&&(e=!0)}),e},myMenu(){let e=0;if(this.open&&e++,this.buttonOpen&&e++,e===0)return[];const t=[...this.contextMenuOptions.menu],n=J4(this.moduleOptions,this.options);for(const o of n)t.unshift({type:"operation",...o});const i=apos.area.widgetClipboard.get();if(i){const o=i,s=t.find(r=>r.name===o.type);s&&t.unshift({type:"clipboard",...s,label:{key:"apostrophe:pasteWidget",widget:this.$t(s.label)},clipboard:o})}return this.groupedMenus?this.composeGroups(t):t}},mounted(){this.inContext=!apos.util.closest(this.$el,"[data-apos-schema-area]")},methods:{async action(e){if(e.type==="operation"){const t={...e.props,options:this.options,fieldId:this.fieldId};this.$refs.contextMenu.hide();const n=await apos.modal.execute(e.modal,t);n&&this.$emit("add",{widget:n,index:this.index});return}this.$refs.contextMenu.hide(),this.$emit("add",{...e,index:this.index})},groupFocused(){this.groupIsFocused=!0},groupBlurred(){this.groupIsFocused=!1},composeGroups(e){const t={label:"apostrophe:ungroupedWidgets",items:[]},n=[];return e.forEach(i=>{i.items?n.push(i):t.items.push(i)}),t.items.length&&n.push(t),n},toggleGroup(e){this.active!==e?this.active=e:this.active=null},switchGroup(e,t){let n;t>0&&(n=e<this.$refs.groupButton.length-1?e+1:0),t<0&&(n=e===0?this.$refs.groupButton.length-1:e-1),t===0&&(n=0),t||(n=this.$refs.groupButton.length-1),this.$nextTick(()=>{this.$refs.groupButton[n].focus()})},switchItem(e,t){this.$refs[e]&&this.$refs[e][0].querySelector("button").focus()}}},Mce={class:"apos-area-menu__wrapper"},Tce={key:0,class:"apos-area-menu__group"},Ece=["id","for","aria-controls","onClick","onKeydown"],Oce={class:"apos-area-menu__group-list",role:"region"},$ce=["id","aria-labelledby","aria-expanded"];function Ice(e,t,n,i,o,s){const r=E("chevron-up-icon"),a=E("AposAreaMenuItem"),l=E("AposContextMenu");return p(),y("div",{class:te(["apos-area-menu",{"apos-is-focused":o.groupIsFocused}])},[D(l,X(s.extendedContextMenuOptions,{ref:"contextMenu",disabled:s.isDisabled,button:n.buttonOptions,"popover-modifiers":o.inContext?["z-index-in-context"]:[],"menu-id":n.menuId,onOpen:t[2]||(t[2]=c=>o.buttonOpen=!0),onClose:t[3]||(t[3]=c=>o.buttonOpen=!1)}),{default:Q(()=>[A("ul",Mce,[(p(!0),y(Ce,null,Ie(s.myMenu,(c,u)=>(p(),y("li",{key:c.type?`${c.type}_${c.label}`:c.label,ref_for:!0,ref:`item-${u}`,class:te(["apos-area-menu__item",{"apos-has-group":c.items}])},[c.items?(p(),y("dl",Tce,[A("dt",null,[c.items?(p(),y("button",{key:0,id:`${n.menuId}-trigger-${u}`,ref_for:!0,ref:"groupButton",for:c.label,class:"apos-area-menu__group-label",tabindex:"0","aria-controls":`${n.menuId}-group-${u}`,onFocus:t[0]||(t[0]=(...f)=>s.groupFocused&&s.groupFocused(...f)),onBlur:t[1]||(t[1]=(...f)=>s.groupBlurred&&s.groupBlurred(...f)),onClick:f=>s.toggleGroup(u),onKeydown:[Qe(Ue(f=>s.toggleGroup(u),["prevent"]),["space"]),Qe(Ue(f=>s.toggleGroup(u),["prevent"]),["enter"]),Qe(Ue(f=>s.switchGroup(u,1),["prevent"]),["arrow-down"]),Qe(Ue(f=>s.switchGroup(u,-1),["prevent"]),["arrow-up"]),Qe(Ue(f=>s.switchGroup(u,0),["prevent"]),["home"]),Qe(Ue(f=>s.switchGroup(u,null),["prevent"]),["end"])]},[A("span",null,$(c.label),1),D(r,{class:te(["apos-area-menu__group-chevron",{"apos-is-active":u===o.active}]),size:13},null,8,["class"])],40,Ece)):x("",!0)]),A("dd",Oce,[A("ul",{id:`${n.menuId}-group-${u}`,class:te(["apos-area-menu__items apos-area-menu__items--accordion",{"apos-is-active":o.active===u}]),"aria-labelledby":`${n.menuId}-trigger-${u}`,"aria-expanded":o.active===u?"true":"false"},[(p(!0),y(Ce,null,Ie(c.items,(f,m)=>(p(),y("li",{key:f.name,ref_for:!0,ref:`child-${n.index}-${m}`,class:"apos-area-menu__item"},[D(a,{item:f,tabbable:u===o.active,onClick:g=>s.action(f),onUp:g=>s.switchItem(`child-${u}-${m-1}`,-1),onDown:g=>s.switchItem(`child-${u}-${m+1}`,1)},null,8,["item","tabbable","onClick","onUp","onDown"])]))),128))],10,$ce)])])):(p(),R(a,{key:1,item:c,onClick:f=>s.action(c),onUp:f=>s.switchItem(`item-${u-1}`,-1),onDown:f=>s.switchItem(`item-${u+1}`,1)},null,8,["item","onClick","onUp","onDown"]))],2))),128))])]),_:1},16,["disabled","button","popover-modifiers","menu-id"])],2)}const Lce=I(xce,[["render",Ice],["__scopeId","data-v-1ba568bd"]]);function W2(e){const t=at(e);return kf(Y4(e.type),t),t}function kf(e,t){t._id=qt();for(const n of e)if(n.type==="array")for(const i of t[n.name]||[])kf(n.schema,i);else if(n.type==="object")kf(n.schema,t[n.name]||{});else if(n.type==="area"&&t[n.name]){t[n.name]._id=qt();for(const i of t[n.name].items||[]){const o=Y4(i.type);kf(o,i)}}}function Y4(e){return apos.modules[apos.area.widgetManagers[e]].schema}const Dce={name:"AposAreaEditor",mixins:[Ou],props:{docId:{type:String,default:null},docType:{type:String,default:null},id:{type:String,required:!0},field:{type:Object,default(){return{}}},fieldId:{type:String,required:!0},options:{type:Object,default(){return{}}},items:{type:Array,default(){return[]}},meta:{type:Object,default(){return{}}},followingValues:{type:Object,default(){return{}}},choices:{type:Array,required:!0},renderings:{type:Object,default(){return{}}},generation:{type:Number,required:!1,default(){return null}}},emits:["changed"],data(){return{addWidgetEditor:null,addWidgetOptions:null,addWidgetType:null,areaId:qt(),next:this.getValidItems(),hoveredWidget:null,hoveredNonForeignWidget:null,focusedWidget:null,contextMenuOptions:{menu:this.choices},edited:{},widgets:{}}},computed:{isEmptySingleton(){return this.next.length===0&&this.options.widgets&&Object.keys(this.options.widgets).length===1&&(this.options.max||this.field.max)&&(this.options.max===1||this.field.max===1)},icon(){let e=null;return this.isEmptySingleton&&this.contextMenuOptions.menu[0]&&this.contextMenuOptions.menu[0].icon&&(e=this.contextMenuOptions.menu[0].icon),e},moduleOptions(){return window.apos.area},types(){return Object.keys(this.widgets)},maxReached(){return this.options.max&&this.next.length>=this.options.max},foreign(){return!!(this.docId&&window.apos.adminBar.contextId!==this.docId)},focusedWidgetIndex(){return this.focusedWidget?this.next.findIndex(e=>e._id===window.apos.focusedWidget):-1}},watch:{next(){this.docId||this.$emit("changed",{items:this.next}),apos.bus.$emit("area-updated",{_id:this.id,items:this.next})},generation(){this.next=this.getValidItems()}},created(){if(this.options.groups)for(const e of Object.keys(this.options.groups))this.widgets={...this.options.groups[e].widgets,...this.widgets}},mounted(){this.bindEventListeners()},beforeUnmount(){this.unbindEventListeners()},methods:{bindEventListeners(){apos.bus.$on("area-updated",this.areaUpdatedHandler),apos.bus.$on("widget-hover",this.updateWidgetHovered),apos.bus.$on("widget-focus",this.updateWidgetFocused),apos.bus.$on("command-menu-area-copy-widget",this.handleCopy),apos.bus.$on("command-menu-area-cut-widget",this.handleCut),apos.bus.$on("command-menu-area-duplicate-widget",this.handleDuplicate),apos.bus.$on("command-menu-area-paste-widget",this.handlePaste),apos.bus.$on("command-menu-area-remove-widget",this.handleRemove),window.addEventListener("keydown",this.focusParentEvent)},unbindEventListeners(){apos.bus.$off("area-updated",this.areaUpdatedHandler),apos.bus.$off("widget-hover",this.updateWidgetHovered),apos.bus.$off("widget-focus",this.updateWidgetFocused),apos.bus.$off("command-menu-area-copy-widget",this.handleCopy),apos.bus.$off("command-menu-area-cut-widget",this.handleCut),apos.bus.$off("command-menu-area-duplicate-widget",this.handleDuplicate),apos.bus.$off("command-menu-area-paste-widget",this.handlePaste),apos.bus.$off("command-menu-area-remove-widget",this.handleRemove),window.removeEventListener("keydown",this.focusParentEvent)},isInsideContentEditable(){return document.activeElement.closest("[contenteditable]")!==null},isInsideFocusedArea(){return window.apos.focusedArea===this.areaId},resetFocusedArea(){window.apos.focusedArea===this.areaId&&this.setFocusedArea(null,null)},setFocusedArea(e,t){t&&t.stopPropagation(),window.apos.focusedArea=e},handleCopy(){!this.isInsideFocusedArea()||this.isInsideContentEditable()||this.focusedWidgetIndex===-1||this.copy(this.focusedWidgetIndex)},handleCut(){!this.isInsideFocusedArea()||this.isInsideContentEditable()||this.focusedWidgetIndex===-1||this.cut(this.focusedWidgetIndex)},handleDuplicate(){!this.isInsideFocusedArea()||this.isInsideContentEditable()||this.focusedWidgetIndex===-1||this.clone(this.focusedWidgetIndex)},handlePaste(){!this.isInsideFocusedArea()||this.isInsideContentEditable()||this.focusedWidgetIndex===-1&&this.next.length>0||this.paste(Math.max(this.focusedWidgetIndex,0))},handleRemove(){!this.isInsideFocusedArea()||this.isInsideContentEditable()||this.focusedWidgetIndex===-1||this.remove(this.focusedWidgetIndex)},areaUpdatedHandler(e){for(const t of this.next)if(this.patchSubobject(t,e))break},focusParentEvent(e){e.metaKey&&e.keyCode===8&&apos.bus.$emit("widget-focus-parent",this.focusedWidget)},updateWidgetHovered({_id:e,nonForeignId:t}){this.hoveredWidget=e,this.hoveredNonForeignWidget=t},updateWidgetFocused({_id:e,scrollIntoView:t=!1}){this.focusedWidget=e,window.apos.focusedWidget=e,this.focusedWidgetIndex!==-1&&(this.setFocusedArea(this.areaId,null),t&&this.$nextTick(()=>{const n=document.querySelector(`[data-apos-widget-id="${e}"]`);if(!n)return;const i=window.apos.adminBar.height,r=n.getBoundingClientRect().top-i-40;window.scrollBy({top:r,behavior:"smooth"}),n.focus({preventScroll:!0})}))},async up(e){this.docId===window.apos.adminBar.contextId&&apos.bus.$emit("context-edited",{$move:{[`@${this.id}.items`]:{$item:this.next[e]._id,$before:this.next[e-1]._id}}}),this.next=[...this.next.slice(0,e-1),this.next[e],this.next[e-1],...this.next.slice(e+1)]},async down(e){this.docId===window.apos.adminBar.contextId&&apos.bus.$emit("context-edited",{$move:{[`@${this.id}.items`]:{$item:this.next[e]._id,$after:this.next[e+1]._id}}}),this.next=[...this.next.slice(0,e),this.next[e+1],this.next[e],...this.next.slice(e+2)]},async remove(e,{autosave:t=!0}={}){t&&this.docId===window.apos.adminBar.contextId&&apos.bus.$emit("context-edited",{$pullAllById:{[`@${this.id}.items`]:[this.next[e]._id]}}),this.next=[...this.next.slice(0,e),...this.next.slice(e+1)];const n=this.next[e-1]||this.next[e];n&&apos.bus.$emit("widget-focus",{_id:n._id,scrollIntoView:!0})},async cut(e){apos.area.widgetClipboard.set(this.next[e]),await this.remove(e),apos.notify("Widget cut to clipboard",{type:"success",icon:"content-cut-icon",dismiss:!0})},async copy(e){apos.area.widgetClipboard.set(this.next[e]),apos.notify("Widget copied to clipboard",{type:"success",icon:"content-copy-icon",dismiss:!0})},async edit(e){var n;if(this.foreign)try{const i=await apos.http.get(`${window.apos.doc.action}/${this.docId}`,{busy:!0});if(i._url){const o=window.apos.adminBar.context.title;await apos.confirm({heading:this.$t("apostrophe:leavePageHeading",{oldTitle:o,newTitle:i.title}),description:this.$t("apostrophe:leavePageDescription",{oldTitle:o}),localize:!1})&&location.assign(i._url)}else apos.bus.$emit("admin-menu-click",{itemName:`${i.type}:editor`,props:{docId:i._id}});return}catch(i){if(i.status===404){apos.notify("apostrophe:notFound",{type:"error"});return}else throw i}const t=this.next[e];if(!this.widgetIsContextual(t.type)){const i=this.widgetEditorComponent(t.type);apos.area.activeEditor=this,apos.bus.$on("apos-refreshing",U2);const o=this.widgetPreview(t.type,e,!1),s=await apos.modal.execute(i,{modelValue:t,options:this.widgetOptionsByType(t.type),type:t.type,docId:this.docId,parentFollowingValues:this.followingValues,areaFieldId:this.fieldId,meta:(n=this.meta[t._id])==null?void 0:n.aposMeta,preview:o});if(apos.area.activeEditor=null,apos.bus.$off("apos-refreshing",U2),s)return this.update(s)}},clone(e){const t=W2(this.next[e]);this.insert({widget:t,index:e+1})},async paste(e){const t=apos.area.widgetClipboard.get();if(t){const n=t;this.contextMenuOptions.menu.find(o=>o.name===n.type)&&this.add({index:e,clipboard:t})}},async update(e,{autosave:t=!0,reverting:n=!1}={}){n||(e.aposPlaceholder=!1),e.metaType||(e.metaType="widget"),t&&this.docId===window.apos.adminBar.contextId&&apos.bus.$emit("context-edited",{[`@${e._id}`]:e}),this.next=this.next.map(i=>i._id===e._id?e:i),this.edited[e._id]=!0},async add({index:e,name:t,widget:n,clipboard:i}){if(i)return i=W2(i),this.insert({widget:i,index:e});if(n)return this.insert({widget:n,index:e});if(this.widgetIsContextual(t))return this.insert({widget:{type:t,...this.contextualWidgetDefaultData(t),aposPlaceholder:this.widgetHasPlaceholder(t)},index:e});if(!this.widgetHasInitialModal(t)){const a=this.newWidget(t);return this.insert({widget:{...a,aposPlaceholder:this.widgetHasPlaceholder(t)},index:e})}const o=this.widgetEditorComponent(t);apos.area.activeEditor=this;const s=this.widgetPreview(t,e,!0),r=await apos.modal.execute(o,{modelValue:null,options:this.widgetOptionsByType(t),type:t,docId:this.docId,areaFieldId:this.fieldId,parentFollowingValues:this.followingValues,preview:s});if(apos.area.activeEditor=null,r)return this.insert({widget:r,index:e})},widgetOptionsByType(e){var t;if(this.options.widgets)return this.options.widgets[e];if(this.options.expanded){for(const n of Object.values(this.options.groups||{}))if((t=n==null?void 0:n.widgets)!=null&&t[e])return n.widgets[e]}return null},contextualWidgetDefaultData(e){return this.moduleOptions.contextualWidgetDefaultData[e]},async insert({index:e,widget:t,autosave:n=!0}={}){if(t._id||(t._id=qt()),t.metaType||(t.metaType="widget"),n&&this.docId===window.apos.adminBar.contextId){const i={$each:[t]};e<this.next.length&&(i.$before=this.next[e]._id),apos.bus.$emit("context-edited",{$push:{[`@${this.id}.items`]:i}})}this.next=[...this.next.slice(0,e),t,...this.next.slice(e)],this.widgetIsContextual(t.type)&&this.edit(e),apos.bus.$emit("widget-focus",{_id:t._id,scrollIntoView:!0})},widgetIsContextual(e){return this.moduleOptions.widgetIsContextual[e]},widgetHasPlaceholder(e){return this.moduleOptions.widgetHasPlaceholder[e]},widgetHasInitialModal(e){return this.moduleOptions.widgetHasInitialModal[e]},widgetEditorComponent(e){return this.moduleOptions.components.widgetEditors[e]},widgetPreview(e,t,n){return this.moduleOptions.widgetPreview[e]?{area:this,index:t,create:n}:null},patchSubobject(e,t){let n;for(const[i,o]of Object.entries(e))if(i.charAt(0)!=="_"&&o&&typeof o=="object"){if(o._id===t._id)return e[i]=t,!0;if(n=this.patchSubobject(o,t),n)return n}},rendering(e){return this.edited[e._id]?null:this.renderings[e._id]},getValidItems(){return this.items.filter(e=>(window.apos.modules[`${e.type}-widget`]||console.warn(`The widget type ${e.type} exists in the content but is not configured.`),window.apos.modules[`${e.type}-widget`]))},newWidget(e){const t=apos.modules[apos.area.widgetManagers[e]].schema;return{...$c(t),type:e}}}};function U2(e){e.refresh=!1}const Rce=["data-apos-area"],Pce={class:"apos-areas-widgets-list"};function Hce(e,t,n,i,o,s){const r=E("AposButton"),a=E("AposAreaMenu"),l=E("AposAreaWidget"),c=xi("click-outside-element");return Ke((p(),y("div",{"data-apos-area":o.areaId,class:te(["apos-area",e.themeClass]),onClick:t[3]||(t[3]=u=>s.setFocusedArea(o.areaId,u))},[o.next.length===0&&!s.foreign?(p(),y("div",{key:0,class:"apos-empty-area",tabindex:"0",onPaste:t[1]||(t[1]=u=>s.paste(0)),onClick:t[2]||(t[2]=u=>s.setFocusedArea(o.areaId,u))},[s.isEmptySingleton?(p(),R(r,{key:0,label:{key:"apostrophe:addWidgetType",label:e.$t(o.contextMenuOptions.menu[0].label)},disabled:n.field&&n.field.readOnly,"disable-focus":!1,type:"primary",icon:s.icon,onClick:t[0]||(t[0]=u=>s.add({index:0,name:o.contextMenuOptions.menu[0].name}))},null,8,["label","disabled","icon"])):(p(),R(a,{key:1,"context-menu-options":o.contextMenuOptions,empty:!0,index:0,options:n.options,"field-id":n.fieldId,"max-reached":s.maxReached,disabled:n.field&&n.field.readOnly,"widget-options":n.options.widgets,tabbable:!0,open:!1,onAdd:s.add},null,8,["context-menu-options","options","field-id","max-reached","disabled","widget-options","onAdd"]))],32)):x("",!0),A("div",Pce,[(p(!0),y(Ce,null,Ie(o.next,(u,f)=>(p(),R(l,{key:u._id,"area-id":o.areaId,widget:u,meta:n.meta[u._id],generation:n.generation,i:f,options:n.options,next:o.next,"following-values":n.followingValues,"doc-id":n.docId,"context-menu-options":o.contextMenuOptions,"field-id":n.fieldId,field:n.field,disabled:n.field&&n.field.readOnly,"widget-hovered":o.hoveredWidget,"non-foreign-widget-hovered":o.hoveredNonForeignWidget,"widget-focused":o.focusedWidget,"max-reached":s.maxReached,rendering:s.rendering(u),onUp:s.up,onDown:s.down,onRemove:s.remove,onCut:s.cut,onCopy:s.copy,onEdit:s.edit,onClone:s.clone,onUpdate:s.update,onAdd:s.add,onPaste:s.paste},null,8,["area-id","widget","meta","generation","i","options","next","following-values","doc-id","context-menu-options","field-id","field","disabled","widget-hovered","non-foreign-widget-hovered","widget-focused","max-reached","rendering","onUp","onDown","onRemove","onCut","onCopy","onEdit","onClone","onUpdate","onAdd","onPaste"]))),128))])],10,Rce)),[[c,s.resetFocusedArea]])}const Vce=I(Dce,[["render",Hce],["__scopeId","data-v-b21685f4"]]),zce={name:"AposAreaExpandedMenu",props:{fieldId:{type:String,required:!0},options:{type:Object,required:!0},index:{type:Number,default:0}},emits:["expanded-menu-close","modal-result"],data(){return{modal:{active:!1,type:"slide",origin:"left",showModal:!1,width:"one-third"},groups:[]}},computed:{moduleOptions(){return window.apos.area}},async mounted(){if(this.modal.active=!0,this.options.groups)for(const e of Object.keys(this.options.groups)){this.isValidColumn(e.columns)||console.warn(`apos.expanded-menu: The specified number of columns for the group ${e.label} is not between the allowed range of 1-4.`);const t=this.createGroup(this.options.groups[e]);this.groups.push(t)}else if(this.options.widgets){this.isValidColumn(this.options.columns)||console.warn("apos.expanded-menu: The specified number of columns for the area is not between the allowed range of 1-4.");const e=this.createGroup(this.options);this.groups.push(e)}else console.warn("apos.expanded-menu: No groups or widgets defined. Please, either add a groups or widgets property to your area configuration.");this.groups=[...this.getClipboardGroups(),...this.getCreateWidgetOperationsGroups(),...this.groups]},methods:{isValidColumn(e){return e?+e>1&&+e<4:!0},getCreateWidgetOperationsGroups(){const e=J4(this.moduleOptions,this.options);return e.length===0?[]:[{type:"operations",operations:e}]},getClipboardGroups(){const e=apos.area.widgetClipboard.get();if(!e)return[];const n=this.groups.flatMap(o=>Object.values(o.widgets)).find(o=>o.name===e.type);return n?[{label:this.$t("apostrophe:areaExpandedMenuClipboard"),widgets:[{type:"clipboard",...n,label:{key:"apostrophe:pasteWidget",widget:this.$t(n.label)},clipboard:e}],columns:1}]:[]},createGroup(e){const t={columns:+e.columns||3,widgets:[],type:"widgets"};e.label&&(t.label=e.label);for(const n of Object.keys(e.widgets)){const i=`${n}-widget`,o=apos.modules[i];o?t.widgets.push(o):console.warn(`${i} is not available in this project, please verify its configuration`)}return t},getIcon(e){return e.previewIcon||e.icon},hasIcon(e){return!!(e.previewIcon||e.icon)},getTitle(e){return this.getIcon(e).replaceAll("-"," ")},close(){this.modal.showModal=!1},async add(e){const t={...e,index:this.index};this.$emit("modal-result",t),this.modal.showModal=!1},async operation(e){const t={...e.props,options:this.options,fieldId:this.fieldId},n=await apos.modal.execute(e.modal,t);if(n){const i={widget:n,index:this.index};this.$emit("modal-result",i),this.modal.showModal=!1}}}},Nce={key:0,class:"apos-widget-group__label"},Bce=["data-apos-focus-priority","onClick"],Fce={class:"apos-operation__label"},Wce={key:0,class:"apos-operation__help"},Uce=["data-apos-focus-priority","onClick"],jce={class:"apos-widget__preview"},qce=["src","alt"],Kce={class:"apos-widget__label"},Gce={key:0,class:"apos-widget__help"},Jce={key:1,class:"apos-expanded-divider"};function Yce(e,t,n,i,o,s){const r=E("plus-icon"),a=E("AposModalBody"),l=E("AposModal");return p(),R(l,{class:"apos-area-menu--expanded",modal:o.modal,"modal-title":"apostrophe:addContent",onInactive:t[0]||(t[0]=c=>o.modal.active=!1),onShowModal:t[1]||(t[1]=c=>o.modal.showModal=!0),onEsc:s.close},{main:Q(()=>[D(a,null,{bodyMain:Q(()=>[(p(!0),y(Ce,null,Ie(o.groups,(c,u)=>(p(),y("div",{key:u,class:"apos-widget-group"},[c.label?(p(),y("h2",Nce,$(e.$t(c.label)),1)):x("",!0),A("div",{class:te([`apos-widget-group--${c.columns}-column${c.columns>1?"s":""}`])},[c.type==="operations"?(p(!0),y(Ce,{key:0},Ie(c.operations,(f,m)=>(p(),y("button",{key:"operation-{{itemIndex}}","data-apos-focus-priority":m===0?!0:null,class:"apos-button apos-operation",onClick:g=>s.operation(f)},[A("p",Fce,$(e.$t(f.label)),1),f.description?(p(),y("p",Wce,$(e.$t(f.description)),1)):x("",!0)],8,Bce))),128)):(p(!0),y(Ce,{key:1},Ie(c.widgets,(f,m)=>(p(),y("button",{key:"widget-{{itemIndex}}","data-apos-focus-priority":m===0?!0:null,class:"apos-widget",onClick:g=>s.add(f)},[A("div",jce,[D(r,{size:20,class:"apos-icon--add"}),f.previewUrl?(p(),y("img",{key:0,src:f.previewUrl,alt:`${f.name} preview`,class:"apos-widget__preview-image"},null,8,qce)):s.hasIcon(f)?(p(),R(et(s.getIcon(f)),{key:1,title:s.getTitle(f),size:25,class:"apos-widget__preview--icon"},null,8,["title"])):x("",!0)]),A("p",Kce,$(e.$t(f.label)),1),f.description?(p(),y("p",Gce,$(e.$t(f.description)),1)):x("",!0)],8,Uce))),128))],2),c.type!=="widgets"?(p(),y("hr",Jce)):x("",!0)]))),128))]),_:1})]),_:1},8,["modal","onEsc"])}const Zce=I(zce,[["render",Yce],["__scopeId","data-v-d9bb37ce"]]),Xce={name:"AposAreaMenu",props:{disabled:{type:Boolean,default:!1},empty:{type:Boolean,default:!1},contextMenuOptions:{type:Object,required:!0},index:{type:Number,default:0},options:{type:Object,required:!0},maxReached:{type:Boolean},widgetOptions:{type:Object,default:function(){return{}}},fieldId:{type:String,required:!0},tabbable:{type:Boolean,default:!1},menuId:{type:String,default:null},open:{type:Boolean}},emits:["add"],computed:{buttonOptions(){return{label:"apostrophe:addContent",icon:"plus-icon",type:"primary",modifiers:this.empty?[]:["round","tiny"],iconSize:this.empty?20:11,disableFocus:!this.tabbable}},isDisabled(){let e=this.disabled;return this.maxReached&&(e=!0),e}},methods:{async openExpandedMenu(e){const t=await apos.modal.execute("AposAreaExpandedMenu",{fieldId:this.fieldId,options:this.options,index:e});t&&this.$emit("add",t)}}};function Qce(e,t,n,i,o,s){const r=E("AposButton"),a=E("AposAreaContextualMenu");return n.options.expanded?(p(),R(r,X({key:0},s.buttonOptions,{disabled:s.isDisabled,role:"button",onClick:t[0]||(t[0]=l=>s.openExpandedMenu(n.index))}),null,16,["disabled"])):(p(),R(a,{key:1,"button-options":s.buttonOptions,"context-menu-options":n.contextMenuOptions,empty:!0,index:n.index,"widget-options":n.options.widgets,options:n.options,"field-id":n.fieldId,"max-reached":n.maxReached,disabled:s.isDisabled,"menu-id":n.menuId,open:n.open,onAdd:t[1]||(t[1]=l=>{e.$emit("add",l)})},null,8,["button-options","context-menu-options","index","widget-options","options","field-id","max-reached","disabled","menu-id","open"]))}const ede=I(Xce,[["render",Qce],["__scopeId","data-v-32b7632d"]]),tde={props:{item:{required:!0,type:Object},tabbable:{type:Boolean,default:!0}},emits:["click","up","down"],computed:{tabindex(){return this.tabbable?0:-1}},methods:{click(){this.$emit("click")}}},nde=["data-action","tabindex"],ide={key:0,class:"apos-area-menu__item-sublabel"},ode={class:"apos-area-menu__item-content"};function sde(e,t,n,i,o,s){return p(),y("button",{class:te(["apos-area-menu__button",{"apos-area-menu__button--separated":n.item.type}]),"data-action":n.item.name,tabindex:String(s.tabindex),onClick:t[0]||(t[0]=(...r)=>s.click&&s.click(...r)),onKeydown:[t[1]||(t[1]=Qe(Ue(r=>e.$emit("down"),["prevent"]),["arrow-down"])),t[2]||(t[2]=Qe(Ue(r=>e.$emit("up"),["prevent"]),["arrow-up"]))]},[n.item.type==="clipboard"?(p(),y("div",ide," Clipboard ")):x("",!0),A("div",ode,[n.item.icon?(p(),R(et(n.item.icon),{key:0,size:15,class:"apos-area-menu__item-icon"})):x("",!0),Et(" "+$(e.$t(n.item.label)),1)])],42,nde)}const rde=I(tde,[["render",sde],["__scopeId","data-v-645a6d25"]]),ade={name:"AposIndicator",props:{icon:{type:String,required:!0},iconSize:{type:Number,default:15},tooltip:{type:[String,Object,Boolean],default:!1},title:{type:[String,Boolean],default:!1},iconColor:{type:String,default:"currentColor"},decorative:{type:Boolean,default:!0}},emits:["icon"],mounted(){this.$emit("icon",this.$refs.icon)}},lde=["aria-hidden","tabindex"];function cde(e,t,n,i,o,s){const r=xi("apos-tooltip");return Ke((p(),y("span",{ref:"icon",class:"apos-indicator","aria-hidden":n.decorative,tabindex:n.decorative?"-1":"0"},[(p(),R(et(n.icon),{size:n.iconSize,title:n.title?n.title:"",class:"apos-indicator__icon","fill-color":n.iconColor},null,8,["size","title","fill-color"]))],8,lde)),[[r,n.tooltip]])}const Z4=I(ade,[["render",cde],["__scopeId","data-v-5c356aed"]]),dde={name:"AposAreaWidget",components:{AposIndicator:Z4},props:{widgetHovered:{type:String,default:null},nonForeignWidgetHovered:{type:String,default:null},widgetFocused:{type:String,default:null},docId:{type:String,required:!1,default(){return null}},i:{type:Number,required:!0},options:{type:Object,default(){return{}}},widget:{type:Object,default(){return{}}},meta:{type:Object,default(){return{}}},followingValues:{type:Object,default(){return{}}},next:{type:Array,required:!0},fieldId:{type:String,required:!0},contextMenuOptions:{type:Object,required:!0},maxReached:{type:Boolean},rendering:{type:Object,default(){return null}},disabled:{type:Boolean,default:!1},generation:{type:Number,required:!1,default(){return null}}},emits:["clone","up","down","remove","edit","cut","copy","update","add","changed","paste"],data(){return{mounted:!1,isSuppressed:!1,menuOpen:null,isSuppressingWidgetControls:!1,classes:{show:"apos-is-visible",open:"apos-is-open",focus:"apos-is-focused",highlight:"apos-is-highlighted",adjust:"apos-is-ui-adjusted",suppressWidgetControls:"apos-is-suppressing-widget-controls"},breadcrumbs:{$lastEl:null,list:[]},widgets:this.options.widgets||{}}},computed:{followingValuesWithParent(){return Object.entries(this.followingValues||{}).reduce((e,[t,n])=>(e[`<${t}`]=n,e),{})},bottomContextMenuOptions(){return{...this.contextMenuOptions,menuPlacement:"top"}},widgetIcon(){var t;const e=((t=this.contextMenuOptions.menu.filter(n=>n.name===this.widget.type)[0])==null?void 0:t.icon)||"shape-icon";return this.foreign?"earth-icon":e},widgetLabel(){const e=`${this.widget.type}-widget`,t=window.apos.modules[e];return t||console.warn(`No ${e} module found for widget type ${this.widget.type}`),t.label},widgetOptions(){return this.widgets[this.widget.type]},isContextual(){return this.moduleOptions.widgetIsContextual[this.widget.type]},moduleOptions(){return window.apos.area},isFocused(){if(this.isSuppressed)return!1;const e=this.widgetFocused===this.widget._id;return e&&document.addEventListener("click",this.unfocus),e},isHovered(){return this.widgetHovered===this.widget._id},isHighlighted(){const e=this.getParent();return e&&e.dataset.areaWidget===this.widgetFocused},nonForeignHovered(){return this.nonForeignWidgetHovered===this.widget._id},controlsClasses(){return{[this.classes.show]:this.isFocused,[this.classes.suppressWidgetControls]:this.isSuppressingWidgetControls}},containerClasses(){const e={[this.classes.highlight]:this.isHighlighted||this.isHovered,[this.classes.focus]:this.isFocused};return this.mounted&&(e[this.classes.adjust]=this.adjustUi()),e},labelsClasses(){return{[this.classes.show]:this.isHovered||this.isFocused}},addClasses(){return{[this.classes.show]:this.isHovered||this.isFocused,[`${this.classes.open}--menu-${this.menuOpen}`]:!!this.menuOpen}},foreign(){return!!(this.docId&&window.apos.adminBar.contextId!==this.docId)}},watch:{isFocused(e){e?this.$refs.wrapper.addEventListener("keydown",this.handleKeyboardUnfocus):(this.menuOpen=null,this.$refs.wrapper.removeEventListener("keydown",this.handleKeyboardUnfocus),this.isSuppressingWidgetControls=!1)}},created(){if(this.options.groups)for(const e of Object.keys(this.options.groups))this.widgets={...this.options.groups[e].widgets,...this.widgets}},mounted(){this.mounted=!0,apos.bus.$on("widget-focus-parent",this.focusParent),apos.bus.$on("context-menu-toggled",this.getFocusForMenu),this.breadcrumbs.$lastEl=this.$el,this.getBreadcrumbs(),this.widgetFocused&&apos.bus.$emit("widget-focus",{_id:this.widget._id})},unmounted(){apos.bus.$off("widget-focus-parent",this.focusParent)},methods:{getFocusForMenu({menuId:e,isOpen:t}){if((e===`${this.widget._id}-widget-menu-top`||e===`${this.widget._id}-widget-menu-bottom`)&&t){const n=e.split("-")[e.split("-").length-1];this.menuOpen=n,this.getFocus(null,this.widget._id)}else this.menuOpen=null},adjustUi(){const{height:e}=this.$refs.label.getBoundingClientRect(),{top:t}=this.$refs.widget.getBoundingClientRect(),n=window.apos.modules["@apostrophecms/admin-bar"].height;return t+window.scrollY-e<n},attachKeyboardFocusHandler(){var e;(e=this.$refs.wrapper)==null||e.addEventListener("keydown",this.handleKeyboardFocus)},removeKeyboardFocusHandler(){var e;(e=this.$refs.wrapper)==null||e.removeEventListener("keydown",this.handleKeyboardFocus)},focusParent(){if(this.isFocused){const e=this.getParent();e&&apos.bus.$emit("widget-focus",{_id:e.dataset.areaWidget})}},getFocus(e,t){e&&e.stopPropagation(),this.isSuppressed=!1,apos.bus.$emit("widget-focus",{_id:t})},mouseover(e){e&&e.stopPropagation();const t=this.foreign&&this.$el.closest('[data-apos-widget-foreign="0"]'),n=t&&t.getAttribute("data-apos-widget-id");apos.bus.$emit("widget-hover",{_id:this.widget._id,nonForeignId:this.foreign?n:null})},mouseleave(){this.isHovered&&apos.bus.$emit("widget-hover",{_id:null,nonForeignId:null})},unfocus(e){this.$el.contains(e.target)||(this.isSuppressed=!0,document.removeEventListener("click",this.unfocus),apos.bus.$emit("widget-focus",{_id:null}))},handleKeyboardFocus(e){(e.key==="Enter"||e.code==="Space")&&(e.preventDefault(),this.getFocus(e,this.widget._id),this.$refs.wrapper.removeEventListener("keydown",this.handleKeyboardFocus))},handleKeyboardUnfocus(e){e.key==="Escape"&&(this.getFocus(e,null),document.activeElement.blur(),this.$refs.wrapper.focus())},getParent(){return this.mounted&&this.$el.parentNode?apos.util.closest(this.$el.parentNode,"[data-area-widget]"):!1},getBreadcrumbs(){if(this.breadcrumbs.$lastEl){const e=apos.util.closest(this.breadcrumbs.$lastEl.parentNode,"[data-area-widget]");e?(this.breadcrumbs.list.unshift({id:e.dataset.areaWidget,label:e.dataset.areaLabel}),this.breadcrumbs.$lastEl=e,this.getBreadcrumbs()):this.breadcrumbs.$lastEl=null}},widgetComponent(e){return this.moduleOptions.components.widgets[e]},widgetEditorComponent(e){return this.moduleOptions.components.widgetEditors[e]}}},ude=["data-area-widget","data-area-label","data-apos-widget-foreign","data-apos-widget-id"],hde={class:"apos-area-widget__breadcrumb apos-area-widget__breadcrumb--widget-icon"},fde=["data-apos-widget-breadcrumb"],pde={class:"apos-area-widget__breadcrumb","data-apos-widget-breadcrumb":"0"};function mde(e,t,n,i,o,s){const r=E("AposIndicator"),a=E("AposButton"),l=E("AposAreaMenu"),c=E("AposWidgetControls");return p(),y("div",{ref:"widget",class:te(["apos-area-widget-wrapper",{"apos-area-widget-wrapper--foreign":s.foreign}]),"data-area-widget":n.widget._id,"data-area-label":s.widgetLabel,"data-apos-widget-foreign":s.foreign?1:0,"data-apos-widget-id":n.widget._id,tabindex:"0"},[A("div",{ref:"wrapper",class:te(["apos-area-widget-inner",s.containerClasses]),tabindex:"0",onMouseover:t[17]||(t[17]=u=>s.mouseover(u)),onMouseleave:t[18]||(t[18]=(...u)=>s.mouseleave&&s.mouseleave(...u)),onClick:t[19]||(t[19]=u=>{s.getFocus(u,n.widget._id)}),onFocus:t[20]||(t[20]=(...u)=>s.attachKeyboardFocusHandler&&s.attachKeyboardFocusHandler(...u)),onBlur:t[21]||(t[21]=(...u)=>s.removeKeyboardFocusHandler&&s.removeKeyboardFocusHandler(...u))},[A("div",{ref:"label",class:te(["apos-area-widget-controls apos-area-widget__label",s.labelsClasses])},[A("ol",{class:"apos-area-widget__breadcrumbs",onClick:t[2]||(t[2]=u=>o.isSuppressingWidgetControls=!1)},[A("li",hde,[D(r,{icon:s.widgetIcon,"icon-size":13},null,8,["icon"])]),(p(!0),y(Ce,null,Ie(o.breadcrumbs.list,(u,f)=>(p(),y("li",{key:u.id,class:"apos-area-widget__breadcrumb","data-apos-widget-breadcrumb":o.breadcrumbs.list.length-f},[D(a,{type:"quiet",label:u.label,icon:"chevron-right-icon","icon-size":9,modifiers:["icon-right","no-motion"],"disable-focus":!(s.isHovered||s.isFocused),onClick:m=>s.getFocus(m,u.id)},null,8,["label","disable-focus","onClick"])],8,fde))),128)),A("li",pde,[D(a,{type:"quiet",label:s.foreign?{key:"apostrophe:editWidgetType",label:e.$t(s.widgetLabel)}:s.widgetLabel,tooltip:!s.isContextual&&"apostrophe:editWidgetForeignTooltip","icon-size":11,modifiers:["no-motion"],"disable-focus":!(s.isHovered||s.isFocused),onClick:t[0]||(t[0]=u=>s.foreign?e.$emit("edit",n.i):null),onDblclick:t[1]||(t[1]=u=>!s.foreign&&!s.isContextual?e.$emit("edit",n.i):null)},null,8,["label","tooltip","disable-focus"])])])],2),A("div",{class:te(["apos-area-widget-controls apos-area-widget-controls--add--top apos-area-widget-controls--add",s.addClasses])},[s.foreign?x("",!0):(p(),R(l,{key:0,"max-reached":n.maxReached,"context-menu-options":n.contextMenuOptions,index:n.i,"widget-options":o.widgets,options:n.options,"field-id":n.fieldId,disabled:n.disabled,tabbable:s.isHovered||s.isFocused,"menu-id":`${n.widget._id}-widget-menu-top`,class:te({[o.classes.open]:o.menuOpen==="top"}),open:o.menuOpen==="top",onAdd:t[3]||(t[3]=u=>{e.$emit("add",u)})},null,8,["max-reached","context-menu-options","index","widget-options","options","field-id","disabled","tabbable","menu-id","class","open"]))],2),A("div",{class:te(["apos-area-widget-guard",{"apos-is-disabled":s.isFocused}])},null,2),A("div",{class:te(["apos-area-widget-controls apos-area-widget-controls--modify",s.controlsClasses])},[s.foreign?x("",!0):(p(),R(c,{key:0,first:n.i===0,last:n.i===n.next.length-1,options:{contextual:s.isContextual},disabled:n.disabled,"max-reached":n.maxReached,tabbable:s.isFocused,"model-value":n.widget,"widget-options":s.widgetOptions,onUp:t[4]||(t[4]=u=>{e.$emit("up",n.i)}),onRemove:t[5]||(t[5]=u=>{e.$emit("remove",n.i)}),onEdit:t[6]||(t[6]=u=>{e.$emit("edit",n.i)}),onCut:t[7]||(t[7]=u=>{e.$emit("cut",n.i)}),onCopy:t[8]||(t[8]=u=>{e.$emit("copy",n.i)}),onClone:t[9]||(t[9]=u=>{e.$emit("clone",n.i)}),onDown:t[10]||(t[10]=u=>{e.$emit("down",n.i)}),onUpdate:t[11]||(t[11]=u=>e.$emit("update",u))},null,8,["first","last","options","disabled","max-reached","tabbable","model-value","widget-options"]))],2),s.isContextual&&!s.foreign?(p(),R(et(s.widgetEditorComponent(n.widget.type)),{key:n.generation,options:s.widgetOptions,type:n.widget.type,"model-value":n.widget,meta:n.meta,"doc-id":n.docId,focused:s.isFocused,onUpdate:t[12]||(t[12]=u=>e.$emit("update",u)),onSuppressWidgetControls:t[13]||(t[13]=u=>o.isSuppressingWidgetControls=!0)},null,40,["options","type","model-value","meta","doc-id","focused"])):(p(),R(et(s.widgetComponent(n.widget.type)),{id:n.widget._id,key:`${n.generation}-preview`,options:s.widgetOptions,type:n.widget.type,"area-field-id":n.fieldId,"following-values":s.followingValuesWithParent,"model-value":n.widget,value:n.widget,meta:n.meta,foreign:s.foreign,"doc-id":n.docId,rendering:n.rendering,onEdit:t[14]||(t[14]=u=>{e.$emit("edit",n.i)}),onUpdate:t[15]||(t[15]=u=>{e.$emit("update",u)})},null,40,["id","options","type","area-field-id","following-values","model-value","value","meta","foreign","doc-id","rendering"])),A("div",{class:te(["apos-area-widget-controls apos-area-widget-controls--add apos-area-widget-controls--add--bottom",s.addClasses])},[s.foreign?x("",!0):(p(),R(l,{key:0,"max-reached":n.maxReached,"context-menu-options":s.bottomContextMenuOptions,index:n.i+1,"widget-options":o.widgets,options:n.options,"field-id":n.fieldId,disabled:n.disabled,tabbable:s.isHovered||s.isFocused,"menu-id":`${n.widget._id}-widget-menu-bottom`,class:te({[o.classes.open]:o.menuOpen==="bottom"}),open:o.menuOpen==="bottom",onAdd:t[16]||(t[16]=u=>e.$emit("add",u))},null,8,["max-reached","context-menu-options","index","widget-options","options","field-id","disabled","tabbable","menu-id","class","open"]))],2)],34)],10,ude)}const gde=I(dde,[["render",mde],["__scopeId","data-v-ac291bbf"]]),bde={props:{modelValue:{type:Object,required:!0},first:{type:Boolean,required:!0},last:{type:Boolean,required:!0},options:{type:Object,default(){return{}}},disabled:{type:Boolean,default:!1},maxReached:{type:Boolean,default:!1},tabbable:{type:Boolean,default:!1},widgetOptions:{type:Object,required:!0}},emits:["remove","edit","cut","copy","clone","up","down","update"],computed:{widgetDefaultControl(){return{iconOnly:!0,icon:"plus-icon",type:"group",modifiers:["small","inline"],role:"menuitem",class:"apos-area-modify-controls__button",iconSize:16,disableFocus:!this.tabbable}},widgetPrimaryControls(){const e=[];return e.push({...this.widgetDefaultControl,label:"apostrophe:nudgeUp",icon:"arrow-up-icon",disabled:this.first||this.disabled,tooltip:{content:this.first||this.disabled?null:"apostrophe:nudgeUp",placement:"left"},action:"up"}),e.push({...this.widgetDefaultControl,label:"apostrophe:nudgeDown",icon:"arrow-down-icon",disabled:this.last||this.disabled,tooltip:{content:this.last||this.disabled?null:"apostrophe:nudgeDown",placement:"left"},action:"down"}),this.options.contextual||e.push({...this.widgetDefaultControl,label:"apostrophe:edit",icon:"pencil-icon",disabled:this.disabled,tooltip:{content:"apostrophe:editWidget",placement:"left"},action:"edit"}),e.push(...this.widgetPrimaryOperations.map(t=>({...this.widgetDefaultControl,...t,disabled:this.disabled,tooltip:{content:t.label,placement:"left"}}))),e},widgetSecondaryControls(){const e=[];return e.push({label:"apostrophe:cut",icon:"content-cut-icon",action:"cut"}),e.push({label:"apostrophe:copy",icon:"content-copy-icon",action:"copy"}),e.push({label:"apostrophe:duplicate",icon:"content-duplicate-icon",action:"clone",modifiers:[...this.disabled||this.maxReached?["disabled"]:[]]}),this.widgetSecondaryOperations.length&&e.push({separator:!0}),e.push(...this.widgetSecondaryOperations),e},widgetRemoveControl(){return{...this.widgetDefaultControl,label:"apostrophe:remove",icon:"trash-can-outline-icon",disabled:this.disabled,tooltip:{content:"apostrophe:delete",placement:"left"},action:"remove"}},widgetPrimaryOperations(){return this.getOperations({secondaryLevel:!1})},widgetSecondaryOperations(){return this.getOperations({secondaryLevel:!0})}},methods:{getOperations({secondaryLevel:e}){const t=apos.modules[apos.area.widgetManagers[this.modelValue.type]],{widgetOperations:n=[]}=t||{};return n.filter(i=>i.if&&!cc(this.modelValue,i.if)?!1:e?i.secondaryLevel:!i.secondaryLevel).map(i=>({action:i.action||i.name,...i}))},async handleClick({action:e,modal:t,ignoreResult:n=!1}){var i;if(t){const o=await apos.modal.execute(t,{widget:this.modelValue,widgetSchema:(i=apos.modules[apos.area.widgetManagers[this.modelValue.type]])==null?void 0:i.schema,widgetOptions:this.widgetOptions});o&&!n&&this.$emit("update",o)}else e&&this.$emit(e)}}},yde={class:"apos-area-modify-controls"};function vde(e,t,n,i,o,s){const r=E("AposButton"),a=E("AposContextMenu"),l=E("AposButtonGroup");return p(),y("div",yde,[D(l,{modifiers:["vertical"]},{default:Q(()=>[(p(!0),y(Ce,null,Ie(s.widgetPrimaryControls,c=>(p(),R(r,X({key:c.action,ref_for:!0},c,{onClick:u=>s.handleClick(c)}),null,16,["onClick"]))),128)),D(a,{class:"apos-admin-bar_context-button",menu:s.widgetSecondaryControls,disabled:n.disabled||s.widgetSecondaryControls.length===0,"menu-placement":"left",identifier:"secondary-controls","has-tip":!1,button:{label:"apostrophe:moreOptions",icon:"dots-horizontal-icon",iconOnly:!0,type:"subtle",modifiers:["small","no-motion"]},onItemClicked:s.handleClick},null,8,["menu","disabled","onItemClicked"]),D(r,X(s.widgetRemoveControl,{onClick:t[0]||(t[0]=c=>s.handleClick({action:"remove"}))}),null,16)]),_:1})])}const wde=I(bde,[["render",vde],["__scopeId","data-v-2dbbe3a0"]]),X4={docId:String,type:String,areaFieldId:String,modelValue:Object,mode:{type:String,default:"draft"},meta:{type:Object,default(){return{}}},areaField:Object,followingValues:Object,options:Object,rendering:{type:Object,default(){return null}}};function _de(e){const t=Ve("..."),n=Je(()=>apos.modules[apos.area.widgetManagers[e.type]]);return{rendered:t,renderContent:i,getClasses:()=>Q4({modelValue:e.modelValue,moduleOptions:n})};async function i(){const o=await ex(e);Object.hasOwn(o,"data")&&(t.value=o.data),o.error||wo(()=>{tx(e.modelValue.aposLivePreview)})}}function Q4(e,t){const n=Zt(t),i=Zt(e),{placeholderClass:o}=n;return o?{[o]:i.aposPlaceholder===!0}:{}}async function ex(e){apos.bus.$emit("widget-rendering");const{aposLivePreview:t,...n}=e.modelValue,i={_docId:e.docId,widget:n,areaFieldId:e.areaFieldId,type:e.type};try{if(e.rendering&&ol.isEqual(e.rendering.parameters,i))return{data:e.rendering.html};const o=await apos.http.post(`${apos.area.action}/render-widget?aposEdit=1&aposMode=${e.mode}`,{busy:!t,body:{...i,livePreview:t}});return o!=="aposLivePreviewSchemaNotYetValid"?{data:o}:{}}catch(o){return console.error("Unable to render widget. Possibly the schema has been changed and the existing widget does not pass validation.",o),{data:"<p>Unable to render this widget.</p>",error:!0}}}function tx(e){apos.bus.$emit("widget-rendered",{edit:!e})}const Cde={props:X4,data(){return{rendered:"..."}},watch:{modelValue:{handler(){this.renderContent()}}},computed:{moduleOptions(){return apos.modules[apos.area.widgetManagers[this.type]]}},mounted(){this.renderContent()},methods:{getClasses(){return Q4(this.modelValue,this.moduleOptions)},async renderContent(){const e=await ex(this.$props);Object.hasOwn(e,"data")&&(this.rendered=e.data),e.error||this.$nextTick(()=>{tx(this.modelValue.aposLivePreview)})}}},Ade={name:"AposWidget",mixins:[Cde]},kde=["innerHTML"];function Sde(e,t,n,i,o,s){return p(),y("div",{class:te(e.getClasses()),innerHTML:e.rendered},null,10,kde)}const xde=I(Ade,[["render",Sde]]),Mde={name:"AposWidgetEditor",mixins:[ks,lr,a0,r0],props:{type:{required:!0,type:String},breadcrumbs:{type:Array,default:function(){return[]}},options:{required:!0,type:Object},modelValue:{required:!1,type:Object,default(){return{}}},meta:{type:Object,default(){return{}}},focused:{type:Boolean,default:!1},parentFollowingValues:{type:Object,default:null},preview:{required:!1,type:Object,default:null},areaFieldId:{type:String,default:null}},emits:["modal-result"],data(){var t;const e=window.apos.modules[apos.area.widgetManagers[this.type]];return{id:this.modelValue&&this.modelValue._id,original:null,docFields:{data:{},hasErrors:!1},fieldErrors:{},modal:{active:!1,type:"slide",width:e.width,origin:Tde((t=this.preview)==null?void 0:t.area,e),showModal:!1},triggerValidation:!1,lastPreview:null}},computed:{moduleOptions(){return window.apos.modules[apos.area.widgetManagers[this.type]]},typeLabel(){return this.moduleOptions.label},editLabel(){return this.moduleOptions.editLabel?this.moduleOptions.editLabel:{key:"apostrophe:editType",type:this.$t(this.typeLabel)}},saveLabel(){return this.moduleOptions.saveLabel?this.moduleOptions.saveLabel:{key:"apostrophe:saveType",type:this.$t(this.typeLabel)}},schema(){return(this.moduleOptions.schema||[]).filter(e=>apos.schema.components.fields[e.type])},isModified(){return ko(this.schema,this.original,this.docFields.data)}},async mounted(){this.modal.active=!0,await this.evaluateExternalConditions(),this.evaluateConditions(),apos.area.widgetOptions=[at(this.options),...apos.area.widgetOptions]},unmounted(){var e,t;(t=(e=this.areaDebounceUpdate).cancel)==null||t.call(e),apos.area.widgetOptions=apos.area.widgetOptions.slice(1)},created(){const e=this.getDefault();this.modelValue?(this.original=at(this.modelValue),this.docFields.data={...e,...this.modelValue}):(this.original=at(e),this.docFields.data=e),this.id||(this.newId=qt()),this.areaDebounceUpdate=this.preview?na(t=>{var n;return this.lastPreview=t,(n=this.preview)==null?void 0:n.area.update(this.getPreviewWidgetObject(),{autosave:!1}).catch(i=>{i.name!=="debounce.canceled"&&console.error("Error updating preview",i)})},250):()=>{},this.initPreview()},methods:{updateDocFields(e){this.updateFieldErrors(e.fieldState),this.docFields.data={...this.docFields.data,...e.data},this.evaluateConditions(),this.updatePreview()},initPreview(){this.preview&&(this.preview.create?this.preview.area.insert({index:this.preview.index,widget:this.getPreviewWidgetObject(),autosave:!1}):this.previewSnapshot=this.getWidgetObject())},updatePreview(){if(!this.preview)return;const e=Date.now();!this.lastPreview||e-this.lastPreview>250?this.areaDebounceUpdate.skipDelay(e):this.areaDebounceUpdate(e)},removePreview(){this.preview&&(this.preview.create?this.preview.area.remove(this.getPreviewWidgetIndex(),{autosave:!1}):this.saving||this.preview.area.update(this.previewSnapshot,{autosave:!1,reverting:!0}))},async save(){this.triggerValidation=!0,this.$nextTick(async()=>{if(this.errorCount>0){this.triggerValidation=!1,await apos.notify("apostrophe:resolveErrorsBeforeSaving",{type:"warning",icon:"alert-circle-icon",dismiss:!0}),this.focusNextError();return}else try{await this.serverValidate()}catch(t){this.triggerValidation=!1,await this.handleSaveError(t,{fallback:"A validation error occurred while saving the widget."});return}const e=this.getWidgetObject();this.saving=!0,this.$emit("modal-result",e),this.modal.showModal=!1})},async serverValidate(){await apos.http.post(`${apos.area.action}/validate-widget`,{busy:!0,qs:{aposEdit:"1",aposMode:"draft"},body:{widget:this.docFields.data,areaFieldId:this.areaFieldId,type:this.type}})},getWidgetObject(e={}){const t=at(this.docFields.data);return t._id=this.id||this.newId,t.type=this.type,{...t,...e}},getPreviewWidgetObject(){return this.previewWidgetId||(this.preview.create?this.previewWidgetId=qt():this.previewWidgetId=this.id),{...this.getWidgetObject({_id:this.previewWidgetId}),aposLivePreview:!0}},getPreviewWidgetIndex(){return this.preview.area.next.findIndex(e=>e._id===this.previewWidgetId)},getDefault(){return $c(this.schema)},getAposSchema(e){return this.$refs[e.group.name][0]}}};function Tde(e,{isExplicitOrigin:t,origin:n}){if(!e||t)return n;const i=e.$el.getBoundingClientRect();return(i.right-i.left)/2+i.left>=window.innerWidth*.55?"left":"right"}const Ede={class:"apos-widget-editor__body"};function Ode(e,t,n,i,o,s){const r=E("AposModalBreadcrumbs"),a=E("AposWidgetModalTabs"),l=E("AposSchema"),c=E("AposModalBody"),u=E("AposButton"),f=E("AposModal");return p(),R(f,{class:"apos-widget-editor",modal:o.modal,"modal-title":s.editLabel,onInactive:t[0]||(t[0]=m=>o.modal.active=!1),onShowModal:t[1]||(t[1]=m=>o.modal.showModal=!0),onEsc:e.confirmAndCancel,onNoModal:s.removePreview},{breadcrumbs:Q(()=>[n.breadcrumbs&&n.breadcrumbs.length?(p(),R(r,{key:0,items:n.breadcrumbs},null,8,["items"])):x("",!0),e.tabs.length&&e.tabs[0].name!=="ungrouped"?(p(),R(a,{key:e.tabKey,current:e.currentTab,tabs:e.tabs,orientation:"horizontal",errors:o.fieldErrors,onSelectTab:e.switchPane},null,8,["current","tabs","errors","onSelectTab"])):x("",!0)]),main:Q(()=>[D(c,null,{bodyMain:Q(()=>[A("div",Ede,[(p(!0),y(Ce,null,Ie(e.tabs,m=>Ke((p(),R(l,{key:m.name,ref_for:!0,ref:m.name,"data-apos-test":`schema:${m.name}`,"trigger-validation":o.triggerValidation,"current-fields":e.groups[m.name].fields,schema:e.groups[m.name].schema,"model-value":o.docFields,meta:n.meta,"following-values":e.followingValues(),"conditional-fields":e.conditionalFields,"onUpdate:modelValue":s.updateDocFields,onValidate:e.triggerValidate},null,8,["data-apos-test","trigger-validation","current-fields","schema","model-value","meta","following-values","conditional-fields","onUpdate:modelValue","onValidate"])),[[on,m.name===e.currentTab]])),128))])]),_:1})]),footer:Q(()=>[D(u,{type:"default",label:"apostrophe:cancel",onClick:e.confirmAndCancel},null,8,["onClick"]),D(u,{type:"primary",label:s.saveLabel,disabled:e.errorCount>0,onClick:s.save},null,8,["label","disabled","onClick"])]),_:1},8,["modal","modal-title","onEsc","onNoModal"])}const $de=I(Mde,[["render",Ode]]),Ide={name:"AposImageControlDialog",mixins:[lr],props:{editor:{type:Object,required:!0},hasSelection:{type:Boolean,default:!1}},emits:["before-commands","close"],data(){var i,o;const e=at(apos.modules["@apostrophecms/rich-text-widget"]),t=((i=e.linkSchema.find(s=>s.name==="linkTo"))==null?void 0:i.choices)||[],n=e.linkSchema.filter(s=>!s.extensions||s.extensions.includes("Image")).map(s=>{var r;return s.htmlAttribute&&(s.htmlTag="a",s.if={$or:t.map(a=>({linkTo:a.value})).concat(((r=s.if)==null?void 0:r.$or)||[])}),s});return t.unshift({label:this.$t("apostrophe:none"),value:"none"}),{moduleOptions:e,generation:1,triggerValidation:!1,docFields:{data:{}},formModifiers:["micro"],originalSchema:[{name:"_image",type:"relationship",label:apos.image.label,withType:"@apostrophecms/image",required:!0,max:1,browse:!0},...e.imageStyles?[{name:"style",label:this.$t("apostrophe:style"),type:"select",choices:e.imageStyles,def:(o=e.imageStyles)==null?void 0:o[0].value,required:!0}]:[],{name:"caption",label:this.$t("apostrophe:caption"),type:"string",def:""},...n]}},computed:{attributes(){return this.editor.getAttributes("image")},lastSelectionTime(){return this.editor.view.input.lastSelectionTime},schema(){return this.originalSchema},schemaHtmlAttributes(){return this.schema.filter(e=>!!e.htmlAttribute)}},watch:{"attributes.imageId":{handler(e,t){e!==t&&this.close()}},lastSelectionTime(e,t){e!==t&&(this.populateFields(),this.evaluateConditions())}},async mounted(){this.populateFields(),await this.evaluateExternalConditions(),this.evaluateConditions(),window.addEventListener("keydown",this.keyboardHandler)},beforeUnmount(){window.removeEventListener("keydown",this.keyboardHandler)},methods:{close(){this.$emit("close")},save(){this.triggerValidation=!0,this.$nextTick(()=>{var n;if(this.docFields.hasErrors)return;const e=(n=this.docFields.data[`_${this.docFields.data.linkTo}`])==null?void 0:n[0];e&&this.docFields.data.linkTo!=="_url"&&(this.docFields.data.href=`#apostrophe-permalink-${e.aposDocId}`);const t=this.docFields.data._image[0];this.docFields.data.imageId=t&&t.aposDocId,this.docFields.data.alt=t&&t.alt,this.$emit("before-commands"),this.editor.commands.setImage(this.getTipTapAttributes()),this.close()})},getTipTapAttributes(){var i,o,s,r,a;const e=(i=this.docFields.data._image)==null?void 0:i[0],t={imageId:this.docFields.data.imageId,caption:this.docFields.data.caption,style:this.docFields.data.style,...this.schemaHtmlAttributes.reduce((l,c)=>{const u=this.docFields.data[c.name];return c.type==="checkboxes"&&!(u!=null&&u[0])?l:c.type==="boolean"?(l[c.htmlAttribute]=u===!0?"":null,l):(l[c.htmlAttribute]=Array.isArray(u)?u[0]:u,l)},{})};e&&(t.alt=e.alt);const n=this.schemaHtmlAttributes.find(l=>l.htmlAttribute==="rel");if((o=this.docFields.data.target)!=null&&o.includes("_blank")&&this.docFields.data.linkTo==="_url"){let l="noopener noreferrer";n&&(l+=` ${this.docFields.data[n.htmlAttribute]||""}`),l=new Set(l.trim().split(" ").filter(Boolean)),t.rel=[...l].join(" ")}else t.rel=n&&this.docFields.data[n.htmlAttribute]||null;switch(this.docFields.data.linkTo){case"none":{t.href=null,t.title=null,this.schemaHtmlAttributes.forEach(l=>{l.htmlAttribute&&l.htmlTag==="a"&&(t[l.htmlAttribute]=null)});break}case"_url":{t.href=this.docFields.data.href,t.title=this.docFields.data.hrefTitle||this.docFields.data.caption,t.target=((s=this.docFields.data.target)==null?void 0:s[0])||null;break}default:{const l=(r=this.docFields.data[`_${this.docFields.data.linkTo}`])==null?void 0:r[0];t.title=this.docFields.data.title||(l==null?void 0:l.title),t.target=((a=this.docFields.data.target)==null?void 0:a[0])||null,l&&(t.href=`#apostrophe-permalink-${l.aposDocId}`)}}return t},keyboardHandler(e){var t;e.key==="Escape"&&this.close(),e.key==="Enter"&&(((t=this.docFields.data._image)!=null&&t.length||e.metaKey)&&(this.save(),this.close()),e.preventDefault())},async populateFields(){var e,t,n;try{const i=this.attributes;this.docFields.data={},this.schema.forEach(a=>{if(a.htmlAttribute&&a.type==="checkboxes"){this.docFields.data[a.name]=i[a.htmlAttribute]?[i[a.htmlAttribute]]:[];return}if(a.htmlAttribute&&a.type==="boolean"){this.docFields.data[a.name]=i[a.htmlAttribute]===null?null:i[a.htmlAttribute]==="";return}if(a.htmlAttribute){this.docFields.data[a.name]=i[a.htmlAttribute]||"";return}this.docFields.data[a.name]=i[a.name]||""});const o=(t=(e=this.moduleOptions.imageStyles)==null?void 0:e[0])==null?void 0:t.value;if(o&&!this.docFields.data.style&&(this.docFields.data.style=o),i.imageId)try{const a=await apos.http.get(`/api/v1/@apostrophecms/image/${i.imageId}`,{busy:!0});this.docFields.data._image=[a]}catch(a){if(a.status===404)this.docFields._image=[];else throw a}const s=(n=i.href)==null?void 0:n.match(/^#apostrophe-permalink-(.*)$/);let r;if(!s)this.docFields.data.linkTo=i.href?"_url":"none";else try{r=await apos.http.get(`/api/v1/@apostrophecms/doc/${s[1]}`,{busy:!0,draft:!0}),this.docFields.data.linkTo=r.slug.startsWith("/")?"@apostrophecms/any-page-type":r.type,this.docFields.data[`_${this.docFields.data.linkTo}`]=[r]}catch(a){if(a.status===404)this.docFields.data[`_${this.docFields.data.linkTo}`]=[];else throw a}switch(this.docFields.data.linkTo){case"none":{this.docFields.data.title="",this.docFields.data.hrefTitle="",this.docFields.data.href="";break}case"_url":{this.docFields.data.hrefTitle=i.title,this.docFields.data.title="";break}default:this.docFields.data.title=r!=null&&r.title&&i.title===(r==null?void 0:r.title)?"":i.title,this.docFields.data.hrefTitle="",this.docFields.data.href=""}}finally{this.generation++,this.evaluateConditions()}}}},Lde={class:"apos-image-control__footer"};function Dde(e,t,n,i,o,s){const r=E("AposSchema"),a=E("AposButton");return p(),y("div",{class:te(["apos-popover apos-image-control__dialog",{"apos-has-selection":n.hasSelection}])},[(p(),R(r,{key:s.lastSelectionTime,modelValue:o.docFields,"onUpdate:modelValue":[t[0]||(t[0]=l=>o.docFields=l),t[1]||(t[1]=l=>e.evaluateConditions())],schema:s.schema,"trigger-validation":o.triggerValidation,modifiers:o.formModifiers,generation:o.generation,"following-values":e.followingValues(),"conditional-fields":e.conditionalFields},null,8,["modelValue","schema","trigger-validation","modifiers","generation","following-values","conditional-fields"])),A("footer",Lde,[D(a,{type:"default",label:"apostrophe:cancel",modifiers:["small"],onClick:s.close},null,8,["onClick"]),D(a,{type:"primary",label:"apostrophe:save",modifiers:["small"],disabled:o.docFields.hasErrors,onClick:s.save},null,8,["disabled","onClick"])])],2)}const Rde=I(Ide,[["render",Dde],["__scopeId","data-v-4032a1c7"]]);function Kn(e){this.content=e}Kn.prototype={constructor:Kn,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return t==-1?void 0:this.content[t+1]},update:function(e,t,n){var i=n&&n!=e?this.remove(n):this,o=i.find(e),s=i.content.slice();return o==-1?s.push(n||e,t):(s[o+1]=t,n&&(s[o]=n)),new Kn(s)},remove:function(e){var t=this.find(e);if(t==-1)return this;var n=this.content.slice();return n.splice(t,2),new Kn(n)},addToStart:function(e,t){return new Kn([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new Kn(n)},addBefore:function(e,t,n){var i=this.remove(t),o=i.content.slice(),s=i.find(e);return o.splice(s==-1?o.length:s,0,t,n),new Kn(o)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return e=Kn.from(e),e.size?new Kn(e.content.concat(this.subtract(e).content)):this},append:function(e){return e=Kn.from(e),e.size?new Kn(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=Kn.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},toObject:function(){var e={};return this.forEach(function(t,n){e[t]=n}),e},get size(){return this.content.length>>1}};Kn.from=function(e){if(e instanceof Kn)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new Kn(t)};function nx(e,t,n){for(let i=0;;i++){if(i==e.childCount||i==t.childCount)return e.childCount==t.childCount?null:n;let o=e.child(i),s=t.child(i);if(o==s){n+=o.nodeSize;continue}if(!o.sameMarkup(s))return n;if(o.isText&&o.text!=s.text){for(let r=0;o.text[r]==s.text[r];r++)n++;return n}if(o.content.size||s.content.size){let r=nx(o.content,s.content,n+1);if(r!=null)return r}n+=o.nodeSize}}function ix(e,t,n,i){for(let o=e.childCount,s=t.childCount;;){if(o==0||s==0)return o==s?null:{a:n,b:i};let r=e.child(--o),a=t.child(--s),l=r.nodeSize;if(r==a){n-=l,i-=l;continue}if(!r.sameMarkup(a))return{a:n,b:i};if(r.isText&&r.text!=a.text){let c=0,u=Math.min(r.text.length,a.text.length);for(;c<u&&r.text[r.text.length-c-1]==a.text[a.text.length-c-1];)c++,n--,i--;return{a:n,b:i}}if(r.content.size||a.content.size){let c=ix(r.content,a.content,n-1,i-1);if(c)return c}n-=l,i-=l}}class be{constructor(t,n){if(this.content=t,this.size=n||0,n==null)for(let i=0;i<t.length;i++)this.size+=t[i].nodeSize}nodesBetween(t,n,i,o=0,s){for(let r=0,a=0;a<n;r++){let l=this.content[r],c=a+l.nodeSize;if(c>t&&i(l,o+a,s||null,r)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,t-u),Math.min(l.content.size,n-u),i,o+u)}a=c}}descendants(t){this.nodesBetween(0,this.size,t)}textBetween(t,n,i,o){let s="",r=!0;return this.nodesBetween(t,n,(a,l)=>{let c=a.isText?a.text.slice(Math.max(t,l)-l,n-l):a.isLeaf?o?typeof o=="function"?o(a):o:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&i&&(r?r=!1:s+=i),s+=c},0),s}append(t){if(!t.size)return this;if(!this.size)return t;let n=this.lastChild,i=t.firstChild,o=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(i)&&(o[o.length-1]=n.withText(n.text+i.text),s=1);s<t.content.length;s++)o.push(t.content[s]);return new be(o,this.size+t.size)}cut(t,n=this.size){if(t==0&&n==this.size)return this;let i=[],o=0;if(n>t)for(let s=0,r=0;r<n;s++){let a=this.content[s],l=r+a.nodeSize;l>t&&((r<t||l>n)&&(a.isText?a=a.cut(Math.max(0,t-r),Math.min(a.text.length,n-r)):a=a.cut(Math.max(0,t-r-1),Math.min(a.content.size,n-r-1))),i.push(a),o+=a.nodeSize),r=l}return new be(i,o)}cutByIndex(t,n){return t==n?be.empty:t==0&&n==this.content.length?this:new be(this.content.slice(t,n))}replaceChild(t,n){let i=this.content[t];if(i==n)return this;let o=this.content.slice(),s=this.size+n.nodeSize-i.nodeSize;return o[t]=n,new be(o,s)}addToStart(t){return new be([t].concat(this.content),this.size+t.nodeSize)}addToEnd(t){return new be(this.content.concat(t),this.size+t.nodeSize)}eq(t){if(this.content.length!=t.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(t.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(t){let n=this.content[t];if(!n)throw new RangeError("Index "+t+" out of range for "+this);return n}maybeChild(t){return this.content[t]||null}forEach(t){for(let n=0,i=0;n<this.content.length;n++){let o=this.content[n];t(o,i,n),i+=o.nodeSize}}findDiffStart(t,n=0){return nx(this,t,n)}findDiffEnd(t,n=this.size,i=t.size){return ix(this,t,n,i)}findIndex(t,n=-1){if(t==0)return Bh(0,t);if(t==this.size)return Bh(this.content.length,t);if(t>this.size||t<0)throw new RangeError(`Position ${t} outside of fragment (${this})`);for(let i=0,o=0;;i++){let s=this.child(i),r=o+s.nodeSize;if(r>=t)return r==t||n>0?Bh(i+1,r):Bh(i,o);o=r}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(t=>t.toJSON()):null}static fromJSON(t,n){if(!n)return be.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new be(n.map(t.nodeFromJSON))}static fromArray(t){if(!t.length)return be.empty;let n,i=0;for(let o=0;o<t.length;o++){let s=t[o];i+=s.nodeSize,o&&s.isText&&t[o-1].sameMarkup(s)?(n||(n=t.slice(0,o)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new be(n||t,i)}static from(t){if(!t)return be.empty;if(t instanceof be)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new be([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}be.empty=new be([],0);const g1={index:0,offset:0};function Bh(e,t){return g1.index=e,g1.offset=t,g1}function Xf(e,t){if(e===t)return!0;if(!(e&&typeof e=="object")||!(t&&typeof t=="object"))return!1;let n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++)if(!Xf(e[i],t[i]))return!1}else{for(let i in e)if(!(i in t)||!Xf(e[i],t[i]))return!1;for(let i in t)if(!(i in e))return!1}return!0}let jt=class $b{constructor(t,n){this.type=t,this.attrs=n}addToSet(t){let n,i=!1;for(let o=0;o<t.length;o++){let s=t[o];if(this.eq(s))return t;if(this.type.excludes(s.type))n||(n=t.slice(0,o));else{if(s.type.excludes(this.type))return t;!i&&s.type.rank>this.type.rank&&(n||(n=t.slice(0,o)),n.push(this),i=!0),n&&n.push(s)}}return n||(n=t.slice()),i||n.push(this),n}removeFromSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return t.slice(0,n).concat(t.slice(n+1));return t}isInSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return!0;return!1}eq(t){return this==t||this.type==t.type&&Xf(this.attrs,t.attrs)}toJSON(){let t={type:this.type.name};for(let n in this.attrs){t.attrs=this.attrs;break}return t}static fromJSON(t,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let i=t.marks[n.type];if(!i)throw new RangeError(`There is no mark type ${n.type} in this schema`);let o=i.create(n.attrs);return i.checkAttrs(o.attrs),o}static sameSet(t,n){if(t==n)return!0;if(t.length!=n.length)return!1;for(let i=0;i<t.length;i++)if(!t[i].eq(n[i]))return!1;return!0}static setFrom(t){if(!t||Array.isArray(t)&&t.length==0)return $b.none;if(t instanceof $b)return[t];let n=t.slice();return n.sort((i,o)=>i.type.rank-o.type.rank),n}};jt.none=[];class Qf extends Error{}class Oe{constructor(t,n,i){this.content=t,this.openStart=n,this.openEnd=i}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(t,n){let i=sx(this.content,t+this.openStart,n);return i&&new Oe(i,this.openStart,this.openEnd)}removeBetween(t,n){return new Oe(ox(this.content,t+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}static fromJSON(t,n){if(!n)return Oe.empty;let i=n.openStart||0,o=n.openEnd||0;if(typeof i!="number"||typeof o!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Oe(be.fromJSON(t,n.content),i,o)}static maxOpen(t,n=!0){let i=0,o=0;for(let s=t.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)i++;for(let s=t.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)o++;return new Oe(t,i,o)}}Oe.empty=new Oe(be.empty,0,0);function ox(e,t,n){let{index:i,offset:o}=e.findIndex(t),s=e.maybeChild(i),{index:r,offset:a}=e.findIndex(n);if(o==t||s.isText){if(a!=n&&!e.child(r).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(i!=r)throw new RangeError("Removing non-flat range");return e.replaceChild(i,s.copy(ox(s.content,t-o-1,n-o-1)))}function sx(e,t,n,i){let{index:o,offset:s}=e.findIndex(t),r=e.maybeChild(o);if(s==t||r.isText)return e.cut(0,t).append(n).append(e.cut(t));let a=sx(r.content,t-s-1,n);return a&&e.replaceChild(o,r.copy(a))}function Pde(e,t,n){if(n.openStart>e.depth)throw new Qf("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new Qf("Inconsistent open depths");return rx(e,t,n,0)}function rx(e,t,n,i){let o=e.index(i),s=e.node(i);if(o==t.index(i)&&i<e.depth-n.openStart){let r=rx(e,t,n,i+1);return s.copy(s.content.replaceChild(o,r))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&e.depth==i&&t.depth==i){let r=e.parent,a=r.content;return Ja(r,a.cut(0,e.parentOffset).append(n.content).append(a.cut(t.parentOffset)))}else{let{start:r,end:a}=Hde(n,e);return Ja(s,lx(e,r,a,t,i))}else return Ja(s,ep(e,t,i))}function ax(e,t){if(!t.type.compatibleContent(e.type))throw new Qf("Cannot join "+t.type.name+" onto "+e.type.name)}function Ib(e,t,n){let i=e.node(n);return ax(i,t.node(n)),i}function Ga(e,t){let n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function Ld(e,t,n,i){let o=(t||e).node(n),s=0,r=t?t.index(n):o.childCount;e&&(s=e.index(n),e.depth>n?s++:e.textOffset&&(Ga(e.nodeAfter,i),s++));for(let a=s;a<r;a++)Ga(o.child(a),i);t&&t.depth==n&&t.textOffset&&Ga(t.nodeBefore,i)}function Ja(e,t){return e.type.checkContent(t),e.copy(t)}function lx(e,t,n,i,o){let s=e.depth>o&&Ib(e,t,o+1),r=i.depth>o&&Ib(n,i,o+1),a=[];return Ld(null,e,o,a),s&&r&&t.index(o)==n.index(o)?(ax(s,r),Ga(Ja(s,lx(e,t,n,i,o+1)),a)):(s&&Ga(Ja(s,ep(e,t,o+1)),a),Ld(t,n,o,a),r&&Ga(Ja(r,ep(n,i,o+1)),a)),Ld(i,null,o,a),new be(a)}function ep(e,t,n){let i=[];if(Ld(null,e,n,i),e.depth>n){let o=Ib(e,t,n+1);Ga(Ja(o,ep(e,t,n+1)),i)}return Ld(t,null,n,i),new be(i)}function Hde(e,t){let n=t.depth-e.openStart,o=t.node(n).copy(e.content);for(let s=n-1;s>=0;s--)o=t.node(s).copy(be.from(o));return{start:o.resolveNoCache(e.openStart+n),end:o.resolveNoCache(o.content.size-e.openEnd-n)}}class iu{constructor(t,n,i){this.pos=t,this.path=n,this.parentOffset=i,this.depth=n.length/3-1}resolveDepth(t){return t==null?this.depth:t<0?this.depth+t:t}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(t){return this.path[this.resolveDepth(t)*3]}index(t){return this.path[this.resolveDepth(t)*3+1]}indexAfter(t){return t=this.resolveDepth(t),this.index(t)+(t==this.depth&&!this.textOffset?0:1)}start(t){return t=this.resolveDepth(t),t==0?0:this.path[t*3-1]+1}end(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}before(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]}after(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]+this.path[t*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let t=this.parent,n=this.index(this.depth);if(n==t.childCount)return null;let i=this.pos-this.path[this.path.length-1],o=t.child(n);return i?t.child(n).cut(i):o}get nodeBefore(){let t=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(t).cut(0,n):t==0?null:this.parent.child(t-1)}posAtIndex(t,n){n=this.resolveDepth(n);let i=this.path[n*3],o=n==0?0:this.path[n*3-1]+1;for(let s=0;s<t;s++)o+=i.child(s).nodeSize;return o}marks(){let t=this.parent,n=this.index();if(t.content.size==0)return jt.none;if(this.textOffset)return t.child(n).marks;let i=t.maybeChild(n-1),o=t.maybeChild(n);if(!i){let a=i;i=o,o=a}let s=i.marks;for(var r=0;r<s.length;r++)s[r].type.spec.inclusive===!1&&(!o||!s[r].isInSet(o.marks))&&(s=s[r--].removeFromSet(s));return s}marksAcross(t){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let i=n.marks,o=t.parent.maybeChild(t.index());for(var s=0;s<i.length;s++)i[s].type.spec.inclusive===!1&&(!o||!i[s].isInSet(o.marks))&&(i=i[s--].removeFromSet(i));return i}sharedDepth(t){for(let n=this.depth;n>0;n--)if(this.start(n)<=t&&this.end(n)>=t)return n;return 0}blockRange(t=this,n){if(t.pos<this.pos)return t.blockRange(this);for(let i=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);i>=0;i--)if(t.pos<=this.end(i)&&(!n||n(this.node(i))))return new tp(this,t,i);return null}sameParent(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}max(t){return t.pos>this.pos?t:this}min(t){return t.pos<this.pos?t:this}toString(){let t="";for(let n=1;n<=this.depth;n++)t+=(t?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return t+":"+this.parentOffset}static resolve(t,n){if(!(n>=0&&n<=t.content.size))throw new RangeError("Position "+n+" out of range");let i=[],o=0,s=n;for(let r=t;;){let{index:a,offset:l}=r.content.findIndex(s),c=s-l;if(i.push(r,a,o+l),!c||(r=r.child(a),r.isText))break;s=c-1,o+=l+1}return new iu(n,i,s)}static resolveCached(t,n){let i=j2.get(t);if(i)for(let s=0;s<i.elts.length;s++){let r=i.elts[s];if(r.pos==n)return r}else j2.set(t,i=new Vde);let o=i.elts[i.i]=iu.resolve(t,n);return i.i=(i.i+1)%zde,o}}class Vde{constructor(){this.elts=[],this.i=0}}const zde=12,j2=new WeakMap;class tp{constructor(t,n,i){this.$from=t,this.$to=n,this.depth=i}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const Nde=Object.create(null);let Gr=class Lb{constructor(t,n,i,o=jt.none){this.type=t,this.attrs=n,this.marks=o,this.content=i||be.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(t){return this.content.child(t)}maybeChild(t){return this.content.maybeChild(t)}forEach(t){this.content.forEach(t)}nodesBetween(t,n,i,o=0){this.content.nodesBetween(t,n,i,o,this)}descendants(t){this.nodesBetween(0,this.content.size,t)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(t,n,i,o){return this.content.textBetween(t,n,i,o)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}sameMarkup(t){return this.hasMarkup(t.type,t.attrs,t.marks)}hasMarkup(t,n,i){return this.type==t&&Xf(this.attrs,n||t.defaultAttrs||Nde)&&jt.sameSet(this.marks,i||jt.none)}copy(t=null){return t==this.content?this:new Lb(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new Lb(this.type,this.attrs,this.content,t)}cut(t,n=this.content.size){return t==0&&n==this.content.size?this:this.copy(this.content.cut(t,n))}slice(t,n=this.content.size,i=!1){if(t==n)return Oe.empty;let o=this.resolve(t),s=this.resolve(n),r=i?0:o.sharedDepth(n),a=o.start(r),c=o.node(r).content.cut(o.pos-a,s.pos-a);return new Oe(c,o.depth-r,s.depth-r)}replace(t,n,i){return Pde(this.resolve(t),this.resolve(n),i)}nodeAt(t){for(let n=this;;){let{index:i,offset:o}=n.content.findIndex(t);if(n=n.maybeChild(i),!n)return null;if(o==t||n.isText)return n;t-=o+1}}childAfter(t){let{index:n,offset:i}=this.content.findIndex(t);return{node:this.content.maybeChild(n),index:n,offset:i}}childBefore(t){if(t==0)return{node:null,index:0,offset:0};let{index:n,offset:i}=this.content.findIndex(t);if(i<t)return{node:this.content.child(n),index:n,offset:i};let o=this.content.child(n-1);return{node:o,index:n-1,offset:i-o.nodeSize}}resolve(t){return iu.resolveCached(this,t)}resolveNoCache(t){return iu.resolve(this,t)}rangeHasMark(t,n,i){let o=!1;return n>t&&this.nodesBetween(t,n,s=>(i.isInSet(s.marks)&&(o=!0),!o)),o}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),cx(this.marks,t)}contentMatchAt(t){let n=this.type.contentMatch.matchFragment(this.content,0,t);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(t,n,i=be.empty,o=0,s=i.childCount){let r=this.contentMatchAt(t).matchFragment(i,o,s),a=r&&r.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=o;l<s;l++)if(!this.type.allowsMarks(i.child(l).marks))return!1;return!0}canReplaceWith(t,n,i,o){if(o&&!this.type.allowsMarks(o))return!1;let s=this.contentMatchAt(t).matchType(i),r=s&&s.matchFragment(this.content,n);return r?r.validEnd:!1}canAppend(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let t=jt.none;for(let n=0;n<this.marks.length;n++){let i=this.marks[n];i.type.checkAttrs(i.attrs),t=i.addToSet(t)}if(!jt.sameSet(t,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let t={type:this.type.name};for(let n in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map(n=>n.toJSON())),t}static fromJSON(t,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let i;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");i=n.marks.map(t.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return t.text(n.text,i)}let o=be.fromJSON(t,n.content),s=t.nodeType(n.type).create(n.attrs,o,i);return s.type.checkAttrs(s.attrs),s}};Gr.prototype.text=void 0;class np extends Gr{constructor(t,n,i,o){if(super(t,n,null,o),!i)throw new RangeError("Empty text nodes are not allowed");this.text=i}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):cx(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(t,n){return this.text.slice(t,n)}get nodeSize(){return this.text.length}mark(t){return t==this.marks?this:new np(this.type,this.attrs,this.text,t)}withText(t){return t==this.text?this:new np(this.type,this.attrs,t,this.marks)}cut(t=0,n=this.text.length){return t==0&&n==this.text.length?this:this.withText(this.text.slice(t,n))}eq(t){return this.sameMarkup(t)&&this.text==t.text}toJSON(){let t=super.toJSON();return t.text=this.text,t}}function cx(e,t){for(let n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}class sl{constructor(t){this.validEnd=t,this.next=[],this.wrapCache=[]}static parse(t,n){let i=new Bde(t,n);if(i.next==null)return sl.empty;let o=dx(i);i.next&&i.err("Unexpected trailing text");let s=Gde(Kde(o));return Jde(s,i),s}matchType(t){for(let n=0;n<this.next.length;n++)if(this.next[n].type==t)return this.next[n].next;return null}matchFragment(t,n=0,i=t.childCount){let o=this;for(let s=n;o&&s<i;s++)o=o.matchType(t.child(s).type);return o}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let t=0;t<this.next.length;t++){let{type:n}=this.next[t];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(t){for(let n=0;n<this.next.length;n++)for(let i=0;i<t.next.length;i++)if(this.next[n].type==t.next[i].type)return!0;return!1}fillBefore(t,n=!1,i=0){let o=[this];function s(r,a){let l=r.matchFragment(t,i);if(l&&(!n||l.validEnd))return be.from(a.map(c=>c.createAndFill()));for(let c=0;c<r.next.length;c++){let{type:u,next:f}=r.next[c];if(!(u.isText||u.hasRequiredAttrs())&&o.indexOf(f)==-1){o.push(f);let m=s(f,a.concat(u));if(m)return m}}return null}return s(this,[])}findWrapping(t){for(let i=0;i<this.wrapCache.length;i+=2)if(this.wrapCache[i]==t)return this.wrapCache[i+1];let n=this.computeWrapping(t);return this.wrapCache.push(t,n),n}computeWrapping(t){let n=Object.create(null),i=[{match:this,type:null,via:null}];for(;i.length;){let o=i.shift(),s=o.match;if(s.matchType(t)){let r=[];for(let a=o;a.type;a=a.via)r.push(a.type);return r.reverse()}for(let r=0;r<s.next.length;r++){let{type:a,next:l}=s.next[r];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!o.type||l.validEnd)&&(i.push({match:a.contentMatch,type:a,via:o}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(t){if(t>=this.next.length)throw new RangeError(`There's no ${t}th edge in this content match`);return this.next[t]}toString(){let t=[];function n(i){t.push(i);for(let o=0;o<i.next.length;o++)t.indexOf(i.next[o].next)==-1&&n(i.next[o].next)}return n(this),t.map((i,o)=>{let s=o+(i.validEnd?"*":" ")+" ";for(let r=0;r<i.next.length;r++)s+=(r?", ":"")+i.next[r].type.name+"->"+t.indexOf(i.next[r].next);return s}).join(`
`)}}sl.empty=new sl(!0);class Bde{constructor(t,n){this.string=t,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(t){return this.next==t&&(this.pos++||!0)}err(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}}function dx(e){let t=[];do t.push(Fde(e));while(e.eat("|"));return t.length==1?t[0]:{type:"choice",exprs:t}}function Fde(e){let t=[];do t.push(Wde(e));while(e.next&&e.next!=")"&&e.next!="|");return t.length==1?t[0]:{type:"seq",exprs:t}}function Wde(e){let t=qde(e);for(;;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else if(e.eat("{"))t=Ude(e,t);else break;return t}function q2(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function Ude(e,t){let n=q2(e),i=n;return e.eat(",")&&(e.next!="}"?i=q2(e):i=-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:i,expr:t}}function jde(e,t){let n=e.nodeTypes,i=n[t];if(i)return[i];let o=[];for(let s in n){let r=n[s];r.isInGroup(t)&&o.push(r)}return o.length==0&&e.err("No node type or group '"+t+"' found"),o}function qde(e){if(e.eat("(")){let t=dx(e);return e.eat(")")||e.err("Missing closing paren"),t}else if(/\W/.test(e.next))e.err("Unexpected token '"+e.next+"'");else{let t=jde(e,e.next).map(n=>(e.inline==null?e.inline=n.isInline:e.inline!=n.isInline&&e.err("Mixing inline and block content"),{type:"name",value:n}));return e.pos++,t.length==1?t[0]:{type:"choice",exprs:t}}}function Kde(e){let t=[[]];return o(s(e,0),n()),t;function n(){return t.push([])-1}function i(r,a,l){let c={term:l,to:a};return t[r].push(c),c}function o(r,a){r.forEach(l=>l.to=a)}function s(r,a){if(r.type=="choice")return r.exprs.reduce((l,c)=>l.concat(s(c,a)),[]);if(r.type=="seq")for(let l=0;;l++){let c=s(r.exprs[l],a);if(l==r.exprs.length-1)return c;o(c,a=n())}else if(r.type=="star"){let l=n();return i(a,l),o(s(r.expr,l),l),[i(l)]}else if(r.type=="plus"){let l=n();return o(s(r.expr,a),l),o(s(r.expr,l),l),[i(l)]}else{if(r.type=="opt")return[i(a)].concat(s(r.expr,a));if(r.type=="range"){let l=a;for(let c=0;c<r.min;c++){let u=n();o(s(r.expr,l),u),l=u}if(r.max==-1)o(s(r.expr,l),l);else for(let c=r.min;c<r.max;c++){let u=n();i(l,u),o(s(r.expr,l),u),l=u}return[i(l)]}else{if(r.type=="name")return[i(a,void 0,r.value)];throw new Error("Unknown expr type")}}}}function ux(e,t){return t-e}function K2(e,t){let n=[];return i(t),n.sort(ux);function i(o){let s=e[o];if(s.length==1&&!s[0].term)return i(s[0].to);n.push(o);for(let r=0;r<s.length;r++){let{term:a,to:l}=s[r];!a&&n.indexOf(l)==-1&&i(l)}}}function Gde(e){let t=Object.create(null);return n(K2(e,0));function n(i){let o=[];i.forEach(r=>{e[r].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let u=0;u<o.length;u++)o[u][0]==a&&(c=o[u][1]);K2(e,l).forEach(u=>{c||o.push([a,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let s=t[i.join(",")]=new sl(i.indexOf(e.length-1)>-1);for(let r=0;r<o.length;r++){let a=o[r][1].sort(ux);s.next.push({type:o[r][0],next:t[a.join(",")]||n(a)})}return s}}function Jde(e,t){for(let n=0,i=[e];n<i.length;n++){let o=i[n],s=!o.validEnd,r=[];for(let a=0;a<o.next.length;a++){let{type:l,next:c}=o.next[a];r.push(l.name),s&&!(l.isText||l.hasRequiredAttrs())&&(s=!1),i.indexOf(c)==-1&&i.push(c)}s&&t.err("Only non-generatable nodes ("+r.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function hx(e){let t=Object.create(null);for(let n in e){let i=e[n];if(!i.hasDefault)return null;t[n]=i.default}return t}function fx(e,t){let n=Object.create(null);for(let i in e){let o=t&&t[i];if(o===void 0){let s=e[i];if(s.hasDefault)o=s.default;else throw new RangeError("No value supplied for attribute "+i)}n[i]=o}return n}function px(e,t,n,i){for(let o in t)if(!(o in e))throw new RangeError(`Unsupported attribute ${o} for ${n} of type ${o}`);for(let o in e){let s=e[o];s.validate&&s.validate(t[o])}}function mx(e,t){let n=Object.create(null);if(t)for(let i in t)n[i]=new Zde(e,i,t[i]);return n}let G2=class gx{constructor(t,n,i){this.name=t,this.schema=n,this.spec=i,this.markSet=null,this.groups=i.group?i.group.split(" "):[],this.attrs=mx(t,i.attrs),this.defaultAttrs=hx(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(i.inline||t=="text"),this.isText=t=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==sl.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(t){return this.groups.indexOf(t)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1}compatibleContent(t){return this==t||this.contentMatch.compatible(t.contentMatch)}computeAttrs(t){return!t&&this.defaultAttrs?this.defaultAttrs:fx(this.attrs,t)}create(t=null,n,i){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Gr(this,this.computeAttrs(t),be.from(n),jt.setFrom(i))}createChecked(t=null,n,i){return n=be.from(n),this.checkContent(n),new Gr(this,this.computeAttrs(t),n,jt.setFrom(i))}createAndFill(t=null,n,i){if(t=this.computeAttrs(t),n=be.from(n),n.size){let r=this.contentMatch.fillBefore(n);if(!r)return null;n=r.append(n)}let o=this.contentMatch.matchFragment(n),s=o&&o.fillBefore(be.empty,!0);return s?new Gr(this,t,n.append(s),jt.setFrom(i)):null}validContent(t){let n=this.contentMatch.matchFragment(t);if(!n||!n.validEnd)return!1;for(let i=0;i<t.childCount;i++)if(!this.allowsMarks(t.child(i).marks))return!1;return!0}checkContent(t){if(!this.validContent(t))throw new RangeError(`Invalid content for node ${this.name}: ${t.toString().slice(0,50)}`)}checkAttrs(t){px(this.attrs,t,"node",this.name)}allowsMarkType(t){return this.markSet==null||this.markSet.indexOf(t)>-1}allowsMarks(t){if(this.markSet==null)return!0;for(let n=0;n<t.length;n++)if(!this.allowsMarkType(t[n].type))return!1;return!0}allowedMarks(t){if(this.markSet==null)return t;let n;for(let i=0;i<t.length;i++)this.allowsMarkType(t[i].type)?n&&n.push(t[i]):n||(n=t.slice(0,i));return n?n.length?n:jt.none:t}static compile(t,n){let i=Object.create(null);t.forEach((s,r)=>i[s]=new gx(s,n,r));let o=n.spec.topNode||"doc";if(!i[o])throw new RangeError("Schema is missing its top node type ('"+o+"')");if(!i.text)throw new RangeError("Every schema needs a 'text' type");for(let s in i.text.attrs)throw new RangeError("The text node type should not have attributes");return i}};function Yde(e,t,n){let i=n.split("|");return o=>{let s=o===null?"null":typeof o;if(i.indexOf(s)<0)throw new RangeError(`Expected value of type ${i} for attribute ${t} on type ${e}, got ${s}`)}}class Zde{constructor(t,n,i){this.hasDefault=Object.prototype.hasOwnProperty.call(i,"default"),this.default=i.default,this.validate=typeof i.validate=="string"?Yde(t,n,i.validate):i.validate}get isRequired(){return!this.hasDefault}}class hm{constructor(t,n,i,o){this.name=t,this.rank=n,this.schema=i,this.spec=o,this.attrs=mx(t,o.attrs),this.excluded=null;let s=hx(this.attrs);this.instance=s?new jt(this,s):null}create(t=null){return!t&&this.instance?this.instance:new jt(this,fx(this.attrs,t))}static compile(t,n){let i=Object.create(null),o=0;return t.forEach((s,r)=>i[s]=new hm(s,o++,n,r)),i}removeFromSet(t){for(var n=0;n<t.length;n++)t[n].type==this&&(t=t.slice(0,n).concat(t.slice(n+1)),n--);return t}isInSet(t){for(let n=0;n<t.length;n++)if(t[n].type==this)return t[n]}checkAttrs(t){px(this.attrs,t,"mark",this.name)}excludes(t){return this.excluded.indexOf(t)>-1}}class bx{constructor(t){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let o in t)n[o]=t[o];n.nodes=Kn.from(t.nodes),n.marks=Kn.from(t.marks||{}),this.nodes=G2.compile(this.spec.nodes,this),this.marks=hm.compile(this.spec.marks,this);let i=Object.create(null);for(let o in this.nodes){if(o in this.marks)throw new RangeError(o+" can not be both a node and a mark");let s=this.nodes[o],r=s.spec.content||"",a=s.spec.marks;if(s.contentMatch=i[r]||(i[r]=sl.parse(r,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=a=="_"?null:a?J2(this,a.split(" ")):a==""||!s.inlineContent?[]:null}for(let o in this.marks){let s=this.marks[o],r=s.spec.excludes;s.excluded=r==null?[s]:r==""?[]:J2(this,r.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(t,n=null,i,o){if(typeof t=="string")t=this.nodeType(t);else if(t instanceof G2){if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}else throw new RangeError("Invalid node type: "+t);return t.createChecked(n,i,o)}text(t,n){let i=this.nodes.text;return new np(i,i.defaultAttrs,t,jt.setFrom(n))}mark(t,n){return typeof t=="string"&&(t=this.marks[t]),t.create(n)}nodeFromJSON(t){return Gr.fromJSON(this,t)}markFromJSON(t){return jt.fromJSON(this,t)}nodeType(t){let n=this.nodes[t];if(!n)throw new RangeError("Unknown node type: "+t);return n}}function J2(e,t){let n=[];for(let i=0;i<t.length;i++){let o=t[i],s=e.marks[o],r=s;if(s)n.push(s);else for(let a in e.marks){let l=e.marks[a];(o=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(o)>-1)&&n.push(r=l)}if(!r)throw new SyntaxError("Unknown mark type: '"+t[i]+"'")}return n}function Xde(e){return e.tag!=null}function Qde(e){return e.style!=null}class Jr{constructor(t,n){this.schema=t,this.rules=n,this.tags=[],this.styles=[];let i=this.matchedStyles=[];n.forEach(o=>{if(Xde(o))this.tags.push(o);else if(Qde(o)){let s=/[^=]*/.exec(o.style)[0];i.indexOf(s)<0&&i.push(s),this.styles.push(o)}}),this.normalizeLists=!this.tags.some(o=>{if(!/^(ul|ol)\b/.test(o.tag)||!o.node)return!1;let s=t.nodes[o.node];return s.contentMatch.matchType(s)})}parse(t,n={}){let i=new Z2(this,n,!1);return i.addAll(t,jt.none,n.from,n.to),i.finish()}parseSlice(t,n={}){let i=new Z2(this,n,!0);return i.addAll(t,jt.none,n.from,n.to),Oe.maxOpen(i.finish())}matchTag(t,n,i){for(let o=i?this.tags.indexOf(i)+1:0;o<this.tags.length;o++){let s=this.tags[o];if(nue(t,s.tag)&&(s.namespace===void 0||t.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let r=s.getAttrs(t);if(r===!1)continue;s.attrs=r||void 0}return s}}}matchStyle(t,n,i,o){for(let s=o?this.styles.indexOf(o)+1:0;s<this.styles.length;s++){let r=this.styles[s],a=r.style;if(!(a.indexOf(t)!=0||r.context&&!i.matchesContext(r.context)||a.length>t.length&&(a.charCodeAt(t.length)!=61||a.slice(t.length+1)!=n))){if(r.getAttrs){let l=r.getAttrs(n);if(l===!1)continue;r.attrs=l||void 0}return r}}}static schemaRules(t){let n=[];function i(o){let s=o.priority==null?50:o.priority,r=0;for(;r<n.length;r++){let a=n[r];if((a.priority==null?50:a.priority)<s)break}n.splice(r,0,o)}for(let o in t.marks){let s=t.marks[o].spec.parseDOM;s&&s.forEach(r=>{i(r=X2(r)),r.mark||r.ignore||r.clearMark||(r.mark=o)})}for(let o in t.nodes){let s=t.nodes[o].spec.parseDOM;s&&s.forEach(r=>{i(r=X2(r)),r.node||r.ignore||r.mark||(r.node=o)})}return n}static fromSchema(t){return t.cached.domParser||(t.cached.domParser=new Jr(t,Jr.schemaRules(t)))}}const yx={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},eue={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},vx={ol:!0,ul:!0},ou=1,Db=2,Sf=4;function Y2(e,t,n){return t!=null?(t?ou:0)|(t==="full"?Db:0):e&&e.whitespace=="pre"?ou|Db:n&-5}class Fh{constructor(t,n,i,o,s,r){this.type=t,this.attrs=n,this.marks=i,this.solid=o,this.options=r,this.content=[],this.activeMarks=jt.none,this.match=s||(r&Sf?null:t.contentMatch)}findWrapping(t){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(be.from(t));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let i=this.type.contentMatch,o;return(o=i.findWrapping(t.type))?(this.match=i,o):null}}return this.match.findWrapping(t.type)}finish(t){if(!(this.options&ou)){let i=this.content[this.content.length-1],o;if(i&&i.isText&&(o=/[ \t\r\n\u000c]+$/.exec(i.text))){let s=i;i.text.length==o[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-o[0].length))}}let n=be.from(this.content);return!t&&this.match&&(n=n.append(this.match.fillBefore(be.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!yx.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}}class Z2{constructor(t,n,i){this.parser=t,this.options=n,this.isOpen=i,this.open=0,this.localPreserveWS=!1;let o=n.topNode,s,r=Y2(null,n.preserveWhitespace,0)|(i?Sf:0);o?s=new Fh(o.type,o.attrs,jt.none,!0,n.topMatch||o.type.contentMatch,r):i?s=new Fh(null,null,jt.none,!0,null,r):s=new Fh(t.schema.topNodeType,null,jt.none,!0,null,r),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(t,n){t.nodeType==3?this.addTextNode(t,n):t.nodeType==1&&this.addElement(t,n)}addTextNode(t,n){let i=t.nodeValue,o=this.top,s=o.options&Db?"full":this.localPreserveWS||(o.options&ou)>0;if(s==="full"||o.inlineContext(t)||/[^ \t\r\n\u000c]/.test(i)){if(s)s!=="full"?i=i.replace(/\r?\n|\r/g," "):i=i.replace(/\r\n?/g,`
`);else if(i=i.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(i)&&this.open==this.nodes.length-1){let r=o.content[o.content.length-1],a=t.previousSibling;(!r||a&&a.nodeName=="BR"||r.isText&&/[ \t\r\n\u000c]$/.test(r.text))&&(i=i.slice(1))}i&&this.insertNode(this.parser.schema.text(i),n),this.findInText(t)}else this.findInside(t)}addElement(t,n,i){let o=this.localPreserveWS,s=this.top;(t.tagName=="PRE"||/pre/.test(t.style&&t.style.whiteSpace))&&(this.localPreserveWS=!0);let r=t.nodeName.toLowerCase(),a;vx.hasOwnProperty(r)&&this.parser.normalizeLists&&tue(t);let l=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(a=this.parser.matchTag(t,this,i));e:if(l?l.ignore:eue.hasOwnProperty(r))this.findInside(t),this.ignoreFallback(t,n);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(t=l.skip);let c,u=this.needsBlock;if(yx.hasOwnProperty(r))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),c=!0,s.type||(this.needsBlock=!0);else if(!t.firstChild){this.leafFallback(t,n);break e}let f=l&&l.skip?n:this.readStyles(t,n);f&&this.addAll(t,f),c&&this.sync(s),this.needsBlock=u}else{let c=this.readStyles(t,n);c&&this.addElementByRule(t,l,c,l.consuming===!1?a:void 0)}this.localPreserveWS=o}leafFallback(t,n){t.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode(`
`),n)}ignoreFallback(t,n){t.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n)}readStyles(t,n){let i=t.style;if(i&&i.length)for(let o=0;o<this.parser.matchedStyles.length;o++){let s=this.parser.matchedStyles[o],r=i.getPropertyValue(s);if(r)for(let a=void 0;;){let l=this.parser.matchStyle(s,r,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?n=n.filter(c=>!l.clearMark(c)):n=n.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return n}addElementByRule(t,n,i,o){let s,r;if(n.node)if(r=this.parser.schema.nodes[n.node],r.isLeaf)this.insertNode(r.create(n.attrs),i)||this.leafFallback(t,i);else{let l=this.enter(r,n.attrs||null,i,n.preserveWhitespace);l&&(s=!0,i=l)}else{let l=this.parser.schema.marks[n.mark];i=i.concat(l.create(n.attrs))}let a=this.top;if(r&&r.isLeaf)this.findInside(t);else if(o)this.addElement(t,i,o);else if(n.getContent)this.findInside(t),n.getContent(t,this.parser.schema).forEach(l=>this.insertNode(l,i));else{let l=t;typeof n.contentElement=="string"?l=t.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(t):n.contentElement&&(l=n.contentElement),this.findAround(t,l,!0),this.addAll(l,i),this.findAround(t,l,!1)}s&&this.sync(a)&&this.open--}addAll(t,n,i,o){let s=i||0;for(let r=i?t.childNodes[i]:t.firstChild,a=o==null?null:t.childNodes[o];r!=a;r=r.nextSibling,++s)this.findAtPoint(t,s),this.addDOM(r,n);this.findAtPoint(t,s)}findPlace(t,n){let i,o;for(let s=this.open;s>=0;s--){let r=this.nodes[s],a=r.findWrapping(t);if(a&&(!i||i.length>a.length)&&(i=a,o=r,!a.length)||r.solid)break}if(!i)return null;this.sync(o);for(let s=0;s<i.length;s++)n=this.enterInner(i[s],null,n,!1);return n}insertNode(t,n){if(t.isInline&&this.needsBlock&&!this.top.type){let o=this.textblockFromContext();o&&(n=this.enterInner(o,null,n))}let i=this.findPlace(t,n);if(i){this.closeExtra();let o=this.top;o.match&&(o.match=o.match.matchType(t.type));let s=jt.none;for(let r of i.concat(t.marks))(o.type?o.type.allowsMarkType(r.type):Q2(r.type,t.type))&&(s=r.addToSet(s));return o.content.push(t.mark(s)),!0}return!1}enter(t,n,i,o){let s=this.findPlace(t.create(n),i);return s&&(s=this.enterInner(t,n,i,!0,o)),s}enterInner(t,n,i,o=!1,s){this.closeExtra();let r=this.top;r.match=r.match&&r.match.matchType(t);let a=Y2(t,s,r.options);r.options&Sf&&r.content.length==0&&(a|=Sf);let l=jt.none;return i=i.filter(c=>(r.type?r.type.allowsMarkType(c.type):Q2(c.type,t))?(l=c.addToSet(l),!1):!0),this.nodes.push(new Fh(t,n,l,o,null,a)),this.open++,i}closeExtra(t=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(t));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(t){for(let n=this.open;n>=0;n--){if(this.nodes[n]==t)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=ou)}return!1}get currentPos(){this.closeExtra();let t=0;for(let n=this.open;n>=0;n--){let i=this.nodes[n].content;for(let o=i.length-1;o>=0;o--)t+=i[o].nodeSize;n&&t++}return t}findAtPoint(t,n){if(this.find)for(let i=0;i<this.find.length;i++)this.find[i].node==t&&this.find[i].offset==n&&(this.find[i].pos=this.currentPos)}findInside(t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&t.nodeType==1&&t.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(t,n,i){if(t!=n&&this.find)for(let o=0;o<this.find.length;o++)this.find[o].pos==null&&t.nodeType==1&&t.contains(this.find[o].node)&&n.compareDocumentPosition(this.find[o].node)&(i?2:4)&&(this.find[o].pos=this.currentPos)}findInText(t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==t&&(this.find[n].pos=this.currentPos-(t.nodeValue.length-this.find[n].offset))}matchesContext(t){if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);let n=t.split("/"),i=this.options.context,o=!this.isOpen&&(!i||i.parent.type==this.nodes[0].type),s=-(i?i.depth+1:0)+(o?0:1),r=(a,l)=>{for(;a>=0;a--){let c=n[a];if(c==""){if(a==n.length-1||a==0)continue;for(;l>=s;l--)if(r(a-1,l))return!0;return!1}else{let u=l>0||l==0&&o?this.nodes[l].type:i&&l>=s?i.node(l-s).type:null;if(!u||u.name!=c&&!u.isInGroup(c))return!1;l--}}return!0};return r(n.length-1,this.open)}textblockFromContext(){let t=this.options.context;if(t)for(let n=t.depth;n>=0;n--){let i=t.node(n).contentMatchAt(t.indexAfter(n)).defaultType;if(i&&i.isTextblock&&i.defaultAttrs)return i}for(let n in this.parser.schema.nodes){let i=this.parser.schema.nodes[n];if(i.isTextblock&&i.defaultAttrs)return i}}}function tue(e){for(let t=e.firstChild,n=null;t;t=t.nextSibling){let i=t.nodeType==1?t.nodeName.toLowerCase():null;i&&vx.hasOwnProperty(i)&&n?(n.appendChild(t),t=n):i=="li"?n=t:i&&(n=null)}}function nue(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function X2(e){let t={};for(let n in e)t[n]=e[n];return t}function Q2(e,t){let n=t.schema.nodes;for(let i in n){let o=n[i];if(!o.allowsMarkType(e))continue;let s=[],r=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==t||s.indexOf(u)<0&&r(u))return!0}};if(r(o.contentMatch))return!0}}class gl{constructor(t,n){this.nodes=t,this.marks=n}serializeFragment(t,n={},i){i||(i=b1(n).createDocumentFragment());let o=i,s=[];return t.forEach(r=>{if(s.length||r.marks.length){let a=0,l=0;for(;a<s.length&&l<r.marks.length;){let c=r.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(s[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<s.length;)o=s.pop()[1];for(;l<r.marks.length;){let c=r.marks[l++],u=this.serializeMark(c,r.isInline,n);u&&(s.push([c,o]),o.appendChild(u.dom),o=u.contentDOM||u.dom)}}o.appendChild(this.serializeNodeInner(r,n))}),i}serializeNodeInner(t,n){let{dom:i,contentDOM:o}=xf(b1(n),this.nodes[t.type.name](t),null,t.attrs);if(o){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(t.content,n,o)}return i}serializeNode(t,n={}){let i=this.serializeNodeInner(t,n);for(let o=t.marks.length-1;o>=0;o--){let s=this.serializeMark(t.marks[o],t.isInline,n);s&&((s.contentDOM||s.dom).appendChild(i),i=s.dom)}return i}serializeMark(t,n,i={}){let o=this.marks[t.type.name];return o&&xf(b1(i),o(t,n),null,t.attrs)}static renderSpec(t,n,i=null,o){return xf(t,n,i,o)}static fromSchema(t){return t.cached.domSerializer||(t.cached.domSerializer=new gl(this.nodesFromSchema(t),this.marksFromSchema(t)))}static nodesFromSchema(t){let n=eC(t.nodes);return n.text||(n.text=i=>i.text),n}static marksFromSchema(t){return eC(t.marks)}}function eC(e){let t={};for(let n in e){let i=e[n].spec.toDOM;i&&(t[n]=i)}return t}function b1(e){return e.document||window.document}const tC=new WeakMap;function iue(e){let t=tC.get(e);return t===void 0&&tC.set(e,t=oue(e)),t}function oue(e){let t=null;function n(i){if(i&&typeof i=="object")if(Array.isArray(i))if(typeof i[0]=="string")t||(t=[]),t.push(i);else for(let o=0;o<i.length;o++)n(i[o]);else for(let o in i)n(i[o])}return n(e),t}function xf(e,t,n,i){if(typeof t=="string")return{dom:e.createTextNode(t)};if(t.nodeType!=null)return{dom:t};if(t.dom&&t.dom.nodeType!=null)return t;let o=t[0],s;if(typeof o!="string")throw new RangeError("Invalid array passed to renderSpec");if(i&&(s=iue(i))&&s.indexOf(t)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let r=o.indexOf(" ");r>0&&(n=o.slice(0,r),o=o.slice(r+1));let a,l=n?e.createElementNS(n,o):e.createElement(o),c=t[1],u=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){u=2;for(let f in c)if(c[f]!=null){let m=f.indexOf(" ");m>0?l.setAttributeNS(f.slice(0,m),f.slice(m+1),c[f]):l.setAttribute(f,c[f])}}for(let f=u;f<t.length;f++){let m=t[f];if(m===0){if(f<t.length-1||f>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:g,contentDOM:v}=xf(e,m,n,i);if(l.appendChild(g),v){if(a)throw new RangeError("Multiple content holes");a=v}}}return{dom:l,contentDOM:a}}const wx=65535,_x=Math.pow(2,16);function sue(e,t){return e+t*_x}function nC(e){return e&wx}function rue(e){return(e-(e&wx))/_x}const Cx=1,Ax=2,Mf=4,kx=8;class Rb{constructor(t,n,i){this.pos=t,this.delInfo=n,this.recover=i}get deleted(){return(this.delInfo&kx)>0}get deletedBefore(){return(this.delInfo&(Cx|Mf))>0}get deletedAfter(){return(this.delInfo&(Ax|Mf))>0}get deletedAcross(){return(this.delInfo&Mf)>0}}class Yi{constructor(t,n=!1){if(this.ranges=t,this.inverted=n,!t.length&&Yi.empty)return Yi.empty}recover(t){let n=0,i=nC(t);if(!this.inverted)for(let o=0;o<i;o++)n+=this.ranges[o*3+2]-this.ranges[o*3+1];return this.ranges[i*3]+n+rue(t)}mapResult(t,n=1){return this._map(t,n,!1)}map(t,n=1){return this._map(t,n,!0)}_map(t,n,i){let o=0,s=this.inverted?2:1,r=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?o:0);if(l>t)break;let c=this.ranges[a+s],u=this.ranges[a+r],f=l+c;if(t<=f){let m=c?t==l?-1:t==f?1:n:n,g=l+o+(m<0?0:u);if(i)return g;let v=t==(n<0?l:f)?null:sue(a/3,t-l),w=t==l?Ax:t==f?Cx:Mf;return(n<0?t!=l:t!=f)&&(w|=kx),new Rb(g,w,v)}o+=u-c}return i?t+o:new Rb(t+o,0,null)}touches(t,n){let i=0,o=nC(n),s=this.inverted?2:1,r=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>t)break;let c=this.ranges[a+s],u=l+c;if(t<=u&&a==o*3)return!0;i+=this.ranges[a+r]-c}return!1}forEach(t){let n=this.inverted?2:1,i=this.inverted?1:2;for(let o=0,s=0;o<this.ranges.length;o+=3){let r=this.ranges[o],a=r-(this.inverted?s:0),l=r+(this.inverted?0:s),c=this.ranges[o+n],u=this.ranges[o+i];t(a,a+c,l,l+u),s+=u-c}}invert(){return new Yi(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return t==0?Yi.empty:new Yi(t<0?[0,-t,0]:[0,0,t])}}Yi.empty=new Yi([]);class su{constructor(t,n,i=0,o=t?t.length:0){this.mirror=n,this.from=i,this.to=o,this._maps=t||[],this.ownData=!(t||n)}get maps(){return this._maps}slice(t=0,n=this.maps.length){return new su(this._maps,this.mirror,t,n)}appendMap(t,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(t),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(t){for(let n=0,i=this._maps.length;n<t._maps.length;n++){let o=t.getMirror(n);this.appendMap(t._maps[n],o!=null&&o<n?i+o:void 0)}}getMirror(t){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==t)return this.mirror[n+(n%2?-1:1)]}}setMirror(t,n){this.mirror||(this.mirror=[]),this.mirror.push(t,n)}appendMappingInverted(t){for(let n=t.maps.length-1,i=this._maps.length+t._maps.length;n>=0;n--){let o=t.getMirror(n);this.appendMap(t._maps[n].invert(),o!=null&&o>n?i-o-1:void 0)}}invert(){let t=new su;return t.appendMappingInverted(this),t}map(t,n=1){if(this.mirror)return this._map(t,n,!0);for(let i=this.from;i<this.to;i++)t=this._maps[i].map(t,n);return t}mapResult(t,n=1){return this._map(t,n,!1)}_map(t,n,i){let o=0;for(let s=this.from;s<this.to;s++){let r=this._maps[s],a=r.mapResult(t,n);if(a.recover!=null){let l=this.getMirror(s);if(l!=null&&l>s&&l<this.to){s=l,t=this._maps[l].recover(a.recover);continue}}o|=a.delInfo,t=a.pos}return i?t:new Rb(t,o,null)}}const y1=Object.create(null);class hi{getMap(){return Yi.empty}merge(t){return null}static fromJSON(t,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let i=y1[n.stepType];if(!i)throw new RangeError(`No step type ${n.stepType} defined`);return i.fromJSON(t,n)}static jsonID(t,n){if(t in y1)throw new RangeError("Duplicate use of step JSON ID "+t);return y1[t]=n,n.prototype.jsonID=t,n}}class Sn{constructor(t,n){this.doc=t,this.failed=n}static ok(t){return new Sn(t,null)}static fail(t){return new Sn(null,t)}static fromReplace(t,n,i,o){try{return Sn.ok(t.replace(n,i,o))}catch(s){if(s instanceof Qf)return Sn.fail(s.message);throw s}}}function c0(e,t,n){let i=[];for(let o=0;o<e.childCount;o++){let s=e.child(o);s.content.size&&(s=s.copy(c0(s.content,t,s))),s.isInline&&(s=t(s,n,o)),i.push(s)}return be.fromArray(i)}class Br extends hi{constructor(t,n,i){super(),this.from=t,this.to=n,this.mark=i}apply(t){let n=t.slice(this.from,this.to),i=t.resolve(this.from),o=i.node(i.sharedDepth(this.to)),s=new Oe(c0(n.content,(r,a)=>!r.isAtom||!a.type.allowsMarkType(this.mark.type)?r:r.mark(this.mark.addToSet(r.marks)),o),n.openStart,n.openEnd);return Sn.fromReplace(t,this.from,this.to,s)}invert(){return new hs(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),i=t.mapResult(this.to,-1);return n.deleted&&i.deleted||n.pos>=i.pos?null:new Br(n.pos,i.pos,this.mark)}merge(t){return t instanceof Br&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new Br(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Br(n.from,n.to,t.markFromJSON(n.mark))}}hi.jsonID("addMark",Br);class hs extends hi{constructor(t,n,i){super(),this.from=t,this.to=n,this.mark=i}apply(t){let n=t.slice(this.from,this.to),i=new Oe(c0(n.content,o=>o.mark(this.mark.removeFromSet(o.marks)),t),n.openStart,n.openEnd);return Sn.fromReplace(t,this.from,this.to,i)}invert(){return new Br(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),i=t.mapResult(this.to,-1);return n.deleted&&i.deleted||n.pos>=i.pos?null:new hs(n.pos,i.pos,this.mark)}merge(t){return t instanceof hs&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new hs(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new hs(n.from,n.to,t.markFromJSON(n.mark))}}hi.jsonID("removeMark",hs);class Fr extends hi{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return Sn.fail("No node at mark step's position");let i=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Sn.fromReplace(t,this.pos,this.pos+1,new Oe(be.from(i),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);if(n){let i=this.mark.addToSet(n.marks);if(i.length==n.marks.length){for(let o=0;o<n.marks.length;o++)if(!n.marks[o].isInSet(i))return new Fr(this.pos,n.marks[o]);return new Fr(this.pos,this.mark)}}return new uc(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new Fr(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Fr(n.pos,t.markFromJSON(n.mark))}}hi.jsonID("addNodeMark",Fr);class uc extends hi{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return Sn.fail("No node at mark step's position");let i=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Sn.fromReplace(t,this.pos,this.pos+1,new Oe(be.from(i),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new Fr(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new uc(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new uc(n.pos,t.markFromJSON(n.mark))}}hi.jsonID("removeNodeMark",uc);class Hn extends hi{constructor(t,n,i,o=!1){super(),this.from=t,this.to=n,this.slice=i,this.structure=o}apply(t){return this.structure&&Pb(t,this.from,this.to)?Sn.fail("Structure replace would overwrite content"):Sn.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new Yi([this.from,this.to-this.from,this.slice.size])}invert(t){return new Hn(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let n=t.mapResult(this.from,1),i=t.mapResult(this.to,-1);return n.deletedAcross&&i.deletedAcross?null:new Hn(n.pos,Math.max(n.pos,i.pos),this.slice)}merge(t){if(!(t instanceof Hn)||t.structure||this.structure)return null;if(this.from+this.slice.size==t.from&&!this.slice.openEnd&&!t.slice.openStart){let n=this.slice.size+t.slice.size==0?Oe.empty:new Oe(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new Hn(this.from,this.to+(t.to-t.from),n,this.structure)}else if(t.to==this.from&&!this.slice.openStart&&!t.slice.openEnd){let n=this.slice.size+t.slice.size==0?Oe.empty:new Oe(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new Hn(t.from,this.to,n,this.structure)}else return null}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Hn(n.from,n.to,Oe.fromJSON(t,n.slice),!!n.structure)}}hi.jsonID("replace",Hn);class zn extends hi{constructor(t,n,i,o,s,r,a=!1){super(),this.from=t,this.to=n,this.gapFrom=i,this.gapTo=o,this.slice=s,this.insert=r,this.structure=a}apply(t){if(this.structure&&(Pb(t,this.from,this.gapFrom)||Pb(t,this.gapTo,this.to)))return Sn.fail("Structure gap-replace would overwrite content");let n=t.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Sn.fail("Gap is not a flat range");let i=this.slice.insertAt(this.insert,n.content);return i?Sn.fromReplace(t,this.from,this.to,i):Sn.fail("Content does not fit in gap")}getMap(){return new Yi([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let n=this.gapTo-this.gapFrom;return new zn(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let n=t.mapResult(this.from,1),i=t.mapResult(this.to,-1),o=this.from==this.gapFrom?n.pos:t.map(this.gapFrom,-1),s=this.to==this.gapTo?i.pos:t.map(this.gapTo,1);return n.deletedAcross&&i.deletedAcross||o<n.pos||s>i.pos?null:new zn(n.pos,i.pos,o,s,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new zn(n.from,n.to,n.gapFrom,n.gapTo,Oe.fromJSON(t,n.slice),n.insert,!!n.structure)}}hi.jsonID("replaceAround",zn);function Pb(e,t,n){let i=e.resolve(t),o=n-t,s=i.depth;for(;o>0&&s>0&&i.indexAfter(s)==i.node(s).childCount;)s--,o--;if(o>0){let r=i.node(s).maybeChild(i.indexAfter(s));for(;o>0;){if(!r||r.isLeaf)return!0;r=r.firstChild,o--}}return!1}function aue(e,t,n,i){let o=[],s=[],r,a;e.doc.nodesBetween(t,n,(l,c,u)=>{if(!l.isInline)return;let f=l.marks;if(!i.isInSet(f)&&u.type.allowsMarkType(i.type)){let m=Math.max(c,t),g=Math.min(c+l.nodeSize,n),v=i.addToSet(f);for(let w=0;w<f.length;w++)f[w].isInSet(v)||(r&&r.to==m&&r.mark.eq(f[w])?r.to=g:o.push(r=new hs(m,g,f[w])));a&&a.to==m?a.to=g:s.push(a=new Br(m,g,i))}}),o.forEach(l=>e.step(l)),s.forEach(l=>e.step(l))}function lue(e,t,n,i){let o=[],s=0;e.doc.nodesBetween(t,n,(r,a)=>{if(!r.isInline)return;s++;let l=null;if(i instanceof hm){let c=r.marks,u;for(;u=i.isInSet(c);)(l||(l=[])).push(u),c=u.removeFromSet(c)}else i?i.isInSet(r.marks)&&(l=[i]):l=r.marks;if(l&&l.length){let c=Math.min(a+r.nodeSize,n);for(let u=0;u<l.length;u++){let f=l[u],m;for(let g=0;g<o.length;g++){let v=o[g];v.step==s-1&&f.eq(o[g].style)&&(m=v)}m?(m.to=c,m.step=s):o.push({style:f,from:Math.max(a,t),to:c,step:s})}}}),o.forEach(r=>e.step(new hs(r.from,r.to,r.style)))}function d0(e,t,n,i=n.contentMatch,o=!0){let s=e.doc.nodeAt(t),r=[],a=t+1;for(let l=0;l<s.childCount;l++){let c=s.child(l),u=a+c.nodeSize,f=i.matchType(c.type);if(!f)r.push(new Hn(a,u,Oe.empty));else{i=f;for(let m=0;m<c.marks.length;m++)n.allowsMarkType(c.marks[m].type)||e.step(new hs(a,u,c.marks[m]));if(o&&c.isText&&n.whitespace!="pre"){let m,g=/\r?\n|\r/g,v;for(;m=g.exec(c.text);)v||(v=new Oe(be.from(n.schema.text(" ",n.allowedMarks(c.marks))),0,0)),r.push(new Hn(a+m.index,a+m.index+m[0].length,v))}}a=u}if(!i.validEnd){let l=i.fillBefore(be.empty,!0);e.replace(a,a,new Oe(l,0,0))}for(let l=r.length-1;l>=0;l--)e.step(r[l])}function cue(e,t,n){return(t==0||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function Ic(e){let n=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let i=e.depth;;--i){let o=e.$from.node(i),s=e.$from.index(i),r=e.$to.indexAfter(i);if(i<e.depth&&o.canReplace(s,r,n))return i;if(i==0||o.type.spec.isolating||!cue(o,s,r))break}return null}function due(e,t,n){let{$from:i,$to:o,depth:s}=t,r=i.before(s+1),a=o.after(s+1),l=r,c=a,u=be.empty,f=0;for(let v=s,w=!1;v>n;v--)w||i.index(v)>0?(w=!0,u=be.from(i.node(v).copy(u)),f++):l--;let m=be.empty,g=0;for(let v=s,w=!1;v>n;v--)w||o.after(v+1)<o.end(v)?(w=!0,m=be.from(o.node(v).copy(m)),g++):c++;e.step(new zn(l,c,r,a,new Oe(u.append(m),f,g),u.size-f,!0))}function u0(e,t,n=null,i=e){let o=uue(e,t),s=o&&hue(i,t);return s?o.map(iC).concat({type:t,attrs:n}).concat(s.map(iC)):null}function iC(e){return{type:e,attrs:null}}function uue(e,t){let{parent:n,startIndex:i,endIndex:o}=e,s=n.contentMatchAt(i).findWrapping(t);if(!s)return null;let r=s.length?s[0]:t;return n.canReplaceWith(i,o,r)?s:null}function hue(e,t){let{parent:n,startIndex:i,endIndex:o}=e,s=n.child(i),r=t.contentMatch.findWrapping(s.type);if(!r)return null;let l=(r.length?r[r.length-1]:t).contentMatch;for(let c=i;l&&c<o;c++)l=l.matchType(n.child(c).type);return!l||!l.validEnd?null:r}function fue(e,t,n){let i=be.empty;for(let r=n.length-1;r>=0;r--){if(i.size){let a=n[r].type.contentMatch.matchFragment(i);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}i=be.from(n[r].type.create(n[r].attrs,i))}let o=t.start,s=t.end;e.step(new zn(o,s,o,s,new Oe(i,0,0),n.length,!0))}function pue(e,t,n,i,o){if(!i.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=e.steps.length;e.doc.nodesBetween(t,n,(r,a)=>{let l=typeof o=="function"?o(r):o;if(r.isTextblock&&!r.hasMarkup(i,l)&&mue(e.doc,e.mapping.slice(s).map(a),i)){let c=null;if(i.schema.linebreakReplacement){let g=i.whitespace=="pre",v=!!i.contentMatch.matchType(i.schema.linebreakReplacement);g&&!v?c=!1:!g&&v&&(c=!0)}c===!1&&xx(e,r,a,s),d0(e,e.mapping.slice(s).map(a,1),i,void 0,c===null);let u=e.mapping.slice(s),f=u.map(a,1),m=u.map(a+r.nodeSize,1);return e.step(new zn(f,m,f+1,m-1,new Oe(be.from(i.create(l,null,r.marks)),0,0),1,!0)),c===!0&&Sx(e,r,a,s),!1}})}function Sx(e,t,n,i){t.forEach((o,s)=>{if(o.isText){let r,a=/\r?\n|\r/g;for(;r=a.exec(o.text);){let l=e.mapping.slice(i).map(n+1+s+r.index);e.replaceWith(l,l+1,t.type.schema.linebreakReplacement.create())}}})}function xx(e,t,n,i){t.forEach((o,s)=>{if(o.type==o.type.schema.linebreakReplacement){let r=e.mapping.slice(i).map(n+1+s);e.replaceWith(r,r+1,t.type.schema.text(`
`))}})}function mue(e,t,n){let i=e.resolve(t),o=i.index();return i.parent.canReplaceWith(o,o+1,n)}function gue(e,t,n,i,o){let s=e.doc.nodeAt(t);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let r=n.create(i,null,o||s.marks);if(s.isLeaf)return e.replaceWith(t,t+s.nodeSize,r);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);e.step(new zn(t,t+s.nodeSize,t+1,t+s.nodeSize-1,new Oe(be.from(r),0,0),1,!0))}function ir(e,t,n=1,i){let o=e.resolve(t),s=o.depth-n,r=i&&i[i.length-1]||o.parent;if(s<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!r.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(let c=o.depth-1,u=n-2;c>s;c--,u--){let f=o.node(c),m=o.index(c);if(f.type.spec.isolating)return!1;let g=f.content.cutByIndex(m,f.childCount),v=i&&i[u+1];v&&(g=g.replaceChild(0,v.type.create(v.attrs)));let w=i&&i[u]||f;if(!f.canReplace(m+1,f.childCount)||!w.type.validContent(g))return!1}let a=o.indexAfter(s),l=i&&i[0];return o.node(s).canReplaceWith(a,a,l?l.type:o.node(s+1).type)}function bue(e,t,n=1,i){let o=e.doc.resolve(t),s=be.empty,r=be.empty;for(let a=o.depth,l=o.depth-n,c=n-1;a>l;a--,c--){s=be.from(o.node(a).copy(s));let u=i&&i[c];r=be.from(u?u.type.create(u.attrs,r):o.node(a).copy(r))}e.step(new Hn(t,t,new Oe(s.append(r),n,n),!0))}function ga(e,t){let n=e.resolve(t),i=n.index();return Mx(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(i,i+1)}function yue(e,t){t.content.size||e.type.compatibleContent(t.type);let n=e.contentMatchAt(e.childCount),{linebreakReplacement:i}=e.type.schema;for(let o=0;o<t.childCount;o++){let s=t.child(o),r=s.type==i?e.type.schema.nodes.text:s.type;if(n=n.matchType(r),!n||!e.type.allowsMarks(s.marks))return!1}return n.validEnd}function Mx(e,t){return!!(e&&t&&!e.isLeaf&&yue(e,t))}function fm(e,t,n=-1){let i=e.resolve(t);for(let o=i.depth;;o--){let s,r,a=i.index(o);if(o==i.depth?(s=i.nodeBefore,r=i.nodeAfter):n>0?(s=i.node(o+1),a++,r=i.node(o).maybeChild(a)):(s=i.node(o).maybeChild(a-1),r=i.node(o+1)),s&&!s.isTextblock&&Mx(s,r)&&i.node(o).canReplace(a,a+1))return t;if(o==0)break;t=n<0?i.before(o):i.after(o)}}function vue(e,t,n){let i=null,{linebreakReplacement:o}=e.doc.type.schema,s=e.doc.resolve(t-n),r=s.node().type;if(o&&r.inlineContent){let u=r.whitespace=="pre",f=!!r.contentMatch.matchType(o);u&&!f?i=!1:!u&&f&&(i=!0)}let a=e.steps.length;if(i===!1){let u=e.doc.resolve(t+n);xx(e,u.node(),u.before(),a)}r.inlineContent&&d0(e,t+n-1,r,s.node().contentMatchAt(s.index()),i==null);let l=e.mapping.slice(a),c=l.map(t-n);if(e.step(new Hn(c,l.map(t+n,-1),Oe.empty,!0)),i===!0){let u=e.doc.resolve(c);Sx(e,u.node(),u.before(),e.steps.length)}return e}function wue(e,t,n){let i=e.resolve(t);if(i.parent.canReplaceWith(i.index(),i.index(),n))return t;if(i.parentOffset==0)for(let o=i.depth-1;o>=0;o--){let s=i.index(o);if(i.node(o).canReplaceWith(s,s,n))return i.before(o+1);if(s>0)return null}if(i.parentOffset==i.parent.content.size)for(let o=i.depth-1;o>=0;o--){let s=i.indexAfter(o);if(i.node(o).canReplaceWith(s,s,n))return i.after(o+1);if(s<i.node(o).childCount)return null}return null}function Tx(e,t,n){let i=e.resolve(t);if(!n.content.size)return t;let o=n.content;for(let s=0;s<n.openStart;s++)o=o.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let r=i.depth;r>=0;r--){let a=r==i.depth?0:i.pos<=(i.start(r+1)+i.end(r+1))/2?-1:1,l=i.index(r)+(a>0?1:0),c=i.node(r),u=!1;if(s==1)u=c.canReplace(l,l,o);else{let f=c.contentMatchAt(l).findWrapping(o.firstChild.type);u=f&&c.canReplaceWith(l,l,f[0])}if(u)return a==0?i.pos:a<0?i.before(r+1):i.after(r+1)}return null}function pm(e,t,n=t,i=Oe.empty){if(t==n&&!i.size)return null;let o=e.resolve(t),s=e.resolve(n);return Ex(o,s,i)?new Hn(t,n,i):new _ue(o,s,i).fit()}function Ex(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}class _ue{constructor(t,n,i){this.$from=t,this.$to=n,this.unplaced=i,this.frontier=[],this.placed=be.empty;for(let o=0;o<=t.depth;o++){let s=t.node(o);this.frontier.push({type:s.type,match:s.contentMatchAt(t.indexAfter(o))})}for(let o=t.depth;o>0;o--)this.placed=be.from(t.node(o).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,i=this.$from,o=this.close(t<0?this.$to:i.doc.resolve(t));if(!o)return null;let s=this.placed,r=i.depth,a=o.depth;for(;r&&a&&s.childCount==1;)s=s.firstChild.content,r--,a--;let l=new Oe(s,r,a);return t>-1?new zn(i.pos,t,this.$to.pos,this.$to.end(),l,n):l.size||i.pos!=this.$to.pos?new Hn(i.pos,o.pos,l):null}findFittable(){let t=this.unplaced.openStart;for(let n=this.unplaced.content,i=0,o=this.unplaced.openEnd;i<t;i++){let s=n.firstChild;if(n.childCount>1&&(o=0),s.type.spec.isolating&&o<=i){t=i;break}n=s.content}for(let n=1;n<=2;n++)for(let i=n==1?t:this.unplaced.openStart;i>=0;i--){let o,s=null;i?(s=v1(this.unplaced.content,i-1).firstChild,o=s.content):o=this.unplaced.content;let r=o.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],u,f=null;if(n==1&&(r?c.matchType(r.type)||(f=c.fillBefore(be.from(r),!1)):s&&l.compatibleContent(s.type)))return{sliceDepth:i,frontierDepth:a,parent:s,inject:f};if(n==2&&r&&(u=c.findWrapping(r.type)))return{sliceDepth:i,frontierDepth:a,parent:s,wrap:u};if(s&&c.matchType(s.type))break}}}openMore(){let{content:t,openStart:n,openEnd:i}=this.unplaced,o=v1(t,n);return!o.childCount||o.firstChild.isLeaf?!1:(this.unplaced=new Oe(t,n+1,Math.max(i,o.size+n>=t.size-i?n+1:0)),!0)}dropNode(){let{content:t,openStart:n,openEnd:i}=this.unplaced,o=v1(t,n);if(o.childCount<=1&&n>0){let s=t.size-n<=n+o.size;this.unplaced=new Oe(md(t,n-1,1),n-1,s?n-1:i)}else this.unplaced=new Oe(md(t,n,1),n,i)}placeNodes({sliceDepth:t,frontierDepth:n,parent:i,inject:o,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let w=0;w<s.length;w++)this.openFrontierNode(s[w]);let r=this.unplaced,a=i?i.content:r.content,l=r.openStart-t,c=0,u=[],{match:f,type:m}=this.frontier[n];if(o){for(let w=0;w<o.childCount;w++)u.push(o.child(w));f=f.matchFragment(o)}let g=a.size+t-(r.content.size-r.openEnd);for(;c<a.childCount;){let w=a.child(c),_=f.matchType(w.type);if(!_)break;c++,(c>1||l==0||w.content.size)&&(f=_,u.push(Ox(w.mark(m.allowedMarks(w.marks)),c==1?l:0,c==a.childCount?g:-1)))}let v=c==a.childCount;v||(g=-1),this.placed=gd(this.placed,n,be.from(u)),this.frontier[n].match=f,v&&g<0&&i&&i.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let w=0,_=a;w<g;w++){let k=_.lastChild;this.frontier.push({type:k.type,match:k.contentMatchAt(k.childCount)}),_=k.content}this.unplaced=v?t==0?Oe.empty:new Oe(md(r.content,t-1,1),t-1,g<0?r.openEnd:t-1):new Oe(md(r.content,t,c),r.openStart,r.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let t=this.frontier[this.depth],n;if(!t.type.isTextblock||!w1(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:i}=this.$to,o=this.$to.after(i);for(;i>1&&o==this.$to.end(--i);)++o;return o}findCloseLevel(t){e:for(let n=Math.min(this.depth,t.depth);n>=0;n--){let{match:i,type:o}=this.frontier[n],s=n<t.depth&&t.end(n+1)==t.pos+(t.depth-(n+1)),r=w1(t,n,o,i,s);if(r){for(let a=n-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],u=w1(t,a,c,l,!0);if(!u||u.childCount)continue e}return{depth:n,fit:r,move:s?t.doc.resolve(t.after(n+1)):t}}}}close(t){let n=this.findCloseLevel(t);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=gd(this.placed,n.depth,n.fit)),t=n.move;for(let i=n.depth+1;i<=t.depth;i++){let o=t.node(i),s=o.type.contentMatch.fillBefore(o.content,!0,t.index(i));this.openFrontierNode(o.type,o.attrs,s)}return t}openFrontierNode(t,n=null,i){let o=this.frontier[this.depth];o.match=o.match.matchType(t),this.placed=gd(this.placed,this.depth,be.from(t.create(n,i))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(be.empty,!0);n.childCount&&(this.placed=gd(this.placed,this.frontier.length,n))}}function md(e,t,n){return t==0?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy(md(e.firstChild.content,t-1,n)))}function gd(e,t,n){return t==0?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(gd(e.lastChild.content,t-1,n)))}function v1(e,t){for(let n=0;n<t;n++)e=e.firstChild.content;return e}function Ox(e,t,n){if(t<=0)return e;let i=e.content;return t>1&&(i=i.replaceChild(0,Ox(i.firstChild,t-1,i.childCount==1?n-1:0))),t>0&&(i=e.type.contentMatch.fillBefore(i).append(i),n<=0&&(i=i.append(e.type.contentMatch.matchFragment(i).fillBefore(be.empty,!0)))),e.copy(i)}function w1(e,t,n,i,o){let s=e.node(t),r=o?e.indexAfter(t):e.index(t);if(r==s.childCount&&!n.compatibleContent(s.type))return null;let a=i.fillBefore(s.content,!0,r);return a&&!Cue(n,s.content,r)?a:null}function Cue(e,t,n){for(let i=n;i<t.childCount;i++)if(!e.allowsMarks(t.child(i).marks))return!0;return!1}function Aue(e){return e.spec.defining||e.spec.definingForContent}function kue(e,t,n,i){if(!i.size)return e.deleteRange(t,n);let o=e.doc.resolve(t),s=e.doc.resolve(n);if(Ex(o,s,i))return e.step(new Hn(t,n,i));let r=Ix(o,e.doc.resolve(n));r[r.length-1]==0&&r.pop();let a=-(o.depth+1);r.unshift(a);for(let m=o.depth,g=o.pos-1;m>0;m--,g--){let v=o.node(m).type.spec;if(v.defining||v.definingAsContext||v.isolating)break;r.indexOf(m)>-1?a=m:o.before(m)==g&&r.splice(1,0,-m)}let l=r.indexOf(a),c=[],u=i.openStart;for(let m=i.content,g=0;;g++){let v=m.firstChild;if(c.push(v),g==i.openStart)break;m=v.content}for(let m=u-1;m>=0;m--){let g=c[m],v=Aue(g.type);if(v&&!g.sameMarkup(o.node(Math.abs(a)-1)))u=m;else if(v||!g.type.isTextblock)break}for(let m=i.openStart;m>=0;m--){let g=(m+u+1)%(i.openStart+1),v=c[g];if(v)for(let w=0;w<r.length;w++){let _=r[(w+l)%r.length],k=!0;_<0&&(k=!1,_=-_);let L=o.node(_-1),P=o.index(_-1);if(L.canReplaceWith(P,P,v.type,v.marks))return e.replace(o.before(_),k?s.after(_):n,new Oe($x(i.content,0,i.openStart,g),g,i.openEnd))}}let f=e.steps.length;for(let m=r.length-1;m>=0&&(e.replace(t,n,i),!(e.steps.length>f));m--){let g=r[m];g<0||(t=o.before(g),n=s.after(g))}}function $x(e,t,n,i,o){if(t<n){let s=e.firstChild;e=e.replaceChild(0,s.copy($x(s.content,t+1,n,i,s)))}if(t>i){let s=o.contentMatchAt(0),r=s.fillBefore(e).append(e);e=r.append(s.matchFragment(r).fillBefore(be.empty,!0))}return e}function Sue(e,t,n,i){if(!i.isInline&&t==n&&e.doc.resolve(t).parent.content.size){let o=wue(e.doc,t,i.type);o!=null&&(t=n=o)}e.replaceRange(t,n,new Oe(be.from(i),0,0))}function xue(e,t,n){let i=e.doc.resolve(t),o=e.doc.resolve(n),s=Ix(i,o);for(let r=0;r<s.length;r++){let a=s[r],l=r==s.length-1;if(l&&a==0||i.node(a).type.contentMatch.validEnd)return e.delete(i.start(a),o.end(a));if(a>0&&(l||i.node(a-1).canReplace(i.index(a-1),o.indexAfter(a-1))))return e.delete(i.before(a),o.after(a))}for(let r=1;r<=i.depth&&r<=o.depth;r++)if(t-i.start(r)==i.depth-r&&n>i.end(r)&&o.end(r)-n!=o.depth-r&&i.start(r-1)==o.start(r-1)&&i.node(r-1).canReplace(i.index(r-1),o.index(r-1)))return e.delete(i.before(r),n);e.delete(t,n)}function Ix(e,t){let n=[],i=Math.min(e.depth,t.depth);for(let o=i;o>=0;o--){let s=e.start(o);if(s<e.pos-(e.depth-o)||t.end(o)>t.pos+(t.depth-o)||e.node(o).type.spec.isolating||t.node(o).type.spec.isolating)break;(s==t.start(o)||o==e.depth&&o==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&o&&t.start(o-1)==s-1)&&n.push(o)}return n}class ic extends hi{constructor(t,n,i){super(),this.pos=t,this.attr=n,this.value=i}apply(t){let n=t.nodeAt(this.pos);if(!n)return Sn.fail("No node at attribute step's position");let i=Object.create(null);for(let s in n.attrs)i[s]=n.attrs[s];i[this.attr]=this.value;let o=n.type.create(i,null,n.marks);return Sn.fromReplace(t,this.pos,this.pos+1,new Oe(be.from(o),0,n.isLeaf?0:1))}getMap(){return Yi.empty}invert(t){return new ic(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new ic(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new ic(n.pos,n.attr,n.value)}}hi.jsonID("attr",ic);class ru extends hi{constructor(t,n){super(),this.attr=t,this.value=n}apply(t){let n=Object.create(null);for(let o in t.attrs)n[o]=t.attrs[o];n[this.attr]=this.value;let i=t.type.create(n,t.content,t.marks);return Sn.ok(i)}getMap(){return Yi.empty}invert(t){return new ru(this.attr,t.attrs[this.attr])}map(t){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(t,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new ru(n.attr,n.value)}}hi.jsonID("docAttr",ru);let hc=class extends Error{};hc=function e(t){let n=Error.call(this,t);return n.__proto__=e.prototype,n};hc.prototype=Object.create(Error.prototype);hc.prototype.constructor=hc;hc.prototype.name="TransformError";class h0{constructor(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new su}get before(){return this.docs.length?this.docs[0]:this.doc}step(t){let n=this.maybeStep(t);if(n.failed)throw new hc(n.failed);return this}maybeStep(t){let n=t.apply(this.doc);return n.failed||this.addStep(t,n.doc),n}get docChanged(){return this.steps.length>0}addStep(t,n){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=n}replace(t,n=t,i=Oe.empty){let o=pm(this.doc,t,n,i);return o&&this.step(o),this}replaceWith(t,n,i){return this.replace(t,n,new Oe(be.from(i),0,0))}delete(t,n){return this.replace(t,n,Oe.empty)}insert(t,n){return this.replaceWith(t,t,n)}replaceRange(t,n,i){return kue(this,t,n,i),this}replaceRangeWith(t,n,i){return Sue(this,t,n,i),this}deleteRange(t,n){return xue(this,t,n),this}lift(t,n){return due(this,t,n),this}join(t,n=1){return vue(this,t,n),this}wrap(t,n){return fue(this,t,n),this}setBlockType(t,n=t,i,o=null){return pue(this,t,n,i,o),this}setNodeMarkup(t,n,i=null,o){return gue(this,t,n,i,o),this}setNodeAttribute(t,n,i){return this.step(new ic(t,n,i)),this}setDocAttribute(t,n){return this.step(new ru(t,n)),this}addNodeMark(t,n){return this.step(new Fr(t,n)),this}removeNodeMark(t,n){if(!(n instanceof jt)){let i=this.doc.nodeAt(t);if(!i)throw new RangeError("No node at position "+t);if(n=n.isInSet(i.marks),!n)return this}return this.step(new uc(t,n)),this}split(t,n=1,i){return bue(this,t,n,i),this}addMark(t,n,i){return aue(this,t,n,i),this}removeMark(t,n,i){return lue(this,t,n,i),this}clearIncompatible(t,n,i){return d0(this,t,n,i),this}}const _1=Object.create(null);class it{constructor(t,n,i){this.$anchor=t,this.$head=n,this.ranges=i||[new Lx(t.min(n),t.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let t=this.ranges;for(let n=0;n<t.length;n++)if(t[n].$from.pos!=t[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(t,n=Oe.empty){let i=n.content.lastChild,o=null;for(let a=0;a<n.openEnd;a++)o=i,i=i.lastChild;let s=t.steps.length,r=this.ranges;for(let a=0;a<r.length;a++){let{$from:l,$to:c}=r[a],u=t.mapping.slice(s);t.replaceRange(u.map(l.pos),u.map(c.pos),a?Oe.empty:n),a==0&&rC(t,s,(i?i.isInline:o&&o.isTextblock)?-1:1)}}replaceWith(t,n){let i=t.steps.length,o=this.ranges;for(let s=0;s<o.length;s++){let{$from:r,$to:a}=o[s],l=t.mapping.slice(i),c=l.map(r.pos),u=l.map(a.pos);s?t.deleteRange(c,u):(t.replaceRangeWith(c,u,n),rC(t,i,n.isInline?-1:1))}}static findFrom(t,n,i=!1){let o=t.parent.inlineContent?new Ze(t):jl(t.node(0),t.parent,t.pos,t.index(),n,i);if(o)return o;for(let s=t.depth-1;s>=0;s--){let r=n<0?jl(t.node(0),t.node(s),t.before(s+1),t.index(s),n,i):jl(t.node(0),t.node(s),t.after(s+1),t.index(s)+1,n,i);if(r)return r}return null}static near(t,n=1){return this.findFrom(t,n)||this.findFrom(t,-n)||new eo(t.node(0))}static atStart(t){return jl(t,t,0,0,1)||new eo(t)}static atEnd(t){return jl(t,t,t.content.size,t.childCount,-1)||new eo(t)}static fromJSON(t,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let i=_1[n.type];if(!i)throw new RangeError(`No selection type ${n.type} defined`);return i.fromJSON(t,n)}static jsonID(t,n){if(t in _1)throw new RangeError("Duplicate use of selection JSON ID "+t);return _1[t]=n,n.prototype.jsonID=t,n}getBookmark(){return Ze.between(this.$anchor,this.$head).getBookmark()}}it.prototype.visible=!0;class Lx{constructor(t,n){this.$from=t,this.$to=n}}let oC=!1;function sC(e){!oC&&!e.parent.inlineContent&&(oC=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}class Ze extends it{constructor(t,n=t){sC(t),sC(n),super(t,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(t,n){let i=t.resolve(n.map(this.head));if(!i.parent.inlineContent)return it.near(i);let o=t.resolve(n.map(this.anchor));return new Ze(o.parent.inlineContent?o:i,i)}replace(t,n=Oe.empty){if(super.replace(t,n),n==Oe.empty){let i=this.$from.marksAcross(this.$to);i&&t.ensureMarks(i)}}eq(t){return t instanceof Ze&&t.anchor==this.anchor&&t.head==this.head}getBookmark(){return new mm(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(t,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Ze(t.resolve(n.anchor),t.resolve(n.head))}static create(t,n,i=n){let o=t.resolve(n);return new this(o,i==n?o:t.resolve(i))}static between(t,n,i){let o=t.pos-n.pos;if((!i||o)&&(i=o>=0?1:-1),!n.parent.inlineContent){let s=it.findFrom(n,i,!0)||it.findFrom(n,-i,!0);if(s)n=s.$head;else return it.near(n,i)}return t.parent.inlineContent||(o==0?t=n:(t=(it.findFrom(t,-i,!0)||it.findFrom(t,i,!0)).$anchor,t.pos<n.pos!=o<0&&(t=n))),new Ze(t,n)}}it.jsonID("text",Ze);class mm{constructor(t,n){this.anchor=t,this.head=n}map(t){return new mm(t.map(this.anchor),t.map(this.head))}resolve(t){return Ze.between(t.resolve(this.anchor),t.resolve(this.head))}}class Ye extends it{constructor(t){let n=t.nodeAfter,i=t.node(0).resolve(t.pos+n.nodeSize);super(t,i),this.node=n}map(t,n){let{deleted:i,pos:o}=n.mapResult(this.anchor),s=t.resolve(o);return i?it.near(s):new Ye(s)}content(){return new Oe(be.from(this.node),0,0)}eq(t){return t instanceof Ye&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new f0(this.anchor)}static fromJSON(t,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Ye(t.resolve(n.anchor))}static create(t,n){return new Ye(t.resolve(n))}static isSelectable(t){return!t.isText&&t.type.spec.selectable!==!1}}Ye.prototype.visible=!1;it.jsonID("node",Ye);class f0{constructor(t){this.anchor=t}map(t){let{deleted:n,pos:i}=t.mapResult(this.anchor);return n?new mm(i,i):new f0(i)}resolve(t){let n=t.resolve(this.anchor),i=n.nodeAfter;return i&&Ye.isSelectable(i)?new Ye(n):it.near(n)}}class eo extends it{constructor(t){super(t.resolve(0),t.resolve(t.content.size))}replace(t,n=Oe.empty){if(n==Oe.empty){t.delete(0,t.doc.content.size);let i=it.atStart(t.doc);i.eq(t.selection)||t.setSelection(i)}else super.replace(t,n)}toJSON(){return{type:"all"}}static fromJSON(t){return new eo(t)}map(t){return new eo(t)}eq(t){return t instanceof eo}getBookmark(){return Mue}}it.jsonID("all",eo);const Mue={map(){return this},resolve(e){return new eo(e)}};function jl(e,t,n,i,o,s=!1){if(t.inlineContent)return Ze.create(e,n);for(let r=i-(o>0?0:1);o>0?r<t.childCount:r>=0;r+=o){let a=t.child(r);if(a.isAtom){if(!s&&Ye.isSelectable(a))return Ye.create(e,n-(o<0?a.nodeSize:0))}else{let l=jl(e,a,n+o,o<0?a.childCount:0,o,s);if(l)return l}n+=a.nodeSize*o}return null}function rC(e,t,n){let i=e.steps.length-1;if(i<t)return;let o=e.steps[i];if(!(o instanceof Hn||o instanceof zn))return;let s=e.mapping.maps[i],r;s.forEach((a,l,c,u)=>{r==null&&(r=u)}),e.setSelection(it.near(e.doc.resolve(r),n))}const aC=1,lC=2,cC=4;class Tue extends h0{constructor(t){super(t.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=t.selection,this.storedMarks=t.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=(this.updated|aC)&-3,this.storedMarks=null,this}get selectionSet(){return(this.updated&aC)>0}setStoredMarks(t){return this.storedMarks=t,this.updated|=lC,this}ensureMarks(t){return jt.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this}addStoredMark(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&lC)>0}addStep(t,n){super.addStep(t,n),this.updated=this.updated&-3,this.storedMarks=null}setTime(t){return this.time=t,this}replaceSelection(t){return this.selection.replace(this,t),this}replaceSelectionWith(t,n=!0){let i=this.selection;return n&&(t=t.mark(this.storedMarks||(i.empty?i.$from.marks():i.$from.marksAcross(i.$to)||jt.none))),i.replaceWith(this,t),this}deleteSelection(){return this.selection.replace(this),this}insertText(t,n,i){let o=this.doc.type.schema;if(n==null)return t?this.replaceSelectionWith(o.text(t),!0):this.deleteSelection();{if(i==null&&(i=n),i=i??n,!t)return this.deleteRange(n,i);let s=this.storedMarks;if(!s){let r=this.doc.resolve(n);s=i==n?r.marks():r.marksAcross(this.doc.resolve(i))}return this.replaceRangeWith(n,i,o.text(t,s)),this.selection.empty||this.setSelection(it.near(this.selection.$to)),this}}setMeta(t,n){return this.meta[typeof t=="string"?t:t.key]=n,this}getMeta(t){return this.meta[typeof t=="string"?t:t.key]}get isGeneric(){for(let t in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=cC,this}get scrolledIntoView(){return(this.updated&cC)>0}}function dC(e,t){return!t||!e?e:e.bind(t)}class bd{constructor(t,n,i){this.name=t,this.init=dC(n.init,i),this.apply=dC(n.apply,i)}}const Eue=[new bd("doc",{init(e){return e.doc||e.schema.topNodeType.createAndFill()},apply(e){return e.doc}}),new bd("selection",{init(e,t){return e.selection||it.atStart(t.doc)},apply(e){return e.selection}}),new bd("storedMarks",{init(e){return e.storedMarks||null},apply(e,t,n,i){return i.selection.$cursor?e.storedMarks:null}}),new bd("scrollToSelection",{init(){return 0},apply(e,t){return e.scrolledIntoView?t+1:t}})];class C1{constructor(t,n){this.schema=t,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Eue.slice(),n&&n.forEach(i=>{if(this.pluginsByKey[i.key])throw new RangeError("Adding different instances of a keyed plugin ("+i.key+")");this.plugins.push(i),this.pluginsByKey[i.key]=i,i.spec.state&&this.fields.push(new bd(i.key,i.spec.state,i))})}}class Yl{constructor(t){this.config=t}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(t){return this.applyTransaction(t).state}filterTransaction(t,n=-1){for(let i=0;i<this.config.plugins.length;i++)if(i!=n){let o=this.config.plugins[i];if(o.spec.filterTransaction&&!o.spec.filterTransaction.call(o,t,this))return!1}return!0}applyTransaction(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};let n=[t],i=this.applyInner(t),o=null;for(;;){let s=!1;for(let r=0;r<this.config.plugins.length;r++){let a=this.config.plugins[r];if(a.spec.appendTransaction){let l=o?o[r].n:0,c=o?o[r].state:this,u=l<n.length&&a.spec.appendTransaction.call(a,l?n.slice(l):n,c,i);if(u&&i.filterTransaction(u,r)){if(u.setMeta("appendedTransaction",t),!o){o=[];for(let f=0;f<this.config.plugins.length;f++)o.push(f<r?{state:i,n:n.length}:{state:this,n:0})}n.push(u),i=i.applyInner(u),s=!0}o&&(o[r]={state:i,n:n.length})}}if(!s)return{state:i,transactions:n}}}applyInner(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Yl(this.config),i=this.config.fields;for(let o=0;o<i.length;o++){let s=i[o];n[s.name]=s.apply(t,this[s.name],this,n)}return n}get tr(){return new Tue(this)}static create(t){let n=new C1(t.doc?t.doc.type.schema:t.schema,t.plugins),i=new Yl(n);for(let o=0;o<n.fields.length;o++)i[n.fields[o].name]=n.fields[o].init(t,i);return i}reconfigure(t){let n=new C1(this.schema,t.plugins),i=n.fields,o=new Yl(n);for(let s=0;s<i.length;s++){let r=i[s].name;o[r]=this.hasOwnProperty(r)?this[r]:i[s].init(t,o)}return o}toJSON(t){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(i=>i.toJSON())),t&&typeof t=="object")for(let i in t){if(i=="doc"||i=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let o=t[i],s=o.spec.state;s&&s.toJSON&&(n[i]=s.toJSON.call(o,this[o.key]))}return n}static fromJSON(t,n,i){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");let o=new C1(t.schema,t.plugins),s=new Yl(o);return o.fields.forEach(r=>{if(r.name=="doc")s.doc=Gr.fromJSON(t.schema,n.doc);else if(r.name=="selection")s.selection=it.fromJSON(s.doc,n.selection);else if(r.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(t.schema.markFromJSON));else{if(i)for(let a in i){let l=i[a],c=l.spec.state;if(l.key==r.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){s[r.name]=c.fromJSON.call(l,t,n[a],s);return}}s[r.name]=r.init(t,s)}}),s}}function Dx(e,t,n){for(let i in e){let o=e[i];o instanceof Function?o=o.bind(t):i=="handleDOMEvents"&&(o=Dx(o,t,{})),n[i]=o}return n}class bn{constructor(t){this.spec=t,this.props={},t.props&&Dx(t.props,this,this.props),this.key=t.key?t.key.key:Rx("plugin")}getState(t){return t[this.key]}}const A1=Object.create(null);function Rx(e){return e in A1?e+"$"+ ++A1[e]:(A1[e]=0,e+"$")}class Dn{constructor(t="key"){this.key=Rx(t)}get(t){return t.config.pluginsByKey[this.key]}getState(t){return t[this.key]}}const Gn=function(e){for(var t=0;;t++)if(e=e.previousSibling,!e)return t},fc=function(e){let t=e.assignedSlot||e.parentNode;return t&&t.nodeType==11?t.host:t};let Hb=null;const Ks=function(e,t,n){let i=Hb||(Hb=document.createRange());return i.setEnd(e,n??e.nodeValue.length),i.setStart(e,t||0),i},Oue=function(){Hb=null},rl=function(e,t,n,i){return n&&(uC(e,t,n,i,-1)||uC(e,t,n,i,1))},$ue=/^(img|br|input|textarea|hr)$/i;function uC(e,t,n,i,o){for(;;){if(e==n&&t==i)return!0;if(t==(o<0?0:vo(e))){let s=e.parentNode;if(!s||s.nodeType!=1||Iu(e)||$ue.test(e.nodeName)||e.contentEditable=="false")return!1;t=Gn(e)+(o<0?0:1),e=s}else if(e.nodeType==1){if(e=e.childNodes[t+(o<0?-1:0)],e.contentEditable=="false")return!1;t=o<0?vo(e):0}else return!1}}function vo(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function Iue(e,t){for(;;){if(e.nodeType==3&&t)return e;if(e.nodeType==1&&t>0){if(e.contentEditable=="false")return null;e=e.childNodes[t-1],t=vo(e)}else if(e.parentNode&&!Iu(e))t=Gn(e),e=e.parentNode;else return null}}function Lue(e,t){for(;;){if(e.nodeType==3&&t<e.nodeValue.length)return e;if(e.nodeType==1&&t<e.childNodes.length){if(e.contentEditable=="false")return null;e=e.childNodes[t],t=0}else if(e.parentNode&&!Iu(e))t=Gn(e)+1,e=e.parentNode;else return null}}function Due(e,t,n){for(let i=t==0,o=t==vo(e);i||o;){if(e==n)return!0;let s=Gn(e);if(e=e.parentNode,!e)return!1;i=i&&s==0,o=o&&s==vo(e)}}function Iu(e){let t;for(let n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}const gm=function(e){return e.focusNode&&rl(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function Na(e,t){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function Rue(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}function Pue(e,t,n){if(e.caretPositionFromPoint)try{let i=e.caretPositionFromPoint(t,n);if(i)return{node:i.offsetNode,offset:Math.min(vo(i.offsetNode),i.offset)}}catch{}if(e.caretRangeFromPoint){let i=e.caretRangeFromPoint(t,n);if(i)return{node:i.startContainer,offset:Math.min(vo(i.startContainer),i.startOffset)}}}const ys=typeof navigator<"u"?navigator:null,hC=typeof document<"u"?document:null,ba=ys&&ys.userAgent||"",Vb=/Edge\/(\d+)/.exec(ba),Px=/MSIE \d/.exec(ba),zb=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ba),Ri=!!(Px||zb||Vb),Yr=Px?document.documentMode:zb?+zb[1]:Vb?+Vb[1]:0,qo=!Ri&&/gecko\/(\d+)/i.test(ba);qo&&+(/Firefox\/(\d+)/.exec(ba)||[0,0])[1];const Nb=!Ri&&/Chrome\/(\d+)/.exec(ba),ci=!!Nb,Hx=Nb?+Nb[1]:0,Ci=!Ri&&!!ys&&/Apple Computer/.test(ys.vendor),pc=Ci&&(/Mobile\/\w+/.test(ba)||!!ys&&ys.maxTouchPoints>2),yo=pc||(ys?/Mac/.test(ys.platform):!1),Hue=ys?/Win/.test(ys.platform):!1,Zs=/Android \d/.test(ba),Lu=!!hC&&"webkitFontSmoothing"in hC.documentElement.style,Vue=Lu?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function zue(e){let t=e.defaultView&&e.defaultView.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function Vs(e,t){return typeof e=="number"?e:e[t]}function Nue(e){let t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,i=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*i}}function fC(e,t,n){let i=e.someProp("scrollThreshold")||0,o=e.someProp("scrollMargin")||5,s=e.dom.ownerDocument;for(let r=n||e.dom;r;){if(r.nodeType!=1){r=fc(r);continue}let a=r,l=a==s.body,c=l?zue(s):Nue(a),u=0,f=0;if(t.top<c.top+Vs(i,"top")?f=-(c.top-t.top+Vs(o,"top")):t.bottom>c.bottom-Vs(i,"bottom")&&(f=t.bottom-t.top>c.bottom-c.top?t.top+Vs(o,"top")-c.top:t.bottom-c.bottom+Vs(o,"bottom")),t.left<c.left+Vs(i,"left")?u=-(c.left-t.left+Vs(o,"left")):t.right>c.right-Vs(i,"right")&&(u=t.right-c.right+Vs(o,"right")),u||f)if(l)s.defaultView.scrollBy(u,f);else{let g=a.scrollLeft,v=a.scrollTop;f&&(a.scrollTop+=f),u&&(a.scrollLeft+=u);let w=a.scrollLeft-g,_=a.scrollTop-v;t={left:t.left-w,top:t.top-_,right:t.right-w,bottom:t.bottom-_}}let m=l?"fixed":getComputedStyle(r).position;if(/^(fixed|sticky)$/.test(m))break;r=m=="absolute"?r.offsetParent:fc(r)}}function Bue(e){let t=e.dom.getBoundingClientRect(),n=Math.max(0,t.top),i,o;for(let s=(t.left+t.right)/2,r=n+1;r<Math.min(innerHeight,t.bottom);r+=5){let a=e.root.elementFromPoint(s,r);if(!a||a==e.dom||!e.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=n-20){i=a,o=l.top;break}}return{refDOM:i,refTop:o,stack:Vx(e.dom)}}function Vx(e){let t=[],n=e.ownerDocument;for(let i=e;i&&(t.push({dom:i,top:i.scrollTop,left:i.scrollLeft}),e!=n);i=fc(i));return t}function Fue({refDOM:e,refTop:t,stack:n}){let i=e?e.getBoundingClientRect().top:0;zx(n,i==0?0:i-t)}function zx(e,t){for(let n=0;n<e.length;n++){let{dom:i,top:o,left:s}=e[n];i.scrollTop!=o+t&&(i.scrollTop=o+t),i.scrollLeft!=s&&(i.scrollLeft=s)}}let zl=null;function Wue(e){if(e.setActive)return e.setActive();if(zl)return e.focus(zl);let t=Vx(e);e.focus(zl==null?{get preventScroll(){return zl={preventScroll:!0},!0}}:void 0),zl||(zl=!1,zx(t,0))}function Nx(e,t){let n,i=2e8,o,s=0,r=t.top,a=t.top,l,c;for(let u=e.firstChild,f=0;u;u=u.nextSibling,f++){let m;if(u.nodeType==1)m=u.getClientRects();else if(u.nodeType==3)m=Ks(u).getClientRects();else continue;for(let g=0;g<m.length;g++){let v=m[g];if(v.top<=r&&v.bottom>=a){r=Math.max(v.bottom,r),a=Math.min(v.top,a);let w=v.left>t.left?v.left-t.left:v.right<t.left?t.left-v.right:0;if(w<i){n=u,i=w,o=w&&n.nodeType==3?{left:v.right<t.left?v.right:v.left,top:t.top}:t,u.nodeType==1&&w&&(s=f+(t.left>=(v.left+v.right)/2?1:0));continue}}else v.top>t.top&&!l&&v.left<=t.left&&v.right>=t.left&&(l=u,c={left:Math.max(v.left,Math.min(v.right,t.left)),top:v.top});!n&&(t.left>=v.right&&t.top>=v.top||t.left>=v.left&&t.top>=v.bottom)&&(s=f+1)}}return!n&&l&&(n=l,o=c,i=0),n&&n.nodeType==3?Uue(n,o):!n||i&&n.nodeType==1?{node:e,offset:s}:Nx(n,o)}function Uue(e,t){let n=e.nodeValue.length,i=document.createRange();for(let o=0;o<n;o++){i.setEnd(e,o+1),i.setStart(e,o);let s=Mr(i,1);if(s.top!=s.bottom&&p0(t,s))return{node:e,offset:o+(t.left>=(s.left+s.right)/2?1:0)}}return{node:e,offset:0}}function p0(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function jue(e,t){let n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}function que(e,t,n){let{node:i,offset:o}=Nx(t,n),s=-1;if(i.nodeType==1&&!i.firstChild){let r=i.getBoundingClientRect();s=r.left!=r.right&&n.left>(r.left+r.right)/2?1:-1}return e.docView.posFromDOM(i,o,s)}function Kue(e,t,n,i){let o=-1;for(let s=t,r=!1;s!=e.dom;){let a=e.docView.nearestDesc(s,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&(!r&&l.left>i.left||l.top>i.top?o=a.posBefore:(!r&&l.right<i.left||l.bottom<i.top)&&(o=a.posAfter),r=!0),!a.contentDOM&&o<0&&!a.node.isText))return(a.node.isBlock?i.top<(l.top+l.bottom)/2:i.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;s=a.dom.parentNode}return o>-1?o:e.docView.posFromDOM(t,n,-1)}function Bx(e,t,n){let i=e.childNodes.length;if(i&&n.top<n.bottom)for(let o=Math.max(0,Math.min(i-1,Math.floor(i*(t.top-n.top)/(n.bottom-n.top))-2)),s=o;;){let r=e.childNodes[s];if(r.nodeType==1){let a=r.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(p0(t,c))return Bx(r,t,c)}}if((s=(s+1)%i)==o)break}return e}function Gue(e,t){let n=e.dom.ownerDocument,i,o=0,s=Pue(n,t.left,t.top);s&&({node:i,offset:o}=s);let r=(e.root.elementFromPoint?e.root:n).elementFromPoint(t.left,t.top),a;if(!r||!e.dom.contains(r.nodeType!=1?r.parentNode:r)){let c=e.dom.getBoundingClientRect();if(!p0(t,c)||(r=Bx(e.dom,t,c),!r))return null}if(Ci)for(let c=r;i&&c;c=fc(c))c.draggable&&(i=void 0);if(r=jue(r,t),i){if(qo&&i.nodeType==1&&(o=Math.min(o,i.childNodes.length),o<i.childNodes.length)){let u=i.childNodes[o],f;u.nodeName=="IMG"&&(f=u.getBoundingClientRect()).right<=t.left&&f.bottom>t.top&&o++}let c;Lu&&o&&i.nodeType==1&&(c=i.childNodes[o-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=t.top&&o--,i==e.dom&&o==i.childNodes.length-1&&i.lastChild.nodeType==1&&t.top>i.lastChild.getBoundingClientRect().bottom?a=e.state.doc.content.size:(o==0||i.nodeType!=1||i.childNodes[o-1].nodeName!="BR")&&(a=Kue(e,i,o,t))}a==null&&(a=que(e,r,t));let l=e.docView.nearestDesc(r,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function pC(e){return e.top<e.bottom||e.left<e.right}function Mr(e,t){let n=e.getClientRects();if(n.length){let i=n[t<0?0:n.length-1];if(pC(i))return i}return Array.prototype.find.call(n,pC)||e.getBoundingClientRect()}const Jue=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Fx(e,t,n){let{node:i,offset:o,atom:s}=e.docView.domFromPos(t,n<0?-1:1),r=Lu||qo;if(i.nodeType==3)if(r&&(Jue.test(i.nodeValue)||(n<0?!o:o==i.nodeValue.length))){let l=Mr(Ks(i,o,o),n);if(qo&&o&&/\s/.test(i.nodeValue[o-1])&&o<i.nodeValue.length){let c=Mr(Ks(i,o-1,o-1),-1);if(c.top==l.top){let u=Mr(Ks(i,o,o+1),-1);if(u.top!=l.top)return rd(u,u.left<c.left)}}return l}else{let l=o,c=o,u=n<0?1:-1;return n<0&&!o?(c++,u=-1):n>=0&&o==i.nodeValue.length?(l--,u=1):n<0?l--:c++,rd(Mr(Ks(i,l,c),u),u<0)}if(!e.state.doc.resolve(t-(s||0)).parent.inlineContent){if(s==null&&o&&(n<0||o==vo(i))){let l=i.childNodes[o-1];if(l.nodeType==1)return k1(l.getBoundingClientRect(),!1)}if(s==null&&o<vo(i)){let l=i.childNodes[o];if(l.nodeType==1)return k1(l.getBoundingClientRect(),!0)}return k1(i.getBoundingClientRect(),n>=0)}if(s==null&&o&&(n<0||o==vo(i))){let l=i.childNodes[o-1],c=l.nodeType==3?Ks(l,vo(l)-(r?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return rd(Mr(c,1),!1)}if(s==null&&o<vo(i)){let l=i.childNodes[o];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?Ks(l,0,r?0:1):l.nodeType==1?l:null:null;if(c)return rd(Mr(c,-1),!0)}return rd(Mr(i.nodeType==3?Ks(i):i,-n),n>=0)}function rd(e,t){if(e.width==0)return e;let n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function k1(e,t){if(e.height==0)return e;let n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function Wx(e,t,n){let i=e.state,o=e.root.activeElement;i!=t&&e.updateState(t),o!=e.dom&&e.focus();try{return n()}finally{i!=t&&e.updateState(i),o!=e.dom&&o&&o.focus()}}function Yue(e,t,n){let i=t.selection,o=n=="up"?i.$from:i.$to;return Wx(e,t,()=>{let{node:s}=e.docView.domFromPos(o.pos,n=="up"?-1:1);for(;;){let a=e.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.contentDOM||a.dom;break}s=a.dom.parentNode}let r=Fx(e,o.pos,1);for(let a=s.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=Ks(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let u=l[c];if(u.bottom>u.top+1&&(n=="up"?r.top-u.top>(u.bottom-r.top)*2:u.bottom-r.bottom>(r.bottom-u.top)*2))return!1}}return!0})}const Zue=/[\u0590-\u08ac]/;function Xue(e,t,n){let{$head:i}=t.selection;if(!i.parent.isTextblock)return!1;let o=i.parentOffset,s=!o,r=o==i.parent.content.size,a=e.domSelection();return a?!Zue.test(i.parent.textContent)||!a.modify?n=="left"||n=="backward"?s:r:Wx(e,t,()=>{let{focusNode:l,focusOffset:c,anchorNode:u,anchorOffset:f}=e.domSelectionRange(),m=a.caretBidiLevel;a.modify("move",n,"character");let g=i.depth?e.docView.domAfterPos(i.before()):e.dom,{focusNode:v,focusOffset:w}=e.domSelectionRange(),_=v&&!g.contains(v.nodeType==1?v:v.parentNode)||l==v&&c==w;try{a.collapse(u,f),l&&(l!=u||c!=f)&&a.extend&&a.extend(l,c)}catch{}return m!=null&&(a.caretBidiLevel=m),_}):i.pos==i.start()||i.pos==i.end()}let mC=null,gC=null,bC=!1;function Que(e,t,n){return mC==t&&gC==n?bC:(mC=t,gC=n,bC=n=="up"||n=="down"?Yue(e,t,n):Xue(e,t,n))}const So=0,yC=1,Fa=2,vs=3;class Du{constructor(t,n,i,o){this.parent=t,this.children=n,this.dom=i,this.contentDOM=o,this.dirty=So,i.pmViewDesc=this}matchesWidget(t){return!1}matchesMark(t){return!1}matchesNode(t,n,i){return!1}matchesHack(t){return!1}parseRule(){return null}stopEvent(t){return!1}get size(){let t=0;for(let n=0;n<this.children.length;n++)t+=this.children[n].size;return t}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let t=0;t<this.children.length;t++)this.children[t].destroy()}posBeforeChild(t){for(let n=0,i=this.posAtStart;;n++){let o=this.children[n];if(o==t)return i;i+=o.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(t,n,i){if(this.contentDOM&&this.contentDOM.contains(t.nodeType==1?t:t.parentNode))if(i<0){let s,r;if(t==this.contentDOM)s=t.childNodes[n-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;s=t.previousSibling}for(;s&&!((r=s.pmViewDesc)&&r.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(r)+r.size:this.posAtStart}else{let s,r;if(t==this.contentDOM)s=t.childNodes[n];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;s=t.nextSibling}for(;s&&!((r=s.pmViewDesc)&&r.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(r):this.posAtEnd}let o;if(t==this.dom&&this.contentDOM)o=n>Gn(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))o=t.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=t;;s=s.parentNode){if(s==this.dom){o=!1;break}if(s.previousSibling)break}if(o==null&&n==t.childNodes.length)for(let s=t;;s=s.parentNode){if(s==this.dom){o=!0;break}if(s.nextSibling)break}}return o??i>0?this.posAtEnd:this.posAtStart}nearestDesc(t,n=!1){for(let i=!0,o=t;o;o=o.parentNode){let s=this.getDesc(o),r;if(s&&(!n||s.node))if(i&&(r=s.nodeDOM)&&!(r.nodeType==1?r.contains(t.nodeType==1?t:t.parentNode):r==t))i=!1;else return s}}getDesc(t){let n=t.pmViewDesc;for(let i=n;i;i=i.parent)if(i==this)return n}posFromDOM(t,n,i){for(let o=t;o;o=o.parentNode){let s=this.getDesc(o);if(s)return s.localPosFromDOM(t,n,i)}return-1}descAt(t){for(let n=0,i=0;n<this.children.length;n++){let o=this.children[n],s=i+o.size;if(i==t&&s!=i){for(;!o.border&&o.children.length;)for(let r=0;r<o.children.length;r++){let a=o.children[r];if(a.size){o=a;break}}return o}if(t<s)return o.descAt(t-i-o.border);i=s}}domFromPos(t,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:t+1};let i=0,o=0;for(let s=0;i<this.children.length;i++){let r=this.children[i],a=s+r.size;if(a>t||r instanceof jx){o=t-s;break}s=a}if(o)return this.children[i].domFromPos(o-this.children[i].border,n);for(let s;i&&!(s=this.children[i-1]).size&&s instanceof Ux&&s.side>=0;i--);if(n<=0){let s,r=!0;for(;s=i?this.children[i-1]:null,!(!s||s.dom.parentNode==this.contentDOM);i--,r=!1);return s&&n&&r&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?Gn(s.dom)+1:0}}else{let s,r=!0;for(;s=i<this.children.length?this.children[i]:null,!(!s||s.dom.parentNode==this.contentDOM);i++,r=!1);return s&&r&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?Gn(s.dom):this.contentDOM.childNodes.length}}}parseRange(t,n,i=0){if(this.children.length==0)return{node:this.contentDOM,from:t,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let o=-1,s=-1;for(let r=i,a=0;;a++){let l=this.children[a],c=r+l.size;if(o==-1&&t<=c){let u=r+l.border;if(t>=u&&n<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(t,n,u);t=r;for(let f=a;f>0;f--){let m=this.children[f-1];if(m.size&&m.dom.parentNode==this.contentDOM&&!m.emptyChildAt(1)){o=Gn(m.dom)+1;break}t-=m.size}o==-1&&(o=0)}if(o>-1&&(c>n||a==this.children.length-1)){n=c;for(let u=a+1;u<this.children.length;u++){let f=this.children[u];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){s=Gn(f.dom);break}n+=f.size}s==-1&&(s=this.contentDOM.childNodes.length);break}r=c}return{node:this.contentDOM,from:t,to:n,fromOffset:o,toOffset:s}}emptyChildAt(t){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[t<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(t)}domAfterPos(t){let{node:n,offset:i}=this.domFromPos(t,0);if(n.nodeType!=1||i==n.childNodes.length)throw new RangeError("No node after pos "+t);return n.childNodes[i]}setSelection(t,n,i,o=!1){let s=Math.min(t,n),r=Math.max(t,n);for(let g=0,v=0;g<this.children.length;g++){let w=this.children[g],_=v+w.size;if(s>v&&r<_)return w.setSelection(t-v-w.border,n-v-w.border,i,o);v=_}let a=this.domFromPos(t,t?-1:1),l=n==t?a:this.domFromPos(n,n?-1:1),c=i.root.getSelection(),u=i.domSelectionRange(),f=!1;if((qo||Ci)&&t==n){let{node:g,offset:v}=a;if(g.nodeType==3){if(f=!!(v&&g.nodeValue[v-1]==`
`),f&&v==g.nodeValue.length)for(let w=g,_;w;w=w.parentNode){if(_=w.nextSibling){_.nodeName=="BR"&&(a=l={node:_.parentNode,offset:Gn(_)+1});break}let k=w.pmViewDesc;if(k&&k.node&&k.node.isBlock)break}}else{let w=g.childNodes[v-1];f=w&&(w.nodeName=="BR"||w.contentEditable=="false")}}if(qo&&u.focusNode&&u.focusNode!=l.node&&u.focusNode.nodeType==1){let g=u.focusNode.childNodes[u.focusOffset];g&&g.contentEditable=="false"&&(o=!0)}if(!(o||f&&Ci)&&rl(a.node,a.offset,u.anchorNode,u.anchorOffset)&&rl(l.node,l.offset,u.focusNode,u.focusOffset))return;let m=!1;if((c.extend||t==n)&&!f){c.collapse(a.node,a.offset);try{t!=n&&c.extend(l.node,l.offset),m=!0}catch{}}if(!m){if(t>n){let v=a;a=l,l=v}let g=document.createRange();g.setEnd(l.node,l.offset),g.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(g)}}ignoreMutation(t){return!this.contentDOM&&t.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(t,n){for(let i=0,o=0;o<this.children.length;o++){let s=this.children[o],r=i+s.size;if(i==r?t<=r&&n>=i:t<r&&n>i){let a=i+s.border,l=r-s.border;if(t>=a&&n<=l){this.dirty=t==i||n==r?Fa:yC,t==a&&n==l&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=vs:s.markDirty(t-a,n-a);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?Fa:vs}i=r}this.dirty=Fa}markParentsDirty(){let t=1;for(let n=this.parent;n;n=n.parent,t++){let i=t==1?Fa:yC;n.dirty<i&&(n.dirty=i)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(t){return!1}}class Ux extends Du{constructor(t,n,i,o){let s,r=n.type.toDOM;if(typeof r=="function"&&(r=r(i,()=>{if(!s)return o;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(r.nodeType!=1){let a=document.createElement("span");a.appendChild(r),r=a}r.contentEditable="false",r.classList.add("ProseMirror-widget")}super(t,[],r,null),this.widget=n,this.widget=n,s=this}matchesWidget(t){return this.dirty==So&&t.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(t){let n=this.widget.spec.stopEvent;return n?n(t):!1}ignoreMutation(t){return t.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class ehe extends Du{constructor(t,n,i,o){super(t,[],n,null),this.textDOM=i,this.text=o}get size(){return this.text.length}localPosFromDOM(t,n){return t!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(t){return{node:this.textDOM,offset:t}}ignoreMutation(t){return t.type==="characterData"&&t.target.nodeValue==t.oldValue}}class al extends Du{constructor(t,n,i,o,s){super(t,[],i,o),this.mark=n,this.spec=s}static create(t,n,i,o){let s=o.nodeViews[n.type.name],r=s&&s(n,o,i);return(!r||!r.dom)&&(r=gl.renderSpec(document,n.type.spec.toDOM(n,i),null,n.attrs)),new al(t,n,r.dom,r.contentDOM||r.dom,r)}parseRule(){return this.dirty&vs||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(t){return this.dirty!=vs&&this.mark.eq(t)}markDirty(t,n){if(super.markDirty(t,n),this.dirty!=So){let i=this.parent;for(;!i.node;)i=i.parent;i.dirty<this.dirty&&(i.dirty=this.dirty),this.dirty=So}}slice(t,n,i){let o=al.create(this.parent,this.mark,!0,i),s=this.children,r=this.size;n<r&&(s=Fb(s,n,r,i)),t>0&&(s=Fb(s,0,t,i));for(let a=0;a<s.length;a++)s[a].parent=o;return o.children=s,o}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Zr extends Du{constructor(t,n,i,o,s,r,a,l,c){super(t,[],s,r),this.node=n,this.outerDeco=i,this.innerDeco=o,this.nodeDOM=a}static create(t,n,i,o,s,r){let a=s.nodeViews[n.type.name],l,c=a&&a(n,s,()=>{if(!l)return r;if(l.parent)return l.parent.posBeforeChild(l)},i,o),u=c&&c.dom,f=c&&c.contentDOM;if(n.isText){if(!u)u=document.createTextNode(n.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:f}=gl.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!f&&!n.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),n.type.spec.draggable&&(u.draggable=!0));let m=u;return u=Gx(u,i,n),c?l=new the(t,n,i,o,u,f||null,m,c,s,r+1):n.isText?new bm(t,n,i,o,u,m,s):new Zr(t,n,i,o,u,f||null,m,s,r+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let t={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(t.preserveWhitespace="full"),!this.contentDOM)t.getContent=()=>this.node.content;else if(!this.contentLost)t.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let i=this.children[n];if(this.dom.contains(i.dom.parentNode)){t.contentElement=i.dom.parentNode;break}}t.contentElement||(t.getContent=()=>be.empty)}return t}matchesNode(t,n,i){return this.dirty==So&&t.eq(this.node)&&ip(n,this.outerDeco)&&i.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(t,n){let i=this.node.inlineContent,o=n,s=t.composing?this.localCompositionInfo(t,n):null,r=s&&s.pos>-1?s:null,a=s&&s.pos<0,l=new ihe(this,r&&r.node,t);rhe(this.node,this.innerDeco,(c,u,f)=>{c.spec.marks?l.syncToMarks(c.spec.marks,i,t):c.type.side>=0&&!f&&l.syncToMarks(u==this.node.childCount?jt.none:this.node.child(u).marks,i,t),l.placeWidget(c,t,o)},(c,u,f,m)=>{l.syncToMarks(c.marks,i,t);let g;l.findNodeMatch(c,u,f,m)||a&&t.state.selection.from>o&&t.state.selection.to<o+c.nodeSize&&(g=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(c,u,f,g,t)||l.updateNextNode(c,u,f,t,m,o)||l.addNode(c,u,f,t,o),o+=c.nodeSize}),l.syncToMarks([],i,t),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==Fa)&&(r&&this.protectLocalComposition(t,r),qx(this.contentDOM,this.children,t),pc&&ahe(this.dom))}localCompositionInfo(t,n){let{from:i,to:o}=t.state.selection;if(!(t.state.selection instanceof Ze)||i<n||o>n+this.node.content.size)return null;let s=t.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let r=s.nodeValue,a=lhe(this.node.content,r,i-n,o-n);return a<0?null:{node:s,pos:a,text:r}}else return{node:s,pos:-1,text:""}}protectLocalComposition(t,{node:n,pos:i,text:o}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let r=new ehe(this,s,n,o);t.input.compositionNodes.push(r),this.children=Fb(this.children,i,i+o.length,t,r)}update(t,n,i,o){return this.dirty==vs||!t.sameMarkup(this.node)?!1:(this.updateInner(t,n,i,o),!0)}updateInner(t,n,i,o){this.updateOuterDeco(n),this.node=t,this.innerDeco=i,this.contentDOM&&this.updateChildren(o,this.posAtStart),this.dirty=So}updateOuterDeco(t){if(ip(t,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,i=this.dom;this.dom=Kx(this.dom,this.nodeDOM,Bb(this.outerDeco,this.node,n),Bb(t,this.node,n)),this.dom!=i&&(i.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=t}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function vC(e,t,n,i,o){Gx(i,t,e);let s=new Zr(void 0,e,t,n,i,i,i,o,0);return s.contentDOM&&s.updateChildren(o,0),s}class bm extends Zr{constructor(t,n,i,o,s,r,a){super(t,n,i,o,s,null,r,a,0)}parseRule(){let t=this.nodeDOM.parentNode;for(;t&&t!=this.dom&&!t.pmIsDeco;)t=t.parentNode;return{skip:t||!0}}update(t,n,i,o){return this.dirty==vs||this.dirty!=So&&!this.inParent()||!t.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=So||t.text!=this.node.text)&&t.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=t.text,o.trackWrites==this.nodeDOM&&(o.trackWrites=null)),this.node=t,this.dirty=So,!0)}inParent(){let t=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==t)return!0;return!1}domFromPos(t){return{node:this.nodeDOM,offset:t}}localPosFromDOM(t,n,i){return t==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(t,n,i)}ignoreMutation(t){return t.type!="characterData"&&t.type!="selection"}slice(t,n,i){let o=this.node.cut(t,n),s=document.createTextNode(o.text);return new bm(this.parent,o,this.outerDeco,this.innerDeco,s,s,i)}markDirty(t,n){super.markDirty(t,n),this.dom!=this.nodeDOM&&(t==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=vs)}get domAtom(){return!1}isText(t){return this.node.text==t}}class jx extends Du{parseRule(){return{ignore:!0}}matchesHack(t){return this.dirty==So&&this.dom.nodeName==t}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class the extends Zr{constructor(t,n,i,o,s,r,a,l,c,u){super(t,n,i,o,s,r,a,c,u),this.spec=l}update(t,n,i,o){if(this.dirty==vs)return!1;if(this.spec.update&&(this.node.type==t.type||this.spec.multiType)){let s=this.spec.update(t,n,i);return s&&this.updateInner(t,n,i,o),s}else return!this.contentDOM&&!t.isLeaf?!1:super.update(t,n,i,o)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(t,n,i,o){this.spec.setSelection?this.spec.setSelection(t,n,i.root):super.setSelection(t,n,i,o)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(t){return this.spec.stopEvent?this.spec.stopEvent(t):!1}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}}function qx(e,t,n){let i=e.firstChild,o=!1;for(let s=0;s<t.length;s++){let r=t[s],a=r.dom;if(a.parentNode==e){for(;a!=i;)i=wC(i),o=!0;i=i.nextSibling}else o=!0,e.insertBefore(a,i);if(r instanceof al){let l=i?i.previousSibling:e.lastChild;qx(r.contentDOM,r.children,n),i=l?l.nextSibling:e.firstChild}}for(;i;)i=wC(i),o=!0;o&&n.trackWrites==e&&(n.trackWrites=null)}const Dd=function(e){e&&(this.nodeName=e)};Dd.prototype=Object.create(null);const Wa=[new Dd];function Bb(e,t,n){if(e.length==0)return Wa;let i=n?Wa[0]:new Dd,o=[i];for(let s=0;s<e.length;s++){let r=e[s].type.attrs;if(r){r.nodeName&&o.push(i=new Dd(r.nodeName));for(let a in r){let l=r[a];l!=null&&(n&&o.length==1&&o.push(i=new Dd(t.isInline?"span":"div")),a=="class"?i.class=(i.class?i.class+" ":"")+l:a=="style"?i.style=(i.style?i.style+";":"")+l:a!="nodeName"&&(i[a]=l))}}}return o}function Kx(e,t,n,i){if(n==Wa&&i==Wa)return t;let o=t;for(let s=0;s<i.length;s++){let r=i[s],a=n[s];if(s){let l;a&&a.nodeName==r.nodeName&&o!=e&&(l=o.parentNode)&&l.nodeName.toLowerCase()==r.nodeName||(l=document.createElement(r.nodeName),l.pmIsDeco=!0,l.appendChild(o),a=Wa[0]),o=l}nhe(o,a||Wa[0],r)}return o}function nhe(e,t,n){for(let i in t)i!="class"&&i!="style"&&i!="nodeName"&&!(i in n)&&e.removeAttribute(i);for(let i in n)i!="class"&&i!="style"&&i!="nodeName"&&n[i]!=t[i]&&e.setAttribute(i,n[i]);if(t.class!=n.class){let i=t.class?t.class.split(" ").filter(Boolean):[],o=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<i.length;s++)o.indexOf(i[s])==-1&&e.classList.remove(i[s]);for(let s=0;s<o.length;s++)i.indexOf(o[s])==-1&&e.classList.add(o[s]);e.classList.length==0&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style){let i=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,o;for(;o=i.exec(t.style);)e.style.removeProperty(o[1])}n.style&&(e.style.cssText+=n.style)}}function Gx(e,t,n){return Kx(e,e,Wa,Bb(t,n,e.nodeType!=1))}function ip(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function wC(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class ihe{constructor(t,n,i){this.lock=n,this.view=i,this.index=0,this.stack=[],this.changed=!1,this.top=t,this.preMatch=ohe(t.node.content,t)}destroyBetween(t,n){if(t!=n){for(let i=t;i<n;i++)this.top.children[i].destroy();this.top.children.splice(t,n-t),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(t,n,i){let o=0,s=this.stack.length>>1,r=Math.min(s,t.length);for(;o<r&&(o==s-1?this.top:this.stack[o+1<<1]).matchesMark(t[o])&&t[o].type.spec.spanning!==!1;)o++;for(;o<s;)this.destroyRest(),this.top.dirty=So,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<t.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(t[s])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=al.create(this.top,t[s],n,i);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,s++}}findNodeMatch(t,n,i,o){let s=-1,r;if(o>=this.preMatch.index&&(r=this.preMatch.matches[o-this.preMatch.index]).parent==this.top&&r.matchesNode(t,n,i))s=this.top.children.indexOf(r,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(t,n,i)&&!this.preMatch.matched.has(c)){s=a;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(t,n,i,o,s){let r=this.top.children[o];return r.dirty==vs&&r.dom==r.contentDOM&&(r.dirty=Fa),r.update(t,n,i,s)?(this.destroyBetween(this.index,o),this.index++,!0):!1}findIndexWithChild(t){for(;;){let n=t.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let i=t.pmViewDesc;if(i){for(let o=this.index;o<this.top.children.length;o++)if(this.top.children[o]==i)return o}return-1}t=n}}updateNextNode(t,n,i,o,s,r){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof Zr){let c=this.preMatch.matched.get(l);if(c!=null&&c!=s)return!1;let u=l.dom,f,m=this.isLocked(u)&&!(t.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==t.text&&l.dirty!=vs&&ip(n,l.outerDeco));if(!m&&l.update(t,n,i,o))return this.destroyBetween(this.index,a),l.dom!=u&&(this.changed=!0),this.index++,!0;if(!m&&(f=this.recreateWrapper(l,t,n,i,o,r)))return this.destroyBetween(this.index,a),this.top.children[this.index]=f,f.contentDOM&&(f.dirty=Fa,f.updateChildren(o,r+1),f.dirty=So),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(t,n,i,o,s,r){if(t.dirty||n.isAtom||!t.children.length||!t.node.content.eq(n.content)||!ip(i,t.outerDeco)||!o.eq(t.innerDeco))return null;let a=Zr.create(this.top,n,i,o,s,r);if(a.contentDOM){a.children=t.children,t.children=[];for(let l of a.children)l.parent=a}return t.destroy(),a}addNode(t,n,i,o,s){let r=Zr.create(this.top,t,n,i,o,s);r.contentDOM&&r.updateChildren(o,s+1),this.top.children.splice(this.index++,0,r),this.changed=!0}placeWidget(t,n,i){let o=this.index<this.top.children.length?this.top.children[this.index]:null;if(o&&o.matchesWidget(t)&&(t==o.widget||!o.widget.type.toDOM.parentNode))this.index++;else{let s=new Ux(this.top,t,n,i);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let t=this.top.children[this.index-1],n=this.top;for(;t instanceof al;)n=t,t=n.children[n.children.length-1];(!t||!(t instanceof bm)||/\n$/.test(t.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(t.node.text))&&((Ci||ci)&&t&&t.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(t,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(t))this.index++;else{let i=document.createElement(t);t=="IMG"&&(i.className="ProseMirror-separator",i.alt=""),t=="BR"&&(i.className="ProseMirror-trailingBreak");let o=new jx(this.top,[],i,null);n!=this.top?n.children.push(o):n.children.splice(this.index++,0,o),this.changed=!0}}isLocked(t){return this.lock&&(t==this.lock||t.nodeType==1&&t.contains(this.lock.parentNode))}}function ohe(e,t){let n=t,i=n.children.length,o=e.childCount,s=new Map,r=[];e:for(;o>0;){let a;for(;;)if(i){let c=n.children[i-1];if(c instanceof al)n=c,i=c.children.length;else{a=c,i--;break}}else{if(n==t)break e;i=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=e.child(o-1))break;--o,s.set(a,o),r.push(a)}}return{index:o,matched:s,matches:r.reverse()}}function she(e,t){return e.type.side-t.type.side}function rhe(e,t,n,i){let o=t.locals(e),s=0;if(o.length==0){for(let c=0;c<e.childCount;c++){let u=e.child(c);i(u,o,t.forChild(s,u),c),s+=u.nodeSize}return}let r=0,a=[],l=null;for(let c=0;;){let u,f;for(;r<o.length&&o[r].to==s;){let _=o[r++];_.widget&&(u?(f||(f=[u])).push(_):u=_)}if(u)if(f){f.sort(she);for(let _=0;_<f.length;_++)n(f[_],c,!!l)}else n(u,c,!!l);let m,g;if(l)g=-1,m=l,l=null;else if(c<e.childCount)g=c,m=e.child(c++);else break;for(let _=0;_<a.length;_++)a[_].to<=s&&a.splice(_--,1);for(;r<o.length&&o[r].from<=s&&o[r].to>s;)a.push(o[r++]);let v=s+m.nodeSize;if(m.isText){let _=v;r<o.length&&o[r].from<_&&(_=o[r].from);for(let k=0;k<a.length;k++)a[k].to<_&&(_=a[k].to);_<v&&(l=m.cut(_-s),m=m.cut(0,_-s),v=_,g=-1)}else for(;r<o.length&&o[r].to<v;)r++;let w=m.isInline&&!m.isLeaf?a.filter(_=>!_.inline):a.slice();i(m,w,t.forChild(s,m),g),s=v}}function ahe(e){if(e.nodeName=="UL"||e.nodeName=="OL"){let t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}function lhe(e,t,n,i){for(let o=0,s=0;o<e.childCount&&s<=i;){let r=e.child(o++),a=s;if(s+=r.nodeSize,!r.isText)continue;let l=r.text;for(;o<e.childCount;){let c=e.child(o++);if(s+=c.nodeSize,!c.isText)break;l+=c.text}if(s>=n){if(s>=i&&l.slice(i-t.length-a,i-a)==t)return i-t.length;let c=a<i?l.lastIndexOf(t,i-a-1):-1;if(c>=0&&c+t.length+a>=n)return a+c;if(n==i&&l.length>=i+t.length-a&&l.slice(i-a,i-a+t.length)==t)return i}}return-1}function Fb(e,t,n,i,o){let s=[];for(let r=0,a=0;r<e.length;r++){let l=e[r],c=a,u=a+=l.size;c>=n||u<=t?s.push(l):(c<t&&s.push(l.slice(0,t-c,i)),o&&(s.push(o),o=void 0),u>n&&s.push(l.slice(n-c,l.size,i)))}return s}function m0(e,t=null){let n=e.domSelectionRange(),i=e.state.doc;if(!n.focusNode)return null;let o=e.docView.nearestDesc(n.focusNode),s=o&&o.size==0,r=e.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(r<0)return null;let a=i.resolve(r),l,c;if(gm(n)){for(l=r;o&&!o.node;)o=o.parent;let f=o.node;if(o&&f.isAtom&&Ye.isSelectable(f)&&o.parent&&!(f.isInline&&Due(n.focusNode,n.focusOffset,o.dom))){let m=o.posBefore;c=new Ye(r==m?a:i.resolve(m))}}else{if(n instanceof e.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let f=r,m=r;for(let g=0;g<n.rangeCount;g++){let v=n.getRangeAt(g);f=Math.min(f,e.docView.posFromDOM(v.startContainer,v.startOffset,1)),m=Math.max(m,e.docView.posFromDOM(v.endContainer,v.endOffset,-1))}if(f<0)return null;[l,r]=m==e.state.selection.anchor?[m,f]:[f,m],a=i.resolve(r)}else l=e.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(l<0)return null}let u=i.resolve(l);if(!c){let f=t=="pointer"||e.state.selection.head<a.pos&&!s?1:-1;c=g0(e,u,a,f)}return c}function Jx(e){return e.editable?e.hasFocus():Zx(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function or(e,t=!1){let n=e.state.selection;if(Yx(e,n),!!Jx(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&ci){let i=e.domSelectionRange(),o=e.domObserver.currentSelection;if(i.anchorNode&&o.anchorNode&&rl(i.anchorNode,i.anchorOffset,o.anchorNode,o.anchorOffset)){e.input.mouseDown.delayedSelectionSync=!0,e.domObserver.setCurSelection();return}}if(e.domObserver.disconnectSelection(),e.cursorWrapper)dhe(e);else{let{anchor:i,head:o}=n,s,r;_C&&!(n instanceof Ze)&&(n.$from.parent.inlineContent||(s=CC(e,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(r=CC(e,n.to))),e.docView.setSelection(i,o,e,t),_C&&(s&&AC(s),r&&AC(r)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&che(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}const _C=Ci||ci&&Hx<63;function CC(e,t){let{node:n,offset:i}=e.docView.domFromPos(t,0),o=i<n.childNodes.length?n.childNodes[i]:null,s=i?n.childNodes[i-1]:null;if(Ci&&o&&o.contentEditable=="false")return S1(o);if((!o||o.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(o)return S1(o);if(s)return S1(s)}}function S1(e){return e.contentEditable="true",Ci&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function AC(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function che(e){let t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.input.hideSelectionGuard);let n=e.domSelectionRange(),i=n.anchorNode,o=n.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=()=>{(n.anchorNode!=i||n.anchorOffset!=o)&&(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout(()=>{(!Jx(e)||e.state.selection.visible)&&e.dom.classList.remove("ProseMirror-hideselection")},20))})}function dhe(e){let t=e.domSelection(),n=document.createRange();if(!t)return;let i=e.cursorWrapper.dom,o=i.nodeName=="IMG";o?n.setStart(i.parentNode,Gn(i)+1):n.setStart(i,0),n.collapse(!0),t.removeAllRanges(),t.addRange(n),!o&&!e.state.selection.visible&&Ri&&Yr<=11&&(i.disabled=!0,i.disabled=!1)}function Yx(e,t){if(t instanceof Ye){let n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(kC(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else kC(e)}function kC(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function g0(e,t,n,i){return e.someProp("createSelectionBetween",o=>o(e,t,n))||Ze.between(t,n,i)}function SC(e){return e.editable&&!e.hasFocus()?!1:Zx(e)}function Zx(e){let t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(t.anchorNode.nodeType==3?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(t.focusNode.nodeType==3?t.focusNode.parentNode:t.focusNode))}catch{return!1}}function uhe(e){let t=e.docView.domFromPos(e.state.selection.anchor,0),n=e.domSelectionRange();return rl(t.node,t.offset,n.anchorNode,n.anchorOffset)}function Wb(e,t){let{$anchor:n,$head:i}=e.selection,o=t>0?n.max(i):n.min(i),s=o.parent.inlineContent?o.depth?e.doc.resolve(t>0?o.after():o.before()):null:o;return s&&it.findFrom(s,t)}function Ir(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function xC(e,t,n){let i=e.state.selection;if(i instanceof Ze)if(n.indexOf("s")>-1){let{$head:o}=i,s=o.textOffset?null:t<0?o.nodeBefore:o.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let r=e.state.doc.resolve(o.pos+s.nodeSize*(t<0?-1:1));return Ir(e,new Ze(i.$anchor,r))}else if(i.empty){if(e.endOfTextblock(t>0?"forward":"backward")){let o=Wb(e.state,t);return o&&o instanceof Ye?Ir(e,o):!1}else if(!(yo&&n.indexOf("m")>-1)){let o=i.$head,s=o.textOffset?null:t<0?o.nodeBefore:o.nodeAfter,r;if(!s||s.isText)return!1;let a=t<0?o.pos-s.nodeSize:o.pos;return s.isAtom||(r=e.docView.descAt(a))&&!r.contentDOM?Ye.isSelectable(s)?Ir(e,new Ye(t<0?e.state.doc.resolve(o.pos-s.nodeSize):o)):Lu?Ir(e,new Ze(e.state.doc.resolve(t<0?a:a+s.nodeSize))):!1:!1}}else return!1;else{if(i instanceof Ye&&i.node.isInline)return Ir(e,new Ze(t>0?i.$to:i.$from));{let o=Wb(e.state,t);return o?Ir(e,o):!1}}}function op(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function Rd(e,t){let n=e.pmViewDesc;return n&&n.size==0&&(t<0||e.nextSibling||e.nodeName!="BR")}function Nl(e,t){return t<0?hhe(e):fhe(e)}function hhe(e){let t=e.domSelectionRange(),n=t.focusNode,i=t.focusOffset;if(!n)return;let o,s,r=!1;for(qo&&n.nodeType==1&&i<op(n)&&Rd(n.childNodes[i],-1)&&(r=!0);;)if(i>0){if(n.nodeType!=1)break;{let a=n.childNodes[i-1];if(Rd(a,-1))o=n,s=--i;else if(a.nodeType==3)n=a,i=n.nodeValue.length;else break}}else{if(Xx(n))break;{let a=n.previousSibling;for(;a&&Rd(a,-1);)o=n.parentNode,s=Gn(a),a=a.previousSibling;if(a)n=a,i=op(n);else{if(n=n.parentNode,n==e.dom)break;i=0}}}r?Ub(e,n,i):o&&Ub(e,o,s)}function fhe(e){let t=e.domSelectionRange(),n=t.focusNode,i=t.focusOffset;if(!n)return;let o=op(n),s,r;for(;;)if(i<o){if(n.nodeType!=1)break;let a=n.childNodes[i];if(Rd(a,1))s=n,r=++i;else break}else{if(Xx(n))break;{let a=n.nextSibling;for(;a&&Rd(a,1);)s=a.parentNode,r=Gn(a)+1,a=a.nextSibling;if(a)n=a,i=0,o=op(n);else{if(n=n.parentNode,n==e.dom)break;i=o=0}}}s&&Ub(e,s,r)}function Xx(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function phe(e,t){for(;e&&t==e.childNodes.length&&!Iu(e);)t=Gn(e)+1,e=e.parentNode;for(;e&&t<e.childNodes.length;){let n=e.childNodes[t];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;e=n,t=0}}function mhe(e,t){for(;e&&!t&&!Iu(e);)t=Gn(e),e=e.parentNode;for(;e&&t;){let n=e.childNodes[t-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;e=n,t=e.childNodes.length}}function Ub(e,t,n){if(t.nodeType!=3){let s,r;(r=phe(t,n))?(t=r,n=0):(s=mhe(t,n))&&(t=s,n=s.nodeValue.length)}let i=e.domSelection();if(!i)return;if(gm(i)){let s=document.createRange();s.setEnd(t,n),s.setStart(t,n),i.removeAllRanges(),i.addRange(s)}else i.extend&&i.extend(t,n);e.domObserver.setCurSelection();let{state:o}=e;setTimeout(()=>{e.state==o&&or(e)},50)}function MC(e,t){let n=e.state.doc.resolve(t);if(!(ci||Hue)&&n.parent.inlineContent){let o=e.coordsAtPos(t);if(t>n.start()){let s=e.coordsAtPos(t-1),r=(s.top+s.bottom)/2;if(r>o.top&&r<o.bottom&&Math.abs(s.left-o.left)>1)return s.left<o.left?"ltr":"rtl"}if(t<n.end()){let s=e.coordsAtPos(t+1),r=(s.top+s.bottom)/2;if(r>o.top&&r<o.bottom&&Math.abs(s.left-o.left)>1)return s.left>o.left?"ltr":"rtl"}}return getComputedStyle(e.dom).direction=="rtl"?"rtl":"ltr"}function TC(e,t,n){let i=e.state.selection;if(i instanceof Ze&&!i.empty||n.indexOf("s")>-1||yo&&n.indexOf("m")>-1)return!1;let{$from:o,$to:s}=i;if(!o.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let r=Wb(e.state,t);if(r&&r instanceof Ye)return Ir(e,r)}if(!o.parent.inlineContent){let r=t<0?o:s,a=i instanceof eo?it.near(r,t):it.findFrom(r,t);return a?Ir(e,a):!1}return!1}function EC(e,t){if(!(e.state.selection instanceof Ze))return!0;let{$head:n,$anchor:i,empty:o}=e.state.selection;if(!n.sameParent(i))return!0;if(!o)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let s=!n.textOffset&&(t<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let r=e.state.tr;return t<0?r.delete(n.pos-s.nodeSize,n.pos):r.delete(n.pos,n.pos+s.nodeSize),e.dispatch(r),!0}return!1}function OC(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function ghe(e){if(!Ci||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:n}=e.domSelectionRange();if(t&&t.nodeType==1&&n==0&&t.firstChild&&t.firstChild.contentEditable=="false"){let i=t.firstChild;OC(e,i,"true"),setTimeout(()=>OC(e,i,"false"),20)}return!1}function bhe(e){let t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}function yhe(e,t){let n=t.keyCode,i=bhe(t);if(n==8||yo&&n==72&&i=="c")return EC(e,-1)||Nl(e,-1);if(n==46&&!t.shiftKey||yo&&n==68&&i=="c")return EC(e,1)||Nl(e,1);if(n==13||n==27)return!0;if(n==37||yo&&n==66&&i=="c"){let o=n==37?MC(e,e.state.selection.from)=="ltr"?-1:1:-1;return xC(e,o,i)||Nl(e,o)}else if(n==39||yo&&n==70&&i=="c"){let o=n==39?MC(e,e.state.selection.from)=="ltr"?1:-1:1;return xC(e,o,i)||Nl(e,o)}else{if(n==38||yo&&n==80&&i=="c")return TC(e,-1,i)||Nl(e,-1);if(n==40||yo&&n==78&&i=="c")return ghe(e)||TC(e,1,i)||Nl(e,1);if(i==(yo?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function b0(e,t){e.someProp("transformCopied",g=>{t=g(t,e)});let n=[],{content:i,openStart:o,openEnd:s}=t;for(;o>1&&s>1&&i.childCount==1&&i.firstChild.childCount==1;){o--,s--;let g=i.firstChild;n.push(g.type.name,g.attrs!=g.type.defaultAttrs?g.attrs:null),i=g.content}let r=e.someProp("clipboardSerializer")||gl.fromSchema(e.state.schema),a=oM(),l=a.createElement("div");l.appendChild(r.serializeFragment(i,{document:a}));let c=l.firstChild,u,f=0;for(;c&&c.nodeType==1&&(u=iM[c.nodeName.toLowerCase()]);){for(let g=u.length-1;g>=0;g--){let v=a.createElement(u[g]);for(;l.firstChild;)v.appendChild(l.firstChild);l.appendChild(v),f++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${o} ${s}${f?` -${f}`:""} ${JSON.stringify(n)}`);let m=e.someProp("clipboardTextSerializer",g=>g(t,e))||t.content.textBetween(0,t.content.size,`

`);return{dom:l,text:m,slice:t}}function Qx(e,t,n,i,o){let s=o.parent.type.spec.code,r,a;if(!n&&!t)return null;let l=t&&(i||s||!n);if(l){if(e.someProp("transformPastedText",m=>{t=m(t,s||i,e)}),s)return t?new Oe(be.from(e.state.schema.text(t.replace(/\r\n?/g,`
`))),0,0):Oe.empty;let f=e.someProp("clipboardTextParser",m=>m(t,o,i,e));if(f)a=f;else{let m=o.marks(),{schema:g}=e.state,v=gl.fromSchema(g);r=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(w=>{let _=r.appendChild(document.createElement("p"));w&&_.appendChild(v.serializeNode(g.text(w,m)))})}}else e.someProp("transformPastedHTML",f=>{n=f(n,e)}),r=Che(n),Lu&&Ahe(r);let c=r&&r.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let f=+u[3];f>0;f--){let m=r.firstChild;for(;m&&m.nodeType!=1;)m=m.nextSibling;if(!m)break;r=m}if(a||(a=(e.someProp("clipboardParser")||e.someProp("domParser")||Jr.fromSchema(e.state.schema)).parseSlice(r,{preserveWhitespace:!!(l||u),context:o,ruleFromNode(m){return m.nodeName=="BR"&&!m.nextSibling&&m.parentNode&&!vhe.test(m.parentNode.nodeName)?{ignore:!0}:null}})),u)a=khe($C(a,+u[1],+u[2]),u[4]);else if(a=Oe.maxOpen(whe(a.content,o),!0),a.openStart||a.openEnd){let f=0,m=0;for(let g=a.content.firstChild;f<a.openStart&&!g.type.spec.isolating;f++,g=g.firstChild);for(let g=a.content.lastChild;m<a.openEnd&&!g.type.spec.isolating;m++,g=g.lastChild);a=$C(a,f,m)}return e.someProp("transformPasted",f=>{a=f(a,e)}),a}const vhe=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function whe(e,t){if(e.childCount<2)return e;for(let n=t.depth;n>=0;n--){let o=t.node(n).contentMatchAt(t.index(n)),s,r=[];if(e.forEach(a=>{if(!r)return;let l=o.findWrapping(a.type),c;if(!l)return r=null;if(c=r.length&&s.length&&tM(l,s,a,r[r.length-1],0))r[r.length-1]=c;else{r.length&&(r[r.length-1]=nM(r[r.length-1],s.length));let u=eM(a,l);r.push(u),o=o.matchType(u.type),s=l}}),r)return be.from(r)}return e}function eM(e,t,n=0){for(let i=t.length-1;i>=n;i--)e=t[i].create(null,be.from(e));return e}function tM(e,t,n,i,o){if(o<e.length&&o<t.length&&e[o]==t[o]){let s=tM(e,t,n,i.lastChild,o+1);if(s)return i.copy(i.content.replaceChild(i.childCount-1,s));if(i.contentMatchAt(i.childCount).matchType(o==e.length-1?n.type:e[o+1]))return i.copy(i.content.append(be.from(eM(n,e,o+1))))}}function nM(e,t){if(t==0)return e;let n=e.content.replaceChild(e.childCount-1,nM(e.lastChild,t-1)),i=e.contentMatchAt(e.childCount).fillBefore(be.empty,!0);return e.copy(n.append(i))}function jb(e,t,n,i,o,s){let r=t<0?e.firstChild:e.lastChild,a=r.content;return e.childCount>1&&(s=0),o<i-1&&(a=jb(a,t,n,i,o+1,s)),o>=n&&(a=t<0?r.contentMatchAt(0).fillBefore(a,s<=o).append(a):a.append(r.contentMatchAt(r.childCount).fillBefore(be.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,r.copy(a))}function $C(e,t,n){return t<e.openStart&&(e=new Oe(jb(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new Oe(jb(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}const iM={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let IC=null;function oM(){return IC||(IC=document.implementation.createHTMLDocument("title"))}let x1=null;function _he(e){let t=window.trustedTypes;return t?(x1||(x1=t.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),x1.createHTML(e)):e}function Che(e){let t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));let n=oM().createElement("div"),i=/<([a-z][^>\s]+)/i.exec(e),o;if((o=i&&iM[i[1].toLowerCase()])&&(e=o.map(s=>"<"+s+">").join("")+e+o.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=_he(e),o)for(let s=0;s<o.length;s++)n=n.querySelector(o[s])||n;return n}function Ahe(e){let t=e.querySelectorAll(ci?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<t.length;n++){let i=t[n];i.childNodes.length==1&&i.textContent==""&&i.parentNode&&i.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),i)}}function khe(e,t){if(!e.size)return e;let n=e.content.firstChild.type.schema,i;try{i=JSON.parse(t)}catch{return e}let{content:o,openStart:s,openEnd:r}=e;for(let a=i.length-2;a>=0;a-=2){let l=n.nodes[i[a]];if(!l||l.hasRequiredAttrs())break;o=be.from(l.create(i[a+1],o)),s++,r++}return new Oe(o,s,r)}const Ai={},ki={},She={touchstart:!0,touchmove:!0};class xhe{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Mhe(e){for(let t in Ai){let n=Ai[t];e.dom.addEventListener(t,e.input.eventHandlers[t]=i=>{Ehe(e,i)&&!y0(e,i)&&(e.editable||!(i.type in ki))&&n(e,i)},She[t]?{passive:!0}:void 0)}Ci&&e.dom.addEventListener("input",()=>null),qb(e)}function Wr(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function The(e){e.domObserver.stop();for(let t in e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}function qb(e){e.someProp("handleDOMEvents",t=>{for(let n in t)e.input.eventHandlers[n]||e.dom.addEventListener(n,e.input.eventHandlers[n]=i=>y0(e,i))})}function y0(e,t){return e.someProp("handleDOMEvents",n=>{let i=n[t.type];return i?i(e,t)||t.defaultPrevented:!1})}function Ehe(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n=t.target;n!=e.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}function Ohe(e,t){!y0(e,t)&&Ai[t.type]&&(e.editable||!(t.type in ki))&&Ai[t.type](e,t)}ki.keydown=(e,t)=>{let n=t;if(e.input.shiftKey=n.keyCode==16||n.shiftKey,!rM(e,n)&&(e.input.lastKeyCode=n.keyCode,e.input.lastKeyCodeTime=Date.now(),!(Zs&&ci&&n.keyCode==13)))if(n.keyCode!=229&&e.domObserver.forceFlush(),pc&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let i=Date.now();e.input.lastIOSEnter=i,e.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{e.input.lastIOSEnter==i&&(e.someProp("handleKeyDown",o=>o(e,Na(13,"Enter"))),e.input.lastIOSEnter=0)},200)}else e.someProp("handleKeyDown",i=>i(e,n))||yhe(e,n)?n.preventDefault():Wr(e,"key")};ki.keyup=(e,t)=>{t.keyCode==16&&(e.input.shiftKey=!1)};ki.keypress=(e,t)=>{let n=t;if(rM(e,n)||!n.charCode||n.ctrlKey&&!n.altKey||yo&&n.metaKey)return;if(e.someProp("handleKeyPress",o=>o(e,n))){n.preventDefault();return}let i=e.state.selection;if(!(i instanceof Ze)||!i.$from.sameParent(i.$to)){let o=String.fromCharCode(n.charCode);!/[\r\n]/.test(o)&&!e.someProp("handleTextInput",s=>s(e,i.$from.pos,i.$to.pos,o))&&e.dispatch(e.state.tr.insertText(o).scrollIntoView()),n.preventDefault()}};function ym(e){return{left:e.clientX,top:e.clientY}}function $he(e,t){let n=t.x-e.clientX,i=t.y-e.clientY;return n*n+i*i<100}function v0(e,t,n,i,o){if(i==-1)return!1;let s=e.state.doc.resolve(i);for(let r=s.depth+1;r>0;r--)if(e.someProp(t,a=>r>s.depth?a(e,n,s.nodeAfter,s.before(r),o,!0):a(e,n,s.node(r),s.before(r),o,!1)))return!0;return!1}function oc(e,t,n){if(e.focused||e.focus(),e.state.selection.eq(t))return;let i=e.state.tr.setSelection(t);i.setMeta("pointer",!0),e.dispatch(i)}function Ihe(e,t){if(t==-1)return!1;let n=e.state.doc.resolve(t),i=n.nodeAfter;return i&&i.isAtom&&Ye.isSelectable(i)?(oc(e,new Ye(n)),!0):!1}function Lhe(e,t){if(t==-1)return!1;let n=e.state.selection,i,o;n instanceof Ye&&(i=n.node);let s=e.state.doc.resolve(t);for(let r=s.depth+1;r>0;r--){let a=r>s.depth?s.nodeAfter:s.node(r);if(Ye.isSelectable(a)){i&&n.$from.depth>0&&r>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?o=s.before(n.$from.depth):o=s.before(r);break}}return o!=null?(oc(e,Ye.create(e.state.doc,o)),!0):!1}function Dhe(e,t,n,i,o){return v0(e,"handleClickOn",t,n,i)||e.someProp("handleClick",s=>s(e,t,i))||(o?Lhe(e,n):Ihe(e,n))}function Rhe(e,t,n,i){return v0(e,"handleDoubleClickOn",t,n,i)||e.someProp("handleDoubleClick",o=>o(e,t,i))}function Phe(e,t,n,i){return v0(e,"handleTripleClickOn",t,n,i)||e.someProp("handleTripleClick",o=>o(e,t,i))||Hhe(e,n,i)}function Hhe(e,t,n){if(n.button!=0)return!1;let i=e.state.doc;if(t==-1)return i.inlineContent?(oc(e,Ze.create(i,0,i.content.size)),!0):!1;let o=i.resolve(t);for(let s=o.depth+1;s>0;s--){let r=s>o.depth?o.nodeAfter:o.node(s),a=o.before(s);if(r.inlineContent)oc(e,Ze.create(i,a+1,a+1+r.content.size));else if(Ye.isSelectable(r))oc(e,Ye.create(i,a));else continue;return!0}}function w0(e){return sp(e)}const sM=yo?"metaKey":"ctrlKey";Ai.mousedown=(e,t)=>{let n=t;e.input.shiftKey=n.shiftKey;let i=w0(e),o=Date.now(),s="singleClick";o-e.input.lastClick.time<500&&$he(n,e.input.lastClick)&&!n[sM]&&(e.input.lastClick.type=="singleClick"?s="doubleClick":e.input.lastClick.type=="doubleClick"&&(s="tripleClick")),e.input.lastClick={time:o,x:n.clientX,y:n.clientY,type:s};let r=e.posAtCoords(ym(n));r&&(s=="singleClick"?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new Vhe(e,r,n,!!i)):(s=="doubleClick"?Rhe:Phe)(e,r.pos,r.inside,n)?n.preventDefault():Wr(e,"pointer"))};class Vhe{constructor(t,n,i,o){this.view=t,this.pos=n,this.event=i,this.flushed=o,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=t.state.doc,this.selectNode=!!i[sM],this.allowDefault=i.shiftKey;let s,r;if(n.inside>-1)s=t.state.doc.nodeAt(n.inside),r=n.inside;else{let u=t.state.doc.resolve(n.pos);s=u.parent,r=u.depth?u.before():0}const a=o?null:i.target,l=a?t.docView.nearestDesc(a,!0):null;this.target=l&&l.dom.nodeType==1?l.dom:null;let{selection:c}=t.state;(i.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||c instanceof Ye&&c.from<=r&&c.to>r)&&(this.mightDrag={node:s,pos:r,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&qo&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),Wr(t,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>or(this.view)),this.view.input.mouseDown=null}up(t){if(this.done(),!this.view.dom.contains(t.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(ym(t))),this.updateAllowDefault(t),this.allowDefault||!n?Wr(this.view,"pointer"):Dhe(this.view,n.pos,n.inside,t,this.selectNode)?t.preventDefault():t.button==0&&(this.flushed||Ci&&this.mightDrag&&!this.mightDrag.node.isAtom||ci&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(oc(this.view,it.near(this.view.state.doc.resolve(n.pos))),t.preventDefault()):Wr(this.view,"pointer")}move(t){this.updateAllowDefault(t),Wr(this.view,"pointer"),t.buttons==0&&this.done()}updateAllowDefault(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0)}}Ai.touchstart=e=>{e.input.lastTouch=Date.now(),w0(e),Wr(e,"pointer")};Ai.touchmove=e=>{e.input.lastTouch=Date.now(),Wr(e,"pointer")};Ai.contextmenu=e=>w0(e);function rM(e,t){return e.composing?!0:Ci&&Math.abs(t.timeStamp-e.input.compositionEndedAt)<500?(e.input.compositionEndedAt=-2e8,!0):!1}const zhe=Zs?5e3:-1;ki.compositionstart=ki.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,n=t.selection.$to;if(t.selection instanceof Ze&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(i=>i.type.spec.inclusive===!1)))e.markCursor=e.state.storedMarks||n.marks(),sp(e,!0),e.markCursor=null;else if(sp(e,!t.selection.empty),qo&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let i=e.domSelectionRange();for(let o=i.focusNode,s=i.focusOffset;o&&o.nodeType==1&&s!=0;){let r=s<0?o.lastChild:o.childNodes[s-1];if(!r)break;if(r.nodeType==3){let a=e.domSelection();a&&a.collapse(r,r.nodeValue.length);break}else o=r,s=-1}}e.input.composing=!0}aM(e,zhe)};ki.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,e.input.compositionPendingChanges=e.domObserver.pendingRecords().length?e.input.compositionID:0,e.input.compositionNode=null,e.input.compositionPendingChanges&&Promise.resolve().then(()=>e.domObserver.flush()),e.input.compositionID++,aM(e,20))};function aM(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout(()=>sp(e),t))}function lM(e){for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=Bhe());e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function Nhe(e){let t=e.domSelectionRange();if(!t.focusNode)return null;let n=Iue(t.focusNode,t.focusOffset),i=Lue(t.focusNode,t.focusOffset);if(n&&i&&n!=i){let o=i.pmViewDesc,s=e.domObserver.lastChangedTextNode;if(n==s||i==s)return s;if(!o||!o.isText(i.nodeValue))return i;if(e.input.compositionNode==i){let r=n.pmViewDesc;if(!(!r||!r.isText(n.nodeValue)))return i}}return n||i}function Bhe(){let e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}function sp(e,t=!1){if(!(Zs&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),lM(e),t||e.docView&&e.docView.dirty){let n=m0(e);return n&&!n.eq(e.state.selection)?e.dispatch(e.state.tr.setSelection(n)):(e.markCursor||t)&&!e.state.selection.empty?e.dispatch(e.state.tr.deleteSelection()):e.updateState(e.state),!0}return!1}}function Fhe(e,t){if(!e.dom.parentNode)return;let n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";let i=getSelection(),o=document.createRange();o.selectNodeContents(t),e.dom.blur(),i.removeAllRanges(),i.addRange(o),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),e.focus()},50)}const au=Ri&&Yr<15||pc&&Vue<604;Ai.copy=ki.cut=(e,t)=>{let n=t,i=e.state.selection,o=n.type=="cut";if(i.empty)return;let s=au?null:n.clipboardData,r=i.content(),{dom:a,text:l}=b0(e,r);s?(n.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):Fhe(e,a),o&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function Whe(e){return e.openStart==0&&e.openEnd==0&&e.content.childCount==1?e.content.firstChild:null}function Uhe(e,t){if(!e.dom.parentNode)return;let n=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,i=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(i.contentEditable="true"),i.style.cssText="position: fixed; left: -10000px; top: 10px",i.focus();let o=e.input.shiftKey&&e.input.lastKeyCode!=45;setTimeout(()=>{e.focus(),i.parentNode&&i.parentNode.removeChild(i),n?lu(e,i.value,null,o,t):lu(e,i.textContent,i.innerHTML,o,t)},50)}function lu(e,t,n,i,o){let s=Qx(e,t,n,i,e.state.selection.$from);if(e.someProp("handlePaste",l=>l(e,o,s||Oe.empty)))return!0;if(!s)return!1;let r=Whe(s),a=r?e.state.tr.replaceSelectionWith(r,i):e.state.tr.replaceSelection(s);return e.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function cM(e){let t=e.getData("text/plain")||e.getData("Text");if(t)return t;let n=e.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}ki.paste=(e,t)=>{let n=t;if(e.composing&&!Zs)return;let i=au?null:n.clipboardData,o=e.input.shiftKey&&e.input.lastKeyCode!=45;i&&lu(e,cM(i),i.getData("text/html"),o,n)?n.preventDefault():Uhe(e,n)};class dM{constructor(t,n,i){this.slice=t,this.move=n,this.node=i}}const uM=yo?"altKey":"ctrlKey";Ai.dragstart=(e,t)=>{let n=t,i=e.input.mouseDown;if(i&&i.done(),!n.dataTransfer)return;let o=e.state.selection,s=o.empty?null:e.posAtCoords(ym(n)),r;if(!(s&&s.pos>=o.from&&s.pos<=(o instanceof Ye?o.to-1:o.to))){if(i&&i.mightDrag)r=Ye.create(e.state.doc,i.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let f=e.docView.nearestDesc(n.target,!0);f&&f.node.type.spec.draggable&&f!=e.docView&&(r=Ye.create(e.state.doc,f.posBefore))}}let a=(r||e.state.selection).content(),{dom:l,text:c,slice:u}=b0(e,a);(!n.dataTransfer.files.length||!ci||Hx>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(au?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",au||n.dataTransfer.setData("text/plain",c),e.dragging=new dM(u,!n[uM],r)};Ai.dragend=e=>{let t=e.dragging;window.setTimeout(()=>{e.dragging==t&&(e.dragging=null)},50)};ki.dragover=ki.dragenter=(e,t)=>t.preventDefault();ki.drop=(e,t)=>{let n=t,i=e.dragging;if(e.dragging=null,!n.dataTransfer)return;let o=e.posAtCoords(ym(n));if(!o)return;let s=e.state.doc.resolve(o.pos),r=i&&i.slice;r?e.someProp("transformPasted",v=>{r=v(r,e)}):r=Qx(e,cM(n.dataTransfer),au?null:n.dataTransfer.getData("text/html"),!1,s);let a=!!(i&&!n[uM]);if(e.someProp("handleDrop",v=>v(e,n,r||Oe.empty,a))){n.preventDefault();return}if(!r)return;n.preventDefault();let l=r?Tx(e.state.doc,s.pos,r):s.pos;l==null&&(l=s.pos);let c=e.state.tr;if(a){let{node:v}=i;v?v.replace(c):c.deleteSelection()}let u=c.mapping.map(l),f=r.openStart==0&&r.openEnd==0&&r.content.childCount==1,m=c.doc;if(f?c.replaceRangeWith(u,u,r.content.firstChild):c.replaceRange(u,u,r),c.doc.eq(m))return;let g=c.doc.resolve(u);if(f&&Ye.isSelectable(r.content.firstChild)&&g.nodeAfter&&g.nodeAfter.sameMarkup(r.content.firstChild))c.setSelection(new Ye(g));else{let v=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((w,_,k,L)=>v=L),c.setSelection(g0(e,g,c.doc.resolve(v)))}e.focus(),e.dispatch(c.setMeta("uiEvent","drop"))};Ai.focus=e=>{e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout(()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&or(e)},20))};Ai.blur=(e,t)=>{let n=t;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),n.relatedTarget&&e.dom.contains(n.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)};Ai.beforeinput=(e,t)=>{if(ci&&Zs&&t.inputType=="deleteContentBackward"){e.domObserver.flushSoon();let{domChangeCount:i}=e.input;setTimeout(()=>{if(e.input.domChangeCount!=i||(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",s=>s(e,Na(8,"Backspace")))))return;let{$cursor:o}=e.state.selection;o&&o.pos>0&&e.dispatch(e.state.tr.delete(o.pos-1,o.pos).scrollIntoView())},50)}};for(let e in ki)Ai[e]=ki[e];function cu(e,t){if(e==t)return!0;for(let n in e)if(e[n]!==t[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}class rp{constructor(t,n){this.toDOM=t,this.spec=n||Ya,this.side=this.spec.side||0}map(t,n,i,o){let{pos:s,deleted:r}=t.mapResult(n.from+o,this.side<0?-1:1);return r?null:new di(s-i,s-i,this)}valid(){return!0}eq(t){return this==t||t instanceof rp&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&cu(this.spec,t.spec))}destroy(t){this.spec.destroy&&this.spec.destroy(t)}}class Xr{constructor(t,n){this.attrs=t,this.spec=n||Ya}map(t,n,i,o){let s=t.map(n.from+o,this.spec.inclusiveStart?-1:1)-i,r=t.map(n.to+o,this.spec.inclusiveEnd?1:-1)-i;return s>=r?null:new di(s,r,this)}valid(t,n){return n.from<n.to}eq(t){return this==t||t instanceof Xr&&cu(this.attrs,t.attrs)&&cu(this.spec,t.spec)}static is(t){return t.type instanceof Xr}destroy(){}}class _0{constructor(t,n){this.attrs=t,this.spec=n||Ya}map(t,n,i,o){let s=t.mapResult(n.from+o,1);if(s.deleted)return null;let r=t.mapResult(n.to+o,-1);return r.deleted||r.pos<=s.pos?null:new di(s.pos-i,r.pos-i,this)}valid(t,n){let{index:i,offset:o}=t.content.findIndex(n.from),s;return o==n.from&&!(s=t.child(i)).isText&&o+s.nodeSize==n.to}eq(t){return this==t||t instanceof _0&&cu(this.attrs,t.attrs)&&cu(this.spec,t.spec)}destroy(){}}class di{constructor(t,n,i){this.from=t,this.to=n,this.type=i}copy(t,n){return new di(t,n,this.type)}eq(t,n=0){return this.type.eq(t.type)&&this.from+n==t.from&&this.to+n==t.to}map(t,n,i){return this.type.map(t,this,n,i)}static widget(t,n,i){return new di(t,t,new rp(n,i))}static inline(t,n,i,o){return new di(t,n,new Xr(i,o))}static node(t,n,i,o){return new di(t,n,new _0(i,o))}get spec(){return this.type.spec}get inline(){return this.type instanceof Xr}get widget(){return this.type instanceof rp}}const ql=[],Ya={};class cn{constructor(t,n){this.local=t.length?t:ql,this.children=n.length?n:ql}static create(t,n){return n.length?ap(n,t,0,Ya):ri}find(t,n,i){let o=[];return this.findInner(t??0,n??1e9,o,0,i),o}findInner(t,n,i,o,s){for(let r=0;r<this.local.length;r++){let a=this.local[r];a.from<=n&&a.to>=t&&(!s||s(a.spec))&&i.push(a.copy(a.from+o,a.to+o))}for(let r=0;r<this.children.length;r+=3)if(this.children[r]<n&&this.children[r+1]>t){let a=this.children[r]+1;this.children[r+2].findInner(t-a,n-a,i,o+a,s)}}map(t,n,i){return this==ri||t.maps.length==0?this:this.mapInner(t,n,0,0,i||Ya)}mapInner(t,n,i,o,s){let r;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(t,i,o);l&&l.type.valid(n,l)?(r||(r=[])).push(l):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?jhe(this.children,r||[],t,n,i,o,s):r?new cn(r.sort(Za),ql):ri}add(t,n){return n.length?this==ri?cn.create(t,n):this.addInner(t,n,0):this}addInner(t,n,i){let o,s=0;t.forEach((a,l)=>{let c=l+i,u;if(u=fM(n,a,c)){for(o||(o=this.children.slice());s<o.length&&o[s]<l;)s+=3;o[s]==l?o[s+2]=o[s+2].addInner(a,u,c+1):o.splice(s,0,l,l+a.nodeSize,ap(u,a,c+1,Ya)),s+=3}});let r=hM(s?pM(n):n,-i);for(let a=0;a<r.length;a++)r[a].type.valid(t,r[a])||r.splice(a--,1);return new cn(r.length?this.local.concat(r).sort(Za):this.local,o||this.children)}remove(t){return t.length==0||this==ri?this:this.removeInner(t,0)}removeInner(t,n){let i=this.children,o=this.local;for(let s=0;s<i.length;s+=3){let r,a=i[s]+n,l=i[s+1]+n;for(let u=0,f;u<t.length;u++)(f=t[u])&&f.from>a&&f.to<l&&(t[u]=null,(r||(r=[])).push(f));if(!r)continue;i==this.children&&(i=this.children.slice());let c=i[s+2].removeInner(r,a+1);c!=ri?i[s+2]=c:(i.splice(s,3),s-=3)}if(o.length){for(let s=0,r;s<t.length;s++)if(r=t[s])for(let a=0;a<o.length;a++)o[a].eq(r,n)&&(o==this.local&&(o=this.local.slice()),o.splice(a--,1))}return i==this.children&&o==this.local?this:o.length||i.length?new cn(o,i):ri}forChild(t,n){if(this==ri)return this;if(n.isLeaf)return cn.empty;let i,o;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=t){this.children[a]==t&&(i=this.children[a+2]);break}let s=t+1,r=s+n.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<r&&l.to>s&&l.type instanceof Xr){let c=Math.max(s,l.from)-s,u=Math.min(r,l.to)-s;c<u&&(o||(o=[])).push(l.copy(c,u))}}if(o){let a=new cn(o.sort(Za),ql);return i?new Pr([a,i]):a}return i||ri}eq(t){if(this==t)return!0;if(!(t instanceof cn)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(t.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=t.children[n]||this.children[n+1]!=t.children[n+1]||!this.children[n+2].eq(t.children[n+2]))return!1;return!0}locals(t){return C0(this.localsInner(t))}localsInner(t){if(this==ri)return ql;if(t.inlineContent||!this.local.some(Xr.is))return this.local;let n=[];for(let i=0;i<this.local.length;i++)this.local[i].type instanceof Xr||n.push(this.local[i]);return n}forEachSet(t){t(this)}}cn.empty=new cn([],[]);cn.removeOverlap=C0;const ri=cn.empty;class Pr{constructor(t){this.members=t}map(t,n){const i=this.members.map(o=>o.map(t,n,Ya));return Pr.from(i)}forChild(t,n){if(n.isLeaf)return cn.empty;let i=[];for(let o=0;o<this.members.length;o++){let s=this.members[o].forChild(t,n);s!=ri&&(s instanceof Pr?i=i.concat(s.members):i.push(s))}return Pr.from(i)}eq(t){if(!(t instanceof Pr)||t.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(t.members[n]))return!1;return!0}locals(t){let n,i=!0;for(let o=0;o<this.members.length;o++){let s=this.members[o].localsInner(t);if(s.length)if(!n)n=s;else{i&&(n=n.slice(),i=!1);for(let r=0;r<s.length;r++)n.push(s[r])}}return n?C0(i?n:n.sort(Za)):ql}static from(t){switch(t.length){case 0:return ri;case 1:return t[0];default:return new Pr(t.every(n=>n instanceof cn)?t:t.reduce((n,i)=>n.concat(i instanceof cn?i:i.members),[]))}}forEachSet(t){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(t)}}function jhe(e,t,n,i,o,s,r){let a=e.slice();for(let c=0,u=s;c<n.maps.length;c++){let f=0;n.maps[c].forEach((m,g,v,w)=>{let _=w-v-(g-m);for(let k=0;k<a.length;k+=3){let L=a[k+1];if(L<0||m>L+u-f)continue;let P=a[k]+u-f;g>=P?a[k+1]=m<=P?-2:-1:m>=u&&_&&(a[k]+=_,a[k+1]+=_)}f+=_}),u=n.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let u=n.map(e[c]+s),f=u-o;if(f<0||f>=i.content.size){l=!0;continue}let m=n.map(e[c+1]+s,-1),g=m-o,{index:v,offset:w}=i.content.findIndex(f),_=i.maybeChild(v);if(_&&w==f&&w+_.nodeSize==g){let k=a[c+2].mapInner(n,_,u+1,e[c]+s+1,r);k!=ri?(a[c]=f,a[c+1]=g,a[c+2]=k):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=qhe(a,e,t,n,o,s,r),u=ap(c,i,0,r);t=u.local;for(let f=0;f<a.length;f+=3)a[f+1]<0&&(a.splice(f,3),f-=3);for(let f=0,m=0;f<u.children.length;f+=3){let g=u.children[f];for(;m<a.length&&a[m]<g;)m+=3;a.splice(m,0,u.children[f],u.children[f+1],u.children[f+2])}}return new cn(t.sort(Za),a)}function hM(e,t){if(!t||!e.length)return e;let n=[];for(let i=0;i<e.length;i++){let o=e[i];n.push(new di(o.from+t,o.to+t,o.type))}return n}function qhe(e,t,n,i,o,s,r){function a(l,c){for(let u=0;u<l.local.length;u++){let f=l.local[u].map(i,o,c);f?n.push(f):r.onRemove&&r.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+c+1)}for(let l=0;l<e.length;l+=3)e[l+1]==-1&&a(e[l+2],t[l]+s+1);return n}function fM(e,t,n){if(t.isLeaf)return null;let i=n+t.nodeSize,o=null;for(let s=0,r;s<e.length;s++)(r=e[s])&&r.from>n&&r.to<i&&((o||(o=[])).push(r),e[s]=null);return o}function pM(e){let t=[];for(let n=0;n<e.length;n++)e[n]!=null&&t.push(e[n]);return t}function ap(e,t,n,i){let o=[],s=!1;t.forEach((a,l)=>{let c=fM(e,a,l+n);if(c){s=!0;let u=ap(c,a,n+l+1,i);u!=ri&&o.push(l,l+a.nodeSize,u)}});let r=hM(s?pM(e):e,-n).sort(Za);for(let a=0;a<r.length;a++)r[a].type.valid(t,r[a])||(i.onRemove&&i.onRemove(r[a].spec),r.splice(a--,1));return r.length||o.length?new cn(r,o):ri}function Za(e,t){return e.from-t.from||e.to-t.to}function C0(e){let t=e;for(let n=0;n<t.length-1;n++){let i=t[n];if(i.from!=i.to)for(let o=n+1;o<t.length;o++){let s=t[o];if(s.from==i.from){s.to!=i.to&&(t==e&&(t=e.slice()),t[o]=s.copy(s.from,i.to),LC(t,o+1,s.copy(i.to,s.to)));continue}else{s.from<i.to&&(t==e&&(t=e.slice()),t[n]=i.copy(i.from,s.from),LC(t,o,i.copy(s.from,i.to)));break}}}return t}function LC(e,t,n){for(;t<e.length&&Za(n,e[t])>0;)t++;e.splice(t,0,n)}function M1(e){let t=[];return e.someProp("decorations",n=>{let i=n(e.state);i&&i!=ri&&t.push(i)}),e.cursorWrapper&&t.push(cn.create(e.state.doc,[e.cursorWrapper.deco])),Pr.from(t)}const Khe={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Ghe=Ri&&Yr<=11;class Jhe{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset}}class Yhe{constructor(t,n){this.view=t,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new Jhe,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(i=>{for(let o=0;o<i.length;o++)this.queue.push(i[o]);Ri&&Yr<=11&&i.some(o=>o.type=="childList"&&o.removedNodes.length||o.type=="characterData"&&o.oldValue.length>o.target.nodeValue.length)?this.flushSoon():this.flush()}),Ghe&&(this.onCharData=i=>{this.queue.push({target:i.target,type:"characterData",oldValue:i.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,Khe)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let t=this.observer.takeRecords();if(t.length){for(let n=0;n<t.length;n++)this.queue.push(t[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(SC(this.view)){if(this.suppressingSelectionUpdates)return or(this.view);if(Ri&&Yr<=11&&!this.view.state.selection.empty){let t=this.view.domSelectionRange();if(t.focusNode&&rl(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(t){if(!t.focusNode)return!0;let n=new Set,i;for(let s=t.focusNode;s;s=fc(s))n.add(s);for(let s=t.anchorNode;s;s=fc(s))if(n.has(s)){i=s;break}let o=i&&this.view.docView.nearestDesc(i);if(o&&o.ignoreMutation({type:"selection",target:i.nodeType==3?i.parentNode:i}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}flush(){let{view:t}=this;if(!t.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let i=t.domSelectionRange(),o=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(i)&&SC(t)&&!this.ignoreSelectionChange(i),s=-1,r=-1,a=!1,l=[];if(t.editable)for(let u=0;u<n.length;u++){let f=this.registerMutation(n[u],l);f&&(s=s<0?f.from:Math.min(f.from,s),r=r<0?f.to:Math.max(f.to,r),f.typeOver&&(a=!0))}if(qo&&l.length){let u=l.filter(f=>f.nodeName=="BR");if(u.length==2){let[f,m]=u;f.parentNode&&f.parentNode.parentNode==m.parentNode?m.remove():f.remove()}else{let{focusNode:f}=this.currentSelection;for(let m of u){let g=m.parentNode;g&&g.nodeName=="LI"&&(!f||Qhe(t,f)!=g)&&m.remove()}}}let c=null;s<0&&o&&t.input.lastFocus>Date.now()-200&&Math.max(t.input.lastTouch,t.input.lastClick.time)<Date.now()-300&&gm(i)&&(c=m0(t))&&c.eq(it.near(t.state.doc.resolve(0),1))?(t.input.lastFocus=0,or(t),this.currentSelection.set(i),t.scrollToSelection()):(s>-1||o)&&(s>-1&&(t.docView.markDirty(s,r),Zhe(t)),this.handleDOMChange(s,r,a,l),t.docView&&t.docView.dirty?t.updateState(t.state):this.currentSelection.eq(i)||or(t),this.currentSelection.set(i))}registerMutation(t,n){if(n.indexOf(t.target)>-1)return null;let i=this.view.docView.nearestDesc(t.target);if(t.type=="attributes"&&(i==this.view.docView||t.attributeName=="contenteditable"||t.attributeName=="style"&&!t.oldValue&&!t.target.getAttribute("style"))||!i||i.ignoreMutation(t))return null;if(t.type=="childList"){for(let u=0;u<t.addedNodes.length;u++){let f=t.addedNodes[u];n.push(f),f.nodeType==3&&(this.lastChangedTextNode=f)}if(i.contentDOM&&i.contentDOM!=i.dom&&!i.contentDOM.contains(t.target))return{from:i.posBefore,to:i.posAfter};let o=t.previousSibling,s=t.nextSibling;if(Ri&&Yr<=11&&t.addedNodes.length)for(let u=0;u<t.addedNodes.length;u++){let{previousSibling:f,nextSibling:m}=t.addedNodes[u];(!f||Array.prototype.indexOf.call(t.addedNodes,f)<0)&&(o=f),(!m||Array.prototype.indexOf.call(t.addedNodes,m)<0)&&(s=m)}let r=o&&o.parentNode==t.target?Gn(o)+1:0,a=i.localPosFromDOM(t.target,r,-1),l=s&&s.parentNode==t.target?Gn(s):t.target.childNodes.length,c=i.localPosFromDOM(t.target,l,1);return{from:a,to:c}}else return t.type=="attributes"?{from:i.posAtStart-i.border,to:i.posAtEnd+i.border}:(this.lastChangedTextNode=t.target,{from:i.posAtStart,to:i.posAtEnd,typeOver:t.target.nodeValue==t.oldValue})}}let DC=new WeakMap,RC=!1;function Zhe(e){if(!DC.has(e)&&(DC.set(e,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace)!==-1)){if(e.requiresGeckoHackNode=qo,RC)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),RC=!0}}function PC(e,t){let n=t.startContainer,i=t.startOffset,o=t.endContainer,s=t.endOffset,r=e.domAtPos(e.state.selection.anchor);return rl(r.node,r.offset,o,s)&&([n,i,o,s]=[o,s,n,i]),{anchorNode:n,anchorOffset:i,focusNode:o,focusOffset:s}}function Xhe(e,t){if(t.getComposedRanges){let o=t.getComposedRanges(e.root)[0];if(o)return PC(e,o)}let n;function i(o){o.preventDefault(),o.stopImmediatePropagation(),n=o.getTargetRanges()[0]}return e.dom.addEventListener("beforeinput",i,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",i,!0),n?PC(e,n):null}function Qhe(e,t){for(let n=t.parentNode;n&&n!=e.dom;n=n.parentNode){let i=e.docView.nearestDesc(n,!0);if(i&&i.node.isBlock)return n}return null}function efe(e,t,n){let{node:i,fromOffset:o,toOffset:s,from:r,to:a}=e.docView.parseRange(t,n),l=e.domSelectionRange(),c,u=l.anchorNode;if(u&&e.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:l.anchorOffset}],gm(l)||c.push({node:l.focusNode,offset:l.focusOffset})),ci&&e.input.lastKeyCode===8)for(let _=s;_>o;_--){let k=i.childNodes[_-1],L=k.pmViewDesc;if(k.nodeName=="BR"&&!L){s=_;break}if(!L||L.size)break}let f=e.state.doc,m=e.someProp("domParser")||Jr.fromSchema(e.state.schema),g=f.resolve(r),v=null,w=m.parse(i,{topNode:g.parent,topMatch:g.parent.contentMatchAt(g.index()),topOpen:!0,from:o,to:s,preserveWhitespace:g.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:tfe,context:g});if(c&&c[0].pos!=null){let _=c[0].pos,k=c[1]&&c[1].pos;k==null&&(k=_),v={anchor:_+r,head:k+r}}return{doc:w,sel:v,from:r,to:a}}function tfe(e){let t=e.pmViewDesc;if(t)return t.parseRule();if(e.nodeName=="BR"&&e.parentNode){if(Ci&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(e.parentNode.lastChild==e||Ci&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if(e.nodeName=="IMG"&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}const nfe=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function ife(e,t,n,i,o){let s=e.input.compositionPendingChanges||(e.composing?e.input.compositionID:0);if(e.input.compositionPendingChanges=0,t<0){let K=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,ae=m0(e,K);if(ae&&!e.state.selection.eq(ae)){if(ci&&Zs&&e.input.lastKeyCode===13&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",J=>J(e,Na(13,"Enter"))))return;let B=e.state.tr.setSelection(ae);K=="pointer"?B.setMeta("pointer",!0):K=="key"&&B.scrollIntoView(),s&&B.setMeta("composition",s),e.dispatch(B)}return}let r=e.state.doc.resolve(t),a=r.sharedDepth(n);t=r.before(a+1),n=e.state.doc.resolve(n).after(a+1);let l=e.state.selection,c=efe(e,t,n),u=e.state.doc,f=u.slice(c.from,c.to),m,g;e.input.lastKeyCode===8&&Date.now()-100<e.input.lastKeyCodeTime?(m=e.state.selection.to,g="end"):(m=e.state.selection.from,g="start"),e.input.lastKeyCode=null;let v=rfe(f.content,c.doc.content,c.from,m,g);if(v&&e.input.domChangeCount++,(pc&&e.input.lastIOSEnter>Date.now()-225||Zs)&&o.some(K=>K.nodeType==1&&!nfe.test(K.nodeName))&&(!v||v.endA>=v.endB)&&e.someProp("handleKeyDown",K=>K(e,Na(13,"Enter")))){e.input.lastIOSEnter=0;return}if(!v)if(i&&l instanceof Ze&&!l.empty&&l.$head.sameParent(l.$anchor)&&!e.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))v={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let K=HC(e,e.state.doc,c.sel);if(K&&!K.eq(e.state.selection)){let ae=e.state.tr.setSelection(K);s&&ae.setMeta("composition",s),e.dispatch(ae)}}return}e.state.selection.from<e.state.selection.to&&v.start==v.endB&&e.state.selection instanceof Ze&&(v.start>e.state.selection.from&&v.start<=e.state.selection.from+2&&e.state.selection.from>=c.from?v.start=e.state.selection.from:v.endA<e.state.selection.to&&v.endA>=e.state.selection.to-2&&e.state.selection.to<=c.to&&(v.endB+=e.state.selection.to-v.endA,v.endA=e.state.selection.to)),Ri&&Yr<=11&&v.endB==v.start+1&&v.endA==v.start&&v.start>c.from&&c.doc.textBetween(v.start-c.from-1,v.start-c.from+1)==" "&&(v.start--,v.endA--,v.endB--);let w=c.doc.resolveNoCache(v.start-c.from),_=c.doc.resolveNoCache(v.endB-c.from),k=u.resolve(v.start),L=w.sameParent(_)&&w.parent.inlineContent&&k.end()>=v.endA,P;if((pc&&e.input.lastIOSEnter>Date.now()-225&&(!L||o.some(K=>K.nodeName=="DIV"||K.nodeName=="P"))||!L&&w.pos<c.doc.content.size&&!w.sameParent(_)&&(P=it.findFrom(c.doc.resolve(w.pos+1),1,!0))&&P.head==_.pos)&&e.someProp("handleKeyDown",K=>K(e,Na(13,"Enter")))){e.input.lastIOSEnter=0;return}if(e.state.selection.anchor>v.start&&sfe(u,v.start,v.endA,w,_)&&e.someProp("handleKeyDown",K=>K(e,Na(8,"Backspace")))){Zs&&ci&&e.domObserver.suppressSelectionUpdates();return}ci&&v.endB==v.start&&(e.input.lastChromeDelete=Date.now()),Zs&&!L&&w.start()!=_.start()&&_.parentOffset==0&&w.depth==_.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==v.endA&&(v.endB-=2,_=c.doc.resolveNoCache(v.endB-c.from),setTimeout(()=>{e.someProp("handleKeyDown",function(K){return K(e,Na(13,"Enter"))})},20));let M=v.start,F=v.endA,z,ee,ie;if(L){if(w.pos==_.pos)Ri&&Yr<=11&&w.parentOffset==0&&(e.domObserver.suppressSelectionUpdates(),setTimeout(()=>or(e),20)),z=e.state.tr.delete(M,F),ee=u.resolve(v.start).marksAcross(u.resolve(v.endA));else if(v.endA==v.endB&&(ie=ofe(w.parent.content.cut(w.parentOffset,_.parentOffset),k.parent.content.cut(k.parentOffset,v.endA-k.start()))))z=e.state.tr,ie.type=="add"?z.addMark(M,F,ie.mark):z.removeMark(M,F,ie.mark);else if(w.parent.child(w.index()).isText&&w.index()==_.index()-(_.textOffset?0:1)){let K=w.parent.textBetween(w.parentOffset,_.parentOffset);if(e.someProp("handleTextInput",ae=>ae(e,M,F,K)))return;z=e.state.tr.insertText(K,M,F)}}if(z||(z=e.state.tr.replace(M,F,c.doc.slice(v.start-c.from,v.endB-c.from))),c.sel){let K=HC(e,z.doc,c.sel);K&&!(ci&&e.composing&&K.empty&&(v.start!=v.endB||e.input.lastChromeDelete<Date.now()-100)&&(K.head==M||K.head==z.mapping.map(F)-1)||Ri&&K.empty&&K.head==M)&&z.setSelection(K)}ee&&z.ensureMarks(ee),s&&z.setMeta("composition",s),e.dispatch(z.scrollIntoView())}function HC(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:g0(e,t.resolve(n.anchor),t.resolve(n.head))}function ofe(e,t){let n=e.firstChild.marks,i=t.firstChild.marks,o=n,s=i,r,a,l;for(let u=0;u<i.length;u++)o=i[u].removeFromSet(o);for(let u=0;u<n.length;u++)s=n[u].removeFromSet(s);if(o.length==1&&s.length==0)a=o[0],r="add",l=u=>u.mark(a.addToSet(u.marks));else if(o.length==0&&s.length==1)a=s[0],r="remove",l=u=>u.mark(a.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<t.childCount;u++)c.push(l(t.child(u)));if(be.from(c).eq(e))return{mark:a,type:r}}function sfe(e,t,n,i,o){if(n-t<=o.pos-i.pos||T1(i,!0,!1)<o.pos)return!1;let s=e.resolve(t);if(!i.parent.isTextblock){let a=s.nodeAfter;return a!=null&&n==t+a.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let r=e.resolve(T1(s,!0,!0));return!r.parent.isTextblock||r.pos>n||T1(r,!0,!1)<n?!1:i.parent.content.cut(i.parentOffset).eq(r.parent.content)}function T1(e,t,n){let i=e.depth,o=t?e.end():e.pos;for(;i>0&&(t||e.indexAfter(i)==e.node(i).childCount);)i--,o++,t=!1;if(n){let s=e.node(i).maybeChild(e.indexAfter(i));for(;s&&!s.isLeaf;)s=s.firstChild,o++}return o}function rfe(e,t,n,i,o){let s=e.findDiffStart(t,n);if(s==null)return null;let{a:r,b:a}=e.findDiffEnd(t,n+e.size,n+t.size);if(o=="end"){let l=Math.max(0,s-Math.min(r,a));i-=r+l-s}if(r<s&&e.size<t.size){let l=i<=s&&i>=r?s-i:0;s-=l,s&&s<t.size&&VC(t.textBetween(s-1,s+1))&&(s+=l?1:-1),a=s+(a-r),r=s}else if(a<s){let l=i<=s&&i>=a?s-i:0;s-=l,s&&s<e.size&&VC(e.textBetween(s-1,s+1))&&(s+=l?1:-1),r=s+(r-a),a=s}return{start:s,endA:r,endB:a}}function VC(e){if(e.length!=2)return!1;let t=e.charCodeAt(0),n=e.charCodeAt(1);return t>=56320&&t<=57343&&n>=55296&&n<=56319}class afe{constructor(t,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new xhe,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(WC),this.dispatch=this.dispatch.bind(this),this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):typeof t=="function"?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=BC(this),NC(this),this.nodeViews=FC(this),this.docView=vC(this.state.doc,zC(this),M1(this),this.dom,this),this.domObserver=new Yhe(this,(i,o,s,r)=>ife(this,i,o,s,r)),this.domObserver.start(),Mhe(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let t=this._props;this._props={};for(let n in t)this._props[n]=t[n];this._props.state=this.state}return this._props}update(t){t.handleDOMEvents!=this._props.handleDOMEvents&&qb(this);let n=this._props;this._props=t,t.plugins&&(t.plugins.forEach(WC),this.directPlugins=t.plugins),this.updateStateInner(t.state,n)}setProps(t){let n={};for(let i in this._props)n[i]=this._props[i];n.state=this.state;for(let i in t)n[i]=t[i];this.update(n)}updateState(t){this.updateStateInner(t,this._props)}updateStateInner(t,n){var i;let o=this.state,s=!1,r=!1;t.storedMarks&&this.composing&&(lM(this),r=!0),this.state=t;let a=o.plugins!=t.plugins||this._props.plugins!=n.plugins;if(a||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let g=FC(this);cfe(g,this.nodeViews)&&(this.nodeViews=g,s=!0)}(a||n.handleDOMEvents!=this._props.handleDOMEvents)&&qb(this),this.editable=BC(this),NC(this);let l=M1(this),c=zC(this),u=o.plugins!=t.plugins&&!o.doc.eq(t.doc)?"reset":t.scrollToSelection>o.scrollToSelection?"to selection":"preserve",f=s||!this.docView.matchesNode(t.doc,c,l);(f||!t.selection.eq(o.selection))&&(r=!0);let m=u=="preserve"&&r&&this.dom.style.overflowAnchor==null&&Bue(this);if(r){this.domObserver.stop();let g=f&&(Ri||ci)&&!this.composing&&!o.selection.empty&&!t.selection.empty&&lfe(o.selection,t.selection);if(f){let v=ci?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=Nhe(this)),(s||!this.docView.update(t.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=vC(t.doc,c,l,this.dom,this)),v&&!this.trackWrites&&(g=!0)}g||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&uhe(this))?or(this,g):(Yx(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(o),!((i=this.dragging)===null||i===void 0)&&i.node&&!o.doc.eq(t.doc)&&this.updateDraggedNode(this.dragging,o),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():m&&Fue(m)}scrollToSelection(){let t=this.domSelectionRange().focusNode;if(!(!t||!this.dom.contains(t.nodeType==1?t:t.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof Ye){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&fC(this,n.getBoundingClientRect(),t)}else fC(this,this.coordsAtPos(this.state.selection.head,1),t)}}destroyPluginViews(){let t;for(;t=this.pluginViews.pop();)t.destroy&&t.destroy()}updatePluginViews(t){if(!t||t.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let i=this.directPlugins[n];i.spec.view&&this.pluginViews.push(i.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let i=this.state.plugins[n];i.spec.view&&this.pluginViews.push(i.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let i=this.pluginViews[n];i.update&&i.update(this,t)}}updateDraggedNode(t,n){let i=t.node,o=-1;if(this.state.doc.nodeAt(i.from)==i.node)o=i.from;else{let s=i.from+(this.state.doc.content.size-n.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==i.node&&(o=s)}this.dragging=new dM(t.slice,t.move,o<0?void 0:Ye.create(this.state.doc,o))}someProp(t,n){let i=this._props&&this._props[t],o;if(i!=null&&(o=n?n(i):i))return o;for(let r=0;r<this.directPlugins.length;r++){let a=this.directPlugins[r].props[t];if(a!=null&&(o=n?n(a):a))return o}let s=this.state.plugins;if(s)for(let r=0;r<s.length;r++){let a=s[r].props[t];if(a!=null&&(o=n?n(a):a))return o}}hasFocus(){if(Ri){let t=this.root.activeElement;if(t==this.dom)return!0;if(!t||!this.dom.contains(t))return!1;for(;t&&this.dom!=t&&this.dom.contains(t);){if(t.contentEditable=="false")return!1;t=t.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&Wue(this.dom),or(this),this.domObserver.start()}get root(){let t=this._root;if(t==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return t||document}updateRoot(){this._root=null}posAtCoords(t){return Gue(this,t)}coordsAtPos(t,n=1){return Fx(this,t,n)}domAtPos(t,n=0){return this.docView.domFromPos(t,n)}nodeDOM(t){let n=this.docView.descAt(t);return n?n.nodeDOM:null}posAtDOM(t,n,i=-1){let o=this.docView.posFromDOM(t,n,i);if(o==null)throw new RangeError("DOM position not inside the editor");return o}endOfTextblock(t,n){return Que(this,n||this.state,t)}pasteHTML(t,n){return lu(this,"",t,!1,n||new ClipboardEvent("paste"))}pasteText(t,n){return lu(this,t,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(t){return b0(this,t)}destroy(){this.docView&&(The(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],M1(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,Oue())}get isDestroyed(){return this.docView==null}dispatchEvent(t){return Ohe(this,t)}dispatch(t){let n=this._props.dispatchTransaction;n?n.call(this,t):this.updateState(this.state.apply(t))}domSelectionRange(){let t=this.domSelection();return t?Ci&&this.root.nodeType===11&&Rue(this.dom.ownerDocument)==this.dom&&Xhe(this,t)||t:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function zC(e){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(e.state)),n)for(let i in n)i=="class"?t.class+=" "+n[i]:i=="style"?t.style=(t.style?t.style+";":"")+n[i]:!t[i]&&i!="contenteditable"&&i!="nodeName"&&(t[i]=String(n[i]))}),t.translate||(t.translate="no"),[di.node(0,e.state.doc.content.size,t)]}function NC(e){if(e.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:di.widget(e.state.selection.from,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function BC(e){return!e.someProp("editable",t=>t(e.state)===!1)}function lfe(e,t){let n=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(n)!=t.$anchor.start(n)}function FC(e){let t=Object.create(null);function n(i){for(let o in i)Object.prototype.hasOwnProperty.call(t,o)||(t[o]=i[o])}return e.someProp("nodeViews",n),e.someProp("markViews",n),t}function cfe(e,t){let n=0,i=0;for(let o in e){if(e[o]!=t[o])return!0;n++}for(let o in t)i++;return n!=i}function WC(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var oa={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},lp={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},dfe=typeof navigator<"u"&&/Mac/.test(navigator.platform),ufe=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Jn=0;Jn<10;Jn++)oa[48+Jn]=oa[96+Jn]=String(Jn);for(var Jn=1;Jn<=24;Jn++)oa[Jn+111]="F"+Jn;for(var Jn=65;Jn<=90;Jn++)oa[Jn]=String.fromCharCode(Jn+32),lp[Jn]=String.fromCharCode(Jn);for(var E1 in oa)lp.hasOwnProperty(E1)||(lp[E1]=oa[E1]);function hfe(e){var t=dfe&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||ufe&&e.shiftKey&&e.key&&e.key.length==1||e.key=="Unidentified",n=!t&&e.key||(e.shiftKey?lp:oa)[e.keyCode]||e.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const ffe=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function pfe(e){let t=e.split(/-(?!$)/),n=t[t.length-1];n=="Space"&&(n=" ");let i,o,s,r;for(let a=0;a<t.length-1;a++){let l=t[a];if(/^(cmd|meta|m)$/i.test(l))r=!0;else if(/^a(lt)?$/i.test(l))i=!0;else if(/^(c|ctrl|control)$/i.test(l))o=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))ffe?r=!0:o=!0;else throw new Error("Unrecognized modifier name: "+l)}return i&&(n="Alt-"+n),o&&(n="Ctrl-"+n),r&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function mfe(e){let t=Object.create(null);for(let n in e)t[pfe(n)]=e[n];return t}function O1(e,t,n=!0){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),n&&t.shiftKey&&(e="Shift-"+e),e}function gfe(e){return new bn({props:{handleKeyDown:A0(e)}})}function A0(e){let t=mfe(e);return function(n,i){let o=hfe(i),s,r=t[O1(o,i)];if(r&&r(n.state,n.dispatch,n))return!0;if(o.length==1&&o!=" "){if(i.shiftKey){let a=t[O1(o,i,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((i.shiftKey||i.altKey||i.metaKey||o.charCodeAt(0)>127)&&(s=oa[i.keyCode])&&s!=o){let a=t[O1(s,i)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}const k0=(e,t)=>e.selection.empty?!1:(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);function mM(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("backward",e):n.parentOffset>0)?null:n}const gM=(e,t,n)=>{let i=mM(e,n);if(!i)return!1;let o=S0(i);if(!o){let r=i.blockRange(),a=r&&Ic(r);return a==null?!1:(t&&t(e.tr.lift(r,a).scrollIntoView()),!0)}let s=o.nodeBefore;if(SM(e,o,t,-1))return!0;if(i.parent.content.size==0&&(mc(s,"end")||Ye.isSelectable(s)))for(let r=i.depth;;r--){let a=pm(e.doc,i.before(r),i.after(r),Oe.empty);if(a&&a.slice.size<a.to-a.from){if(t){let l=e.tr.step(a);l.setSelection(mc(s,"end")?it.findFrom(l.doc.resolve(l.mapping.map(o.pos,-1)),-1):Ye.create(l.doc,o.pos-s.nodeSize)),t(l.scrollIntoView())}return!0}if(r==1||i.node(r-1).childCount>1)break}return s.isAtom&&o.depth==i.depth-1?(t&&t(e.tr.delete(o.pos-s.nodeSize,o.pos).scrollIntoView()),!0):!1},bfe=(e,t,n)=>{let i=mM(e,n);if(!i)return!1;let o=S0(i);return o?bM(e,o,t):!1},yfe=(e,t,n)=>{let i=vM(e,n);if(!i)return!1;let o=x0(i);return o?bM(e,o,t):!1};function bM(e,t,n){let i=t.nodeBefore,o=i,s=t.pos-1;for(;!o.isTextblock;s--){if(o.type.spec.isolating)return!1;let u=o.lastChild;if(!u)return!1;o=u}let r=t.nodeAfter,a=r,l=t.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let u=a.firstChild;if(!u)return!1;a=u}let c=pm(e.doc,s,l,Oe.empty);if(!c||c.from!=s||c instanceof Hn&&c.slice.size>=l-s)return!1;if(n){let u=e.tr.step(c);u.setSelection(Ze.create(u.doc,s)),n(u.scrollIntoView())}return!0}function mc(e,t,n=!1){for(let i=e;i;i=t=="start"?i.firstChild:i.lastChild){if(i.isTextblock)return!0;if(n&&i.childCount!=1)return!1}return!1}const yM=(e,t,n)=>{let{$head:i,empty:o}=e.selection,s=i;if(!o)return!1;if(i.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):i.parentOffset>0)return!1;s=S0(i)}let r=s&&s.nodeBefore;return!r||!Ye.isSelectable(r)?!1:(t&&t(e.tr.setSelection(Ye.create(e.doc,s.pos-r.nodeSize)).scrollIntoView()),!0)};function S0(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function vM(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size)?null:n}const wM=(e,t,n)=>{let i=vM(e,n);if(!i)return!1;let o=x0(i);if(!o)return!1;let s=o.nodeAfter;if(SM(e,o,t,1))return!0;if(i.parent.content.size==0&&(mc(s,"start")||Ye.isSelectable(s))){let r=pm(e.doc,i.before(),i.after(),Oe.empty);if(r&&r.slice.size<r.to-r.from){if(t){let a=e.tr.step(r);a.setSelection(mc(s,"start")?it.findFrom(a.doc.resolve(a.mapping.map(o.pos)),1):Ye.create(a.doc,a.mapping.map(o.pos))),t(a.scrollIntoView())}return!0}}return s.isAtom&&o.depth==i.depth-1?(t&&t(e.tr.delete(o.pos,o.pos+s.nodeSize).scrollIntoView()),!0):!1},_M=(e,t,n)=>{let{$head:i,empty:o}=e.selection,s=i;if(!o)return!1;if(i.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):i.parentOffset<i.parent.content.size)return!1;s=x0(i)}let r=s&&s.nodeAfter;return!r||!Ye.isSelectable(r)?!1:(t&&t(e.tr.setSelection(Ye.create(e.doc,s.pos)).scrollIntoView()),!0)};function x0(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}const vfe=(e,t)=>{let n=e.selection,i=n instanceof Ye,o;if(i){if(n.node.isTextblock||!ga(e.doc,n.from))return!1;o=n.from}else if(o=fm(e.doc,n.from,-1),o==null)return!1;if(t){let s=e.tr.join(o);i&&s.setSelection(Ye.create(s.doc,o-e.doc.resolve(o).nodeBefore.nodeSize)),t(s.scrollIntoView())}return!0},wfe=(e,t)=>{let n=e.selection,i;if(n instanceof Ye){if(n.node.isTextblock||!ga(e.doc,n.to))return!1;i=n.to}else if(i=fm(e.doc,n.to,1),i==null)return!1;return t&&t(e.tr.join(i).scrollIntoView()),!0},_fe=(e,t)=>{let{$from:n,$to:i}=e.selection,o=n.blockRange(i),s=o&&Ic(o);return s==null?!1:(t&&t(e.tr.lift(o,s).scrollIntoView()),!0)},CM=(e,t)=>{let{$head:n,$anchor:i}=e.selection;return!n.parent.type.spec.code||!n.sameParent(i)?!1:(t&&t(e.tr.insertText(`
`).scrollIntoView()),!0)};function M0(e){for(let t=0;t<e.edgeCount;t++){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const Cfe=(e,t)=>{let{$head:n,$anchor:i}=e.selection;if(!n.parent.type.spec.code||!n.sameParent(i))return!1;let o=n.node(-1),s=n.indexAfter(-1),r=M0(o.contentMatchAt(s));if(!r||!o.canReplaceWith(s,s,r))return!1;if(t){let a=n.after(),l=e.tr.replaceWith(a,a,r.createAndFill());l.setSelection(it.near(l.doc.resolve(a),1)),t(l.scrollIntoView())}return!0},AM=(e,t)=>{let n=e.selection,{$from:i,$to:o}=n;if(n instanceof eo||i.parent.inlineContent||o.parent.inlineContent)return!1;let s=M0(o.parent.contentMatchAt(o.indexAfter()));if(!s||!s.isTextblock)return!1;if(t){let r=(!i.parentOffset&&o.index()<o.parent.childCount?i:o).pos,a=e.tr.insert(r,s.createAndFill());a.setSelection(Ze.create(a.doc,r+1)),t(a.scrollIntoView())}return!0},kM=(e,t)=>{let{$cursor:n}=e.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(ir(e.doc,s))return t&&t(e.tr.split(s).scrollIntoView()),!0}let i=n.blockRange(),o=i&&Ic(i);return o==null?!1:(t&&t(e.tr.lift(i,o).scrollIntoView()),!0)};function Afe(e){return(t,n)=>{let{$from:i,$to:o}=t.selection;if(t.selection instanceof Ye&&t.selection.node.isBlock)return!i.parentOffset||!ir(t.doc,i.pos)?!1:(n&&n(t.tr.split(i.pos).scrollIntoView()),!0);if(!i.depth)return!1;let s=[],r,a,l=!1,c=!1;for(let g=i.depth;;g--)if(i.node(g).isBlock){l=i.end(g)==i.pos+(i.depth-g),c=i.start(g)==i.pos-(i.depth-g),a=M0(i.node(g-1).contentMatchAt(i.indexAfter(g-1))),s.unshift(l&&a?{type:a}:null),r=g;break}else{if(g==1)return!1;s.unshift(null)}let u=t.tr;(t.selection instanceof Ze||t.selection instanceof eo)&&u.deleteSelection();let f=u.mapping.map(i.pos),m=ir(u.doc,f,s.length,s);if(m||(s[0]=a?{type:a}:null,m=ir(u.doc,f,s.length,s)),u.split(f,s.length,s),!l&&c&&i.node(r).type!=a){let g=u.mapping.map(i.before(r)),v=u.doc.resolve(g);a&&i.node(r-1).canReplaceWith(v.index(),v.index()+1,a)&&u.setNodeMarkup(u.mapping.map(i.before(r)),a)}return n&&n(u.scrollIntoView()),!0}}const kfe=Afe(),Sfe=(e,t)=>{let{$from:n,to:i}=e.selection,o,s=n.sharedDepth(i);return s==0?!1:(o=n.before(s),t&&t(e.tr.setSelection(Ye.create(e.doc,o))),!0)};function xfe(e,t,n){let i=t.nodeBefore,o=t.nodeAfter,s=t.index();return!i||!o||!i.type.compatibleContent(o.type)?!1:!i.content.size&&t.parent.canReplace(s-1,s)?(n&&n(e.tr.delete(t.pos-i.nodeSize,t.pos).scrollIntoView()),!0):!t.parent.canReplace(s,s+1)||!(o.isTextblock||ga(e.doc,t.pos))?!1:(n&&n(e.tr.join(t.pos).scrollIntoView()),!0)}function SM(e,t,n,i){let o=t.nodeBefore,s=t.nodeAfter,r,a,l=o.type.spec.isolating||s.type.spec.isolating;if(!l&&xfe(e,t,n))return!0;let c=!l&&t.parent.canReplace(t.index(),t.index()+1);if(c&&(r=(a=o.contentMatchAt(o.childCount)).findWrapping(s.type))&&a.matchType(r[0]||s.type).validEnd){if(n){let g=t.pos+s.nodeSize,v=be.empty;for(let k=r.length-1;k>=0;k--)v=be.from(r[k].create(null,v));v=be.from(o.copy(v));let w=e.tr.step(new zn(t.pos-1,g,t.pos,g,new Oe(v,1,0),r.length,!0)),_=w.doc.resolve(g+2*r.length);_.nodeAfter&&_.nodeAfter.type==o.type&&ga(w.doc,_.pos)&&w.join(_.pos),n(w.scrollIntoView())}return!0}let u=s.type.spec.isolating||i>0&&l?null:it.findFrom(t,1),f=u&&u.$from.blockRange(u.$to),m=f&&Ic(f);if(m!=null&&m>=t.depth)return n&&n(e.tr.lift(f,m).scrollIntoView()),!0;if(c&&mc(s,"start",!0)&&mc(o,"end")){let g=o,v=[];for(;v.push(g),!g.isTextblock;)g=g.lastChild;let w=s,_=1;for(;!w.isTextblock;w=w.firstChild)_++;if(g.canReplace(g.childCount,g.childCount,w.content)){if(n){let k=be.empty;for(let P=v.length-1;P>=0;P--)k=be.from(v[P].copy(k));let L=e.tr.step(new zn(t.pos-v.length,t.pos+s.nodeSize,t.pos+_,t.pos+s.nodeSize-_,new Oe(k,v.length,0),0,!0));n(L.scrollIntoView())}return!0}}return!1}function xM(e){return function(t,n){let i=t.selection,o=e<0?i.$from:i.$to,s=o.depth;for(;o.node(s).isInline;){if(!s)return!1;s--}return o.node(s).isTextblock?(n&&n(t.tr.setSelection(Ze.create(t.doc,e<0?o.start(s):o.end(s)))),!0):!1}}const Mfe=xM(-1),Tfe=xM(1);function Efe(e,t=null){return function(n,i){let{$from:o,$to:s}=n.selection,r=o.blockRange(s),a=r&&u0(r,e,t);return a?(i&&i(n.tr.wrap(r,a).scrollIntoView()),!0):!1}}function UC(e,t=null){return function(n,i){let o=!1;for(let s=0;s<n.selection.ranges.length&&!o;s++){let{$from:{pos:r},$to:{pos:a}}=n.selection.ranges[s];n.doc.nodesBetween(r,a,(l,c)=>{if(o)return!1;if(!(!l.isTextblock||l.hasMarkup(e,t)))if(l.type==e)o=!0;else{let u=n.doc.resolve(c),f=u.index();o=u.parent.canReplaceWith(f,f+1,e)}})}if(!o)return!1;if(i){let s=n.tr;for(let r=0;r<n.selection.ranges.length;r++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[r];s.setBlockType(a,l,e,t)}i(s.scrollIntoView())}return!0}}function T0(...e){return function(t,n,i){for(let o=0;o<e.length;o++)if(e[o](t,n,i))return!0;return!1}}T0(k0,gM,yM);T0(k0,wM,_M);T0(CM,AM,kM,kfe);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function Ofe(e,t=null){return function(n,i){let{$from:o,$to:s}=n.selection,r=o.blockRange(s);if(!r)return!1;let a=i?n.tr:null;return $fe(a,r,e,t)?(i&&i(a.scrollIntoView()),!0):!1}}function $fe(e,t,n,i=null){let o=!1,s=t,r=t.$from.doc;if(t.depth>=2&&t.$from.node(t.depth-1).type.compatibleContent(n)&&t.startIndex==0){if(t.$from.index(t.depth-1)==0)return!1;let l=r.resolve(t.start-2);s=new tp(l,l,t.depth),t.endIndex<t.parent.childCount&&(t=new tp(t.$from,r.resolve(t.$to.end(t.depth)),t.depth)),o=!0}let a=u0(s,n,i,t);return a?(e&&Ife(e,t,a,o,n),!0):!1}function Ife(e,t,n,i,o){let s=be.empty;for(let u=n.length-1;u>=0;u--)s=be.from(n[u].type.create(n[u].attrs,s));e.step(new zn(t.start-(i?2:0),t.end,t.start,t.end,new Oe(s,0,0),n.length,!0));let r=0;for(let u=0;u<n.length;u++)n[u].type==o&&(r=u+1);let a=n.length-r,l=t.start+n.length-(i?2:0),c=t.parent;for(let u=t.startIndex,f=t.endIndex,m=!0;u<f;u++,m=!1)!m&&ir(e.doc,l,a)&&(e.split(l,a),l+=2*a),l+=c.child(u).nodeSize;return e}function Lfe(e){return function(t,n){let{$from:i,$to:o}=t.selection,s=i.blockRange(o,r=>r.childCount>0&&r.firstChild.type==e);return s?n?i.node(s.depth-1).type==e?Dfe(t,n,e,s):Rfe(t,n,s):!0:!1}}function Dfe(e,t,n,i){let o=e.tr,s=i.end,r=i.$to.end(i.depth);s<r&&(o.step(new zn(s-1,r,s,r,new Oe(be.from(n.create(null,i.parent.copy())),1,0),1,!0)),i=new tp(o.doc.resolve(i.$from.pos),o.doc.resolve(r),i.depth));const a=Ic(i);if(a==null)return!1;o.lift(i,a);let l=o.doc.resolve(o.mapping.map(s,-1)-1);return ga(o.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&o.join(l.pos),t(o.scrollIntoView()),!0}function Rfe(e,t,n){let i=e.tr,o=n.parent;for(let g=n.end,v=n.endIndex-1,w=n.startIndex;v>w;v--)g-=o.child(v).nodeSize,i.delete(g-1,g+1);let s=i.doc.resolve(n.start),r=s.nodeAfter;if(i.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==o.childCount,c=s.node(-1),u=s.index(-1);if(!c.canReplace(u+(a?0:1),u+1,r.content.append(l?be.empty:be.from(o))))return!1;let f=s.pos,m=f+r.nodeSize;return i.step(new zn(f-(a?1:0),m+(l?1:0),f+1,m-1,new Oe((a?be.empty:be.from(o.copy(be.empty))).append(l?be.empty:be.from(o.copy(be.empty))),a?0:1,l?0:1),a?0:1)),t(i.scrollIntoView()),!0}function Pfe(e){return function(t,n){let{$from:i,$to:o}=t.selection,s=i.blockRange(o,c=>c.childCount>0&&c.firstChild.type==e);if(!s)return!1;let r=s.startIndex;if(r==0)return!1;let a=s.parent,l=a.child(r-1);if(l.type!=e)return!1;if(n){let c=l.lastChild&&l.lastChild.type==a.type,u=be.from(c?e.create():null),f=new Oe(be.from(e.create(null,be.from(a.type.create(null,u)))),c?3:1,0),m=s.start,g=s.end;n(t.tr.step(new zn(m-(c?3:1),g,m,g,f,1,!0)).scrollIntoView())}return!0}}function vm(e){const{state:t,transaction:n}=e;let{selection:i}=n,{doc:o}=n,{storedMarks:s}=n;return{...t,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return s},get selection(){return i},get doc(){return o},get tr(){return i=n.selection,o=n.doc,s=n.storedMarks,n}}}class wm{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:n,state:i}=this,{view:o}=n,{tr:s}=i,r=this.buildProps(s);return Object.fromEntries(Object.entries(t).map(([a,l])=>[a,(...u)=>{const f=l(...u)(r);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(s),f}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,n=!0){const{rawCommands:i,editor:o,state:s}=this,{view:r}=o,a=[],l=!!t,c=t||s.tr,u=()=>(!l&&n&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(c),a.every(m=>m===!0)),f={...Object.fromEntries(Object.entries(i).map(([m,g])=>[m,(...w)=>{const _=this.buildProps(c,n),k=g(...w)(_);return a.push(k),f}])),run:u};return f}createCan(t){const{rawCommands:n,state:i}=this,o=!1,s=t||i.tr,r=this.buildProps(s,o);return{...Object.fromEntries(Object.entries(n).map(([l,c])=>[l,(...u)=>c(...u)({...r,dispatch:void 0})])),chain:()=>this.createChain(s,o)}}buildProps(t,n=!0){const{rawCommands:i,editor:o,state:s}=this,{view:r}=o,a={tr:t,editor:o,view:r,state:vm({state:s,transaction:t}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(t,n),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(i).map(([l,c])=>[l,(...u)=>c(...u)(a)]))}};return a}}let Hfe=class{constructor(){this.callbacks={}}on(t,n){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(n),this}emit(t,...n){const i=this.callbacks[t];return i&&i.forEach(o=>o.apply(this,n)),this}off(t,n){const i=this.callbacks[t];return i&&(n?this.callbacks[t]=i.filter(o=>o!==n):delete this.callbacks[t]),this}once(t,n){const i=(...o)=>{this.off(t,i),n.apply(this,o)};return this.on(t,i)}removeAllListeners(){this.callbacks={}}};function ze(e,t,n){return e.config[t]===void 0&&e.parent?ze(e.parent,t,n):typeof e.config[t]=="function"?e.config[t].bind({...n,parent:e.parent?ze(e.parent,t,n):null}):e.config[t]}function _m(e){const t=e.filter(o=>o.type==="extension"),n=e.filter(o=>o.type==="node"),i=e.filter(o=>o.type==="mark");return{baseExtensions:t,nodeExtensions:n,markExtensions:i}}function MM(e){const t=[],{nodeExtensions:n,markExtensions:i}=_m(e),o=[...n,...i],s={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return e.forEach(r=>{const a={name:r.name,options:r.options,storage:r.storage,extensions:o},l=ze(r,"addGlobalAttributes",a);if(!l)return;l().forEach(u=>{u.types.forEach(f=>{Object.entries(u.attributes).forEach(([m,g])=>{t.push({type:f,name:m,attribute:{...s,...g}})})})})}),o.forEach(r=>{const a={name:r.name,options:r.options,storage:r.storage},l=ze(r,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([u,f])=>{const m={...s,...f};typeof(m==null?void 0:m.default)=="function"&&(m.default=m.default()),m!=null&&m.isRequired&&(m==null?void 0:m.default)===void 0&&delete m.default,t.push({type:r.name,name:u,attribute:m})})}),t}function Bn(e,t){if(typeof e=="string"){if(!t.nodes[e])throw Error(`There is no node type named '${e}'. Maybe you forgot to add the extension?`);return t.nodes[e]}return e}function Bt(...e){return e.filter(t=>!!t).reduce((t,n)=>{const i={...t};return Object.entries(n).forEach(([o,s])=>{if(!i[o]){i[o]=s;return}if(o==="class"){const a=s?String(s).split(" "):[],l=i[o]?i[o].split(" "):[],c=a.filter(u=>!l.includes(u));i[o]=[...l,...c].join(" ")}else if(o==="style"){const a=s?s.split(";").map(u=>u.trim()).filter(Boolean):[],l=i[o]?i[o].split(";").map(u=>u.trim()).filter(Boolean):[],c=new Map;l.forEach(u=>{const[f,m]=u.split(":").map(g=>g.trim());c.set(f,m)}),a.forEach(u=>{const[f,m]=u.split(":").map(g=>g.trim());c.set(f,m)}),i[o]=Array.from(c.entries()).map(([u,f])=>`${u}: ${f}`).join("; ")}else i[o]=s}),i},{})}function Kb(e,t){return t.filter(n=>n.type===e.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(e.attrs)||{}:{[n.name]:e.attrs[n.name]}).reduce((n,i)=>Bt(n,i),{})}function TM(e){return typeof e=="function"}function Ct(e,t=void 0,...n){return TM(e)?t?e.bind(t)(...n):e(...n):e}function Vfe(e={}){return Object.keys(e).length===0&&e.constructor===Object}function zfe(e){return typeof e!="string"?e:e.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(e):e==="true"?!0:e==="false"?!1:e}function jC(e,t){return"style"in e?e:{...e,getAttrs:n=>{const i=e.getAttrs?e.getAttrs(n):e.attrs;if(i===!1)return!1;const o=t.reduce((s,r)=>{const a=r.attribute.parseHTML?r.attribute.parseHTML(n):zfe(n.getAttribute(r.name));return a==null?s:{...s,[r.name]:a}},{});return{...i,...o}}}}function qC(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>t==="attrs"&&Vfe(n)?!1:n!=null))}function Nfe(e,t){var n;const i=MM(e),{nodeExtensions:o,markExtensions:s}=_m(e),r=(n=o.find(c=>ze(c,"topNode")))===null||n===void 0?void 0:n.name,a=Object.fromEntries(o.map(c=>{const u=i.filter(k=>k.type===c.name),f={name:c.name,options:c.options,storage:c.storage,editor:t},m=e.reduce((k,L)=>{const P=ze(L,"extendNodeSchema",f);return{...k,...P?P(c):{}}},{}),g=qC({...m,content:Ct(ze(c,"content",f)),marks:Ct(ze(c,"marks",f)),group:Ct(ze(c,"group",f)),inline:Ct(ze(c,"inline",f)),atom:Ct(ze(c,"atom",f)),selectable:Ct(ze(c,"selectable",f)),draggable:Ct(ze(c,"draggable",f)),code:Ct(ze(c,"code",f)),whitespace:Ct(ze(c,"whitespace",f)),linebreakReplacement:Ct(ze(c,"linebreakReplacement",f)),defining:Ct(ze(c,"defining",f)),isolating:Ct(ze(c,"isolating",f)),attrs:Object.fromEntries(u.map(k=>{var L;return[k.name,{default:(L=k==null?void 0:k.attribute)===null||L===void 0?void 0:L.default}]}))}),v=Ct(ze(c,"parseHTML",f));v&&(g.parseDOM=v.map(k=>jC(k,u)));const w=ze(c,"renderHTML",f);w&&(g.toDOM=k=>w({node:k,HTMLAttributes:Kb(k,u)}));const _=ze(c,"renderText",f);return _&&(g.toText=_),[c.name,g]})),l=Object.fromEntries(s.map(c=>{const u=i.filter(_=>_.type===c.name),f={name:c.name,options:c.options,storage:c.storage,editor:t},m=e.reduce((_,k)=>{const L=ze(k,"extendMarkSchema",f);return{..._,...L?L(c):{}}},{}),g=qC({...m,inclusive:Ct(ze(c,"inclusive",f)),excludes:Ct(ze(c,"excludes",f)),group:Ct(ze(c,"group",f)),spanning:Ct(ze(c,"spanning",f)),code:Ct(ze(c,"code",f)),attrs:Object.fromEntries(u.map(_=>{var k;return[_.name,{default:(k=_==null?void 0:_.attribute)===null||k===void 0?void 0:k.default}]}))}),v=Ct(ze(c,"parseHTML",f));v&&(g.parseDOM=v.map(_=>jC(_,u)));const w=ze(c,"renderHTML",f);return w&&(g.toDOM=_=>w({mark:_,HTMLAttributes:Kb(_,u)})),[c.name,g]}));return new bx({topNode:r,nodes:a,marks:l})}function $1(e,t){return t.nodes[e]||t.marks[e]||null}function KC(e,t){return Array.isArray(t)?t.some(n=>(typeof n=="string"?n:n.name)===e.name):t}function E0(e,t){const n=gl.fromSchema(t).serializeFragment(e),o=document.implementation.createHTMLDocument().createElement("div");return o.appendChild(n),o.innerHTML}const Bfe=(e,t=500)=>{let n="";const i=e.parentOffset;return e.parent.nodesBetween(Math.max(0,i-t),i,(o,s,r,a)=>{var l,c;const u=((c=(l=o.type.spec).toText)===null||c===void 0?void 0:c.call(l,{node:o,pos:s,parent:r,index:a}))||o.textContent||"%leaf%";n+=o.isAtom&&!o.isText?u:u.slice(0,Math.max(0,i-s))}),n};function O0(e){return Object.prototype.toString.call(e)==="[object RegExp]"}class Cm{constructor(t){this.find=t.find,this.handler=t.handler}}const Ffe=(e,t)=>{if(O0(t))return t.exec(e);const n=t(e);if(!n)return null;const i=[n.text];return i.index=n.index,i.input=e,i.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),i.push(n.replaceWith)),i};function Wh(e){var t;const{editor:n,from:i,to:o,text:s,rules:r,plugin:a}=e,{view:l}=n;if(l.composing)return!1;const c=l.state.doc.resolve(i);if(c.parent.type.spec.code||!((t=c.nodeBefore||c.nodeAfter)===null||t===void 0)&&t.marks.find(m=>m.type.spec.code))return!1;let u=!1;const f=Bfe(c)+s;return r.forEach(m=>{if(u)return;const g=Ffe(f,m.find);if(!g)return;const v=l.state.tr,w=vm({state:l.state,transaction:v}),_={from:i-(g[0].length-s.length),to:o},{commands:k,chain:L,can:P}=new wm({editor:n,state:w});m.handler({state:w,range:_,match:g,commands:k,chain:L,can:P})===null||!v.steps.length||(v.setMeta(a,{transform:v,from:i,to:o,text:s}),l.dispatch(v),u=!0)}),u}function Wfe(e){const{editor:t,rules:n}=e,i=new bn({state:{init(){return null},apply(o,s,r){const a=o.getMeta(i);if(a)return a;const l=o.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:u}=l;typeof u=="string"?u=u:u=E0(be.from(u),r.schema);const{from:f}=l,m=f+u.length;Wh({editor:t,from:f,to:m,text:u,rules:n,plugin:i})}),o.selectionSet||o.docChanged?null:s}},props:{handleTextInput(o,s,r,a){return Wh({editor:t,from:s,to:r,text:a,rules:n,plugin:i})},handleDOMEvents:{compositionend:o=>(setTimeout(()=>{const{$cursor:s}=o.state.selection;s&&Wh({editor:t,from:s.pos,to:s.pos,text:"",rules:n,plugin:i})}),!1)},handleKeyDown(o,s){if(s.key!=="Enter")return!1;const{$cursor:r}=o.state.selection;return r?Wh({editor:t,from:r.pos,to:r.pos,text:`
`,rules:n,plugin:i}):!1}},isInputRules:!0});return i}function Ufe(e){return Object.prototype.toString.call(e).slice(8,-1)}function Uh(e){return Ufe(e)!=="Object"?!1:e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function Am(e,t){const n={...e};return Uh(e)&&Uh(t)&&Object.keys(t).forEach(i=>{Uh(t[i])&&Uh(e[i])?n[i]=Am(e[i],t[i]):n[i]=t[i]}),n}class Si{constructor(t={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...t},this.name=this.config.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Ct(ze(this,"addOptions",{name:this.name}))),this.storage=Ct(ze(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new Si(t)}configure(t={}){const n=this.extend({...this.config,addOptions:()=>Am(this.options,t)});return n.name=this.name,n.parent=this.parent,n}extend(t={}){const n=new Si(t);return n.parent=this,this.child=n,n.name=t.name?t.name:n.parent.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Ct(ze(n,"addOptions",{name:n.name})),n.storage=Ct(ze(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:t,mark:n}){const{tr:i}=t.state,o=t.state.selection.$from;if(o.pos===o.end()){const r=o.marks();if(!!!r.find(c=>(c==null?void 0:c.type.name)===n.name))return!1;const l=r.find(c=>(c==null?void 0:c.type.name)===n.name);return l&&i.removeStoredMark(l),i.insertText(" ",o.pos),t.view.dispatch(i),!0}return!1}}function jfe(e){return typeof e=="number"}class qfe{constructor(t){this.find=t.find,this.handler=t.handler}}const Kfe=(e,t,n)=>{if(O0(t))return[...e.matchAll(t)];const i=t(e,n);return i?i.map(o=>{const s=[o.text];return s.index=o.index,s.input=e,s.data=o.data,o.replaceWith&&(o.text.includes(o.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(o.replaceWith)),s}):[]};function Gfe(e){const{editor:t,state:n,from:i,to:o,rule:s,pasteEvent:r,dropEvent:a}=e,{commands:l,chain:c,can:u}=new wm({editor:t,state:n}),f=[];return n.doc.nodesBetween(i,o,(g,v)=>{if(!g.isTextblock||g.type.spec.code)return;const w=Math.max(i,v),_=Math.min(o,v+g.content.size),k=g.textBetween(w-v,_-v,void 0,"");Kfe(k,s.find,r).forEach(P=>{if(P.index===void 0)return;const M=w+P.index+1,F=M+P[0].length,z={from:n.tr.mapping.map(M),to:n.tr.mapping.map(F)},ee=s.handler({state:n,range:z,match:P,commands:l,chain:c,can:u,pasteEvent:r,dropEvent:a});f.push(ee)})}),f.every(g=>g!==null)}let jh=null;const Jfe=e=>{var t;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(t=n.clipboardData)===null||t===void 0||t.setData("text/html",e),n};function Yfe(e){const{editor:t,rules:n}=e;let i=null,o=!1,s=!1,r=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const l=({state:u,from:f,to:m,rule:g,pasteEvt:v})=>{const w=u.tr,_=vm({state:u,transaction:w});if(!(!Gfe({editor:t,state:_,from:Math.max(f-1,0),to:m.b-1,rule:g,pasteEvent:v,dropEvent:a})||!w.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return r=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,w}};return n.map(u=>new bn({view(f){const m=v=>{var w;i=!((w=f.dom.parentElement)===null||w===void 0)&&w.contains(v.target)?f.dom.parentElement:null,i&&(jh=t)},g=()=>{jh&&(jh=null)};return window.addEventListener("dragstart",m),window.addEventListener("dragend",g),{destroy(){window.removeEventListener("dragstart",m),window.removeEventListener("dragend",g)}}},props:{handleDOMEvents:{drop:(f,m)=>{if(s=i===f.dom.parentElement,a=m,!s){const g=jh;g&&setTimeout(()=>{const v=g.state.selection;v&&g.commands.deleteRange({from:v.from,to:v.to})},10)}return!1},paste:(f,m)=>{var g;const v=(g=m.clipboardData)===null||g===void 0?void 0:g.getData("text/html");return r=m,o=!!(v!=null&&v.includes("data-pm-slice")),!1}}},appendTransaction:(f,m,g)=>{const v=f[0],w=v.getMeta("uiEvent")==="paste"&&!o,_=v.getMeta("uiEvent")==="drop"&&!s,k=v.getMeta("applyPasteRules"),L=!!k;if(!w&&!_&&!L)return;if(L){let{text:F}=k;typeof F=="string"?F=F:F=E0(be.from(F),g.schema);const{from:z}=k,ee=z+F.length,ie=Jfe(F);return l({rule:u,state:g,from:z,to:{b:ee},pasteEvt:ie})}const P=m.doc.content.findDiffStart(g.doc.content),M=m.doc.content.findDiffEnd(g.doc.content);if(!(!jfe(P)||!M||P===M.b))return l({rule:u,state:g,from:P,to:M,pasteEvt:r})}}))}function Zfe(e){const t=e.filter((n,i)=>e.indexOf(n)!==i);return Array.from(new Set(t))}class Zl{constructor(t,n){this.splittableMarks=[],this.editor=n,this.extensions=Zl.resolve(t),this.schema=Nfe(this.extensions,n),this.setupExtensions()}static resolve(t){const n=Zl.sort(Zl.flatten(t)),i=Zfe(n.map(o=>o.name));return i.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${i.map(o=>`'${o}'`).join(", ")}]. This can lead to issues.`),n}static flatten(t){return t.map(n=>{const i={name:n.name,options:n.options,storage:n.storage},o=ze(n,"addExtensions",i);return o?[n,...this.flatten(o())]:n}).flat(10)}static sort(t){return t.sort((i,o)=>{const s=ze(i,"priority")||100,r=ze(o,"priority")||100;return s>r?-1:s<r?1:0})}get commands(){return this.extensions.reduce((t,n)=>{const i={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:$1(n.name,this.schema)},o=ze(n,"addCommands",i);return o?{...t,...o()}:t},{})}get plugins(){const{editor:t}=this,n=Zl.sort([...this.extensions].reverse()),i=[],o=[],s=n.map(r=>{const a={name:r.name,options:r.options,storage:r.storage,editor:t,type:$1(r.name,this.schema)},l=[],c=ze(r,"addKeyboardShortcuts",a);let u={};if(r.type==="mark"&&ze(r,"exitable",a)&&(u.ArrowRight=()=>Si.handleExit({editor:t,mark:r})),c){const w=Object.fromEntries(Object.entries(c()).map(([_,k])=>[_,()=>k({editor:t})]));u={...u,...w}}const f=gfe(u);l.push(f);const m=ze(r,"addInputRules",a);KC(r,t.options.enableInputRules)&&m&&i.push(...m());const g=ze(r,"addPasteRules",a);KC(r,t.options.enablePasteRules)&&g&&o.push(...g());const v=ze(r,"addProseMirrorPlugins",a);if(v){const w=v();l.push(...w)}return l}).flat();return[Wfe({editor:t,rules:i}),...Yfe({editor:t,rules:o}),...s]}get attributes(){return MM(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:n}=_m(this.extensions);return Object.fromEntries(n.filter(i=>!!ze(i,"addNodeView")).map(i=>{const o=this.attributes.filter(l=>l.type===i.name),s={name:i.name,options:i.options,storage:i.storage,editor:t,type:Bn(i.name,this.schema)},r=ze(i,"addNodeView",s);if(!r)return[];const a=(l,c,u,f,m)=>{const g=Kb(l,o);return r()({node:l,view:c,getPos:u,decorations:f,innerDecorations:m,editor:t,extension:i,HTMLAttributes:g})};return[i.name,a]}))}setupExtensions(){this.extensions.forEach(t=>{var n;this.editor.extensionStorage[t.name]=t.storage;const i={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:$1(t.name,this.schema)};t.type==="mark"&&(!((n=Ct(ze(t,"keepOnSplit",i)))!==null&&n!==void 0)||n)&&this.splittableMarks.push(t.name);const o=ze(t,"onBeforeCreate",i),s=ze(t,"onCreate",i),r=ze(t,"onUpdate",i),a=ze(t,"onSelectionUpdate",i),l=ze(t,"onTransaction",i),c=ze(t,"onFocus",i),u=ze(t,"onBlur",i),f=ze(t,"onDestroy",i);o&&this.editor.on("beforeCreate",o),s&&this.editor.on("create",s),r&&this.editor.on("update",r),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),c&&this.editor.on("focus",c),u&&this.editor.on("blur",u),f&&this.editor.on("destroy",f)})}}class xn{constructor(t={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...t},this.name=this.config.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Ct(ze(this,"addOptions",{name:this.name}))),this.storage=Ct(ze(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new xn(t)}configure(t={}){const n=this.extend({...this.config,addOptions:()=>Am(this.options,t)});return n.name=this.name,n.parent=this.parent,n}extend(t={}){const n=new xn({...this.config,...t});return n.parent=this,this.child=n,n.name=t.name?t.name:n.parent.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Ct(ze(n,"addOptions",{name:n.name})),n.storage=Ct(ze(n,"addStorage",{name:n.name,options:n.options})),n}}function EM(e,t,n){const{from:i,to:o}=t,{blockSeparator:s=`

`,textSerializers:r={}}=n||{};let a="";return e.nodesBetween(i,o,(l,c,u,f)=>{var m;l.isBlock&&c>i&&(a+=s);const g=r==null?void 0:r[l.type.name];if(g)return u&&(a+=g({node:l,pos:c,parent:u,index:f,range:t})),!1;l.isText&&(a+=(m=l==null?void 0:l.text)===null||m===void 0?void 0:m.slice(Math.max(i,c)-c,o-c))}),a}function $0(e){return Object.fromEntries(Object.entries(e.nodes).filter(([,t])=>t.spec.toText).map(([t,n])=>[t,n.spec.toText]))}const Xfe=xn.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new bn({key:new Dn("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:e}=this,{state:t,schema:n}=e,{doc:i,selection:o}=t,{ranges:s}=o,r=Math.min(...s.map(u=>u.$from.pos)),a=Math.max(...s.map(u=>u.$to.pos)),l=$0(n);return EM(i,{from:r,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),Qfe=()=>({editor:e,view:t})=>(requestAnimationFrame(()=>{var n;e.isDestroyed||(t.dom.blur(),(n=window==null?void 0:window.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),epe=(e=!1)=>({commands:t})=>t.setContent("",e),tpe=()=>({state:e,tr:t,dispatch:n})=>{const{selection:i}=t,{ranges:o}=i;return n&&o.forEach(({$from:s,$to:r})=>{e.doc.nodesBetween(s.pos,r.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=t,f=c.resolve(u.map(l)),m=c.resolve(u.map(l+a.nodeSize)),g=f.blockRange(m);if(!g)return;const v=Ic(g);if(a.type.isTextblock){const{defaultType:w}=f.parent.contentMatchAt(f.index());t.setNodeMarkup(g.start,w)}(v||v===0)&&t.lift(g,v)})}),!0},npe=e=>t=>e(t),ipe=()=>({state:e,dispatch:t})=>AM(e,t),ope=(e,t)=>({editor:n,tr:i})=>{const{state:o}=n,s=o.doc.slice(e.from,e.to);i.deleteRange(e.from,e.to);const r=i.mapping.map(t);return i.insert(r,s.content),i.setSelection(new Ze(i.doc.resolve(r-1))),!0},spe=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,i=n.$anchor.node();if(i.content.size>0)return!1;const o=e.selection.$anchor;for(let s=o.depth;s>0;s-=1)if(o.node(s).type===i.type){if(t){const a=o.before(s),l=o.after(s);e.delete(a,l).scrollIntoView()}return!0}return!1},rpe=e=>({tr:t,state:n,dispatch:i})=>{const o=Bn(e,n.schema),s=t.selection.$anchor;for(let r=s.depth;r>0;r-=1)if(s.node(r).type===o){if(i){const l=s.before(r),c=s.after(r);t.delete(l,c).scrollIntoView()}return!0}return!1},ape=e=>({tr:t,dispatch:n})=>{const{from:i,to:o}=e;return n&&t.delete(i,o),!0},lpe=()=>({state:e,dispatch:t})=>k0(e,t),cpe=()=>({commands:e})=>e.keyboardShortcut("Enter"),dpe=()=>({state:e,dispatch:t})=>Cfe(e,t);function cp(e,t,n={strict:!0}){const i=Object.keys(t);return i.length?i.every(o=>n.strict?t[o]===e[o]:O0(t[o])?t[o].test(e[o]):t[o]===e[o]):!0}function OM(e,t,n={}){return e.find(i=>i.type===t&&cp(Object.fromEntries(Object.keys(n).map(o=>[o,i.attrs[o]])),n))}function GC(e,t,n={}){return!!OM(e,t,n)}function I0(e,t,n){var i;if(!e||!t)return;let o=e.parent.childAfter(e.parentOffset);if((!o.node||!o.node.marks.some(u=>u.type===t))&&(o=e.parent.childBefore(e.parentOffset)),!o.node||!o.node.marks.some(u=>u.type===t)||(n=n||((i=o.node.marks[0])===null||i===void 0?void 0:i.attrs),!OM([...o.node.marks],t,n)))return;let r=o.index,a=e.start()+o.offset,l=r+1,c=a+o.node.nodeSize;for(;r>0&&GC([...e.parent.child(r-1).marks],t,n);)r-=1,a-=e.parent.child(r).nodeSize;for(;l<e.parent.childCount&&GC([...e.parent.child(l).marks],t,n);)c+=e.parent.child(l).nodeSize,l+=1;return{from:a,to:c}}function ya(e,t){if(typeof e=="string"){if(!t.marks[e])throw Error(`There is no mark type named '${e}'. Maybe you forgot to add the extension?`);return t.marks[e]}return e}const upe=(e,t={})=>({tr:n,state:i,dispatch:o})=>{const s=ya(e,i.schema),{doc:r,selection:a}=n,{$from:l,from:c,to:u}=a;if(o){const f=I0(l,s,t);if(f&&f.from<=c&&f.to>=u){const m=Ze.create(r,f.from,f.to);n.setSelection(m)}}return!0},hpe=e=>t=>{const n=typeof e=="function"?e(t):e;for(let i=0;i<n.length;i+=1)if(n[i](t))return!0;return!1};function L0(e){return e instanceof Ze}function Xs(e=0,t=0,n=0){return Math.min(Math.max(e,t),n)}function $M(e,t=null){if(!t)return null;const n=it.atStart(e),i=it.atEnd(e);if(t==="start"||t===!0)return n;if(t==="end")return i;const o=n.from,s=i.to;return t==="all"?Ze.create(e,Xs(0,o,s),Xs(e.content.size,o,s)):Ze.create(e,Xs(t,o,s),Xs(t,o,s))}function fpe(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function D0(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const ppe=(e=null,t={})=>({editor:n,view:i,tr:o,dispatch:s})=>{t={scrollIntoView:!0,...t};const r=()=>{(D0()||fpe())&&i.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(i.focus(),t!=null&&t.scrollIntoView&&n.commands.scrollIntoView())})};if(i.hasFocus()&&e===null||e===!1)return!0;if(s&&e===null&&!L0(n.state.selection))return r(),!0;const a=$M(o.doc,e)||n.state.selection,l=n.state.selection.eq(a);return s&&(l||o.setSelection(a),l&&o.storedMarks&&o.setStoredMarks(o.storedMarks),r()),!0},mpe=(e,t)=>n=>e.every((i,o)=>t(i,{...n,index:o})),gpe=(e,t)=>({tr:n,commands:i})=>i.insertContentAt({from:n.selection.from,to:n.selection.to},e,t),IM=e=>{const t=e.childNodes;for(let n=t.length-1;n>=0;n-=1){const i=t[n];i.nodeType===3&&i.nodeValue&&/^(\n\s\s|\n)$/.test(i.nodeValue)?e.removeChild(i):i.nodeType===1&&IM(i)}return e};function qh(e){const t=`<body>${e}</body>`,n=new window.DOMParser().parseFromString(t,"text/html").body;return IM(n)}function dp(e,t,n){if(e instanceof Gr||e instanceof be)return e;n={slice:!0,parseOptions:{},...n};const i=typeof e=="object"&&e!==null,o=typeof e=="string";if(i)try{if(Array.isArray(e)&&e.length>0)return be.fromArray(e.map(a=>t.nodeFromJSON(a)));const r=t.nodeFromJSON(e);return n.errorOnInvalidContent&&r.check(),r}catch(s){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",s),dp("",t,n)}if(o){if(n.errorOnInvalidContent){let r=!1,a="";const l=new bx({topNode:t.spec.topNode,marks:t.spec.marks,nodes:t.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(r=!0,a=typeof c=="string"?c:c.outerHTML,null)}]}})});if(n.slice?Jr.fromSchema(l).parseSlice(qh(e),n.parseOptions):Jr.fromSchema(l).parse(qh(e),n.parseOptions),n.errorOnInvalidContent&&r)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const s=Jr.fromSchema(t);return n.slice?s.parseSlice(qh(e),n.parseOptions).content:s.parse(qh(e),n.parseOptions)}return dp("",t,n)}function bpe(e,t,n){const i=e.steps.length-1;if(i<t)return;const o=e.steps[i];if(!(o instanceof Hn||o instanceof zn))return;const s=e.mapping.maps[i];let r=0;s.forEach((a,l,c,u)=>{r===0&&(r=u)}),e.setSelection(it.near(e.doc.resolve(r),n))}const ype=e=>!("type"in e),vpe=(e,t,n)=>({tr:i,dispatch:o,editor:s})=>{var r;if(o){n={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let a;try{a=dp(t,s.schema,{parseOptions:{preserveWhitespace:"full",...n.parseOptions},errorOnInvalidContent:(r=n.errorOnInvalidContent)!==null&&r!==void 0?r:s.options.enableContentCheck})}catch(v){return s.emit("contentError",{editor:s,error:v,disableCollaboration:()=>{s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}}),!1}let{from:l,to:c}=typeof e=="number"?{from:e,to:e}:{from:e.from,to:e.to},u=!0,f=!0;if((ype(a)?a:[a]).forEach(v=>{v.check(),u=u?v.isText&&v.marks.length===0:!1,f=f?v.isBlock:!1}),l===c&&f){const{parent:v}=i.doc.resolve(l);v.isTextblock&&!v.type.spec.code&&!v.childCount&&(l-=1,c+=1)}let g;if(u){if(Array.isArray(t))g=t.map(v=>v.text||"").join("");else if(t instanceof be){let v="";t.forEach(w=>{w.text&&(v+=w.text)}),g=v}else typeof t=="object"&&t&&t.text?g=t.text:g=t;i.insertText(g,l,c)}else g=a,i.replaceWith(l,c,g);n.updateSelection&&bpe(i,i.steps.length-1,-1),n.applyInputRules&&i.setMeta("applyInputRules",{from:l,text:g}),n.applyPasteRules&&i.setMeta("applyPasteRules",{from:l,text:g})}return!0},wpe=()=>({state:e,dispatch:t})=>vfe(e,t),_pe=()=>({state:e,dispatch:t})=>wfe(e,t),Cpe=()=>({state:e,dispatch:t})=>gM(e,t),Ape=()=>({state:e,dispatch:t})=>wM(e,t),kpe=()=>({state:e,dispatch:t,tr:n})=>{try{const i=fm(e.doc,e.selection.$from.pos,-1);return i==null?!1:(n.join(i,2),t&&t(n),!0)}catch{return!1}},Spe=()=>({state:e,dispatch:t,tr:n})=>{try{const i=fm(e.doc,e.selection.$from.pos,1);return i==null?!1:(n.join(i,2),t&&t(n),!0)}catch{return!1}},xpe=()=>({state:e,dispatch:t})=>bfe(e,t),Mpe=()=>({state:e,dispatch:t})=>yfe(e,t);function LM(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function Tpe(e){const t=e.split(/-(?!$)/);let n=t[t.length-1];n==="Space"&&(n=" ");let i,o,s,r;for(let a=0;a<t.length-1;a+=1){const l=t[a];if(/^(cmd|meta|m)$/i.test(l))r=!0;else if(/^a(lt)?$/i.test(l))i=!0;else if(/^(c|ctrl|control)$/i.test(l))o=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))D0()||LM()?r=!0:o=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return i&&(n=`Alt-${n}`),o&&(n=`Ctrl-${n}`),r&&(n=`Meta-${n}`),s&&(n=`Shift-${n}`),n}const Epe=e=>({editor:t,view:n,tr:i,dispatch:o})=>{const s=Tpe(e).split(/-(?!$)/),r=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:r==="Space"?" ":r,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=t.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,a))});return l==null||l.steps.forEach(c=>{const u=c.map(i.mapping);u&&o&&i.maybeStep(u)}),!0};function du(e,t,n={}){const{from:i,to:o,empty:s}=e.selection,r=t?Bn(t,e.schema):null,a=[];e.doc.nodesBetween(i,o,(f,m)=>{if(f.isText)return;const g=Math.max(i,m),v=Math.min(o,m+f.nodeSize);a.push({node:f,from:g,to:v})});const l=o-i,c=a.filter(f=>r?r.name===f.node.type.name:!0).filter(f=>cp(f.node.attrs,n,{strict:!1}));return s?!!c.length:c.reduce((f,m)=>f+m.to-m.from,0)>=l}const Ope=(e,t={})=>({state:n,dispatch:i})=>{const o=Bn(e,n.schema);return du(n,o,t)?_fe(n,i):!1},$pe=()=>({state:e,dispatch:t})=>kM(e,t),Ipe=e=>({state:t,dispatch:n})=>{const i=Bn(e,t.schema);return Lfe(i)(t,n)},Lpe=()=>({state:e,dispatch:t})=>CM(e,t);function km(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function JC(e,t){const n=typeof t=="string"?[t]:t;return Object.keys(e).reduce((i,o)=>(n.includes(o)||(i[o]=e[o]),i),{})}const Dpe=(e,t)=>({tr:n,state:i,dispatch:o})=>{let s=null,r=null;const a=km(typeof e=="string"?e:e.name,i.schema);return a?(a==="node"&&(s=Bn(e,i.schema)),a==="mark"&&(r=ya(e,i.schema)),o&&n.selection.ranges.forEach(l=>{i.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,u)=>{s&&s===c.type&&n.setNodeMarkup(u,void 0,JC(c.attrs,t)),r&&c.marks.length&&c.marks.forEach(f=>{r===f.type&&n.addMark(u,u+c.nodeSize,r.create(JC(f.attrs,t)))})})}),!0):!1},Rpe=()=>({tr:e,dispatch:t})=>(t&&e.scrollIntoView(),!0),Ppe=()=>({tr:e,dispatch:t})=>{if(t){const n=new eo(e.doc);e.setSelection(n)}return!0},Hpe=()=>({state:e,dispatch:t})=>yM(e,t),Vpe=()=>({state:e,dispatch:t})=>_M(e,t),zpe=()=>({state:e,dispatch:t})=>Sfe(e,t),Npe=()=>({state:e,dispatch:t})=>Tfe(e,t),Bpe=()=>({state:e,dispatch:t})=>Mfe(e,t);function Gb(e,t,n={},i={}){return dp(e,t,{slice:!1,parseOptions:n,errorOnInvalidContent:i.errorOnInvalidContent})}const Fpe=(e,t=!1,n={},i={})=>({editor:o,tr:s,dispatch:r,commands:a})=>{var l,c;const{doc:u}=s;if(n.preserveWhitespace!=="full"){const f=Gb(e,o.schema,n,{errorOnInvalidContent:(l=i.errorOnInvalidContent)!==null&&l!==void 0?l:o.options.enableContentCheck});return r&&s.replaceWith(0,u.content.size,f).setMeta("preventUpdate",!t),!0}return r&&s.setMeta("preventUpdate",!t),a.insertContentAt({from:0,to:u.content.size},e,{parseOptions:n,errorOnInvalidContent:(c=i.errorOnInvalidContent)!==null&&c!==void 0?c:o.options.enableContentCheck})};function DM(e,t){const n=ya(t,e.schema),{from:i,to:o,empty:s}=e.selection,r=[];s?(e.storedMarks&&r.push(...e.storedMarks),r.push(...e.selection.$head.marks())):e.doc.nodesBetween(i,o,l=>{r.push(...l.marks)});const a=r.find(l=>l.type.name===n.name);return a?{...a.attrs}:{}}function Wpe(e,t){const n=new h0(e);return t.forEach(i=>{i.steps.forEach(o=>{n.step(o)})}),n}function Upe(e){for(let t=0;t<e.edgeCount;t+=1){const{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function jpe(e,t,n){const i=[];return e.nodesBetween(t.from,t.to,(o,s)=>{n(o)&&i.push({node:o,pos:s})}),i}function RM(e,t){for(let n=e.depth;n>0;n-=1){const i=e.node(n);if(t(i))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:i}}}function R0(e){return t=>RM(t.$from,e)}function PM(e,t){const n={from:0,to:e.content.size};return EM(e,n,t)}function qpe(e,t){const n=Bn(t,e.schema),{from:i,to:o}=e.selection,s=[];e.doc.nodesBetween(i,o,a=>{s.push(a)});const r=s.reverse().find(a=>a.type.name===n.name);return r?{...r.attrs}:{}}function HM(e,t){const n=km(typeof t=="string"?t:t.name,e.schema);return n==="node"?qpe(e,t):n==="mark"?DM(e,t):{}}function Kpe(e,t=JSON.stringify){const n={};return e.filter(i=>{const o=t(i);return Object.prototype.hasOwnProperty.call(n,o)?!1:n[o]=!0})}function Gpe(e){const t=Kpe(e);return t.length===1?t:t.filter((n,i)=>!t.filter((s,r)=>r!==i).some(s=>n.oldRange.from>=s.oldRange.from&&n.oldRange.to<=s.oldRange.to&&n.newRange.from>=s.newRange.from&&n.newRange.to<=s.newRange.to))}function Jpe(e){const{mapping:t,steps:n}=e,i=[];return t.maps.forEach((o,s)=>{const r=[];if(o.ranges.length)o.forEach((a,l)=>{r.push({from:a,to:l})});else{const{from:a,to:l}=n[s];if(a===void 0||l===void 0)return;r.push({from:a,to:l})}r.forEach(({from:a,to:l})=>{const c=t.slice(s).map(a,-1),u=t.slice(s).map(l),f=t.invert().map(c,-1),m=t.invert().map(u);i.push({oldRange:{from:f,to:m},newRange:{from:c,to:u}})})}),Gpe(i)}function P0(e,t,n){const i=[];return e===t?n.resolve(e).marks().forEach(o=>{const s=n.resolve(e),r=I0(s,o.type);r&&i.push({mark:o,...r})}):n.nodesBetween(e,t,(o,s)=>{!o||(o==null?void 0:o.nodeSize)===void 0||i.push(...o.marks.map(r=>({from:s,to:s+o.nodeSize,mark:r})))}),i}function Tf(e,t,n){return Object.fromEntries(Object.entries(n).filter(([i])=>{const o=e.find(s=>s.type===t&&s.name===i);return o?o.attribute.keepOnSplit:!1}))}function Jb(e,t,n={}){const{empty:i,ranges:o}=e.selection,s=t?ya(t,e.schema):null;if(i)return!!(e.storedMarks||e.selection.$from.marks()).filter(f=>s?s.name===f.type.name:!0).find(f=>cp(f.attrs,n,{strict:!1}));let r=0;const a=[];if(o.forEach(({$from:f,$to:m})=>{const g=f.pos,v=m.pos;e.doc.nodesBetween(g,v,(w,_)=>{if(!w.isText&&!w.marks.length)return;const k=Math.max(g,_),L=Math.min(v,_+w.nodeSize),P=L-k;r+=P,a.push(...w.marks.map(M=>({mark:M,from:k,to:L})))})}),r===0)return!1;const l=a.filter(f=>s?s.name===f.mark.type.name:!0).filter(f=>cp(f.mark.attrs,n,{strict:!1})).reduce((f,m)=>f+m.to-m.from,0),c=a.filter(f=>s?f.mark.type!==s&&f.mark.type.excludes(s):!0).reduce((f,m)=>f+m.to-m.from,0);return(l>0?l+c:l)>=r}function Ype(e,t,n={}){if(!t)return du(e,null,n)||Jb(e,null,n);const i=km(t,e.schema);return i==="node"?du(e,t,n):i==="mark"?Jb(e,t,n):!1}function YC(e,t){const{nodeExtensions:n}=_m(t),i=n.find(r=>r.name===e);if(!i)return!1;const o={name:i.name,options:i.options,storage:i.storage},s=Ct(ze(i,"group",o));return typeof s!="string"?!1:s.split(" ").includes("list")}function Sm(e,{checkChildren:t=!0,ignoreWhitespace:n=!1}={}){var i;if(n){if(e.type.name==="hardBreak")return!0;if(e.isText)return/^\s*$/m.test((i=e.text)!==null&&i!==void 0?i:"")}if(e.isText)return!e.text;if(e.isAtom||e.isLeaf)return!1;if(e.content.childCount===0)return!0;if(t){let o=!0;return e.content.forEach(s=>{o!==!1&&(Sm(s,{ignoreWhitespace:n,checkChildren:t})||(o=!1))}),o}return!1}function VM(e){return e instanceof Ye}function zM(e,t,n){const o=e.state.doc.content.size,s=Xs(t,0,o),r=Xs(n,0,o),a=e.coordsAtPos(s),l=e.coordsAtPos(r,-1),c=Math.min(a.top,l.top),u=Math.max(a.bottom,l.bottom),f=Math.min(a.left,l.left),m=Math.max(a.right,l.right),g=m-f,v=u-c,k={top:c,bottom:u,left:f,right:m,width:g,height:v,x:f,y:c};return{...k,toJSON:()=>k}}function Zpe(e,t,n){var i;const{selection:o}=t;let s=null;if(L0(o)&&(s=o.$cursor),s){const a=(i=e.storedMarks)!==null&&i!==void 0?i:s.marks();return!!n.isInSet(a)||!a.some(l=>l.type.excludes(n))}const{ranges:r}=o;return r.some(({$from:a,$to:l})=>{let c=a.depth===0?e.doc.inlineContent&&e.doc.type.allowsMarkType(n):!1;return e.doc.nodesBetween(a.pos,l.pos,(u,f,m)=>{if(c)return!1;if(u.isInline){const g=!m||m.type.allowsMarkType(n),v=!!n.isInSet(u.marks)||!u.marks.some(w=>w.type.excludes(n));c=g&&v}return!c}),c})}const Xpe=(e,t={})=>({tr:n,state:i,dispatch:o})=>{const{selection:s}=n,{empty:r,ranges:a}=s,l=ya(e,i.schema);if(o)if(r){const c=DM(i,l);n.addStoredMark(l.create({...c,...t}))}else a.forEach(c=>{const u=c.$from.pos,f=c.$to.pos;i.doc.nodesBetween(u,f,(m,g)=>{const v=Math.max(g,u),w=Math.min(g+m.nodeSize,f);m.marks.find(k=>k.type===l)?m.marks.forEach(k=>{l===k.type&&n.addMark(v,w,l.create({...k.attrs,...t}))}):n.addMark(v,w,l.create(t))})});return Zpe(i,n,l)},Qpe=(e,t)=>({tr:n})=>(n.setMeta(e,t),!0),eme=(e,t={})=>({state:n,dispatch:i,chain:o})=>{const s=Bn(e,n.schema);let r;return n.selection.$anchor.sameParent(n.selection.$head)&&(r=n.selection.$anchor.parent.attrs),s.isTextblock?o().command(({commands:a})=>UC(s,{...r,...t})(n)?!0:a.clearNodes()).command(({state:a})=>UC(s,{...r,...t})(a,i)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},tme=e=>({tr:t,dispatch:n})=>{if(n){const{doc:i}=t,o=Xs(e,0,i.content.size),s=Ye.create(i,o);t.setSelection(s)}return!0},nme=e=>({tr:t,dispatch:n})=>{if(n){const{doc:i}=t,{from:o,to:s}=typeof e=="number"?{from:e,to:e}:e,r=Ze.atStart(i).from,a=Ze.atEnd(i).to,l=Xs(o,r,a),c=Xs(s,r,a),u=Ze.create(i,l,c);t.setSelection(u)}return!0},ime=e=>({state:t,dispatch:n})=>{const i=Bn(e,t.schema);return Pfe(i)(t,n)};function ZC(e,t){const n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){const i=n.filter(o=>t==null?void 0:t.includes(o.type.name));e.tr.ensureMarks(i)}}const ome=({keepMarks:e=!0}={})=>({tr:t,state:n,dispatch:i,editor:o})=>{const{selection:s,doc:r}=t,{$from:a,$to:l}=s,c=o.extensionManager.attributes,u=Tf(c,a.node().type.name,a.node().attrs);if(s instanceof Ye&&s.node.isBlock)return!a.parentOffset||!ir(r,a.pos)?!1:(i&&(e&&ZC(n,o.extensionManager.splittableMarks),t.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const f=l.parentOffset===l.parent.content.size,m=a.depth===0?void 0:Upe(a.node(-1).contentMatchAt(a.indexAfter(-1)));let g=f&&m?[{type:m,attrs:u}]:void 0,v=ir(t.doc,t.mapping.map(a.pos),1,g);if(!g&&!v&&ir(t.doc,t.mapping.map(a.pos),1,m?[{type:m}]:void 0)&&(v=!0,g=m?[{type:m,attrs:u}]:void 0),i){if(v&&(s instanceof Ze&&t.deleteSelection(),t.split(t.mapping.map(a.pos),1,g),m&&!f&&!a.parentOffset&&a.parent.type!==m)){const w=t.mapping.map(a.before()),_=t.doc.resolve(w);a.node(-1).canReplaceWith(_.index(),_.index()+1,m)&&t.setNodeMarkup(t.mapping.map(a.before()),m)}e&&ZC(n,o.extensionManager.splittableMarks),t.scrollIntoView()}return v},sme=(e,t={})=>({tr:n,state:i,dispatch:o,editor:s})=>{var r;const a=Bn(e,i.schema),{$from:l,$to:c}=i.selection,u=i.selection.node;if(u&&u.isBlock||l.depth<2||!l.sameParent(c))return!1;const f=l.node(-1);if(f.type!==a)return!1;const m=s.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(o){let k=be.empty;const L=l.index(-1)?1:l.index(-2)?2:3;for(let ie=l.depth-L;ie>=l.depth-3;ie-=1)k=be.from(l.node(ie).copy(k));const P=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,M={...Tf(m,l.node().type.name,l.node().attrs),...t},F=((r=a.contentMatch.defaultType)===null||r===void 0?void 0:r.createAndFill(M))||void 0;k=k.append(be.from(a.createAndFill(null,F)||void 0));const z=l.before(l.depth-(L-1));n.replace(z,l.after(-P),new Oe(k,4-L,0));let ee=-1;n.doc.nodesBetween(z,n.doc.content.size,(ie,K)=>{if(ee>-1)return!1;ie.isTextblock&&ie.content.size===0&&(ee=K+1)}),ee>-1&&n.setSelection(Ze.near(n.doc.resolve(ee))),n.scrollIntoView()}return!0}const g=c.pos===l.end()?f.contentMatchAt(0).defaultType:null,v={...Tf(m,f.type.name,f.attrs),...t},w={...Tf(m,l.node().type.name,l.node().attrs),...t};n.delete(l.pos,c.pos);const _=g?[{type:a,attrs:v},{type:g,attrs:w}]:[{type:a,attrs:v}];if(!ir(n.doc,l.pos,2))return!1;if(o){const{selection:k,storedMarks:L}=i,{splittableMarks:P}=s.extensionManager,M=L||k.$to.parentOffset&&k.$from.marks();if(n.split(l.pos,2,_).scrollIntoView(),!M||!o)return!0;const F=M.filter(z=>P.includes(z.type.name));n.ensureMarks(F)}return!0},I1=(e,t)=>{const n=R0(r=>r.type===t)(e.selection);if(!n)return!0;const i=e.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(i===void 0)return!0;const o=e.doc.nodeAt(i);return n.node.type===(o==null?void 0:o.type)&&ga(e.doc,n.pos)&&e.join(n.pos),!0},L1=(e,t)=>{const n=R0(r=>r.type===t)(e.selection);if(!n)return!0;const i=e.doc.resolve(n.start).after(n.depth);if(i===void 0)return!0;const o=e.doc.nodeAt(i);return n.node.type===(o==null?void 0:o.type)&&ga(e.doc,i)&&e.join(i),!0},rme=(e,t,n,i={})=>({editor:o,tr:s,state:r,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:f,splittableMarks:m}=o.extensionManager,g=Bn(e,r.schema),v=Bn(t,r.schema),{selection:w,storedMarks:_}=r,{$from:k,$to:L}=w,P=k.blockRange(L),M=_||w.$to.parentOffset&&w.$from.marks();if(!P)return!1;const F=R0(z=>YC(z.type.name,f))(w);if(P.depth>=1&&F&&P.depth-F.depth<=1){if(F.node.type===g)return c.liftListItem(v);if(YC(F.node.type.name,f)&&g.validContent(F.node.content)&&a)return l().command(()=>(s.setNodeMarkup(F.pos,g),!0)).command(()=>I1(s,g)).command(()=>L1(s,g)).run()}return!n||!M||!a?l().command(()=>u().wrapInList(g,i)?!0:c.clearNodes()).wrapInList(g,i).command(()=>I1(s,g)).command(()=>L1(s,g)).run():l().command(()=>{const z=u().wrapInList(g,i),ee=M.filter(ie=>m.includes(ie.type.name));return s.ensureMarks(ee),z?!0:c.clearNodes()}).wrapInList(g,i).command(()=>I1(s,g)).command(()=>L1(s,g)).run()},ame=(e,t={},n={})=>({state:i,commands:o})=>{const{extendEmptyMarkRange:s=!1}=n,r=ya(e,i.schema);return Jb(i,r,t)?o.unsetMark(r,{extendEmptyMarkRange:s}):o.setMark(r,t)},lme=(e,t,n={})=>({state:i,commands:o})=>{const s=Bn(e,i.schema),r=Bn(t,i.schema),a=du(i,s,n);let l;return i.selection.$anchor.sameParent(i.selection.$head)&&(l=i.selection.$anchor.parent.attrs),a?o.setNode(r,l):o.setNode(s,{...l,...n})},cme=(e,t={})=>({state:n,commands:i})=>{const o=Bn(e,n.schema);return du(n,o,t)?i.lift(o):i.wrapIn(o,t)},dme=()=>({state:e,dispatch:t})=>{const n=e.plugins;for(let i=0;i<n.length;i+=1){const o=n[i];let s;if(o.spec.isInputRules&&(s=o.getState(e))){if(t){const r=e.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)r.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=r.doc.resolve(s.from).marks();r.replaceWith(s.from,s.to,e.schema.text(s.text,l))}else r.delete(s.from,s.to)}return!0}}return!1},ume=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,{empty:i,ranges:o}=n;return i||t&&o.forEach(s=>{e.removeMark(s.$from.pos,s.$to.pos)}),!0},hme=(e,t={})=>({tr:n,state:i,dispatch:o})=>{var s;const{extendEmptyMarkRange:r=!1}=t,{selection:a}=n,l=ya(e,i.schema),{$from:c,empty:u,ranges:f}=a;if(!o)return!0;if(u&&r){let{from:m,to:g}=a;const v=(s=c.marks().find(_=>_.type===l))===null||s===void 0?void 0:s.attrs,w=I0(c,l,v);w&&(m=w.from,g=w.to),n.removeMark(m,g,l)}else f.forEach(m=>{n.removeMark(m.$from.pos,m.$to.pos,l)});return n.removeStoredMark(l),!0},fme=(e,t={})=>({tr:n,state:i,dispatch:o})=>{let s=null,r=null;const a=km(typeof e=="string"?e:e.name,i.schema);return a?(a==="node"&&(s=Bn(e,i.schema)),a==="mark"&&(r=ya(e,i.schema)),o&&n.selection.ranges.forEach(l=>{const c=l.$from.pos,u=l.$to.pos;let f,m,g,v;n.selection.empty?i.doc.nodesBetween(c,u,(w,_)=>{s&&s===w.type&&(g=Math.max(_,c),v=Math.min(_+w.nodeSize,u),f=_,m=w)}):i.doc.nodesBetween(c,u,(w,_)=>{_<c&&s&&s===w.type&&(g=Math.max(_,c),v=Math.min(_+w.nodeSize,u),f=_,m=w),_>=c&&_<=u&&(s&&s===w.type&&n.setNodeMarkup(_,void 0,{...w.attrs,...t}),r&&w.marks.length&&w.marks.forEach(k=>{if(r===k.type){const L=Math.max(_,c),P=Math.min(_+w.nodeSize,u);n.addMark(L,P,r.create({...k.attrs,...t}))}}))}),m&&(f!==void 0&&n.setNodeMarkup(f,void 0,{...m.attrs,...t}),r&&m.marks.length&&m.marks.forEach(w=>{r===w.type&&n.addMark(g,v,r.create({...w.attrs,...t}))}))}),!0):!1},pme=(e,t={})=>({state:n,dispatch:i})=>{const o=Bn(e,n.schema);return Efe(o,t)(n,i)},mme=(e,t={})=>({state:n,dispatch:i})=>{const o=Bn(e,n.schema);return Ofe(o,t)(n,i)};var gme=Object.freeze({__proto__:null,blur:Qfe,clearContent:epe,clearNodes:tpe,command:npe,createParagraphNear:ipe,cut:ope,deleteCurrentNode:spe,deleteNode:rpe,deleteRange:ape,deleteSelection:lpe,enter:cpe,exitCode:dpe,extendMarkRange:upe,first:hpe,focus:ppe,forEach:mpe,insertContent:gpe,insertContentAt:vpe,joinBackward:Cpe,joinDown:_pe,joinForward:Ape,joinItemBackward:kpe,joinItemForward:Spe,joinTextblockBackward:xpe,joinTextblockForward:Mpe,joinUp:wpe,keyboardShortcut:Epe,lift:Ope,liftEmptyBlock:$pe,liftListItem:Ipe,newlineInCode:Lpe,resetAttributes:Dpe,scrollIntoView:Rpe,selectAll:Ppe,selectNodeBackward:Hpe,selectNodeForward:Vpe,selectParentNode:zpe,selectTextblockEnd:Npe,selectTextblockStart:Bpe,setContent:Fpe,setMark:Xpe,setMeta:Qpe,setNode:eme,setNodeSelection:tme,setTextSelection:nme,sinkListItem:ime,splitBlock:ome,splitListItem:sme,toggleList:rme,toggleMark:ame,toggleNode:lme,toggleWrap:cme,undoInputRule:dme,unsetAllMarks:ume,unsetMark:hme,updateAttributes:fme,wrapIn:pme,wrapInList:mme});const bme=xn.create({name:"commands",addCommands(){return{...gme}}}),yme=xn.create({name:"drop",addProseMirrorPlugins(){return[new bn({key:new Dn("tiptapDrop"),props:{handleDrop:(e,t,n,i)=>{this.editor.emit("drop",{editor:this.editor,event:t,slice:n,moved:i})}}})]}}),vme=xn.create({name:"editable",addProseMirrorPlugins(){return[new bn({key:new Dn("editable"),props:{editable:()=>this.editor.options.editable}})]}}),wme=xn.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:e}=this;return[new bn({key:new Dn("focusEvents"),props:{handleDOMEvents:{focus:(t,n)=>{e.isFocused=!0;const i=e.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return t.dispatch(i),!1},blur:(t,n)=>{e.isFocused=!1;const i=e.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return t.dispatch(i),!1}}}})]}}),_me=xn.create({name:"keymap",addKeyboardShortcuts(){const e=()=>this.editor.commands.first(({commands:r})=>[()=>r.undoInputRule(),()=>r.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:f}=l,{pos:m,parent:g}=f,v=f.parent.isTextblock&&m>0?a.doc.resolve(m-1):f,w=v.parent.type.spec.isolating,_=f.pos-f.parentOffset,k=w&&v.parent.childCount===1?_===f.pos:it.atStart(c).from===m;return!u||!g.type.isTextblock||g.textContent.length||!k||k&&f.parent.type.name==="paragraph"?!1:r.clearNodes()}),()=>r.deleteSelection(),()=>r.joinBackward(),()=>r.selectNodeBackward()]),t=()=>this.editor.commands.first(({commands:r})=>[()=>r.deleteSelection(),()=>r.deleteCurrentNode(),()=>r.joinForward(),()=>r.selectNodeForward()]),i={Enter:()=>this.editor.commands.first(({commands:r})=>[()=>r.newlineInCode(),()=>r.createParagraphNear(),()=>r.liftEmptyBlock(),()=>r.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},o={...i},s={...i,"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return D0()||LM()?s:o},addProseMirrorPlugins(){return[new bn({key:new Dn("clearDocument"),appendTransaction:(e,t,n)=>{if(e.some(w=>w.getMeta("composition")))return;const i=e.some(w=>w.docChanged)&&!t.doc.eq(n.doc),o=e.some(w=>w.getMeta("preventClearDocument"));if(!i||o)return;const{empty:s,from:r,to:a}=t.selection,l=it.atStart(t.doc).from,c=it.atEnd(t.doc).to;if(s||!(r===l&&a===c)||!Sm(n.doc))return;const m=n.tr,g=vm({state:n,transaction:m}),{commands:v}=new wm({editor:this.editor,state:g});if(v.clearNodes(),!!m.steps.length)return m}})]}}),Cme=xn.create({name:"paste",addProseMirrorPlugins(){return[new bn({key:new Dn("tiptapPaste"),props:{handlePaste:(e,t,n)=>{this.editor.emit("paste",{editor:this.editor,event:t,slice:n})}}})]}}),Ame=xn.create({name:"tabindex",addProseMirrorPlugins(){return[new bn({key:new Dn("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class Ba{get name(){return this.node.type.name}constructor(t,n,i=!1,o=null){this.currentNode=null,this.actualDepth=null,this.isBlock=i,this.resolvedPos=t,this.editor=n,this.currentNode=o}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var t;return(t=this.actualDepth)!==null&&t!==void 0?t:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(t){let n=this.from,i=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,i=this.to-1}this.editor.commands.insertContentAt({from:n,to:i},t)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const t=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(t);return new Ba(n,this.editor)}get before(){let t=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.from-3)),new Ba(t,this.editor)}get after(){let t=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.to+3)),new Ba(t,this.editor)}get children(){const t=[];return this.node.content.forEach((n,i)=>{const o=n.isBlock&&!n.isTextblock,s=n.isAtom&&!n.isText,r=this.pos+i+(s?0:1),a=this.resolvedPos.doc.resolve(r);if(!o&&a.depth<=this.depth)return;const l=new Ba(a,this.editor,o,o?n:null);o&&(l.actualDepth=this.depth+1),t.push(new Ba(a,this.editor,o,o?n:null))}),t}get firstChild(){return this.children[0]||null}get lastChild(){const t=this.children;return t[t.length-1]||null}closest(t,n={}){let i=null,o=this.parent;for(;o&&!i;){if(o.node.type.name===t)if(Object.keys(n).length>0){const s=o.node.attrs,r=Object.keys(n);for(let a=0;a<r.length;a+=1){const l=r[a];if(s[l]!==n[l])break}}else i=o;o=o.parent}return i}querySelector(t,n={}){return this.querySelectorAll(t,n,!0)[0]||null}querySelectorAll(t,n={},i=!1){let o=[];if(!this.children||this.children.length===0)return o;const s=Object.keys(n);return this.children.forEach(r=>{i&&o.length>0||(r.node.type.name===t&&s.every(l=>n[l]===r.node.attrs[l])&&o.push(r),!(i&&o.length>0)&&(o=o.concat(r.querySelectorAll(t,n,i))))}),o}setAttribute(t){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...t}),this.editor.view.dispatch(n)}}const kme=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function Sme(e,t,n){const i=document.querySelector("style[data-tiptap-style]");if(i!==null)return i;const o=document.createElement("style");return t&&o.setAttribute("nonce",t),o.setAttribute("data-tiptap-style",""),o.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(o),o}let xme=class extends Hfe{constructor(t={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:i,moved:o})=>this.options.onDrop(n,i,o)),this.on("paste",({event:n,slice:i})=>this.options.onPaste(n,i)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=Sme(kme,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,n=!0){this.setOptions({editable:t}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(t,n){const i=TM(n)?n(t,[...this.state.plugins]):[...this.state.plugins,t],o=this.state.reconfigure({plugins:i});return this.view.updateState(o),o}unregisterPlugin(t){if(this.isDestroyed)return;const n=this.state.plugins;let i=n;if([].concat(t).forEach(s=>{const r=typeof s=="string"?`${s}$`:s.key;i=n.filter(a=>!a.key.startsWith(r))}),n.length===i.length)return;const o=this.state.reconfigure({plugins:i});return this.view.updateState(o),o}createExtensionManager(){var t,n;const o=[...this.options.enableCoreExtensions?[vme,Xfe.configure({blockSeparator:(n=(t=this.options.coreExtensionOptions)===null||t===void 0?void 0:t.clipboardTextSerializer)===null||n===void 0?void 0:n.blockSeparator}),bme,wme,_me,Ame,yme,Cme].filter(s=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[s.name]!==!1:!0):[],...this.options.extensions].filter(s=>["extension","node","mark"].includes(s==null?void 0:s.type));this.extensionManager=new Zl(o,this)}createCommandManager(){this.commandManager=new wm({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var t;let n;try{n=Gb(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(r){if(!(r instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(r.message))throw r;this.emit("contentError",{editor:this,error:r,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(a=>a.name!=="collaboration"),this.createExtensionManager()}}),n=Gb(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const i=$M(n,this.options.autofocus);this.view=new afe(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(t=this.options.editorProps)===null||t===void 0?void 0:t.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:Yl.create({doc:n,selection:i||void 0})});const o=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(o),this.createNodeViews(),this.prependClass();const s=this.view.dom;s.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(r=>{var a;return(a=this.capturedTransaction)===null||a===void 0?void 0:a.step(r)});return}const n=this.state.apply(t),i=!this.state.selection.eq(n.selection);this.emit("beforeTransaction",{editor:this,transaction:t,nextState:n}),this.view.updateState(n),this.emit("transaction",{editor:this,transaction:t}),i&&this.emit("selectionUpdate",{editor:this,transaction:t});const o=t.getMeta("focus"),s=t.getMeta("blur");o&&this.emit("focus",{editor:this,event:o.event,transaction:t}),s&&this.emit("blur",{editor:this,event:s.event,transaction:t}),!(!t.docChanged||t.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:t})}getAttributes(t){return HM(this.state,t)}isActive(t,n){const i=typeof t=="string"?t:null,o=typeof t=="string"?n:t;return Ype(this.state,i,o)}getJSON(){return this.state.doc.toJSON()}getHTML(){return E0(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:n=`

`,textSerializers:i={}}=t||{};return PM(this.state.doc,{blockSeparator:n,textSerializers:{...$0(this.schema),...i}})}get isEmpty(){return Sm(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const t=this.view.dom;t&&t.editor&&delete t.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var t;return!(!((t=this.view)===null||t===void 0)&&t.docView)}$node(t,n){var i;return((i=this.$doc)===null||i===void 0?void 0:i.querySelector(t,n))||null}$nodes(t,n){var i;return((i=this.$doc)===null||i===void 0?void 0:i.querySelectorAll(t,n))||null}$pos(t){const n=this.state.doc.resolve(t);return new Ba(n,this)}get $doc(){return this.$pos(0)}};function ll(e){return new Cm({find:e.find,handler:({state:t,range:n,match:i})=>{const o=Ct(e.getAttributes,void 0,i);if(o===!1||o===null)return null;const{tr:s}=t,r=i[i.length-1],a=i[0];if(r){const l=a.search(/\S/),c=n.from+a.indexOf(r),u=c+r.length;if(P0(n.from,n.to,t.doc).filter(g=>g.mark.type.excluded.find(w=>w===e.type&&w!==g.mark.type)).filter(g=>g.to>c).length)return null;u<n.to&&s.delete(u,n.to),c>n.from&&s.delete(n.from+l,c);const m=n.from+l+r.length;s.addMark(n.from+l,m,e.type.create(o||{})),s.removeStoredMark(e.type)}}})}function Mme(e){return new Cm({find:e.find,handler:({state:t,range:n,match:i})=>{const o=Ct(e.getAttributes,void 0,i)||{},{tr:s}=t,r=n.from;let a=n.to;const l=e.type.create(o);if(i[1]){const c=i[0].lastIndexOf(i[1]);let u=r+c;u>a?u=a:a=u+i[1].length;const f=i[0][i[0].length-1];s.insertText(f,r+i[0].length-1),s.replaceWith(u,a,l)}else if(i[0]){const c=e.type.isInline?r:r-1;s.insert(c,e.type.create(o)).delete(s.mapping.map(r),s.mapping.map(a))}s.scrollIntoView()}})}function Yb(e){return new Cm({find:e.find,handler:({state:t,range:n,match:i})=>{const o=t.doc.resolve(n.from),s=Ct(e.getAttributes,void 0,i)||{};if(!o.node(-1).canReplaceWith(o.index(-1),o.indexAfter(-1),e.type))return null;t.tr.delete(n.from,n.to).setBlockType(n.from,n.from,e.type,s)}})}function uu(e){return new Cm({find:e.find,handler:({state:t,range:n,match:i,chain:o})=>{const s=Ct(e.getAttributes,void 0,i)||{},r=t.tr.delete(n.from,n.to),l=r.doc.resolve(n.from).blockRange(),c=l&&u0(l,e.type,s);if(!c)return null;if(r.wrap(l,c),e.keepMarks&&e.editor){const{selection:f,storedMarks:m}=t,{splittableMarks:g}=e.editor.extensionManager,v=m||f.$to.parentOffset&&f.$from.marks();if(v){const w=v.filter(_=>g.includes(_.type.name));r.ensureMarks(w)}}if(e.keepAttributes){const f=e.type.name==="bulletList"||e.type.name==="orderedList"?"listItem":"taskList";o().updateAttributes(f,s).run()}const u=r.doc.resolve(n.from-1).nodeBefore;u&&u.type===e.type&&ga(r.doc,n.from-1)&&(!e.joinPredicate||e.joinPredicate(i,u))&&r.join(n.from-1)}})}let Fn=class Zb{constructor(t={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...t},this.name=this.config.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Ct(ze(this,"addOptions",{name:this.name}))),this.storage=Ct(ze(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new Zb(t)}configure(t={}){const n=this.extend({...this.config,addOptions:()=>Am(this.options,t)});return n.name=this.name,n.parent=this.parent,n}extend(t={}){const n=new Zb(t);return n.parent=this,this.child=n,n.name=t.name?t.name:n.parent.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Ct(ze(n,"addOptions",{name:n.name})),n.storage=Ct(ze(n,"addStorage",{name:n.name,options:n.options})),n}};function sa(e){return new qfe({find:e.find,handler:({state:t,range:n,match:i,pasteEvent:o})=>{const s=Ct(e.getAttributes,void 0,i,o);if(s===!1||s===null)return null;const{tr:r}=t,a=i[i.length-1],l=i[0];let c=n.to;if(a){const u=l.search(/\S/),f=n.from+l.indexOf(a),m=f+a.length;if(P0(n.from,n.to,t.doc).filter(v=>v.mark.type.excluded.find(_=>_===e.type&&_!==v.mark.type)).filter(v=>v.to>f).length)return null;m<n.to&&r.delete(m,n.to),f>n.from&&r.delete(n.from+u,f),c=n.from+u+a.length,r.addMark(n.from+u,c,e.type.create(s||{})),r.removeStoredMark(e.type)}}})}var Pi="top",Oo="bottom",$o="right",Hi="left",H0="auto",Ru=[Pi,Oo,$o,Hi],gc="start",hu="end",Tme="clippingParents",NM="viewport",ad="popper",Eme="reference",XC=Ru.reduce(function(e,t){return e.concat([t+"-"+gc,t+"-"+hu])},[]),BM=[].concat(Ru,[H0]).reduce(function(e,t){return e.concat([t,t+"-"+gc,t+"-"+hu])},[]),Ome="beforeRead",$me="read",Ime="afterRead",Lme="beforeMain",Dme="main",Rme="afterMain",Pme="beforeWrite",Hme="write",Vme="afterWrite",zme=[Ome,$me,Ime,Lme,Dme,Rme,Pme,Hme,Vme];function ws(e){return e?(e.nodeName||"").toLowerCase():null}function io(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function cl(e){var t=io(e).Element;return e instanceof t||e instanceof Element}function xo(e){var t=io(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function V0(e){if(typeof ShadowRoot>"u")return!1;var t=io(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function Nme(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var i=t.styles[n]||{},o=t.attributes[n]||{},s=t.elements[n];!xo(s)||!ws(s)||(Object.assign(s.style,i),Object.keys(o).forEach(function(r){var a=o[r];a===!1?s.removeAttribute(r):s.setAttribute(r,a===!0?"":a)}))})}function Bme(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(i){var o=t.elements[i],s=t.attributes[i]||{},r=Object.keys(t.styles.hasOwnProperty(i)?t.styles[i]:n[i]),a=r.reduce(function(l,c){return l[c]="",l},{});!xo(o)||!ws(o)||(Object.assign(o.style,a),Object.keys(s).forEach(function(l){o.removeAttribute(l)}))})}}const FM={name:"applyStyles",enabled:!0,phase:"write",fn:Nme,effect:Bme,requires:["computeStyles"]};function ms(e){return e.split("-")[0]}var Xa=Math.max,up=Math.min,bc=Math.round;function Xb(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function WM(){return!/^((?!chrome|android).)*safari/i.test(Xb())}function yc(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var i=e.getBoundingClientRect(),o=1,s=1;t&&xo(e)&&(o=e.offsetWidth>0&&bc(i.width)/e.offsetWidth||1,s=e.offsetHeight>0&&bc(i.height)/e.offsetHeight||1);var r=cl(e)?io(e):window,a=r.visualViewport,l=!WM()&&n,c=(i.left+(l&&a?a.offsetLeft:0))/o,u=(i.top+(l&&a?a.offsetTop:0))/s,f=i.width/o,m=i.height/s;return{width:f,height:m,top:u,right:c+f,bottom:u+m,left:c,x:c,y:u}}function z0(e){var t=yc(e),n=e.offsetWidth,i=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-i)<=1&&(i=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:i}}function UM(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&V0(n)){var i=t;do{if(i&&e.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function rr(e){return io(e).getComputedStyle(e)}function Fme(e){return["table","td","th"].indexOf(ws(e))>=0}function va(e){return((cl(e)?e.ownerDocument:e.document)||window.document).documentElement}function xm(e){return ws(e)==="html"?e:e.assignedSlot||e.parentNode||(V0(e)?e.host:null)||va(e)}function QC(e){return!xo(e)||rr(e).position==="fixed"?null:e.offsetParent}function Wme(e){var t=/firefox/i.test(Xb()),n=/Trident/i.test(Xb());if(n&&xo(e)){var i=rr(e);if(i.position==="fixed")return null}var o=xm(e);for(V0(o)&&(o=o.host);xo(o)&&["html","body"].indexOf(ws(o))<0;){var s=rr(o);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||t&&s.willChange==="filter"||t&&s.filter&&s.filter!=="none")return o;o=o.parentNode}return null}function Pu(e){for(var t=io(e),n=QC(e);n&&Fme(n)&&rr(n).position==="static";)n=QC(n);return n&&(ws(n)==="html"||ws(n)==="body"&&rr(n).position==="static")?t:n||Wme(e)||t}function N0(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Pd(e,t,n){return Xa(e,up(t,n))}function Ume(e,t,n){var i=Pd(e,t,n);return i>n?n:i}function jM(){return{top:0,right:0,bottom:0,left:0}}function qM(e){return Object.assign({},jM(),e)}function KM(e,t){return t.reduce(function(n,i){return n[i]=e,n},{})}var jme=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,qM(typeof t!="number"?t:KM(t,Ru))};function qme(e){var t,n=e.state,i=e.name,o=e.options,s=n.elements.arrow,r=n.modifiersData.popperOffsets,a=ms(n.placement),l=N0(a),c=[Hi,$o].indexOf(a)>=0,u=c?"height":"width";if(!(!s||!r)){var f=jme(o.padding,n),m=z0(s),g=l==="y"?Pi:Hi,v=l==="y"?Oo:$o,w=n.rects.reference[u]+n.rects.reference[l]-r[l]-n.rects.popper[u],_=r[l]-n.rects.reference[l],k=Pu(s),L=k?l==="y"?k.clientHeight||0:k.clientWidth||0:0,P=w/2-_/2,M=f[g],F=L-m[u]-f[v],z=L/2-m[u]/2+P,ee=Pd(M,z,F),ie=l;n.modifiersData[i]=(t={},t[ie]=ee,t.centerOffset=ee-z,t)}}function Kme(e){var t=e.state,n=e.options,i=n.element,o=i===void 0?"[data-popper-arrow]":i;o!=null&&(typeof o=="string"&&(o=t.elements.popper.querySelector(o),!o)||UM(t.elements.popper,o)&&(t.elements.arrow=o))}const Gme={name:"arrow",enabled:!0,phase:"main",fn:qme,effect:Kme,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function vc(e){return e.split("-")[1]}var Jme={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Yme(e,t){var n=e.x,i=e.y,o=t.devicePixelRatio||1;return{x:bc(n*o)/o||0,y:bc(i*o)/o||0}}function eA(e){var t,n=e.popper,i=e.popperRect,o=e.placement,s=e.variation,r=e.offsets,a=e.position,l=e.gpuAcceleration,c=e.adaptive,u=e.roundOffsets,f=e.isFixed,m=r.x,g=m===void 0?0:m,v=r.y,w=v===void 0?0:v,_=typeof u=="function"?u({x:g,y:w}):{x:g,y:w};g=_.x,w=_.y;var k=r.hasOwnProperty("x"),L=r.hasOwnProperty("y"),P=Hi,M=Pi,F=window;if(c){var z=Pu(n),ee="clientHeight",ie="clientWidth";if(z===io(n)&&(z=va(n),rr(z).position!=="static"&&a==="absolute"&&(ee="scrollHeight",ie="scrollWidth")),z=z,o===Pi||(o===Hi||o===$o)&&s===hu){M=Oo;var K=f&&z===F&&F.visualViewport?F.visualViewport.height:z[ee];w-=K-i.height,w*=l?1:-1}if(o===Hi||(o===Pi||o===Oo)&&s===hu){P=$o;var ae=f&&z===F&&F.visualViewport?F.visualViewport.width:z[ie];g-=ae-i.width,g*=l?1:-1}}var B=Object.assign({position:a},c&&Jme),J=u===!0?Yme({x:g,y:w},io(n)):{x:g,y:w};if(g=J.x,w=J.y,l){var he;return Object.assign({},B,(he={},he[M]=L?"0":"",he[P]=k?"0":"",he.transform=(F.devicePixelRatio||1)<=1?"translate("+g+"px, "+w+"px)":"translate3d("+g+"px, "+w+"px, 0)",he))}return Object.assign({},B,(t={},t[M]=L?w+"px":"",t[P]=k?g+"px":"",t.transform="",t))}function Zme(e){var t=e.state,n=e.options,i=n.gpuAcceleration,o=i===void 0?!0:i,s=n.adaptive,r=s===void 0?!0:s,a=n.roundOffsets,l=a===void 0?!0:a,c={placement:ms(t.placement),variation:vc(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:o,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,eA(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:r,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,eA(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const Xme={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Zme,data:{}};var Kh={passive:!0};function Qme(e){var t=e.state,n=e.instance,i=e.options,o=i.scroll,s=o===void 0?!0:o,r=i.resize,a=r===void 0?!0:r,l=io(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return s&&c.forEach(function(u){u.addEventListener("scroll",n.update,Kh)}),a&&l.addEventListener("resize",n.update,Kh),function(){s&&c.forEach(function(u){u.removeEventListener("scroll",n.update,Kh)}),a&&l.removeEventListener("resize",n.update,Kh)}}const ege={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Qme,data:{}};var tge={left:"right",right:"left",bottom:"top",top:"bottom"};function Ef(e){return e.replace(/left|right|bottom|top/g,function(t){return tge[t]})}var nge={start:"end",end:"start"};function tA(e){return e.replace(/start|end/g,function(t){return nge[t]})}function B0(e){var t=io(e),n=t.pageXOffset,i=t.pageYOffset;return{scrollLeft:n,scrollTop:i}}function F0(e){return yc(va(e)).left+B0(e).scrollLeft}function ige(e,t){var n=io(e),i=va(e),o=n.visualViewport,s=i.clientWidth,r=i.clientHeight,a=0,l=0;if(o){s=o.width,r=o.height;var c=WM();(c||!c&&t==="fixed")&&(a=o.offsetLeft,l=o.offsetTop)}return{width:s,height:r,x:a+F0(e),y:l}}function oge(e){var t,n=va(e),i=B0(e),o=(t=e.ownerDocument)==null?void 0:t.body,s=Xa(n.scrollWidth,n.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),r=Xa(n.scrollHeight,n.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),a=-i.scrollLeft+F0(e),l=-i.scrollTop;return rr(o||n).direction==="rtl"&&(a+=Xa(n.clientWidth,o?o.clientWidth:0)-s),{width:s,height:r,x:a,y:l}}function W0(e){var t=rr(e),n=t.overflow,i=t.overflowX,o=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+o+i)}function GM(e){return["html","body","#document"].indexOf(ws(e))>=0?e.ownerDocument.body:xo(e)&&W0(e)?e:GM(xm(e))}function Hd(e,t){var n;t===void 0&&(t=[]);var i=GM(e),o=i===((n=e.ownerDocument)==null?void 0:n.body),s=io(i),r=o?[s].concat(s.visualViewport||[],W0(i)?i:[]):i,a=t.concat(r);return o?a:a.concat(Hd(xm(r)))}function Qb(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function sge(e,t){var n=yc(e,!1,t==="fixed");return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function nA(e,t,n){return t===NM?Qb(ige(e,n)):cl(t)?sge(t,n):Qb(oge(va(e)))}function rge(e){var t=Hd(xm(e)),n=["absolute","fixed"].indexOf(rr(e).position)>=0,i=n&&xo(e)?Pu(e):e;return cl(i)?t.filter(function(o){return cl(o)&&UM(o,i)&&ws(o)!=="body"}):[]}function age(e,t,n,i){var o=t==="clippingParents"?rge(e):[].concat(t),s=[].concat(o,[n]),r=s[0],a=s.reduce(function(l,c){var u=nA(e,c,i);return l.top=Xa(u.top,l.top),l.right=up(u.right,l.right),l.bottom=up(u.bottom,l.bottom),l.left=Xa(u.left,l.left),l},nA(e,r,i));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function JM(e){var t=e.reference,n=e.element,i=e.placement,o=i?ms(i):null,s=i?vc(i):null,r=t.x+t.width/2-n.width/2,a=t.y+t.height/2-n.height/2,l;switch(o){case Pi:l={x:r,y:t.y-n.height};break;case Oo:l={x:r,y:t.y+t.height};break;case $o:l={x:t.x+t.width,y:a};break;case Hi:l={x:t.x-n.width,y:a};break;default:l={x:t.x,y:t.y}}var c=o?N0(o):null;if(c!=null){var u=c==="y"?"height":"width";switch(s){case gc:l[c]=l[c]-(t[u]/2-n[u]/2);break;case hu:l[c]=l[c]+(t[u]/2-n[u]/2);break}}return l}function fu(e,t){t===void 0&&(t={});var n=t,i=n.placement,o=i===void 0?e.placement:i,s=n.strategy,r=s===void 0?e.strategy:s,a=n.boundary,l=a===void 0?Tme:a,c=n.rootBoundary,u=c===void 0?NM:c,f=n.elementContext,m=f===void 0?ad:f,g=n.altBoundary,v=g===void 0?!1:g,w=n.padding,_=w===void 0?0:w,k=qM(typeof _!="number"?_:KM(_,Ru)),L=m===ad?Eme:ad,P=e.rects.popper,M=e.elements[v?L:m],F=age(cl(M)?M:M.contextElement||va(e.elements.popper),l,u,r),z=yc(e.elements.reference),ee=JM({reference:z,element:P,placement:o}),ie=Qb(Object.assign({},P,ee)),K=m===ad?ie:z,ae={top:F.top-K.top+k.top,bottom:K.bottom-F.bottom+k.bottom,left:F.left-K.left+k.left,right:K.right-F.right+k.right},B=e.modifiersData.offset;if(m===ad&&B){var J=B[o];Object.keys(ae).forEach(function(he){var ne=[$o,Oo].indexOf(he)>=0?1:-1,oe=[Pi,Oo].indexOf(he)>=0?"y":"x";ae[he]+=J[oe]*ne})}return ae}function lge(e,t){t===void 0&&(t={});var n=t,i=n.placement,o=n.boundary,s=n.rootBoundary,r=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=l===void 0?BM:l,u=vc(i),f=u?a?XC:XC.filter(function(v){return vc(v)===u}):Ru,m=f.filter(function(v){return c.indexOf(v)>=0});m.length===0&&(m=f);var g=m.reduce(function(v,w){return v[w]=fu(e,{placement:w,boundary:o,rootBoundary:s,padding:r})[ms(w)],v},{});return Object.keys(g).sort(function(v,w){return g[v]-g[w]})}function cge(e){if(ms(e)===H0)return[];var t=Ef(e);return[tA(e),t,tA(t)]}function dge(e){var t=e.state,n=e.options,i=e.name;if(!t.modifiersData[i]._skip){for(var o=n.mainAxis,s=o===void 0?!0:o,r=n.altAxis,a=r===void 0?!0:r,l=n.fallbackPlacements,c=n.padding,u=n.boundary,f=n.rootBoundary,m=n.altBoundary,g=n.flipVariations,v=g===void 0?!0:g,w=n.allowedAutoPlacements,_=t.options.placement,k=ms(_),L=k===_,P=l||(L||!v?[Ef(_)]:cge(_)),M=[_].concat(P).reduce(function(Re,Se){return Re.concat(ms(Se)===H0?lge(t,{placement:Se,boundary:u,rootBoundary:f,padding:c,flipVariations:v,allowedAutoPlacements:w}):Se)},[]),F=t.rects.reference,z=t.rects.popper,ee=new Map,ie=!0,K=M[0],ae=0;ae<M.length;ae++){var B=M[ae],J=ms(B),he=vc(B)===gc,ne=[Pi,Oo].indexOf(J)>=0,oe=ne?"width":"height",W=fu(t,{placement:B,boundary:u,rootBoundary:f,altBoundary:m,padding:c}),q=ne?he?$o:Hi:he?Oo:Pi;F[oe]>z[oe]&&(q=Ef(q));var Z=Ef(q),N=[];if(s&&N.push(W[J]<=0),a&&N.push(W[q]<=0,W[Z]<=0),N.every(function(Re){return Re})){K=B,ie=!1;break}ee.set(B,N)}if(ie)for(var le=v?3:1,ce=function(Se){var He=M.find(function(ot){var lt=ee.get(ot);if(lt)return lt.slice(0,Se).every(function(Lt){return Lt})});if(He)return K=He,"break"},ye=le;ye>0;ye--){var Le=ce(ye);if(Le==="break")break}t.placement!==K&&(t.modifiersData[i]._skip=!0,t.placement=K,t.reset=!0)}}const uge={name:"flip",enabled:!0,phase:"main",fn:dge,requiresIfExists:["offset"],data:{_skip:!1}};function iA(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function oA(e){return[Pi,$o,Oo,Hi].some(function(t){return e[t]>=0})}function hge(e){var t=e.state,n=e.name,i=t.rects.reference,o=t.rects.popper,s=t.modifiersData.preventOverflow,r=fu(t,{elementContext:"reference"}),a=fu(t,{altBoundary:!0}),l=iA(r,i),c=iA(a,o,s),u=oA(l),f=oA(c);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:f},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":f})}const fge={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:hge};function pge(e,t,n){var i=ms(e),o=[Hi,Pi].indexOf(i)>=0?-1:1,s=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,r=s[0],a=s[1];return r=r||0,a=(a||0)*o,[Hi,$o].indexOf(i)>=0?{x:a,y:r}:{x:r,y:a}}function mge(e){var t=e.state,n=e.options,i=e.name,o=n.offset,s=o===void 0?[0,0]:o,r=BM.reduce(function(u,f){return u[f]=pge(f,t.rects,s),u},{}),a=r[t.placement],l=a.x,c=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[i]=r}const gge={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:mge};function bge(e){var t=e.state,n=e.name;t.modifiersData[n]=JM({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}const yge={name:"popperOffsets",enabled:!0,phase:"read",fn:bge,data:{}};function vge(e){return e==="x"?"y":"x"}function wge(e){var t=e.state,n=e.options,i=e.name,o=n.mainAxis,s=o===void 0?!0:o,r=n.altAxis,a=r===void 0?!1:r,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,f=n.padding,m=n.tether,g=m===void 0?!0:m,v=n.tetherOffset,w=v===void 0?0:v,_=fu(t,{boundary:l,rootBoundary:c,padding:f,altBoundary:u}),k=ms(t.placement),L=vc(t.placement),P=!L,M=N0(k),F=vge(M),z=t.modifiersData.popperOffsets,ee=t.rects.reference,ie=t.rects.popper,K=typeof w=="function"?w(Object.assign({},t.rects,{placement:t.placement})):w,ae=typeof K=="number"?{mainAxis:K,altAxis:K}:Object.assign({mainAxis:0,altAxis:0},K),B=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,J={x:0,y:0};if(z){if(s){var he,ne=M==="y"?Pi:Hi,oe=M==="y"?Oo:$o,W=M==="y"?"height":"width",q=z[M],Z=q+_[ne],N=q-_[oe],le=g?-ie[W]/2:0,ce=L===gc?ee[W]:ie[W],ye=L===gc?-ie[W]:-ee[W],Le=t.elements.arrow,Re=g&&Le?z0(Le):{width:0,height:0},Se=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:jM(),He=Se[ne],ot=Se[oe],lt=Pd(0,ee[W],Re[W]),Lt=P?ee[W]/2-le-lt-He-ae.mainAxis:ce-lt-He-ae.mainAxis,pt=P?-ee[W]/2+le+lt+ot+ae.mainAxis:ye+lt+ot+ae.mainAxis,Gt=t.elements.arrow&&Pu(t.elements.arrow),V=Gt?M==="y"?Gt.clientTop||0:Gt.clientLeft||0:0,j=(he=B==null?void 0:B[M])!=null?he:0,se=q+Lt-j-V,we=q+pt-j,ve=Pd(g?up(Z,se):Z,q,g?Xa(N,we):N);z[M]=ve,J[M]=ve-q}if(a){var ge,Ee=M==="x"?Pi:Hi,xe=M==="x"?Oo:$o,Ae=z[F],me=F==="y"?"height":"width",Ne=Ae+_[Ee],Me=Ae-_[xe],Fe=[Pi,Hi].indexOf(k)!==-1,je=(ge=B==null?void 0:B[F])!=null?ge:0,bt=Fe?Ne:Ae-ee[me]-ie[me]-je+ae.altAxis,kt=Fe?Ae+ee[me]+ie[me]-je-ae.altAxis:Me,yt=g&&Fe?Ume(bt,Ae,kt):Pd(g?bt:Ne,Ae,g?kt:Me);z[F]=yt,J[F]=yt-Ae}t.modifiersData[i]=J}}const _ge={name:"preventOverflow",enabled:!0,phase:"main",fn:wge,requiresIfExists:["offset"]};function Cge(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function Age(e){return e===io(e)||!xo(e)?B0(e):Cge(e)}function kge(e){var t=e.getBoundingClientRect(),n=bc(t.width)/e.offsetWidth||1,i=bc(t.height)/e.offsetHeight||1;return n!==1||i!==1}function Sge(e,t,n){n===void 0&&(n=!1);var i=xo(t),o=xo(t)&&kge(t),s=va(t),r=yc(e,o,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!n)&&((ws(t)!=="body"||W0(s))&&(a=Age(t)),xo(t)?(l=yc(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):s&&(l.x=F0(s))),{x:r.left+a.scrollLeft-l.x,y:r.top+a.scrollTop-l.y,width:r.width,height:r.height}}function xge(e){var t=new Map,n=new Set,i=[];e.forEach(function(s){t.set(s.name,s)});function o(s){n.add(s.name);var r=[].concat(s.requires||[],s.requiresIfExists||[]);r.forEach(function(a){if(!n.has(a)){var l=t.get(a);l&&o(l)}}),i.push(s)}return e.forEach(function(s){n.has(s.name)||o(s)}),i}function Mge(e){var t=xge(e);return zme.reduce(function(n,i){return n.concat(t.filter(function(o){return o.phase===i}))},[])}function Tge(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function Ege(e){var t=e.reduce(function(n,i){var o=n[i.name];return n[i.name]=o?Object.assign({},o,i,{options:Object.assign({},o.options,i.options),data:Object.assign({},o.data,i.data)}):i,n},{});return Object.keys(t).map(function(n){return t[n]})}var sA={placement:"bottom",modifiers:[],strategy:"absolute"};function rA(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function Oge(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,i=n===void 0?[]:n,o=t.defaultOptions,s=o===void 0?sA:o;return function(a,l,c){c===void 0&&(c=s);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},sA,s),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},f=[],m=!1,g={state:u,setOptions:function(k){var L=typeof k=="function"?k(u.options):k;w(),u.options=Object.assign({},s,u.options,L),u.scrollParents={reference:cl(a)?Hd(a):a.contextElement?Hd(a.contextElement):[],popper:Hd(l)};var P=Mge(Ege([].concat(i,u.options.modifiers)));return u.orderedModifiers=P.filter(function(M){return M.enabled}),v(),g.update()},forceUpdate:function(){if(!m){var k=u.elements,L=k.reference,P=k.popper;if(rA(L,P)){u.rects={reference:Sge(L,Pu(P),u.options.strategy==="fixed"),popper:z0(P)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(ae){return u.modifiersData[ae.name]=Object.assign({},ae.data)});for(var M=0;M<u.orderedModifiers.length;M++){if(u.reset===!0){u.reset=!1,M=-1;continue}var F=u.orderedModifiers[M],z=F.fn,ee=F.options,ie=ee===void 0?{}:ee,K=F.name;typeof z=="function"&&(u=z({state:u,options:ie,name:K,instance:g})||u)}}}},update:Tge(function(){return new Promise(function(_){g.forceUpdate(),_(u)})}),destroy:function(){w(),m=!0}};if(!rA(a,l))return g;g.setOptions(c).then(function(_){!m&&c.onFirstUpdate&&c.onFirstUpdate(_)});function v(){u.orderedModifiers.forEach(function(_){var k=_.name,L=_.options,P=L===void 0?{}:L,M=_.effect;if(typeof M=="function"){var F=M({state:u,name:k,instance:g,options:P}),z=function(){};f.push(F||z)}})}function w(){f.forEach(function(_){return _()}),f=[]}return g}}var $ge=[ege,yge,Xme,FM,gge,uge,_ge,Gme,fge],Ige=Oge({defaultModifiers:$ge}),Lge="tippy-box",YM="tippy-content",Dge="tippy-backdrop",ZM="tippy-arrow",XM="tippy-svg-arrow",Va={passive:!0,capture:!0},QM=function(){return document.body};function D1(e,t,n){if(Array.isArray(e)){var i=e[t];return i??(Array.isArray(n)?n[t]:n)}return e}function U0(e,t){var n={}.toString.call(e);return n.indexOf("[object")===0&&n.indexOf(t+"]")>-1}function e5(e,t){return typeof e=="function"?e.apply(void 0,t):e}function aA(e,t){if(t===0)return e;var n;return function(i){clearTimeout(n),n=setTimeout(function(){e(i)},t)}}function Rge(e){return e.split(/\s+/).filter(Boolean)}function Kl(e){return[].concat(e)}function lA(e,t){e.indexOf(t)===-1&&e.push(t)}function Pge(e){return e.filter(function(t,n){return e.indexOf(t)===n})}function Hge(e){return e.split("-")[0]}function hp(e){return[].slice.call(e)}function cA(e){return Object.keys(e).reduce(function(t,n){return e[n]!==void 0&&(t[n]=e[n]),t},{})}function Vd(){return document.createElement("div")}function Mm(e){return["Element","Fragment"].some(function(t){return U0(e,t)})}function Vge(e){return U0(e,"NodeList")}function zge(e){return U0(e,"MouseEvent")}function Nge(e){return!!(e&&e._tippy&&e._tippy.reference===e)}function Bge(e){return Mm(e)?[e]:Vge(e)?hp(e):Array.isArray(e)?e:hp(document.querySelectorAll(e))}function R1(e,t){e.forEach(function(n){n&&(n.style.transitionDuration=t+"ms")})}function dA(e,t){e.forEach(function(n){n&&n.setAttribute("data-state",t)})}function Fge(e){var t,n=Kl(e),i=n[0];return i!=null&&(t=i.ownerDocument)!=null&&t.body?i.ownerDocument:document}function Wge(e,t){var n=t.clientX,i=t.clientY;return e.every(function(o){var s=o.popperRect,r=o.popperState,a=o.props,l=a.interactiveBorder,c=Hge(r.placement),u=r.modifiersData.offset;if(!u)return!0;var f=c==="bottom"?u.top.y:0,m=c==="top"?u.bottom.y:0,g=c==="right"?u.left.x:0,v=c==="left"?u.right.x:0,w=s.top-i+f>l,_=i-s.bottom-m>l,k=s.left-n+g>l,L=n-s.right-v>l;return w||_||k||L})}function P1(e,t,n){var i=t+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(o){e[i](o,n)})}function uA(e,t){for(var n=t;n;){var i;if(e.contains(n))return!0;n=n.getRootNode==null||(i=n.getRootNode())==null?void 0:i.host}return!1}var cs={isTouch:!1},hA=0;function Uge(){cs.isTouch||(cs.isTouch=!0,window.performance&&document.addEventListener("mousemove",t5))}function t5(){var e=performance.now();e-hA<20&&(cs.isTouch=!1,document.removeEventListener("mousemove",t5)),hA=e}function jge(){var e=document.activeElement;if(Nge(e)){var t=e._tippy;e.blur&&!t.state.isVisible&&e.blur()}}function qge(){document.addEventListener("touchstart",Uge,Va),window.addEventListener("blur",jge)}var Kge=typeof window<"u"&&typeof document<"u",Gge=Kge?!!window.msCrypto:!1,Jge={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},Yge={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},No=Object.assign({appendTo:QM,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},Jge,Yge),Zge=Object.keys(No),Xge=function(t){var n=Object.keys(t);n.forEach(function(i){No[i]=t[i]})};function n5(e){var t=e.plugins||[],n=t.reduce(function(i,o){var s=o.name,r=o.defaultValue;if(s){var a;i[s]=e[s]!==void 0?e[s]:(a=No[s])!=null?a:r}return i},{});return Object.assign({},e,n)}function Qge(e,t){var n=t?Object.keys(n5(Object.assign({},No,{plugins:t}))):Zge,i=n.reduce(function(o,s){var r=(e.getAttribute("data-tippy-"+s)||"").trim();if(!r)return o;if(s==="content")o[s]=r;else try{o[s]=JSON.parse(r)}catch{o[s]=r}return o},{});return i}function fA(e,t){var n=Object.assign({},t,{content:e5(t.content,[e])},t.ignoreAttributes?{}:Qge(e,t.plugins));return n.aria=Object.assign({},No.aria,n.aria),n.aria={expanded:n.aria.expanded==="auto"?t.interactive:n.aria.expanded,content:n.aria.content==="auto"?t.interactive?null:"describedby":n.aria.content},n}var e1e=function(){return"innerHTML"};function ey(e,t){e[e1e()]=t}function pA(e){var t=Vd();return e===!0?t.className=ZM:(t.className=XM,Mm(e)?t.appendChild(e):ey(t,e)),t}function mA(e,t){Mm(t.content)?(ey(e,""),e.appendChild(t.content)):typeof t.content!="function"&&(t.allowHTML?ey(e,t.content):e.textContent=t.content)}function ty(e){var t=e.firstElementChild,n=hp(t.children);return{box:t,content:n.find(function(i){return i.classList.contains(YM)}),arrow:n.find(function(i){return i.classList.contains(ZM)||i.classList.contains(XM)}),backdrop:n.find(function(i){return i.classList.contains(Dge)})}}function i5(e){var t=Vd(),n=Vd();n.className=Lge,n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var i=Vd();i.className=YM,i.setAttribute("data-state","hidden"),mA(i,e.props),t.appendChild(n),n.appendChild(i),o(e.props,e.props);function o(s,r){var a=ty(t),l=a.box,c=a.content,u=a.arrow;r.theme?l.setAttribute("data-theme",r.theme):l.removeAttribute("data-theme"),typeof r.animation=="string"?l.setAttribute("data-animation",r.animation):l.removeAttribute("data-animation"),r.inertia?l.setAttribute("data-inertia",""):l.removeAttribute("data-inertia"),l.style.maxWidth=typeof r.maxWidth=="number"?r.maxWidth+"px":r.maxWidth,r.role?l.setAttribute("role",r.role):l.removeAttribute("role"),(s.content!==r.content||s.allowHTML!==r.allowHTML)&&mA(c,e.props),r.arrow?u?s.arrow!==r.arrow&&(l.removeChild(u),l.appendChild(pA(r.arrow))):l.appendChild(pA(r.arrow)):u&&l.removeChild(u)}return{popper:t,onUpdate:o}}i5.$$tippy=!0;var t1e=1,Gh=[],H1=[];function n1e(e,t){var n=fA(e,Object.assign({},No,n5(cA(t)))),i,o,s,r=!1,a=!1,l=!1,c=!1,u,f,m,g=[],v=aA(se,n.interactiveDebounce),w,_=t1e++,k=null,L=Pge(n.plugins),P={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},M={id:_,reference:e,popper:Vd(),popperInstance:k,props:n,state:P,plugins:L,clearDelayTimeouts:bt,setProps:kt,setContent:yt,show:Mn,hide:_n,hideWithInteractivity:ei,enable:Fe,disable:je,unmount:ti,destroy:Io};if(!n.render)return M;var F=n.render(M),z=F.popper,ee=F.onUpdate;z.setAttribute("data-tippy-root",""),z.id="tippy-"+M.id,M.popper=z,e._tippy=M,z._tippy=M;var ie=L.map(function(de){return de.fn(M)}),K=e.hasAttribute("aria-expanded");return Gt(),le(),q(),Z("onCreate",[M]),n.showOnCreate&&Ne(),z.addEventListener("mouseenter",function(){M.props.interactive&&M.state.isVisible&&M.clearDelayTimeouts()}),z.addEventListener("mouseleave",function(){M.props.interactive&&M.props.trigger.indexOf("mouseenter")>=0&&ne().addEventListener("mousemove",v)}),M;function ae(){var de=M.props.touch;return Array.isArray(de)?de:[de,0]}function B(){return ae()[0]==="hold"}function J(){var de;return!!((de=M.props.render)!=null&&de.$$tippy)}function he(){return w||e}function ne(){var de=he().parentNode;return de?Fge(de):document}function oe(){return ty(z)}function W(de){return M.state.isMounted&&!M.state.isVisible||cs.isTouch||u&&u.type==="focus"?0:D1(M.props.delay,de?0:1,No.delay)}function q(de){de===void 0&&(de=!1),z.style.pointerEvents=M.props.interactive&&!de?"":"none",z.style.zIndex=""+M.props.zIndex}function Z(de,$e,Be){if(Be===void 0&&(Be=!0),ie.forEach(function(Ot){Ot[de]&&Ot[de].apply(Ot,$e)}),Be){var xt;(xt=M.props)[de].apply(xt,$e)}}function N(){var de=M.props.aria;if(de.content){var $e="aria-"+de.content,Be=z.id,xt=Kl(M.props.triggerTarget||e);xt.forEach(function(Ot){var Wn=Ot.getAttribute($e);if(M.state.isVisible)Ot.setAttribute($e,Wn?Wn+" "+Be:Be);else{var Mi=Wn&&Wn.replace(Be,"").trim();Mi?Ot.setAttribute($e,Mi):Ot.removeAttribute($e)}})}}function le(){if(!(K||!M.props.aria.expanded)){var de=Kl(M.props.triggerTarget||e);de.forEach(function($e){M.props.interactive?$e.setAttribute("aria-expanded",M.state.isVisible&&$e===he()?"true":"false"):$e.removeAttribute("aria-expanded")})}}function ce(){ne().removeEventListener("mousemove",v),Gh=Gh.filter(function(de){return de!==v})}function ye(de){if(!(cs.isTouch&&(l||de.type==="mousedown"))){var $e=de.composedPath&&de.composedPath()[0]||de.target;if(!(M.props.interactive&&uA(z,$e))){if(Kl(M.props.triggerTarget||e).some(function(Be){return uA(Be,$e)})){if(cs.isTouch||M.state.isVisible&&M.props.trigger.indexOf("click")>=0)return}else Z("onClickOutside",[M,de]);M.props.hideOnClick===!0&&(M.clearDelayTimeouts(),M.hide(),a=!0,setTimeout(function(){a=!1}),M.state.isMounted||He())}}}function Le(){l=!0}function Re(){l=!1}function Se(){var de=ne();de.addEventListener("mousedown",ye,!0),de.addEventListener("touchend",ye,Va),de.addEventListener("touchstart",Re,Va),de.addEventListener("touchmove",Le,Va)}function He(){var de=ne();de.removeEventListener("mousedown",ye,!0),de.removeEventListener("touchend",ye,Va),de.removeEventListener("touchstart",Re,Va),de.removeEventListener("touchmove",Le,Va)}function ot(de,$e){Lt(de,function(){!M.state.isVisible&&z.parentNode&&z.parentNode.contains(z)&&$e()})}function lt(de,$e){Lt(de,$e)}function Lt(de,$e){var Be=oe().box;function xt(Ot){Ot.target===Be&&(P1(Be,"remove",xt),$e())}if(de===0)return $e();P1(Be,"remove",f),P1(Be,"add",xt),f=xt}function pt(de,$e,Be){Be===void 0&&(Be=!1);var xt=Kl(M.props.triggerTarget||e);xt.forEach(function(Ot){Ot.addEventListener(de,$e,Be),g.push({node:Ot,eventType:de,handler:$e,options:Be})})}function Gt(){B()&&(pt("touchstart",j,{passive:!0}),pt("touchend",we,{passive:!0})),Rge(M.props.trigger).forEach(function(de){if(de!=="manual")switch(pt(de,j),de){case"mouseenter":pt("mouseleave",we);break;case"focus":pt(Gge?"focusout":"blur",ve);break;case"focusin":pt("focusout",ve);break}})}function V(){g.forEach(function(de){var $e=de.node,Be=de.eventType,xt=de.handler,Ot=de.options;$e.removeEventListener(Be,xt,Ot)}),g=[]}function j(de){var $e,Be=!1;if(!(!M.state.isEnabled||ge(de)||a)){var xt=(($e=u)==null?void 0:$e.type)==="focus";u=de,w=de.currentTarget,le(),!M.state.isVisible&&zge(de)&&Gh.forEach(function(Ot){return Ot(de)}),de.type==="click"&&(M.props.trigger.indexOf("mouseenter")<0||r)&&M.props.hideOnClick!==!1&&M.state.isVisible?Be=!0:Ne(de),de.type==="click"&&(r=!Be),Be&&!xt&&Me(de)}}function se(de){var $e=de.target,Be=he().contains($e)||z.contains($e);if(!(de.type==="mousemove"&&Be)){var xt=me().concat(z).map(function(Ot){var Wn,Mi=Ot._tippy,xs=(Wn=Mi.popperInstance)==null?void 0:Wn.state;return xs?{popperRect:Ot.getBoundingClientRect(),popperState:xs,props:n}:null}).filter(Boolean);Wge(xt,de)&&(ce(),Me(de))}}function we(de){var $e=ge(de)||M.props.trigger.indexOf("click")>=0&&r;if(!$e){if(M.props.interactive){M.hideWithInteractivity(de);return}Me(de)}}function ve(de){M.props.trigger.indexOf("focusin")<0&&de.target!==he()||M.props.interactive&&de.relatedTarget&&z.contains(de.relatedTarget)||Me(de)}function ge(de){return cs.isTouch?B()!==de.type.indexOf("touch")>=0:!1}function Ee(){xe();var de=M.props,$e=de.popperOptions,Be=de.placement,xt=de.offset,Ot=de.getReferenceClientRect,Wn=de.moveTransition,Mi=J()?ty(z).arrow:null,xs=Ot?{getBoundingClientRect:Ot,contextElement:Ot.contextElement||he()}:e,Pc={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(yl){var fr=yl.state;if(J()){var Nu=oe(),Vc=Nu.box;["placement","reference-hidden","escaped"].forEach(function(vl){vl==="placement"?Vc.setAttribute("data-placement",fr.placement):fr.attributes.popper["data-popper-"+vl]?Vc.setAttribute("data-"+vl,""):Vc.removeAttribute("data-"+vl)}),fr.attributes.popper={}}}},Ms=[{name:"offset",options:{offset:xt}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!Wn}},Pc];J()&&Mi&&Ms.push({name:"arrow",options:{element:Mi,padding:3}}),Ms.push.apply(Ms,($e==null?void 0:$e.modifiers)||[]),M.popperInstance=Ige(xs,z,Object.assign({},$e,{placement:Be,onFirstUpdate:m,modifiers:Ms}))}function xe(){M.popperInstance&&(M.popperInstance.destroy(),M.popperInstance=null)}function Ae(){var de=M.props.appendTo,$e,Be=he();M.props.interactive&&de===QM||de==="parent"?$e=Be.parentNode:$e=e5(de,[Be]),$e.contains(z)||$e.appendChild(z),M.state.isMounted=!0,Ee()}function me(){return hp(z.querySelectorAll("[data-tippy-root]"))}function Ne(de){M.clearDelayTimeouts(),de&&Z("onTrigger",[M,de]),Se();var $e=W(!0),Be=ae(),xt=Be[0],Ot=Be[1];cs.isTouch&&xt==="hold"&&Ot&&($e=Ot),$e?i=setTimeout(function(){M.show()},$e):M.show()}function Me(de){if(M.clearDelayTimeouts(),Z("onUntrigger",[M,de]),!M.state.isVisible){He();return}if(!(M.props.trigger.indexOf("mouseenter")>=0&&M.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(de.type)>=0&&r)){var $e=W(!1);$e?o=setTimeout(function(){M.state.isVisible&&M.hide()},$e):s=requestAnimationFrame(function(){M.hide()})}}function Fe(){M.state.isEnabled=!0}function je(){M.hide(),M.state.isEnabled=!1}function bt(){clearTimeout(i),clearTimeout(o),cancelAnimationFrame(s)}function kt(de){if(!M.state.isDestroyed){Z("onBeforeUpdate",[M,de]),V();var $e=M.props,Be=fA(e,Object.assign({},$e,cA(de),{ignoreAttributes:!0}));M.props=Be,Gt(),$e.interactiveDebounce!==Be.interactiveDebounce&&(ce(),v=aA(se,Be.interactiveDebounce)),$e.triggerTarget&&!Be.triggerTarget?Kl($e.triggerTarget).forEach(function(xt){xt.removeAttribute("aria-expanded")}):Be.triggerTarget&&e.removeAttribute("aria-expanded"),le(),q(),ee&&ee($e,Be),M.popperInstance&&(Ee(),me().forEach(function(xt){requestAnimationFrame(xt._tippy.popperInstance.forceUpdate)})),Z("onAfterUpdate",[M,de])}}function yt(de){M.setProps({content:de})}function Mn(){var de=M.state.isVisible,$e=M.state.isDestroyed,Be=!M.state.isEnabled,xt=cs.isTouch&&!M.props.touch,Ot=D1(M.props.duration,0,No.duration);if(!(de||$e||Be||xt)&&!he().hasAttribute("disabled")&&(Z("onShow",[M],!1),M.props.onShow(M)!==!1)){if(M.state.isVisible=!0,J()&&(z.style.visibility="visible"),q(),Se(),M.state.isMounted||(z.style.transition="none"),J()){var Wn=oe(),Mi=Wn.box,xs=Wn.content;R1([Mi,xs],0)}m=function(){var Ms;if(!(!M.state.isVisible||c)){if(c=!0,z.offsetHeight,z.style.transition=M.props.moveTransition,J()&&M.props.animation){var Hc=oe(),yl=Hc.box,fr=Hc.content;R1([yl,fr],Ot),dA([yl,fr],"visible")}N(),le(),lA(H1,M),(Ms=M.popperInstance)==null||Ms.forceUpdate(),Z("onMount",[M]),M.props.animation&&J()&&lt(Ot,function(){M.state.isShown=!0,Z("onShown",[M])})}},Ae()}}function _n(){var de=!M.state.isVisible,$e=M.state.isDestroyed,Be=!M.state.isEnabled,xt=D1(M.props.duration,1,No.duration);if(!(de||$e||Be)&&(Z("onHide",[M],!1),M.props.onHide(M)!==!1)){if(M.state.isVisible=!1,M.state.isShown=!1,c=!1,r=!1,J()&&(z.style.visibility="hidden"),ce(),He(),q(!0),J()){var Ot=oe(),Wn=Ot.box,Mi=Ot.content;M.props.animation&&(R1([Wn,Mi],xt),dA([Wn,Mi],"hidden"))}N(),le(),M.props.animation?J()&&ot(xt,M.unmount):M.unmount()}}function ei(de){ne().addEventListener("mousemove",v),lA(Gh,v),v(de)}function ti(){M.state.isVisible&&M.hide(),M.state.isMounted&&(xe(),me().forEach(function(de){de._tippy.unmount()}),z.parentNode&&z.parentNode.removeChild(z),H1=H1.filter(function(de){return de!==M}),M.state.isMounted=!1,Z("onHidden",[M]))}function Io(){M.state.isDestroyed||(M.clearDelayTimeouts(),M.unmount(),V(),delete e._tippy,M.state.isDestroyed=!0,Z("onDestroy",[M]))}}function Lc(e,t){t===void 0&&(t={});var n=No.plugins.concat(t.plugins||[]);qge();var i=Object.assign({},t,{plugins:n}),o=Bge(e),s=o.reduce(function(r,a){var l=a&&n1e(a,i);return l&&r.push(l),r},[]);return Mm(e)?s[0]:s}Lc.defaultProps=No;Lc.setDefaultProps=Xge;Lc.currentInput=cs;Object.assign({},FM,{effect:function(t){var n=t.state,i={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(n.elements.popper.style,i.popper),n.styles=i,n.elements.arrow&&Object.assign(n.elements.arrow.style,i.arrow)}});Lc.setDefaultProps({render:i5});class i1e{constructor({editor:t,element:n,view:i,tippyOptions:o={},updateDelay:s=250,shouldShow:r}){this.preventHide=!1,this.shouldShow=({view:a,state:l,from:c,to:u})=>{const{doc:f,selection:m}=l,{empty:g}=m,v=!f.textBetween(c,u).length&&L0(l.selection),w=this.element.contains(document.activeElement);return!(!(a.hasFocus()||w)||g||v||!this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:a})=>{var l;if(this.preventHide){this.preventHide=!1;return}a!=null&&a.relatedTarget&&(!((l=this.element.parentNode)===null||l===void 0)&&l.contains(a.relatedTarget))||(a==null?void 0:a.relatedTarget)!==this.editor.view.dom&&this.hide()},this.tippyBlurHandler=a=>{this.blurHandler({event:a})},this.handleDebouncedUpdate=(a,l)=>{const c=!(l!=null&&l.selection.eq(a.state.selection)),u=!(l!=null&&l.doc.eq(a.state.doc));!c&&!u||(this.updateDebounceTimer&&clearTimeout(this.updateDebounceTimer),this.updateDebounceTimer=window.setTimeout(()=>{this.updateHandler(a,c,u,l)},this.updateDelay))},this.updateHandler=(a,l,c,u)=>{var f,m,g;const{state:v,composing:w}=a,{selection:_}=v;if(w||!l&&!c)return;this.createTooltip();const{ranges:L}=_,P=Math.min(...L.map(z=>z.$from.pos)),M=Math.max(...L.map(z=>z.$to.pos));if(!((f=this.shouldShow)===null||f===void 0?void 0:f.call(this,{editor:this.editor,element:this.element,view:a,state:v,oldState:u,from:P,to:M}))){this.hide();return}(m=this.tippy)===null||m===void 0||m.setProps({getReferenceClientRect:((g=this.tippyOptions)===null||g===void 0?void 0:g.getReferenceClientRect)||(()=>{if(VM(v.selection)){let z=a.nodeDOM(P);if(z){const ee=z.dataset.nodeViewWrapper?z:z.querySelector("[data-node-view-wrapper]");if(ee&&(z=ee.firstChild),z)return z.getBoundingClientRect()}}return zM(a,P,M)})}),this.show()},this.editor=t,this.element=n,this.view=i,this.updateDelay=s,r&&(this.shouldShow=r),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=o,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){const{element:t}=this.editor.options,n=!!t.parentElement;this.tippy||!n||(this.tippy=Lc(t,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"top",hideOnClick:"toggle",...this.tippyOptions}),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",this.tippyBlurHandler))}update(t,n){const{state:i}=t,o=i.selection.from!==i.selection.to;if(this.updateDelay>0&&o){this.handleDebouncedUpdate(t,n);return}const s=!(n!=null&&n.selection.eq(t.state.selection)),r=!(n!=null&&n.doc.eq(t.state.doc));this.updateHandler(t,s,r,n)}show(){var t;(t=this.tippy)===null||t===void 0||t.show()}hide(){var t;(t=this.tippy)===null||t===void 0||t.hide()}destroy(){var t,n;!((t=this.tippy)===null||t===void 0)&&t.popper.firstChild&&this.tippy.popper.firstChild.removeEventListener("blur",this.tippyBlurHandler),(n=this.tippy)===null||n===void 0||n.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const o5=e=>new bn({key:typeof e.pluginKey=="string"?new Dn(e.pluginKey):e.pluginKey,view:t=>new i1e({view:t,...e})});xn.create({name:"bubbleMenu",addOptions(){return{element:null,tippyOptions:{},pluginKey:"bubbleMenu",updateDelay:void 0,shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[o5({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,updateDelay:this.options.updateDelay,shouldShow:this.options.shouldShow})]:[]}});class o1e{getTextContent(t){return PM(t,{textSerializers:$0(this.editor.schema)})}constructor({editor:t,element:n,view:i,tippyOptions:o={},shouldShow:s}){this.preventHide=!1,this.shouldShow=({view:r,state:a})=>{const{selection:l}=a,{$anchor:c,empty:u}=l,f=c.depth===1,m=c.parent.isTextblock&&!c.parent.type.spec.code&&!c.parent.textContent&&c.parent.childCount===0&&!this.getTextContent(c.parent);return!(!r.hasFocus()||!u||!f||!m||!this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:r})=>{var a;if(this.preventHide){this.preventHide=!1;return}r!=null&&r.relatedTarget&&(!((a=this.element.parentNode)===null||a===void 0)&&a.contains(r.relatedTarget))||(r==null?void 0:r.relatedTarget)!==this.editor.view.dom&&this.hide()},this.tippyBlurHandler=r=>{this.blurHandler({event:r})},this.editor=t,this.element=n,this.view=i,s&&(this.shouldShow=s),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=o,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){const{element:t}=this.editor.options,n=!!t.parentElement;this.tippy||!n||(this.tippy=Lc(t,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"right",hideOnClick:"toggle",...this.tippyOptions}),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",this.tippyBlurHandler))}update(t,n){var i,o,s;const{state:r}=t,{doc:a,selection:l}=r,{from:c,to:u}=l;if(n&&n.doc.eq(a)&&n.selection.eq(l))return;if(this.createTooltip(),!((i=this.shouldShow)===null||i===void 0?void 0:i.call(this,{editor:this.editor,view:t,state:r,oldState:n}))){this.hide();return}(o=this.tippy)===null||o===void 0||o.setProps({getReferenceClientRect:((s=this.tippyOptions)===null||s===void 0?void 0:s.getReferenceClientRect)||(()=>zM(t,c,u))}),this.show()}show(){var t;(t=this.tippy)===null||t===void 0||t.show()}hide(){var t;(t=this.tippy)===null||t===void 0||t.hide()}destroy(){var t,n;!((t=this.tippy)===null||t===void 0)&&t.popper.firstChild&&this.tippy.popper.firstChild.removeEventListener("blur",this.tippyBlurHandler),(n=this.tippy)===null||n===void 0||n.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const s5=e=>new bn({key:typeof e.pluginKey=="string"?new Dn(e.pluginKey):e.pluginKey,view:t=>new o1e({view:t,...e})});xn.create({name:"floatingMenu",addOptions(){return{element:null,tippyOptions:{},pluginKey:"floatingMenu",shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[s5({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,shouldShow:this.options.shouldShow})]:[]}});const s1e=em({name:"BubbleMenu",props:{pluginKey:{type:[String,Object],default:"bubbleMenu"},editor:{type:Object,required:!0},updateDelay:{type:Number,default:void 0},tippyOptions:{type:Object,default:()=>({})},shouldShow:{type:Function,default:null}},setup(e,{slots:t}){const n=Ve(null);return As(()=>{const{updateDelay:i,editor:o,pluginKey:s,shouldShow:r,tippyOptions:a}=e;o.registerPlugin(o5({updateDelay:i,editor:o,element:n.value,pluginKey:s,shouldShow:r,tippyOptions:a}))}),pl(()=>{const{pluginKey:i,editor:o}=e;o.unregisterPlugin(i)}),()=>{var i;return rm("div",{ref:n},(i=t.default)===null||i===void 0?void 0:i.call(t))}}});function gA(e){return D7((t,n)=>({get(){return t(),e},set(i){e=i,requestAnimationFrame(()=>{requestAnimationFrame(()=>{n()})})}}))}class r1e extends xme{constructor(t={}){return super(t),this.contentComponent=null,this.appContext=null,this.reactiveState=gA(this.view.state),this.reactiveExtensionStorage=gA(this.extensionStorage),this.on("beforeTransaction",({nextState:n})=>{this.reactiveState.value=n,this.reactiveExtensionStorage.value=this.extensionStorage}),Xp(this)}get state(){return this.reactiveState?this.reactiveState.value:this.view.state}get storage(){return this.reactiveExtensionStorage?this.reactiveExtensionStorage.value:super.storage}registerPlugin(t,n){const i=super.registerPlugin(t,n);return this.reactiveState&&(this.reactiveState.value=i),i}unregisterPlugin(t){const n=super.unregisterPlugin(t);return this.reactiveState&&n&&(this.reactiveState.value=n),n}}const a1e=em({name:"EditorContent",props:{editor:{default:null,type:Object}},setup(e){const t=Ve(),n=ku();return M9(()=>{const i=e.editor;i&&i.options.element&&t.value&&wo(()=>{if(!t.value||!i.options.element.firstChild)return;const o=Zt(t.value);t.value.append(...i.options.element.childNodes),i.contentComponent=n.ctx._,n&&(i.appContext={...n.appContext,provides:n.provides}),i.setOptions({element:o}),i.createNodeViews()})}),pl(()=>{const i=e.editor;i&&(i.contentComponent=null,i.appContext=null)}),{rootEl:t}},render(){return rm("div",{ref:e=>{this.rootEl=e}})}}),bA=em({name:"FloatingMenu",props:{pluginKey:{type:null,default:"floatingMenu"},editor:{type:Object,required:!0},tippyOptions:{type:Object,default:()=>({})},shouldShow:{type:Function,default:null}},setup(e,{slots:t}){const n=Ve(null);return As(()=>{const{pluginKey:i,editor:o,tippyOptions:s,shouldShow:r}=e;o.registerPlugin(s5({pluginKey:i,editor:o,element:n.value,tippyOptions:s,shouldShow:r}))}),pl(()=>{const{pluginKey:i,editor:o}=e;o.unregisterPlugin(i)}),()=>{var i;return rm("div",{ref:n},(i=t.default)===null||i===void 0?void 0:i.call(t))}}}),l1e={name:"AposTiptapTableControls",props:{editor:{type:Object,required:!0}},computed:{actions(){return[{command:"addRowAfter",label:"apostrophe:addRowAfter",icon:"table-row-plus-after-icon",iconSize:20},{command:"addColumnAfter",label:"apostrophe:addColumnAfter",icon:"table-column-plus-after-icon",iconSize:20},{command:"deleteRow",label:"apostrophe:deleteRow",icon:"table-row-remove-icon",iconSize:20},{command:"deleteColumn",label:"apostrophe:deleteColumn",icon:"table-column-remove-icon",iconSize:20},{command:"mergeCells",label:"apostrophe:mergeCells",icon:"table-merge-cells-icon",iconSize:20},{command:"splitCell",label:"apostrophe:splitCell",icon:"table-split-cell-icon",iconSize:20},{command:"toggleHeaderColumn",label:"apostrophe:toggleHeaderColumn",icon:"table-column-icon",iconSize:20},{command:"toggleHeaderRow",label:"apostrophe:toggleHeaderRow",icon:"table-row-icon",iconSize:20},{command:"insertTable",label:"apostrophe:insertTable",icon:"table-plus-icon",iconSize:20},{command:"deleteTable",label:"apostrophe:deleteTable",icon:"table-minus-icon",iconSize:20}].filter(e=>this.editor.can()[e.command]())}}},c1e={class:"apos-rich-text-toolbar__inner"};function d1e(e,t,n,i,o,s){const r=E("AposTiptapButton"),a=E("AposContextMenuDialog");return p(),R(a,{"menu-placement":"top","class-list":"apos-rich-text-toolbar","has-tip":!1},{default:Q(()=>[A("div",c1e,[(p(!0),y(Ce,null,Ie(s.actions,(l,c)=>(p(),R(r,{key:l.label+"-"+c,name:l.label,tool:l,editor:n.editor},null,8,["name","tool","editor"]))),128))])]),_:1})}const r5=I(l1e,[["render",d1e],["__scopeId","data-v-01b218ee"]]),u1e=/^\s*>\s$/,h1e=Fn.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:e}){return["blockquote",Bt(this.options.HTMLAttributes,e),0]},addCommands(){return{setBlockquote:()=>({commands:e})=>e.wrapIn(this.name),toggleBlockquote:()=>({commands:e})=>e.toggleWrap(this.name),unsetBlockquote:()=>({commands:e})=>e.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[uu({find:u1e,type:this.type})]}}),f1e=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,p1e=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,m1e=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,g1e=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,b1e=Si.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:e=>e.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:e=>e.type.name===this.name},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}]},renderHTML({HTMLAttributes:e}){return["strong",Bt(this.options.HTMLAttributes,e),0]},addCommands(){return{setBold:()=>({commands:e})=>e.setMark(this.name),toggleBold:()=>({commands:e})=>e.toggleMark(this.name),unsetBold:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[ll({find:f1e,type:this.type}),ll({find:m1e,type:this.type})]},addPasteRules(){return[sa({find:p1e,type:this.type}),sa({find:g1e,type:this.type})]}}),y1e="listItem",yA="textStyle",vA=/^\s*([-+*])\s$/,v1e=Fn.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:e}){return["ul",Bt(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleBulletList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(y1e,this.editor.getAttributes(yA)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let e=uu({find:vA,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(e=uu({find:vA,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(yA),editor:this.editor})),[e]}}),w1e=/(^|[^`])`([^`]+)`(?!`)/,_1e=/(^|[^`])`([^`]+)`(?!`)/g,C1e=Si.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:e}){return["code",Bt(this.options.HTMLAttributes,e),0]},addCommands(){return{setCode:()=>({commands:e})=>e.setMark(this.name),toggleCode:()=>({commands:e})=>e.toggleMark(this.name),unsetCode:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[ll({find:w1e,type:this.type})]},addPasteRules(){return[sa({find:_1e,type:this.type})]}}),A1e=/^```([a-z]+)?[\s\n]$/,k1e=/^~~~([a-z]+)?[\s\n]$/,S1e=Fn.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:e=>{var t;const{languageClassPrefix:n}=this.options,s=[...((t=e.firstElementChild)===null||t===void 0?void 0:t.classList)||[]].filter(r=>r.startsWith(n)).map(r=>r.replace(n,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:e,HTMLAttributes:t}){return["pre",Bt(this.options.HTMLAttributes,t),["code",{class:e.attrs.language?this.options.languageClassPrefix+e.attrs.language:null},0]]},addCommands(){return{setCodeBlock:e=>({commands:t})=>t.setNode(this.name,e),toggleCodeBlock:e=>({commands:t})=>t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:e,$anchor:t}=this.editor.state.selection,n=t.pos===1;return!e||t.parent.type.name!==this.name?!1:n||!t.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:e})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:t}=e,{selection:n}=t,{$from:i,empty:o}=n;if(!o||i.parent.type!==this.type)return!1;const s=i.parentOffset===i.parent.nodeSize-2,r=i.parent.textContent.endsWith(`

`);return!s||!r?!1:e.chain().command(({tr:a})=>(a.delete(i.pos-2,i.pos),!0)).exitCode().run()},ArrowDown:({editor:e})=>{if(!this.options.exitOnArrowDown)return!1;const{state:t}=e,{selection:n,doc:i}=t,{$from:o,empty:s}=n;if(!s||o.parent.type!==this.type||!(o.parentOffset===o.parent.nodeSize-2))return!1;const a=o.after();return a===void 0?!1:i.nodeAt(a)?e.commands.command(({tr:c})=>(c.setSelection(it.near(i.resolve(a))),!0)):e.commands.exitCode()}}},addInputRules(){return[Yb({find:A1e,type:this.type,getAttributes:e=>({language:e[1]})}),Yb({find:k1e,type:this.type,getAttributes:e=>({language:e[1]})})]},addProseMirrorPlugins(){return[new bn({key:new Dn("codeBlockVSCodeHandler"),props:{handlePaste:(e,t)=>{if(!t.clipboardData||this.editor.isActive(this.type.name))return!1;const n=t.clipboardData.getData("text/plain"),i=t.clipboardData.getData("vscode-editor-data"),o=i?JSON.parse(i):void 0,s=o==null?void 0:o.mode;if(!n||!s)return!1;const{tr:r,schema:a}=e.state,l=a.text(n.replace(/\r\n?/g,`
`));return r.replaceSelectionWith(this.type.create({language:s},l)),r.selection.$from.parent.type!==this.type&&r.setSelection(Ze.near(r.doc.resolve(Math.max(0,r.selection.from-2)))),r.setMeta("paste",!0),e.dispatch(r),!0}}})]}});function x1e(e={}){return new bn({view(t){return new M1e(t,e)}})}class M1e{constructor(t,n){var i;this.editorView=t,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(i=n.width)!==null&&i!==void 0?i:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(o=>{let s=r=>{this[o](r)};return t.dom.addEventListener(o,s),{name:o,handler:s}})}destroy(){this.handlers.forEach(({name:t,handler:n})=>this.editorView.dom.removeEventListener(t,n))}update(t,n){this.cursorPos!=null&&n.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(t){t!=this.cursorPos&&(this.cursorPos=t,t==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let t=this.editorView.state.doc.resolve(this.cursorPos),n=!t.parent.inlineContent,i;if(n){let a=t.nodeBefore,l=t.nodeAfter;if(a||l){let c=this.editorView.nodeDOM(this.cursorPos-(a?a.nodeSize:0));if(c){let u=c.getBoundingClientRect(),f=a?u.bottom:u.top;a&&l&&(f=(f+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),i={left:u.left,right:u.right,top:f-this.width/2,bottom:f+this.width/2}}}}if(!i){let a=this.editorView.coordsAtPos(this.cursorPos);i={left:a.left-this.width/2,right:a.left+this.width/2,top:a.top,bottom:a.bottom}}let o=this.editorView.dom.offsetParent;this.element||(this.element=o.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let s,r;if(!o||o==document.body&&getComputedStyle(o).position=="static")s=-pageXOffset,r=-pageYOffset;else{let a=o.getBoundingClientRect();s=a.left-o.scrollLeft,r=a.top-o.scrollTop}this.element.style.left=i.left-s+"px",this.element.style.top=i.top-r+"px",this.element.style.width=i.right-i.left+"px",this.element.style.height=i.bottom-i.top+"px"}scheduleRemoval(t){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),t)}dragover(t){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:t.clientX,top:t.clientY}),i=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),o=i&&i.type.spec.disableDropCursor,s=typeof o=="function"?o(this.editorView,n,t):o;if(n&&!s){let r=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=Tx(this.editorView.state.doc,r,this.editorView.dragging.slice);a!=null&&(r=a)}this.setCursor(r),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(t){(t.target==this.editorView.dom||!this.editorView.dom.contains(t.relatedTarget))&&this.setCursor(null)}}const T1e=xn.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[x1e(this.options)]}});class mn extends it{constructor(t){super(t,t)}map(t,n){let i=t.resolve(n.map(this.head));return mn.valid(i)?new mn(i):it.near(i)}content(){return Oe.empty}eq(t){return t instanceof mn&&t.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new mn(t.resolve(n.pos))}getBookmark(){return new j0(this.anchor)}static valid(t){let n=t.parent;if(n.isTextblock||!E1e(t)||!O1e(t))return!1;let i=n.type.spec.allowGapCursor;if(i!=null)return i;let o=n.contentMatchAt(t.index()).defaultType;return o&&o.isTextblock}static findGapCursorFrom(t,n,i=!1){e:for(;;){if(!i&&mn.valid(t))return t;let o=t.pos,s=null;for(let r=t.depth;;r--){let a=t.node(r);if(n>0?t.indexAfter(r)<a.childCount:t.index(r)>0){s=a.child(n>0?t.indexAfter(r):t.index(r)-1);break}else if(r==0)return null;o+=n;let l=t.doc.resolve(o);if(mn.valid(l))return l}for(;;){let r=n>0?s.firstChild:s.lastChild;if(!r){if(s.isAtom&&!s.isText&&!Ye.isSelectable(s)){t=t.doc.resolve(o+s.nodeSize*n),i=!1;continue e}break}s=r,o+=n;let a=t.doc.resolve(o);if(mn.valid(a))return a}return null}}}mn.prototype.visible=!1;mn.findFrom=mn.findGapCursorFrom;it.jsonID("gapcursor",mn);class j0{constructor(t){this.pos=t}map(t){return new j0(t.map(this.pos))}resolve(t){let n=t.resolve(this.pos);return mn.valid(n)?new mn(n):it.near(n)}}function E1e(e){for(let t=e.depth;t>=0;t--){let n=e.index(t),i=e.node(t);if(n==0){if(i.type.spec.isolating)return!0;continue}for(let o=i.child(n-1);;o=o.lastChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function O1e(e){for(let t=e.depth;t>=0;t--){let n=e.indexAfter(t),i=e.node(t);if(n==i.childCount){if(i.type.spec.isolating)return!0;continue}for(let o=i.child(n);;o=o.firstChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function $1e(){return new bn({props:{decorations:R1e,createSelectionBetween(e,t,n){return t.pos==n.pos&&mn.valid(n)?new mn(n):null},handleClick:L1e,handleKeyDown:I1e,handleDOMEvents:{beforeinput:D1e}}})}const I1e=A0({ArrowLeft:Jh("horiz",-1),ArrowRight:Jh("horiz",1),ArrowUp:Jh("vert",-1),ArrowDown:Jh("vert",1)});function Jh(e,t){const n=e=="vert"?t>0?"down":"up":t>0?"right":"left";return function(i,o,s){let r=i.selection,a=t>0?r.$to:r.$from,l=r.empty;if(r instanceof Ze){if(!s.endOfTextblock(n)||a.depth==0)return!1;l=!1,a=i.doc.resolve(t>0?a.after():a.before())}let c=mn.findGapCursorFrom(a,t,l);return c?(o&&o(i.tr.setSelection(new mn(c))),!0):!1}}function L1e(e,t,n){if(!e||!e.editable)return!1;let i=e.state.doc.resolve(t);if(!mn.valid(i))return!1;let o=e.posAtCoords({left:n.clientX,top:n.clientY});return o&&o.inside>-1&&Ye.isSelectable(e.state.doc.nodeAt(o.inside))?!1:(e.dispatch(e.state.tr.setSelection(new mn(i))),!0)}function D1e(e,t){if(t.inputType!="insertCompositionText"||!(e.state.selection instanceof mn))return!1;let{$from:n}=e.state.selection,i=n.parent.contentMatchAt(n.index()).findWrapping(e.state.schema.nodes.text);if(!i)return!1;let o=be.empty;for(let r=i.length-1;r>=0;r--)o=be.from(i[r].createAndFill(null,o));let s=e.state.tr.replace(n.pos,n.pos,new Oe(o,0,0));return s.setSelection(Ze.near(s.doc.resolve(n.pos+1))),e.dispatch(s),!1}function R1e(e){if(!(e.selection instanceof mn))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",cn.create(e.doc,[di.widget(e.selection.head,t,{key:"gapcursor"})])}const P1e=xn.create({name:"gapCursor",addProseMirrorPlugins(){return[$1e()]},extendNodeSchema(e){var t;const n={name:e.name,options:e.options,storage:e.storage};return{allowGapCursor:(t=Ct(ze(e,"allowGapCursor",n)))!==null&&t!==void 0?t:null}}}),H1e=Fn.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:e}){return["br",Bt(this.options.HTMLAttributes,e)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:e,chain:t,state:n,editor:i})=>e.first([()=>e.exitCode(),()=>e.command(()=>{const{selection:o,storedMarks:s}=n;if(o.$from.parent.type.spec.isolating)return!1;const{keepMarks:r}=this.options,{splittableMarks:a}=i.extensionManager,l=s||o.$to.parentOffset&&o.$from.marks();return t().insertContent({type:this.name}).command(({tr:c,dispatch:u})=>{if(u&&l&&r){const f=l.filter(m=>a.includes(m.type.name));c.ensureMarks(f)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}});var fp=200,Nn=function(){};Nn.prototype.append=function(t){return t.length?(t=Nn.from(t),!this.length&&t||t.length<fp&&this.leafAppend(t)||this.length<fp&&t.leafPrepend(this)||this.appendInner(t)):this};Nn.prototype.prepend=function(t){return t.length?Nn.from(t).append(this):this};Nn.prototype.appendInner=function(t){return new V1e(this,t)};Nn.prototype.slice=function(t,n){return t===void 0&&(t=0),n===void 0&&(n=this.length),t>=n?Nn.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,n))};Nn.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)};Nn.prototype.forEach=function(t,n,i){n===void 0&&(n=0),i===void 0&&(i=this.length),n<=i?this.forEachInner(t,n,i,0):this.forEachInvertedInner(t,n,i,0)};Nn.prototype.map=function(t,n,i){n===void 0&&(n=0),i===void 0&&(i=this.length);var o=[];return this.forEach(function(s,r){return o.push(t(s,r))},n,i),o};Nn.from=function(t){return t instanceof Nn?t:t&&t.length?new a5(t):Nn.empty};var a5=function(e){function t(i){e.call(this),this.values=i}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(o,s){return o==0&&s==this.length?this:new t(this.values.slice(o,s))},t.prototype.getInner=function(o){return this.values[o]},t.prototype.forEachInner=function(o,s,r,a){for(var l=s;l<r;l++)if(o(this.values[l],a+l)===!1)return!1},t.prototype.forEachInvertedInner=function(o,s,r,a){for(var l=s-1;l>=r;l--)if(o(this.values[l],a+l)===!1)return!1},t.prototype.leafAppend=function(o){if(this.length+o.length<=fp)return new t(this.values.concat(o.flatten()))},t.prototype.leafPrepend=function(o){if(this.length+o.length<=fp)return new t(o.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t}(Nn);Nn.empty=new a5([]);var V1e=function(e){function t(n,i){e.call(this),this.left=n,this.right=i,this.length=n.length+i.length,this.depth=Math.max(n.depth,i.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(i){return i<this.left.length?this.left.get(i):this.right.get(i-this.left.length)},t.prototype.forEachInner=function(i,o,s,r){var a=this.left.length;if(o<a&&this.left.forEachInner(i,o,Math.min(s,a),r)===!1||s>a&&this.right.forEachInner(i,Math.max(o-a,0),Math.min(this.length,s)-a,r+a)===!1)return!1},t.prototype.forEachInvertedInner=function(i,o,s,r){var a=this.left.length;if(o>a&&this.right.forEachInvertedInner(i,o-a,Math.max(s,a)-a,r+a)===!1||s<a&&this.left.forEachInvertedInner(i,Math.min(o,a),s,r)===!1)return!1},t.prototype.sliceInner=function(i,o){if(i==0&&o==this.length)return this;var s=this.left.length;return o<=s?this.left.slice(i,o):i>=s?this.right.slice(i-s,o-s):this.left.slice(i,s).append(this.right.slice(0,o-s))},t.prototype.leafAppend=function(i){var o=this.right.leafAppend(i);if(o)return new t(this.left,o)},t.prototype.leafPrepend=function(i){var o=this.left.leafPrepend(i);if(o)return new t(o,this.right)},t.prototype.appendInner=function(i){return this.left.depth>=Math.max(this.right.depth,i.depth)+1?new t(this.left,new t(this.right,i)):new t(this,i)},t}(Nn);const z1e=500;class zo{constructor(t,n){this.items=t,this.eventCount=n}popEvent(t,n){if(this.eventCount==0)return null;let i=this.items.length;for(;;i--)if(this.items.get(i-1).selection){--i;break}let o,s;n&&(o=this.remapping(i,this.items.length),s=o.maps.length);let r=t.tr,a,l,c=[],u=[];return this.items.forEach((f,m)=>{if(!f.step){o||(o=this.remapping(i,m+1),s=o.maps.length),s--,u.push(f);return}if(o){u.push(new is(f.map));let g=f.step.map(o.slice(s)),v;g&&r.maybeStep(g).doc&&(v=r.mapping.maps[r.mapping.maps.length-1],c.push(new is(v,void 0,void 0,c.length+u.length))),s--,v&&o.appendMap(v,s)}else r.maybeStep(f.step);if(f.selection)return a=o?f.selection.map(o.slice(s)):f.selection,l=new zo(this.items.slice(0,i).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:r,selection:a}}addTransform(t,n,i,o){let s=[],r=this.eventCount,a=this.items,l=!o&&a.length?a.get(a.length-1):null;for(let u=0;u<t.steps.length;u++){let f=t.steps[u].invert(t.docs[u]),m=new is(t.mapping.maps[u],f,n),g;(g=l&&l.merge(m))&&(m=g,u?s.pop():a=a.slice(0,a.length-1)),s.push(m),n&&(r++,n=void 0),o||(l=m)}let c=r-i.depth;return c>B1e&&(a=N1e(a,c),r-=c),new zo(a.append(s),r)}remapping(t,n){let i=new su;return this.items.forEach((o,s)=>{let r=o.mirrorOffset!=null&&s-o.mirrorOffset>=t?i.maps.length-o.mirrorOffset:void 0;i.appendMap(o.map,r)},t,n),i}addMaps(t){return this.eventCount==0?this:new zo(this.items.append(t.map(n=>new is(n))),this.eventCount)}rebased(t,n){if(!this.eventCount)return this;let i=[],o=Math.max(0,this.items.length-n),s=t.mapping,r=t.steps.length,a=this.eventCount;this.items.forEach(m=>{m.selection&&a--},o);let l=n;this.items.forEach(m=>{let g=s.getMirror(--l);if(g==null)return;r=Math.min(r,g);let v=s.maps[g];if(m.step){let w=t.steps[g].invert(t.docs[g]),_=m.selection&&m.selection.map(s.slice(l+1,g));_&&a++,i.push(new is(v,w,_))}else i.push(new is(v))},o);let c=[];for(let m=n;m<r;m++)c.push(new is(s.maps[m]));let u=this.items.slice(0,o).append(c).append(i),f=new zo(u,a);return f.emptyItemCount()>z1e&&(f=f.compress(this.items.length-i.length)),f}emptyItemCount(){let t=0;return this.items.forEach(n=>{n.step||t++}),t}compress(t=this.items.length){let n=this.remapping(0,t),i=n.maps.length,o=[],s=0;return this.items.forEach((r,a)=>{if(a>=t)o.push(r),r.selection&&s++;else if(r.step){let l=r.step.map(n.slice(i)),c=l&&l.getMap();if(i--,c&&n.appendMap(c,i),l){let u=r.selection&&r.selection.map(n.slice(i));u&&s++;let f=new is(c.invert(),l,u),m,g=o.length-1;(m=o.length&&o[g].merge(f))?o[g]=m:o.push(f)}}else r.map&&i--},this.items.length,0),new zo(Nn.from(o.reverse()),s)}}zo.empty=new zo(Nn.empty,0);function N1e(e,t){let n;return e.forEach((i,o)=>{if(i.selection&&t--==0)return n=o,!1}),e.slice(n)}class is{constructor(t,n,i,o){this.map=t,this.step=n,this.selection=i,this.mirrorOffset=o}merge(t){if(this.step&&t.step&&!t.selection){let n=t.step.merge(this.step);if(n)return new is(n.getMap().invert(),n,this.selection)}}}class Lr{constructor(t,n,i,o,s){this.done=t,this.undone=n,this.prevRanges=i,this.prevTime=o,this.prevComposition=s}}const B1e=20;function F1e(e,t,n,i){let o=n.getMeta(Qa),s;if(o)return o.historyState;n.getMeta(j1e)&&(e=new Lr(e.done,e.undone,null,0,-1));let r=n.getMeta("appendedTransaction");if(n.steps.length==0)return e;if(r&&r.getMeta(Qa))return r.getMeta(Qa).redo?new Lr(e.done.addTransform(n,void 0,i,Of(t)),e.undone,wA(n.mapping.maps),e.prevTime,e.prevComposition):new Lr(e.done,e.undone.addTransform(n,void 0,i,Of(t)),null,e.prevTime,e.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(r&&r.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),l=e.prevTime==0||!r&&e.prevComposition!=a&&(e.prevTime<(n.time||0)-i.newGroupDelay||!W1e(n,e.prevRanges)),c=r?V1(e.prevRanges,n.mapping):wA(n.mapping.maps);return new Lr(e.done.addTransform(n,l?t.selection.getBookmark():void 0,i,Of(t)),zo.empty,c,n.time,a??e.prevComposition)}else return(s=n.getMeta("rebased"))?new Lr(e.done.rebased(n,s),e.undone.rebased(n,s),V1(e.prevRanges,n.mapping),e.prevTime,e.prevComposition):new Lr(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),V1(e.prevRanges,n.mapping),e.prevTime,e.prevComposition)}function W1e(e,t){if(!t)return!1;if(!e.docChanged)return!0;let n=!1;return e.mapping.maps[0].forEach((i,o)=>{for(let s=0;s<t.length;s+=2)i<=t[s+1]&&o>=t[s]&&(n=!0)}),n}function wA(e){let t=[];for(let n=e.length-1;n>=0&&t.length==0;n--)e[n].forEach((i,o,s,r)=>t.push(s,r));return t}function V1(e,t){if(!e)return null;let n=[];for(let i=0;i<e.length;i+=2){let o=t.map(e[i],1),s=t.map(e[i+1],-1);o<=s&&n.push(o,s)}return n}function U1e(e,t,n){let i=Of(t),o=Qa.get(t).spec.config,s=(n?e.undone:e.done).popEvent(t,i);if(!s)return null;let r=s.selection.resolve(s.transform.doc),a=(n?e.done:e.undone).addTransform(s.transform,t.selection.getBookmark(),o,i),l=new Lr(n?a:s.remaining,n?s.remaining:a,null,0,-1);return s.transform.setSelection(r).setMeta(Qa,{redo:n,historyState:l})}let z1=!1,_A=null;function Of(e){let t=e.plugins;if(_A!=t){z1=!1,_A=t;for(let n=0;n<t.length;n++)if(t[n].spec.historyPreserveItems){z1=!0;break}}return z1}const Qa=new Dn("history"),j1e=new Dn("closeHistory");function q1e(e={}){return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new bn({key:Qa,state:{init(){return new Lr(zo.empty,zo.empty,null,0,-1)},apply(t,n,i){return F1e(n,i,t,e)}},config:e,props:{handleDOMEvents:{beforeinput(t,n){let i=n.inputType,o=i=="historyUndo"?c5:i=="historyRedo"?d5:null;return o?(n.preventDefault(),o(t.state,t.dispatch)):!1}}}})}function l5(e,t){return(n,i)=>{let o=Qa.getState(n);if(!o||(e?o.undone:o.done).eventCount==0)return!1;if(i){let s=U1e(o,n,e);s&&i(t?s.scrollIntoView():s)}return!0}}const c5=l5(!1,!0),d5=l5(!0,!0),K1e=xn.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:e,dispatch:t})=>c5(e,t),redo:()=>({state:e,dispatch:t})=>d5(e,t)}},addProseMirrorPlugins(){return[q1e(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),G1e=Fn.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:e}){return["hr",Bt(this.options.HTMLAttributes,e)]},addCommands(){return{setHorizontalRule:()=>({chain:e,state:t})=>{const{selection:n}=t,{$from:i,$to:o}=n,s=e();return i.parentOffset===0?s.insertContentAt({from:Math.max(i.pos-1,0),to:o.pos},{type:this.name}):VM(n)?s.insertContentAt(o.pos,{type:this.name}):s.insertContent({type:this.name}),s.command(({tr:r,dispatch:a})=>{var l;if(a){const{$to:c}=r.selection,u=c.end();if(c.nodeAfter)c.nodeAfter.isTextblock?r.setSelection(Ze.create(r.doc,c.pos+1)):c.nodeAfter.isBlock?r.setSelection(Ye.create(r.doc,c.pos)):r.setSelection(Ze.create(r.doc,c.pos));else{const f=(l=c.parent.type.contentMatch.defaultType)===null||l===void 0?void 0:l.create();f&&(r.insert(u,f),r.setSelection(Ze.create(r.doc,u+1)))}r.scrollIntoView()}return!0}).run()}}},addInputRules(){return[Mme({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),J1e=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,Y1e=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,Z1e=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,X1e=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,Q1e=Si.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:e=>e.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:e=>e.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:e}){return["em",Bt(this.options.HTMLAttributes,e),0]},addCommands(){return{setItalic:()=>({commands:e})=>e.setMark(this.name),toggleItalic:()=>({commands:e})=>e.toggleMark(this.name),unsetItalic:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[ll({find:J1e,type:this.type}),ll({find:Z1e,type:this.type})]},addPasteRules(){return[sa({find:Y1e,type:this.type}),sa({find:X1e,type:this.type})]}}),ebe="listItem",CA="textStyle",AA=/^(\d+)\.\s$/,tbe=Fn.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:e=>e.hasAttribute("start")?parseInt(e.getAttribute("start")||"",10):1},type:{default:void 0,parseHTML:e=>e.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:e}){const{start:t,...n}=e;return t===1?["ol",Bt(this.options.HTMLAttributes,n),0]:["ol",Bt(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleOrderedList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(ebe,this.editor.getAttributes(CA)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let e=uu({find:AA,type:this.type,getAttributes:t=>({start:+t[1]}),joinPredicate:(t,n)=>n.childCount+n.attrs.start===+t[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(e=uu({find:AA,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:t=>({start:+t[1],...this.editor.getAttributes(CA)}),joinPredicate:(t,n)=>n.childCount+n.attrs.start===+t[1],editor:this.editor})),[e]}}),u5=Fn.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:e}){return["p",Bt(this.options.HTMLAttributes,e),0]},addCommands(){return{setParagraph:()=>({commands:e})=>e.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),nbe=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,ibe=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,obe=Si.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["s",Bt(this.options.HTMLAttributes,e),0]},addCommands(){return{setStrike:()=>({commands:e})=>e.setMark(this.name),toggleStrike:()=>({commands:e})=>e.toggleMark(this.name),unsetStrike:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[ll({find:nbe,type:this.type})]},addPasteRules(){return[sa({find:ibe,type:this.type})]}}),sbe=Fn.create({name:"text",group:"inline"}),rbe=xn.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:e=>{const t=e.style.textAlign;return this.options.alignments.includes(t)?t:this.options.defaultAlignment},renderHTML:e=>e.textAlign?{style:`text-align: ${e.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:e=>({commands:t})=>this.options.alignments.includes(e)?this.options.types.map(n=>t.updateAttributes(n,{textAlign:e})).every(n=>n):!1,unsetTextAlign:()=>({commands:e})=>this.options.types.map(t=>e.resetAttributes(t,"textAlign")).every(t=>t)}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),abe=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))$/,lbe=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))/g,cbe=Si.create({name:"highlight",addOptions(){return{multicolor:!1,HTMLAttributes:{}}},addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:e=>e.getAttribute("data-color")||e.style.backgroundColor,renderHTML:e=>e.color?{"data-color":e.color,style:`background-color: ${e.color}; color: inherit`}:{}}}:{}},parseHTML(){return[{tag:"mark"}]},renderHTML({HTMLAttributes:e}){return["mark",Bt(this.options.HTMLAttributes,e),0]},addCommands(){return{setHighlight:e=>({commands:t})=>t.setMark(this.name,e),toggleHighlight:e=>({commands:t})=>t.toggleMark(this.name,e),unsetHighlight:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}},addInputRules(){return[ll({find:abe,type:this.type})]},addPasteRules(){return[sa({find:lbe,type:this.type})]}}),dbe=Si.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["u",Bt(this.options.HTMLAttributes,e),0]},addCommands(){return{setUnderline:()=>({commands:e})=>e.setMark(this.name),toggleUnderline:()=>({commands:e})=>e.toggleMark(this.name),unsetUnderline:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),ube=Si.create({name:"superscript",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"sup"},{style:"vertical-align",getAttrs(e){return e!=="super"?!1:null}}]},renderHTML({HTMLAttributes:e}){return["sup",Bt(this.options.HTMLAttributes,e),0]},addCommands(){return{setSuperscript:()=>({commands:e})=>e.setMark(this.name),toggleSuperscript:()=>({commands:e})=>e.toggleMark(this.name),unsetSuperscript:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-.":()=>this.editor.commands.toggleSuperscript()}}}),hbe=Si.create({name:"subscript",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"sub"},{style:"vertical-align",getAttrs(e){return e!=="sub"?!1:null}}]},renderHTML({HTMLAttributes:e}){return["sub",Bt(this.options.HTMLAttributes,e),0]},addCommands(){return{setSubscript:()=>({commands:e})=>e.setMark(this.name),toggleSubscript:()=>({commands:e})=>e.toggleMark(this.name),unsetSubscript:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-,":()=>this.editor.commands.toggleSubscript()}}});var ny,iy;if(typeof WeakMap<"u"){let e=new WeakMap;ny=t=>e.get(t),iy=(t,n)=>(e.set(t,n),n)}else{const e=[];let n=0;ny=i=>{for(let o=0;o<e.length;o+=2)if(e[o]==i)return e[o+1]},iy=(i,o)=>(n==10&&(n=0),e[n++]=i,e[n++]=o)}var gn=class{constructor(e,t,n,i){this.width=e,this.height=t,this.map=n,this.problems=i}findCell(e){for(let t=0;t<this.map.length;t++){const n=this.map[t];if(n!=e)continue;const i=t%this.width,o=t/this.width|0;let s=i+1,r=o+1;for(let a=1;s<this.width&&this.map[t+a]==n;a++)s++;for(let a=1;r<this.height&&this.map[t+this.width*a]==n;a++)r++;return{left:i,top:o,right:s,bottom:r}}throw new RangeError(`No cell with offset ${e} found`)}colCount(e){for(let t=0;t<this.map.length;t++)if(this.map[t]==e)return t%this.width;throw new RangeError(`No cell with offset ${e} found`)}nextCell(e,t,n){const{left:i,right:o,top:s,bottom:r}=this.findCell(e);return t=="horiz"?(n<0?i==0:o==this.width)?null:this.map[s*this.width+(n<0?i-1:o)]:(n<0?s==0:r==this.height)?null:this.map[i+this.width*(n<0?s-1:r)]}rectBetween(e,t){const{left:n,right:i,top:o,bottom:s}=this.findCell(e),{left:r,right:a,top:l,bottom:c}=this.findCell(t);return{left:Math.min(n,r),top:Math.min(o,l),right:Math.max(i,a),bottom:Math.max(s,c)}}cellsInRect(e){const t=[],n={};for(let i=e.top;i<e.bottom;i++)for(let o=e.left;o<e.right;o++){const s=i*this.width+o,r=this.map[s];n[r]||(n[r]=!0,!(o==e.left&&o&&this.map[s-1]==r||i==e.top&&i&&this.map[s-this.width]==r)&&t.push(r))}return t}positionAt(e,t,n){for(let i=0,o=0;;i++){const s=o+n.child(i).nodeSize;if(i==e){let r=t+e*this.width;const a=(e+1)*this.width;for(;r<a&&this.map[r]<o;)r++;return r==a?s-1:this.map[r]}o=s}}static get(e){return ny(e)||iy(e,fbe(e))}};function fbe(e){if(e.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+e.type.name);const t=pbe(e),n=e.childCount,i=[];let o=0,s=null;const r=[];for(let c=0,u=t*n;c<u;c++)i[c]=0;for(let c=0,u=0;c<n;c++){const f=e.child(c);u++;for(let v=0;;v++){for(;o<i.length&&i[o]!=0;)o++;if(v==f.childCount)break;const w=f.child(v),{colspan:_,rowspan:k,colwidth:L}=w.attrs;for(let P=0;P<k;P++){if(P+c>=n){(s||(s=[])).push({type:"overlong_rowspan",pos:u,n:k-P});break}const M=o+P*t;for(let F=0;F<_;F++){i[M+F]==0?i[M+F]=u:(s||(s=[])).push({type:"collision",row:c,pos:u,n:_-F});const z=L&&L[F];if(z){const ee=(M+F)%t*2,ie=r[ee];ie==null||ie!=z&&r[ee+1]==1?(r[ee]=z,r[ee+1]=1):ie==z&&r[ee+1]++}}}o+=_,u+=w.nodeSize}const m=(c+1)*t;let g=0;for(;o<m;)i[o++]==0&&g++;g&&(s||(s=[])).push({type:"missing",row:c,n:g}),u++}(t===0||n===0)&&(s||(s=[])).push({type:"zero_sized"});const a=new gn(t,n,i,s);let l=!1;for(let c=0;!l&&c<r.length;c+=2)r[c]!=null&&r[c+1]<n&&(l=!0);return l&&mbe(a,r,e),a}function pbe(e){let t=-1,n=!1;for(let i=0;i<e.childCount;i++){const o=e.child(i);let s=0;if(n)for(let r=0;r<i;r++){const a=e.child(r);for(let l=0;l<a.childCount;l++){const c=a.child(l);r+c.attrs.rowspan>i&&(s+=c.attrs.colspan)}}for(let r=0;r<o.childCount;r++){const a=o.child(r);s+=a.attrs.colspan,a.attrs.rowspan>1&&(n=!0)}t==-1?t=s:t!=s&&(t=Math.max(t,s))}return t}function mbe(e,t,n){e.problems||(e.problems=[]);const i={};for(let o=0;o<e.map.length;o++){const s=e.map[o];if(i[s])continue;i[s]=!0;const r=n.nodeAt(s);if(!r)throw new RangeError(`No cell with offset ${s} found`);let a=null;const l=r.attrs;for(let c=0;c<l.colspan;c++){const u=(o+c)%e.width,f=t[u*2];f!=null&&(!l.colwidth||l.colwidth[c]!=f)&&((a||(a=gbe(l)))[c]=f)}a&&e.problems.unshift({type:"colwidth mismatch",pos:s,colwidth:a})}}function gbe(e){if(e.colwidth)return e.colwidth.slice();const t=[];for(let n=0;n<e.colspan;n++)t.push(0);return t}function ui(e){let t=e.cached.tableNodeTypes;if(!t){t=e.cached.tableNodeTypes={};for(const n in e.nodes){const i=e.nodes[n],o=i.spec.tableRole;o&&(t[o]=i)}}return t}var Hr=new Dn("selectingCells");function Dc(e){for(let t=e.depth-1;t>0;t--)if(e.node(t).type.spec.tableRole=="row")return e.node(0).resolve(e.before(t+1));return null}function bbe(e){for(let t=e.depth;t>0;t--){const n=e.node(t).type.spec.tableRole;if(n==="cell"||n==="header_cell")return e.node(t)}return null}function Jo(e){const t=e.selection.$head;for(let n=t.depth;n>0;n--)if(t.node(n).type.spec.tableRole=="row")return!0;return!1}function Tm(e){const t=e.selection;if("$anchorCell"in t&&t.$anchorCell)return t.$anchorCell.pos>t.$headCell.pos?t.$anchorCell:t.$headCell;if("node"in t&&t.node&&t.node.type.spec.tableRole=="cell")return t.$anchor;const n=Dc(t.$head)||ybe(t.$head);if(n)return n;throw new RangeError(`No cell found around position ${t.head}`)}function ybe(e){for(let t=e.nodeAfter,n=e.pos;t;t=t.firstChild,n++){const i=t.type.spec.tableRole;if(i=="cell"||i=="header_cell")return e.doc.resolve(n)}for(let t=e.nodeBefore,n=e.pos;t;t=t.lastChild,n--){const i=t.type.spec.tableRole;if(i=="cell"||i=="header_cell")return e.doc.resolve(n-t.nodeSize)}}function oy(e){return e.parent.type.spec.tableRole=="row"&&!!e.nodeAfter}function vbe(e){return e.node(0).resolve(e.pos+e.nodeAfter.nodeSize)}function q0(e,t){return e.depth==t.depth&&e.pos>=t.start(-1)&&e.pos<=t.end(-1)}function h5(e,t,n){const i=e.node(-1),o=gn.get(i),s=e.start(-1),r=o.nextCell(e.pos-s,t,n);return r==null?null:e.node(0).resolve(s+r)}function dl(e,t,n=1){const i={...e,colspan:e.colspan-n};return i.colwidth&&(i.colwidth=i.colwidth.slice(),i.colwidth.splice(t,n),i.colwidth.some(o=>o>0)||(i.colwidth=null)),i}function f5(e,t,n=1){const i={...e,colspan:e.colspan+n};if(i.colwidth){i.colwidth=i.colwidth.slice();for(let o=0;o<n;o++)i.colwidth.splice(t,0,0)}return i}function wbe(e,t,n){const i=ui(t.type.schema).header_cell;for(let o=0;o<e.height;o++)if(t.nodeAt(e.map[n+o*e.width]).type!=i)return!1;return!0}var Xt=class Ws extends it{constructor(t,n=t){const i=t.node(-1),o=gn.get(i),s=t.start(-1),r=o.rectBetween(t.pos-s,n.pos-s),a=t.node(0),l=o.cellsInRect(r).filter(u=>u!=n.pos-s);l.unshift(n.pos-s);const c=l.map(u=>{const f=i.nodeAt(u);if(!f)throw RangeError(`No cell with offset ${u} found`);const m=s+u+1;return new Lx(a.resolve(m),a.resolve(m+f.content.size))});super(c[0].$from,c[0].$to,c),this.$anchorCell=t,this.$headCell=n}map(t,n){const i=t.resolve(n.map(this.$anchorCell.pos)),o=t.resolve(n.map(this.$headCell.pos));if(oy(i)&&oy(o)&&q0(i,o)){const s=this.$anchorCell.node(-1)!=i.node(-1);return s&&this.isRowSelection()?Ws.rowSelection(i,o):s&&this.isColSelection()?Ws.colSelection(i,o):new Ws(i,o)}return Ze.between(i,o)}content(){const t=this.$anchorCell.node(-1),n=gn.get(t),i=this.$anchorCell.start(-1),o=n.rectBetween(this.$anchorCell.pos-i,this.$headCell.pos-i),s={},r=[];for(let l=o.top;l<o.bottom;l++){const c=[];for(let u=l*n.width+o.left,f=o.left;f<o.right;f++,u++){const m=n.map[u];if(s[m])continue;s[m]=!0;const g=n.findCell(m);let v=t.nodeAt(m);if(!v)throw RangeError(`No cell with offset ${m} found`);const w=o.left-g.left,_=g.right-o.right;if(w>0||_>0){let k=v.attrs;if(w>0&&(k=dl(k,0,w)),_>0&&(k=dl(k,k.colspan-_,_)),g.left<o.left){if(v=v.type.createAndFill(k),!v)throw RangeError(`Could not create cell with attrs ${JSON.stringify(k)}`)}else v=v.type.create(k,v.content)}if(g.top<o.top||g.bottom>o.bottom){const k={...v.attrs,rowspan:Math.min(g.bottom,o.bottom)-Math.max(g.top,o.top)};g.top<o.top?v=v.type.createAndFill(k):v=v.type.create(k,v.content)}c.push(v)}r.push(t.child(l).copy(be.from(c)))}const a=this.isColSelection()&&this.isRowSelection()?t:r;return new Oe(be.from(a),1,1)}replace(t,n=Oe.empty){const i=t.steps.length,o=this.ranges;for(let r=0;r<o.length;r++){const{$from:a,$to:l}=o[r],c=t.mapping.slice(i);t.replace(c.map(a.pos),c.map(l.pos),r?Oe.empty:n)}const s=it.findFrom(t.doc.resolve(t.mapping.slice(i).map(this.to)),-1);s&&t.setSelection(s)}replaceWith(t,n){this.replace(t,new Oe(be.from(n),0,0))}forEachCell(t){const n=this.$anchorCell.node(-1),i=gn.get(n),o=this.$anchorCell.start(-1),s=i.cellsInRect(i.rectBetween(this.$anchorCell.pos-o,this.$headCell.pos-o));for(let r=0;r<s.length;r++)t(n.nodeAt(s[r]),o+s[r])}isColSelection(){const t=this.$anchorCell.index(-1),n=this.$headCell.index(-1);if(Math.min(t,n)>0)return!1;const i=t+this.$anchorCell.nodeAfter.attrs.rowspan,o=n+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(i,o)==this.$headCell.node(-1).childCount}static colSelection(t,n=t){const i=t.node(-1),o=gn.get(i),s=t.start(-1),r=o.findCell(t.pos-s),a=o.findCell(n.pos-s),l=t.node(0);return r.top<=a.top?(r.top>0&&(t=l.resolve(s+o.map[r.left])),a.bottom<o.height&&(n=l.resolve(s+o.map[o.width*(o.height-1)+a.right-1]))):(a.top>0&&(n=l.resolve(s+o.map[a.left])),r.bottom<o.height&&(t=l.resolve(s+o.map[o.width*(o.height-1)+r.right-1]))),new Ws(t,n)}isRowSelection(){const t=this.$anchorCell.node(-1),n=gn.get(t),i=this.$anchorCell.start(-1),o=n.colCount(this.$anchorCell.pos-i),s=n.colCount(this.$headCell.pos-i);if(Math.min(o,s)>0)return!1;const r=o+this.$anchorCell.nodeAfter.attrs.colspan,a=s+this.$headCell.nodeAfter.attrs.colspan;return Math.max(r,a)==n.width}eq(t){return t instanceof Ws&&t.$anchorCell.pos==this.$anchorCell.pos&&t.$headCell.pos==this.$headCell.pos}static rowSelection(t,n=t){const i=t.node(-1),o=gn.get(i),s=t.start(-1),r=o.findCell(t.pos-s),a=o.findCell(n.pos-s),l=t.node(0);return r.left<=a.left?(r.left>0&&(t=l.resolve(s+o.map[r.top*o.width])),a.right<o.width&&(n=l.resolve(s+o.map[o.width*(a.top+1)-1]))):(a.left>0&&(n=l.resolve(s+o.map[a.top*o.width])),r.right<o.width&&(t=l.resolve(s+o.map[o.width*(r.top+1)-1]))),new Ws(t,n)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(t,n){return new Ws(t.resolve(n.anchor),t.resolve(n.head))}static create(t,n,i=n){return new Ws(t.resolve(n),t.resolve(i))}getBookmark(){return new _be(this.$anchorCell.pos,this.$headCell.pos)}};Xt.prototype.visible=!1;it.jsonID("cell",Xt);var _be=class p5{constructor(t,n){this.anchor=t,this.head=n}map(t){return new p5(t.map(this.anchor),t.map(this.head))}resolve(t){const n=t.resolve(this.anchor),i=t.resolve(this.head);return n.parent.type.spec.tableRole=="row"&&i.parent.type.spec.tableRole=="row"&&n.index()<n.parent.childCount&&i.index()<i.parent.childCount&&q0(n,i)?new Xt(n,i):it.near(i,1)}};function Cbe(e){if(!(e.selection instanceof Xt))return null;const t=[];return e.selection.forEachCell((n,i)=>{t.push(di.node(i,i+n.nodeSize,{class:"selectedCell"}))}),cn.create(e.doc,t)}function Abe({$from:e,$to:t}){if(e.pos==t.pos||e.pos<t.pos-6)return!1;let n=e.pos,i=t.pos,o=e.depth;for(;o>=0&&!(e.after(o+1)<e.end(o));o--,n++);for(let s=t.depth;s>=0&&!(t.before(s+1)>t.start(s));s--,i--);return n==i&&/row|table/.test(e.node(o).type.spec.tableRole)}function kbe({$from:e,$to:t}){let n,i;for(let o=e.depth;o>0;o--){const s=e.node(o);if(s.type.spec.tableRole==="cell"||s.type.spec.tableRole==="header_cell"){n=s;break}}for(let o=t.depth;o>0;o--){const s=t.node(o);if(s.type.spec.tableRole==="cell"||s.type.spec.tableRole==="header_cell"){i=s;break}}return n!==i&&t.parentOffset===0}function Sbe(e,t,n){const i=(t||e).selection,o=(t||e).doc;let s,r;if(i instanceof Ye&&(r=i.node.type.spec.tableRole)){if(r=="cell"||r=="header_cell")s=Xt.create(o,i.from);else if(r=="row"){const a=o.resolve(i.from+1);s=Xt.rowSelection(a,a)}else if(!n){const a=gn.get(i.node),l=i.from+1,c=l+a.map[a.width*a.height-1];s=Xt.create(o,l+1,c)}}else i instanceof Ze&&Abe(i)?s=Ze.create(o,i.from):i instanceof Ze&&kbe(i)&&(s=Ze.create(o,i.$from.start(),i.$from.end()));return s&&(t||(t=e.tr)).setSelection(s),t}var xbe=new Dn("fix-tables");function m5(e,t,n,i){const o=e.childCount,s=t.childCount;e:for(let r=0,a=0;r<s;r++){const l=t.child(r);for(let c=a,u=Math.min(o,r+3);c<u;c++)if(e.child(c)==l){a=c+1,n+=l.nodeSize;continue e}i(l,n),a<o&&e.child(a).sameMarkup(l)?m5(e.child(a),l,n+1,i):l.nodesBetween(0,l.content.size,i,n+1),n+=l.nodeSize}}function g5(e,t){let n;const i=(o,s)=>{o.type.spec.tableRole=="table"&&(n=Mbe(e,o,s,n))};return t?t.doc!=e.doc&&m5(t.doc,e.doc,0,i):e.doc.descendants(i),n}function Mbe(e,t,n,i){const o=gn.get(t);if(!o.problems)return i;i||(i=e.tr);const s=[];for(let l=0;l<o.height;l++)s.push(0);for(let l=0;l<o.problems.length;l++){const c=o.problems[l];if(c.type=="collision"){const u=t.nodeAt(c.pos);if(!u)continue;const f=u.attrs;for(let m=0;m<f.rowspan;m++)s[c.row+m]+=c.n;i.setNodeMarkup(i.mapping.map(n+1+c.pos),null,dl(f,f.colspan-c.n,c.n))}else if(c.type=="missing")s[c.row]+=c.n;else if(c.type=="overlong_rowspan"){const u=t.nodeAt(c.pos);if(!u)continue;i.setNodeMarkup(i.mapping.map(n+1+c.pos),null,{...u.attrs,rowspan:u.attrs.rowspan-c.n})}else if(c.type=="colwidth mismatch"){const u=t.nodeAt(c.pos);if(!u)continue;i.setNodeMarkup(i.mapping.map(n+1+c.pos),null,{...u.attrs,colwidth:c.colwidth})}else if(c.type=="zero_sized"){const u=i.mapping.map(n);i.delete(u,u+t.nodeSize)}}let r,a;for(let l=0;l<s.length;l++)s[l]&&(r==null&&(r=l),a=l);for(let l=0,c=n+1;l<o.height;l++){const u=t.child(l),f=c+u.nodeSize,m=s[l];if(m>0){let g="cell";u.firstChild&&(g=u.firstChild.type.spec.tableRole);const v=[];for(let _=0;_<m;_++){const k=ui(e.schema)[g].createAndFill();k&&v.push(k)}const w=(l==0||r==l-1)&&a==l?c+1:f-1;i.insert(i.mapping.map(w),v)}c=f}return i.setMeta(xbe,{fixTables:!0})}function Ss(e){const t=e.selection,n=Tm(e),i=n.node(-1),o=n.start(-1),s=gn.get(i);return{...t instanceof Xt?s.rectBetween(t.$anchorCell.pos-o,t.$headCell.pos-o):s.findCell(n.pos-o),tableStart:o,map:s,table:i}}function b5(e,{map:t,tableStart:n,table:i},o){let s=o>0?-1:0;wbe(t,i,o+s)&&(s=o==0||o==t.width?null:0);for(let r=0;r<t.height;r++){const a=r*t.width+o;if(o>0&&o<t.width&&t.map[a-1]==t.map[a]){const l=t.map[a],c=i.nodeAt(l);e.setNodeMarkup(e.mapping.map(n+l),null,f5(c.attrs,o-t.colCount(l))),r+=c.attrs.rowspan-1}else{const l=s==null?ui(i.type.schema).cell:i.nodeAt(t.map[a+s]).type,c=t.positionAt(r,o,i);e.insert(e.mapping.map(n+c),l.createAndFill())}}return e}function Tbe(e,t){if(!Jo(e))return!1;if(t){const n=Ss(e);t(b5(e.tr,n,n.left))}return!0}function Ebe(e,t){if(!Jo(e))return!1;if(t){const n=Ss(e);t(b5(e.tr,n,n.right))}return!0}function Obe(e,{map:t,table:n,tableStart:i},o){const s=e.mapping.maps.length;for(let r=0;r<t.height;){const a=r*t.width+o,l=t.map[a],c=n.nodeAt(l),u=c.attrs;if(o>0&&t.map[a-1]==l||o<t.width-1&&t.map[a+1]==l)e.setNodeMarkup(e.mapping.slice(s).map(i+l),null,dl(u,o-t.colCount(l)));else{const f=e.mapping.slice(s).map(i+l);e.delete(f,f+c.nodeSize)}r+=u.rowspan}}function $be(e,t){if(!Jo(e))return!1;if(t){const n=Ss(e),i=e.tr;if(n.left==0&&n.right==n.map.width)return!1;for(let o=n.right-1;Obe(i,n,o),o!=n.left;o--){const s=n.tableStart?i.doc.nodeAt(n.tableStart-1):i.doc;if(!s)throw RangeError("No table found");n.table=s,n.map=gn.get(s)}t(i)}return!0}function Ibe(e,t,n){var i;const o=ui(t.type.schema).header_cell;for(let s=0;s<e.width;s++)if(((i=t.nodeAt(e.map[s+n*e.width]))==null?void 0:i.type)!=o)return!1;return!0}function y5(e,{map:t,tableStart:n,table:i},o){var s;let r=n;for(let c=0;c<o;c++)r+=i.child(c).nodeSize;const a=[];let l=o>0?-1:0;Ibe(t,i,o+l)&&(l=o==0||o==t.height?null:0);for(let c=0,u=t.width*o;c<t.width;c++,u++)if(o>0&&o<t.height&&t.map[u]==t.map[u-t.width]){const f=t.map[u],m=i.nodeAt(f).attrs;e.setNodeMarkup(n+f,null,{...m,rowspan:m.rowspan+1}),c+=m.colspan-1}else{const f=l==null?ui(i.type.schema).cell:(s=i.nodeAt(t.map[u+l*t.width]))==null?void 0:s.type,m=f==null?void 0:f.createAndFill();m&&a.push(m)}return e.insert(r,ui(i.type.schema).row.create(null,a)),e}function Lbe(e,t){if(!Jo(e))return!1;if(t){const n=Ss(e);t(y5(e.tr,n,n.top))}return!0}function Dbe(e,t){if(!Jo(e))return!1;if(t){const n=Ss(e);t(y5(e.tr,n,n.bottom))}return!0}function Rbe(e,{map:t,table:n,tableStart:i},o){let s=0;for(let c=0;c<o;c++)s+=n.child(c).nodeSize;const r=s+n.child(o).nodeSize,a=e.mapping.maps.length;e.delete(s+i,r+i);const l=new Set;for(let c=0,u=o*t.width;c<t.width;c++,u++){const f=t.map[u];if(!l.has(f)){if(l.add(f),o>0&&f==t.map[u-t.width]){const m=n.nodeAt(f).attrs;e.setNodeMarkup(e.mapping.slice(a).map(f+i),null,{...m,rowspan:m.rowspan-1}),c+=m.colspan-1}else if(o<t.height&&f==t.map[u+t.width]){const m=n.nodeAt(f),g=m.attrs,v=m.type.create({...g,rowspan:m.attrs.rowspan-1},m.content),w=t.positionAt(o+1,c,n);e.insert(e.mapping.slice(a).map(i+w),v),c+=g.colspan-1}}}}function Pbe(e,t){if(!Jo(e))return!1;if(t){const n=Ss(e),i=e.tr;if(n.top==0&&n.bottom==n.map.height)return!1;for(let o=n.bottom-1;Rbe(i,n,o),o!=n.top;o--){const s=n.tableStart?i.doc.nodeAt(n.tableStart-1):i.doc;if(!s)throw RangeError("No table found");n.table=s,n.map=gn.get(n.table)}t(i)}return!0}function kA(e){const t=e.content;return t.childCount==1&&t.child(0).isTextblock&&t.child(0).childCount==0}function Hbe({width:e,height:t,map:n},i){let o=i.top*e+i.left,s=o,r=(i.bottom-1)*e+i.left,a=o+(i.right-i.left-1);for(let l=i.top;l<i.bottom;l++){if(i.left>0&&n[s]==n[s-1]||i.right<e&&n[a]==n[a+1])return!0;s+=e,a+=e}for(let l=i.left;l<i.right;l++){if(i.top>0&&n[o]==n[o-e]||i.bottom<t&&n[r]==n[r+e])return!0;o++,r++}return!1}function SA(e,t){const n=e.selection;if(!(n instanceof Xt)||n.$anchorCell.pos==n.$headCell.pos)return!1;const i=Ss(e),{map:o}=i;if(Hbe(o,i))return!1;if(t){const s=e.tr,r={};let a=be.empty,l,c;for(let u=i.top;u<i.bottom;u++)for(let f=i.left;f<i.right;f++){const m=o.map[u*o.width+f],g=i.table.nodeAt(m);if(!(r[m]||!g))if(r[m]=!0,l==null)l=m,c=g;else{kA(g)||(a=a.append(g.content));const v=s.mapping.map(m+i.tableStart);s.delete(v,v+g.nodeSize)}}if(l==null||c==null)return!0;if(s.setNodeMarkup(l+i.tableStart,null,{...f5(c.attrs,c.attrs.colspan,i.right-i.left-c.attrs.colspan),rowspan:i.bottom-i.top}),a.size){const u=l+1+c.content.size,f=kA(c)?l+1:u;s.replaceWith(f+i.tableStart,u+i.tableStart,a)}s.setSelection(new Xt(s.doc.resolve(l+i.tableStart))),t(s)}return!0}function xA(e,t){const n=ui(e.schema);return Vbe(({node:i})=>n[i.type.spec.tableRole])(e,t)}function Vbe(e){return(t,n)=>{var i;const o=t.selection;let s,r;if(o instanceof Xt){if(o.$anchorCell.pos!=o.$headCell.pos)return!1;s=o.$anchorCell.nodeAfter,r=o.$anchorCell.pos}else{if(s=bbe(o.$from),!s)return!1;r=(i=Dc(o.$from))==null?void 0:i.pos}if(s==null||r==null||s.attrs.colspan==1&&s.attrs.rowspan==1)return!1;if(n){let a=s.attrs;const l=[],c=a.colwidth;a.rowspan>1&&(a={...a,rowspan:1}),a.colspan>1&&(a={...a,colspan:1});const u=Ss(t),f=t.tr;for(let g=0;g<u.right-u.left;g++)l.push(c?{...a,colwidth:c&&c[g]?[c[g]]:null}:a);let m;for(let g=u.top;g<u.bottom;g++){let v=u.map.positionAt(g,u.left,u.table);g==u.top&&(v+=s.nodeSize);for(let w=u.left,_=0;w<u.right;w++,_++)w==u.left&&g==u.top||f.insert(m=f.mapping.map(v+u.tableStart,1),e({node:s,row:g,col:w}).createAndFill(l[_]))}f.setNodeMarkup(r,e({node:s,row:u.top,col:u.left}),l[0]),o instanceof Xt&&f.setSelection(new Xt(f.doc.resolve(o.$anchorCell.pos),m?f.doc.resolve(m):void 0)),n(f)}return!0}}function zbe(e,t){return function(n,i){if(!Jo(n))return!1;const o=Tm(n);if(o.nodeAfter.attrs[e]===t)return!1;if(i){const s=n.tr;n.selection instanceof Xt?n.selection.forEachCell((r,a)=>{r.attrs[e]!==t&&s.setNodeMarkup(a,null,{...r.attrs,[e]:t})}):s.setNodeMarkup(o.pos,null,{...o.nodeAfter.attrs,[e]:t}),i(s)}return!0}}function Nbe(e){return function(t,n){if(!Jo(t))return!1;if(n){const i=ui(t.schema),o=Ss(t),s=t.tr,r=o.map.cellsInRect(e=="column"?{left:o.left,top:0,right:o.right,bottom:o.map.height}:e=="row"?{left:0,top:o.top,right:o.map.width,bottom:o.bottom}:o),a=r.map(l=>o.table.nodeAt(l));for(let l=0;l<r.length;l++)a[l].type==i.header_cell&&s.setNodeMarkup(o.tableStart+r[l],i.cell,a[l].attrs);if(s.steps.length==0)for(let l=0;l<r.length;l++)s.setNodeMarkup(o.tableStart+r[l],i.header_cell,a[l].attrs);n(s)}return!0}}function MA(e,t,n){const i=t.map.cellsInRect({left:0,top:0,right:e=="row"?t.map.width:1,bottom:e=="column"?t.map.height:1});for(let o=0;o<i.length;o++){const s=t.table.nodeAt(i[o]);if(s&&s.type!==n.header_cell)return!1}return!0}function pu(e,t){return t=t||{useDeprecatedLogic:!1},t.useDeprecatedLogic?Nbe(e):function(n,i){if(!Jo(n))return!1;if(i){const o=ui(n.schema),s=Ss(n),r=n.tr,a=MA("row",s,o),l=MA("column",s,o),u=(e==="column"?a:e==="row"?l:!1)?1:0,f=e=="column"?{left:0,top:u,right:1,bottom:s.map.height}:e=="row"?{left:u,top:0,right:s.map.width,bottom:1}:s,m=e=="column"?l?o.cell:o.header_cell:e=="row"?a?o.cell:o.header_cell:o.cell;s.map.cellsInRect(f).forEach(g=>{const v=g+s.tableStart,w=r.doc.nodeAt(v);w&&r.setNodeMarkup(v,m,w.attrs)}),i(r)}return!0}}pu("row",{useDeprecatedLogic:!0});pu("column",{useDeprecatedLogic:!0});var Bbe=pu("cell",{useDeprecatedLogic:!0});function Fbe(e,t){if(t<0){const n=e.nodeBefore;if(n)return e.pos-n.nodeSize;for(let i=e.index(-1)-1,o=e.before();i>=0;i--){const s=e.node(-1).child(i),r=s.lastChild;if(r)return o-1-r.nodeSize;o-=s.nodeSize}}else{if(e.index()<e.parent.childCount-1)return e.pos+e.nodeAfter.nodeSize;const n=e.node(-1);for(let i=e.indexAfter(-1),o=e.after();i<n.childCount;i++){const s=n.child(i);if(s.childCount)return o+1;o+=s.nodeSize}}return null}function TA(e){return function(t,n){if(!Jo(t))return!1;const i=Fbe(Tm(t),e);if(i==null)return!1;if(n){const o=t.doc.resolve(i);n(t.tr.setSelection(Ze.between(o,vbe(o))).scrollIntoView())}return!0}}function Wbe(e,t){const n=e.selection.$anchor;for(let i=n.depth;i>0;i--)if(n.node(i).type.spec.tableRole=="table")return t&&t(e.tr.delete(n.before(i),n.after(i)).scrollIntoView()),!0;return!1}function Yh(e,t){const n=e.selection;if(!(n instanceof Xt))return!1;if(t){const i=e.tr,o=ui(e.schema).cell.createAndFill().content;n.forEachCell((s,r)=>{s.content.eq(o)||i.replace(i.mapping.map(r+1),i.mapping.map(r+s.nodeSize-1),new Oe(o,0,0))}),i.docChanged&&t(i)}return!0}function Ube(e){if(!e.size)return null;let{content:t,openStart:n,openEnd:i}=e;for(;t.childCount==1&&(n>0&&i>0||t.child(0).type.spec.tableRole=="table");)n--,i--,t=t.child(0).content;const o=t.child(0),s=o.type.spec.tableRole,r=o.type.schema,a=[];if(s=="row")for(let l=0;l<t.childCount;l++){let c=t.child(l).content;const u=l?0:Math.max(0,n-1),f=l<t.childCount-1?0:Math.max(0,i-1);(u||f)&&(c=sy(ui(r).row,new Oe(c,u,f)).content),a.push(c)}else if(s=="cell"||s=="header_cell")a.push(n||i?sy(ui(r).row,new Oe(t,n,i)).content:t);else return null;return jbe(r,a)}function jbe(e,t){const n=[];for(let o=0;o<t.length;o++){const s=t[o];for(let r=s.childCount-1;r>=0;r--){const{rowspan:a,colspan:l}=s.child(r).attrs;for(let c=o;c<o+a;c++)n[c]=(n[c]||0)+l}}let i=0;for(let o=0;o<n.length;o++)i=Math.max(i,n[o]);for(let o=0;o<n.length;o++)if(o>=t.length&&t.push(be.empty),n[o]<i){const s=ui(e).cell.createAndFill(),r=[];for(let a=n[o];a<i;a++)r.push(s);t[o]=t[o].append(be.from(r))}return{height:t.length,width:i,rows:t}}function sy(e,t){const n=e.createAndFill();return new h0(n).replace(0,n.content.size,t).doc}function qbe({width:e,height:t,rows:n},i,o){if(e!=i){const s=[],r=[];for(let a=0;a<n.length;a++){const l=n[a],c=[];for(let u=s[a]||0,f=0;u<i;f++){let m=l.child(f%l.childCount);u+m.attrs.colspan>i&&(m=m.type.createChecked(dl(m.attrs,m.attrs.colspan,u+m.attrs.colspan-i),m.content)),c.push(m),u+=m.attrs.colspan;for(let g=1;g<m.attrs.rowspan;g++)s[a+g]=(s[a+g]||0)+m.attrs.colspan}r.push(be.from(c))}n=r,e=i}if(t!=o){const s=[];for(let r=0,a=0;r<o;r++,a++){const l=[],c=n[a%t];for(let u=0;u<c.childCount;u++){let f=c.child(u);r+f.attrs.rowspan>o&&(f=f.type.create({...f.attrs,rowspan:Math.max(1,o-f.attrs.rowspan)},f.content)),l.push(f)}s.push(be.from(l))}n=s,t=o}return{width:e,height:t,rows:n}}function Kbe(e,t,n,i,o,s,r){const a=e.doc.type.schema,l=ui(a);let c,u;if(o>t.width)for(let f=0,m=0;f<t.height;f++){const g=n.child(f);m+=g.nodeSize;const v=[];let w;g.lastChild==null||g.lastChild.type==l.cell?w=c||(c=l.cell.createAndFill()):w=u||(u=l.header_cell.createAndFill());for(let _=t.width;_<o;_++)v.push(w);e.insert(e.mapping.slice(r).map(m-1+i),v)}if(s>t.height){const f=[];for(let v=0,w=(t.height-1)*t.width;v<Math.max(t.width,o);v++){const _=v>=t.width?!1:n.nodeAt(t.map[w+v]).type==l.header_cell;f.push(_?u||(u=l.header_cell.createAndFill()):c||(c=l.cell.createAndFill()))}const m=l.row.create(null,be.from(f)),g=[];for(let v=t.height;v<s;v++)g.push(m);e.insert(e.mapping.slice(r).map(i+n.nodeSize-2),g)}return!!(c||u)}function EA(e,t,n,i,o,s,r,a){if(r==0||r==t.height)return!1;let l=!1;for(let c=o;c<s;c++){const u=r*t.width+c,f=t.map[u];if(t.map[u-t.width]==f){l=!0;const m=n.nodeAt(f),{top:g,left:v}=t.findCell(f);e.setNodeMarkup(e.mapping.slice(a).map(f+i),null,{...m.attrs,rowspan:r-g}),e.insert(e.mapping.slice(a).map(t.positionAt(r,v,n)),m.type.createAndFill({...m.attrs,rowspan:g+m.attrs.rowspan-r})),c+=m.attrs.colspan-1}}return l}function OA(e,t,n,i,o,s,r,a){if(r==0||r==t.width)return!1;let l=!1;for(let c=o;c<s;c++){const u=c*t.width+r,f=t.map[u];if(t.map[u-1]==f){l=!0;const m=n.nodeAt(f),g=t.colCount(f),v=e.mapping.slice(a).map(f+i);e.setNodeMarkup(v,null,dl(m.attrs,r-g,m.attrs.colspan-(r-g))),e.insert(v+m.nodeSize,m.type.createAndFill(dl(m.attrs,0,r-g))),c+=m.attrs.rowspan-1}}return l}function $A(e,t,n,i,o){let s=n?e.doc.nodeAt(n-1):e.doc;if(!s)throw new Error("No table found");let r=gn.get(s);const{top:a,left:l}=i,c=l+o.width,u=a+o.height,f=e.tr;let m=0;function g(){if(s=n?f.doc.nodeAt(n-1):f.doc,!s)throw new Error("No table found");r=gn.get(s),m=f.mapping.maps.length}Kbe(f,r,s,n,c,u,m)&&g(),EA(f,r,s,n,l,c,a,m)&&g(),EA(f,r,s,n,l,c,u,m)&&g(),OA(f,r,s,n,a,u,l,m)&&g(),OA(f,r,s,n,a,u,c,m)&&g();for(let v=a;v<u;v++){const w=r.positionAt(v,l,s),_=r.positionAt(v,c,s);f.replace(f.mapping.slice(m).map(w+n),f.mapping.slice(m).map(_+n),new Oe(o.rows[v-a],0,0))}g(),f.setSelection(new Xt(f.doc.resolve(n+r.positionAt(a,l,s)),f.doc.resolve(n+r.positionAt(u-1,c-1,s)))),t(f)}var Gbe=A0({ArrowLeft:Zh("horiz",-1),ArrowRight:Zh("horiz",1),ArrowUp:Zh("vert",-1),ArrowDown:Zh("vert",1),"Shift-ArrowLeft":Xh("horiz",-1),"Shift-ArrowRight":Xh("horiz",1),"Shift-ArrowUp":Xh("vert",-1),"Shift-ArrowDown":Xh("vert",1),Backspace:Yh,"Mod-Backspace":Yh,Delete:Yh,"Mod-Delete":Yh});function $f(e,t,n){return n.eq(e.selection)?!1:(t&&t(e.tr.setSelection(n).scrollIntoView()),!0)}function Zh(e,t){return(n,i,o)=>{if(!o)return!1;const s=n.selection;if(s instanceof Xt)return $f(n,i,it.near(s.$headCell,t));if(e!="horiz"&&!s.empty)return!1;const r=v5(o,e,t);if(r==null)return!1;if(e=="horiz")return $f(n,i,it.near(n.doc.resolve(s.head+t),t));{const a=n.doc.resolve(r),l=h5(a,e,t);let c;return l?c=it.near(l,1):t<0?c=it.near(n.doc.resolve(a.before(-1)),-1):c=it.near(n.doc.resolve(a.after(-1)),1),$f(n,i,c)}}}function Xh(e,t){return(n,i,o)=>{if(!o)return!1;const s=n.selection;let r;if(s instanceof Xt)r=s;else{const l=v5(o,e,t);if(l==null)return!1;r=new Xt(n.doc.resolve(l))}const a=h5(r.$headCell,e,t);return a?$f(n,i,new Xt(r.$anchorCell,a)):!1}}function Jbe(e,t){const n=e.state.doc,i=Dc(n.resolve(t));return i?(e.dispatch(e.state.tr.setSelection(new Xt(i))),!0):!1}function Ybe(e,t,n){if(!Jo(e.state))return!1;let i=Ube(n);const o=e.state.selection;if(o instanceof Xt){i||(i={width:1,height:1,rows:[be.from(sy(ui(e.state.schema).cell,n))]});const s=o.$anchorCell.node(-1),r=o.$anchorCell.start(-1),a=gn.get(s).rectBetween(o.$anchorCell.pos-r,o.$headCell.pos-r);return i=qbe(i,a.right-a.left,a.bottom-a.top),$A(e.state,e.dispatch,r,a,i),!0}else if(i){const s=Tm(e.state),r=s.start(-1);return $A(e.state,e.dispatch,r,gn.get(s.node(-1)).findCell(s.pos-r),i),!0}else return!1}function Zbe(e,t){var n;if(t.ctrlKey||t.metaKey)return;const i=IA(e,t.target);let o;if(t.shiftKey&&e.state.selection instanceof Xt)s(e.state.selection.$anchorCell,t),t.preventDefault();else if(t.shiftKey&&i&&(o=Dc(e.state.selection.$anchor))!=null&&((n=N1(e,t))==null?void 0:n.pos)!=o.pos)s(o,t),t.preventDefault();else if(!i)return;function s(l,c){let u=N1(e,c);const f=Hr.getState(e.state)==null;if(!u||!q0(l,u))if(f)u=l;else return;const m=new Xt(l,u);if(f||!e.state.selection.eq(m)){const g=e.state.tr.setSelection(m);f&&g.setMeta(Hr,l.pos),e.dispatch(g)}}function r(){e.root.removeEventListener("mouseup",r),e.root.removeEventListener("dragstart",r),e.root.removeEventListener("mousemove",a),Hr.getState(e.state)!=null&&e.dispatch(e.state.tr.setMeta(Hr,-1))}function a(l){const c=l,u=Hr.getState(e.state);let f;if(u!=null)f=e.state.doc.resolve(u);else if(IA(e,c.target)!=i&&(f=N1(e,t),!f))return r();f&&s(f,c)}e.root.addEventListener("mouseup",r),e.root.addEventListener("dragstart",r),e.root.addEventListener("mousemove",a)}function v5(e,t,n){if(!(e.state.selection instanceof Ze))return null;const{$head:i}=e.state.selection;for(let o=i.depth-1;o>=0;o--){const s=i.node(o);if((n<0?i.index(o):i.indexAfter(o))!=(n<0?0:s.childCount))return null;if(s.type.spec.tableRole=="cell"||s.type.spec.tableRole=="header_cell"){const a=i.before(o),l=t=="vert"?n>0?"down":"up":n>0?"right":"left";return e.endOfTextblock(l)?a:null}}return null}function IA(e,t){for(;t&&t!=e.dom;t=t.parentNode)if(t.nodeName=="TD"||t.nodeName=="TH")return t;return null}function N1(e,t){const n=e.posAtCoords({left:t.clientX,top:t.clientY});return n&&n?Dc(e.state.doc.resolve(n.pos)):null}var Xbe=class{constructor(t,n){this.node=t,this.defaultCellMinWidth=n,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.style.setProperty("--default-cell-min-width",`${n}px`),this.colgroup=this.table.appendChild(document.createElement("colgroup")),ry(t,this.colgroup,this.table,n),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(t){return t.type!=this.node.type?!1:(this.node=t,ry(t,this.colgroup,this.table,this.defaultCellMinWidth),!0)}ignoreMutation(t){return t.type=="attributes"&&(t.target==this.table||this.colgroup.contains(t.target))}};function ry(e,t,n,i,o,s){var r;let a=0,l=!0,c=t.firstChild;const u=e.firstChild;if(u){for(let f=0,m=0;f<u.childCount;f++){const{colspan:g,colwidth:v}=u.child(f).attrs;for(let w=0;w<g;w++,m++){const _=o==m?s:v&&v[w],k=_?_+"px":"";if(a+=_||i,_||(l=!1),c)c.style.width!=k&&(c.style.width=k),c=c.nextSibling;else{const L=document.createElement("col");L.style.width=k,t.appendChild(L)}}}for(;c;){const f=c.nextSibling;(r=c.parentNode)==null||r.removeChild(c),c=f}l?(n.style.width=a+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=a+"px")}}var Zi=new Dn("tableColumnResizing");function Qbe({handleWidth:e=5,cellMinWidth:t=25,defaultCellMinWidth:n=100,View:i=Xbe,lastColumnResizable:o=!0}={}){const s=new bn({key:Zi,state:{init(r,a){var l,c;const u=(c=(l=s.spec)==null?void 0:l.props)==null?void 0:c.nodeViews,f=ui(a.schema).table.name;return i&&u&&(u[f]=(m,g)=>new i(m,n,g)),new eye(-1,!1)},apply(r,a){return a.apply(r)}},props:{attributes:r=>{const a=Zi.getState(r);return a&&a.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(r,a)=>{tye(r,a,e,o)},mouseleave:r=>{nye(r)},mousedown:(r,a)=>{iye(r,a,t,n)}},decorations:r=>{const a=Zi.getState(r);if(a&&a.activeHandle>-1)return lye(r,a.activeHandle)},nodeViews:{}}});return s}var eye=class If{constructor(t,n){this.activeHandle=t,this.dragging=n}apply(t){const n=this,i=t.getMeta(Zi);if(i&&i.setHandle!=null)return new If(i.setHandle,!1);if(i&&i.setDragging!==void 0)return new If(n.activeHandle,i.setDragging);if(n.activeHandle>-1&&t.docChanged){let o=t.mapping.map(n.activeHandle,-1);return oy(t.doc.resolve(o))||(o=-1),new If(o,n.dragging)}return n}};function tye(e,t,n,i){if(!e.editable)return;const o=Zi.getState(e.state);if(o&&!o.dragging){const s=sye(t.target);let r=-1;if(s){const{left:a,right:l}=s.getBoundingClientRect();t.clientX-a<=n?r=LA(e,t,"left",n):l-t.clientX<=n&&(r=LA(e,t,"right",n))}if(r!=o.activeHandle){if(!i&&r!==-1){const a=e.state.doc.resolve(r),l=a.node(-1),c=gn.get(l),u=a.start(-1);if(c.colCount(a.pos-u)+a.nodeAfter.attrs.colspan-1==c.width-1)return}w5(e,r)}}}function nye(e){if(!e.editable)return;const t=Zi.getState(e.state);t&&t.activeHandle>-1&&!t.dragging&&w5(e,-1)}function iye(e,t,n,i){var o;if(!e.editable)return!1;const s=(o=e.dom.ownerDocument.defaultView)!=null?o:window,r=Zi.getState(e.state);if(!r||r.activeHandle==-1||r.dragging)return!1;const a=e.state.doc.nodeAt(r.activeHandle),l=oye(e,r.activeHandle,a.attrs);e.dispatch(e.state.tr.setMeta(Zi,{setDragging:{startX:t.clientX,startWidth:l}}));function c(f){s.removeEventListener("mouseup",c),s.removeEventListener("mousemove",u);const m=Zi.getState(e.state);m!=null&&m.dragging&&(rye(e,m.activeHandle,DA(m.dragging,f,n)),e.dispatch(e.state.tr.setMeta(Zi,{setDragging:null})))}function u(f){if(!f.which)return c(f);const m=Zi.getState(e.state);if(m&&m.dragging){const g=DA(m.dragging,f,n);RA(e,m.activeHandle,g,i)}}return RA(e,r.activeHandle,l,i),s.addEventListener("mouseup",c),s.addEventListener("mousemove",u),t.preventDefault(),!0}function oye(e,t,{colspan:n,colwidth:i}){const o=i&&i[i.length-1];if(o)return o;const s=e.domAtPos(t);let a=s.node.childNodes[s.offset].offsetWidth,l=n;if(i)for(let c=0;c<n;c++)i[c]&&(a-=i[c],l--);return a/l}function sye(e){for(;e&&e.nodeName!="TD"&&e.nodeName!="TH";)e=e.classList&&e.classList.contains("ProseMirror")?null:e.parentNode;return e}function LA(e,t,n,i){const o=n=="right"?-i:i,s=e.posAtCoords({left:t.clientX+o,top:t.clientY});if(!s)return-1;const{pos:r}=s,a=Dc(e.state.doc.resolve(r));if(!a)return-1;if(n=="right")return a.pos;const l=gn.get(a.node(-1)),c=a.start(-1),u=l.map.indexOf(a.pos-c);return u%l.width==0?-1:c+l.map[u-1]}function DA(e,t,n){const i=t.clientX-e.startX;return Math.max(n,e.startWidth+i)}function w5(e,t){e.dispatch(e.state.tr.setMeta(Zi,{setHandle:t}))}function rye(e,t,n){const i=e.state.doc.resolve(t),o=i.node(-1),s=gn.get(o),r=i.start(-1),a=s.colCount(i.pos-r)+i.nodeAfter.attrs.colspan-1,l=e.state.tr;for(let c=0;c<s.height;c++){const u=c*s.width+a;if(c&&s.map[u]==s.map[u-s.width])continue;const f=s.map[u],m=o.nodeAt(f).attrs,g=m.colspan==1?0:a-s.colCount(f);if(m.colwidth&&m.colwidth[g]==n)continue;const v=m.colwidth?m.colwidth.slice():aye(m.colspan);v[g]=n,l.setNodeMarkup(r+f,null,{...m,colwidth:v})}l.docChanged&&e.dispatch(l)}function RA(e,t,n,i){const o=e.state.doc.resolve(t),s=o.node(-1),r=o.start(-1),a=gn.get(s).colCount(o.pos-r)+o.nodeAfter.attrs.colspan-1;let l=e.domAtPos(o.start(-1)).node;for(;l&&l.nodeName!="TABLE";)l=l.parentNode;l&&ry(s,l.firstChild,l,i,a,n)}function aye(e){return Array(e).fill(0)}function lye(e,t){var n;const i=[],o=e.doc.resolve(t),s=o.node(-1);if(!s)return cn.empty;const r=gn.get(s),a=o.start(-1),l=r.colCount(o.pos-a)+o.nodeAfter.attrs.colspan-1;for(let c=0;c<r.height;c++){const u=l+c*r.width;if((l==r.width-1||r.map[u]!=r.map[u+1])&&(c==0||r.map[u]!=r.map[u-r.width])){const f=r.map[u],m=a+f+s.nodeAt(f).nodeSize-1,g=document.createElement("div");g.className="column-resize-handle",(n=Zi.getState(e))!=null&&n.dragging&&i.push(di.node(a+f,a+f+s.nodeAt(f).nodeSize,{class:"column-resize-dragging"})),i.push(di.widget(m,g))}}return cn.create(e.doc,i)}function cye({allowTableNodeSelection:e=!1}={}){return new bn({key:Hr,state:{init(){return null},apply(t,n){const i=t.getMeta(Hr);if(i!=null)return i==-1?null:i;if(n==null||!t.docChanged)return n;const{deleted:o,pos:s}=t.mapping.mapResult(n);return o?null:s}},props:{decorations:Cbe,handleDOMEvents:{mousedown:Zbe},createSelectionBetween(t){return Hr.getState(t.state)!=null?t.state.selection:null},handleTripleClick:Jbe,handleKeyDown:Gbe,handlePaste:Ybe},appendTransaction(t,n,i){return Sbe(i,g5(i,n),e)}})}function ay(e,t){return t?["width",`${Math.max(t,e)}px`]:["min-width",`${e}px`]}function PA(e,t,n,i,o,s){var r;let a=0,l=!0,c=t.firstChild;const u=e.firstChild;if(u!==null)for(let f=0,m=0;f<u.childCount;f+=1){const{colspan:g,colwidth:v}=u.child(f).attrs;for(let w=0;w<g;w+=1,m+=1){const _=o===m?s:v&&v[w],k=_?`${_}px`:"";if(a+=_||i,_||(l=!1),c){if(c.style.width!==k){const[L,P]=ay(i,_);c.style.setProperty(L,P)}c=c.nextSibling}else{const L=document.createElement("col"),[P,M]=ay(i,_);L.style.setProperty(P,M),t.appendChild(L)}}}for(;c;){const f=c.nextSibling;(r=c.parentNode)===null||r===void 0||r.removeChild(c),c=f}l?(n.style.width=`${a}px`,n.style.minWidth=""):(n.style.width="",n.style.minWidth=`${a}px`)}class dye{constructor(t,n){this.node=t,this.cellMinWidth=n,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),PA(t,this.colgroup,this.table,n),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(t){return t.type!==this.node.type?!1:(this.node=t,PA(t,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(t){return t.type==="attributes"&&(t.target===this.table||this.colgroup.contains(t.target))}}function uye(e,t,n,i){let o=0,s=!0;const r=[],a=e.firstChild;if(!a)return{};for(let f=0,m=0;f<a.childCount;f+=1){const{colspan:g,colwidth:v}=a.child(f).attrs;for(let w=0;w<g;w+=1,m+=1){const _=n===m?i:v&&v[w];o+=_||t,_||(s=!1);const[k,L]=ay(t,_);r.push(["col",{style:`${k}: ${L}`}])}}const l=s?`${o}px`:"",c=s?"":`${o}px`;return{colgroup:["colgroup",{},...r],tableWidth:l,tableMinWidth:c}}function HA(e,t){return e.createAndFill()}function hye(e){if(e.cached.tableNodeTypes)return e.cached.tableNodeTypes;const t={};return Object.keys(e.nodes).forEach(n=>{const i=e.nodes[n];i.spec.tableRole&&(t[i.spec.tableRole]=i)}),e.cached.tableNodeTypes=t,t}function fye(e,t,n,i,o){const s=hye(e),r=[],a=[];for(let c=0;c<n;c+=1){const u=HA(s.cell);if(u&&a.push(u),i){const f=HA(s.header_cell);f&&r.push(f)}}const l=[];for(let c=0;c<t;c+=1)l.push(s.row.createChecked(null,i&&c===0?r:a));return s.table.createChecked(null,l)}function pye(e){return e instanceof Xt}const Qh=({editor:e})=>{const{selection:t}=e.state;if(!pye(t))return!1;let n=0;const i=RM(t.ranges[0].$from,s=>s.type.name==="table");return i==null||i.node.descendants(s=>{if(s.type.name==="table")return!1;["tableCell","tableHeader"].includes(s.type.name)&&(n+=1)}),n===t.ranges.length?(e.commands.deleteTable(),!0):!1},mye=Fn.create({name:"table",addOptions(){return{HTMLAttributes:{},resizable:!1,handleWidth:5,cellMinWidth:25,View:dye,lastColumnResizable:!0,allowTableNodeSelection:!1}},content:"tableRow+",tableRole:"table",isolating:!0,group:"block",parseHTML(){return[{tag:"table"}]},renderHTML({node:e,HTMLAttributes:t}){const{colgroup:n,tableWidth:i,tableMinWidth:o}=uye(e,this.options.cellMinWidth);return["table",Bt(this.options.HTMLAttributes,t,{style:i?`width: ${i}`:`min-width: ${o}`}),n,["tbody",0]]},addCommands(){return{insertTable:({rows:e=3,cols:t=3,withHeaderRow:n=!0}={})=>({tr:i,dispatch:o,editor:s})=>{const r=fye(s.schema,e,t,n);if(o){const a=i.selection.from+1;i.replaceSelectionWith(r).scrollIntoView().setSelection(Ze.near(i.doc.resolve(a)))}return!0},addColumnBefore:()=>({state:e,dispatch:t})=>Tbe(e,t),addColumnAfter:()=>({state:e,dispatch:t})=>Ebe(e,t),deleteColumn:()=>({state:e,dispatch:t})=>$be(e,t),addRowBefore:()=>({state:e,dispatch:t})=>Lbe(e,t),addRowAfter:()=>({state:e,dispatch:t})=>Dbe(e,t),deleteRow:()=>({state:e,dispatch:t})=>Pbe(e,t),deleteTable:()=>({state:e,dispatch:t})=>Wbe(e,t),mergeCells:()=>({state:e,dispatch:t})=>SA(e,t),splitCell:()=>({state:e,dispatch:t})=>xA(e,t),toggleHeaderColumn:()=>({state:e,dispatch:t})=>pu("column")(e,t),toggleHeaderRow:()=>({state:e,dispatch:t})=>pu("row")(e,t),toggleHeaderCell:()=>({state:e,dispatch:t})=>Bbe(e,t),mergeOrSplit:()=>({state:e,dispatch:t})=>SA(e,t)?!0:xA(e,t),setCellAttribute:(e,t)=>({state:n,dispatch:i})=>zbe(e,t)(n,i),goToNextCell:()=>({state:e,dispatch:t})=>TA(1)(e,t),goToPreviousCell:()=>({state:e,dispatch:t})=>TA(-1)(e,t),fixTables:()=>({state:e,dispatch:t})=>(t&&g5(e),!0),setCellSelection:e=>({tr:t,dispatch:n})=>{if(n){const i=Xt.create(t.doc,e.anchorCell,e.headCell);t.setSelection(i)}return!0}}},addKeyboardShortcuts(){return{Tab:()=>this.editor.commands.goToNextCell()?!0:this.editor.can().addRowAfter()?this.editor.chain().addRowAfter().goToNextCell().run():!1,"Shift-Tab":()=>this.editor.commands.goToPreviousCell(),Backspace:Qh,"Mod-Backspace":Qh,Delete:Qh,"Mod-Delete":Qh}},addProseMirrorPlugins(){return[...this.options.resizable&&this.editor.isEditable?[Qbe({handleWidth:this.options.handleWidth,cellMinWidth:this.options.cellMinWidth,defaultCellMinWidth:this.options.cellMinWidth,View:this.options.View,lastColumnResizable:this.options.lastColumnResizable})]:[],cye({allowTableNodeSelection:this.options.allowTableNodeSelection})]},extendNodeSchema(e){const t={name:e.name,options:e.options,storage:e.storage};return{tableRole:Ct(ze(e,"tableRole",t))}}}),gye=Fn.create({name:"tableCell",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:e=>{const t=e.getAttribute("colwidth");return t?t.split(",").map(i=>parseInt(i,10)):null}}}},tableRole:"cell",isolating:!0,parseHTML(){return[{tag:"td"}]},renderHTML({HTMLAttributes:e}){return["td",Bt(this.options.HTMLAttributes,e),0]}}),bye=Fn.create({name:"tableHeader",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:e=>{const t=e.getAttribute("colwidth");return t?t.split(",").map(i=>parseInt(i,10)):null}}}},tableRole:"header_cell",isolating:!0,parseHTML(){return[{tag:"th"}]},renderHTML({HTMLAttributes:e}){return["th",Bt(this.options.HTMLAttributes,e),0]}}),yye=Fn.create({name:"tableRow",addOptions(){return{HTMLAttributes:{}}},content:"(tableCell | tableHeader)*",tableRole:"row",parseHTML(){return[{tag:"tr"}]},renderHTML({HTMLAttributes:e}){return["tr",Bt(this.options.HTMLAttributes,e),0]}}),vye=xn.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new bn({key:new Dn("placeholder"),props:{decorations:({doc:e,selection:t})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:i}=t,o=[];if(!n)return null;const s=this.editor.isEmpty;return e.descendants((r,a)=>{const l=i>=a&&i<=a+r.nodeSize,c=!r.isLeaf&&Sm(r);if((l||!this.options.showOnlyCurrent)&&c){const u=[this.options.emptyNodeClass];s&&u.push(this.options.emptyEditorClass);const f=di.node(a,a+r.nodeSize,{class:u.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:r,pos:a,hasAnchor:l}):this.options.placeholder});o.push(f)}return this.options.includeChildren}),cn.create(e,o)}}})]}}),wye={name:"AposRichTextWidgetEditor",components:{EditorContent:a1e,BubbleMenu:s1e,FloatingMenu:bA,AposTiptapTableControls:r5},props:{type:{type:String,required:!0},options:{type:Object,required:!0},modelValue:{type:Object,default(){return{}}},meta:{type:Object,default(){return{}}},docId:{type:String,required:!1,default(){return null}},focused:{type:Boolean,default:!1}},emits:["update","suppressWidgetControls"],data(){return{editor:null,docFields:{data:{...this.modelValue},hasErrors:!1},pending:null,isFocused:null,isShowingInsert:!1,showPlaceholder:null,activeInsertMenuComponent:!1,suppressInsertMenu:!1,suppressWidgetControls:!1,hasSelection:!1,insertMenuKey:null,openedPopover:!1}},computed:{tableOptions(){const e=this.moduleOptions.tableOptions||{};return e.class&&(e.HTMLAttributes={class:e.class},delete e.class),e},tableTippyOptions(){return{zIndex:2001,placement:"top",offset:[0,35],moveTransition:"transform 0s ease-out",appendTo:document.body}},moduleOptions(){return apos.modules[apos.area.widgetManagers[this.type]]},defaultOptions(){return this.moduleOptions.defaultOptions},editorOptions(){var t,n,i;let e=at(this.options);return e={...e,...this.enhanceStyles((t=e.styles)!=null&&t.length?e.styles:this.defaultOptions.styles)},delete e.styles,Object.keys(this.defaultOptions).forEach(o=>{o!=="styles"&&(e[o]=e[o]!==void 0?e[o]:this.defaultOptions[o])}),e.className=e.className!==void 0?e.className:this.moduleOptions.className,e.toolbar.includes("styles")&&(e.toolbar=e.toolbar.filter(o=>o!=="styles"),e.marks.length&&(e.toolbar=["marks",...e.toolbar]),e.nodes.length&&(e.toolbar=["nodes",...e.toolbar])),(n=e.toolbar)!=null&&n.some(o=>o==="table")&&((i=e.insert)!=null&&i.some(o=>o==="table")||(e.insert=[...e.insert||[],"table"]),e.toolbar=e.toolbar.filter(o=>o!=="table")),e},autofocus(){return!this.modelValue.content.length},initialContent(){const e=this.transformNamedAnchors(this.modelValue.content);if(e.length)return e;const t=this.editorOptions.nodes.length?this.editorOptions.nodes.find(i=>i.def):this.editorOptions.marks.length?this.editorOptions.marks.find(i=>i.def):null,n=t.class?` class="${t.class}"`:"";return`<${t.tag}${n}></${t.tag}>`},toolbar(){return this.editorOptions.toolbar},tools(){return this.moduleOptions.tools},insert(){return this.editorOptions.insert||[]},insertMenu(){return this.moduleOptions.insertMenu},isVisuallyEmpty(){var n;const e=document.createElement("div");let t=!1;if(e.innerHTML=(n=this.modelValue.content)==null?void 0:n.trim(),this.editor){const i=this.editor.getJSON();t=!!(i!=null&&i.content.filter(o=>!["paragraph"].includes(o.type)).length)}return!e.textContent&&!t},editorModifiers(){const e=[];return this.isVisuallyEmpty&&e.push("apos-is-visually-empty"),(this.placeholderText&&this.moduleOptions.placeholder||this.insert.length)&&this.isFocused&&this.showPlaceholder!==!1&&e.push("apos-show-initial-placeholder"),e},tiptapTextCommands(){return this.moduleOptions.tiptapTextCommands},tiptapTypes(){return this.moduleOptions.tiptapTypes},placeholderText(){return this.insert.length>0?this.moduleOptions.placeholderTextWithInsertMenu:this.moduleOptions.placeholderText||""}},watch:{suppressWidgetControls(e){e&&this.$emit("suppressWidgetControls")},isFocused(e){e?apos.bus.$emit("close-context-menus"):(this.suppressWidgetControls=!1,this.pending&&this.emitWidgetUpdate())},isShowingInsert(e){e&&this.focusInsertMenuItem(!1,0)}},mounted(){this.insertMenuKey=this.generateKey();const e=vye.extend(),t=[h1e,b1e,v1e,C1e,S1e,T1e,P1e,H1e,K1e,G1e,Q1e,tbe,u5,obe,sbe,rbe.configure({types:["heading","paragraph","defaultNode"]}),cbe,dbe,ube,hbe,mye.configure(this.tableOptions),gye,bye,yye,e.configure({placeholder:()=>this.$t(this.placeholderText),emptyNodeClass:"apos-is-empty"}),bA].filter(Boolean).concat(this.aposTiptapExtensions());this.ensureExtensionsPriority(t),this.editor=new r1e({content:this.initialContent,autofocus:this.autofocus,onUpdate:this.editorUpdate,extensions:t,onFocus:()=>{this.isFocused=!0,this.$nextTick(()=>{this.showPlaceholder=!1})},onBlur:()=>{this.isFocused=!1,this.$nextTick(()=>{this.showPlaceholder=!0})},onSelectionUpdate:({editor:n})=>{this.$nextTick(()=>{n.view.state.selection.empty||(this.suppressWidgetControls=!0)})}}),apos.bus.$on("apos-refreshing",this.onAposRefreshing)},beforeUnmount(){this.editor.destroy(),apos.bus.$off("apos-refreshing",this.onAposRefreshing)},methods:{showTableControls(){var e;return((e=this.editor)==null?void 0:e.isActive("table"))??!1},openPopover(){this.openedPopover=!0},onBtnBlur(e){var t;this.openedPopover||(t=this.$refs.toolbar)!=null&&t.contains(e.relatedTarget)||this.closeToolbar()},onBubbleHide(){apos.bus.$emit("close-context-menus","richText")},generateKey(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)},handleUIKeydown(e){e.key==="Escape"?this.doSuppressInsertMenu():this.suppressInsertMenu=!1,this.suppressWidgetControls=!0},doSuppressInsertMenu(){this.suppressInsertMenu=!0,this.activeInsertMenuComponent=!1,this.insertMenuKey=this.generateKey(),this.editor.commands.focus()},onAposRefreshing(e){this.activeInsertMenuComponent&&(e.refresh=!1)},async editorUpdate(){this.docId===window.apos.adminBar.contextId&&apos.bus.$emit("context-editing"),!this.pending&&(this.pending=setTimeout(()=>{this.emitWidgetUpdate()},1e3))},emitWidgetUpdate(){this.pending&&(clearTimeout(this.pending),this.pending=null);const e=this.editor.getHTML(),t=this.docFields.data;t.content=e,this.$emit("update",{...t})},transformNamedAnchors(e){const t=document.createElement("div");t.innerHTML=e;const n=t.querySelectorAll("a[name]");for(const i of n){const o=i.getAttribute("id")||i.getAttribute("name");if(typeof o!="string"||!o.length)continue;const s=document.createElement("span");if(s.setAttribute("id",o),i.removeAttribute("id"),i.removeAttribute("name"),i.children.length){for(;i.firstElementChild;)s.append(i.firstElementChild);i.attributes.length?i.prepend(s):i.replaceWith(s),s.innerText.length||(s.innerText="")}else{let r=i;for(;!(r.nodeType===Node.TEXT_NODE&&r.textContent.length>0);)r=_ye(r);r?(r.parentNode.insertBefore(s,r),s.append(r)):(s.innerText="",i.prepend(s))}}return t.innerHTML},enhanceStyles(e){const t=this;return(e||[]).forEach(o=>{o.options={};for(const s in t.tiptapTextCommands)t.tiptapTextCommands[s].includes(o.tag)&&(o.command=s);for(const s in t.tiptapTypes)t.tiptapTypes[s].includes(o.tag)&&(o.type=s);if(o.type==="heading"){const s=parseInt(o.tag.split("h")[1]);o.options.level=s}o.class&&(o.options.class=o.class),o.type||apos.notify("apostrophe:richTextStyleConfigWarning",{type:"warning",dismiss:!0,icon:"text-box-remove-icon",interpolate:{label:o.label,tag:o.tag}})}),!!!e.find(o=>o.def)&&e.length&&(e.filter(o=>o.type==="paragraph").length?e.filter(o=>o.type==="paragraph")[0].def=!0:e[0].def=!0),{nodes:e.filter(o=>o.command==="setNode"),marks:e.filter(o=>o.command!=="setNode")}},localizeStyle(e){return{...e,label:this.$t(e.label)}},aposTiptapExtensions(){return(apos.tiptapExtensions||[]).map(e=>e({...this.editorOptions,nodes:this.editorOptions.nodes.map(this.localizeStyle),marks:this.editorOptions.marks.map(this.localizeStyle),types:this.tiptapTypes}))},ensureExtensionsPriority(e){const t=e.findIndex(n=>n.name==="defaultNode");if(t>0){const n=e.splice(t,1)[0];e.unshift(n)}return e},showFloatingMenu({state:e,oldState:t}){const n=JSON.stringify(e==null?void 0:e.doc.toJSON())!==JSON.stringify(t==null?void 0:t.doc.toJSON()),{$to:i}=e.selection;return!this.insertMenu||!this.insert.length||!n||i.nodeAfter&&i.nodeAfter.text||this.suppressInsertMenu?(this.isShowingInsert=!1,!1):e.selection.empty&&i.nodeBefore&&i.nodeBefore.text&&i.nodeBefore.text.slice(-1)==="/"?(this.isShowingInsert=!0,!0):(this.isShowingInsert=!1,!1)},closeInsertMenu(e){["ArrowUp","ArrowDown","Enter"," "].includes(e.key)||this.activeInsertMenuComponent||(this.editor.commands.focus(),this.activeInsertMenuComponent=!1,e.key.length===1&&this.editor.commands.insertContent(e.key))},focusInsertMenuItem(e=!1,t){var s;if(this.activeInsertMenuComponent)return;const n=Array.from(this.$refs.insertMenu.$el.querySelectorAll("[data-insert-menu-item]")),i=n.findIndex(r=>r===document.activeElement);let o=e?i-1:i+1;o>=n.length&&(o=0),o<0&&(o=n.length-1),(s=n[t||o])==null||s.focus()},setActiveInsertMenu(e=!0){this.activeInsertMenuComponent=e},closeToolbar(){this.openedPopover=!1,this.editor.chain().focus().run()}}};function _ye(e){if(e.firstChild)return e.firstChild;for(;e;){if(e.nextSibling)return e.nextSibling;e=e.parentNode}return null}const Cye=["aria-controls"],Aye={ref:"toolbar",class:"apos-rich-text-toolbar__inner"},kye={class:"apos-rich-text-insert-menu-heading"};function Sye(e,t,n,i,o,s){const r=E("AposContextMenuDialog"),a=E("bubble-menu"),l=E("AposTiptapInsertItem"),c=E("floating-menu"),u=E("editor-content"),f=E("AposTiptapTableControls");return p(),y("div",{"aria-controls":`insert-menu-${n.modelValue._id}`,onKeydown:t[3]||(t[3]=(...m)=>s.handleUIKeydown&&s.handleUIKeydown(...m))},[o.editor?(p(),R(a,{key:0,"plugin-key":"richTextMenu",class:"bubble-menu","tippy-options":{maxWidth:"none",duration:300,zIndex:999,animation:"fade",inertia:!0,placement:"bottom",hideOnClick:!1,onHide:s.onBubbleHide},editor:o.editor},{default:Q(()=>[D(r,{"menu-placement":"top","class-list":"apos-rich-text-toolbar","has-tip":!1},{default:Q(()=>[A("div",Aye,[(p(!0),y(Ce,null,Ie(s.toolbar,(m,g)=>(p(),R(et(s.tools[m]&&s.tools[m].component||"AposTiptapUndefined"),{key:m+"-"+g,name:m,tool:s.tools[m],options:s.editorOptions,editor:o.editor,onOpenPopover:s.openPopover,onClose:s.closeToolbar,onFocusout:s.onBtnBlur},null,40,["name","tool","options","editor","onOpenPopover","onClose","onFocusout"]))),128))],512)]),_:1})]),_:1},8,["tippy-options","editor"])):x("",!0),o.editor?(p(),R(c,{id:`insert-menu-${n.modelValue._id}`,ref:"insertMenu",key:o.insertMenuKey,"plugin-key":"insertMenu",class:"apos-rich-text-insert-menu","tippy-options":{duration:100,zIndex:999,placement:"bottom-start"},"should-show":s.showFloatingMenu,editor:o.editor,role:"listbox",tabindex:"0"},{default:Q(()=>[A("div",kye,$(e.$t("apostrophe:richTextInsertMenuHeading")),1),A("ul",{class:"apos-rich-text-insert-menu-wrapper",onKeydown:[t[0]||(t[0]=Qe(Ue(m=>s.focusInsertMenuItem(!0),["prevent"]),["arrow-up"])),t[1]||(t[1]=Qe(Ue(m=>s.focusInsertMenuItem(),["prevent"]),["arrow-down"])),t[2]||(t[2]=(...m)=>s.closeInsertMenu&&s.closeInsertMenu(...m))]},[(p(!0),y(Ce,null,Ie(s.insert,(m,g)=>(p(),y("li",{key:`${m}-${g}`},[D(l,{name:m,"menu-item":s.insertMenu[m],editor:o.editor,"editor-options":s.editorOptions,onDone:s.doSuppressInsertMenu,onSetActiveInsertMenu:s.setActiveInsertMenu},null,8,["name","menu-item","editor","editor-options","onDone","onSetActiveInsertMenu"])]))),128))],32)]),_:1},8,["id","should-show","editor"])):x("",!0),A("div",{class:te(["apos-rich-text-editor__editor",s.editorModifiers])},[D(u,{editor:o.editor,class:te(s.editorOptions.className)},null,8,["editor","class"])],2),o.showPlaceholder!==null&&(!s.placeholderText||!o.isFocused)?(p(),y("div",{key:2,class:te(["apos-rich-text-editor__editor_after",s.editorModifiers])},$(e.$t("apostrophe:emptyRichTextWidget")),3)):x("",!0),o.editor?(p(),R(c,{key:3,"should-show":s.showTableControls,"tippy-options":s.tableTippyOptions,editor:o.editor,"plugin-key":"tableMenu",role:"listbox",tabindex:"0"},{default:Q(()=>[D(f,{editor:o.editor},null,8,["editor"])]),_:1},8,["should-show","tippy-options","editor"])):x("",!0)],40,Cye)}const xye=I(wye,[["render",Sye],["__scopeId","data-v-bb1f594a"]]),Mye={name:"AposTiptapAnchor",mixins:[lr],props:{name:{type:String,required:!0},tool:{type:Object,required:!0},editor:{type:Object,required:!0}},emits:["close"],data(){return{generation:1,hasAnchorOnOpen:!1,triggerValidation:!1,docFields:{data:{}},formModifiers:["small","margin-micro"],originalSchema:[{name:"anchor",label:this.$t("apostrophe:anchorId"),type:"string",required:!0}]}},computed:{button(){return{...this.buttonActive?{class:"apos-is-active"}:{},type:"rich-text",label:this.tool.label,"icon-only":!!this.tool.icon,icon:this.tool.icon||!1,"icon-size":this.tool.iconSize||16,modifiers:["no-border","no-motion"],tooltip:{content:this.tool.label,placement:"top",delay:650}}},buttonActive(){return this.editor.isActive("anchor")},lastSelectionTime(){return this.editor.view.input.lastSelectionTime},hasSelection(){const{state:e}=this.editor,{selection:t}=this.editor.state,{from:n,to:i}=t;return e.doc.textBetween(n,i,"")!==""},schema(){return this.originalSchema}},watch:{"editor.view.input.lastSelectionTime":{handler(){this.populateFields()}},hasSelection(e){e||this.close()}},async mounted(){await this.evaluateExternalConditions()},methods:{removeAnchor(){this.docFields.data={},this.editor.commands.unsetAnchor(),this.editor.chain().focus().blur().run(),this.close()},close(){this.$refs.contextMenu.hide()},async save(){this.triggerValidation=!0,await this.$nextTick(),!this.docFields.hasErrors&&(this.editor.commands.setAnchor({id:this.docFields.data.anchor}),this.editor.chain().focus().blur().run(),this.close())},keyboardHandler(e){e.key==="Escape"&&this.close(),e.key==="Enter"&&(this.docFields.data.anchor&&(this.save(),this.close()),e.preventDefault())},async populateFields(){try{const e={anchor:this.editor.getAttributes("anchor").id};this.docFields.data={},this.schema.forEach(t=>{this.docFields.data[t.name]=e[t.name]||""})}finally{this.generation++}},async openPopover(){await this.populateFields(),this.evaluateConditions(),this.hasAnchorOnOpen=!!this.docFields.data.anchor,window.addEventListener("keydown",this.keyboardHandler)},closePopover(){window.removeEventListener("keydown",this.keyboardHandler),this.$emit("close")}}},Tye={class:"apos-anchor-control"},Eye={key:0,class:"apos-anchor-control__remove"},Oye={class:"apos-anchor-control__footer"};function $ye(e,t,n,i,o,s){const r=E("AposButton"),a=E("AposSchema"),l=E("AposContextMenu");return p(),y("div",Tye,[D(l,{ref:"contextMenu","menu-placement":"bottom-end",button:s.button,"rich-text-menu":!0,onOpen:s.openPopover,onClose:s.closePopover},{default:Q(()=>[A("div",{class:te(["apos-popover apos-anchor-control__dialog",{"apos-has-selection":s.hasSelection}])},[o.hasAnchorOnOpen?(p(),y("div",Eye,[D(r,{type:"quiet",label:"apostrophe:removeRichTextAnchor",onClick:s.removeAnchor},null,8,["onClick"])])):x("",!0),(p(),R(a,{key:s.lastSelectionTime,modelValue:o.docFields,"onUpdate:modelValue":[t[0]||(t[0]=c=>o.docFields=c),t[1]||(t[1]=c=>e.evaluateConditions())],schema:s.schema,"trigger-validation":o.triggerValidation,modifiers:o.formModifiers,generation:o.generation,"following-values":e.followingValues(),"conditional-fields":e.conditionalFields},null,8,["modelValue","schema","trigger-validation","modifiers","generation","following-values","conditional-fields"])),A("footer",Oye,[D(r,{type:"default",label:"apostrophe:cancel",modifiers:o.formModifiers,onClick:s.close},null,8,["modifiers","onClick"]),D(r,{type:"primary",label:"apostrophe:save",modifiers:o.formModifiers,onClick:s.save},null,8,["modifiers","onClick"])])],2)]),_:1},8,["button","onOpen","onClose"])])}const Iye=I(Mye,[["render",$ye],["__scopeId","data-v-d139dcea"]]),Lye={name:"AposTiptapButton",props:{name:{type:String,required:!0},editor:{type:Object,required:!0},tool:{type:Object,required:!0}},computed:{active(){return this.tool.isActive?this.editor.isActive(this.tool.isActive):this.editor.isActive(this.name,this.tool.commandParameters||{})}},methods:{command(){return this.tool.command||this.name},click(){this.editor.commands[this.command()](this.tool.commandParameters||{}),this.editor.commands.focus()}}};function Dye(e,t,n,i,o,s){const r=E("AposButton");return p(),R(r,{type:"rich-text",class:te(["apos-rich-text-editor__control",{"apos-is-active":s.active}]),label:n.tool.label,"icon-only":!!n.tool.icon,icon:n.tool.icon||!1,"icon-size":n.tool.iconSize||16,modifiers:["no-border","no-motion"],tooltip:{content:n.tool.label,placement:"top",delay:650},onClick:s.click},null,8,["class","label","icon-only","icon","icon-size","tooltip","onClick"])}const Rye=I(Lye,[["render",Dye]]),Pye={class:"apos-color-control"},Hye={class:"text-color-component"},Vye={class:"apos-color-control__footer"},zye={__name:"AposTiptapColor",props:{editor:{type:Object,required:!0},tool:{type:Object,required:!0},options:{type:Object,default:()=>({})},modelValue:{type:Object,default:()=>({})}},emits:["open-popover","close"],setup(e,{emit:t}){const n=e,i=t,o=window.apos.modules["@apostrophecms/rich-text-widget"],s=Ve(""),r=Ve("#000000"),a=Ve(null),l=Ve(null),c=Je(()=>({...o,...n.options}).color),u=Je(()=>!n.editor.state.selection.empty);Fo(()=>n.editor.state.selection,()=>{if(u.value){const _=n.editor.getAttributes("textStyle").color;s.value=_||"#000000",r.value=s.value}else s.value="#000000",r.value=s.value},{deep:!0,immediate:!0});function f(){addEventListener("keydown",g),i("open-popover")}function m(){removeEventListener("keydown",g),i("close")}function g(_){["Escape","Enter"].includes(_.key)&&v()}function v(){a.value&&(n.editor.chain().focus().blur().run(),a.value.hide())}function w(_){s.value=_,r.value=s.value,document.activeElement.tagName==="INPUT"?n.editor.chain().setColor(_).run():n.editor.chain().focus().setColor(_).run()}return(_,k)=>{const L=E("AposColorCheckerboard"),P=E("AposIndicator"),M=E("AposButton"),F=E("AposColor"),z=E("AposContextMenu");return p(),y("div",Pye,[D(z,{ref_key:"contextMenu",ref:a,"menu-placement":"bottom-end","center-tip-el":l.value,"rich-text-menu":!0,onOpen:f,onClose:m},{button:Q(ee=>[D(M,{type:"rich-text",class:"apos-color-button apos-rich-text-editor__control","icon-only":!1,icon:"circle-icon","icon-fill":r.value,label:"apostrophe:richTextColor",modifiers:["no-border","no-motion"],tooltip:{content:"apostrophe:richTextColor",placement:"top",delay:650},onClick:ee.onClick},{label:Q(()=>[D(L,{class:"apos-color-control__checkerboard"}),D(P,{ref_key:"centerTipEl",ref:l,icon:"chevron-down-icon"},null,512)]),_:2},1032,["icon-fill","onClick"])]),default:Q(()=>[A("div",{class:te(["apos-popover apos-color-control__dialog",{"apos-has-selection":u.value}])},[A("div",Hye,[D(F,{options:c.value,"model-value":s.value,"onUpdate:modelValue":w},null,8,["options","model-value"])]),A("footer",Vye,[D(M,{type:"primary",label:"apostrophe:close",modifiers:["small","margin-micro"],onClick:v})])],2)]),_:1},8,["center-tip-el"])])}}},Nye=I(zye,[["__scopeId","data-v-3807a0cb"]]),Bye={name:"AposTiptapDivider",props:{name:{type:String,required:!0}}},Fye={class:"apos-rich-text-editor__control apos-rich-text-editor__control--divider"};function Wye(e,t,n,i,o,s){return p(),y("div",Fye," | ")}const Uye=I(Bye,[["render",Wye],["__scopeId","data-v-2cc31cd1"]]),jye={name:"AposTiptapImage",props:{tool:{type:Object,required:!0},editor:{type:Object,required:!0}},emits:["open-popover","close"],computed:{button(){return{...this.buttonActive?{class:"apos-is-active"}:{},type:"rich-text",label:this.tool.label,"icon-only":!!this.tool.icon,icon:this.tool.icon||!1,"icon-size":this.tool.iconSize||16,modifiers:["no-border","no-motion"],tooltip:{content:this.tool.label,placement:"top",delay:650}}},attributes(){return this.editor.getAttributes("image")},buttonActive(){return this.attributes.imageId},hasSelection(){const{state:e}=this.editor,{selection:t}=this.editor.state,{from:n,to:i}=t,o=e.doc.textBetween(n,i,""),{content:s=[]}=t.content().content,[{type:r}={}]=s;return o!==""||(r==null?void 0:r.name)==="image"}},methods:{close(){this.$refs.contextMenu.hide()}}},qye={class:"apos-image-control"};function Kye(e,t,n,i,o,s){const r=E("AposImageControlDialog"),a=E("AposContextMenu");return p(),y("div",qye,[D(a,{ref:"contextMenu","menu-placement":"bottom-end",button:s.button,"rich-text-menu":!0,onOpen:t[0]||(t[0]=l=>e.$emit("open-popover")),onClose:t[1]||(t[1]=l=>e.$emit("close"))},{default:Q(()=>[D(r,{editor:n.editor,"has-selection":s.hasSelection,onClose:s.close},null,8,["editor","has-selection","onClose"])]),_:1},8,["button"])])}const Gye=I(jye,[["render",Kye],["__scopeId","data-v-3f3895b3"]]),Jye={__name:"AposTiptapImportTable",props:{tool:{type:Object,default:null},editor:{type:Object,required:!0}},emits:["done","close","before-commands"],setup(e,{emit:t}){const n=e,i=t,o=Je(()=>!n.tool);As(()=>{o.value&&r()});const s=Ve(null);function r(){s.value.click()}async function a({target:c}){i("before-commands");const[u]=c.files,f=new FormData;f.append("file",u);try{const m=await apos.http.post("/api/v1/@apostrophecms/rich-text-widget/generate-csv-table",{body:f});n.editor.commands.insertContent(m)}catch{apos.notify("apostrophe:error",{type:"error"})}o.value&&i("done")}function l(){i("close")}return(c,u)=>{const f=E("AposButton");return p(),y("div",{class:te(["apos-import-control",{"apos-import-control__hidden":o.value}])},[e.tool?(p(),R(f,{key:0,type:"rich-text",label:e.tool.label,"icon-only":!!e.tool.icon,icon:e.tool.icon||!1,"icon-size":e.tool.iconSize||16,modifiers:["no-border","no-motion"],tooltip:{content:e.tool.label,placement:"top",delay:650},onClick:r},null,8,["label","icon-only","icon","icon-size","tooltip"])):x("",!0),A("input",{ref_key:"aposTiptapUpload",ref:s,tabindex:"-1",class:"apos-sr-only",type:"file",accept:".csv",onInput:a,onCancel:l},null,544)],2)}}},Yye={class:"apos-rich-text-insert-menu-item",role:"option","data-insert-menu-item":""},Zye={class:"apos-rich-text-insert-menu-icon"},Xye={class:"apos-rich-text-insert-menu-label"},Qye={class:"apos-rich-text-insert-menu-label__title"},e0e={class:"apos-rich-text-insert-menu-label__desc"},t0e={__name:"AposTiptapInsertBtn",props:{name:{type:String,required:!0},menuItem:{type:Object,required:!0}},setup(e){const t=e;return(n,i)=>{const o=E("AposIndicator");return p(),y("button",Yye,[A("div",Zye,[D(o,{icon:t.menuItem.icon,"icon-size":24,class:"apos-button__icon","fill-color":"currentColor"},null,8,["icon"])]),A("div",Xye,[A("h4",Qye,$(n.$t(t.menuItem.label)),1),A("p",e0e,$(n.$t(t.menuItem.description)),1)])])}}},n0e={__name:"AposTiptapInsertItem",props:{name:{type:String,required:!0},menuItem:{type:Object,required:!0},editor:{type:Object,required:!0},editorOptions:{type:Object,required:!0}},emits:["set-active-insert-menu","done"],setup(e,{emit:t}){const n=e,i=t,o=Ve(!1),s=Ve(null),r=Je(()=>!!(n.menuItem.noPopover&&n.menuItem.component&&o.value));function a(){if(n.menuItem.component){i("set-active-insert-menu",!0),o.value=!0;return}l(),n.editor.commands[n.menuItem.action||n.name](),n.editor.commands.focus()}function l(){var v;const m=n.editor.state,{$to:g}=m.selection;if(m.selection.empty&&((v=g==null?void 0:g.nodeBefore)!=null&&v.text)&&g.nodeBefore.text.slice(-1)==="/"){const _=n.editor.view.state.selection.$anchor.pos;n.editor.commands.setTextSelection({from:_-1,to:_}),n.editor.commands.deleteSelection()}}function c(){l(),i("set-active-insert-menu",!1),o.value=!1,s.value&&s.value.hide()}function u(){i("set-active-insert-menu",!0)}function f(){i("set-active-insert-menu",!1)}return(m,g)=>{const v=E("AposTiptapInsertBtn"),w=E("AposContextMenu");return p(),y(Ce,null,[e.menuItem.component&&!e.menuItem.noPopover?(p(),R(w,{key:0,ref_key:"contextMenu",ref:s,"menu-placement":"bottom-end","rich-text-menu":!0,onOpen:u,onClose:f},{button:Q(_=>[D(v,{name:e.name,"menu-item":e.menuItem,onClick:_.onClick},null,8,["name","menu-item","onClick"])]),default:Q(()=>[(p(),R(et(e.menuItem.component),{editor:e.editor,options:e.editorOptions,onDone:c,onClose:c,onBeforeCommands:l},null,40,["editor","options"]))]),_:1},512)):(p(),R(v,{key:1,name:e.name,"menu-item":e.menuItem,onClick:g[0]||(g[0]=_=>a())},null,8,["name","menu-item"])),r.value?(p(),R(et(e.menuItem.component),{key:2,active:!0,editor:e.editor,options:e.editorOptions,onDone:c,onClose:c,onBeforeCommands:l},null,40,["editor","options"])):x("",!0)],64)}}},i0e={name:"AposTiptapLink",mixins:[lr],props:{name:{type:String,required:!0},tool:{type:Object,required:!0},editor:{type:Object,required:!0}},emits:["open-popover","close"],data(){const e=apos.modules["@apostrophecms/rich-text-widget"];return{generation:1,href:null,hasLinkOnOpen:!1,triggerValidation:!1,docFields:{data:{}},formModifiers:["micro"],originalSchema:e.linkSchema.filter(t=>!t.extensions||t.extensions.includes("Link"))}},computed:{button(){return{...this.buttonActive?{class:"apos-is-active"}:{},type:"rich-text",label:this.tool.label,"icon-only":!!this.tool.icon,icon:this.tool.icon||!1,"icon-size":this.tool.iconSize||16,modifiers:["no-border","no-motion"],tooltip:{content:this.tool.label,placement:"top",delay:650}}},attributes(){return this.editor.getAttributes("link")},buttonActive(){return this.attributes.href},lastSelectionTime(){return this.editor.view.input.lastSelectionTime},hasSelection(){const{state:e}=this.editor,{selection:t}=this.editor.state,{from:n,to:i}=t;return e.doc.textBetween(n,i,"")!==""},schema(){return this.originalSchema},schemaHtmlAttributes(){return this.schema.filter(e=>!!e.htmlAttribute)}},watch:{"attributes.href":{handler(e,t){e!==t&&this.close()}},hasSelection(e,t){e||this.close()}},async mounted(){await this.evaluateExternalConditions()},methods:{removeLink(){this.docFields.data={},this.editor.commands.unsetLink(),this.editor.chain().focus().blur().run(),this.close()},close(){this.$refs.contextMenu.hide()},async save(){var n,i;if(this.triggerValidation=!0,await this.$nextTick(),this.docFields.hasErrors)return;if(this.docFields.data.linkTo!=="_url"){const o=this.docFields.data[`_${this.docFields.data.linkTo}`][0];this.docFields.data.href=`#apostrophe-permalink-${o.aposDocId}?updateTitle=${this.docFields.data.updateTitle?1:0}`}this.docFields.data.target&&!this.docFields.data.href&&delete this.docFields.data.target;const e=this.schemaHtmlAttributes.reduce((o,s)=>{const r=this.docFields.data[s.name];return s.type==="checkboxes"&&!(r!=null&&r[0])?o:s.type==="boolean"?(o[s.htmlAttribute]=r===!0?"":null,o):(o[s.htmlAttribute]=Array.isArray(r)?r[0]:r,o)},{});switch(this.docFields.data.linkTo){case"_url":{e.title=this.docFields.data.hrefTitle||this.docFields.data.caption;break}default:{const o=(n=this.docFields.data[`_${this.docFields.data.linkTo}`])==null?void 0:n[0];e.title=this.docFields.data.title||(o==null?void 0:o.title)}}const t=this.schemaHtmlAttributes.find(o=>o.htmlAttribute==="rel");if((i=this.docFields.data.target)!=null&&i.includes("_blank")&&this.docFields.data.linkTo==="_url"){let o="noopener noreferrer";t&&(o+=` ${this.docFields.data[t.htmlAttribute]||""}`),o=new Set(o.trim().split(" ").filter(Boolean)),e.rel=[...o].join(" ")}else e.rel=t&&this.docFields.data[t.htmlAttribute]||null;e.href=this.docFields.data.href,this.editor.commands.setLink(e),this.editor.chain().focus().blur().run(),this.close()},keyboardHandler(e){e.key==="Escape"&&this.close(),e.key==="Enter"&&((this.docFields.data.href||e.metaKey)&&(this.save(),this.close()),e.preventDefault())},async populateFields(){try{const e={...this.attributes};this.docFields.data={},this.schema.forEach(n=>{if(n.htmlAttribute&&n.type==="checkboxes"){this.docFields.data[n.name]=e[n.htmlAttribute]?[e[n.htmlAttribute]]:[];return}if(n.htmlAttribute&&n.type==="boolean"){this.docFields.data[n.name]=e[n.htmlAttribute]===null?null:e[n.htmlAttribute]==="";return}if(n.htmlAttribute){this.docFields.data[n.name]=e[n.htmlAttribute]||"";return}this.docFields.data[n.name]=e[n.name]||""});const t=this.docFields.data.href.match(/^#apostrophe-permalink-(.*)\?updateTitle=(\d)$/);if(!t){this.docFields.data.updateTitle=!0,this.docFields.data.linkTo="_url";return}this.docFields.data.href="";try{const n=await apos.http.get(`/api/v1/@apostrophecms/doc/${t[1]}`,{busy:!0,draft:!0});switch(this.docFields.data.linkTo=n.slug.startsWith("/")?"@apostrophecms/any-page-type":n.type,this.docFields.data[`_${this.docFields.data.linkTo}`]=[n],this.docFields.data.updateTitle=!!parseInt(t[2]),this.docFields.data.linkTo){case"_url":{this.docFields.data.hrefTitle=e.title,this.docFields.data.title="";break}default:this.docFields.data.title=n!=null&&n.title&&e.title===(n==null?void 0:n.title)?"":e.title,this.docFields.data.hrefTitle=""}}catch(n){if(n.status===404)this.docFields.data.updateTitle=!0,this.docFields.linkTo="url";else throw n}}finally{this.generation++}this.evaluateConditions()},async openPopover(){this.hasLinkOnOpen=!!this.attributes.href,window.addEventListener("keydown",this.keyboardHandler),await this.populateFields(),this.evaluateConditions(),this.$emit("open-popover")},closePopover(){window.removeEventListener("keydown",this.keyboardHandler),this.$emit("close")}}},o0e={class:"apos-link-control"},s0e={key:0,class:"apos-link-control__remove"},r0e={class:"apos-link-control__footer"};function a0e(e,t,n,i,o,s){const r=E("AposButton"),a=E("AposSchema"),l=E("AposContextMenu");return p(),y("div",o0e,[D(l,{ref:"contextMenu","menu-placement":"bottom-end",button:s.button,"rich-text-menu":!0,onOpen:s.openPopover,onClose:s.closePopover},{default:Q(()=>[A("div",{class:te(["apos-link-control__dialog",{"apos-has-selection":s.hasSelection}])},[o.hasLinkOnOpen?(p(),y("div",s0e,[D(r,{type:"quiet",label:"apostrophe:removeLink",onClick:s.removeLink},null,8,["onClick"])])):x("",!0),(p(),R(a,{key:s.lastSelectionTime,modelValue:o.docFields,"onUpdate:modelValue":[t[0]||(t[0]=c=>o.docFields=c),t[1]||(t[1]=c=>e.evaluateConditions())],schema:s.schema,"trigger-validation":o.triggerValidation,modifiers:o.formModifiers,generation:o.generation,"following-values":e.followingValues(),"conditional-fields":e.conditionalFields},null,8,["modelValue","schema","trigger-validation","modifiers","generation","following-values","conditional-fields"])),A("footer",r0e,[D(r,{type:"default",label:"apostrophe:cancel",modifiers:["small"],onClick:s.close},null,8,["onClick"]),D(r,{type:"primary",label:"apostrophe:save",modifiers:["small"],disabled:o.docFields.hasErrors,onClick:s.save},null,8,["disabled","onClick"])])],2)]),_:1},8,["button","onOpen","onClose"])])}const l0e=I(i0e,[["render",a0e],["__scopeId","data-v-6717ff47"]]),c0e={name:"AposTiptapMarks",mixins:[lr],props:{name:{type:String,required:!0},tool:{type:Object,required:!0},editor:{type:Object,required:!0},options:{type:Object,default(){return{}}}},emits:["open-popover","close"],data(){return{classes:this.options.marks.map(e=>e.class)}},computed:{button(){return{type:"rich-text",label:this.buttonLabel,icon:this.tool.icon||!1,"icon-size":this.tool.iconSize||16,modifiers:["no-border","no-motion"],tooltip:{content:this.tool.label,placement:"top",delay:650}}},activeClasses(){let e=[];const{selection:t}=this.editor.state,n=t.content();i(n.content);function i(o){o.forEach(s=>{var r,a;s.attrs.class&&(e=e.concat(s.attrs.class.split(" "))),(r=s==null?void 0:s.marks)!=null&&r.length&&i(s.marks),(a=s==null?void 0:s.content)!=null&&a.content&&i(s.content.content)})}return e.filter(o=>this.classes.includes(o))},buttonLabel(){var t;let e;return this.activeClasses.length>1&&(e=this.$t("apostrophe:richTextMarkMultipleStyles")),this.activeClasses.length===1&&(e=(t=this.options.marks.find(n=>n.class===this.activeClasses[0]))==null?void 0:t.label),e||this.$t("apostrophe:richTextMarkApplyStyles")},hasSelection(){const{state:e}=this.editor,{selection:t}=this.editor.state,{from:n,to:i}=t;return e.doc.textBetween(n,i,"")!==""}},watch:{hasSelection(e){e||this.close()}},methods:{toggleStyle(e){this.editor.commands[e.command](e.type,e.options||{}),this.editor.chain().focus().blur().run(),this.close()},click(){this.toggleOpen()},close(){this.$refs.contextMenu.hide()},openPopover(){this.$emit("open-popover")},closePopover(){this.$emit("close")}}},d0e={class:"apos-marks-control"},u0e={class:"apos-popover apos-marks-control__dialog"},h0e={class:"apos-marks-control__content-wrapper"},f0e={class:"apos-marks-control__items"},p0e=["onClick"];function m0e(e,t,n,i,o,s){const r=E("AposContextMenu");return p(),y("div",d0e,[D(r,{ref:"contextMenu","menu-placement":"bottom-start",button:s.button,"rich-text-menu":!0,"center-on-icon":!0,onOpen:s.openPopover,onClose:s.closePopover},{default:Q(()=>[A("div",u0e,[A("div",h0e,[A("ul",f0e,[(p(!0),y(Ce,null,Ie(n.options.marks,a=>(p(),y("li",{key:a.class,class:te(["apos-marks-control__item",{"apos-marks-control__item--is-active":s.activeClasses.includes(a.class)}])},[A("button",{class:"apos-marks-control__button",onClick:l=>s.toggleStyle(a)},[A("span",{class:te(["apos-marks-control__label",a.class])},$(e.$t(a.label)),3)],8,p0e)],2))),128))])])])]),_:1},8,["button","onOpen","onClose"])])}const g0e=I(c0e,[["render",m0e],["__scopeId","data-v-874ad806"]]),b0e={name:"AposTiptapStyles",props:{name:{type:String,required:!0},editor:{type:Object,required:!0},tool:{type:Object,required:!0},options:{type:Object,default(){return{}}}},emits:["close"],data(){return{multipleSelected:!1}},computed:{nodeOptions(){return[{label:"apostrophe:richTextNodeMultipleStyles",attr:this.multipleSelected?"":"hidden"},...this.options.nodes]},active(){var o,s;const{selection:e}=this.editor.state,t=e.content();let n=[];const i=this.options.nodes.map(r=>({type:r.type,class:r.options.class||null,level:r.options.level||null}));return(s=(o=t==null?void 0:t.content)==null?void 0:o.content)!=null&&s.length&&(n=t.content.content.map(r=>({name:r.type.name,class:r.attrs.class||null,level:r.attrs.level||null}))),n=n.filter((r,a,l)=>{const c=l.findIndex(u=>u.name===r.name&&u.class===r.class&&u.level===r.level);return a===c}),n.length?n.length>1?0:n[0].name==="defaultNode"?1:i.findIndex(a=>a.class===n[0].class&&a.type===n[0].name&&a.level===n[0].level)+1:1},moduleOptions(){return window.apos.modules["@apostrophecms/rich-text-widget"]}},watch:{active(e){e===0?this.multipleSelected=!0:this.multipleSelected=!1}},methods:{setStyle(e){const t=this.nodeOptions[e.target.value];this.editor.commands[t.command](t.type,t.options||{}),this.editor.chain().focus().blur().run(),this.$emit("close")}}},y0e={class:"apos-tiptap-select"},v0e=["aria-label","value"],w0e=["value","hidden"];function _0e(e,t,n,i,o,s){const r=E("chevron-down-icon"),a=xi("apos-tooltip");return p(),y("div",y0e,[(p(),R(et(n.tool.icon),{size:16,class:"apos-tiptap-select__type-icon","fill-color":"currentColor"})),Ke((p(),y("select",{"aria-label":e.$t(n.tool.label),value:s.active,class:"apos-tiptap-control apos-tiptap-control--select",style:Vt(`width:${e.$t(s.nodeOptions[s.active].label).length*6.5}px`),onChange:t[0]||(t[0]=(...l)=>s.setStyle&&s.setStyle(...l))},[(p(!0),y(Ce,null,Ie(s.nodeOptions,(l,c)=>(p(),y("option",{key:l.label,value:c,hidden:l.attr==="hidden"},$(e.$t(l.label)),9,w0e))),128))],44,v0e)),[[a,{content:e.$t(n.tool.label),placement:"top",delay:650}]]),D(r,{size:11,class:"apos-tiptap-select__icon","fill-color":"currentColor"})])}const C0e=I(b0e,[["render",_0e],["__scopeId","data-v-de4e8e87"]]),A0e={name:"AposTiptapUndefined",props:{name:{type:String,required:!0}}};function k0e(e,t,n,i,o,s){return p(),y("button",null,"Toolbar item has no definition: "+$(n.name),1)}const S0e=I(A0e,[["render",k0e],["__scopeId","data-v-d9e43fdf"]]);function Xn(e,t){x0e(e)&&(e="100%");const n=M0e(e);return e=t===360?e:Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:(t===360?e=(e<0?e%t+t:e%t)/parseFloat(String(t)):e=e%t/parseFloat(String(t)),e)}function ef(e){return Math.min(1,Math.max(0,e))}function x0e(e){return typeof e=="string"&&e.indexOf(".")!==-1&&parseFloat(e)===1}function M0e(e){return typeof e=="string"&&e.indexOf("%")!==-1}function _5(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function tf(e){return Number(e)<=1?`${Number(e)*100}%`:e}function Ua(e){return e.length===1?"0"+e:String(e)}function T0e(e,t,n){return{r:Xn(e,255)*255,g:Xn(t,255)*255,b:Xn(n,255)*255}}function VA(e,t,n){e=Xn(e,255),t=Xn(t,255),n=Xn(n,255);const i=Math.max(e,t,n),o=Math.min(e,t,n);let s=0,r=0;const a=(i+o)/2;if(i===o)r=0,s=0;else{const l=i-o;switch(r=a>.5?l/(2-i-o):l/(i+o),i){case e:s=(t-n)/l+(t<n?6:0);break;case t:s=(n-e)/l+2;break;case n:s=(e-t)/l+4;break}s/=6}return{h:s,s:r,l:a}}function B1(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*(6*n):n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function E0e(e,t,n){let i,o,s;if(e=Xn(e,360),t=Xn(t,100),n=Xn(n,100),t===0)o=n,s=n,i=n;else{const r=n<.5?n*(1+t):n+t-n*t,a=2*n-r;i=B1(a,r,e+1/3),o=B1(a,r,e),s=B1(a,r,e-1/3)}return{r:i*255,g:o*255,b:s*255}}function zA(e,t,n){e=Xn(e,255),t=Xn(t,255),n=Xn(n,255);const i=Math.max(e,t,n),o=Math.min(e,t,n);let s=0;const r=i,a=i-o,l=i===0?0:a/i;if(i===o)s=0;else{switch(i){case e:s=(t-n)/a+(t<n?6:0);break;case t:s=(n-e)/a+2;break;case n:s=(e-t)/a+4;break}s/=6}return{h:s,s:l,v:r}}function O0e(e,t,n){e=Xn(e,360)*6,t=Xn(t,100),n=Xn(n,100);const i=Math.floor(e),o=e-i,s=n*(1-t),r=n*(1-o*t),a=n*(1-(1-o)*t),l=i%6,c=[n,r,s,s,a,n][l],u=[a,n,n,r,s,s][l],f=[s,s,a,n,n,r][l];return{r:c*255,g:u*255,b:f*255}}function NA(e,t,n,i){const o=[Ua(Math.round(e).toString(16)),Ua(Math.round(t).toString(16)),Ua(Math.round(n).toString(16))];return i&&o[0].startsWith(o[0].charAt(1))&&o[1].startsWith(o[1].charAt(1))&&o[2].startsWith(o[2].charAt(1))?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function $0e(e,t,n,i,o){const s=[Ua(Math.round(e).toString(16)),Ua(Math.round(t).toString(16)),Ua(Math.round(n).toString(16)),Ua(L0e(i))];return o&&s[0].startsWith(s[0].charAt(1))&&s[1].startsWith(s[1].charAt(1))&&s[2].startsWith(s[2].charAt(1))&&s[3].startsWith(s[3].charAt(1))?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}function I0e(e,t,n,i){const o=e/100,s=t/100,r=n/100,a=i/100,l=255*(1-o)*(1-a),c=255*(1-s)*(1-a),u=255*(1-r)*(1-a);return{r:l,g:c,b:u}}function BA(e,t,n){let i=1-e/255,o=1-t/255,s=1-n/255,r=Math.min(i,o,s);return r===1?(i=0,o=0,s=0):(i=(i-r)/(1-r)*100,o=(o-r)/(1-r)*100,s=(s-r)/(1-r)*100),r*=100,{c:Math.round(i),m:Math.round(o),y:Math.round(s),k:Math.round(r)}}function L0e(e){return Math.round(parseFloat(e)*255).toString(16)}function FA(e){return Ki(e)/255}function Ki(e){return parseInt(e,16)}function D0e(e){return{r:e>>16,g:(e&65280)>>8,b:e&255}}const ly={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function R0e(e){let t={r:0,g:0,b:0},n=1,i=null,o=null,s=null,r=!1,a=!1;return typeof e=="string"&&(e=V0e(e)),typeof e=="object"&&(ji(e.r)&&ji(e.g)&&ji(e.b)?(t=T0e(e.r,e.g,e.b),r=!0,a=String(e.r).substr(-1)==="%"?"prgb":"rgb"):ji(e.h)&&ji(e.s)&&ji(e.v)?(i=tf(e.s),o=tf(e.v),t=O0e(e.h,i,o),r=!0,a="hsv"):ji(e.h)&&ji(e.s)&&ji(e.l)?(i=tf(e.s),s=tf(e.l),t=E0e(e.h,i,s),r=!0,a="hsl"):ji(e.c)&&ji(e.m)&&ji(e.y)&&ji(e.k)&&(t=I0e(e.c,e.m,e.y,e.k),r=!0,a="cmyk"),Object.prototype.hasOwnProperty.call(e,"a")&&(n=e.a)),n=_5(n),{ok:r,format:e.format||a,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:n}}const P0e="[-\\+]?\\d+%?",H0e="[-\\+]?\\d*\\.\\d+%?",Ur="(?:"+H0e+")|(?:"+P0e+")",F1="[\\s|\\(]+("+Ur+")[,|\\s]+("+Ur+")[,|\\s]+("+Ur+")\\s*\\)?",nf="[\\s|\\(]+("+Ur+")[,|\\s]+("+Ur+")[,|\\s]+("+Ur+")[,|\\s]+("+Ur+")\\s*\\)?",mo={CSS_UNIT:new RegExp(Ur),rgb:new RegExp("rgb"+F1),rgba:new RegExp("rgba"+nf),hsl:new RegExp("hsl"+F1),hsla:new RegExp("hsla"+nf),hsv:new RegExp("hsv"+F1),hsva:new RegExp("hsva"+nf),cmyk:new RegExp("cmyk"+nf),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function V0e(e){if(e=e.trim().toLowerCase(),e.length===0)return!1;let t=!1;if(ly[e])e=ly[e],t=!0;else if(e==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};let n=mo.rgb.exec(e);return n?{r:n[1],g:n[2],b:n[3]}:(n=mo.rgba.exec(e),n?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=mo.hsl.exec(e),n?{h:n[1],s:n[2],l:n[3]}:(n=mo.hsla.exec(e),n?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=mo.hsv.exec(e),n?{h:n[1],s:n[2],v:n[3]}:(n=mo.hsva.exec(e),n?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=mo.cmyk.exec(e),n?{c:n[1],m:n[2],y:n[3],k:n[4]}:(n=mo.hex8.exec(e),n?{r:Ki(n[1]),g:Ki(n[2]),b:Ki(n[3]),a:FA(n[4]),format:t?"name":"hex8"}:(n=mo.hex6.exec(e),n?{r:Ki(n[1]),g:Ki(n[2]),b:Ki(n[3]),format:t?"name":"hex"}:(n=mo.hex4.exec(e),n?{r:Ki(n[1]+n[1]),g:Ki(n[2]+n[2]),b:Ki(n[3]+n[3]),a:FA(n[4]+n[4]),format:t?"name":"hex8"}:(n=mo.hex3.exec(e),n?{r:Ki(n[1]+n[1]),g:Ki(n[2]+n[2]),b:Ki(n[3]+n[3]),format:t?"name":"hex"}:!1))))))))))}function ji(e){return typeof e=="number"?!Number.isNaN(e):mo.CSS_UNIT.test(e)}class pn{constructor(t="",n={}){if(t instanceof pn)return t;typeof t=="number"&&(t=D0e(t)),this.originalInput=t;const i=R0e(t);this.originalInput=t,this.r=i.r,this.g=i.g,this.b=i.b,this.a=i.a,this.roundA=Math.round(100*this.a)/100,this.format=n.format??i.format,this.gradientType=n.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=i.ok}isDark(){return this.getBrightness()<128}isLight(){return!this.isDark()}getBrightness(){const t=this.toRgb();return(t.r*299+t.g*587+t.b*114)/1e3}getLuminance(){const t=this.toRgb();let n,i,o;const s=t.r/255,r=t.g/255,a=t.b/255;return s<=.03928?n=s/12.92:n=Math.pow((s+.055)/1.055,2.4),r<=.03928?i=r/12.92:i=Math.pow((r+.055)/1.055,2.4),a<=.03928?o=a/12.92:o=Math.pow((a+.055)/1.055,2.4),.2126*n+.7152*i+.0722*o}getAlpha(){return this.a}setAlpha(t){return this.a=_5(t),this.roundA=Math.round(100*this.a)/100,this}isMonochrome(){const{s:t}=this.toHsl();return t===0}toHsv(){const t=zA(this.r,this.g,this.b);return{h:t.h*360,s:t.s,v:t.v,a:this.a}}toHsvString(){const t=zA(this.r,this.g,this.b),n=Math.round(t.h*360),i=Math.round(t.s*100),o=Math.round(t.v*100);return this.a===1?`hsv(${n}, ${i}%, ${o}%)`:`hsva(${n}, ${i}%, ${o}%, ${this.roundA})`}toHsl(){const t=VA(this.r,this.g,this.b);return{h:t.h*360,s:t.s,l:t.l,a:this.a}}toHslString(){const t=VA(this.r,this.g,this.b),n=Math.round(t.h*360),i=Math.round(t.s*100),o=Math.round(t.l*100);return this.a===1?`hsl(${n}, ${i}%, ${o}%)`:`hsla(${n}, ${i}%, ${o}%, ${this.roundA})`}toHex(t=!1){return NA(this.r,this.g,this.b,t)}toHexString(t=!1){return"#"+this.toHex(t)}toHex8(t=!1){return $0e(this.r,this.g,this.b,this.a,t)}toHex8String(t=!1){return"#"+this.toHex8(t)}toHexShortString(t=!1){return this.a===1?this.toHexString(t):this.toHex8String(t)}toRgb(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}}toRgbString(){const t=Math.round(this.r),n=Math.round(this.g),i=Math.round(this.b);return this.a===1?`rgb(${t}, ${n}, ${i})`:`rgba(${t}, ${n}, ${i}, ${this.roundA})`}toPercentageRgb(){const t=n=>`${Math.round(Xn(n,255)*100)}%`;return{r:t(this.r),g:t(this.g),b:t(this.b),a:this.a}}toPercentageRgbString(){const t=n=>Math.round(Xn(n,255)*100);return this.a===1?`rgb(${t(this.r)}%, ${t(this.g)}%, ${t(this.b)}%)`:`rgba(${t(this.r)}%, ${t(this.g)}%, ${t(this.b)}%, ${this.roundA})`}toCmyk(){return{...BA(this.r,this.g,this.b)}}toCmykString(){const{c:t,m:n,y:i,k:o}=BA(this.r,this.g,this.b);return`cmyk(${t}, ${n}, ${i}, ${o})`}toName(){if(this.a===0)return"transparent";if(this.a<1)return!1;const t="#"+NA(this.r,this.g,this.b,!1);for(const[n,i]of Object.entries(ly))if(t===i)return n;return!1}toString(t){const n=!!t;t=t??this.format;let i=!1;const o=this.a<1&&this.a>=0;return!n&&o&&(t.startsWith("hex")||t==="name")?t==="name"&&this.a===0?this.toName():this.toRgbString():(t==="rgb"&&(i=this.toRgbString()),t==="prgb"&&(i=this.toPercentageRgbString()),(t==="hex"||t==="hex6")&&(i=this.toHexString()),t==="hex3"&&(i=this.toHexString(!0)),t==="hex4"&&(i=this.toHex8String(!0)),t==="hex8"&&(i=this.toHex8String()),t==="name"&&(i=this.toName()),t==="hsl"&&(i=this.toHslString()),t==="hsv"&&(i=this.toHsvString()),t==="cmyk"&&(i=this.toCmykString()),i||this.toHexString())}toNumber(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)}clone(){return new pn(this.toString())}lighten(t=10){const n=this.toHsl();return n.l+=t/100,n.l=ef(n.l),new pn(n)}brighten(t=10){const n=this.toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(255*-(t/100)))),n.g=Math.max(0,Math.min(255,n.g-Math.round(255*-(t/100)))),n.b=Math.max(0,Math.min(255,n.b-Math.round(255*-(t/100)))),new pn(n)}darken(t=10){const n=this.toHsl();return n.l-=t/100,n.l=ef(n.l),new pn(n)}tint(t=10){return this.mix("white",t)}shade(t=10){return this.mix("black",t)}desaturate(t=10){const n=this.toHsl();return n.s-=t/100,n.s=ef(n.s),new pn(n)}saturate(t=10){const n=this.toHsl();return n.s+=t/100,n.s=ef(n.s),new pn(n)}greyscale(){return this.desaturate(100)}spin(t){const n=this.toHsl(),i=(n.h+t)%360;return n.h=i<0?360+i:i,new pn(n)}mix(t,n=50){const i=this.toRgb(),o=new pn(t).toRgb(),s=n/100,r={r:(o.r-i.r)*s+i.r,g:(o.g-i.g)*s+i.g,b:(o.b-i.b)*s+i.b,a:(o.a-i.a)*s+i.a};return new pn(r)}analogous(t=6,n=30){const i=this.toHsl(),o=360/n,s=[this];for(i.h=(i.h-(o*t>>1)+720)%360;--t;)i.h=(i.h+o)%360,s.push(new pn(i));return s}complement(){const t=this.toHsl();return t.h=(t.h+180)%360,new pn(t)}monochromatic(t=6){const n=this.toHsv(),{h:i}=n,{s:o}=n;let{v:s}=n;const r=[],a=1/t;for(;t--;)r.push(new pn({h:i,s:o,v:s})),s=(s+a)%1;return r}splitcomplement(){const t=this.toHsl(),{h:n}=t;return[this,new pn({h:(n+72)%360,s:t.s,l:t.l}),new pn({h:(n+216)%360,s:t.s,l:t.l})]}onBackground(t){const n=this.toRgb(),i=new pn(t).toRgb(),o=n.a+i.a*(1-n.a);return new pn({r:(n.r*n.a+i.r*i.a*(1-n.a))/o,g:(n.g*n.a+i.g*i.a*(1-n.a))/o,b:(n.b*n.a+i.b*i.a*(1-n.a))/o,a:o})}triad(){return this.polyad(3)}tetrad(){return this.polyad(4)}polyad(t){const n=this.toHsl(),{h:i}=n,o=[this],s=360/t;for(let r=1;r<t;r++)o.push(new pn({h:(i+r*s)%360,s:n.s,l:n.l}));return o}equals(t){const n=new pn(t);return this.format==="cmyk"||n.format==="cmyk"?this.toCmykString()===n.toCmykString():this.toRgbString()===n.toRgbString()}}function as(...e){return new pn(...e)}function W1(e,t){const n=e&&e.a;let i;e&&e.hsl?i=as(e.hsl):e&&e.hex&&e.hex.length>0?i=as(e.hex):e&&e.hsv?i=as(e.hsv):e&&e.rgba?i=as(e.rgba):e&&e.rgb?i=as(e.rgb):e&&typeof e=="string"&&e.startsWith("--")?(i=as(getComputedStyle(document.body).getPropertyValue(e)),i._cssVariable=e):i=as(e),i&&(i._a===void 0||i._a===null)&&i.setAlpha(n||i.getAlpha());const o=i.toHsl(),s=i.toHsv();return o.s===0&&(s.h=o.h=e.h||e.hsl&&e.hsl.h||t||0),s.v<.0164&&(s.h=e.h||e.hsv&&e.hsv.h||0,s.s=e.s||e.hsv&&e.hsv.s||0),o.l<.01&&(o.h=e.h||e.hsl&&e.hsl.h||0,o.s=e.s||e.hsl&&e.hsl.s||0),{_cssVariable:i._cssVariable,hsl:o,hex:i.toHexString().toUpperCase(),hex8:i.toHex8String().toUpperCase(),rgba:i.toRgb(),hsv:s,oldHue:e.h||t||o.h,source:e.source,a:i.getAlpha()}}const z0e={model:{prop:"modelValue",event:"update:modelValue"},props:["modelValue"],data(){return{val:W1(this.modelValue)}},computed:{colors:{get(){return this.val},set(e){let t;e._cssVariable?t=e._cssVariable:t=as(e.hsl).toString(this.finalOptions.format),this.val=e,this.$emit("update:modelValue",t)}}},watch:{modelValue(e){this.val=W1(e)}},methods:{colorChange(e,t){this.oldHue=this.colors.hsl.h,this.colors=W1(e,t||this.oldHue)},isValidHex(e){return as(e).isValid},simpleCheckForValidColor(e){const t=["r","g","b","a","h","s","l","v"];let n=0,i=0;for(let o=0;o<t.length;o++){const s=t[o];e[s]&&(n++,isNaN(e[s])||i++)}if(n===i)return e},paletteUpperCase(e){return e.map(t=>t.toUpperCase())},isTransparent(e){return as(e).getAlpha()===0}}},N0e={name:"AposColorEditableInput",props:{label:{type:String,default:""},labelText:{type:String,default:""},desc:{type:String,default:""},value:{type:[String,Number],default:()=>""},max:{type:Number,default:void 0},min:{type:Number,default:void 0},arrowOffset:{type:Number,default:1}},emits:["change"],computed:{val:{get(){return this.value},set(e){if(this.max!==void 0&&+e>this.max)this.$refs.input.value=this.max;else return e}},labelId(){return`input__label__${this.label}__${Math.random().toString().slice(2,5)}`},labelSpanText(){return this.labelText||this.label}},methods:{update(e){this.handleChange(e.target.value)},handleChange(e){const t={};t[this.label]=e,t.hex===void 0&&t["#"]===void 0?this.$emit("change",t):e.length>5&&this.$emit("change",t)},handleKeyDown(e){let{val:t}=this;const n=Number(t);if(n){const i=this.arrowOffset||1;e.keyCode===38&&(t=n+i,this.handleChange(t),e.preventDefault()),e.keyCode===40&&(t=n-i,this.handleChange(t),e.preventDefault())}}}},B0e={class:"apos-color__editable-input"},F0e=["aria-labelledby"],W0e=["id","for"],U0e={class:"apos-color__desc"};function j0e(e,t,n,i,o,s){return p(),y("div",B0e,[Ke(A("input",{ref:"input","onUpdate:modelValue":t[0]||(t[0]=r=>s.val=r),"aria-labelledby":s.labelId,class:"apos-color__input",onKeydown:t[1]||(t[1]=(...r)=>s.handleKeyDown&&s.handleKeyDown(...r)),onInput:t[2]||(t[2]=(...r)=>s.update&&s.update(...r))},null,40,F0e),[[Eo,s.val]]),A("span",{id:s.labelId,for:n.label,class:"apos-color__label"},$(s.labelSpanText),9,W0e),A("span",U0e,$(n.desc),1)])}const q0e=I(N0e,[["render",j0e]]),K0e={name:"AposColorSaturation",props:{value:{type:Object,default:()=>({})}},emits:["change"],computed:{colors(){return this.value},bgColor(){return`hsl(${this.colors.hsv.h}, 100%, 50%)`},pointerTop(){return`${-(this.colors.hsv.v*100)+1+100}%`},pointerLeft(){return`${this.colors.hsv.s*100}%`}},methods:{handleChange(e,t){!t&&e.preventDefault();const{container:n}=this.$refs;if(!n)return;const i=n.clientWidth,o=n.clientHeight,s=n.getBoundingClientRect().left+window.pageXOffset,r=n.getBoundingClientRect().top+window.pageYOffset,a=e.pageX||(e.touches?e.touches[0].pageX:0),l=e.pageY||(e.touches?e.touches[0].pageY:0),c=this.clamp(a-s,0,i),u=this.clamp(l-r,0,o),f=c/i,m=this.clamp(-(u/o)+1,0,1);this.onChange({h:this.colors.hsv.h,s:f,v:m,a:this.colors.hsv.a,source:"hsva"})},onChange(e){this.$emit("change",e)},handleMouseDown(e){window.addEventListener("mousemove",this.handleChange),window.addEventListener("mouseup",this.handleChange),window.addEventListener("mouseup",this.handleMouseUp)},handleMouseUp(e){this.unbindEventListeners()},unbindEventListeners(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)},clamp(e,t,n){return t<n?e<t?t:e>n?n:e:e<n?n:e>t?t:e}}};function G0e(e,t,n,i,o,s){return p(),y("div",{ref:"container",class:"apos-color__saturation",style:Vt({background:s.bgColor}),onMousedown:t[0]||(t[0]=Ue((...r)=>s.handleMouseDown&&s.handleMouseDown(...r),["prevent"])),onTouchmove:t[1]||(t[1]=(...r)=>s.handleChange&&s.handleChange(...r)),onTouchstart:t[2]||(t[2]=(...r)=>s.handleChange&&s.handleChange(...r))},[t[4]||(t[4]=A("div",{class:"apos-color__saturation-white"},null,-1)),t[5]||(t[5]=A("div",{class:"apos-color__saturation-black"},null,-1)),A("div",{class:"apos-color__saturation-pointer",style:Vt({top:s.pointerTop,left:s.pointerLeft})},t[3]||(t[3]=[A("div",{class:"apos-color__saturation-circle"},null,-1)]),4)],36)}const J0e=I(K0e,[["render",G0e]]),Y0e={name:"AposColorHue",props:{value:{type:Object,default:()=>({})},direction:{type:String,default:"horizontal",validator(e){return["horizontal","vertical"].includes(e)}}},emits:["change"],data(){return{oldHue:0,pullDirection:""}},computed:{colors(){return this.value},directionClass(){return{"apos-color__hue--horizontal":this.direction==="horizontal","apos-color__hue--vertical":this.direction==="vertical"}},pointerTop(){return this.direction==="vertical"?this.colors.hsl.h===0&&this.pullDirection==="right"?0:`${-(this.colors.hsl.h*100/360)+100}%`:0},pointerLeft(){return this.direction==="vertical"?0:this.colors.hsl.h===0&&this.pullDirection==="right"?"100%":`${this.colors.hsl.h*100/360}%`}},watch:{value:{handler(e){const{h:t}=e.hsl;t!==0&&t-this.oldHue>0&&(this.pullDirection="right"),t!==0&&t-this.oldHue<0&&(this.pullDirection="left"),this.oldHue=t},deep:!0,immediate:!0}},methods:{handleChange(e,t){!t&&e.preventDefault();const{container:n}=this.$refs;if(!n)return;const i=n.clientWidth,o=n.clientHeight,s=n.getBoundingClientRect().left+window.pageXOffset,r=n.getBoundingClientRect().top+window.pageYOffset,a=e.pageX||(e.touches?e.touches[0].pageX:0),l=e.pageY||(e.touches?e.touches[0].pageY:0),c=a-s,u=l-r;let f,m;this.direction==="vertical"?(u<0?f=360:u>o?f=0:(m=-(u*100/o)+100,f=360*m/100),this.colors.hsl.h!==f&&this.$emit("change",{h:f,s:this.colors.hsl.s,l:this.colors.hsl.l,a:this.colors.hsl.a,source:"hsl"})):(c<0?f=0:c>i?f=360:(m=c*100/i,f=360*m/100),this.colors.hsl.h!==f&&this.$emit("change",{h:f,s:this.colors.hsl.s,l:this.colors.hsl.l,a:this.colors.hsl.a,source:"hsl"}))},handleMouseDown(e){this.handleChange(e,!0),window.addEventListener("mousemove",this.handleChange),window.addEventListener("mouseup",this.handleChange),window.addEventListener("mouseup",this.handleMouseUp)},handleMouseUp(e){this.unbindEventListeners()},unbindEventListeners(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}}},Z0e=["aria-valuenow"];function X0e(e,t,n,i,o,s){return p(),y("div",{class:te(["apos-color__hue",[s.directionClass]])},[A("div",{ref:"container",class:"apos-color__hue-container",role:"slider","aria-valuenow":s.colors.hsl.h,"aria-valuemin":"0","aria-valuemax":"360",onMousedown:t[0]||(t[0]=Ue((...r)=>s.handleMouseDown&&s.handleMouseDown(...r),["prevent"])),onTouchmove:t[1]||(t[1]=(...r)=>s.handleChange&&s.handleChange(...r)),onTouchstart:t[2]||(t[2]=(...r)=>s.handleChange&&s.handleChange(...r))},[A("div",{class:"apos-color__hue-pointer",style:Vt({top:s.pointerTop,left:s.pointerLeft}),role:"presentation"},t[3]||(t[3]=[A("div",{class:"apos-color__hue-picker"},null,-1)]),4)],40,Z0e)],2)}const Q0e=I(Y0e,[["render",X0e],["__scopeId","data-v-dc0c68ac"]]),eve={name:"AposColorAlpha",props:{value:{type:Object,default:()=>({})},onChange:{type:Function,default:()=>{}}},emits:["change"],computed:{colors(){return this.value},gradientColor(){const{rgba:e}=this.colors,t=[e.r,e.g,e.b].join(",");return`linear-gradient(to right, rgba(${t}, 0) 0%, rgba(${t}, 1) 100%)`}},methods:{handleChange(e,t){!t&&e.preventDefault();const{container:n}=this.$refs;if(!n)return;const i=n.clientWidth,o=n.getBoundingClientRect().left+window.pageXOffset,r=(e.pageX||(e.touches?e.touches[0].pageX:0))-o;let a;r<0?a=0:r>i?a=1:a=Math.round(r*100/i)/100,this.colors.a!==a&&this.$emit("change",{h:this.colors.hsl.h,s:this.colors.hsl.s,l:this.colors.hsl.l,a,source:"rgba"})},handleMouseDown(e){this.handleChange(e,!0),window.addEventListener("mousemove",this.handleChange),window.addEventListener("mouseup",this.handleMouseUp)},handleMouseUp(){this.unbindEventListeners()},unbindEventListeners(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}}},tve={class:"apos-color__alpha"},nve={class:"apos-color__alpha-checkboard-wrap"};function ive(e,t,n,i,o,s){const r=E("AposColorCheckerboard");return p(),y("div",tve,[A("div",nve,[D(r)]),A("div",{class:"apos-color__alpha-gradient",style:Vt({background:s.gradientColor})},null,4),A("div",{ref:"container",class:"apos-color__alpha-container",onMousedown:t[0]||(t[0]=Ue((...a)=>s.handleMouseDown&&s.handleMouseDown(...a),["prevent"])),onTouchmove:t[1]||(t[1]=(...a)=>s.handleChange&&s.handleChange(...a)),onTouchstart:t[2]||(t[2]=(...a)=>s.handleChange&&s.handleChange(...a))},[A("div",{class:"apos-color__alpha-pointer",style:Vt({left:`${s.colors.a*100}%`})},t[3]||(t[3]=[A("div",{class:"apos-color__alpha-picker"},null,-1)]),4)],544)])}const ove=I(eve,[["render",ive],["__scopeId","data-v-194e9f8c"]]),WA={...apos.modules["@apostrophecms/color-field"].defaultOptions},sve={name:"AposColor",components:{Saturation:J0e,Hue:Q0e,Alpha:ove,EditableContent:q0e},mixins:[z0e],props:{options:{type:Object,default(){return WA}}},computed:{defaultOptions(){return WA},finalOptions(){let e={...this.options};return e.pickerOptions&&(e={...e.pickerOptions,...e},delete e.pickerOptions),Array.isArray(e.presetColors)&&e.presetColors.length===0&&(e.presetColors=!1),e.presetColors===!0&&delete e.presetColors,Object.assign({...this.defaultOptions},e)},presetColors(){return this.finalOptions.presetColors},disableAlpha(){return this.finalOptions.disableAlpha},disableSpectrum(){return this.finalOptions.disableSpectrum},disableFields(){return this.finalOptions.disableFields},hex(){let e;return this.colors.a<1?e=this.colors.hex8:e=this.colors.hex,e.replace("#","")},activeColor(){const{rgba:e}=this.colors;return`rgba(${[e.r,e.g,e.b,e.a].join(",")})`}},methods:{formatCssValue(e){let t=e;return e.startsWith("--")&&(t=`var(${t})`),t},handlePreset(e){this.colorChange(e)},childChange(e){this.colorChange(e)},inputChange(e){e&&(e.hex?this.isValidHex(e.hex)&&this.colorChange({hex:e.hex,source:"hex"}):(e.r||e.g||e.b||e.a)&&this.colorChange({r:e.r||this.colors.rgba.r,g:e.g||this.colors.rgba.g,b:e.b||this.colors.rgba.b,a:e.a||this.colors.rgba.a,source:"rgba"}))}}},rve={key:0,class:"apos-color__saturation-wrap"},ave={key:1,class:"apos-color__controls"},lve={class:"apos-color__sliders"},cve={key:0,class:"apos-color__hue-wrap"},dve={key:1,class:"apos-color__alpha-wrap"},uve={class:"apos-color__color-wrap"},hve=["data-apos-active-color","aria-label"],fve={key:2,class:"apos-color__field"},pve={class:"apos-color__field--double"},mve={class:"apos-color__field--single"},gve={class:"apos-color__field--single"},bve={class:"apos-color__field--single"},yve={key:0,class:"apos-color__field--single"},vve={key:3,class:"apos-color__presets",role:"group","aria-label":"A color preset, pick one to set as current color"},wve=["aria-label","onClick"],_ve=["aria-label","onClick"];function Cve(e,t,n,i,o,s){const r=E("Saturation"),a=E("Hue"),l=E("Alpha"),c=E("AposColorCheckerboard"),u=E("EditableContent");return p(),y("div",{role:"application","aria-label":"Color picker",class:te(["apos-color",[s.disableAlpha?"apos-color--disable-alpha":null,s.disableSpectrum?"apos-color--disable-spectrum":null,s.disableFields?"apos-color--disable-fields":null,s.presetColors?null:"apos-color--disable-presets"]])},[s.disableSpectrum?x("",!0):(p(),y("div",rve,[D(r,{value:e.colors,onChange:s.childChange},null,8,["value","onChange"])])),s.disableSpectrum&&s.disableAlpha?x("",!0):(p(),y("div",ave,[A("div",lve,[s.disableSpectrum?x("",!0):(p(),y("div",cve,[D(a,{value:e.colors,onChange:s.childChange},null,8,["value","onChange"])])),s.disableAlpha?x("",!0):(p(),y("div",dve,[D(l,{value:e.colors,onChange:s.childChange},null,8,["value","onChange"])]))]),A("div",uve,[A("div",{"data-apos-active-color":s.activeColor,"aria-label":`Current color is ${s.activeColor}`,class:"apos-color__active-color",style:Vt({background:s.activeColor})},null,12,hve),D(c)])])),s.disableFields?x("",!0):(p(),y("div",fve,[A("div",pve,[D(u,{label:"hex",value:s.hex,onChange:s.inputChange},null,8,["value","onChange"])]),A("div",mve,[D(u,{label:"r",value:e.colors.rgba.r,onChange:s.inputChange},null,8,["value","onChange"])]),A("div",gve,[D(u,{label:"g",value:e.colors.rgba.g,onChange:s.inputChange},null,8,["value","onChange"])]),A("div",bve,[D(u,{label:"b",value:e.colors.rgba.b,onChange:s.inputChange},null,8,["value","onChange"])]),s.disableAlpha?x("",!0):(p(),y("div",yve,[D(u,{label:"a",value:e.colors.a,"arrow-offset":.01,max:1,onChange:s.inputChange},null,8,["value","onChange"])]))])),s.presetColors?(p(),y("div",vve,[(p(!0),y(Ce,null,Ie(s.presetColors,f=>(p(),y(Ce,null,[e.isTransparent(f)?(p(),y("div",{key:f,"aria-label":`Color:${f}`,class:"apos-color__presets-color",onClick:m=>s.handlePreset(f)},[D(c)],8,_ve)):(p(),y("div",{key:`!${f}`,class:"apos-color__presets-color","aria-label":`Color:${f}`,style:Vt({background:s.formatCssValue(f)}),onClick:m=>s.handlePreset(f)},null,12,wve))],64))),256))])):x("",!0)],2)}const C5=I(sve,[["render",Cve],["__scopeId","data-v-e0c5ed2f"]]),Ave={name:"AposInputColor",components:{AposColor:C5},mixins:[Qn],data(){return{active:!1,tinyColorObj:null}},computed:{isMicro(){return this.modifiers.includes("micro")},isInline(){return this.modifiers.includes("inline")},pickerValue(){return this.next||this.defaultValue},defaultValue(){return this.field.def||""},buttonOptions(){return{label:this.field.label,type:"color",color:this.modelValue.data||""}},options(){var e;return((e=this.field)==null?void 0:e.options)||{}},classList(){return["apos-input-wrapper","apos-color"]}},mounted(){this.next||(this.next="")},methods:{open(){this.active=!0},close(){this.active=!1},update(e){this.next=e},validate(e){if(this.field.required&&!e)return"required";if(!e)return!1;const t=new pn(e);if(!e.startsWith("--"))return t.isValid?!1:"Error"},clear(){this.next=""}}},kve={class:"apos-color-info","data-apos-test":"colorInfo"},Sve={key:0},xve={__name:"AposColorInfo",props:{value:{type:String,default:null},isMicro:{type:Boolean,default:!1}},emits:["clear"],setup(e,{emit:t}){const n=e,i=Je(()=>n.value||"None Selected"),o=t;return(s,r)=>{const a=E("AposButton"),l=E("AposIndicator");return p(),y("div",kve,[e.isMicro?x("",!0):(p(),y("span",Sve,$(i.value),1)),!e.isMicro&&e.value?(p(),R(a,{key:1,type:"quiet",label:"apostrophe:clear",class:"apos-color-info__clear-btn",modifiers:["no-motion"],onClick:r[0]||(r[0]=c=>o("clear"))})):e.value?(p(),R(l,{key:2,class:"apos-color-info__clear-icon",icon:"water-off-icon",onClick:r[1]||(r[1]=c=>o("clear"))})):x("",!0)])}}},Mve={name:"AposInputColor",components:{AposColorInfo:xve},mixins:[Ave]},Tve={class:"apos-input-color"},Eve={class:"apos-input-color__ui"};function Ove(e,t,n,i,o,s){const r=E("AposColorInfo"),a=E("AposColor"),l=E("AposContextMenu"),c=E("AposInputWrapper");return p(),R(c,{modifiers:e.modifiers,field:e.field,error:e.effectiveError,uid:e.uid,"display-options":e.displayOptions},{body:Q(()=>[A("div",Tve,[e.isInline?(p(),R(r,{key:0,class:"apos-input-color__info apos-input-color__info--inline",value:e.next,"is-micro":e.isMicro,onClear:e.clear},null,8,["value","is-micro","onClear"])):x("",!0),A("div",Eve,[D(l,{button:e.buttonOptions,"menu-placement":"bottom-start",disabled:e.field.readOnly,tooltip:e.tooltip,onOpen:e.open,onClose:e.close},{default:Q(()=>[D(a,{options:e.options,"model-value":e.pickerValue,"onUpdate:modelValue":e.update},null,8,["options","model-value","onUpdate:modelValue"])]),_:1},8,["button","disabled","tooltip","onOpen","onClose"])]),e.isInline?x("",!0):(p(),R(r,{key:1,class:"apos-input-color__info",value:e.next,"is-micro":e.isMicro,onClear:e.clear},null,8,["value","is-micro","onClear"]))])]),_:1},8,["modifiers","field","error","uid","display-options"])}const $ve=I(Mve,[["render",Ove],["__scopeId","data-v-c7590f56"]]),Ive={name:"AposInputOembed",mixins:[Qn],emits:["return"],data(){return{next:this.modelValue&&this.modelValue.data?{...this.modelValue.data}:{},oembedResult:{},dynamicRatio:"",oembedError:null,tempReadOnly:!1}},computed:{tabindex(){return this.field.disableFocus?"-1":"0"},classes(){return["apos-input","apos-input--oembed"]},icon(){return this.error?"circle-medium-icon":null}},async mounted(){this.next&&this.next.url&&await this.loadOembed()},methods:{validate(e){return(e==null||e.url===null)&&(e={}),!e.url&&!this.field.required?!1:this.field.oembedType&&this.oembedResult.type&&this.oembedResult.type!==this.field.oembedType?{message:this.$t("apostrophe:oembedTypeNotSupported")}:this.oembedError?this.oembedError.message?{message:this.oembedError.message}:"invalid":this.field.required&&(!e||!e.url)?"required":!1},async watchNext(){await this.loadOembed(),this.validateAndEmit()},async loadOembed(){this.tempReadOnly=!0,this.oembedResult={},this.oembedError=null,this.dynamicRatio="";try{const e=await apos.http.get(`${apos.oembed.action}/query`,{busy:!0,qs:{url:this.next.url}});this.next.title=e.title||"",this.next.thumbnail=e.thumbnail_url||"",this.oembedResult=e,typeof e.height=="number"&&typeof e.width=="number"&&(this.dynamicRatio=e.height/e.width)}catch(e){e.body&&e.body.message?this.oembedError=e.body:this.oembedError={message:this.$t("apostrophe:oembedInvalidEmbedUrl")},this.next.title="",this.next.thumbnail=""}finally{this.tempReadOnly=!1}}}},Lve={class:"apos-input-wrapper"},Dve=["id","placeholder","disabled","readonly","required","tabindex"],Rve=["innerHTML"];function Pve(e,t,n,i,o,s){const r=E("AposInputWrapper");return p(),R(r,{modifiers:e.modifiers,field:e.field,error:e.effectiveError,uid:e.uid,"display-options":e.displayOptions},{body:Q(()=>[A("div",Lve,[Ke(A("input",{id:e.uid,"onUpdate:modelValue":t[0]||(t[0]=a=>o.next.url=a),class:te(s.classes),type:"url",placeholder:e.$t(e.field.placeholder),disabled:e.field.readOnly,readonly:o.tempReadOnly,required:e.field.required,tabindex:s.tabindex},null,10,Dve),[[Eo,o.next.url]]),s.icon?(p(),R(et(s.icon),{key:0,size:e.iconSize,class:"apos-input-icon"},null,8,["size"])):x("",!0),!e.error&&o.oembedResult.html?(p(),y("div",{key:1,class:te(["apos-input__embed",{"apos-is-dynamic":!!o.dynamicRatio}]),style:Vt({paddingTop:o.dynamicRatio&&`${o.dynamicRatio*100}%`}),innerHTML:o.oembedResult.html},null,14,Rve)):x("",!0)])]),_:1},8,["modifiers","field","error","uid","display-options"])}const Hve=I(Ive,[["render",Pve],["__scopeId","data-v-2b706c3f"]]),Vve={name:"AposAvatar",props:{user:{type:Object,required:!0},alt:{type:String,default:""}},data(){return{}},computed:{style(){const e=["linear-gradient(46deg, #CC9300 0%, #EA433A 26%, #B327BF 47%, #6666FF 76%, #00BF9A 100%)","linear-gradient(46deg, #00BF9A 0%, #CC9300 47%, #EA433A 100%)","linear-gradient(46deg, #EB4339 0%, #B327BF 47%, #6666FE 100%)","linear-gradient(46deg, #6666FF 0%, #00BF9A 47%, #CC9300 100%)","linear-gradient(46deg, #CC9300 0%, #EA433A 47%, #B327BF 100%)","linear-gradient(46deg, #B327BF 0%, #6666FF 47%, #00C09A 100%)"],t=parseInt(this.user._id,36)%e.length;return{"background-image":e[t]}},initials(){let e="";const t=this.user.title&&this.user.title.split(" ");return t.length>1?e=`${t[0].substring(0,1)}${t[1].substring(0,1)}`:e=(this.user.title||this.user.username).substring(0,1),e}}},zve=["alt"];function Nve(e,t,n,i,o,s){return p(),y("div",{class:"apos-avatar",style:Vt(s.style),alt:n.alt},[A("span",null,$(s.initials),1)],12,zve)}const Bve=I(Vve,[["render",Nve],["__scopeId","data-v-2d644ada"]]),Fve={name:"AposButton",props:{label:{type:[String,Object],default:"apostrophe:provideButtonLabel"},action:{type:String,default:null},interpolate:{type:Object,default(){return{}}},modifiers:{type:Array,default(){return[]}},color:{type:String,default:null},textColor:{type:String,default:null},href:{type:String,default:null},iconSize:{type:Number,default:15},iconFill:{type:String,default:"currentColor"},disabled:Boolean,busy:Boolean,icon:{type:String,default:null},type:{type:String,default:null},iconOnly:{type:Boolean,default:!1},state:{type:Array,default(){return[]}},attrs:{type:Object,default(){return{}}},disableFocus:Boolean,buttonType:{type:String,default:null},role:{type:String,default:null},tooltip:{type:[String,Object,Boolean],default:!1},target:{type:String,default:null},secondIcon:{type:String,default:null},download:{type:Boolean,default:!1}},emits:["click","icon"],data(){return{id:qt()}},computed:{tabindex(){return this.disableFocus?"-1":"0"},colorStyle(){if(this.type==="color")if(this.color){let e=this.color;return e.startsWith("--")&&(e=`var(${e})`),{backgroundColor:e}}else return{backgroundColor:"transparent"};else return null},modifierClass(){const e=[];return this.modifiers&&this.modifiers.forEach(t=>{e.push(`apos-button--${t}`)}),this.busy&&e.push("apos-button--outline","apos-button--busy"),this.type&&e.push(`apos-button--${this.type}`),this.iconOnly&&e.push("apos-button--icon-only"),this.state&&this.state.length&&this.state.forEach(t=>{e.push(`apos-is-${t}`)}),e.length>0?e.join(" "):!1},spinnerColor(){return this.type==="danger"?"--a-danger":this.busy&&this.disabled?"--a-white":this.type==="outline"?"--a-base-5":null},isDisabled(){return this.disabled||this.busy||null},actionTestLabel(){return this.action?`${this.action}Trigger`:!1}},methods:{click(e){this.$emit("click",e)},focus(){var e,t;(t=((e=this.$refs.buttonTrigger)==null?void 0:e.$el)??this.$refs.buttonTrigger)==null||t.focus()}}},Wve=["data-apos-test"],Uve={key:0,class:"apos-button__color-preview"},jve={class:"apos-button__color-preview__checkerboard"},qve={class:"apos-button__content"};function Kve(e,t,n,i,o,s){const r=E("AposSpinner"),a=E("AposColorCheckerboard"),l=E("AposIndicator"),c=xi("apos-tooltip");return Ke((p(),y("span",{class:te(["apos-button__wrapper",{"apos-button__wrapper--block":n.modifiers.includes("block")}]),"data-apos-test":s.actionTestLabel},[(p(),R(et(n.href?"a":"button"),X(n.attrs,{id:n.attrs.id?n.attrs.id:o.id,ref:"buttonTrigger",target:n.target,href:n.href,class:["apos-button",s.modifierClass],tabindex:s.tabindex,disabled:s.isDisabled?s.isDisabled:null,type:n.buttonType,role:n.role,style:{color:n.textColor},download:n.download?"":null},Ec(n.href?{}:{click:s.click})),{default:Q(()=>[D(Qi,{name:"fade"},{default:Q(()=>[n.busy?(p(),R(r,{key:0,color:s.spinnerColor},null,8,["color"])):x("",!0)]),_:1}),s.colorStyle?(p(),y("span",Uve,[A("span",{style:Vt(s.colorStyle),class:"apos-button__color-preview__swatch"},null,4),A("div",jve,[D(a)])])):x("",!0),A("div",qve,[n.icon?(p(),R(l,{key:0,class:"apos-button__icon",icon:n.icon,"icon-size":n.iconSize,"icon-color":n.iconFill,onIcon:t[0]||(t[0]=u=>e.$emit("icon",u))},null,8,["icon","icon-size","icon-color"])):x("",!0),gt(e.$slots,"label",{},()=>[A("span",{class:te(["apos-button__label",{"apos-sr-only":n.iconOnly||n.type==="color"}])},$(e.$t(n.label,n.interpolate)),3)],!0),n.secondIcon?(p(),R(l,{key:1,class:"apos-button__second-icon",icon:n.secondIcon,"icon-size":n.iconSize,"icon-color":n.iconFill},null,8,["icon","icon-size","icon-color"])):x("",!0)])]),_:3},16,["id","target","href","class","tabindex","disabled","type","role","style","download"]))],10,Wve)),[[c,n.tooltip]])}const Gve=I(Fve,[["render",Kve],["__scopeId","data-v-1e75accf"]]),Jve={name:"AposButtonGroup",props:{direction:{type:String,default:"horizontal"},modifiers:{type:Array,default(){return[]}}},data(){return{}},computed:{modifierClass(){const e=[];return this.modifiers&&this.modifiers.forEach(t=>{e.push(`apos-button-group--${t}`)}),e.join(" ")}}},Yve={class:"apos-button-group__inner"};function Zve(e,t,n,i,o,s){return p(),y("div",{class:te(["apos-button-group",s.modifierClass]),role:"menubar"},[A("div",Yve,[gt(e.$slots,"default",{},void 0,!0)])],2)}const Xve=I(Jve,[["render",Zve],["__scopeId","data-v-b4c00bce"]]),Qve=["data-apos-test-button-split-type"],ewe=["aria-label"],twe=["aria-checked","data-apos-test-button-split-item"],nwe=["value","data-apos-test-button-split-item-trigger","onClick"],iwe={style:{display:"none"}},owe={class:"apos-button-split__menu__dialog-label"},swe={key:1,class:"apos-button-split__menu__dialog-description"},rwe={__name:"AposButtonSplit",props:{menu:{type:Array,required:!0},menuLabel:{type:String,required:!0},type:{type:String,default:"primary"},disabled:{type:Boolean,default:!1},tooltip:{type:[String,Object],default:null},selected:{type:String,default:null},attrs:{type:Object,default(){return{}}}},emits:["click"],setup(e,{emit:t}){const n=e,i=t,o=Ve(null),s=Ve(null),r=Ve({type:n.type,modifiers:["no-motion"],attrs:n.attrs}),a=Ve(),l=Ve({iconOnly:!0,icon:"chevron-down-icon",modifiers:["no-motion"],type:n.type}),c=Je(()=>{const g=[];return g.push(`apos-button-split--type-${r.value.type}`),g});Fo(()=>n.menu,()=>{m()},{immediate:!0});function u(g){s.value=g,o.value=n.menu.find(v=>v.action===g).label}function f(g){u(g),a.value.hide()}function m(){let g=n.menu[0].action||null;n.selected&&n.menu.find(v=>v.action===n.selected)?g=n.selected:n.menu.find(v=>v.def)&&(g=n.menu.find(v=>v.def).action),u(g)}return(g,v)=>{const w=E("AposButton"),_=E("AposIndicator"),k=E("AposContextMenu");return p(),y("div",{class:te(["apos-button-split",c.value]),"data-apos-test-button-split-type":e.type},[D(w,X({class:"apos-button-split__button"},r.value,{label:o.value,disabled:e.disabled,tooltip:e.tooltip,"data-apos-test-button-split-submit":"",onClick:v[0]||(v[0]=L=>i("click",s.value))}),null,16,["label","disabled","tooltip"]),D(k,{ref_key:"contextMenu",ref:a,class:"apos-button-split__menu",menu:e.menu,button:l.value,disabled:e.disabled,"menu-placement":"bottom-end","data-apos-test-button-split-trigger":""},{default:Q(()=>[A("ul",{class:"apos-button-split__menu__dialog",role:"menu","aria-label":e.menuLabel,"data-apos-test-button-split-menu":""},[(p(!0),y(Ce,null,Ie(e.menu,L=>(p(),y("li",{key:L.action,class:te(["apos-button-split__menu__dialog-item",{"apos-is-selected":L.action===s.value}]),"aria-checked":L.action===s.value?"true":"false","data-apos-test-button-split-item":L.action,role:"menuitemradio"},[A("button",{class:"apos-button-split__menu__dialog-button",value:L.action,"data-apos-test-button-split-item-trigger":L.action,onClick:P=>f(L.action)},[A("span",iwe,$(g.$t(L.label)),1)],8,nwe),s.value===L.action?(p(),R(_,{key:0,class:"apos-button-split__menu__dialog-check",icon:"check-bold-icon","icon-size":18,"icon-color":"var(--a-primary)"})):x("",!0),A("span",owe,$(g.$t(L.label)),1),L.description?(p(),y("span",swe,$(g.$t(L.description)),1)):x("",!0)],10,twe))),128))],8,ewe)]),_:1},8,["menu","button","disabled"])],10,Qve)}}},awe=I(rwe,[["__scopeId","data-v-034849c8"]]),wa={props:{header:{type:Object,required:!0},draft:{type:Object,required:!0},published:{type:Object,default(){return null}}},methods:{get(e){let[t,n]=e.split(":");n||(n=t,t="item");const i=n.split(".");let o=this[t];try{for(const s of i)o=o[s]}catch{return null}return o}},computed:{item(){return this.published||this.draft},moduleOptions(){return apos.modules[this.item.type]},manuallyPublished(){return this.moduleOptions.localized&&!this.autopublish},autopublish(){return this.item._aposAutopublish??this.moduleOptions.autopublish}}},lwe={name:"AposCellBasic",mixins:[wa]};function cwe(e,t,n,i,o,s){return p(),y("p",{class:te(["apos-table__cell-field",`apos-table__cell-field--${e.header.name}`])},$(e.get(e.header.name)),3)}const dwe=I(lwe,[["render",cwe]]),uwe={name:"AposCellButton",mixins:[wa]};function hwe(e,t,n,i,o,s){return p(),y("button",{class:te(["apos-table__cell-field",`apos-table__cell-field--${e.header.name}`]),type:"button"},$(e.get(e.header.name)),3)}const fwe=I(uwe,[["render",hwe]]),pwe={name:"AposCellContextMenu",mixins:[wa],props:{state:{type:Object,default(){return null}},options:{type:Object,default(){return{}}}},data(){return{menuOpen:!1}},computed:{disabled(){return this.item.type==="@apostrophecms/archive-page"},classes(){const e=[];return(!this.state||this.state.hover||this.menuOpen)&&e.push("apos-is-visible"),e}}},mwe={class:"apos-table__cell-field apos-table__cell-field--context-menu"};function gwe(e,t,n,i,o,s){const r=E("AposDocContextMenu");return p(),y("div",mwe,[A("span",{class:te(["apos-table__cell-field--context-menu__content",s.classes])},[D(r,{disabled:s.disabled,doc:e.draft,published:e.published,"show-edit":n.options.showEdit,"show-preview":n.options.showPreview,"show-discard-draft":n.options.showDiscardDraft,"show-copy":n.options.showCreate,"show-archive":n.options.showArchive,"show-restore":n.options.showRestore,"show-dismiss-submission":n.options.showDismissSubmission,"can-delete-draft":n.options.canDeleteDraft,onMenuOpen:t[0]||(t[0]=a=>o.menuOpen=!0),onMenuClose:t[1]||(t[1]=a=>o.menuOpen=!1)},null,8,["disabled","doc","published","show-edit","show-preview","show-discard-draft","show-copy","show-archive","show-restore","show-dismiss-submission","can-delete-draft"])],2)])}const bwe=I(pwe,[["render",gwe],["__scopeId","data-v-f476d12c"]]),ywe={name:"AposCellDate",mixins:[wa],computed:{formattedDate(){const e=this.get(this.header.name);return e?this.formatDateColumn(e):""}},methods:{formatDateColumn(e){const t=this.$t("apostrophe:dayjsCellDateFormat");if(t.endsWith("apostrophe")){const i=new Date(e);if(Number.isNaN(i.getDate()))return e;const o=i.getMonth()+1,s=i.getDate(),r=i.getFullYear();let a=i.getHours();const l=a>11?"pm":"am";a>12?a=a-12:a===0&&(a=12);const c=i.getMinutes();return`${n(o)}/${n(s)}/${n(r)} at ${a}:${c} ${l}`}else return Kr(e).format(t);function n(i){return i=parseInt(i),i<10?`0${i.toString()}`:i>1e3?n(i.toString().slice(2,4)):i}}}};function vwe(e,t,n,i,o,s){return p(),y("p",{class:te(["apos-table__cell-field",`apos-table__cell-field--${e.header.name}`])},$(s.formattedDate),3)}const wwe=I(ywe,[["render",vwe]]),_we={name:"AposCellLabels",mixins:[wa],data(){return{customCellIndicators:apos.schema.customCellIndicators}},methods:{evaluateConditions(e={}){try{return Object.entries(e).every(([t,n])=>t.split(".").reduce((s,r)=>{if(Object.hasOwn(s,r))return s[r];throw new Error(`Property not found in draft document: ${t}`)},this.draft)===n)}catch{return!1}}}},Cwe={key:0},Awe={key:1},kwe={key:2},Swe={key:3};function xwe(e,t,n,i,o,s){const r=E("AposLabel");return p(),y("div",{class:te(["apos-table__cell-field apos-table__cell-field--labels",`apos-table__cell-field--${e.header.name}`])},[e.manuallyPublished&&e.draft.modified&&e.draft.lastPublishedAt?(p(),y("span",Cwe,[D(r,{label:"apostrophe:pendingUpdates",class:"apos-table__cell-field__label",tooltip:"apostrophe:thereAreActiveChanges",modifiers:["apos-is-success","apos-is-filled"]})])):e.draft.submitted?(p(),y("span",Awe,[D(r,{label:"apostrophe:pending",class:"apos-table__cell-field__label",tooltip:"apostrophe:changesAwaitingApproval",modifiers:["apos-is-filled"]})])):x("",!0),e.manuallyPublished&&!e.draft.lastPublishedAt?(p(),y("span",kwe,[D(r,{label:"apostrophe:draft",class:"apos-table__cell-field__label",modifiers:["apos-is-warning","apos-is-filled"],tooltip:"apostrophe:notYetPublished"})])):x("",!0),e.draft.archived?(p(),y("span",Swe,[D(r,{label:"apostrophe:archived",class:"apos-table__cell-field__label",modifiers:["apos-is-filled","apos-is-danger"]})])):x("",!0),(p(!0),y(Ce,null,Ie(o.customCellIndicators,({component:a,props:l,if:c},u)=>(p(),y("span",{key:u},[s.evaluateConditions(c)?(p(),R(et(a),X({key:0,class:"apos-table__cell-field__label",ref_for:!0},l,{header:e.header,draft:e.draft,published:e.published}),null,16,["header","draft","published"])):x("",!0)]))),128))],2)}const Mwe=I(_we,[["render",xwe],["__scopeId","data-v-d55976d9"]]),Twe={name:"AposCellLastEdited",mixins:[wa],computed:{formattedDate(){const e=this.get(this.header.name||this.header.property);return this.getRelativeTime(e)}},methods:{getRelativeTime(e){const t=this.$t("apostrophe:dayjsRelativeTimeFormat");if(!t.endsWith("apostrophe"))return Kr(e).format(t);const n=new Date(e);if(Number.isNaN(n.getDate()))return e;const i=Math.round((+new Date-n)/1e3);let o=null,s=null;const r=60,a=r*60,l=a*24,c=l*7,u=l*30,f=l*365;return i<r?i+"s":(i<a?[o,s]=[r,"m"]:i<l?[o,s]=[a,"h"]:i<c?[o,s]=[l,"d"]:i<u?[o,s]=[c,"w"]:i<f?[o,s]=[u,"mo"]:i>f&&([o,s]=[f,"yr"]),`${Math.floor(i/o)}${s} ago`)}}};function Ewe(e,t,n,i,o,s){return p(),y("p",{class:te(["apos-table__cell-field apos-table__cell-field--relative-time",`apos-table__cell-field--${e.header.name}`])},$(s.formattedDate),3)}const Owe=I(Twe,[["render",Ewe],["__scopeId","data-v-0bdecf14"]]),$we={name:"AposCellLink",mixins:[wa]},Iwe=["href"];function Lwe(e,t,n,i,o,s){const r=E("link-icon");return p(),y("a",{href:e.get(e.header.name),onClick:t[0]||(t[0]=Ue(()=>{},["stop"]))},[D(r,{size:14})],8,Iwe)}const Dwe=I($we,[["render",Lwe]]),Rwe={name:"AposCellType",mixins:[wa],methods:{label(e){return apos.modules[e]&&apos.modules[e].label||e}}};function Pwe(e,t,n,i,o,s){return p(),y("p",{class:te(["apos-table__cell-field",`apos-table__cell-field--${e.header.name}`])},$(e.$t(s.label(e.get(e.header.name)))),3)}const Hwe=I(Rwe,[["render",Pwe]]),Vwe={props:{modelValue:{type:[Array,Boolean],default:!1},choice:{type:Object,required:!0},field:{type:Object,required:!0},status:{type:Object,default(){return{}}},id:{type:String,default:null}},emits:["update:modelValue","updated"],data(){return{tabindex:this.field.disableFocus?"-1":"0"}},computed:{checkProxy:{get(){return this.modelValue},set(e){(!this.choice.indeterminate||this.choice.triggerIndeterminateEvent)&&this.$emit("update:modelValue",e)}}},methods:{isChecked(e){return Array.isArray(e)?e.includes(this.choice.value):e},update(e){this.$emit("updated",e)}}},zwe=["for","tabindex"],Nwe=["id","value","name","aria-label","tabindex","disabled","is-indeterminate"],Bwe={class:"apos-input-indicator","aria-hidden":"true"},Fwe=["innerHTML"];function Wwe(e,t,n,i,o,s){return p(),y("label",{class:te(["apos-choice-label",{"apos-choice-label--disabled":n.field.readOnly}]),for:n.id,tabindex:{"-1":n.field.hideLabel}},[Ke(A("input",{id:n.id,"onUpdate:modelValue":t[0]||(t[0]=r=>s.checkProxy=r),type:"checkbox",class:"apos-sr-only apos-input--choice apos-input--checkbox",value:n.choice.value,name:n.field.name,"aria-label":n.choice.label||n.field.label,tabindex:o.tabindex,disabled:n.field.readOnly||n.choice.readOnly,"is-indeterminate":n.choice.indeterminate===!0?"true":"false",onChange:t[1]||(t[1]=(...r)=>s.update&&s.update(...r))},null,40,Nwe),[[qS,s.checkProxy]]),A("span",Bwe,[s.isChecked(n.modelValue)?(p(),R(et(`${n.choice.indeterminate?"minus-icon":"check-bold-icon"}`),{key:0,size:10})):x("",!0)]),n.choice.label?(p(),y("div",{key:0,class:te([{"apos-sr-only":n.field.hideLabel},"apos-choice-label-text"])},[A("span",null,$(e.$t(n.choice.label)),1),n.choice.help||n.choice.htmlHelp?(p(),y("p",{key:0,class:"apos-choice-label-text--help apos-field__help",innerHTML:e.$t(n.choice.help||n.choice.htmlHelp)},null,8,Fwe)):x("",!0)],2)):x("",!0)],10,zwe)}const Uwe=I(Vwe,[["render",Wwe],["__scopeId","data-v-2964ccbf"]]),jwe={},qwe={width:"64px",height:"42.6px",viewBox:"0 4.008 64 42.613",xmlns:"http://www.w3.org/2000/svg"};function Kwe(e,t){return p(),y("svg",qwe,t[0]||(t[0]=[ml('<defs data-v-e3159d4b><linearGradient id="apos-upload-gradient" gradientUnits="userSpaceOnUse" x1="12" y1="4" x2="12" y2="20" gradientTransform="matrix(1.848483, 1.922034, -2.33985, 2.250314, 31.445274, -24.099256)" data-v-e3159d4b><stop offset="0" style="stop-color:rgb(50 197 255);" data-v-e3159d4b></stop><stop offset="0.337" style="stop-color:rgb(182 32 224);" data-v-e3159d4b></stop><stop offset="0.501" style="stop-color:rgb(182 32 224);" data-v-e3159d4b></stop><stop offset="0.854" style="stop-color:rgb(247 181 0);" data-v-e3159d4b></stop><stop offset="1" style="stop-color:rgb(247 181 0);" data-v-e3159d4b></stop></linearGradient></defs><path d="M 37.334 28 L 37.334 38.666 L 26.666 38.666 L 26.666 28 L 18.666 28 L 32 14.666 L 45.334 28 M 51.599 20.079 C 49.787 10.907 41.706 4 32 4 C 24.293 4 17.6 8.374 14.267 14.747 C 6.24 15.626 0 22.4 0 30.666 C 0 39.503 7.164 46.666 16 46.666 L 50.666 46.666 C 58.03 46.666 64 40.697 64 33.334 C 64 26.294 58.533 20.586 51.599 20.079 Z" data-v-e3159d4b></path>',2)]))}const Gwe=I(jwe,[["render",Kwe],["__scopeId","data-v-e3159d4b"]]),Jwe={name:"AposColorCheckerboard"},Ywe={class:"apos-color__checkerboard"};function Zwe(e,t,n,i,o,s){return p(),y("div",Ywe)}const Xwe=I(Jwe,[["render",Zwe]]),Qwe={name:"AposCombo",props:{choices:{type:Array,required:!0},field:{type:Object,required:!0},modelValue:{type:Object,required:!0},typehead:{type:Boolean,default:!1},busy:{type:Boolean,default:!1},objectValues:{type:Boolean,default:!1}},emits:["select-items","toggle","update:modelValue"],data(){return{showedList:!1,boxHeight:0,boxResizeObserver:this.getBoxResizeObserver(),focusedItemIndex:null,thInput:""}},computed:{showSelectAll(){return this.field.all!==!1&&(!this.field.max||this.field.max>this.choices.length)},options(){return this.renderOptions(this.showSelectAll)},selectedItems(){if(!this.showSelectAll||!this.allItemsSelected())return this.modelValue.data;if(this.objectValues){const{listLabel:e}=this.getSelectAllLabel();return[{label:e,value:"__all"}]}return["__all"]}},mounted(){this.boxResizeObserver.observe(this.$refs.select)},beforeUnmount(){this.boxResizeObserver.unobserve(this.$refs.select)},methods:{onTypeheadInput(e){this.thInput=e.target.value,this.$emit("update:modelValue",this.thInput)},onTypeheadKey(e){const t=()=>{e.preventDefault(),e.stopPropagation()};switch(e.key){case"ArrowDown":t(),this.focusListItem();break;case"ArrowUp":t(),this.focusListItem(!0);break;case"Enter":t(),this.selectOption(this.options[this.focusedItemIndex]);break;case"Tab":t(),this.closeList(null,!0);break}},toggleList(){this.field.readOnly||(this.showedList=!this.showedList,this.showedList?(this.$emit("toggle",!0),this.$nextTick(()=>{this.focusedItemIndex=0,this.typehead?this.$refs.input.focus():this.$refs.list.focus()})):(this.$refs.select.focus(),this.resetList()))},onListKey(e){const t=()=>{e.preventDefault(),e.stopPropagation()};switch(e.key){case" ":case"Space":{this.typehead||(t(),this.selectOption(this.options[this.focusedItemIndex]));break}case"Enter":{t(),this.selectOption(this.options[this.focusedItemIndex]);break}case"ArrowDown":{t(),this.focusListItem();break}case"ArrowUp":{t(),this.focusListItem(!0);break}case"Delete":{this.typehead||(t(),this.closeList(null,!0));break}case"Escape":{t(),this.closeList(null,!0);break}}},closeList(e,t){this.showedList=!1,this.resetList(),t&&this.$nextTick(()=>{this.$refs.select.focus()})},resetList(){this.$emit("toggle",!1),this.focusedItemIndex=null,this.$refs.list.scrollTo({top:0}),this.thInput="",this.$emit("update:modelValue",this.thInput)},getBoxResizeObserver(){return new ResizeObserver(([{target:e}])=>{e.offsetHeight!==this.boxHeight&&(this.boxHeight=e.offsetHeight)})},renderOptions(e){if(!e)return this.choices;const{listLabel:t}=this.getSelectAllLabel();return[{label:t,value:"__all"},...this.choices]},isSelected(e){const t=n=>this.objectValues?n.value===e.value:n===e.value;return this.modelValue.data.some(t)},allItemsSelected(){return this.choices.length&&this.modelValue.data.length===this.choices.length},getSelectedOption(e){if(this.objectValues)return e;if(e==="__all"){const{selectedLabel:t}=this.getSelectAllLabel();return{label:t,value:e}}return this.choices.find(t=>t.value===e)},emitSelectItems(e){return new Promise(t=>{this.$emit("select-items",e),this.$nextTick(t)})},async selectOption(e){if(this.field.readOnly)return;const t=this.showSelectAll&&e==="__all"?this.getSelectedOption("__all"):e;if(await this.emitSelectItems(t),this.showSelectAll){const{listLabel:n}=this.getSelectAllLabel();this.options[0].label=n}},getSelectAllLabel(){var i,o;const e=this.allItemsSelected(),t=e?this.$t("apostrophe:deselectAll"):this.$t("apostrophe:selectAll"),n=this.$t("apostrophe:allSelected");if((o=(i=this.field)==null?void 0:i.all)!=null&&o.label){const s=this.$t(this.field.all.label);return{selectedLabel:n,listLabel:e?t:s}}return{selectedLabel:n,listLabel:t}},focusListItem(e=!1){var c;const t=u=>e?u-1:u+1,n=e?this.options.length-1:0;this.focusedItemIndex==null?this.focusedItemIndex=n:this.focusedItemIndex=this.options[t(this.focusedItemIndex)]?t(this.focusedItemIndex):n;const i=((c=this.$refs.list.querySelector("li"))==null?void 0:c.clientHeight)||32,o=i*this.focusedItemIndex,{clientHeight:s,scrollTop:r}=this.$refs.list,a=s+r,l=u=>{this.$refs.list.scrollTo({top:u,behavior:"smooth"})};o+i>a?l(o+i-s):o<a-s&&l(o)}}},e_e=["aria-expanded","aria-controls","tabindex"],t_e=["onClick"],n_e=["id"],i_e=["placeholder","value"],o_e=["onClick","onMouseover"];function s_e(e,t,n,i,o,s){const r=E("AposIndicator"),a=E("AposSpinner"),l=xi("click-outside-element");return p(),y("div",{class:te(["apos-primary-scrollbar apos-input-wrapper",{"apos-input-wrapper--disabled":n.field.readOnly}]),"aria-haspopup":"menu"},[Ke((p(),y("ul",{ref:"select",role:"button","aria-expanded":o.showedList.toString(),"aria-controls":`${n.field._id}-combo`,class:"apos-input-wrapper apos-combo__select",tabindex:n.field.readOnly?null:0,onClick:t[0]||(t[0]=(...c)=>s.toggleList&&s.toggleList(...c)),onKeydown:[t[1]||(t[1]=Qe(Ue((...c)=>s.toggleList&&s.toggleList(...c),["prevent"]),["space"])),t[2]||(t[2]=Qe(Ue((...c)=>s.toggleList&&s.toggleList(...c),["prevent"]),["up"])),t[3]||(t[3]=Qe(Ue((...c)=>s.toggleList&&s.toggleList(...c),["prevent"]),["down"]))]},[(p(!0),y(Ce,null,Ie(s.selectedItems,c=>{var u;return p(),y("li",{key:n.objectValues?c.value:c,class:"apos-combo__selected",onClick:Ue(f=>s.selectOption(s.getSelectedOption(c)),["stop"])},[Et($((u=s.getSelectedOption(c))==null?void 0:u.label)+" ",1),D(r,{icon:"close-icon",class:"apos-combo__close-icon","icon-size":10})],8,t_e)}),128))],40,e_e)),[[l,s.closeList]]),D(r,{icon:"menu-down-icon",class:"apos-input-icon","icon-size":20}),A("ul",{id:`${n.field._id}-combo`,ref:"list",role:"menu",class:te(["apos-combo__list",{"apos-combo__list--showed":o.showedList}]),style:Vt({top:o.boxHeight+"px"}),tabindex:"0",onKeydown:t[7]||(t[7]=(...c)=>s.onListKey&&s.onListKey(...c)),onBlur:t[8]||(t[8]=c=>s.closeList())},[n.typehead?(p(),y("li",{key:"__typehead",class:"apos-combo__list-typehead",onClick:t[6]||(t[6]=Ue(c=>e.$refs.input.focus(),["stop"]))},[A("input",{ref:"input",class:"apos-combo__typehead",type:"text",placeholder:e.$t("apostrophe:search"),value:o.thInput,onInput:t[4]||(t[4]=(...c)=>s.onTypeheadInput&&s.onTypeheadInput(...c)),onKeydown:t[5]||(t[5]=(...c)=>s.onTypeheadKey&&s.onTypeheadKey(...c))},null,40,i_e),n.busy?(p(),R(a,{key:0,class:"apos-combo__spinner",color:"--a-base-5"})):x("",!0)])):x("",!0),(p(!0),y(Ce,null,Ie(s.options,(c,u)=>(p(),y("li",{key:c.value,class:te(["apos-combo__list-item",{focused:o.focusedItemIndex===u}]),role:"menuitemcheckbox",onClick:Ue(f=>s.selectOption(c),["stop"]),onMouseover:f=>o.focusedItemIndex=u},[s.isSelected(c)?(p(),R(r,{key:0,icon:"check-bold-icon",class:"apos-combo__check-icon","icon-size":10})):x("",!0),Et(" "+$(c.label),1)],42,o_e))),128))],46,n_e)],2)}const r_e=I(Qwe,[["render",s_e],["__scopeId","data-v-e4460654"]]),mu=Math.min,sc=Math.max,pp=Math.round,gs=e=>({x:e,y:e}),a_e={left:"right",right:"left",bottom:"top",top:"bottom"},l_e={start:"end",end:"start"};function cy(e,t,n){return sc(e,mu(t,n))}function Hu(e,t){return typeof e=="function"?e(t):e}function ul(e){return e.split("-")[0]}function Vu(e){return e.split("-")[1]}function A5(e){return e==="x"?"y":"x"}function K0(e){return e==="y"?"height":"width"}function wc(e){return["top","bottom"].includes(ul(e))?"y":"x"}function G0(e){return A5(wc(e))}function c_e(e,t,n){n===void 0&&(n=!1);const i=Vu(e),o=G0(e),s=K0(o);let r=o==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(r=mp(r)),[r,mp(r)]}function d_e(e){const t=mp(e);return[dy(e),t,dy(t)]}function dy(e){return e.replace(/start|end/g,t=>l_e[t])}function u_e(e,t,n){const i=["left","right"],o=["right","left"],s=["top","bottom"],r=["bottom","top"];switch(e){case"top":case"bottom":return n?t?o:i:t?i:o;case"left":case"right":return t?s:r;default:return[]}}function h_e(e,t,n,i){const o=Vu(e);let s=u_e(ul(e),n==="start",i);return o&&(s=s.map(r=>r+"-"+o),t&&(s=s.concat(s.map(dy)))),s}function mp(e){return e.replace(/left|right|bottom|top/g,t=>a_e[t])}function f_e(e){return{top:0,right:0,bottom:0,left:0,...e}}function k5(e){return typeof e!="number"?f_e(e):{top:e,right:e,bottom:e,left:e}}function gp(e){const{x:t,y:n,width:i,height:o}=e;return{width:i,height:o,top:n,left:t,right:t+i,bottom:n+o,x:t,y:n}}function UA(e,t,n){let{reference:i,floating:o}=e;const s=wc(t),r=G0(t),a=K0(r),l=ul(t),c=s==="y",u=i.x+i.width/2-o.width/2,f=i.y+i.height/2-o.height/2,m=i[a]/2-o[a]/2;let g;switch(l){case"top":g={x:u,y:i.y-o.height};break;case"bottom":g={x:u,y:i.y+i.height};break;case"right":g={x:i.x+i.width,y:f};break;case"left":g={x:i.x-o.width,y:f};break;default:g={x:i.x,y:i.y}}switch(Vu(t)){case"start":g[r]-=m*(n&&c?-1:1);break;case"end":g[r]+=m*(n&&c?-1:1);break}return g}const p_e=async(e,t,n)=>{const{placement:i="bottom",strategy:o="absolute",middleware:s=[],platform:r}=n,a=s.filter(Boolean),l=await(r.isRTL==null?void 0:r.isRTL(t));let c=await r.getElementRects({reference:e,floating:t,strategy:o}),{x:u,y:f}=UA(c,i,l),m=i,g={},v=0;for(let w=0;w<a.length;w++){const{name:_,fn:k}=a[w],{x:L,y:P,data:M,reset:F}=await k({x:u,y:f,initialPlacement:i,placement:m,strategy:o,middlewareData:g,rects:c,platform:r,elements:{reference:e,floating:t}});u=L??u,f=P??f,g={...g,[_]:{...g[_],...M}},F&&v<=50&&(v++,typeof F=="object"&&(F.placement&&(m=F.placement),F.rects&&(c=F.rects===!0?await r.getElementRects({reference:e,floating:t,strategy:o}):F.rects),{x:u,y:f}=UA(c,m,l)),w=-1)}return{x:u,y:f,placement:m,strategy:o,middlewareData:g}};async function S5(e,t){var n;t===void 0&&(t={});const{x:i,y:o,platform:s,rects:r,elements:a,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:m=!1,padding:g=0}=Hu(t,e),v=k5(g),_=a[m?f==="floating"?"reference":"floating":f],k=gp(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(_)))==null||n?_:_.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),L=f==="floating"?{x:i,y:o,width:r.floating.width,height:r.floating.height}:r.reference,P=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),M=await(s.isElement==null?void 0:s.isElement(P))?await(s.getScale==null?void 0:s.getScale(P))||{x:1,y:1}:{x:1,y:1},F=gp(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:L,offsetParent:P,strategy:l}):L);return{top:(k.top-F.top+v.top)/M.y,bottom:(F.bottom-k.bottom+v.bottom)/M.y,left:(k.left-F.left+v.left)/M.x,right:(F.right-k.right+v.right)/M.x}}const m_e=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:i,placement:o,rects:s,platform:r,elements:a,middlewareData:l}=t,{element:c,padding:u=0}=Hu(e,t)||{};if(c==null)return{};const f=k5(u),m={x:n,y:i},g=G0(o),v=K0(g),w=await r.getDimensions(c),_=g==="y",k=_?"top":"left",L=_?"bottom":"right",P=_?"clientHeight":"clientWidth",M=s.reference[v]+s.reference[g]-m[g]-s.floating[v],F=m[g]-s.reference[g],z=await(r.getOffsetParent==null?void 0:r.getOffsetParent(c));let ee=z?z[P]:0;(!ee||!await(r.isElement==null?void 0:r.isElement(z)))&&(ee=a.floating[P]||s.floating[v]);const ie=M/2-F/2,K=ee/2-w[v]/2-1,ae=mu(f[k],K),B=mu(f[L],K),J=ae,he=ee-w[v]-B,ne=ee/2-w[v]/2+ie,oe=cy(J,ne,he),W=!l.arrow&&Vu(o)!=null&&ne!==oe&&s.reference[v]/2-(ne<J?ae:B)-w[v]/2<0,q=W?ne<J?ne-J:ne-he:0;return{[g]:m[g]+q,data:{[g]:oe,centerOffset:ne-oe-q,...W&&{alignmentOffset:q}},reset:W}}}),g_e=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,i;const{placement:o,middlewareData:s,rects:r,initialPlacement:a,platform:l,elements:c}=t,{mainAxis:u=!0,crossAxis:f=!0,fallbackPlacements:m,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:w=!0,..._}=Hu(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const k=ul(o),L=wc(a),P=ul(a)===a,M=await(l.isRTL==null?void 0:l.isRTL(c.floating)),F=m||(P||!w?[mp(a)]:d_e(a)),z=v!=="none";!m&&z&&F.push(...h_e(a,w,v,M));const ee=[a,...F],ie=await S5(t,_),K=[];let ae=((i=s.flip)==null?void 0:i.overflows)||[];if(u&&K.push(ie[k]),f){const ne=c_e(o,r,M);K.push(ie[ne[0]],ie[ne[1]])}if(ae=[...ae,{placement:o,overflows:K}],!K.every(ne=>ne<=0)){var B,J;const ne=(((B=s.flip)==null?void 0:B.index)||0)+1,oe=ee[ne];if(oe)return{data:{index:ne,overflows:ae},reset:{placement:oe}};let W=(J=ae.filter(q=>q.overflows[0]<=0).sort((q,Z)=>q.overflows[1]-Z.overflows[1])[0])==null?void 0:J.placement;if(!W)switch(g){case"bestFit":{var he;const q=(he=ae.filter(Z=>{if(z){const N=wc(Z.placement);return N===L||N==="y"}return!0}).map(Z=>[Z.placement,Z.overflows.filter(N=>N>0).reduce((N,le)=>N+le,0)]).sort((Z,N)=>Z[1]-N[1])[0])==null?void 0:he[0];q&&(W=q);break}case"initialPlacement":W=a;break}if(o!==W)return{reset:{placement:W}}}return{}}}};async function b_e(e,t){const{placement:n,platform:i,elements:o}=e,s=await(i.isRTL==null?void 0:i.isRTL(o.floating)),r=ul(n),a=Vu(n),l=wc(n)==="y",c=["left","top"].includes(r)?-1:1,u=s&&l?-1:1,f=Hu(t,e);let{mainAxis:m,crossAxis:g,alignmentAxis:v}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return a&&typeof v=="number"&&(g=a==="end"?v*-1:v),l?{x:g*u,y:m*c}:{x:m*c,y:g*u}}const y_e=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,i;const{x:o,y:s,placement:r,middlewareData:a}=t,l=await b_e(t,e);return r===((n=a.offset)==null?void 0:n.placement)&&(i=a.arrow)!=null&&i.alignmentOffset?{}:{x:o+l.x,y:s+l.y,data:{...l,placement:r}}}}},v_e=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:i,placement:o}=t,{mainAxis:s=!0,crossAxis:r=!1,limiter:a={fn:_=>{let{x:k,y:L}=_;return{x:k,y:L}}},...l}=Hu(e,t),c={x:n,y:i},u=await S5(t,l),f=wc(ul(o)),m=A5(f);let g=c[m],v=c[f];if(s){const _=m==="y"?"top":"left",k=m==="y"?"bottom":"right",L=g+u[_],P=g-u[k];g=cy(L,g,P)}if(r){const _=f==="y"?"top":"left",k=f==="y"?"bottom":"right",L=v+u[_],P=v-u[k];v=cy(L,v,P)}const w=a.fn({...t,[m]:g,[f]:v});return{...w,data:{x:w.x-n,y:w.y-i,enabled:{[m]:s,[f]:r}}}}}};function Em(){return typeof window<"u"}function Rc(e){return x5(e)?(e.nodeName||"").toLowerCase():"#document"}function to(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function dr(e){var t;return(t=(x5(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function x5(e){return Em()?e instanceof Node||e instanceof to(e).Node:!1}function Ko(e){return Em()?e instanceof Element||e instanceof to(e).Element:!1}function _s(e){return Em()?e instanceof HTMLElement||e instanceof to(e).HTMLElement:!1}function jA(e){return!Em()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof to(e).ShadowRoot}function zu(e){const{overflow:t,overflowX:n,overflowY:i,display:o}=Go(e);return/auto|scroll|overlay|hidden|clip/.test(t+i+n)&&!["inline","contents"].includes(o)}function w_e(e){return["table","td","th"].includes(Rc(e))}function Om(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function J0(e){const t=Y0(),n=Ko(e)?Go(e):e;return["transform","translate","scale","rotate","perspective"].some(i=>n[i]?n[i]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(i=>(n.willChange||"").includes(i))||["paint","layout","strict","content"].some(i=>(n.contain||"").includes(i))}function __e(e){let t=ra(e);for(;_s(t)&&!_c(t);){if(J0(t))return t;if(Om(t))return null;t=ra(t)}return null}function Y0(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function _c(e){return["html","body","#document"].includes(Rc(e))}function Go(e){return to(e).getComputedStyle(e)}function $m(e){return Ko(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function ra(e){if(Rc(e)==="html")return e;const t=e.assignedSlot||e.parentNode||jA(e)&&e.host||dr(e);return jA(t)?t.host:t}function M5(e){const t=ra(e);return _c(t)?e.ownerDocument?e.ownerDocument.body:e.body:_s(t)&&zu(t)?t:M5(t)}function T5(e,t,n){var i;t===void 0&&(t=[]);const o=M5(e),s=o===((i=e.ownerDocument)==null?void 0:i.body),r=to(o);return s?(uy(r),t.concat(r,r.visualViewport||[],zu(o)?o:[],[])):t.concat(o,T5(o,[]))}function uy(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function E5(e){const t=Go(e);let n=parseFloat(t.width)||0,i=parseFloat(t.height)||0;const o=_s(e),s=o?e.offsetWidth:n,r=o?e.offsetHeight:i,a=pp(n)!==s||pp(i)!==r;return a&&(n=s,i=r),{width:n,height:i,$:a}}function O5(e){return Ko(e)?e:e.contextElement}function rc(e){const t=O5(e);if(!_s(t))return gs(1);const n=t.getBoundingClientRect(),{width:i,height:o,$:s}=E5(t);let r=(s?pp(n.width):n.width)/i,a=(s?pp(n.height):n.height)/o;return(!r||!Number.isFinite(r))&&(r=1),(!a||!Number.isFinite(a))&&(a=1),{x:r,y:a}}const C_e=gs(0);function $5(e){const t=to(e);return!Y0()||!t.visualViewport?C_e:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function A_e(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==to(e)?!1:t}function gu(e,t,n,i){t===void 0&&(t=!1),n===void 0&&(n=!1);const o=e.getBoundingClientRect(),s=O5(e);let r=gs(1);t&&(i?Ko(i)&&(r=rc(i)):r=rc(e));const a=A_e(s,n,i)?$5(s):gs(0);let l=(o.left+a.x)/r.x,c=(o.top+a.y)/r.y,u=o.width/r.x,f=o.height/r.y;if(s){const m=to(s),g=i&&Ko(i)?to(i):i;let v=m,w=uy(v);for(;w&&i&&g!==v;){const _=rc(w),k=w.getBoundingClientRect(),L=Go(w),P=k.left+(w.clientLeft+parseFloat(L.paddingLeft))*_.x,M=k.top+(w.clientTop+parseFloat(L.paddingTop))*_.y;l*=_.x,c*=_.y,u*=_.x,f*=_.y,l+=P,c+=M,v=to(w),w=uy(v)}}return gp({width:u,height:f,x:l,y:c})}function Z0(e,t){const n=$m(e).scrollLeft;return t?t.left+n:gu(dr(e)).left+n}function I5(e,t,n){n===void 0&&(n=!1);const i=e.getBoundingClientRect(),o=i.left+t.scrollLeft-(n?0:Z0(e,i)),s=i.top+t.scrollTop;return{x:o,y:s}}function k_e(e){let{elements:t,rect:n,offsetParent:i,strategy:o}=e;const s=o==="fixed",r=dr(i),a=t?Om(t.floating):!1;if(i===r||a&&s)return n;let l={scrollLeft:0,scrollTop:0},c=gs(1);const u=gs(0),f=_s(i);if((f||!f&&!s)&&((Rc(i)!=="body"||zu(r))&&(l=$m(i)),_s(i))){const g=gu(i);c=rc(i),u.x=g.x+i.clientLeft,u.y=g.y+i.clientTop}const m=r&&!f&&!s?I5(r,l,!0):gs(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+m.x,y:n.y*c.y-l.scrollTop*c.y+u.y+m.y}}function S_e(e){return Array.from(e.getClientRects())}function x_e(e){const t=dr(e),n=$m(e),i=e.ownerDocument.body,o=sc(t.scrollWidth,t.clientWidth,i.scrollWidth,i.clientWidth),s=sc(t.scrollHeight,t.clientHeight,i.scrollHeight,i.clientHeight);let r=-n.scrollLeft+Z0(e);const a=-n.scrollTop;return Go(i).direction==="rtl"&&(r+=sc(t.clientWidth,i.clientWidth)-o),{width:o,height:s,x:r,y:a}}function M_e(e,t){const n=to(e),i=dr(e),o=n.visualViewport;let s=i.clientWidth,r=i.clientHeight,a=0,l=0;if(o){s=o.width,r=o.height;const c=Y0();(!c||c&&t==="fixed")&&(a=o.offsetLeft,l=o.offsetTop)}return{width:s,height:r,x:a,y:l}}function T_e(e,t){const n=gu(e,!0,t==="fixed"),i=n.top+e.clientTop,o=n.left+e.clientLeft,s=_s(e)?rc(e):gs(1),r=e.clientWidth*s.x,a=e.clientHeight*s.y,l=o*s.x,c=i*s.y;return{width:r,height:a,x:l,y:c}}function qA(e,t,n){let i;if(t==="viewport")i=M_e(e,n);else if(t==="document")i=x_e(dr(e));else if(Ko(t))i=T_e(t,n);else{const o=$5(e);i={x:t.x-o.x,y:t.y-o.y,width:t.width,height:t.height}}return gp(i)}function L5(e,t){const n=ra(e);return n===t||!Ko(n)||_c(n)?!1:Go(n).position==="fixed"||L5(n,t)}function E_e(e,t){const n=t.get(e);if(n)return n;let i=T5(e,[]).filter(a=>Ko(a)&&Rc(a)!=="body"),o=null;const s=Go(e).position==="fixed";let r=s?ra(e):e;for(;Ko(r)&&!_c(r);){const a=Go(r),l=J0(r);!l&&a.position==="fixed"&&(o=null),(s?!l&&!o:!l&&a.position==="static"&&!!o&&["absolute","fixed"].includes(o.position)||zu(r)&&!l&&L5(e,r))?i=i.filter(u=>u!==r):o=a,r=ra(r)}return t.set(e,i),i}function O_e(e){let{element:t,boundary:n,rootBoundary:i,strategy:o}=e;const r=[...n==="clippingAncestors"?Om(t)?[]:E_e(t,this._c):[].concat(n),i],a=r[0],l=r.reduce((c,u)=>{const f=qA(t,u,o);return c.top=sc(f.top,c.top),c.right=mu(f.right,c.right),c.bottom=mu(f.bottom,c.bottom),c.left=sc(f.left,c.left),c},qA(t,a,o));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function $_e(e){const{width:t,height:n}=E5(e);return{width:t,height:n}}function I_e(e,t,n){const i=_s(t),o=dr(t),s=n==="fixed",r=gu(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const l=gs(0);if(i||!i&&!s)if((Rc(t)!=="body"||zu(o))&&(a=$m(t)),i){const m=gu(t,!0,s,t);l.x=m.x+t.clientLeft,l.y=m.y+t.clientTop}else o&&(l.x=Z0(o));const c=o&&!i&&!s?I5(o,a):gs(0),u=r.left+a.scrollLeft-l.x-c.x,f=r.top+a.scrollTop-l.y-c.y;return{x:u,y:f,width:r.width,height:r.height}}function U1(e){return Go(e).position==="static"}function KA(e,t){if(!_s(e)||Go(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return dr(e)===n&&(n=n.ownerDocument.body),n}function D5(e,t){const n=to(e);if(Om(e))return n;if(!_s(e)){let o=ra(e);for(;o&&!_c(o);){if(Ko(o)&&!U1(o))return o;o=ra(o)}return n}let i=KA(e,t);for(;i&&w_e(i)&&U1(i);)i=KA(i,t);return i&&_c(i)&&U1(i)&&!J0(i)?n:i||__e(e)||n}const L_e=async function(e){const t=this.getOffsetParent||D5,n=this.getDimensions,i=await n(e.floating);return{reference:I_e(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function D_e(e){return Go(e).direction==="rtl"}const R_e={convertOffsetParentRelativeRectToViewportRelativeRect:k_e,getDocumentElement:dr,getClippingRect:O_e,getOffsetParent:D5,getElementRects:L_e,getClientRects:S_e,getDimensions:$_e,getScale:rc,isElement:Ko,isRTL:D_e},R5=y_e,P5=v_e,H5=g_e,V5=m_e,z5=(e,t,n)=>{const i=new Map,o={platform:R_e,...n},s={...o.platform,_c:i};return p_e(e,t,{...o,platform:s})};function P_e({triggerRef:e,refreshOnCycle:t=!1,onExit:n=()=>{},retries:i=3,withPriority:o=!0}){const{activeModalFocusedElement:s,findPriorityElementOrFirst:r,cycleElementsToFocus:a,focusElement:l}=G4(),c=Ve(!1),u=Ve(!1),f=Ve(0),m=Ve(null),g=Ve([]),v=Je(()=>u.value),w=Je(()=>{const ee=Zt(e);if(ee===!0)return s;if(ee){const ie=ee.$el||ee;if(ie instanceof HTMLElement)return ie.hasAttribute("tabindex")?ie:ie.querySelector("[tabindex]")||ie}return null}),k=["[tabindex]","[href]","input","select","textarea","button","[data-apos-focus-priority]"].map(H_e).join(", ");return{runTrap:P,hasRunningTrap:v,stopTrap:M,resetTrap:F,onTab:z};async function L(ee){if(!Zt(ee)||!c.value)return;const ie=[...Zt(ee).querySelectorAll(k)],K=Zt(o)?r(ie):ie[0];if(!(Zt(o)?K==null?void 0:K.hasAttribute("data-apos-focus-priority"):K)&&Zt(i)>f.value)return f.value++,await z_e(20),L(ee);await wo(),c.value&&(l(V_e(K,ie)),g.value=ie,m.value=Zt(ee))}async function P(ee){u.value||(c.value=!0,u.value=!0,await L(ee),u.value=!1,c.value=!1)}function M(){c.value=!1}function F(){c.value=!1,u.value=!1,f.value=0,g.value=[]}function z(ee){if(t&&m.value){const ae=[...Zt(m).querySelectorAll(k)];g.value=ae}const ie=Zt(g);a(ee,ie,K);function K(ae,B){let J;const he=w.value;he||(B.focus(),ae.preventDefault()),B===ie[0]&&(J=he),B===ie.at(-1)&&(J=he),J&&(J.focus(),ae.preventDefault()),n()}}}function H_e(e){return`${e}:not([tabindex="-1"]):not([disabled]):not([type="hidden"]):not([aria-hidden])`}function V_e(e,t){return(e==null?void 0:e.getAttribute("type"))==="radio"&&t.find(n=>n.getAttribute("type")==="radio"&&n.getAttribute("name")===e.getAttribute("name")&&n.hasAttribute("checked"))||e}async function z_e(e){return new Promise(t=>setTimeout(t,e))}const N_e={__name:"AposContextMenu",props:{richTextMenu:{type:Boolean,default:!1},identifier:{type:String,default:"contextMenuTrigger"},menu:{type:Array,default:null},unpadded:{type:Boolean,default:!1},modifiers:{type:Array,default(){return[]}},button:{type:Object,default(){return{label:"Context Menu Label",iconOnly:!0,icon:"label-icon",type:"outline"}}},menuPlacement:{type:String,default:"bottom"},menuOffset:{type:[Number,Array],default:15},disabled:{type:Boolean,default:!1},tooltip:{type:[String,Boolean,Object],default:!1},popoverModifiers:{type:Array,default(){return[]}},menuId:{type:String,default(){return qt()}},activeItem:{type:String,default:null},trapFocus:{type:Boolean,default:!0},dynamicFocus:{type:Boolean,default:!1},centerOnIcon:{type:Boolean,default:!1},centerTipEl:{type:Object,default:null},hasTip:{type:Boolean,default:!0}},emits:["open","close","item-clicked"],setup(e,{expose:t,emit:n}){const i=e,o=n,s=pS(),r=Ve(!1),a=Ve(!1),l=Ve(i.menuPlacement),c=Ve(null),u=Ve(null),f=Ve(null),m=Ve(null),g=Ve({}),v=Ve(null),w=Ve(null),_=he(),k=Ve(!1),{onTab:L,runTrap:P,hasRunningTrap:M,resetTrap:F}=P_e({withPriority:!0,refreshOnCycle:i.dynamicFocus}),z=new ResizeObserver(Se=>{for(const He of Se)ye()});t({hide:q,show:Z,setDropdownPosition:ye});const ee=Je(()=>{const Se=["apos-popover"].concat(J.value);return i.popoverModifiers.forEach(He=>{Se.push(`apos-popover--${He}`)}),Se}),ie=Je(()=>{const Se=[],He="apos-context-menu__popup";return Se.push(`${He}--tip-alignment-${i.menuPlacement}`),i.modifiers&&i.modifiers.forEach(ot=>{Se.push(`${He}--${ot}`)}),(i.menu||i.unpadded)&&Se.push(`${He}--unpadded`),Se.join(" ")}),K=Je(()=>r.value?["active"]:null),ae=Je(()=>{var Se;return i.tooltip||((Se=i.button)==null?void 0:Se.tooltip)||!1}),B=Je(()=>({"data-apos-test":a.value?"context-menu-content":null,...!i.richTextMenu&&{"data-apos-menu":""},"aria-hidden":!r.value})),{themeClass:J}=n0();As(()=>{apos.bus.$on("context-menu-toggled",ne),apos.bus.$on("close-context-menus",W)}),pl(()=>{apos.bus.$off("context-menu-toggled",ne),apos.bus.$off("close-context-menus",W)});function he(){return{mainAxis:Array.isArray(i.menuOffset)?i.menuOffset[0]:i.menuOffset,crossAxis:Array.isArray(i.menuOffset)?i.menuOffset[1]??0:0}}function ne({menuId:Se}){i.menuId!==Se&&(k.value=!0,q())}function oe(Se){Se&&(i.centerOnIcon||i.centerTipEl)&&(w.value=Se)}function W(Se="contextMenu"){Se==="richText"&&i.richTextMenu&&q(),Se==="contextMenu"&&!i.richTextMenu&&q()}async function q(Se){var He;r.value&&(m.value&&z.unobserve(m.value),r.value=!1,await wo(),o("close",Se),i.trapFocus&&F(),window.removeEventListener("resize",ye),window.removeEventListener("scroll",ye),(He=c.value)==null||He.addEventListener("keydown",Re),!k.value&&!i.trapFocus&&u.value.querySelector("[tabindex]").focus())}async function Z(Se){var He,ot;r.value||(r.value=!0,await wo(),o("open",Se),ye(),z.observe(m.value),window.addEventListener("resize",ye),window.addEventListener("scroll",ye),(He=c.value)==null||He.addEventListener("keydown",Re),i.trapFocus&&!M.value&&await P(m),i.trapFocus||(ot=m.value.querySelector("[tabindex]"))==null||ot.focus(),a.value=!0,i.centerTipEl&&oe(i.centerTipEl.$el))}function N(Se){r.value?q(Se):Z(Se),k.value=!1,apos.bus.$emit("context-menu-toggled",{menuId:i.menuId,isOpen:r.value})}function le(Se){v.value=Se}function ce(Se){o("item-clicked",Se),q()}async function ye(){var we;if(!u.value||!m.value)return;const Se=w.value||u.value,He=[R5(_)],ot=H5({fallbackPlacements:["bottom"],padding:{top:(((we=window.apos.adminBar)==null?void 0:we.height)||0)+10}}),lt=P5({padding:5});i.menuPlacement.includes("-")?He.push(ot,lt):He.push(lt,ot),He.push(V5({element:v.value,padding:5}));const{x:Lt,y:pt,middlewareData:Gt,placement:V}=await z5(Se,m.value,{placement:i.menuPlacement,middleware:He});if(l.value=V,g.value={left:`${Lt}px`,top:`${pt}px`},!v.value)return;const{x:j,y:se}=Gt.arrow;Object.assign(v.value.style,{...j&&{left:`${j}px`},...se&&{top:`${se}px`}})}const Le=["text","password","email","file","number","search","tel","url","date","time","datetime-local","month","search","week"];function Re(Se){var ot,lt,Lt,pt,Gt;if(Se.key!=="Escape"||!r.value)return;const He=Se.target;if(((ot=He==null?void 0:He.nodeName)==null?void 0:ot.toLowerCase())==="textarea"||((lt=He==null?void 0:He.nodeName)==null?void 0:lt.toLowerCase())==="input"&&Le.includes(He.getAttribute("type"))){Se.stopImmediatePropagation();return}(Lt=f.value)!=null&&Lt.focus?f.value.focus():(Gt=(pt=f.value)==null?void 0:pt.$el)==null||Gt.focus(),Se.stopImmediatePropagation(),q()}return(Se,He)=>{const ot=E("AposButton"),lt=E("AposContextMenuDialog"),Lt=xi("click-outside-element");return p(),y("section",{ref_key:"contextMenuRef",ref:c,class:"apos-context-menu",onKeydown:He[1]||(He[1]=Qe((...pt)=>Zt(L)&&Zt(L)(...pt),["tab"]))},[gt(Se.$slots,"prebutton"),A("div",{ref_key:"dropdown",ref:u,class:"apos-popover__btn apos-context-menu__dropdown"},[Zt(s).button?gt(Se.$slots,"button",{key:0,onClick:N}):(p(),R(ot,X({key:1},e.button,{ref_key:"dropdownButton",ref:f,class:"apos-context-menu__btn",role:"button","data-apos-test":e.identifier,state:K.value,disabled:e.disabled,tooltip:ae.value,attrs:{"aria-haspopup":"menu","aria-expanded":!!r.value},onIcon:oe,onClick:He[0]||(He[0]=Ue(pt=>N(pt),["stop"]))}),null,16,["data-apos-test","state","disabled","tooltip","attrs"])),r.value?Ke((p(),y("div",X({key:2},B.value,{ref_key:"dropdownContent",ref:m,style:g.value,class:["apos-context-menu__dropdown-content",ee.value]}),[D(lt,{"menu-placement":l.value,"class-list":ie.value,menu:e.menu,"active-item":e.activeItem,"is-open":r.value,"has-tip":e.hasTip,onItemClicked:ce,onSetArrow:le},{default:Q(()=>[gt(Se.$slots,"default")]),_:3},8,["menu-placement","class-list","menu","active-item","is-open","has-tip"])],16)),[[Lt,q]]):x("",!0)],512)],544)}}},B_e={class:"apos-context-menu__pane"},F_e={key:0,class:"apos-context-menu__items",role:"menu"},W_e={__name:"AposContextMenuDialog",props:{menuPlacement:{type:String,required:!0},menu:{type:Array,default:null},classList:{type:String,default:""},isOpen:{type:Boolean,default:!1},modifiers:{type:Array,default(){return[]}},hasTip:{type:Boolean,default:!0},activeItem:{type:String,default:null}},emits:["item-clicked","set-arrow"],setup(e,{emit:t}){const n=e,i=t,o=Je(()=>n.menuPlacement.split("-")),s=Je(()=>o.value[0]),r=Je(()=>o.value[1]?o.value[1]:"center"),a=Je(()=>{const u=n.classList.split(" ");return n.modifiers.forEach(f=>{u.push(`apos-context-menu__dialog--${f}`)}),u.join(" ")});function l(u){i("item-clicked",u)}function c(u){i("set-arrow",u)}return(u,f)=>{const m=E("AposContextMenuTip"),g=E("AposContextMenuItem");return p(),y("div",{class:te(["apos-primary-scrollbar apos-context-menu__dialog",a.value]),role:"dialog"},[e.hasTip?(p(),R(m,{key:0,class:"apos-context-menu__tip",align:r.value,"x-placement":s.value,onSetArrow:c},null,8,["align","x-placement"])):x("",!0),A("div",B_e,[gt(u.$slots,"default",{},()=>[e.menu?(p(),y("ul",F_e,[(p(!0),y(Ce,null,Ie(e.menu,v=>(p(),R(g,{key:v.action,"data-apos-test-context-menu-item":v.action||v.modal,"menu-item":v,"is-active":v.name===e.activeItem,open:e.isOpen,onClicked:l},null,8,["data-apos-test-context-menu-item","menu-item","is-active","open"]))),128))])):x("",!0)])])],2)}}},U_e={name:"AposContextMenuItem",props:{menuItem:{type:Object,required:!0},open:Boolean,isActive:{type:Boolean,default:!1}},emits:["clicked"],computed:{tabindex(){return this.open?"0":"-1"},selected(){var e;return(e=this.menuItem.modifiers)==null?void 0:e.includes("selected")},danger(){var e;return(e=this.menuItem.modifiers)==null?void 0:e.includes("danger")},disabled(){var e;return!!((e=this.menuItem.modifiers)!=null&&e.includes("disabled"))},modifiers(){const e=[];return this.menuItem.modifiers&&this.menuItem.modifiers.forEach(t=>{e.push(`apos-context-menu__button--${t}`)}),this.isActive&&e.push("apos-context-menu__active"),e.join(" ")},label(){let e=this.menuItem.label;return this.selected&&(e={key:"apostrophe:selectedMenuItem",label:this.$t(this.menuItem.label)}),e}},methods:{click(){this.$emit("clicked",this.menuItem)}}},j_e={key:0,class:"apos-context-menu__separator"},q_e=["tabindex","data-apos-test-selected","data-apos-test-danger","data-apos-test-disabled"],K_e={class:"apos-context-menu__label"};function G_e(e,t,n,i,o,s){const r=E("AposIndicator");return p(),y("li",{class:te(["apos-context-menu__item",n.menuItem.separator?"apos-context-menu__item--separator":null])},[n.menuItem.separator?(p(),y("hr",j_e)):(p(),y("button",X({key:1,class:["apos-context-menu__button",s.modifiers],tabindex:s.tabindex,role:"menuitem","data-apos-test":"context-menu-item","data-apos-test-selected":s.selected,"data-apos-test-danger":s.danger,"data-apos-test-disabled":s.disabled},Ec(s.disabled?{}:{click:s.click},!0)),[n.menuItem.icon?(p(),R(r,{key:0,class:"apos-context-menu__icon",icon:n.menuItem.icon,"icon-size":n.menuItem.iconSize,"icon-color":n.menuItem.iconFill},null,8,["icon","icon-size","icon-color"])):x("",!0),A("span",K_e,$(e.$t(s.label)),1)],16,q_e))],2)}const J_e=I(U_e,[["render",G_e],["__scopeId","data-v-099d50fb"]]),Y_e={__name:"AposContextMenuTip",emits:["set-arrow"],setup(e,{emit:t}){const n=t;return(i,o)=>(p(),y("svg",{ref:s=>n("set-arrow",s),class:"apos-context-menu__tip",width:"27px",height:"11px",viewBox:"0 0 27 11",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},o[0]||(o[0]=[A("g",{width:"27px",height:"11px",stroke:"none",fill:"none","fill-rule":"evenodd"},[A("path",{class:"apos-context-menu__tip-outline",d:"M17.2842712,1.46446609 L25.748,9.928 L1.749,9.928 L10.2132034,1.46446609 C12.1658249,-0.488155365 15.3316498,-0.488155365 17.2842712,1.46446609 Z",stroke:"var(--a-base-9)","stroke-width":"1"}),A("path",{class:"apos-context-menu__tip-background",d:"M17.0029602,1.84623992 C15.3903198,0.179595947 12.5749711,0.0148310371 10.7918701,1.61499023 C9.60313614,2.68176303 9.52086075,2.75884626 10.5450439,1.84623992 L0.815307617,11.4361572 L26.6676025,11.4361572 L17.0029602,1.84623992 Z",fill:"var(--a-background-primary)","fill-rule":"nonzero"})],-1)]),512))}},Z_e={props:{emptyState:{type:Object,required:!0}}},X_e={class:"apos-empty-state"},Q_e={key:0,class:"apos-empty-state__icon"},e2e={key:1,class:"apos-empty-state__title"},t2e={key:2,class:"apos-empty-state__message"};function n2e(e,t,n,i,o,s){const r=E("AposIndicator");return p(),y("div",X_e,[n.emptyState.icon?(p(),y("div",Q_e,[D(r,{icon:n.emptyState.icon,class:"apos-empty-state__indicator","icon-color":"var(--a-base-3)","icon-size":48},null,8,["icon"])])):x("",!0),n.emptyState.title?(p(),y("p",e2e,$(e.$t(n.emptyState.title)),1)):x("",!0),n.emptyState.message?(p(),y("p",t2e,$(e.$t(n.emptyState.message)),1)):x("",!0)])}const i2e=I(Z_e,[["render",n2e],["__scopeId","data-v-0f8da31a"]]),o2e={props:{uploading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},attachment:{type:Object,default:null},allowedExtensions:{type:String,default:"*"},readOnly:{type:Boolean,default:!1},def:{type:String,default:null}},emits:["upload-file","update"],data(){return{selectedFile:null,dragging:!1}},computed:{fileOrAttachment(){return this.selectedFile||this.attachment},attachmentDisabled(){return this.uploading||this.readOnly||this.disabled},messages(){const e={primary:this.$t("apostrophe:fileUploaderDropFile"),highlighted:this.$t("apostrophe:fileUploaderOpenExplorer")};return this.disabled&&(e.primary=this.$t("apostrophe:fileUploaderFieldIsDisabled"),e.highlighted=""),this.fileOrAttachment&&(e.primary=this.$t("apostrophe:fileUploaderAttachmentLimitReached"),e.highlighted=""),e}},methods:{handleKeydown(e){switch(e.key){case" ":case"Enter":e.preventDefault(),this.$refs.uploadField.click();break}},async uploadFile({target:e,dataTransfer:t}){this.dragging=!1;const[n]=e.files?e.files:t.files||[];this.resetField();const i=n.name.split(".").pop();await this.checkFileGroup(`.${i}`)&&(this.selectedFile={_id:n.name,title:n.name,extension:i,_url:URL.createObjectURL(n)},this.$emit("upload-file",n))},resetField(){this.$refs.uploadField.value=null},dragHandler(e){e.preventDefault(),!this.disabled&&!this.dragging&&(this.dragging=!0)},update(e){this.selectedFile&&this.selectedFile._url&&URL.revokeObjectURL(this.selectedFile._url),this.selectedFile=null,this.$emit("update",e)},async checkFileGroup(e){const n=this.allowedExtensions.split(",").includes(e);return n||await apos.notify("apostrophe:fileTypeNotAccepted",{type:"warning",icon:"alert-circle-icon",interpolate:{extensions:this.allowedExtensions}}),n}}},s2e={class:"apos-file-instructions"},r2e={key:0,class:"apos-file-highlight"},a2e=["disabled","accept"],l2e={key:0,class:"apos-file-files"};function c2e(e,t,n,i,o,s){const r=E("cloud-upload-icon"),a=E("AposSpinner"),l=E("paperclip-icon"),c=E("AposSlatList");return p(),y("div",null,[A("label",{class:te(["apos-input-wrapper apos-file-dropzone",{"apos-file-dropzone--dragover":o.dragging,"apos-is-disabled":n.disabled||s.fileOrAttachment}]),tabindex:"0",onKeydown:t[1]||(t[1]=(...u)=>s.handleKeydown&&s.handleKeydown(...u)),onDrop:t[2]||(t[2]=Ue((...u)=>s.uploadFile&&s.uploadFile(...u),["prevent"])),onDragover:t[3]||(t[3]=(...u)=>s.dragHandler&&s.dragHandler(...u)),onDragleave:t[4]||(t[4]=u=>o.dragging=!1)},[A("p",s2e,[o.dragging?(p(),R(r,{key:0,size:38})):n.uploading?(p(),R(a,{key:1})):(p(),y(Ce,{key:2},[D(l,{size:14,class:"apos-file-icon"}),Et(" "+$(s.messages.primary)+" ",1),s.messages.highlighted?(p(),y("span",r2e,$(s.messages.highlighted),1)):x("",!0)],64))]),A("input",{ref:"uploadField",type:"file",class:"apos-sr-only",disabled:n.disabled||s.fileOrAttachment,accept:n.allowedExtensions,tabindex:"-1",onInput:t[0]||(t[0]=(...u)=>s.uploadFile&&s.uploadFile(...u))},null,40,a2e)],34),s.fileOrAttachment?(p(),y("div",l2e,[D(c,{"model-value":[s.fileOrAttachment],disabled:s.attachmentDisabled,"onUpdate:modelValue":s.update},null,8,["model-value","disabled","onUpdate:modelValue"])])):x("",!0)])}const d2e=I(o2e,[["render",c2e],["__scopeId","data-v-94d143e1"]]),u2e={props:{filters:{type:Array,required:!0},choices:{type:Object,required:!1,default(){return{}}},values:{type:Object,required:!1,default(){return{}}},button:{type:Object,default(){return{label:"apostrophe:filter",icon:"chevron-down-icon",modifiers:["icon-right","small"],type:"outline"}}}},emits:["input"],data(){return{map:{radio:"AposInputRadio",checkbox:"AposInputCheckboxes",select:"AposInputSelect"},generation:0}},computed:{filterSets(){const e=[];return this.filters.forEach(t=>{e.push({name:t.name,key:`${this.generation}:${t.name}`,field:{name:t.name,type:t.inputType||"select",label:t.label||t.name,choices:this.addNullChoice(t,this.choices[t.name]||t.choices),def:t.def},value:{data:this.values[t.name]},status:{}})}),e}},watch:{choices(){this.generation++}},methods:{input(e,t){this.$emit("input",t,e)},addNullChoice(e,t){return e.required||e.inputType==="checkbox"?t:t?t.find(n=>n.value===null)?t:[{label:e.nullLabel,value:null}].concat(t):[{label:"apostrophe:filterMenuLoadingChoices",value:e.def}]}}},h2e={class:"apos-filters-menu"};function f2e(e,t,n,i,o,s){const r=E("AposContextMenu");return p(),R(r,{button:n.button,"menu-placement":"bottom"},{default:Q(()=>[A("div",h2e,[(p(!0),y(Ce,null,Ie(s.filterSets,a=>(p(),y("div",{key:a.key,class:"apos-filters-menu__set"},[(p(),R(et(o.map[a.field.type]),{field:a.field,"model-value":a.value,status:a.status,icon:a.field.type==="select"?"unfold-more-horizontal-icon":"","no-blur-emit":!0,"onUpdate:modelValue":l=>s.input(l,a.name)},null,8,["field","model-value","status","icon","onUpdate:modelValue"]))]))),128))])]),_:1},8,["button"])}const p2e=I(u2e,[["render",f2e],["__scopeId","data-v-619f543b"]]),m2e={name:"AposLabel",props:{label:{type:String,required:!0},tooltip:{type:String,default:null},modifiers:{type:Array,default(){return[]}}}};function g2e(e,t,n,i,o,s){const r=xi("apos-tooltip");return Ke((p(),y("span",{class:te(["apos-label",n.modifiers])},[Et($(e.$t(n.label)),1)],2)),[[r,n.tooltip]])}const b2e=I(m2e,[["render",g2e],["__scopeId","data-v-8f231877"]]),y2e={name:"AposLoading"},v2e={class:"apos-loading"};function w2e(e,t,n,i,o,s){return p(),y("div",v2e,t[0]||(t[0]=[ml('<svg viewBox="0 0 60 20" data-v-59ad2fcd><defs data-v-59ad2fcd><linearGradient id="gradOne" x1="-0.858289931%" y1="100%" x2="100.756836%" y2="0%" spreadMethod="pad" data-v-59ad2fcd><stop offset="0%" stop-color="var(--a-brand-gold)" stop-opacity="1" data-v-59ad2fcd></stop><stop offset="100%" stop-color="var(--a-brand-red)" stop-opacity="1" data-v-59ad2fcd></stop></linearGradient><linearGradient id="gradTwo" x1="-0.858289931%" y1="100%" x2="100.756836%" y2="0%" spreadMethod="pad" data-v-59ad2fcd><stop offset="0%" stop-color="var(--a-brand-red)" stop-opacity="1" data-v-59ad2fcd></stop><stop offset="100%" stop-color="var(--a-brand-magenta)" stop-opacity="1" data-v-59ad2fcd></stop></linearGradient><linearGradient id="gradThree" x1="-0.858289931%" y1="100%" x2="100.756836%" y2="0%" spreadMethod="pad" data-v-59ad2fcd><stop offset="0%" stop-color="var(--a-brand-magenta)" stop-opacity="1" data-v-59ad2fcd></stop><stop offset="100%" stop-color="var(--a-brand-blue)" stop-opacity="1" data-v-59ad2fcd></stop></linearGradient></defs><g data-v-59ad2fcd><circle class="apos-loading__first" cx="10" cy="10" stroke-width="0" fill="url(&#39;#gradOne&#39;)" r="4.08836" data-v-59ad2fcd><animate attributeName="r" dur="950ms" values="3;3;4;5;6;5;4;3" repeatCount="indefinite" keyTimes="0; 0.15; 0.3; 0.45; 0.6; 0.75; 0.9; 1" keySplines=".42 0 1 1; 0 0 .59 1; .42 0 1 1; 0 0 .59 1; .42 0 1 1; 0 0 .59 1; .42 0 1 1; 0 0 .59 1;" data-v-59ad2fcd></animate></circle><circle class="apos-loading__second" cx="30" cy="10" stroke-width="0" fill="url(&#39;#gradTwo&#39;)" r="5.08836" data-v-59ad2fcd><animate attributeName="r" dur="950ms" values="4;3;3;4;5;6;5;4" repeatCount="indefinite" keyTimes="0; 0.15; 0.3; 0.45; 0.6; 0.75; 0.9; 1" keySplines=".42 0 1 1; 0 0 .59 1; .42 0 1 1; 0 0 .59 1; .42 0 1 1; 0 0 .59 1; .42 0 1 1; 0 0 .59 1;" data-v-59ad2fcd></animate></circle><circle class="apos-loading__third" cx="50" cy="10" stroke-width="0" fill="url(&#39;#gradThree&#39;)" r="5.91164" data-v-59ad2fcd><animate attributeName="r" dur="950ms" values="5;4;3;3;4;5;6;5" repeatCount="indefinite" keyTimes="0; 0.15; 0.3; 0.45; 0.6; 0.75; 0.9; 1" keySplines=".42 0 1 1; 0 0 .59 1; .42 0 1 1; 0 0 .59 1; .42 0 1 1; 0 0 .59 1; .42 0 1 1; 0 0 .59 1;" data-v-59ad2fcd></animate></circle></g></svg>',1)]))}const _2e=I(y2e,[["render",w2e],["__scopeId","data-v-59ad2fcd"]]),C2e={class:"apos-loading-block__content"},A2e={key:0,class:"apos-loading-block__text"},k2e={__name:"AposLoadingBlock",props:{topBlockHeight:{type:Number,default:0},label:{type:String,default:null}},setup(e){const t=e;return(n,i)=>{const o=E("AposLoading");return p(),y("div",{class:"apos-loading-block",style:Vt({height:`calc(100% - ${t.topBlockHeight}px)`})},[A("div",C2e,[D(o,{class:"apos-loading-block__loader"}),e.label?(p(),y("span",A2e,$(n.$t(e.label)),1)):x("",!0)])],4)}}},S2e=I(k2e,[["__scopeId","data-v-9aafbab5"]]),x2e={class:"apos-locale"},M2e={class:"apos-locale__label"},T2e={class:"apos-locale__label-name"},E2e={__name:"AposLocale",props:{locale:{type:String,required:!0}},setup(e){const t=e,n=Je(()=>{var o;const i=(o=apos.i18n.locales[t.locale])==null?void 0:o.label;return i?`${i} (${t.locale})`:t.locale});return(i,o)=>(p(),y("div",x2e,[A("span",M2e,$(i.$t("apostrophe:locale"))+": ",1),o[0]||(o[0]=Et()),A("span",T2e,$(n.value),1)]))}},O2e=I(E2e,[["__scopeId","data-v-f3466e5c"]]),$2e={class:"apos-locales-picker","data-apos-test":"localePicker"},I2e={class:"apos-input-wrapper"},L2e=["placeholder"],D2e={class:"apos-locales-picker__list"},R2e=["onClick"],P2e=["tabindex"],H2e={class:"apos-locale-picker__name"},V2e={class:"apos-locales-picker__available"},z2e={class:"apos-locales-picker__available-desc"},N2e={__name:"AposLocalePicker",props:{currentLocale:{type:String,required:!0},localized:{type:Object,required:!0},forbidden:{type:Array,default:()=>[]},forbiddenTooltip:{type:String,default:null},isOpen:{type:Boolean,default:!1}},emits:["switch-locale"],setup(e,{emit:t}){const n=t,i=e,o=Ve(""),s=Ve(Object.entries(window.apos.i18n.locales).map(([v,w])=>({name:v,label:w.label||v}))),r=Je(()=>s.value.filter(({name:v,label:w})=>{const _=k=>k.toLowerCase().includes(o.value.toLowerCase());return _(v)||_(w)})),a=Je(()=>s.value.filter(v=>l(v)));function l(v){return!!i.localized[v.name]}function c(v){return i.currentLocale===v.name}function u(v){return i.forbidden.includes(v.name)}function f(v){n("switch-locale",v)}function m(v){return{"apos-active":c(v),"apos-exists":l(v),"apos-forbidden":u(v)}}function g(v){return u(v)&&{content:i.forbiddenTooltip,placement:"left"}}return(v,w)=>{const _=E("AposIndicator"),k=E("AposButton"),L=xi("apos-tooltip");return p(),y("div",$2e,[A("div",I2e,[Ke(A("input",{"onUpdate:modelValue":w[0]||(w[0]=P=>o.value=P),type:"text",class:"apos-locales-picker__filter",placeholder:v.$t("apostrophe:searchLocalesPlaceholder")},null,8,L2e),[[Eo,o.value]])]),A("ul",D2e,[(p(!0),y(Ce,null,Ie(r.value,P=>Ke((p(),y("li",{key:P.name,class:te([m(P),"apos-locale-picker__item"]),"data-apos-test":"localeItem",onClick:M=>f(P)},[A("button",{tabindex:e.isOpen?"0":"-1",class:"apos-locale-picker__locale-display"},[u(P)?(p(),R(_,{key:0,icon:"lock-icon","icon-color":"var(--a-base-5)",class:"apos-locale-picker__check","icon-size":12,title:v.$t("apostrophe:forbidden")},null,8,["title"])):c(P)?(p(),R(_,{key:1,icon:"check-bold-icon","icon-color":"var(--a-primary)",class:"apos-locale-picker__check","icon-size":12,title:v.$t("apostrophe:currentLocale")},null,8,["title"])):x("",!0),Et(" "+$(P.label)+" ",1),A("span",H2e," ("+$(P.name)+") ",1),A("span",{class:te(["apos-locale-picker__localized",{"apos-state-is-localized":l(P)}])},null,2)],8,P2e)],10,R2e)),[[L,g(P)]])),128))]),A("div",V2e,[A("p",z2e,$(v.$t("apostrophe:documentExistsInLocales")),1),(p(!0),y(Ce,null,Ie(a.value,P=>(p(),R(k,{key:P.name,class:"apos-locales-picker__available-locale",label:P.label,type:"quiet",modifiers:["no-motion"],onClick:M=>f(P)},null,8,["label","onClick"]))),128))])])}}},B2e=I(N2e,[["__scopeId","data-v-e3cbb701"]]),F2e={name:"AposMinMaxCount",props:{modelValue:{required:!0,type:Array},field:{required:!0,type:Object}},computed:{maxed(){return this.field.max!==void 0&&this.modelValue.length>=this.field.max},minError(){let e=!1;return this.effectiveMin&&this.modelValue.length<this.effectiveMin&&(e=!0),e},maxError(){let e=!1;return this.field.max!==void 0&&this.modelValue.length>this.field.max&&(e=!0),e},countLabel(){return this.$t("apostrophe:numberAdded",{count:this.modelValue.length})},minLabel(){return this.effectiveMin?this.$t("apostrophe:minUi",{number:this.effectiveMin}):!1},maxLabel(){return typeof this.field.max=="number"?this.$t("apostrophe:maxUi",{number:this.field.max}):!1},effectiveMin(){return this.field.min?this.field.min:this.field.required?1:0}}},W2e={class:"apos-min-max-count"},U2e={key:0,class:"apos-min-max-count__label"};function j2e(e,t,n,i,o,s){return p(),y("div",W2e,[s.countLabel?(p(),y("span",U2e,$(s.countLabel),1)):x("",!0),s.minLabel?(p(),y("span",{key:1,class:te([s.minError?"apos-has-error":"","apos-min-max-count__label"])},$(s.minLabel),3)):x("",!0),s.maxLabel?(p(),y("span",{key:2,class:te([s.maxError?"apos-has-error":"","apos-min-max-count__label"])},$(s.maxLabel),3)):x("",!0)])}const q2e=I(F2e,[["render",j2e],["__scopeId","data-v-66bc704f"]]),K2e={name:"MenuSwapIcon",props:{title:{type:String,default:null},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}},emits:["click"]},G2e=["aria-hidden","aria-label"],J2e=["fill","width","height"],Y2e={d:"M12,6L7,11H17L12,6M7,13L12,18L17,13H7Z"},Z2e={key:0};function X2e(e,t,n,i,o,s){return p(),y("span",X(e.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon menu-swap-icon",role:"img",onClick:t[0]||(t[0]=r=>e.$emit("click",r))}),[(p(),y("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[A("path",Y2e,[n.title?(p(),y("title",Z2e,$(n.title),1)):x("",!0)])],8,J2e))],16,G2e)}const Q2e=I(K2e,[["render",X2e]]),eCe={name:"AposPager",components:{"menu-swap-icon":Q2e},props:{currentPage:{type:Number,default:1},totalPages:{type:Number,required:!0}},emits:["change","click"],computed:{prevButtonLabel(){return{key:this.currentPage>1?"apostrophe:goToPage":"apostrophe:previousPage",page:this.currentPage-1}},nextButtonLabel(){return{key:this.currentPage<this.totalPages?"apostrophe:goToPage":"apostrophe:nextPage",page:this.currentPage+1}},selectedPage:{get(){return this.currentPage},set(e){this.$emit("change",e)}}},methods:{incrementPage(e){let t=this.currentPage+e;t>this.totalPages?t=this.totalPages:t<1&&(t=1),this.$emit("click",t)}}},tCe={class:"apos-pager"},nCe={class:"apos-input-wrapper"},iCe=["disabled","aria-label"],oCe=["value"];function sCe(e,t,n,i,o,s){const r=E("AposButton"),a=E("menu-swap-icon");return p(),y("nav",tCe,[D(r,{disabled:n.currentPage==1,class:"apos-pager__btn",type:"outline",icon:"chevron-left-icon",modifiers:["small"],"icon-only":!0,label:s.prevButtonLabel,onClick:t[0]||(t[0]=l=>s.incrementPage(-1))},null,8,["disabled","label"]),A("div",nCe,[Ke(A("select",{"onUpdate:modelValue":t[1]||(t[1]=l=>s.selectedPage=l),class:"apos-pager__page-select apos-input apos-input--select",disabled:n.totalPages<=1,"aria-label":e.$t("apostrophe:selectPage")},[(p(!0),y(Ce,null,Ie(n.totalPages,l=>(p(),y("option",{key:l,value:l},$(e.$t("apostrophe:pageNumber",{number:l})),9,oCe))),128))],8,iCe),[[KS,s.selectedPage]]),D(a,{size:18,class:"apos-input-icon"})]),D(r,{disabled:n.currentPage>=n.totalPages,type:"outline",class:"apos-pager__btn",icon:"chevron-right-icon",modifiers:["small"],"icon-only":!0,label:s.nextButtonLabel,onClick:t[2]||(t[2]=l=>s.incrementPage(1))},null,8,["disabled","label"])])}const rCe=I(eCe,[["render",sCe],["__scopeId","data-v-d982824a"]]),aCe={name:"AposPagerDots",props:{dots:{type:Number,required:!0},activeIndex:{type:Number,default:1}},emits:["click"],data(){return{index:this.activeIndex}},methods:{click(e){this.$emit("click",e),this.index=e}}},lCe={class:"apos-pager-dots"},cCe=["onClick"],dCe={class:"apos-sr-only"};function uCe(e,t,n,i,o,s){return p(),y("ul",lCe,[(p(!0),y(Ce,null,Ie(n.dots,r=>(p(),y("li",{key:r,class:"apos-pager-dots__item"},[A("button",{role:"button",class:te([{"apos-is-active":r===o.index},"apos-pager-dots__button"]),onClick:a=>s.click(r)},[A("span",dCe," Activate item "+$(r),1)],10,cCe)]))),128))])}const hCe=I(aCe,[["render",uCe],["__scopeId","data-v-37131294"]]),fCe={name:"AposSelect",props:{icon:{type:String,default:"menu-down-icon"},uid:{type:Number,default:null},classes:{type:Array,default(){return[]}},wrapperClasses:{type:Array,default(){return[]}},choices:{type:Array,default(){return[]}},selected:{type:[String,Number,Boolean],default:""},disabled:{type:Boolean,default:!1},autocomplete:{type:String,default:null}},emits:["change"],methods:{change(e){this.$emit("change",JSON.parse(e))}}},pCe=["uid","disabled","autocomplete"],mCe=["value","selected"];function gCe(e,t,n,i,o,s){const r=E("AposIndicator");return p(),y("div",{class:te(["apos-input-wrapper",n.wrapperClasses])},[A("select",{class:te(["apos-input apos-input--select",n.classes]),uid:n.uid,disabled:n.disabled,autocomplete:n.autocomplete,onChange:t[0]||(t[0]=a=>s.change(a.target.value))},[(p(!0),y(Ce,null,Ie(n.choices,a=>(p(),y("option",{key:JSON.stringify(a.value),value:JSON.stringify(a.value),selected:a.value===n.selected},$(e.$t(a.label)),9,mCe))),128))],42,pCe),D(r,{icon:"menu-down-icon",class:"apos-input-icon","icon-size":20})],2)}const bCe=I(fCe,[["render",gCe],["__scopeId","data-v-d62bfd8c"]]),yCe={name:"AposSlat",props:{item:{type:Object,required:!0},parent:{type:String,required:!0},slatCount:{type:Number,required:!0},engaged:{type:Boolean,default:!1},removable:{type:Boolean,default:!0},selected:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},relationshipSchema:{type:Array,default:()=>null},editorLabel:{type:String,default:null},editorIcon:{type:String,default:null}},emits:["engage","disengage","move","remove","item-clicked","select"],data(){return{more:{button:{label:"apostrophe:moreOperations",iconOnly:!0,icon:"dots-vertical-icon",iconSize:13,type:"inline"},menu:[...this.editorIcon?[]:[{label:"apostrophe:editRelationship",action:"edit-relationship"}]]}}},computed:{itemSize(){var t;const e=(t=this.item.length)==null?void 0:t.size;return e<1e6?`${(e/1e3).toFixed(0)}KB`:`${(e/1e6).toFixed(1)}MB`},hasRelationshipEditor(){return this.item.attachment&&this.item.attachment.group==="images"?this.relationshipSchema&&this.item.attachment._isCroppable:this.relationshipSchema},hasRelationshipFields(){return this.hasRelationshipEditor&&Array.isArray(this.relationshipSchema)&&this.relationshipSchema.length}},methods:{nativeClick(e){return e.preventDefault(),e.target.click()},toggleEngage(){this.slatCount>1&&(this.engaged?this.disengage():this.engage())},engage(){this.$emit("engage",this.item._id)},disengage(){this.$emit("disengage",this.item._id)},move(e){if(this.engaged){const t=e>0?1:-1;this.$emit("move",this.item._id,t)}},remove(e,t){e.preventDefault(),this.$emit("remove",this.item,t)},click(e){this.$emit("select",this.item._id)}}},vCe=["data-id","tabindex","aria-pressed","aria-labelledby"],wCe={class:"apos-slat__main"},_Ce={key:4,class:"apos-slat__media-preview"},CCe=["src","alt"],ACe={key:5,class:"apos-slat__extension-wrapper"},kCe={class:"apos-slat__label"},SCe={class:"apos-slat__secondary"},xCe={key:0,class:"apos-slat__size"};function MCe(e,t,n,i,o,s){const r=E("drag-icon"),a=E("AposContextMenu"),l=E("AposButton");return p(),y("li",{class:te(["apos-slat",{"apos-is-engaged":n.engaged,"apos-is-only-child":n.slatCount===1,"apos-is-selected":n.selected,"apos-is-disabled":n.disabled}]),"data-id":n.item._id,tabindex:n.slatCount>1?"0":"-1","aria-pressed":n.engaged,role:"listitem","aria-labelledby":n.parent,onKeydown:[t[4]||(t[4]=Qe((...c)=>s.toggleEngage&&s.toggleEngage(...c),["space"])),t[5]||(t[5]=Qe((...c)=>s.toggleEngage&&s.toggleEngage(...c),["enter"])),t[6]||(t[6]=Qe((...c)=>s.disengage&&s.disengage(...c),["escape"])),t[7]||(t[7]=Qe(c=>s.move(1),["arrow-down"])),t[8]||(t[8]=Qe(c=>s.move(-1),["arrow-up"])),t[9]||(t[9]=Qe(c=>s.remove(c,!0),["backspace"]))],onClick:t[10]||(t[10]=(...c)=>s.click&&s.click(...c))},[A("div",wCe,[n.slatCount>1?(p(),R(r,{key:0,class:"apos-slat__control apos-slat__control--drag",size:13})):x("",!0),s.hasRelationshipFields&&o.more.menu.length?(p(),R(a,{key:1,button:o.more.button,menu:o.more.menu,"menu-placement":"bottom-start",disabled:n.disabled,onItemClicked:t[0]||(t[0]=c=>e.$emit("item-clicked",n.item))},null,8,["button","menu","disabled"])):x("",!0),n.editorIcon&&s.hasRelationshipEditor?(p(),R(l,{key:2,class:"apos-slat__editor-btn",role:"button",tooltip:{content:n.editorLabel,placement:"bottom"},icon:n.editorIcon,"icon-only":!0,modifiers:["inline"],disabled:n.disabled,onClick:t[1]||(t[1]=c=>e.$emit("item-clicked",n.item)),onKeydown:[Qe(Ue(s.nativeClick,["prevent"]),["enter"]),Qe(Ue(s.nativeClick,["prevent"]),["space"])]},null,8,["tooltip","icon","disabled","onKeydown"])):x("",!0),n.item._url||n.item._urls?(p(),R(l,{key:3,class:"apos-slat__control apos-slat__control--view",icon:"eye-icon","icon-only":!0,modifiers:["inline"],label:"apostrophe:preview",href:n.item._url||n.item._urls.original,target:"_blank",onKeydown:[Qe(Ue(s.nativeClick,["prevent"]),["enter"]),Qe(Ue(s.nativeClick,["prevent"]),["space"])]},null,8,["href","onKeydown"])):x("",!0),n.item.attachment&&n.item.attachment.group==="images"&&n.item.attachment._urls?(p(),y("div",_Ce,[A("img",{src:n.item.attachment._urls.uncropped?n.item.attachment._urls.uncropped["one-sixth"]:n.item.attachment._urls["one-sixth"],alt:n.item.description||n.item.title,class:"apos-slat__media"},null,8,CCe)])):n.item.extension?(p(),y("div",ACe,[A("span",{class:te(["apos-slat__extension",[`apos-slat__extension--${n.item.extension}`]])},$(n.item.extension),3)])):x("",!0),A("div",kCe,$(n.item.title),1)]),A("div",SCe,[n.item.length&&n.item.length.size?(p(),y("div",xCe,$(s.itemSize),1)):x("",!0),n.removable?(p(),R(l,{key:1,class:"apos-slat__control apos-slat__control--remove",icon:"close-icon","icon-only":!0,modifiers:["inline"],label:"apostrophe:removeItem",disabled:n.disabled,onClick:t[2]||(t[2]=c=>s.remove(c)),onKeydown:t[3]||(t[3]=Qe(Ue(c=>s.remove(c),["prevent"]),["space"]))},null,8,["disabled"])):x("",!0)])],42,vCe)}const TCe=I(yCe,[["render",MCe],["__scopeId","data-v-96826fc9"]]),ECe={name:"AposSlatList",components:{draggable:dm},props:{modelValue:{type:Array,required:!0},disabled:{type:Boolean,default:!1},removable:{type:Boolean,default:!0},selected:{type:String,default:null},relationshipSchema:{type:Array,default:()=>null},editorLabel:{type:String,default:null},editorIcon:{type:String,default:null},duplicate:{type:String,default:null}},emits:["item-clicked","select","update:modelValue"],data(){return{isDragging:!1,engaged:null,next:this.modelValue.slice()}},computed:{listId(){return`sortableList-${qt()}`},dragOptions(){return{animation:0,disabled:this.disabled||this.next.length<=1,ghostClass:"apos-is-dragging"}}},watch:{modelValue(){this.next=this.modelValue.slice()},next(e,t){let n=!0;if(e.length===this.modelValue.length){for(let i=0;i<e.length;i++)if(e[i]._id!==this.modelValue[i]._id||e[i].title!==this.modelValue[i].title){n=!1;break}}else n=!1;n||this.$emit("update:modelValue",this.next)}},methods:{update({oldIndex:e,newIndex:t}){this.next.splice(t,0,this.next.splice(e,1)[0]),this.next=this.next.slice()},engage(e){this.engaged=e},disengage(e){this.engaged=null},select(e){this.$emit("select",e)},remove(e,t){const n=this.getIndex(e._id);this.next=this.next.filter(i=>e._id!==i._id),t&&this.next[n]?this.focusElement(this.next[n]._id):t&&this.next[n-1]&&this.focusElement(this.next[n-1]._id)},move(e,t){const n=this.getIndex(e),i=t>0?n+1:n-1;this.next[i]&&(this.next.splice(i,0,this.next.splice(n,1)[0]),this.focusElement(e))},getIndex(e){let t=null;return this.next.forEach((n,i)=>{n._id===e&&(t=i)}),t},focusElement(e){this.$refs.root.querySelector(`[data-id="${e}"]`)&&this.$nextTick(()=>{this.$refs.root.querySelector(`[data-id="${e}"]`).focus()})}}},OCe={ref:"root"};function $Ce(e,t,n,i,o,s){const r=E("AposSlat"),a=E("draggable");return p(),y("div",OCe,[D(a,{id:s.listId,"item-key":"_id",class:"apos-slat-list",tag:"ol",role:"list",options:s.dragOptions,list:o.next,onUpdate:s.update},{item:Q(({element:l})=>[D(Oc,{type:"transition",name:"apos-flip-list"},{default:Q(()=>[(p(),R(r,{key:l._id,class:te(["apos-slat-list__item",{"apos-slat-list__item--disabled":n.disabled,"apos-input--error":n.duplicate}]),item:l,selected:n.selected===l._id,disabled:n.disabled,engaged:o.engaged===l._id,parent:s.listId,"slat-count":o.next.length,removable:n.removable,"relationship-schema":n.relationshipSchema,"editor-label":n.editorLabel,"editor-icon":n.editorIcon,onRemove:s.remove,onEngage:s.engage,onDisengage:s.disengage,onSelect:s.select,onMove:s.move,onItemClicked:c=>e.$emit("item-clicked",l)},null,8,["item","selected","class","disabled","engaged","parent","slat-count","removable","relationship-schema","editor-label","editor-icon","onRemove","onEngage","onDisengage","onSelect","onMove","onItemClicked"]))]),_:2},1024)]),_:1},8,["id","options","list","onUpdate"])],512)}const ICe=I(ECe,[["render",$Ce],["__scopeId","data-v-961cb845"]]),LCe={name:"AposSpinner",props:{color:{type:String,default:"--a-primary"},colorLight:{type:String,default:"--a-primary-transparent-50"},weight:{type:String,default:"normal"}},computed:{style(){return this.color?`color: var(${this.color});`:"color: var(--a-primary);"},stopColorLight(){const e=this.colorLight||this.color;return e!=null&&e.startsWith("--")?`var(${e})`:e},stopColorDark(){var e;return(e=this.color)!=null&&e.startsWith("--")?`var(${this.color})`:this.color},className(){return`apos-spinner--${this.weight}`}}},DCe={id:"linear-gradient",x1:"-280.32",y1:"390.11",x2:"-279.82",y2:"390.9",gradientTransform:"matrix(22.2, 0, 0, -22.2, 6233.2, 8673.92)",gradientUnits:"userSpaceOnUse"},RCe=["stop-color"],PCe=["stop-color"],HCe={id:"linear-gradient-2",x1:"-276.41",y1:"379.82",x2:"-276.72",y2:"379.33",gradientTransform:"matrix(17.69, 0, 0, -13.7, 4908.02, 5205.92)",gradientUnits:"userSpaceOnUse"},VCe=["stop-color"],zCe=["stop-color"];function NCe(e,t,n,i,o,s){return p(),y("div",{class:te(["apos-spinner",s.className])},[n.weight==="heavy"?(p(),y("svg",{key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 23 23",class:"apos-spinner__svg apos-spinner__svg--heavy",style:Vt(s.style)},[A("defs",null,[A("linearGradient",DCe,[A("stop",{offset:"0","stop-color":s.stopColorLight},null,8,RCe),A("stop",{offset:"1","stop-color":s.stopColorDark},null,8,PCe)]),A("linearGradient",HCe,[A("stop",{offset:"0","stop-color":s.stopColorLight},null,8,VCe),A("stop",{offset:"1","stop-color":s.stopColorDark},null,8,zCe)])]),t[0]||(t[0]=A("path",{class:"apos-spinner__svg-track",d:"M11.5.32a11.1,11.1,0,1,0,11.1,11.1A11.1,11.1,0,0,0,11.5.32Zm0,5.2a5.9,5.9,0,1,1-5.9,5.9A5.9,5.9,0,0,1,11.5,5.52Z",fill:"url(#linear-gradient)"},null,-1)),t[1]||(t[1]=A("path",{class:"apos-spinner__svg-spinner",d:"M11.5.32a11.1,11.1,0,0,1,11.1,11.1,2.6,2.6,0,0,1-5.19.17v-.17a5.9,5.9,0,0,0-5.9-5.9A5.83,5.83,0,0,0,9,6.07l-.29.14A2.6,2.6,0,1,1,6.29,1.62,11,11,0,0,1,11.5.32Z",fill:"url(#linear-gradient-2)"},null,-1))],4)):(p(),y("svg",{key:1,xmlns:"http://www.w3.org/2000/svg",class:"apos-spinner__svg",width:"38",height:"38",viewBox:"0 0 38 38",style:Vt(s.style)},t[2]||(t[2]=[ml('<defs data-v-7bba7fc1><linearGradient id="a" x1="8.042%" y1="0%" x2="65.682%" y2="23.865%" data-v-7bba7fc1><stop stop-color="currentColor" stop-opacity="0" offset="0%" data-v-7bba7fc1></stop><stop stop-color="currentColor" stop-opacity=".631" offset="63.146%" data-v-7bba7fc1></stop><stop stop-color="currentColor" offset="100%" data-v-7bba7fc1></stop></linearGradient></defs><g fill="none" fill-rule="evenodd" data-v-7bba7fc1><g transform="translate(1 1)" data-v-7bba7fc1><path id="Oval-2" d="M36 18c0-9.94-8.06-18-18-18" stroke="url(#a)" stroke-width="2" transform="rotate(266.312 18 18)" data-v-7bba7fc1><animateTransform attributeName="transform" type="rotate" from="0 18 18" to="360 18 18" dur="0.9s" repeatCount="indefinite" data-v-7bba7fc1></animateTransform></path><circle fill="currentColor" cx="36" cy="18" r="1" transform="rotate(266.312 18 18)" data-v-7bba7fc1><animateTransform attributeName="transform" type="rotate" from="0 18 18" to="360 18 18" dur="0.9s" repeatCount="indefinite" data-v-7bba7fc1></animateTransform></circle></g></g>',2)]),4))],2)}const BCe=I(LCe,[["render",NCe],["__scopeId","data-v-7bba7fc1"]]),FCe={name:"AposSubformPreview",props:{subform:{type:Object,required:!0},values:{type:Object,required:!0}},computed:{previewValue(){if(this.subform.help)return this.$t(this.subform.help);let e=this.subform.preview;const t=WCe(this.subform.schema,this.values,this.$t);return e||(e=this.subform.fields.map(n=>`{{ ${n} }}`).join(" ")),this.$t(e,t)}}};function WCe(e,t,n){const i={};for(const o of e){const s=t[o.name];if(typeof s>"u"&&o.def){i[o.name]=o.def;continue}if(s!==null)switch(o.type){case"password":{i[o.name]="********";break}case"boolean":{i[o.name]=o.toggle?n(o.toggle[s]):n(s?"apostrophe:yes":"apostrophe:no");break}case"radio":case"select":{i[o.name]=o.choices.filter(r=>r.value===s).map(r=>n(r.label))[0]||"";break}case"checkbox":{const r=[];for(const a of o.choices)(s||[]).includes(a.value)&&r.push(n(a.label));i[o.name]=r.join(", ");break}default:{const r=typeof s;i[o.name]=["string","number"].includes(r)?s:"";break}}}return i}const UCe={class:"apos-subform-preview"},jCe={class:"apos-subform-preview__label"},qCe={key:1,class:"apos-subform-preview__value-block"};function KCe(e,t,n,i,o,s){var r;return p(),y("div",UCe,[A("div",jCe,$(e.$t(n.subform.label||((r=n.subform.schema)==null?void 0:r[0].label)||"n/a")),1),A("div",{class:te(["apos-subform-preview__value",{"is-help":!!n.subform.help}])},[n.subform.previewComponent?(p(),R(et(n.subform.previewComponent),{key:0,class:"apos-subform-preview__value-block",subform:n.subform,values:n.values},null,8,["subform","values"])):(p(),y("span",qCe,$(s.previewValue),1))],2)])}const GCe=I(FCe,[["render",KCe],["__scopeId","data-v-03247b44"]]),JCe={props:{headers:{type:Array,required:!0},items:{type:Array,required:!0},options:{type:Object,default(){return{}}},width:{type:[Number,String],default:null}},emits:["cell-click","col-click"],computed:{finalHeaders(){return this.headers.map(e=>({...e,id:e.id??e.name,label:e.label??"",action:e.action??!1,width:e.width??0,component:e.action?"button":"span",icon:e.icon??"",iconSize:e.iconSize??10,css:e.css??e.name,format:this.getFormatFactory(e),cellClasses:this.cellCss(e),headerClasses:this.headerCss(e),headerStyles:this.headerStyles(e)}))},tableHeaders(){return this.finalHeaders.filter(e=>["always","table"].includes(e.visibility??"always"))},tableWidth(){return this.width||"100%"},isTableFixed(){return this.isFixedValue(this.tableWidth)},maxCellWidth(){return this.options.maxCellWidth?this.options.maxCellWidth:"auto"},cssTableLayout(){return this.isTableFixed?"fixed":"auto"}},methods:{getValue(e,t,n=!0){var s;const i=((s=t.name)==null?void 0:s.split("."))??null;if(!i)return null;let o=e;try{for(const r of i)o=o[r]}catch{return null}return t.translate===!0&&(o=this.$t(o)),n?t.format(o):o},getFormatFactory(e){if(!e.format)return i=>i;if(typeof e.format=="function")return e.format;const[t,...n]=e.format.split(":");switch(t){case"last":return i=>"..."+`${i}`.substring(`${i}`.length-n[0]);case"yesno":return i=>i?this.$t("apostrophe:yes"):this.$t("apostrophe:no");default:return i=>i}},headerStyles(e){return this.isFixedValue(e.width)?{width:parseInt(e.width,10)+0+"px"}:e.width?{width:e.width}:{width:this.maxCellWidth}},headerCss(e){const t=["apos-table__header-label"];return this.isTableFixed&&t.push("apos-table__cell-field-fixed"),e.action&&t.push("apos-table__header--pointer"),t},cellCss(e){const t=["apos-table__cell-field",`apos-table__cell-field--${e.css}`];return this.isTableFixed&&t.push("apos-table__cell-field-fixed"),t},isFixedValue(e){return e&&(`${e}`.includes("px")||typeof e=="number")},onColClick(e){e.action&&this.$emit("col-click",{header:e})},onCellClick(e,t){this.$emit("cell-click",{item:e,header:t})}}},YCe={"data-apos-test":"tableHeader"},ZCe=["data-apos-test-row-count"],XCe=["data-apos-test-cell-name","data-apos-test-cell-label","data-apos-test-cell-row-count","onClick"],QCe=["title"];function eAe(e,t,n,i,o,s){return p(),y("table",{class:"apos-table","data-apos-test":"table",style:Vt({"--table-width":s.tableWidth,"--table-layout":s.cssTableLayout})},[A("tbody",null,[A("tr",YCe,[(p(!0),y(Ce,null,Ie(s.tableHeaders,r=>(p(),y("th",{key:r.id,scope:"col",class:te(["apos-table__header",`apos-table__header--${r.css}`]),"data-apos-test":"tableHeaderCell",style:Vt(r.headerStyles)},[gt(e.$slots,`header-${r.name}`,{header:r},()=>[(p(),R(et(r.component),{class:te(r.headerClasses),title:e.$t(r.label),onClick:a=>s.onColClick(r)},{default:Q(()=>[r.icon?(p(),R(et(r.icon),{key:0,size:r.iconSize||15,"data-apos-test-icon":r.icon,class:"apos-table__header-icon","fill-color":"currentColor"},null,8,["size","data-apos-test-icon"])):x("",!0),Et(" "+$(e.$t(r.label)),1)]),_:2},1032,["class","title","onClick"]))],!0)],6))),128))]),(p(!0),y(Ce,null,Ie(n.items,(r,a)=>(p(),y("tr",{key:r._id,class:"apos-table__row","data-apos-test":"tableRow","data-apos-test-row-count":a+1},[(p(!0),y(Ce,null,Ie(s.tableHeaders,l=>(p(),y("td",{key:l.id,class:te(["apos-table__cell",`apos-table__cell--${l.css}`]),"data-apos-test":"tableCell","data-apos-test-cell-name":l.name,"data-apos-test-cell-label":e.$t(l.label),"data-apos-test-cell-row-count":a+1,onClick:c=>s.onCellClick(r,l)},[gt(e.$slots,`cell-${l.name}`,{item:r,header:l,classes:l.cellClasses,valueFormatted:s.getValue(r,l),value:s.getValue(r,l,!1)},()=>[A("p",{class:te(l.cellClasses),title:s.getValue(r,l,!1),"data-apos-test":"tableCellField"},$(s.getValue(r,l)),11,QCe)],!0)],10,XCe))),128))],8,ZCe))),128))])],4)}const tAe=I(JCe,[["render",eAe],["__scopeId","data-v-78035975"]]),nAe={props:{label:{type:String,required:!0},slug:{type:String,required:!0}},emits:["click"],methods:{click(){this.$emit("click",this.slug)}}},iAe={class:"apos-tag"};function oAe(e,t,n,i,o,s){const r=E("close-icon");return p(),y("div",iAe,[A("button",{class:"apos-tag__button",onClick:t[0]||(t[0]=(...a)=>s.click&&s.click(...a))},[D(r,{class:"apos-tag__remove",title:"Remove Tag",size:10})]),Et(" "+$(n.label),1)])}const sAe=I(nAe,[["render",oAe],["__scopeId","data-v-c669219e"]]),rAe={class:"apos-apply-tag-menu__inner"},aAe={class:"apos-apply-tag-menu__create"},lAe={key:0,class:"apos-apply-tag-menu__search-body"},cAe={key:0,class:"apos-apply-tag-menu__tags"},dAe={key:1,class:"apos-apply-tag-menu__empty"},uAe={class:"apos-apply-tag-menu__empty-message"},hAe={key:1,class:"apos-apply-tag-menu__create-btns"},fAe={__name:"AposTagApply",props:{primaryAction:{type:Object,default(){return{label:"apostrophe:tagAddTag",action:"add-tag"}}},tags:{type:Array,required:!0},applyTo:{type:Object,required:!0},menuPlacement:{type:String,default:"bottom-start"},button:{type:Object,default:()=>({label:"apostrophe:tag",iconOnly:!1,icon:"label-icon",modifiers:["small"],type:"outline"})}},emits:["added","checked","unchecked","refresh-data"],setup(e,{emit:t}){const n=tr("i18n"),i=e,o=t,s=Nf("textInput"),r=Nf("contextMenu"),a=Ve(!1),l=Ve({data:""}),c=Ve(!1),u=Ve([]),f=Ve(null),m=apos.modules["@apostrophecms/image-tag"].canCreate,g=Je(()=>Object.keys(i.applyTo)),v=Je(()=>l.value.data.toLowerCase()),w=Je(()=>i.tags.some(ce=>ce.searchText===v.value)),_=Je(()=>!i.tags.length&&!l.value.data?n("apostrophe:tagNoTagsYet"):n("apostrophe:tagNoResultFor",{tag:l.value.data})),k=Je(()=>v.value.length?u.value.filter(ce=>ce.searchText.includes(v.value)):u.value),L=Je(()=>g.value.length===0),P=Je(()=>c.value?"apostrophe:tagManage":l.value.data.length?{key:"apostrophe:tagCreateTagName",tag:l.value.data}:"apostrophe:tagCreateTag"),M=Je(()=>l.value.data.length?{key:"apostrophe:tagCreateNewTagName",tag:l.value.data}:"apostrophe:tagCreateTag"),F=Je(()=>({name:"tagSearch",label:c.value?"apostrophe:tagCreateNewTag":"apostrophe:tagSearchApplyTags",placeholder:"apostrophe:tagSearchPlaceholder",help:c.value?"apostrophe:tagCreateHelp":"apostrophe:findOrAddTag",icon:c.value?"":"magnify-icon",disableFocus:!a.value})),z=Je(()=>{const ce={};return i.tags.forEach(ye=>{ce[ye.slug]=N(ye,i.applyTo)}),ce});function ee(){a.value=!0,ae(),s.value.$el.querySelector("input").focus(),f.value=Fo(()=>i.tags,(ce,ye)=>{ie(ye,ce)&&ae()})}function ie(ce,ye){return ce.length!==ye.length?!0:ye.some((Le,Re)=>{const Se=ce[Re];return Se.title!==Le.title||Se.slug!==Le.slug})}function K(){var ce;(ce=f.value)==null||ce.call(f),B()}function ae(){if(!g.value.length)return i.tags;const ce=i.tags.filter(Re=>z.value[Re.slug].model.value===!0&&z.value[Re.slug].choice.indeterminate!==!0),ye=i.tags.filter(Re=>z.value[Re.slug].model.value===!0&&z.value[Re.slug].choice.indeterminate===!0),Le=i.tags.filter(Re=>z.value[Re.slug].model.value!==!0);u.value=[].concat(ce,ye,Le)}function B(){l.value={data:""},q()}function J(){if(l.value.data.length&&k.value.length){const ce=k.value.at(0),{model:ye}=z.value[ce.slug];z.value[ce.slug].model.value=!ye.value,Z(ce.slug);return}oe()}async function he(){if(c.value){const ce=apos.modules["@apostrophecms/image-tag"];await apos.modal.execute(ce.components.managerModal,{moduleName:ce.name}),o("refresh-data"),r.value&&r.value.show();return}if(l.value.data)return oe();W()}function ne(){if(!c.value&&l.value.data)return oe();W()}function oe(){w.value||!m||(o("added",l.value.data),B())}function W(){c.value=!c.value,c.value||ae(),s.value.$el.querySelector("input").focus()}function q(){c.value=!1}function Z(ce){const{model:ye}=z.value[ce];if(ye.value){o("checked",ce);return}delete z.value[ce].choice.indeterminate,o("unchecked",ce)}function N(ce,ye){const Le={field:{type:"checkbox",name:ce.slug},choice:{label:ce.label,value:!0,triggerIndeterminateEvent:!0},model:Ve(!1)},Re=le(ce);return Re==="checked"&&(Le.model.value=!0),Re==="indeterminate"&&(Le.model.value=!0,Le.choice.indeterminate=!0),Le}function le(ce){return g.value.every(ye=>{var Le;return(Le=i.applyTo[ye])==null?void 0:Le.includes(ce.aposDocId)})?"checked":g.value.some(ye=>{var Le;return(Le=i.applyTo[ye])==null?void 0:Le.includes(ce.aposDocId)})?"indeterminate":"unchecked"}return(ce,ye)=>{const Le=E("AposInputString"),Re=E("AposButton"),Se=E("AposCheckbox"),He=E("AposContextMenu");return p(),R(He,{ref:"contextMenu",identifier:"tagTrigger","menu-placement":e.menuPlacement,button:e.button,disabled:L.value,class:te(["apos-apply-tag-menu",{"apos-apply-tag-menu--create-ui":c.value}]),onOpen:ee,onClose:K},{default:Q(()=>[A("div",rAe,[D(Le,{ref:"textInput",modelValue:l.value,"onUpdate:modelValue":ye[0]||(ye[0]=ot=>l.value=ot),field:F.value,onReturn:J},null,8,["modelValue","field"]),A("div",aAe,[Zt(m)?(p(),R(Re,{key:0,class:"apos-apply-tag-menu__create-tag-btn",label:P.value,disabled:!c.value&&w.value,"disable-focus":!a.value,type:"quiet",onClick:he},null,8,["label","disabled","disable-focus"])):x("",!0)])]),c.value?(p(),y("div",hAe,[D(Re,{class:"apos-apply-tag-menu__btn",type:"secondary",label:"apostrophe:cancel",onClick:Ue(W,["stop"])}),D(Re,{class:"apos-apply-tag-menu__btn",type:"primary",label:"apostrophe:tagCreateNewTag",disabled:!l.value.data.length||w.value,tooltip:w.value&&"apostrophe:tagExist",onClick:Ue(oe,["stop"])},null,8,["disabled","tooltip"])])):(p(),y("div",lAe,[k.value.length?(p(),y("ol",cAe,[(p(!0),y(Ce,null,Ie(k.value,ot=>(p(),y("li",{key:ot.slug,class:"apos-apply-tag-menu__tag"},[z.value[ot.slug]?(p(),R(Se,{key:0,modelValue:z.value[ot.slug].model.value,"onUpdate:modelValue":lt=>z.value[ot.slug].model.value=lt,field:z.value[ot.slug].field,choice:z.value[ot.slug].choice,"disable-focus":!a.value,onUpdated:ye[1]||(ye[1]=lt=>Z(lt.target.name))},null,8,["modelValue","onUpdate:modelValue","field","choice","disable-focus"])):x("",!0)]))),128))])):(p(),y("div",dAe,[A("p",uAe,$(_.value),1),Zt(m)?(p(),R(Re,{key:0,class:"apos-apply-tag-menu__empty-create-btn",label:M.value,type:"quiet",disabled:w.value,"disable-focus":!a.value,onClick:Ue(ne,["stop"])},null,8,["label","disabled","disable-focus"])):x("",!0)]))]))]),_:1},8,["menu-placement","button","disabled","class"])}}},pAe=I(fAe,[["__scopeId","data-v-f7aab640"]]),mAe={props:{tags:{type:Array,default(){return[]}},title:{default:"Filter by Tag",type:String}},emits:["update"],data(){return{active:null,emptyState:{message:"apostrophe:tagYourImages"}}},methods:{toggleTag(e){this.active===e?this.active=null:this.active=e,this.$emit("update",this.active)}}},gAe={class:"apos-tag-list"},bAe={key:0,class:"apos-tag-list__inner"},yAe={class:"apos-tag-list__title"},vAe={class:"apos-tag-list__items"},wAe={key:1,class:"apos-tag-list__empty"};function _Ae(e,t,n,i,o,s){const r=E("AposTagListItem"),a=E("AposEmptyState");return p(),y("div",gAe,[n.tags&&n.tags.length?(p(),y("div",bAe,[A("h3",yAe,$(e.$t(n.title)),1),A("ul",vAe,[(p(!0),y(Ce,null,Ie(n.tags,l=>(p(),R(r,{key:l.slug,"active-tag":o.active,tag:l,onClick:s.toggleTag},null,8,["active-tag","tag","onClick"]))),128))])])):(p(),y("div",wAe,[D(a,{"empty-state":o.emptyState},null,8,["empty-state"])]))])}const CAe=I(mAe,[["render",_Ae],["__scopeId","data-v-15c11e24"]]),AAe={props:{activeTag:{type:String,default:null},tag:{required:!0,type:Object}},emits:["click"],computed:{active(){return this.activeTag===this.tag.value}},methods:{click(e){this.$emit("click",e.value)}}},kAe={class:"apos-tag-list__item"},SAe={class:"apos-tag-list__label"};function xAe(e,t,n,i,o,s){const r=E("AposIndicator");return p(),y("li",kAe,[A("button",{class:te([{"apos-is-active":s.active},"apos-tag-list__button"]),onClick:t[0]||(t[0]=a=>s.click(n.tag))},[D(r,{icon:s.active?"close-icon":"label-icon","fill-color":"var(--a-primary)",class:"apos-tag-list__icon","icon-size":12},null,8,["icon"]),A("span",SAe,$(n.tag.label),1)],2)])}const MAe=I(AAe,[["render",xAe],["__scopeId","data-v-1f316940"]]),TAe={props:{modelValue:{type:Boolean,required:!0},disableFocus:{type:Boolean,default:!1}},emits:["toggle"],data(){return{activated:!1}},methods:{toggle(){this.activated=!this.activated}}},EAe={class:"apos-toggle__container"},OAe=["tabindex"];function $Ae(e,t,n,i,o,s){return p(),y("div",EAe,[A("div",{class:te(["apos-toggle__slider",{"apos-toggle__slider--activated":!n.modelValue}]),tabindex:n.disableFocus?null:"0",onClick:t[0]||(t[0]=r=>e.$emit("toggle")),onKeydown:[t[1]||(t[1]=Qe(Ue(r=>e.$emit("toggle"),["stop"]),["space"])),t[2]||(t[2]=Qe(Ue(r=>e.$emit("toggle"),["stop"]),["enter"]))]},null,42,OAe)])}const IAe=I(TAe,[["render",$Ae],["__scopeId","data-v-1402f03e"]]),LAe={name:"AposTree",props:{headers:{type:Array,required:!0},icons:{type:Object,default(){return{}}},items:{type:Array,required:!0},checked:{type:Array,default(){return null}},options:{type:Object,default(){return{}}},moduleOptions:{type:Object,default(){return{}}}},emits:["update","update:checked"],data(){return{myItems:at(this.items),nested:!1,colWidths:null,treeId:qt(),expandedIndex:{}}},computed:{checkedProxy:{get(){return this.checked},set(e){this.$emit("update:checked",e)}},spacingRow(){let e={};const t={};this.headers&&this.headers.forEach(o=>{t[o.property]=o.label});let n=[t];this.items.forEach(o=>{n.push(o),o._children&&o._children.length>0&&(this.nested=!0,n=n.concat(o._children))}),n=n.slice(0,50),n.forEach(o=>{if(e.length===0){e=Object.assign({},o);return}this.headers.forEach(s=>{const r=s.property;(!e[r]||e[r]&&e[r].toString().length<(o[r]||"").toString().length)&&(e[r]=o[r])})});const i=[];return this.headers.forEach(o=>{let s;const r=this.headers.findIndex(l=>l.property===o.property),a={name:o.property,label:e[o.property]};if(r>-1){const l=JSON.parse(JSON.stringify(this.headers[r]));l.icon&&delete a.label,s=Object.assign(l,a)}else s=a;i.push(s)}),i}},watch:{items(e){this.myItems=e}},methods:{setWidths(e){this.colWidths=e},update(e){this.$emit("update",{changedId:e.item.dataset.rowId,startContext:e.from.dataset.listRow,startIndex:e.oldIndex,endContext:e.to.dataset.listRow,endIndex:e.newIndex})},onToggleSection({_id:e,expanded:t}){this.expandedIndex[e]=t}}};function DAe(e,t,n,i,o,s){const r=E("AposTreeHeader"),a=E("AposTreeRows");return p(),y("div",{class:te(["apos-tree",{"apos-tree--nested":o.nested}])},[D(r,{headers:s.spacingRow,icons:n.icons,"spacer-only":!0,onCalculated:s.setWidths},null,8,["headers","icons","onCalculated"]),D(r,{headers:n.headers,icons:n.icons,"col-widths":o.colWidths,hidden:n.options.hideHeader},null,8,["headers","icons","col-widths","hidden"]),D(a,{checked:s.checkedProxy,"onUpdate:checked":t[0]||(t[0]=l=>s.checkedProxy=l),"list-id":"root",rows:o.myItems,headers:n.headers,icons:n.icons,"col-widths":o.colWidths,level:1,nested:o.nested,options:n.options,"tree-id":o.treeId,"module-options":n.moduleOptions,"expanded-index":o.expandedIndex,onUpdate:s.update,onToggle:s.onToggleSection},null,8,["checked","rows","headers","icons","col-widths","nested","options","tree-id","module-options","expanded-index","onUpdate","onToggle"])],2)}const RAe=I(LAe,[["render",DAe],["__scopeId","data-v-662c7545"]]),PAe={name:"AposTreeHeader",props:{headers:{type:Array,required:!0},icons:{type:Object,default(){return{}}},hidden:{type:Boolean,default:!1},spacerOnly:{type:Boolean,default:!1},colWidths:{type:Object,default(){return{}}}},emits:["calculated"],computed:{headerClasses(){return this.spacerOnly||this.hidden?"apos-tree__header--hidden":""}},watch:{headers(){this.spacerOnly&&this.$nextTick(()=>{this.calculateWidths()})}},mounted(){this.spacerOnly&&(this.calculateWidths(),window.addEventListener("resize",na(this.calculateWidths,100)))},unmounted(){this.spacerOnly&&window.removeEventListener("resize",na(this.calculateWidths,100))},methods:{calculateWidths(){const e={};this.headers.forEach(t=>{const n=this.$el.querySelector(`[data-spacer="${t.property}"]`);n&&(e[t.property]=n.clientWidth+15+(t.extraWidth??0))}),this.$emit("calculated",e)},getCellStyles(e){const t={};return this.colWidths&&this.colWidths[e.property]&&(t.width=`${this.colWidths[e.property]}px`),t}}},HAe=["aria-hidden"],VAe=["data-spacer"];function zAe(e,t,n,i,o,s){return p(),y("div",{class:te(["apos-tree__row-data apos-tree__header",s.headerClasses]),"aria-hidden":n.spacerOnly},[(p(!0),y(Ce,null,Ie(n.headers,(r,a)=>(p(),y("span",{key:`${a}-${r.property}`,class:te(["apos-tree__cell",`apos-tree--column-${r.property}`]),"data-spacer":n.spacerOnly&&r.property,style:Vt(s.getCellStyles(r))},[r.columnHeaderIcon?(p(),R(et(n.icons[r.columnHeaderIcon]),{key:0,class:"apos-tree__cell__icon"})):x("",!0),Et(" "+$(e.$t(r.columnHeader)),1)],14,VAe))),128))],10,HAe)}const NAe=I(PAe,[["render",zAe],["__scopeId","data-v-784f4695"]]),BAe={name:"AposTreeRows",components:{draggable:dm},props:{headers:{type:Array,required:!0},icons:{type:Object,default(){return{}}},rows:{type:Array,default(){return[]}},checked:{type:Array,default(){return null}},colWidths:{type:Object,default(){return{}}},level:{type:Number,required:!0},nested:{type:Boolean,required:!0},options:{type:Object,default(){return{}}},listId:{type:String,required:!0},treeId:{type:String,required:!0},expandedIndex:{type:Object,default(){return{}}},moduleOptions:{type:Object,default(){return{}}}},emits:["update","update:checked","change","toggle"],data(){return{treeBranches:[],countModifier:{}}},computed:{computedRows(){return this.rows.map(e=>{var t;return{...e,__count:(this.countModifier[e._id]||0)+(((t=e._children)==null?void 0:t.length)||0),__expanded:this.isExpanded(e._id),__key:`${e._id}-${e.level}-${e.rank}`}})},checkedProxy:{get(){return this.checked},set(e){this.$emit("update:checked",e)}},dragOptions(){return{scroll:!0,scrollSensitivity:100,scrollSpeed:1e3,bubbleScroll:!0,group:this.treeId,fallbackOnBody:!0,swapThreshold:.65,dataListId:this.listId,disabled:!this.options.draggable,handle:".apos-tree__row__icon--handle",ghostClass:"apos-is-dragging",filter:".apos-is-parked"}},maxReached(){return this.options.max!=null&&this.checked.length>=this.options.max}},mounted(){apos.bus.$on("apos-tree-child:added",this.onChildAdd),apos.bus.$on("apos-tree-child:removed",this.onChildRemove),this.$nextTick(()=>{this.$refs["tree-branches"]&&this.setHeights()})},beforeUnmount(){apos.bus.$off("apos-tree-child:added",this.onChildAdd),apos.bus.$off("apos-tree-child:removed",this.onChildRemove)},methods:{pointerEvent(e){e.stopPropagation()},setHeights(){this.treeBranches.forEach(e=>{const t=e.$el.clientHeight+20;e.$el.setAttribute("data-apos-branch-height",`${t}px`),e.$el.style.maxHeight=`${t}px`})},add(e){apos.bus.$emit("apos-tree-child:added",e.to.dataset.listRow)},remove(e){apos.bus.$emit("apos-tree-child:removed",e.from.dataset.listRow)},onChildAdd(e){this.rows.some(t=>t._id===e)&&(this.countModifier[e]=(this.countModifier[e]||0)+1)},onChildRemove(e){this.rows.some(t=>t._id===e)&&(this.countModifier[e]=(this.countModifier[e]||0)-1)},startDrag(){},endDrag(e){this.$emit("update",e),this.$nextTick(()=>{this.treeBranches.length&&this.setHeights()})},toggleSection(e,t){const n=t&&t.row||e.target.closest("[data-apos-tree-row]"),i=n.querySelector("[data-apos-branch-height]"),o=t&&t.toggle||e.target.closest("[data-apos-tree-toggle]"),s=n.dataset.rowId;o.getAttribute("aria-expanded")!=="true"?(i.style.maxHeight=i.getAttribute("data-apos-branch-height"),o.setAttribute("aria-expanded",!0),i.classList.remove("apos-is-collapsed"),this.$emit("toggle",{_id:s,expanded:!0})):i&&(i.style.maxHeight=0,o.setAttribute("aria-expanded",!1),i.classList.add("apos-is-collapsed"),this.$emit("toggle",{_id:s,expanded:!1}))},isExpanded(e){return this.expandedIndex[e]??!this.options.startCollapsed},keydownRow(e){e.key===" "&&(e.preventDefault(),this.selectRow(e))},selectRow(e){if(e.target.closest("[data-apos-tree-toggle]"))return;const n=e.target.closest("[data-apos-tree-row]");this.$emit("change",[n.dataset.rowId]);const i=n.querySelector("[data-apos-tree-toggle]");i&&i.getAttribute("aria-expanded")!=="true"&&this.toggleSection(null,{row:n,toggle:i})},getRowClasses(e){return["apos-tree__row",{"apos-is-parked":!!e.parked,"apos-tree__row--parent":e._children&&e._children.length>0,"apos-tree__row--selectable":this.options.selectable,"apos-tree__row--selected":this.options.selectable&&this.checked[0]===e._id}]},getEffectiveType(e,t){return e.component?e.component:t.type==="@apostrophecms/archive-page"?"span":e.type==="link"?"a":e.type==="button"?"button":"span"},getEffectiveIcon(e,t){const n=(!!t[e.property]).toString();return t.type==="@apostrophecms/archive-page"||!e.cellValue?!1:e.cellValue&&e.cellValue.icon?this.icons[e.cellValue.icon]:e.cellValue[n]&&e.cellValue[n].icon?this.icons[e.cellValue[n].icon]:!1},getEffectiveIconSize(e,t){const n=(!!t[e.property]).toString();return e.cellValue&&e.cellValue.iconSize?e.cellValue.iconSize:e.cellValue[n]&&e.cellValue[n].iconSize?e.cellValue[n].iconSize:15},getEffectiveCellLabel(e,t){const n=["@apostrophecms/archive-page"],i=(!!t[e.property]).toString();if(this.isObject(e.cellValue)){if(n.includes(t.type))return!1;if(e.cellValue[i]){if(typeof e.cellValue[i]=="string")return e.cellValue[i];if(e.cellValue[i].label)return e.cellValue[i].label}}const o=t._publishedDoc,s=o&&o[e.cellValue]!==void 0&&o[e.cellValue]||t[e.cellValue];return s||!1},getCellClasses(e,t){const n=["apos-tree__cell"],i=(!!t[e.property]).toString();return n.push(`apos-tree__cell--${e.property}`),e.cellValue&&e.cellValue.icon&&n.push("apos-tree__cell--icon"),this.isObject(e.cellValue)&&e.cellValue[i]&&e.cellValue[i].class&&n.push(e.cellValue[i].class),n},getCellDisabled(e,t){return this.getEffectiveType(e,t)==="span"?!1:e.type==="link"&&!t[e.property]?!0:!!(t.archived&&e.type==="button")},getCellStyles(e,t){const n={};return this.nested&&t===0&&this.colWidths&&this.colWidths[e]?n.width=`${this.colWidths[e]-24*this.level}px`:this.colWidths&&this.colWidths[e]&&(n.width=`${this.colWidths[e]}px`),n},isObject(e){const t=typeof e;return e!=null&&(t==="object"||t==="function")}}},FAe=["data-row-id","aria-role","tabindex"],WAe={class:"apos-tree__row-data"},UAe=["aria-label","aria-expanded"],jAe={class:"apos-tree__cell__value"},qAe={key:1,class:"apos-tree__cell__label"};function KAe(e,t,n,i,o,s){const r=E("AposIndicator"),a=E("AposCheckbox"),l=E("AposTreeRows",!0),c=E("draggable");return p(),R(c,{"item-key":"_id",class:"apos-tree__list",tag:"ol",list:s.computedRows,options:s.dragOptions,onStart:s.startDrag,onEnd:s.endDrag,onAdd:s.add,onRemove:s.remove},{item:Q(({element:u})=>[A("li",X({"data-row-id":u._id,"data-apos-tree-row":"",class:s.getRowClasses(u),"aria-role":n.options.selectable?"button":null,tabindex:n.options.selectable?0:null},Ec(n.options.selectable?{click:s.selectRow,keydown:s.keydownRow}:{},!0)),[A("div",WAe,[u.__count>0?(p(),y("button",{key:0,class:"apos-tree__row__toggle","data-apos-tree-toggle":"","aria-label":e.$t("apostrophe:toggleSection"),"aria-expanded":u.__expanded,onClick:t[0]||(t[0]=f=>s.toggleSection(f))},[D(r,{icon:"chevron-down-icon",class:"apos-tree__row__toggle-icon"})],8,UAe)):x("",!0),(p(!0),y(Ce,null,Ie(n.headers,(f,m)=>(p(),R(et(s.getEffectiveType(f,u)),{key:`${u.__key}-${f.property}-${m}`,draft:u,published:u._publishedDoc,header:f,href:s.getEffectiveType(f,u)==="a"?u[f.property]:!1,target:f.type==="link"?"_blank":!1,class:te(s.getCellClasses(f,u)),disabled:s.getCellDisabled(f,u),"data-col":f.property,style:Vt(s.getCellStyles(f.property,m)),options:n.moduleOptions,onClick:g=>s.getEffectiveType(f,u)==="button"&&f.action?e.$emit(f.action,u._id):null},{default:Q(()=>[n.options.draggable&&m===0&&!u.parked?(p(),R(r,{key:0,icon:"drag-icon",class:"apos-tree__row__icon apos-tree__row__icon--handle"})):x("",!0),m===0&&u.parked&&u.type!=="@apostrophecms/archive-page"?(p(),R(r,{key:1,icon:"lock-icon",class:"apos-tree__row__icon apos-tree__row__icon--parked",tooltip:"apostrophe:pageIsParked"})):x("",!0),m===0&&u.type==="@apostrophecms/archive-page"?(p(),R(r,{key:2,icon:"lock-icon",class:"apos-tree__row__icon apos-tree__row__icon--parked",tooltip:"apostrophe:cannotMoveArchive"})):x("",!0),n.options.bulkSelect&&m===0?(p(),R(a,{key:3,modelValue:s.checkedProxy,"onUpdate:modelValue":t[1]||(t[1]=g=>s.checkedProxy=g),class:"apos-tree__row__checkbox",field:{name:u._id,hideLabel:!0,label:e.$t({key:"apostrophe:toggleSelectionOf",title:u.title}),readOnly:s.maxReached&&!n.checked.includes(u._id)},choice:{value:u._id},onPointerdown:s.pointerEvent},null,8,["modelValue","field","choice","onPointerdown"])):x("",!0),A("span",jAe,[s.getEffectiveIcon(f,u)?(p(),R(r,{key:0,icon:s.getEffectiveIcon(f,u),class:"apos-tree__cell__icon","icon-size":s.getEffectiveIconSize(f,u)},null,8,["icon","icon-size"])):x("",!0),s.getEffectiveCellLabel(f,u)?(p(),y("span",qAe,$(s.getEffectiveCellLabel(f,u)),1)):x("",!0)])]),_:2},1032,["draft","published","header","href","target","class","disabled","data-col","style","options","onClick"]))),128))]),D(l,{ref:f=>o.treeBranches.push(f),checked:s.checkedProxy,"onUpdate:checked":t[2]||(t[2]=f=>s.checkedProxy=f),"data-apos-branch-height":"","data-list-row":u._id,rows:u._children,headers:n.headers,icons:n.icons,"col-widths":n.colWidths,level:n.level+1,nested:n.nested,"list-id":u._id,"tree-id":n.treeId,options:n.options,class:te({"apos-is-collapsed":!u.__expanded}),style:Vt({"max-height":u.__expanded?null:"0"}),"module-options":n.moduleOptions,"expanded-index":n.expandedIndex,onUpdate:t[3]||(t[3]=f=>e.$emit("update",f)),onToggle:t[4]||(t[4]=f=>e.$emit("toggle",f))},null,8,["checked","data-list-row","rows","headers","icons","col-widths","level","nested","list-id","tree-id","options","class","style","module-options","expanded-index"])],16,FAe)]),_:1},8,["list","options","onStart","onEnd","onAdd","onRemove"])}const GAe=I(BAe,[["render",KAe],["__scopeId","data-v-d332207d"]]),JAe={name:"AposSettingsManager",props:{restore:{type:String,default:null}},data(){return{modal:{busy:!1,active:!1,showModal:!1,type:"overlay"},values:{data:{}},docReady:!1,errors:null,busy:!1,expanded:null,subformUpdateTimeouts:{},activeGroup:null,restoreRefTimeout:null}},computed:{moduleOptions(){return apos.settings},action(){return this.moduleOptions.action},subforms(){return this.moduleOptions.subforms},groups(){const e={};return this.subforms.forEach(t=>{t.group&&!e[t.group.name]?e[t.group.name]={name:t.group.name,label:t.group.label,index:[t.name],subforms:[t]}:t.group&&(e[t.group.name].index.push(t.name),e[t.group.name].subforms.push(t))}),e}},async mounted(){var e;if(this.activeGroup||(this.activeGroup=Object.keys(this.groups)[0]),this.modal.active=!0,await this.loadData(),this.restore){const t=this.subforms.find(n=>n.name===this.restore);this.activeGroup=(e=t==null?void 0:t.group)==null?void 0:e.name,this.activeGroup&&(this.restoreRefTimeout=setTimeout(()=>{var n,i;(i=(n=this.$refs[t.name])==null?void 0:n[0])==null||i.scrollIntoView()},1e3),this.setUpdatedTimeout(this.restore,5e3))}},beforeUnmount(){clearTimeout(this.restoreRefTimeout),Object.values(this.subformUpdateTimeouts).forEach(clearTimeout)},methods:{close(){this.modal.showModal=!1},updateExpanded(e){this.expanded=e.value?e.name:null,this.expanded&&(clearTimeout(this.subformUpdateTimeouts[e.name]),delete this.setSubformValues[e.name])},async submit(e){this.errors=null,this.busy=!0;try{const t=await apos.http.patch(`${this.action}/${e.name}`,{busy:!1,body:e.values});this.values.data[e.name]=t,this.setUpdatedTimeout(e.name),this.updateExpanded({name:e.name,value:!1});const n=this.subforms.find(i=>i.name===e.name);n!=null&&n.reload&&window.location.reload()}catch(t){await this.handleSaveError(t,{fallback:this.$t("apostrophe:error")})}finally{this.busy=!1}},setUpdatedTimeout(e,t=3e3){const n=setTimeout(()=>{delete this.subformUpdateTimeouts[e]},t);this.subformUpdateTimeouts[e]=n},async loadData(){const e=await apos.http.get(this.action,{busy:!0});this.setSubformValues(e),this.docReady=!0},setSubformValues(e){const t={};for(const n of this.subforms){t[n.name]={};for(const i of n.schema)t[n.name][i.name]=e[i.name]}this.values.data=t},async handleSaveError(e,{fallback:t}){if(console.error(e),e.body&&e.body.data&&e.body.data.errors){const n={};e.body.data.errors.forEach(i=>{n[i.path]=i}),this.errors=n}else await apos.notify(e.body&&e.body.message||t,{type:"danger",icon:"alert-circle-icon",dismiss:!0})}}},YAe={name:"AposSettingsManager",mixins:[JAe],emits:["modal-result"]},ZAe={class:"apos-settings__group-items"},XAe=["data-apos-test-name","data-apos-test-label","onClick"],QAe=["data-apos-test-name","data-apos-test-label","data-apos-test-active"],eke={class:"apos-settings__heading"};function tke(e,t,n,i,o,s){const r=E("AposButton"),a=E("AposModalBody"),l=E("AposSubform"),c=E("AposModal");return p(),R(c,{class:"apos-settings",modal:e.modal,"modal-title":e.$t("apostrophe:settings"),onEsc:e.close,onInactive:t[0]||(t[0]=u=>e.modal.active=!1),onShowModal:t[1]||(t[1]=u=>e.modal.showModal=!0)},{secondaryControls:Q(()=>[D(r,{type:"default",label:"apostrophe:close",disabled:e.busy,onClick:e.close},null,8,["disabled","onClick"])]),leftRail:Q(()=>[D(a,{class:"apos-settings__group"},{bodyMain:Q(()=>[A("ul",ZAe,[(p(!0),y(Ce,null,Ie(e.groups,(u,f)=>(p(),y("li",{key:f,class:te(["apos-settings__group-item",{"apos-is-active":f===e.activeGroup}])},[A("button",{"data-apos-test":"groupTrigger","data-apos-test-name":f,"data-apos-test-label":e.$t(u.label),onClick:m=>e.activeGroup=f},$(e.$t(u.label)),9,XAe)],2))),128))])]),_:1})]),main:Q(()=>[e.docReady?(p(),R(a,{key:0,class:"apos-settings__content"},{bodyMain:Q(()=>[(p(!0),y(Ce,null,Ie(e.groups,(u,f)=>Ke((p(),y("div",{key:f,class:"apos-settings__subform-group","data-apos-test":"subformGroup","data-apos-test-name":f,"data-apos-test-label":e.$t(u.label),"data-apos-test-active":f===e.activeGroup},[A("h2",eke,$(e.$t(u.label)),1),(p(!0),y(Ce,null,Ie(u.subforms,m=>(p(),R(l,{key:m.name,ref_for:!0,ref:m.name,busy:e.busy,separator:u.subforms.length>1,errors:e.errors,subform:m,values:e.values.data[m.name],expanded:e.expanded===m.name,"update-indicator":!!e.subformUpdateTimeouts[m.name],"data-apos-test":"subform","data-apos-test-name":m.name,"data-apos-test-label":e.$t(m.label),"data-apos-test-expanded":e.expanded?"true":"false",onUpdateExpanded:e.updateExpanded,onSubmit:e.submit},null,8,["busy","separator","errors","subform","values","expanded","update-indicator","data-apos-test-name","data-apos-test-label","data-apos-test-expanded","onUpdateExpanded","onSubmit"]))),128))],8,QAe)),[[on,f===e.activeGroup]])),128))]),_:1})):x("",!0)]),_:1},8,["modal","modal-title","onEsc"])}const nke=I(YAe,[["render",tke],["__scopeId","data-v-12e909c2"]]);function ike(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var N5=ike,oke=typeof wi=="object"&&wi&&wi.Object===Object&&wi,ske=oke,rke=ske,ake=typeof self=="object"&&self&&self.Object===Object&&self,lke=rke||ake||Function("return this")(),B5=lke,cke=B5,dke=function(){return cke.Date.now()},uke=dke,hke=/\s/;function fke(e){for(var t=e.length;t--&&hke.test(e.charAt(t)););return t}var pke=fke,mke=pke,gke=/^\s+/;function bke(e){return e&&e.slice(0,mke(e)+1).replace(gke,"")}var yke=bke,vke=B5,wke=vke.Symbol,F5=wke,GA=F5,W5=Object.prototype,_ke=W5.hasOwnProperty,Cke=W5.toString,ld=GA?GA.toStringTag:void 0;function Ake(e){var t=_ke.call(e,ld),n=e[ld];try{e[ld]=void 0;var i=!0}catch{}var o=Cke.call(e);return i&&(t?e[ld]=n:delete e[ld]),o}var kke=Ake,Ske=Object.prototype,xke=Ske.toString;function Mke(e){return xke.call(e)}var Tke=Mke,JA=F5,Eke=kke,Oke=Tke,$ke="[object Null]",Ike="[object Undefined]",YA=JA?JA.toStringTag:void 0;function Lke(e){return e==null?e===void 0?Ike:$ke:YA&&YA in Object(e)?Eke(e):Oke(e)}var Dke=Lke;function Rke(e){return e!=null&&typeof e=="object"}var Pke=Rke,Hke=Dke,Vke=Pke,zke="[object Symbol]";function Nke(e){return typeof e=="symbol"||Vke(e)&&Hke(e)==zke}var Bke=Nke,Fke=yke,ZA=N5,Wke=Bke,XA=NaN,Uke=/^[-+]0x[0-9a-f]+$/i,jke=/^0b[01]+$/i,qke=/^0o[0-7]+$/i,Kke=parseInt;function Gke(e){if(typeof e=="number")return e;if(Wke(e))return XA;if(ZA(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=ZA(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Fke(e);var n=jke.test(e);return n||qke.test(e)?Kke(e.slice(2),n?2:8):Uke.test(e)?XA:+e}var Jke=Gke,Yke=N5,j1=uke,QA=Jke,Zke="Expected a function",Xke=Math.max,Qke=Math.min;function eSe(e,t,n){var i,o,s,r,a,l,c=0,u=!1,f=!1,m=!0;if(typeof e!="function")throw new TypeError(Zke);t=QA(t)||0,Yke(n)&&(u=!!n.leading,f="maxWait"in n,s=f?Xke(QA(n.maxWait)||0,t):s,m="trailing"in n?!!n.trailing:m);function g(z){var ee=i,ie=o;return i=o=void 0,c=z,r=e.apply(ie,ee),r}function v(z){return c=z,a=setTimeout(k,t),u?g(z):r}function w(z){var ee=z-l,ie=z-c,K=t-ee;return f?Qke(K,s-ie):K}function _(z){var ee=z-l,ie=z-c;return l===void 0||ee>=t||ee<0||f&&ie>=s}function k(){var z=j1();if(_(z))return L(z);a=setTimeout(k,w(z))}function L(z){return a=void 0,m&&i?g(z):(i=o=void 0,r)}function P(){a!==void 0&&clearTimeout(a),c=0,i=l=o=a=void 0}function M(){return a===void 0?r:L(j1())}function F(){var z=j1(),ee=_(z);if(i=arguments,o=this,l=z,ee){if(a===void 0)return v(l);if(f)return clearTimeout(a),a=setTimeout(k,t),g(l)}return a===void 0&&(a=setTimeout(k,t)),r}return F.cancel=P,F.flush=M,F}var tSe=eSe;const of=Mc(tSe);function ek(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,i)}return n}function Rt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ek(Object(n),!0).forEach(function(i){_o(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ek(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function _o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nSe(e,t){if(e==null)return{};var n,i,o=function(r,a){if(r==null)return{};var l,c,u={},f=Object.keys(r);for(c=0;c<f.length;c++)l=f[c],a.indexOf(l)>=0||(u[l]=r[l]);return u}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function hl(e){return function(t){if(Array.isArray(t))return q1(t)}(e)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||function(t,n){if(t){if(typeof t=="string")return q1(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);if(i==="Object"&&t.constructor&&(i=t.constructor.name),i==="Map"||i==="Set")return Array.from(t);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return q1(t,n)}}(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function q1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var tk,iSe,sf,$n=(tk=function(e){/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(){var t={}.hasOwnProperty;function n(){for(var i=[],o=0;o<arguments.length;o++){var s=arguments[o];if(s){var r=typeof s;if(r==="string"||r==="number")i.push(s);else if(Array.isArray(s)){if(s.length){var a=n.apply(null,s);a&&i.push(a)}}else if(r==="object")if(s.toString===Object.prototype.toString)for(var l in s)t.call(s,l)&&s[l]&&i.push(l);else i.push(s.toString())}}return i.join(" ")}e.exports?(n.default=n,e.exports=n):window.classNames=n})()},tk(sf={path:iSe,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(t==null&&sf.path)}},sf.exports),sf.exports),Yo=function(e){return function(t,n){if(!t)return e;var i;typeof t=="string"?i=t:n=t;var o=e;return i&&(o+="__"+i),o+(n?Object.keys(n).reduce(function(s,r){var a=n[r];return a&&(s+=" "+(typeof a=="boolean"?o+"--"+r:o+"--"+r+"_"+a)),s},""):"")}};function hy(e,t,n){var i,o,s,r,a;function l(){var u=Date.now()-r;u<t&&u>=0?i=setTimeout(l,t-u):(i=null,n||(a=e.apply(s,o),s=o=null))}t==null&&(t=100);var c=function(){s=this,o=arguments,r=Date.now();var u=n&&!i;return i||(i=setTimeout(l,t)),u&&(a=e.apply(s,o),s=o=null),a};return c.clear=function(){i&&(clearTimeout(i),i=null)},c.flush=function(){i&&(a=e.apply(s,o),s=o=null,clearTimeout(i),i=null)},c}hy.debounce=hy;var fy=hy,Ge=function(){return Ge=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ge.apply(this,arguments)};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function U5(e,t){var n,i;return e&&t?(n=""+e+t[0].toUpperCase()+t.slice(1),i=e+"-"+t):(n=e||t,i=e||t),{name:n,classname:i}}function j5(e){return/^blob:/.test(e)}function nk(e){return j5(e)||function(t){return/^data:/.test(t)}(e)}function Bl(e){return!!(e&&e.constructor&&e.call&&e.apply)}function Pn(e){return e===void 0}function Lf(e){return typeof e=="object"&&e!==null}function py(e,t,n){var i={};return Lf(e)?(Object.keys(t).forEach(function(o){Pn(e[o])?i[o]=t[o]:Lf(t[o])?Lf(e[o])?i[o]=py(e[o],t[o],n[o]):i[o]=e[o]?t[o]:n[o]:t[o]===!0||t[o]===!1?i[o]=!!e[o]:i[o]=e[o]}),i):e?t:n}function rf(e){var t=Number(e);return Number.isNaN(t)?e:t}function ik(e){return typeof(e=="number"||function(t){return typeof t=="object"&&t!==null}(e)&&toString.call(e)=="[object Number]")&&!q5(e)}function q5(e){return e!=e}function K5(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}var zd=function(e,t){e===void 0&&(e={}),t===void 0&&(t={}),this.type="manipulateImage",this.move=e,this.scale=t},oSe=function(e,t){t===void 0&&(t={}),this.type="resize",this.directions=e,this.params=t},X0=function(e){this.type="move",this.directions=e},sSe=function(){function e(t,n,i,o,s){this.type="drag",this.nativeEvent=t,this.position=i,this.previousPosition=o,this.element=n,this.anchor=s}return e.prototype.shift=function(){var t=this,n=t.element,i=t.anchor,o=t.position;if(n){var s=n.getBoundingClientRect(),r=s.left,a=s.top;return{left:o.left-r-i.left,top:o.top-a-i.top}}return{left:0,top:0}},e}(),Q0={name:"DraggableElement",props:{classname:{type:String}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeUnmount:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},mounted:function(){if(!this.$refs.draggable)throw new Error('You should add ref "draggable" to your root element to use draggable mixin');this.touches=[],this.hovered=!1},methods:{onMouseOver:function(){this.hovered||(this.hovered=!0,this.$emit("enter"))},onMouseLeave:function(){this.hovered&&!this.touches.length&&(this.hovered=!1,this.$emit("leave"))},onTouchStart:function(e){e.cancelable&&!this.disabled&&e.touches.length===1&&(this.touches=hl(e.touches),this.hovered||(this.$emit("enter"),this.hovered=!0),e.touches.length&&this.initAnchor(this.touches.reduce(function(t,n){return{clientX:t.clientX+n.clientX/e.touches.length,clientY:t.clientY+n.clientY/e.touches.length}},{clientX:0,clientY:0})),e.preventDefault&&e.preventDefault(),e.stopPropagation())},onTouchEnd:function(){this.processEnd()},onTouchMove:function(e){this.touches.length&&(this.processMove(e,e.touches),e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation())},onMouseDown:function(e){if(!this.disabled){var t={fake:!0,clientX:e.clientX,clientY:e.clientY};this.touches=[t],this.initAnchor(t),e.stopPropagation()}},onMouseMove:function(e){this.touches.length&&(this.processMove(e,[{fake:!0,clientX:e.clientX,clientY:e.clientY}]),e.preventDefault&&e.preventDefault())},onMouseUp:function(){this.processEnd()},initAnchor:function(e){var t=this.$refs.draggable.getBoundingClientRect(),n=t.left,i=t.right,o=t.bottom,s=t.top;this.anchor={left:e.clientX-n,top:e.clientY-s,bottom:o-e.clientY,right:i-e.clientX}},processMove:function(e,t){var n=hl(t);if(this.touches.length){if(this.touches.length===1&&n.length===1){var i=this.$refs.draggable;this.$emit("drag",new sSe(e,i,{left:n[0].clientX,top:n[0].clientY},{left:this.touches[0].clientX,top:this.touches[0].clientY},this.anchor))}this.touches=n}},processEnd:function(){this.touches.length&&this.$emit("drag-end"),this.hovered&&(this.$emit("leave"),this.hovered=!1),this.touches=[]}},emits:["drag","drag-end","leave","enter"]};Q0.render=function(e,t,n,i,o,s){return p(),R("div",{ref:"draggable",class:n.classname,onTouchstart:t[1]||(t[1]=function(){return s.onTouchStart&&s.onTouchStart.apply(s,arguments)}),onMousedown:t[2]||(t[2]=function(){return s.onMouseDown&&s.onMouseDown.apply(s,arguments)}),onMouseover:t[3]||(t[3]=function(){return s.onMouseOver&&s.onMouseOver.apply(s,arguments)}),onMouseleave:t[4]||(t[4]=function(){return s.onMouseLeave&&s.onMouseLeave.apply(s,arguments)})},[gt(e.$slots,"default")],34)};var K1=Yo("vue-handler-wrapper"),G5={name:"HandlerWrapper",components:{DraggableElement:Q0},props:{horizontalPosition:{type:String},verticalPosition:{type:String},disabled:{type:Boolean,default:!1}},computed:{classes:function(){var e;if(this.horizontalPosition||this.verticalPosition){var t,n=U5(this.horizontalPosition,this.verticalPosition);e=K1((_o(t={},n.classname,!0),_o(t,"disabled",this.disabled),t))}else e=K1({disabled:this.disabled});return{root:e,draggable:K1("draggable")}}},emits:["leave","enter","drag","drag-end"]};G5.render=function(e,t,n,i,o,s){var r=E("DraggableElement");return p(),R("div",{class:s.classes.root},[D(r,{class:s.classes.draggable,onDrag:t[1]||(t[1]=function(a){return e.$emit("drag",a)}),onDragEnd:t[2]||(t[2]=function(a){return e.$emit("drag-end")}),onLeave:t[3]||(t[3]=function(a){return e.$emit("leave")}),onEnter:t[4]||(t[4]=function(a){return e.$emit("enter")})},{default:Q(function(){return[gt(e.$slots,"default")]}),_:3},8,["class"])],2)};var rSe=Yo("vue-line-wrapper"),J5={name:"LineWrapper",components:{DraggableElement:Q0},props:{position:{type:String,required:!0},disabled:{type:Boolean,default:!1}},computed:{classname:function(){var e;return rSe((_o(e={},this.position,!0),_o(e,"disabled",this.disabled),e))}},emits:["leave","enter","drag","drag-end"]};J5.render=function(e,t,n,i,o,s){var r=E("DraggableElement");return p(),R(r,{class:s.classname,onDrag:t[1]||(t[1]=function(a){return e.$emit("drag",a)}),onDragEnd:t[2]||(t[2]=function(a){return e.$emit("drag-end")}),onLeave:t[3]||(t[3]=function(a){return e.$emit("leave")}),onEnter:t[4]||(t[4]=function(a){return e.$emit("enter")})},{default:Q(function(){return[gt(e.$slots,"default")]}),_:3},8,["class"])};var us=["left","right","top","bottom"],aSe=["left","right"],lSe=["top","bottom"],cSe=["left","top"],dSe=["fill-area","fit-area","stencil","none"],ok={left:0,top:0,width:0,height:0};function sk(e,t,n){return!(n=n||["width","height","left","top"]).some(function(i){return e[i]!==t[i]})}function Cs(e){return{left:e.left,top:e.top,right:e.left+e.width,bottom:e.top+e.height}}function Cc(e,t){return{left:e.left-t.left,top:e.top-t.top}}function Yn(e){return{left:e.left+e.width/2,top:e.top+e.height/2}}function bu(e,t){var n={left:0,top:0,right:0,bottom:0};return us.forEach(function(i){var o=t[i],s=Cs(e)[i];n[i]=o!==void 0&&s!==void 0?i==="left"||i==="top"?Math.max(0,o-s):Math.max(0,s-o):0}),n}function ds(e,t){return{left:e.left-t.left,top:e.top-t.top,width:e.width+t.left+t.right,height:e.height+t.top+t.bottom}}function Im(e){return{left:-e.left,top:-e.top}}function Vi(e,t){return Ge(Ge({},e),{left:e.left+t.left,top:e.top+t.top})}function Mo(e,t,n,i){if(t!==1){if(n){var o=Yn(e);return{width:e.width*t,height:e.height*t,left:e.left+e.width*(1-t)/2+(n.left-o.left)*(1-t),top:e.top+e.height*(1-t)/2+(n.top-o.top)*(1-t)}}return{width:e.width*t,height:e.height*t,left:e.left+e.width*(1-t)/2,top:e.top+e.height*(1-t)/2}}return e}function Pt(e){return e.width/e.height}function Ac(e,t){return Math.min(t.right!==void 0&&t.left!==void 0?(t.right-t.left)/e.width:1/0,t.bottom!==void 0&&t.top!==void 0?(t.bottom-t.top)/e.height:1/0)}function kc(e,t){var n={left:0,top:0},i=bu(e,t);return i.left&&i.left>0?n.left=i.left:i.right&&i.right>0&&(n.left=-i.right),i.top&&i.top>0?n.top=i.top:i.bottom&&i.bottom>0&&(n.top=-i.bottom),n}function G1(e,t){var n;return t.minimum&&e<t.minimum?n=t.minimum:t.maximum&&e>t.maximum&&(n=t.maximum),n}function Y5(e,t){var n=Pt(e),i=Pt(t);return t.width<1/0&&t.height<1/0?n>i?{width:t.width,height:t.width/n}:{width:t.height*n,height:t.height}:t.width<1/0?{width:t.width,height:t.width/n}:t.height<1/0?{width:t.height*n,height:t.height}:e}function Z5(e,t){var n=t*Math.PI/180;return{width:Math.abs(e.width*Math.cos(n))+Math.abs(e.height*Math.sin(n)),height:Math.abs(e.width*Math.sin(n))+Math.abs(e.height*Math.cos(n))}}function Vr(e,t){var n=t*Math.PI/180;return{left:e.left*Math.cos(n)-e.top*Math.sin(n),top:e.left*Math.sin(n)+e.top*Math.cos(n)}}function Lm(e,t){var n=bu(Zn(e,t),t);return n.left+n.right+n.top+n.bottom?n.left+n.right>n.top+n.bottom?Math.min((e.width+n.left+n.right)/e.width,Ac(e,t)):Math.min((e.height+n.top+n.bottom)/e.height,Ac(e,t)):1}function Zn(e,t,n){n===void 0&&(n=!1);var i=kc(e,t);return Vi(e,n?Im(i):i)}function my(e){return{width:e.right!==void 0&&e.left!==void 0?e.right-e.left:1/0,height:e.bottom!==void 0&&e.top!==void 0?e.bottom-e.top:1/0}}function uSe(e,t){return Ge(Ge({},e),{minWidth:Math.min(t.width,e.minWidth),minHeight:Math.min(t.height,e.minHeight),maxWidth:Math.min(t.width,e.maxWidth),maxHeight:Math.min(t.height,e.maxHeight)})}function X5(e,t,n){n===void 0&&(n=!0);var i={};return us.forEach(function(o){var s=e[o],r=t[o];s!==void 0&&r!==void 0?i[o]=o==="left"||o==="top"?n?Math.max(s,r):Math.min(s,r):n?Math.min(s,r):Math.max(s,r):r!==void 0?i[o]=r:s!==void 0&&(i[o]=s)}),i}function Dm(e,t){return X5(e,t,!0)}function rk(e){var t=e.size,n=e.aspectRatio,i=e.ignoreMinimum,o=e.sizeRestrictions;return!!((t.correctRatio||Pt(t)>=n.minimum&&Pt(t)<=n.maximum)&&t.height<=o.maxHeight&&t.width<=o.maxWidth&&t.width&&t.height&&(i||t.height>=o.minHeight&&t.width>=o.minWidth))}function ak(e,t){return Math.pow(e.width-t.width,2)+Math.pow(e.height-t.height,2)}function Qs(e){var t=e.width,n=e.height,i=e.sizeRestrictions,o={minimum:e.aspectRatio&&e.aspectRatio.minimum||0,maximum:e.aspectRatio&&e.aspectRatio.maximum||1/0},s={width:Math.max(i.minWidth,Math.min(i.maxWidth,t)),height:Math.max(i.minHeight,Math.min(i.maxHeight,n))};function r(c,u){return u===void 0&&(u=!1),c.reduce(function(f,m){return rk({size:m,aspectRatio:o,sizeRestrictions:i,ignoreMinimum:u})&&(!f||ak(m,{width:t,height:n})<ak(f,{width:t,height:n}))?m:f},null)}var a=[];o&&[o.minimum,o.maximum].forEach(function(c){c&&a.push({width:s.width,height:s.width/c,correctRatio:!0},{width:s.height*c,height:s.height,correctRatio:!0})}),rk({size:s,aspectRatio:o,sizeRestrictions:i})&&a.push(s);var l=r(a)||r(a,!0);return l&&{width:l.width,height:l.height}}function gy(e){var t=e.event,n=e.coordinates,i=e.positionRestrictions,o=i===void 0?{}:i,s=Vi(n,t.directions);return Vi(s,kc(s,o))}function hSe(e){var t=e.coordinates,n=e.transform,i=e.imageSize,o=e.sizeRestrictions,s=e.positionRestrictions,r=e.aspectRatio,a=e.visibleArea,l=function(u,f){return gy({coordinates:u,positionRestrictions:s,event:new X0({left:f.left-u.left,top:f.top-u.top})})},c=Ge({},t);return(Array.isArray(n)?n:[n]).forEach(function(u){var f={};Pn((f=typeof u=="function"?u({coordinates:c,imageSize:i,visibleArea:a}):u).width)&&Pn(f.height)||(c=function(m,g){var v=Ge(Ge(Ge({},m),Qs({width:g.width,height:g.height,sizeRestrictions:o,aspectRatio:r})),{left:0,top:0});return l(v,{left:m.left,top:m.top})}(c,Ge(Ge({},c),f))),Pn(f.left)&&Pn(f.top)||(c=l(c,Ge(Ge({},c),f)))}),c}function fSe(e){e.event;var t=e.getAreaRestrictions,n=e.boundaries,i=e.coordinates,o=e.visibleArea;e.aspectRatio;var s=e.stencilSize,r=e.sizeRestrictions,a=e.positionRestrictions;e.stencilReference;var l,c,u,f=Ge({},i),m=Ge({},o),g=Ge({},s);l=Pt(g),c=Pt(f),u===void 0&&(u=.001),(l===0||c===0?Math.abs(c-l)<u:Math.abs(c/l)<1+u&&Math.abs(c/l)>1-u)||(f=Ge(Ge({},f),Qs({sizeRestrictions:r,width:f.width,height:f.height,aspectRatio:{minimum:Pt(g),maximum:Pt(g)}})));var v=Lm(m=Mo(m,f.width*n.width/(m.width*g.width)),t({visibleArea:m,type:"resize"}));return v!==1&&(m=Mo(m,v),f=Mo(f,v)),m=Zn(m=Vi(m,Cc(Yn(f),Yn(m))),t({visibleArea:m,type:"move"})),{coordinates:f=Zn(f,Dm(Cs(m),a)),visibleArea:m}}function pSe(e){var t=e.event,n=e.getAreaRestrictions,i=e.boundaries,o=e.coordinates,s=e.visibleArea;e.aspectRatio,e.stencilSize,e.sizeRestrictions;var r=e.positionRestrictions;e.stencilReference;var a=Ge({},o),l=Ge({},s);if(o&&s&&t.type!=="manipulateImage"){var c={width:0,height:0};l.width,i.width,Pt(i)>Pt(a)?(c.height=.8*i.height,c.width=c.height*Pt(a)):(c.width=.8*i.width,c.height=c.width*Pt(a));var u=Lm(l=Mo(l,a.width*i.width/(l.width*c.width)),n({visibleArea:l,type:"resize"}));l=Mo(l,u),u!==1&&(c.height/=u,c.width/=u),l=Zn(l=Vi(l,Cc(Yn(a),Yn(l))),n({visibleArea:l,type:"move"})),a=Zn(a,Dm(Cs(l),r))}return{coordinates:a,visibleArea:l}}function mSe(e){var t=e.event,n=e.coordinates,i=e.visibleArea,o=e.getAreaRestrictions,s=Ge({},i),r=Ge({},n);if(t.type==="setCoordinates"){var a=Math.max(0,r.width-s.width),l=Math.max(0,r.height-s.height);a>l?s=Mo(s,Math.min(r.width/s.width,Ac(s,o({visibleArea:s,type:"resize"})))):l>a&&(s=Mo(s,Math.min(r.height/s.height,Ac(s,o({visibleArea:s,type:"resize"}))))),s=Zn(s=Vi(s,Im(kc(r,Cs(s)))),o({visibleArea:s,type:"move"}))}return{visibleArea:s,coordinates:r}}function gSe(e){var t=e.imageSize,n=e.visibleArea,i=e.coordinates,o=n||t;return{left:(n?n.left:0)+o.width/2-i.width/2,top:(n?n.top:0)+o.height/2-i.height/2}}function bSe(e){var t=e.imageSize,n=e.visibleArea,i=e.aspectRatio,o=e.sizeRestrictions,s=n||t,r=Math.min(i.maximum||1/0,Math.max(i.minimum||0,Pt(s))),a=s.width<s.height?{width:.8*s.width,height:.8*s.width/r}:{height:.8*s.height,width:.8*s.height*r};return Qs(Ge(Ge({},a),{aspectRatio:i,sizeRestrictions:o}))}function ySe(e){var t,n,i=e.imageSize,o=e.visibleArea,s=e.boundaries,r=e.aspectRatio,a=e.sizeRestrictions,l=e.stencilSize,c=o||i;return Pt(c)>Pt(s)?n=(t=l.height*c.height/s.height)*Pt(l):t=(n=l.width*c.width/s.width)/Pt(l),Qs({width:n,height:t,aspectRatio:r,sizeRestrictions:a})}function vSe(e){var t=e.getAreaRestrictions,n=e.coordinates,i=e.imageSize,o=Pt(e.boundaries);if(n){var s={height:Math.max(n.height,i.height),width:Math.max(n.width,i.width)},r=Y5({width:Pt(s)>o?s.width:s.height*o,height:Pt(s)>o?s.width/o:s.height},my(t())),a={left:n.left+n.width/2-r.width/2,top:n.top+n.height/2-r.height/2,width:r.width,height:r.height},l=bu(n,Cs(Ge({left:0,top:0},i))),c={};return!l.left&&!l.right&&a.width<=i.width&&(c.left=0,c.right=i.width),!l.top&&!l.bottom&&a.height<=i.height&&(c.top=0,c.bottom=i.height),Zn(a,c)}var u=Pt(i);return r={height:u>o?i.height:i.width/o,width:u>o?i.height*o:i.width},{left:i.width/2-r.width/2,top:i.height/2-r.height/2,width:r.width,height:r.height}}function af(e,t){return X5(e,Cs(t))}function wSe(e){var t=e.event,n=e.coordinates,i=e.visibleArea,o=e.sizeRestrictions,s=e.getAreaRestrictions,r=e.positionRestrictions,a=e.adjustStencil,l=t.scale,c=t.move,u=Ge({},i),f=Ge({},n),m=1,g=1,v=l.factor&&Math.abs(l.factor-1)>.001;u=Vi(u,{left:c.left||0,top:c.top||0});var w={stencil:{minimum:Math.max(o.minWidth?o.minWidth/f.width:0,o.minHeight?o.minHeight/f.height:0),maximum:Math.min(o.maxWidth?o.maxWidth/f.width:1/0,o.maxHeight?o.maxHeight/f.height:1/0,Ac(f,r))},area:{maximum:Ac(u,s({visibleArea:u,type:"resize"}))}};l.factor&&v&&(l.factor<1?(g=Math.max(l.factor,w.stencil.minimum))>1&&(g=1):l.factor>1&&(g=Math.min(l.factor,Math.min(w.area.maximum,w.stencil.maximum)))<1&&(g=1)),g&&(u=Mo(u,g,l.center));var _=n.left-i.left,k=i.width+i.left-(n.width+n.left),L=n.top-i.top,P=i.height+i.top-(n.height+n.top);return u=Zn(u=Vi(u,kc(u,{left:r.left!==void 0?r.left-_*g:void 0,top:r.top!==void 0?r.top-L*g:void 0,bottom:r.bottom!==void 0?r.bottom+P*g:void 0,right:r.right!==void 0?r.right+k*g:void 0})),s({visibleArea:u,type:"move"})),f.width=f.width*g,f.height=f.height*g,f.left=u.left+_*g,f.top=u.top+L*g,f=Zn(f,Dm(Cs(u),r)),l.factor&&v&&a&&(l.factor>1?m=Math.min(w.area.maximum,l.factor)/g:l.factor<1&&(m=Math.max(f.height/u.height,f.width/u.width,l.factor/g)),m!==1&&(u=Vi(u=Zn(u=Mo(u,m,l.factor>1?l.center:Yn(f)),s({visibleArea:u,type:"move"})),Im(kc(f,Cs(u)))))),{coordinates:f,visibleArea:u}}function _Se(e){var t=e.aspectRatio,n=e.getAreaRestrictions,i=e.coordinates,o=e.visibleArea,s=e.sizeRestrictions,r=e.positionRestrictions,a=e.imageSize,l=e.previousImageSize,c=e.angle,u=Ge({},i),f=Ge({},o),m=Vr(Yn(Ge({left:0,top:0},l)),c);return(u=Ge(Ge({},Qs({sizeRestrictions:s,aspectRatio:t,width:u.width,height:u.height})),Vr(Yn(u),c))).left-=m.left-a.width/2+u.width/2,u.top-=m.top-a.height/2+u.height/2,f=Mo(f,Lm(f,n({visibleArea:f,type:"resize"}))),{coordinates:u=Zn(u,r),visibleArea:f=Zn(f=Vi(f,Cc(Yn(u),Yn(i))),n({visibleArea:f,type:"move"}))}}function CSe(e){var t=e.flip,n=e.previousFlip,i=e.rotate,o=e.getAreaRestrictions,s=e.coordinates,r=e.visibleArea,a=e.imageSize,l=Ge({},s),c=Ge({},r),u=n.horizontal!==t.horizontal,f=n.vertical!==t.vertical;if(u||f){var m=Vr({left:a.width/2,top:a.height/2},-i),g=Vr(Yn(l),-i),v=Vr({left:u?m.left-(g.left-m.left):g.left,top:f?m.top-(g.top-m.top):g.top},i);l=Vi(l,Cc(v,Yn(l))),g=Vr(Yn(c),-i),c=Zn(c=Vi(c,Cc(v=Vr({left:u?m.left-(g.left-m.left):g.left,top:f?m.top-(g.top-m.top):g.top},i),Yn(c))),o({visibleArea:c,type:"move"}))}return{coordinates:l,visibleArea:c}}function lk(e){var t=e.directions,n=e.coordinates,i=e.positionRestrictions,o=i===void 0?{}:i,s=e.sizeRestrictions,r=e.preserveRatio,a=e.compensate,l=Ge({},t),c=ds(n,l).width,u=ds(n,l).height;c<0&&(l.left<0&&l.right<0?(l.left=-(n.width-s.minWidth)/(l.left/l.right),l.right=-(n.width-s.minWidth)/(l.right/l.left)):l.left<0?l.left=-(n.width-s.minWidth):l.right<0&&(l.right=-(n.width-s.minWidth))),u<0&&(l.top<0&&l.bottom<0?(l.top=-(n.height-s.minHeight)/(l.top/l.bottom),l.bottom=-(n.height-s.minHeight)/(l.bottom/l.top)):l.top<0?l.top=-(n.height-s.minHeight):l.bottom<0&&(l.bottom=-(n.height-s.minHeight)));var f=bu(ds(n,l),o);a&&(f.left&&f.left>0&&f.right===0?(l.right+=f.left,l.left-=f.left):f.right&&f.right>0&&f.left===0&&(l.left+=f.right,l.right-=f.right),f.top&&f.top>0&&f.bottom===0?(l.bottom+=f.top,l.top-=f.top):f.bottom&&f.bottom>0&&f.top===0&&(l.top+=f.bottom,l.bottom-=f.bottom),f=bu(ds(n,l),o));var m={width:1/0,height:1/0,left:1/0,right:1/0,top:1/0,bottom:1/0};if(us.forEach(function(w){var _=f[w];_&&l[w]&&(m[w]=Math.max(0,1-_/l[w]))}),r){var g=Math.min.apply(null,us.map(function(w){return m[w]}));g!==1/0&&us.forEach(function(w){l[w]*=g})}else us.forEach(function(w){m[w]!==1/0&&(l[w]*=m[w])});if(c=ds(n,l).width,u=ds(n,l).height,l.right+l.left&&(c>s.maxWidth?m.width=(s.maxWidth-n.width)/(l.right+l.left):c<s.minWidth&&(m.width=(s.minWidth-n.width)/(l.right+l.left))),l.bottom+l.top&&(u>s.maxHeight?m.height=(s.maxHeight-n.height)/(l.bottom+l.top):u<s.minHeight&&(m.height=(s.minHeight-n.height)/(l.bottom+l.top))),r){var v=Math.min(m.width,m.height);v!==1/0&&us.forEach(function(w){l[w]*=v})}else m.width!==1/0&&aSe.forEach(function(w){l[w]*=m.width}),m.height!==1/0&&lSe.forEach(function(w){l[w]*=m.height});return l}function lf(e,t,n){return t==0&&n==0?e/2:t==0?0:n==0?e:e*Math.abs(t/(t+n))}var ASe=Yo("vue-simple-handler"),kSe=Yo("vue-simple-handler-wrapper"),ev={name:"SimpleHandler",components:{HandlerWrapper:G5},props:{defaultClass:{type:String},hoverClass:{type:String},wrapperClass:{type:String},horizontalPosition:{type:String},verticalPosition:{type:String},disabled:{type:Boolean,default:!1}},data:function(){return{hover:!1}},computed:{classes:function(){var e,t=(_o(e={},this.horizontalPosition,!!this.horizontalPosition),_o(e,this.verticalPosition,!!this.verticalPosition),_o(e,"".concat(this.horizontalPosition,"-").concat(this.verticalPosition),!!(this.verticalPosition&&this.horizontalPosition)),_o(e,"hover",this.hover),e);return{default:$n(ASe(t),this.defaultClass,this.hover&&this.hoverClass),wrapper:$n(kSe(t),this.wrapperClass)}}},methods:{onDrag:function(e){this.$emit("drag",e)},onEnter:function(){this.hover=!0},onLeave:function(){this.hover=!1},onDragEnd:function(){this.$emit("drag-end")}},emits:["drag","drag-end"]};ev.render=function(e,t,n,i,o,s){var r=E("HandlerWrapper");return p(),R(r,{class:s.classes.wrapper,"vertical-position":n.verticalPosition,"horizontal-position":n.horizontalPosition,disabled:n.disabled,onDrag:s.onDrag,onDragEnd:s.onDragEnd,onEnter:s.onEnter,onLeave:s.onLeave},{default:Q(function(){return[D("div",{class:s.classes.default},null,2)]}),_:1},8,["class","vertical-position","horizontal-position","disabled","onDrag","onDragEnd","onEnter","onLeave"])};var SSe=Yo("vue-simple-line"),xSe=Yo("vue-simple-line-wrapper"),tv={name:"SimpleLine",components:{LineWrapper:J5},props:{defaultClass:{type:String},hoverClass:{type:String},wrapperClass:{type:String},position:{type:String},disabled:{type:Boolean,default:!1}},data:function(){return{hover:!1}},computed:{classes:function(){return{root:$n(SSe(_o({},this.position,!0)),this.defaultClass,this.hover&&this.hoverClass),wrapper:$n(xSe(_o({},this.position,!0)),this.wrapperClass)}}},methods:{onDrag:function(e){this.$emit("drag",e)},onEnter:function(){this.hover=!0},onLeave:function(){this.hover=!1},onDragEnd:function(){this.$emit("drag-end")}},emits:["drag","drag-end"]};tv.render=function(e,t,n,i,o,s){var r=E("LineWrapper");return p(),R(r,{class:s.classes.wrapper,position:n.position,disabled:n.disabled,onDrag:s.onDrag,onDragEnd:s.onDragEnd,onEnter:s.onEnter,onLeave:s.onLeave},{default:Q(function(){return[D("div",{class:s.classes.root},null,2)]}),_:1},8,["class","position","disabled","onDrag","onDragEnd","onEnter","onLeave"])};var J1=Yo("vue-bounding-box"),MSe=["east","west",null],TSe=["south","north",null],Q5={name:"BoundingBox",props:{width:{type:Number},height:{type:Number},transitions:{type:Object},handlers:{type:Object,default:function(){return{eastNorth:!0,north:!0,westNorth:!0,west:!0,westSouth:!0,south:!0,eastSouth:!0,east:!0}}},handlersComponent:{type:[Object,String],default:function(){return ev}},handlersClasses:{type:Object,default:function(){return{}}},handlersWrappersClasses:{type:Object,default:function(){return{}}},lines:{type:Object,default:function(){return{west:!0,north:!0,east:!0,south:!0}}},linesComponent:{type:[Object,String],default:function(){return tv}},linesClasses:{type:Object,default:function(){return{}}},linesWrappersClasses:{type:Object,default:function(){return{}}},resizable:{type:Boolean,default:!0}},data:function(){var e=[];return MSe.forEach(function(t){TSe.forEach(function(n){if(t!==n){var i=U5(t,n),o=i.name,s=i.classname;e.push({name:o,classname:s,verticalDirection:n,horizontalDirection:t})}})}),{points:e}},computed:{style:function(){var e={};return this.width&&this.height&&(e.width="".concat(this.width,"px"),e.height="".concat(this.height,"px"),this.transitions&&this.transitions.enabled&&(e.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction))),e},classes:function(){var e=this.handlersClasses,t=this.handlersWrappersClasses,n=this.linesClasses,i=this.linesWrappersClasses;return{root:J1(),handlers:e,handlersWrappers:t,lines:n,linesWrappers:i}},lineNodes:function(){var e=this,t=[];return this.points.forEach(function(n){n.horizontalDirection&&n.verticalDirection||!e.lines[n.name]||t.push({name:n.name,component:e.linesComponent,class:$n(e.classes.lines.default,e.classes.lines[n.name],!e.resizable&&e.classes.lines.disabled),wrapperClass:$n(e.classes.linesWrappers.default,e.classes.linesWrappers[n.name],!e.resizable&&e.classes.linesWrappers.disabled),hoverClass:e.classes.lines.hover,verticalDirection:n.verticalDirection,horizontalDirection:n.horizontalDirection,disabled:!e.resizable})}),t},handlerNodes:function(){var e=this,t=[],n=this.width,i=this.height;return this.points.forEach(function(o){if(e.handlers[o.name]){var s={name:o.name,component:e.handlersComponent,class:$n(e.classes.handlers.default,e.classes.handlers[o.name]),wrapperClass:$n(e.classes.handlersWrappers.default,e.classes.handlersWrappers[o.name]),hoverClass:e.classes.handlers.hover,verticalDirection:o.verticalDirection,horizontalDirection:o.horizontalDirection,disabled:!e.resizable};if(n&&i){var r=o.horizontalDirection,a=o.verticalDirection,l=r==="east"?n:r==="west"?0:n/2,c=a==="south"?i:a==="north"?0:i/2;s.wrapperClass=J1("handler"),s.wrapperStyle={transform:"translate(".concat(l,"px, ").concat(c,"px)")},e.transitions&&e.transitions.enabled&&(s.wrapperStyle.transition="".concat(e.transitions.time,"ms ").concat(e.transitions.timingFunction))}else s.wrapperClass=J1("handler",_o({},o.classname,!0));t.push(s)}}),t}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeUnmount:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},mounted:function(){this.touches=[]},methods:{onEnd:function(){this.$emit("resize-end")},onHandlerDrag:function(e,t,n){var i,o=e.shift(),s=o.left,r=o.top,a={left:0,right:0,top:0,bottom:0};t==="west"?a.left-=s:t==="east"&&(a.right+=s),n==="north"?a.top-=r:n==="south"&&(a.bottom+=r),!n&&t?i="width":n&&!t&&(i="height"),this.resizable&&this.$emit("resize",new oSe(a,{allowedDirections:{left:t==="west"||!t,right:t==="east"||!t,bottom:n==="south"||!n,top:n==="north"||!n},preserveAspectRatio:e.nativeEvent&&e.nativeEvent.shiftKey,respectDirection:i}))}},emits:["resize","resize-end"]};Q5.render=function(e,t,n,i,o,s){return p(),R("div",{ref:"box",class:s.classes.root,style:s.style},[gt(e.$slots,"default"),D("div",null,[(p(!0),R(Ce,null,Ie(s.lineNodes,function(r){return p(),R(et(r.component),{key:r.name,"default-class":r.class,"hover-class":r.hoverClass,"wrapper-class":r.wrapperClass,position:r.name,disabled:r.disabled,onDrag:function(a){return s.onHandlerDrag(a,r.horizontalDirection,r.verticalDirection)},onDragEnd:t[1]||(t[1]=function(a){return s.onEnd()})},null,8,["default-class","hover-class","wrapper-class","position","disabled","onDrag"])}),128))]),(p(!0),R(Ce,null,Ie(s.handlerNodes,function(r){return p(),R("div",{key:r.name,style:r.wrapperStyle,class:r.wrapperClass},[(p(),R(et(r.component),{"default-class":r.class,"hover-class":r.hoverClass,"wrapper-class":r.wrapperClass,"horizontal-position":r.horizontalDirection,"vertical-position":r.verticalDirection,disabled:r.disabled,onDrag:function(a){return s.onHandlerDrag(a,r.horizontalDirection,r.verticalDirection)},onDragEnd:t[2]||(t[2]=function(a){return s.onEnd()})},null,8,["default-class","hover-class","wrapper-class","horizontal-position","vertical-position","disabled","onDrag"]))],6)}),128))],6)};var ESe=Yo("vue-draggable-area"),eT={name:"DraggableArea",props:{movable:{type:Boolean,default:!0},activationDistance:{type:Number,default:20}},computed:{classnames:function(){return{default:ESe()}}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeUnmount:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},mounted:function(){this.touches=[],this.touchStarted=!1},methods:{onTouchStart:function(e){if(e.cancelable){var t=this.movable&&e.touches.length===1;t&&(this.touches=hl(e.touches)),(this.touchStarted||t)&&(e.preventDefault(),e.stopPropagation())}},onTouchEnd:function(){this.touchStarted=!1,this.processEnd()},onTouchMove:function(e){this.touches.length>=1&&(this.touchStarted?(this.processMove(e,e.touches),e.preventDefault(),e.stopPropagation()):K5({x:this.touches[0].clientX,y:this.touches[0].clientY},{x:e.touches[0].clientX,y:e.touches[0].clientY})>this.activationDistance&&(this.initAnchor({clientX:e.touches[0].clientX,clientY:e.touches[0].clientY}),this.touchStarted=!0))},onMouseDown:function(e){if(this.movable&&e.button===0){var t={fake:!0,clientX:e.clientX,clientY:e.clientY};this.touches=[t],this.initAnchor(t),e.stopPropagation()}},onMouseMove:function(e){this.touches.length&&(this.processMove(e,[{fake:!0,clientX:e.clientX,clientY:e.clientY}]),e.preventDefault&&e.cancelable&&e.preventDefault(),e.stopPropagation())},onMouseUp:function(){this.processEnd()},initAnchor:function(e){var t=this.$refs.container.getBoundingClientRect(),n=t.left,i=t.top;this.anchor={x:e.clientX-n,y:e.clientY-i}},processMove:function(e,t){var n=hl(t);if(this.touches.length){var i=this.$refs.container.getBoundingClientRect(),o=i.left,s=i.top;this.touches.length===1&&n.length===1&&this.$emit("move",new X0({left:n[0].clientX-(o+this.anchor.x),top:n[0].clientY-(s+this.anchor.y)}))}},processEnd:function(){this.touches.length&&this.$emit("move-end"),this.touches=[]}},emits:["move","move-end"]};eT.render=function(e,t,n,i,o,s){return p(),R("div",{ref:"container",onTouchstart:t[1]||(t[1]=function(){return s.onTouchStart&&s.onTouchStart.apply(s,arguments)}),onMousedown:t[2]||(t[2]=function(){return s.onMouseDown&&s.onMouseDown.apply(s,arguments)})},[gt(e.$slots,"default")],544)};function Y1(e){var t,n;return{rotate:e.rotate||0,flip:{horizontal:((t=e==null?void 0:e.flip)===null||t===void 0?void 0:t.horizontal)||!1,vertical:((n=e==null?void 0:e.flip)===null||n===void 0?void 0:n.vertical)||!1}}}function OSe(e){return new Promise(function(t,n){try{if(e)if(/^data:/i.test(e))t(function(l){l=l.replace(/^data:([^;]+);base64,/gim,"");for(var c=atob(l),u=c.length,f=new ArrayBuffer(u),m=new Uint8Array(f),g=0;g<u;g++)m[g]=c.charCodeAt(g);return f}(e));else if(/^blob:/i.test(e)){var i=new FileReader;i.onload=function(l){t(l.target.result)},s=e,r=function(l){i.readAsArrayBuffer(l)},(a=new XMLHttpRequest).open("GET",s,!0),a.responseType="blob",a.onload=function(){this.status!=200&&this.status!==0||r(this.response)},a.send()}else{var o=new XMLHttpRequest;o.onreadystatechange=function(){o.readyState===4&&(o.status===200||o.status===0?t(o.response):n("Warning: could not load an image to parse its orientation"),o=null)},o.onprogress=function(){o.getResponseHeader("content-type")!=="image/jpeg"&&o.abort()},o.withCredentials=!1,o.open("GET",e,!0),o.responseType="arraybuffer",o.send(null)}else n("Error: the image is empty")}catch(l){n(l)}var s,r,a})}function tT(e){var t=e.rotate,n=e.flip,i=e.scaleX,o=e.scaleY,s="";return s+=" rotate("+t+"deg) ",s+=" scaleX("+i*(n.horizontal?-1:1)+") ",s+=" scaleY("+o*(n.vertical?-1:1)+") "}function $Se(e){try{var t,n=new DataView(e),i=void 0,o=void 0,s=void 0,r=void 0;if(n.getUint8(0)===255&&n.getUint8(1)===216)for(var a=n.byteLength,l=2;l+1<a;){if(n.getUint8(l)===255&&n.getUint8(l+1)===225){s=l;break}l++}if(s&&(i=s+10,function(g,v,w){var _,k="";for(_=v,w+=v;_<w;_++)k+=String.fromCharCode(g.getUint8(_));return k}(n,s+4,4)==="Exif")){var c=n.getUint16(i);if(((o=c===18761)||c===19789)&&n.getUint16(i+2,o)===42){var u=n.getUint32(i+4,o);u>=8&&(r=i+u)}}if(r){for(var f=n.getUint16(r,o),m=0;m<f;m++)if(l=r+12*m+2,n.getUint16(l,o)===274){l+=8,t=n.getUint16(l,o),n.setUint16(l,1,o);break}}return t}catch{return null}}function ck(e,t){var n=t.getBoundingClientRect(),i=n.left,o=n.top,s={left:0,top:0},r=0;return e.forEach(function(a){s.left+=(a.clientX-i)/e.length,s.top+=(a.clientY-o)/e.length}),e.forEach(function(a){r+=K5({x:s.left,y:s.top},{x:a.clientX-i,y:a.clientY-o})}),{centerMass:s,spread:r,count:e.length}}var nT={props:{touchMove:{type:Boolean,required:!0},mouseMove:{type:Boolean,required:!0},touchResize:{type:Boolean,required:!0},wheelResize:{type:[Boolean,Object],required:!0},eventsFilter:{type:Function,required:!1}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeUnmount:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},created:function(){this.transforming=!1,this.debouncedProcessEnd=fy(this.processEnd),this.touches=[]},methods:{processMove:function(e,t){if(this.touches.length){if(this.touches.length===1&&t.length===1)this.$emit("move",new zd({left:this.touches[0].clientX-t[0].clientX,top:this.touches[0].clientY-t[0].clientY}));else if(this.touches.length>1&&this.touchResize){var n=ck(t,this.$refs.container),i=this.oldGeometricProperties;i.count===n.count&&i.count>1&&this.$emit("resize",new zd({left:i.centerMass.left-n.centerMass.left,top:i.centerMass.top-n.centerMass.top},{factor:i.spread/n.spread,center:n.centerMass})),this.oldGeometricProperties=n}this.touches=t}},processEnd:function(){this.transforming&&(this.transforming=!1,this.$emit("transform-end"))},processStart:function(){this.transforming=!0,this.debouncedProcessEnd.clear()},processEvent:function(e){return this.eventsFilter?this.eventsFilter(e,this.transforming)!==!1:(e.preventDefault(),e.stopPropagation(),!0)},onTouchStart:function(e){if(e.cancelable&&(this.touchMove||this.touchResize&&e.touches.length>1)&&this.processEvent(e)){var t=this.$refs.container,n=t.getBoundingClientRect(),i=n.left,o=n.top,s=n.bottom,r=n.right;this.touches=hl(e.touches).filter(function(a){return a.clientX>i&&a.clientX<r&&a.clientY>o&&a.clientY<s}),this.oldGeometricProperties=ck(this.touches,t)}},onTouchEnd:function(e){e.touches.length===0&&(this.touches=[],this.processEnd())},onTouchMove:function(e){var t=this;if(this.touches.length){var n=hl(e.touches).filter(function(i){return!i.identifier||t.touches.find(function(o){return o.identifier===i.identifier})});this.processEvent(e)&&(this.processMove(e,n),this.processStart())}},onMouseDown:function(e){if(this.mouseMove&&"buttons"in e&&e.buttons===1&&this.processEvent(e)){var t={fake:!0,clientX:e.clientX,clientY:e.clientY};this.touches=[t],this.processStart()}},onMouseMove:function(e){this.touches.length&&this.processEvent(e)&&this.processMove(e,[{clientX:e.clientX,clientY:e.clientY}])},onMouseUp:function(){this.touches=[],this.processEnd()},onWheel:function(e){if(this.wheelResize&&this.processEvent(e)){var t=this.$refs.container.getBoundingClientRect(),n=t.left,i=t.top,o=1+this.wheelResize.ratio*(r=e.deltaY||e.detail||e.wheelDelta,(a=+r)==0||q5(a)?a:a>0?1:-1),s={left:e.clientX-n,top:e.clientY-i};this.$emit("resize",new zd({},{factor:o,center:s})),this.touches.length||this.debouncedProcessEnd()}var r,a}},emits:["resize","move","transform-end"]};nT.render=function(e,t,n,i,o,s){return p(),R("div",{ref:"container",onTouchstart:t[1]||(t[1]=function(){return s.onTouchStart&&s.onTouchStart.apply(s,arguments)}),onMousedown:t[2]||(t[2]=function(){return s.onMouseDown&&s.onMouseDown.apply(s,arguments)}),onWheel:t[3]||(t[3]=function(){return s.onWheel&&s.onWheel.apply(s,arguments)})},[gt(e.$slots,"default")],544)};var by={components:{TransformableImage:nT},props:{touchMove:{type:Boolean,required:!0},mouseMove:{type:Boolean,required:!0},touchResize:{type:Boolean,required:!0},wheelResize:{type:[Boolean,Object],required:!0}},emits:["resize","move"]};by.render=function(e,t,n,i,o,s){var r=E("transformable-image");return p(),R(r,{"touch-move":n.touchMove,"touch-resize":n.touchResize,"mouse-move":n.mouseMove,"wheel-resize":n.wheelResize,onMove:t[1]||(t[1]=function(a){return e.$emit("move",a)}),onResize:t[2]||(t[2]=function(a){return e.$emit("resize",a)})},{default:Q(function(){return[gt(e.$slots,"default")]}),_:3},8,["touch-move","touch-resize","mouse-move","wheel-resize"])};var cf=Yo("vue-preview"),iT={props:{coordinates:{type:Object},transitions:{type:Object},image:{type:Object,default:function(){return{}}},imageClass:{type:String},width:{type:Number},height:{type:Number},fill:{type:Boolean}},data:function(){return{calculatedImageSize:{width:0,height:0},calculatedSize:{width:0,height:0}}},computed:{classes:function(){return{root:cf({fill:this.fill}),wrapper:cf("wrapper"),imageWrapper:cf("image-wrapper"),image:$n(cf("image"),this.imageClass)}},style:function(){if(this.fill)return{};var e={};return this.width&&(e.width="".concat(this.size.width,"px")),this.height&&(e.height="".concat(this.size.height,"px")),this.transitions&&this.transitions.enabled&&(e.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),e},wrapperStyle:function(){var e={width:"".concat(this.size.width,"px"),height:"".concat(this.size.height,"px"),left:"calc(50% - ".concat(this.size.width/2,"px)"),top:"calc(50% - ".concat(this.size.height/2,"px)")};return this.transitions&&this.transitions.enabled&&(e.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),e},imageStyle:function(){if(this.coordinates&&this.image){var e=this.coordinates.width/this.size.width,t=Rt(Rt({rotate:0,flip:{horizontal:!1,vertical:!1}},this.image.transforms),{},{scaleX:1/e,scaleY:1/e}),n=this.imageSize.width,i=this.imageSize.height,o=Z5({width:n,height:i},t.rotate),s={width:"".concat(n,"px"),height:"".concat(i,"px"),left:"0px",top:"0px"},r={rotate:{left:(n-o.width)*t.scaleX/2,top:(i-o.height)*t.scaleY/2},scale:{left:(1-t.scaleX)*n/2,top:(1-t.scaleY)*i/2}};return s.transform=`translate(
				`.concat(-this.coordinates.left/e-r.rotate.left-r.scale.left,"px,").concat(-this.coordinates.top/e-r.rotate.top-r.scale.top,"px) ")+tT(t),this.transitions&&this.transitions.enabled&&(s.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),s}return{}},size:function(){return{width:this.width||this.calculatedSize.width,height:this.height||this.calculatedSize.height}},imageSize:function(){return{width:this.image.width||this.calculatedImageSize.width,height:this.image.height||this.calculatedImageSize.height}}},watch:{image:function(e){(e.width||e.height)&&this.onChangeImage()}},mounted:function(){var e=this;this.onChangeImage(),this.$refs.image.addEventListener("load",function(){e.refreshImage()}),window.addEventListener("resize",this.refresh),window.addEventListener("orientationchange",this.refresh)},unmounted:function(){window.removeEventListener("resize",this.refresh),window.removeEventListener("orientationchange",this.refresh)},methods:{refreshImage:function(){var e=this.$refs.image;this.calculatedImageSize.height=e.naturalHeight,this.calculatedImageSize.width=e.naturalWidth},refresh:function(){var e=this.$refs.root;this.width||(this.calculatedSize.width=e.clientWidth),this.height||(this.calculatedSize.height=e.clientHeight)},onChangeImage:function(){var e=this.$refs.image;e&&e.complete&&this.refreshImage(),this.refresh()}}};iT.render=function(e,t,n,i,o,s){return p(),R("div",{ref:"root",class:s.classes.root,style:s.style},[D("div",{ref:"wrapper",class:s.classes.wrapper,style:s.wrapperStyle},[Ke(D("img",{ref:"image",src:n.image&&n.image.src,class:s.classes.image,style:s.imageStyle},null,14,["src"]),[[on,n.image&&n.image.src]])],6)],6)};var oT={components:{Preview:iT},inheritAttrs:!1};oT.render=function(e,t,n,i,o,s){var r=E("preview");return p(),R(r,X(e.$attrs,{fill:!0}),null,16)};var Z1=Yo("vue-rectangle-stencil"),sT={name:"RectangleStencil",components:{StencilPreview:oT,BoundingBox:Q5,DraggableArea:eT},props:{image:{type:Object},coordinates:{type:Object},stencilCoordinates:{type:Object},handlers:{type:Object},handlersComponent:{type:[Object,String],default:function(){return ev}},lines:{type:Object},linesComponent:{type:[Object,String],default:function(){return tv}},aspectRatio:{type:[Number,String]},minAspectRatio:{type:[Number,String]},maxAspectRatio:{type:[Number,String]},movable:{type:Boolean,default:!0},resizable:{type:Boolean,default:!0},transitions:{type:Object},movingClass:{type:String},resizingClass:{type:String},previewClass:{type:String},boundingBoxClass:{type:String},linesClasses:{type:Object,default:function(){return{}}},linesWrappersClasses:{type:Object,default:function(){return{}}},handlersClasses:{type:Object,default:function(){return{}}},handlersWrappersClasses:{type:Object,default:function(){return{}}}},data:function(){return{moving:!1,resizing:!1}},computed:{classes:function(){return{stencil:$n(Z1({movable:this.movable,moving:this.moving,resizing:this.resizing}),this.moving&&this.movingClass,this.resizing&&this.resizingClass),preview:$n(Z1("preview"),this.previewClass),boundingBox:$n(Z1("bounding-box"),this.boundingBoxClass)}},style:function(){var e=this.stencilCoordinates,t=e.height,n=e.width,i=e.left,o=e.top,s={width:"".concat(n,"px"),height:"".concat(t,"px"),transform:"translate(".concat(i,"px, ").concat(o,"px)")};return this.transitions&&this.transitions.enabled&&(s.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),s}},methods:{onMove:function(e){this.$emit("move",e),this.moving=!0},onMoveEnd:function(){this.$emit("move-end"),this.moving=!1},onResize:function(e){this.$emit("resize",e),this.resizing=!0},onResizeEnd:function(){this.$emit("resize-end"),this.resizing=!1},aspectRatios:function(){return{minimum:this.aspectRatio||this.minAspectRatio,maximum:this.aspectRatio||this.maxAspectRatio}}},emits:["resize","resize-end","move","move-end"]};sT.render=function(e,t,n,i,o,s){var r=E("stencil-preview"),a=E("draggable-area"),l=E("bounding-box");return p(),R("div",{class:s.classes.stencil,style:s.style},[D(l,{width:n.stencilCoordinates.width,height:n.stencilCoordinates.height,transitions:n.transitions,class:s.classes.boundingBox,handlers:n.handlers,"handlers-component":n.handlersComponent,"handlers-classes":n.handlersClasses,"handlers-wrappers-classes":n.handlersWrappersClasses,lines:n.lines,"lines-component":n.linesComponent,"lines-classes":n.linesClasses,"lines-wrappers-classes":n.linesWrappersClasses,resizable:n.resizable,onResize:s.onResize,onResizeEnd:s.onResizeEnd},{default:Q(function(){return[D(a,{movable:n.movable,onMove:s.onMove,onMoveEnd:s.onMoveEnd},{default:Q(function(){return[D(r,{image:n.image,coordinates:n.coordinates,width:n.stencilCoordinates.width,height:n.stencilCoordinates.height,class:s.classes.preview,transitions:n.transitions},null,8,["image","coordinates","width","height","class","transitions"])]}),_:1},8,["movable","onMove","onMoveEnd"])]}),_:1},8,["width","height","transitions","class","handlers","handlers-component","handlers-classes","handlers-wrappers-classes","lines","lines-component","lines-classes","lines-wrappers-classes","resizable","onResize","onResizeEnd"])],6)};var ISe=["transitions"],zs=Yo("vue-advanced-cropper"),rT={name:"Cropper",components:{BackgroundWrapper:by},props:{src:{type:String,default:null},stencilComponent:{type:[Object,String],default:function(){return sT}},backgroundWrapperComponent:{type:[Object,String],default:function(){return by}},stencilProps:{type:Object,default:function(){return{}}},autoZoom:{type:Boolean,default:!1},imageClass:{type:String},boundariesClass:{type:String},backgroundClass:{type:String},foregroundClass:{type:String},minWidth:{type:[Number,String]},minHeight:{type:[Number,String]},maxWidth:{type:[Number,String]},maxHeight:{type:[Number,String]},debounce:{type:[Boolean,Number],default:500},transitions:{type:Boolean,default:!0},checkOrientation:{type:Boolean,default:!0},canvas:{type:[Object,Boolean],default:!0},crossOrigin:{type:[Boolean,String],default:void 0},transitionTime:{type:Number,default:300},imageRestriction:{type:String,default:"fit-area",validator:function(e){return dSe.indexOf(e)!==-1}},roundResult:{type:Boolean,default:!0},defaultSize:{type:[Function,Object]},defaultPosition:{type:[Function,Object]},defaultVisibleArea:{type:[Function,Object]},defaultTransforms:{type:[Function,Object]},defaultBoundaries:{type:[Function,String],validator:function(e){return!(typeof e=="string"&&e!=="fill"&&e!=="fit")}},priority:{type:String,default:"coordinates"},stencilSize:{type:[Object,Function]},resizeImage:{type:[Boolean,Object],default:!0},moveImage:{type:[Boolean,Object],default:!0},autoZoomAlgorithm:{type:Function},resizeAlgorithm:{type:Function,default:function(e){var t=e.event,n=e.coordinates,i=e.aspectRatio,o=e.positionRestrictions,s=e.sizeRestrictions,r=Ge(Ge({},n),{right:n.left+n.width,bottom:n.top+n.height}),a=t.params||{},l=Ge({},t.directions),c=a.allowedDirections||{left:!0,right:!0,bottom:!0,top:!0};s.widthFrozen&&(l.left=0,l.right=0),s.heightFrozen&&(l.top=0,l.bottom=0),us.forEach(function(M){c[M]||(l[M]=0)});var u=ds(r,l=lk({coordinates:r,directions:l,sizeRestrictions:s,positionRestrictions:o})).width,f=ds(r,l).height,m=a.preserveRatio?Pt(r):G1(u/f,i);if(m){var g=a.respectDirection;if(g||(g=r.width>=r.height||m===1?"width":"height"),g==="width"){var v=u/m-r.height;if(c.top&&c.bottom){var w=l.top,_=l.bottom;l.bottom=lf(v,_,w),l.top=lf(v,w,_)}else c.bottom?l.bottom=v:c.top?l.top=v:c.right?l.right=0:c.left&&(l.left=0)}else if(g==="height"){var k=r.width-f*m;if(c.left&&c.right){var L=l.left,P=l.right;l.left=-lf(k,L,P),l.right=-lf(k,P,L)}else c.left?l.left=-k:c.right?l.right=-k:c.top?l.top=0:c.bottom&&(l.bottom=0)}l=lk({directions:l,coordinates:r,sizeRestrictions:s,positionRestrictions:o,preserveRatio:!0,compensate:a.compensate})}return u=ds(r,l).width,f=ds(r,l).height,(m=a.preserveRatio?Pt(r):G1(u/f,i))&&Math.abs(m-u/f)>.001&&us.forEach(function(M){c[M]||(l[M]=0)}),gy({event:new X0({left:-l.left,top:-l.top}),coordinates:{width:n.width+l.right+l.left,height:n.height+l.top+l.bottom,left:n.left,top:n.top},positionRestrictions:o})}},moveAlgorithm:{type:Function,default:gy},initStretcher:{type:Function,default:function(e){var t=e.stretcher,n=e.imageSize,i=Pt(n);t.style.width=n.width+"px",t.style.height=t.clientWidth/i+"px",t.style.width=t.clientWidth+"px"}},fitCoordinates:{type:Function,default:function(e){var t=e.visibleArea,n=e.coordinates,i=e.aspectRatio,o=e.sizeRestrictions,s=e.positionRestrictions,r=Ge(Ge({},n),Qs({width:n.width,height:n.height,aspectRatio:i,sizeRestrictions:{maxWidth:t.width,maxHeight:t.height,minHeight:Math.min(t.height,o.minHeight),minWidth:Math.min(t.width,o.minWidth)}}));return r=Zn(r=Vi(r,Cc(Yn(n),Yn(r))),Dm(Cs(t),s))}},fitVisibleArea:{type:Function,default:function(e){var t=e.visibleArea,n=e.boundaries,i=e.getAreaRestrictions,o=e.coordinates,s=Ge({},t);s.height=s.width/Pt(n),s.top+=(t.height-s.height)/2,(o.height-s.height>0||o.width-s.width>0)&&(s=Mo(s,Math.max(o.height/s.height,o.width/s.width)));var r=Im(kc(o,Cs(s=Mo(s,Lm(s,i({visibleArea:s,type:"resize"}))))));return s.width<o.width&&(r.left=0),s.height<o.height&&(r.top=0),s=Zn(s=Vi(s,r),i({visibleArea:s,type:"move"}))}},areaRestrictionsAlgorithm:{type:Function,default:function(e){var t=e.visibleArea,n=e.boundaries,i=e.imageSize,o=e.imageRestriction,s=e.type,r={};return o==="fill-area"?r={left:0,top:0,right:i.width,bottom:i.height}:o==="fit-area"&&(Pt(n)>Pt(i)?(r={top:0,bottom:i.height},t&&s==="move"&&(t.width>i.width?(r.left=-(t.width-i.width)/2,r.right=i.width-r.left):(r.left=0,r.right=i.width))):(r={left:0,right:i.width},t&&s==="move"&&(t.height>i.height?(r.top=-(t.height-i.height)/2,r.bottom=i.height-r.top):(r.top=0,r.bottom=i.height)))),r}},sizeRestrictionsAlgorithm:{type:Function,default:function(e){return{minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight}}},positionRestrictionsAlgorithm:{type:Function,default:function(e){var t=e.imageSize,n={};return e.imageRestriction!=="none"&&(n={left:0,top:0,right:t.width,bottom:t.height}),n}}},data:function(){return{transitionsActive:!1,imageLoaded:!1,imageAttributes:{width:null,height:null,crossOrigin:null,src:null},defaultImageTransforms:{rotate:0,flip:{horizontal:!1,vertical:!1}},appliedImageTransforms:{rotate:0,flip:{horizontal:!1,vertical:!1}},boundaries:{width:0,height:0},visibleArea:null,coordinates:Rt({},ok)}},computed:{image:function(){return{src:this.imageAttributes.src,width:this.imageAttributes.width,height:this.imageAttributes.height,transforms:this.imageTransforms}},imageTransforms:function(){return{rotate:this.appliedImageTransforms.rotate,flip:{horizontal:this.appliedImageTransforms.flip.horizontal,vertical:this.appliedImageTransforms.flip.vertical},translateX:this.visibleArea?this.visibleArea.left/this.coefficient:0,translateY:this.visibleArea?this.visibleArea.top/this.coefficient:0,scaleX:1/this.coefficient,scaleY:1/this.coefficient}},imageSize:function(){var e=function(t){return t*Math.PI/180}(this.imageTransforms.rotate);return{width:Math.abs(this.imageAttributes.width*Math.cos(e))+Math.abs(this.imageAttributes.height*Math.sin(e)),height:Math.abs(this.imageAttributes.width*Math.sin(e))+Math.abs(this.imageAttributes.height*Math.cos(e))}},initialized:function(){return!!(this.visibleArea&&this.imageLoaded)},settings:function(){var e=py(this.resizeImage,{touch:!0,wheel:{ratio:.1},adjustStencil:!0},{touch:!1,wheel:!1,adjustStencil:!1});return{moveImage:py(this.moveImage,{touch:!0,mouse:!0},{touch:!1,mouse:!1}),resizeImage:e}},coefficient:function(){return this.visibleArea?this.visibleArea.width/this.boundaries.width:0},areaRestrictions:function(){return this.imageLoaded?this.areaRestrictionsAlgorithm({imageSize:this.imageSize,imageRestriction:this.imageRestriction,boundaries:this.boundaries}):{}},transitionsOptions:function(){return{enabled:this.transitionsActive,timingFunction:"ease-in-out",time:350}},sizeRestrictions:function(){if(this.boundaries.width&&this.boundaries.height&&this.imageSize.width&&this.imageSize.height){var e=this.sizeRestrictionsAlgorithm({imageSize:this.imageSize,minWidth:Pn(this.minWidth)?0:rf(this.minWidth),minHeight:Pn(this.minHeight)?0:rf(this.minHeight),maxWidth:Pn(this.maxWidth)?1/0:rf(this.maxWidth),maxHeight:Pn(this.maxHeight)?1/0:rf(this.maxHeight)});if(e=function(i){var o=i.areaRestrictions,s=i.sizeRestrictions,r=i.boundaries,a=i.positionRestrictions,l=Ge(Ge({},s),{minWidth:s.minWidth!==void 0?s.minWidth:0,minHeight:s.minHeight!==void 0?s.minHeight:0,maxWidth:s.maxWidth!==void 0?s.maxWidth:1/0,maxHeight:s.maxHeight!==void 0?s.maxHeight:1/0});a.left!==void 0&&a.right!==void 0&&(l.maxWidth=Math.min(l.maxWidth,a.right-a.left)),a.bottom!==void 0&&a.top!==void 0&&(l.maxHeight=Math.min(l.maxHeight,a.bottom-a.top));var c=my(o),u=Y5(r,c);return c.width<1/0&&(!l.maxWidth||l.maxWidth>u.width)&&(l.maxWidth=Math.min(l.maxWidth,u.width)),c.height<1/0&&(!l.maxHeight||l.maxHeight>u.height)&&(l.maxHeight=Math.min(l.maxHeight,u.height)),l.minWidth>l.maxWidth&&(l.minWidth=l.maxWidth,l.widthFrozen=!0),l.minHeight>l.maxHeight&&(l.minHeight=l.maxHeight,l.heightFrozen=!0),l}({sizeRestrictions:e,areaRestrictions:this.getAreaRestrictions({visibleArea:this.visibleArea,type:"resize"}),imageSize:this.imageSize,boundaries:this.boundaries,positionRestrictions:this.positionRestrictions,imageRestriction:this.imageRestriction,visibleArea:this.visibleArea,stencilSize:this.getStencilSize()}),this.visibleArea&&this.stencilSize){var t=this.getStencilSize(),n=my(this.getAreaRestrictions({visibleArea:this.visibleArea,type:"resize"}));e.maxWidth=Math.min(e.maxWidth,n.width*t.width/this.boundaries.width),e.maxHeight=Math.min(e.maxHeight,n.height*t.height/this.boundaries.height),e.maxWidth<e.minWidth&&(e.minWidth=e.maxWidth),e.maxHeight<e.minHeight&&(e.minHeight=e.maxHeight)}return e}return{minWidth:0,minHeight:0,maxWidth:0,maxHeight:0}},positionRestrictions:function(){return this.positionRestrictionsAlgorithm({imageSize:this.imageSize,imageRestriction:this.imageRestriction})},classes:function(){return{cropper:zs(),image:$n(zs("image"),this.imageClass),stencil:zs("stencil"),boundaries:$n(zs("boundaries"),this.boundariesClass),stretcher:$n(zs("stretcher")),background:$n(zs("background"),this.backgroundClass),foreground:$n(zs("foreground"),this.foregroundClass),imageWrapper:$n(zs("image-wrapper")),cropperWrapper:$n(zs("cropper-wrapper"))}},stencilCoordinates:function(){if(this.initialized){var e=this.coordinates,t=e.width,n=e.height,i=e.left,o=e.top;return{width:t/this.coefficient,height:n/this.coefficient,left:(i-this.visibleArea.left)/this.coefficient,top:(o-this.visibleArea.top)/this.coefficient}}return this.defaultCoordinates()},boundariesStyle:function(){var e={width:this.boundaries.width?"".concat(Math.round(this.boundaries.width),"px"):"auto",height:this.boundaries.height?"".concat(Math.round(this.boundaries.height),"px"):"auto",transition:"opacity ".concat(this.transitionTime,"ms"),pointerEvents:this.imageLoaded?"all":"none"};return this.imageLoaded||(e.opacity="0"),e},imageStyle:function(){var e=this.imageAttributes.width>this.imageAttributes.height?{width:Math.min(1024,this.imageAttributes.width),height:Math.min(1024,this.imageAttributes.width)/(this.imageAttributes.width/this.imageAttributes.height)}:{height:Math.min(1024,this.imageAttributes.height),width:Math.min(1024,this.imageAttributes.height)*(this.imageAttributes.width/this.imageAttributes.height)},t={left:(e.width-this.imageSize.width)/(2*this.coefficient),top:(e.height-this.imageSize.height)/(2*this.coefficient)},n={left:(1-1/this.coefficient)*e.width/2,top:(1-1/this.coefficient)*e.height/2},i=Rt(Rt({},this.imageTransforms),{},{scaleX:this.imageTransforms.scaleX*(this.imageAttributes.width/e.width),scaleY:this.imageTransforms.scaleY*(this.imageAttributes.height/e.height)}),o={width:"".concat(e.width,"px"),height:"".concat(e.height,"px"),left:"0px",top:"0px",transform:"translate(".concat(-t.left-n.left-this.imageTransforms.translateX,"px, ").concat(-t.top-n.top-this.imageTransforms.translateY,"px)")+tT(i)};return this.transitionsOptions.enabled&&(o.transition="".concat(this.transitionsOptions.time,"ms ").concat(this.transitionsOptions.timingFunction)),o}},watch:{src:function(){this.onChangeImage()},stencilComponent:function(){var e=this;this.$nextTick(function(){e.resetCoordinates(),e.runAutoZoom("setCoordinates"),e.onChange()})},minWidth:function(){this.onPropsChange()},maxWidth:function(){this.onPropsChange()},minHeight:function(){this.onPropsChange()},maxHeight:function(){this.onPropsChange()},imageRestriction:function(){this.reset()},stencilProps:function(e,t){["aspectRatio","minAspectRatio","maxAspectRatio"].find(function(n){return e[n]!==t[n]})&&this.$nextTick(this.onPropsChange)}},created:function(){this.debouncedUpdate=fy(this.update,this.debounce),this.debouncedDisableTransitions=fy(this.disableTransitions,this.transitionsOptions.time),this.awaiting=!1},mounted:function(){this.$refs.image.addEventListener("load",this.onSuccessLoadImage),this.$refs.image.addEventListener("error",this.onFailLoadImage),this.onChangeImage(),window.addEventListener("resize",this.refresh),window.addEventListener("orientationchange",this.refresh)},unmounted:function(){window.removeEventListener("resize",this.refresh),window.removeEventListener("orientationchange",this.refresh),this.imageAttributes.revoke&&this.imageAttributes.src&&URL.revokeObjectURL(this.imageAttributes.src),this.debouncedUpdate.clear(),this.debouncedDisableTransitions.clear()},methods:{getResult:function(){var e=this.initialized?this.prepareResult(Rt({},this.coordinates)):this.defaultCoordinates(),t={rotate:this.imageTransforms.rotate%360,flip:Rt({},this.imageTransforms.flip)};if(this.src&&this.imageLoaded){var n=this;return{image:this.image,coordinates:e,visibleArea:this.visibleArea?Rt({},this.visibleArea):null,imageTransforms:t,get canvas(){return n.canvas?n.getCanvas():void 0}}}return{image:this.image,coordinates:e,visibleArea:this.visibleArea?Rt({},this.visibleArea):null,canvas:void 0,imageTransforms:t}},zoom:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=n.transitions,o=i===void 0||i;this.onManipulateImage(new zd({},{factor:1/e,center:t}),{normalize:!1,transitions:o})},move:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=n.transitions,o=i===void 0||i;this.onManipulateImage(new zd({left:e||0,top:t||0}),{normalize:!1,transitions:o})},setCoordinates:function(e){var t=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.autoZoom,o=i===void 0||i,s=n.transitions,r=s===void 0||s;this.$nextTick(function(){t.imageLoaded?(t.transitionsActive||(r&&t.enableTransitions(),t.coordinates=t.applyTransform(e),o&&t.runAutoZoom("setCoordinates"),r&&t.debouncedDisableTransitions()),t.onChange()):t.delayedTransforms=e})},refresh:function(){var e=this,t=this.$refs.image;if(this.src&&t)return this.initialized?this.updateVisibleArea().then(function(){e.onChange()}):this.resetVisibleArea().then(function(){e.onChange()})},reset:function(){var e=this;return this.resetVisibleArea().then(function(){e.onChange(!1)})},awaitRender:function(e){var t=this;this.awaiting||(this.awaiting=!0,this.$nextTick(function(){e(),t.awaiting=!1}))},prepareResult:function(e){return this.roundResult?function(t){var n=t.coordinates,i=t.sizeRestrictions,o=t.positionRestrictions,s={width:Math.round(n.width),height:Math.round(n.height),left:Math.round(n.left),top:Math.round(n.top)};return s.width>i.maxWidth?s.width=Math.floor(n.width):s.width<i.minWidth&&(s.width=Math.ceil(n.width)),s.height>i.maxHeight?s.height=Math.floor(n.height):s.height<i.minHeight&&(s.height=Math.ceil(n.height)),Zn(s,o)}(Rt(Rt({},this.getPublicProperties()),{},{positionRestrictions:af(this.positionRestrictions,this.visibleArea),coordinates:e})):e},processAutoZoom:function(e,t,n,i){var o=this.autoZoomAlgorithm;o||(o=this.stencilSize?fSe:this.autoZoom?pSe:mSe);var s=o({event:{type:e,params:i},visibleArea:t,coordinates:n,boundaries:this.boundaries,aspectRatio:this.getAspectRatio(),positionRestrictions:this.positionRestrictions,getAreaRestrictions:this.getAreaRestrictions,sizeRestrictions:this.sizeRestrictions,stencilSize:this.getStencilSize()});return Rt(Rt({},s),{},{changed:!sk(s.visibleArea,t)||!sk(s.coordinates,n)})},runAutoZoom:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.transitions,i=n!==void 0&&n,o=nSe(t,ISe),s=this.processAutoZoom(e,this.visibleArea,this.coordinates,o),r=s.visibleArea,a=s.coordinates,l=s.changed;i&&l&&this.enableTransitions(),this.visibleArea=r,this.coordinates=a,i&&l&&this.debouncedDisableTransitions()},normalizeEvent:function(e){return function(t){var n=t.event,i=t.visibleArea,o=t.coefficient;if(n.type==="manipulateImage")return Ge(Ge({},n),{move:{left:n.move&&n.move.left?o*n.move.left:0,top:n.move&&n.move.top?o*n.move.top:0},scale:{factor:n.scale&&n.scale.factor?n.scale.factor:1,center:n.scale&&n.scale.center?{left:n.scale.center.left*o+i.left,top:n.scale.center.top*o+i.top}:null}});if(n.type==="resize"){var s=Ge(Ge({},n),{directions:Ge({},n.directions)});return us.forEach(function(a){s.directions[a]*=o}),s}if(n.type==="move"){var r=Ge(Ge({},n),{directions:Ge({},n.directions)});return cSe.forEach(function(a){r.directions[a]*=o}),r}return n}(Rt(Rt({},this.getPublicProperties()),{},{event:e}))},getCanvas:function(){if(this.$refs.canvas){var e=this.$refs.canvas,t=this.$refs.image,n=this.imageTransforms.rotate!==0||this.imageTransforms.flip.horizontal||this.imageTransforms.flip.vertical?function(a,l,c){var u=c.rotate,f=c.flip,m={width:l.naturalWidth,height:l.naturalHeight},g=Z5(m,u),v=a.getContext("2d");a.height=g.height,a.width=g.width,v.save();var w=Vr(Yn(Ge({left:0,top:0},m)),u);return v.translate(-(w.left-g.width/2),-(w.top-g.height/2)),v.rotate(u*Math.PI/180),v.translate(f.horizontal?m.width:0,f.vertical?m.height:0),v.scale(f.horizontal?-1:1,f.vertical?-1:1),v.drawImage(l,0,0,m.width,m.height),v.restore(),a}(this.$refs.sourceCanvas,t,this.imageTransforms):t,i=Rt({minWidth:0,minHeight:0,maxWidth:1/0,maxHeight:1/0,maxArea:this.maxCanvasSize,imageSmoothingEnabled:!0,imageSmoothingQuality:"high",fillColor:"transparent"},this.canvas),o=function(a){return a.find(function(l){return c=l,!Number.isNaN(parseFloat(c))&&isFinite(c);var c})},s=Qs({sizeRestrictions:{minWidth:o([i.width,i.minWidth])||0,minHeight:o([i.height,i.minHeight])||0,maxWidth:o([i.width,i.maxWidth])||1/0,maxHeight:o([i.height,i.maxHeight])||1/0},width:this.coordinates.width,height:this.coordinates.height,aspectRatio:{minimum:this.coordinates.width/this.coordinates.height,maximum:this.coordinates.width/this.coordinates.height}});if(i.maxArea&&s.width*s.height>i.maxArea){var r=Math.sqrt(i.maxArea/(s.width*s.height));s={width:Math.round(r*s.width),height:Math.round(r*s.height)}}return function(a,l,c,u,f){a.width=u?u.width:c.width,a.height=u?u.height:c.height;var m=a.getContext("2d");m.clearRect(0,0,a.width,a.height),f&&(f.imageSmoothingEnabled&&(m.imageSmoothingEnabled=f.imageSmoothingEnabled),f.imageSmoothingQuality&&(m.imageSmoothingQuality=f.imageSmoothingQuality),f.fillColor&&(m.fillStyle=f.fillColor,m.fillRect(0,0,a.width,a.height),m.save()));var g=c.left<0?-c.left:0,v=c.top<0?-c.top:0;m.drawImage(l,c.left+g,c.top+v,c.width,c.height,g*(a.width/c.width),v*(a.height/c.height),a.width,a.height)}(e,n,this.coordinates,s,i),e}},update:function(){this.$emit("change",this.getResult())},applyTransform:function(e){var t=arguments.length>1&&arguments[1]!==void 0&&arguments[1],n=this.visibleArea&&t?uSe(this.sizeRestrictions,this.visibleArea):this.sizeRestrictions,i=this.visibleArea&&t?af(this.positionRestrictions,this.visibleArea):this.positionRestrictions;return hSe({transform:e,coordinates:this.coordinates,imageSize:this.imageSize,sizeRestrictions:n,positionRestrictions:i,aspectRatio:this.getAspectRatio(),visibleArea:this.visibleArea})},resetCoordinates:function(){var e=this;if(this.$refs.image){this.$refs.cropper,this.$refs.image;var t=this.defaultSize;t||(t=this.stencilSize?ySe:bSe);var n=this.sizeRestrictions;n.minWidth,n.minHeight,n.maxWidth,n.maxHeight;var i=Bl(t)?t({boundaries:this.boundaries,imageSize:this.imageSize,aspectRatio:this.getAspectRatio(),sizeRestrictions:this.sizeRestrictions,stencilSize:this.getStencilSize(),visibleArea:this.visibleArea}):t,o=this.defaultPosition||gSe,s=[i,function(r){var a=r.coordinates;return Rt({},Bl(o)?o({coordinates:a,imageSize:e.imageSize,visibleArea:e.visibleArea}):e.defaultPosition)}];this.delayedTransforms&&s.push.apply(s,hl(Array.isArray(this.delayedTransforms)?this.delayedTransforms:[this.delayedTransforms])),this.coordinates=this.applyTransform(s,!0),this.delayedTransforms=null}},clearImage:function(){var e=this;this.imageLoaded=!1,setTimeout(function(){var t=e.$refs.stretcher;t&&(t.style.height="auto",t.style.width="auto"),e.coordinates=e.defaultCoordinates(),e.boundaries={width:0,height:0}},this.transitionTime)},enableTransitions:function(){this.transitions&&(this.transitionsActive=!0)},disableTransitions:function(){this.transitionsActive=!1},updateBoundaries:function(){var e=this,t=this.$refs.stretcher,n=this.$refs.cropper;return this.initStretcher({cropper:n,stretcher:t,imageSize:this.imageSize}),this.$nextTick().then(function(){var i={cropper:n,imageSize:e.imageSize};if(Bl(e.defaultBoundaries)?e.boundaries=e.defaultBoundaries(i):e.defaultBoundaries==="fit"?e.boundaries=function(o){var s=o.cropper,r=o.imageSize,a=s.clientHeight,l=s.clientWidth,c=a,u=r.width*a/r.height;return u>l&&(u=l,c=r.height*l/r.width),{width:u,height:c}}(i):e.boundaries=function(o){var s=o.cropper;return{width:s.clientWidth,height:s.clientHeight}}(i),!e.boundaries.width||!e.boundaries.height)throw new Error("It's impossible to fit the cropper in the current container")})},resetVisibleArea:function(){var e=this;return this.appliedImageTransforms=Rt(Rt({},this.defaultImageTransforms),{},{flip:Rt({},this.defaultImageTransforms.flip)}),this.updateBoundaries().then(function(){e.priority!=="visible-area"&&(e.visibleArea=null,e.resetCoordinates());var t,n,i,o,s,r,a=e.defaultVisibleArea||vSe;e.visibleArea=Bl(a)?a({imageSize:e.imageSize,boundaries:e.boundaries,coordinates:e.priority!=="visible-area"?e.coordinates:null,getAreaRestrictions:e.getAreaRestrictions,stencilSize:e.getStencilSize()}):e.defaultVisibleArea,e.visibleArea=(t={visibleArea:e.visibleArea,boundaries:e.boundaries,getAreaRestrictions:e.getAreaRestrictions},n=t.visibleArea,i=t.boundaries,o=t.getAreaRestrictions,s=Ge({},n),r=Pt(i),s.width/s.height!==r&&(s.height=s.width/r),Zn(s,o({visibleArea:s,type:"move"}))),e.priority==="visible-area"?e.resetCoordinates():e.coordinates=e.fitCoordinates({visibleArea:e.visibleArea,coordinates:e.coordinates,aspectRatio:e.getAspectRatio(),positionRestrictions:e.positionRestrictions,sizeRestrictions:e.sizeRestrictions}),e.runAutoZoom("resetVisibleArea")}).catch(function(){e.visibleArea=null})},updateVisibleArea:function(){var e=this;return this.updateBoundaries().then(function(){e.visibleArea=e.fitVisibleArea({imageSize:e.imageSize,boundaries:e.boundaries,visibleArea:e.visibleArea,coordinates:e.coordinates,getAreaRestrictions:e.getAreaRestrictions}),e.coordinates=e.fitCoordinates({visibleArea:e.visibleArea,coordinates:e.coordinates,aspectRatio:e.getAspectRatio(),positionRestrictions:e.positionRestrictions,sizeRestrictions:e.sizeRestrictions}),e.runAutoZoom("updateVisibleArea")}).catch(function(){e.visibleArea=null})},onChange:function(){var e=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];e&&this.debounce?this.debouncedUpdate():this.update()},onChangeImage:function(){var e,t=this;if(this.imageLoaded=!1,this.delayedTransforms=null,this.src){if(function(o){if(nk(o))return!1;var s=window.location,r=/(\w+:)?(?:\/\/)([\w.-]+)?(?::(\d+))?\/?/.exec(o)||[],a={protocol:r[1]||"",host:r[2]||"",port:r[3]||""},l=function(c){return c.port||((c.protocol||s.protocol)==="http"?80:433)};return!(!a.protocol&&!a.host&&!a.port||a.protocol&&a.protocol==s.protocol&&a.host&&a.host==s.host&&a.host&&l(a)==l(s))}(this.src)){var n=Pn(this.crossOrigin)?this.canvas:this.crossOrigin;n===!0&&(n="anonymous"),this.imageAttributes.crossOrigin=n||null}if(this.checkOrientation){var i=(e=this.src,new Promise(function(o){OSe(e).then(function(s){var r=$Se(s);o(s?{source:e,arrayBuffer:s,orientation:r}:{source:e,arrayBuffer:null,orientation:null})}).catch(function(s){console.warn(s),o({source:e,arrayBuffer:null,orientation:null})})}));setTimeout(function(){i.then(t.onParseImage)},this.transitionTime)}else setTimeout(function(){t.onParseImage({source:t.src})},this.transitionTime)}else this.clearImage()},onFailLoadImage:function(){this.imageAttributes.src&&(this.clearImage(),this.$emit("error"))},onSuccessLoadImage:function(){var e=this,t=this.$refs.image;t&&!this.imageLoaded&&(this.imageAttributes.height=t.naturalHeight,this.imageAttributes.width=t.naturalWidth,this.imageLoaded=!0,this.resetVisibleArea().then(function(){e.$emit("ready"),e.onChange(!1)}))},onParseImage:function(e){var t=this,n=e.source,i=e.arrayBuffer,o=e.orientation;this.imageAttributes.revoke&&this.imageAttributes.src&&URL.revokeObjectURL(this.imageAttributes.src),this.imageAttributes.revoke=!1,i&&o&&o>1?j5(n)||!nk(n)?(this.imageAttributes.src=URL.createObjectURL(new Blob([i])),this.imageAttributes.revoke=!0):this.imageAttributes.src=function(s){for(var r=[],a=new Uint8Array(s);a.length>0;){var l=a.subarray(0,8192);r.push(String.fromCharCode.apply(null,Array.from?Array.from(l):l.slice())),a=a.subarray(8192)}return"data:image/jpeg;base64,"+btoa(r.join(""))}(i):this.imageAttributes.src=n,Bl(this.defaultTransforms)?this.appliedImageTransforms=Y1(this.defaultTransforms()):Lf(this.defaultTransforms)?this.appliedImageTransforms=Y1(this.defaultTransforms):this.appliedImageTransforms=function(s){var r=Y1({});if(s)switch(s){case 2:r.flip.horizontal=!0;break;case 3:r.rotate=-180;break;case 4:r.flip.vertical=!0;break;case 5:r.rotate=90,r.flip.vertical=!0;break;case 6:r.rotate=90;break;case 7:r.rotate=90,r.flip.horizontal=!0;break;case 8:r.rotate=-90}return r}(o),this.defaultImageTransforms=Rt(Rt({},this.appliedImageTransforms),{},{flip:Rt({},this.appliedImageTransforms.flip)}),this.$nextTick(function(){var s=t.$refs.image;s&&s.complete&&(function(r){return!!r.naturalWidth}(s)?t.onSuccessLoadImage():t.onFailLoadImage())})},onResizeEnd:function(){this.runAutoZoom("resize",{transitions:!0})},onMoveEnd:function(){this.runAutoZoom("move",{transitions:!0})},onMove:function(e){var t=this;this.transitionsOptions.enabled||this.awaitRender(function(){t.coordinates=t.moveAlgorithm(Rt(Rt({},t.getPublicProperties()),{},{positionRestrictions:af(t.positionRestrictions,t.visibleArea),coordinates:t.coordinates,event:t.normalizeEvent(e)})),t.onChange()})},onResize:function(e){var t=this;this.transitionsOptions.enabled||this.stencilSize&&!this.autoZoom||this.awaitRender(function(){var n=t.sizeRestrictions,i=Math.min(t.coordinates.width,t.coordinates.height,20*t.coefficient);t.coordinates=t.resizeAlgorithm(Rt(Rt({},t.getPublicProperties()),{},{positionRestrictions:af(t.positionRestrictions,t.visibleArea),sizeRestrictions:{maxWidth:Math.min(n.maxWidth,t.visibleArea.width),maxHeight:Math.min(n.maxHeight,t.visibleArea.height),minWidth:Math.max(n.minWidth,i),minHeight:Math.max(n.minHeight,i)},event:t.normalizeEvent(e)})),t.onChange(),t.ticking=!1})},onManipulateImage:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.transitionsOptions.enabled){var n=t.transitions,i=n!==void 0&&n,o=t.normalize,s=o===void 0||o;i&&this.enableTransitions();var r=wSe(Rt(Rt({},this.getPublicProperties()),{},{event:s?this.normalizeEvent(e):e,getAreaRestrictions:this.getAreaRestrictions,imageRestriction:this.imageRestriction,adjustStencil:!this.stencilSize&&this.settings.resizeImage.adjustStencil})),a=r.visibleArea,l=r.coordinates;this.visibleArea=a,this.coordinates=l,this.runAutoZoom("manipulateImage"),this.onChange(),i&&this.debouncedDisableTransitions()}},onPropsChange:function(){this.coordinates=this.applyTransform(this.coordinates,!0),this.onChange(!1)},getAreaRestrictions:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.visibleArea,n=e.type,i=n===void 0?"move":n;return this.areaRestrictionsAlgorithm({boundaries:this.boundaries,imageSize:this.imageSize,imageRestriction:this.imageRestriction,visibleArea:t,type:i})},getAspectRatio:function(e){var t,n,i=this.stencilProps,o=i.aspectRatio,s=i.minAspectRatio,r=i.maxAspectRatio;if(this.$refs.stencil&&this.$refs.stencil.aspectRatios){var a=this.$refs.stencil.aspectRatios();t=a.minimum,n=a.maximum}if(Pn(t)&&(t=Pn(o)?s:o),Pn(n)&&(n=Pn(o)?r:o),!e&&(Pn(t)||Pn(n))){var l=this.getStencilSize(),c=l?Pt(l):null;Pn(t)&&(t=ik(c)?c:void 0),Pn(n)&&(n=ik(c)?c:void 0)}return{minimum:t,maximum:n}},getStencilSize:function(){if(this.stencilSize)return e={currentStencilSize:{width:this.stencilCoordinates.width,height:this.stencilCoordinates.height},stencilSize:this.stencilSize,boundaries:this.boundaries,coefficient:this.coefficient,coordinates:this.coordinates,aspectRatio:this.getAspectRatio(!0)},t=e.boundaries,n=e.stencilSize,i=e.aspectRatio,G1(Pt(o=Bl(n)?n({boundaries:t,aspectRatio:i}):n),i)&&(o=Qs({sizeRestrictions:{maxWidth:t.width,maxHeight:t.height,minWidth:0,minHeight:0},width:o.width,height:o.height,aspectRatio:{minimum:i.minimum,maximum:i.maximum}})),(o.width>t.width||o.height>t.height)&&(o=Qs({sizeRestrictions:{maxWidth:t.width,maxHeight:t.height,minWidth:0,minHeight:0},width:o.width,height:o.height,aspectRatio:{minimum:Pt(o),maximum:Pt(o)}})),o;var e,t,n,i,o},getPublicProperties:function(){return{coefficient:this.coefficient,visibleArea:this.visibleArea,coordinates:this.coordinates,boundaries:this.boundaries,sizeRestrictions:this.sizeRestrictions,positionRestrictions:this.positionRestrictions,aspectRatio:this.getAspectRatio(),imageRestriction:this.imageRestriction}},defaultCoordinates:function(){return Rt({},ok)},flip:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=n.transitions,o=i===void 0||i;if(!this.transitionsActive){o&&this.enableTransitions();var s=Rt({},this.imageTransforms.flip),r=CSe({flip:{horizontal:e?!s.horizontal:s.horizontal,vertical:t?!s.vertical:s.vertical},previousFlip:s,rotate:this.imageTransforms.rotate,visibleArea:this.visibleArea,coordinates:this.coordinates,imageSize:this.imageSize,positionRestrictions:this.positionRestrictions,sizeRestrictions:this.sizeRestrictions,getAreaRestrictions:this.getAreaRestrictions,aspectRatio:this.getAspectRatio()}),a=r.visibleArea,l=r.coordinates;e&&(this.appliedImageTransforms.flip.horizontal=!this.appliedImageTransforms.flip.horizontal),t&&(this.appliedImageTransforms.flip.vertical=!this.appliedImageTransforms.flip.vertical),this.visibleArea=a,this.coordinates=l,this.onChange(),o&&this.debouncedDisableTransitions()}},rotate:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.transitions,i=n===void 0||n;if(!this.transitionsActive){i&&this.enableTransitions();var o=Rt({},this.imageSize);this.appliedImageTransforms.rotate+=e;var s=_Se({visibleArea:this.visibleArea,coordinates:this.coordinates,previousImageSize:o,imageSize:this.imageSize,angle:e,positionRestrictions:this.positionRestrictions,sizeRestrictions:this.sizeRestrictions,getAreaRestrictions:this.getAreaRestrictions,aspectRatio:this.getAspectRatio()}),r=s.visibleArea,a=s.coordinates,l=this.processAutoZoom("rotateImage",r,a);r=l.visibleArea,a=l.coordinates,this.visibleArea=r,this.coordinates=a,this.onChange(),i&&this.debouncedDisableTransitions()}}},emits:["change","error","ready"]},LSe={key:0,ref:"canvas",style:{display:"none"}},DSe={key:1,ref:"sourceCanvas",style:{display:"none"}};rT.render=function(e,t,n,i,o,s){return p(),R("div",{ref:"cropper",class:s.classes.cropper},[D("div",{ref:"stretcher",class:s.classes.stretcher},null,2),D("div",{class:s.classes.boundaries,style:s.boundariesStyle},[(p(),R(et(n.backgroundWrapperComponent),{class:s.classes.cropperWrapper,"wheel-resize":s.settings.resizeImage.wheel,"touch-resize":s.settings.resizeImage.touch,"touch-move":s.settings.moveImage.touch,"mouse-move":s.settings.moveImage.mouse,onMove:s.onManipulateImage,onResize:s.onManipulateImage},{default:Q(function(){return[D("div",{class:s.classes.background,style:s.boundariesStyle},null,6),D("div",{class:s.classes.imageWrapper},[D("img",{ref:"image",crossorigin:o.imageAttributes.crossOrigin,src:o.imageAttributes.src,class:s.classes.image,style:s.imageStyle,onMousedown:t[1]||(t[1]=Ue(function(){},["prevent"]))},null,46,["crossorigin","src"])],2),D("div",{class:s.classes.foreground,style:s.boundariesStyle},null,6),Ke((p(),R(et(n.stencilComponent),X({ref:"stencil",image:s.image,coordinates:o.coordinates,"stencil-coordinates":s.stencilCoordinates,transitions:s.transitionsOptions},n.stencilProps,{onResize:s.onResize,onResizeEnd:s.onResizeEnd,onMove:s.onMove,onMoveEnd:s.onMoveEnd}),null,16,["image","coordinates","stencil-coordinates","transitions","onResize","onResizeEnd","onMove","onMoveEnd"])),[[on,o.imageLoaded]]),n.canvas?(p(),R("canvas",LSe,null,512)):x("",!0),n.canvas?(p(),R("canvas",DSe,null,512)):x("",!0)]}),_:1},8,["class","wheel-resize","touch-resize","touch-move","mouse-move","onMove","onResize"]))],6)],2)};const RSe={components:{Cropper:rT},props:{attachment:{type:Object,required:!0},docFields:{type:Object,required:!0},aspectRatio:{type:Number,default:null},minSize:{type:Array,default:()=>[]},containerHeight:{type:Number,required:!0}},emits:["change"],data(){return{stencilProps:{"data-stencil":""},cropperHeight:this.getCropperHeight(),isCropperChanging:!1,isUpdatingCropperCoordinates:!1,stencilCoordinates:{left:null,top:null,width:null,height:null},focalPointDragCoordinates:{clientX:0,clientY:0}}},watch:{docFields:{deep:!0,handler(e,t){if(e.updateCoordinates&&this.checkCropperCoordinatesDiff(e.data,t.data)){const{width:n,height:i,left:o,top:s}=e.data;this.isUpdatingCropperCoordinates=!0,this.setCropperCoordinatesDebounced({width:n,height:i,left:o,top:s})}}},aspectRatio:{handler(e){this.$refs.cropper.reset(),this.stencilProps.aspectRatio=e,this.$refs.cropper.refresh()}}},created(){this.onScreenResizeDebounced=of(this.onScreenResize,500),this.handleCropperChangeDebounced=of(this.handleCropperChange,500),this.setCropperCoordinatesDebounced=of(this.setCropperCoordinates,500),this.updateFocalPointCoordinatesDebounced=of(this.updateFocalPointCoordinates,500),this.defaultSize={width:this.docFields.data.width,height:this.docFields.data.height},this.defaultPosition={top:this.docFields.data.top,left:this.docFields.data.left}},beforeUnmount(){this.onScreenResizeDebounced.cancel(),this.handleCropperChangeDebounced.cancel(),this.setCropperCoordinatesDebounced.cancel(),this.updateFocalPointCoordinatesDebounced.cancel(),this.$refs.focalPoint.removeEventListener("mousedown",this.onFocalPointMouseDown),window.removeEventListener("resize",this.onScreenResizeDebounced)},methods:{getCropperHeight(){const{width:e,height:t}=this.attachment;return e>t||t<=this.containerHeight?"auto":"100%"},onCropperReady(){this.stencilProps.aspectRatio=this.aspectRatio,this.$refs.cropper.refresh(),this.storeStencilCoordinates(),this.placeFocalPointInStencil(),window.addEventListener("resize",this.onScreenResizeDebounced)},onCropperChange({coordinates:e}){this.isChangingCropper=!0,this.handleCropperChangeDebounced(e)},onFocalPointMouseDown(e){e.preventDefault();const{focalPoint:t}=this.$refs;this.focalPointDragCoordinates.clientX=e.clientX,this.focalPointDragCoordinates.clientY=e.clientY,t.style.cursor="grabbing",t.style.transitionDuration="0s",document.addEventListener("mousemove",this.onFocalPointMouseMove),document.addEventListener("mouseup",this.onFocalPointMouseUp)},onFocalPointMouseMove(e){e.preventDefault();const{focalPoint:t}=this.$refs,n=this.getFocalPointSize(),i=t.offsetLeft-this.focalPointDragCoordinates.clientX+e.clientX,o=t.offsetTop-this.focalPointDragCoordinates.clientY+e.clientY;this.focalPointDragCoordinates.clientX=e.clientX,this.focalPointDragCoordinates.clientY=e.clientY;const s=1,r={left:-n.halfWidth+s,top:-n.halfHeight+s,right:t.offsetParent.clientWidth-n.halfWidth-s,bottom:t.offsetParent.clientHeight-n.halfHeight-s};i<r.left||o<r.top||i>r.right||o>r.bottom||(t.style.left=`${i}px`,t.style.top=`${o}px`,this.updateFocalPointCoordinatesDebounced())},onFocalPointMouseUp(){const{focalPoint:e}=this.$refs;e.style.cursor="grab",e.style.transitionDuration="0.1s",document.removeEventListener("mousemove",this.onFocalPointMouseMove),document.removeEventListener("mouseup",this.onFocalPointMouseUp)},onImageClick(e){if(this.isChangingCropper)return;const{focalPoint:t}=this.$refs,n=this.getFocalPointSize(),i=e.clientX-e.currentTarget.offsetLeft-e.currentTarget.offsetParent.offsetLeft-n.halfWidth,o=e.clientY-e.currentTarget.offsetTop-e.currentTarget.offsetParent.offsetTop-n.halfHeight;t.style.left=`${i}px`,t.style.top=`${o}px`,this.updateFocalPointCoordinatesDebounced()},onScreenResize(){this.storeStencilCoordinates(),this.placeFocalPointInStencil()},handleCropperChange(e){this.isChangingCropper=!1,!this.isUpdatingCropperCoordinates&&this.checkCropperCoordinatesDiff(e,this.docFields.data)&&(this.storeStencilCoordinates(),this.updateFocalPointCoordinates(),this.$emit("change",e,!1)),this.isUpdatingCropperCoordinates=!1},setCropperCoordinates(e){this.$refs.cropper.setCoordinates(e)},updateFocalPointCoordinates(){const{focalPoint:e}=this.$refs,t=this.getFocalPointSize(),n=(e.offsetLeft+t.halfWidth-this.stencilCoordinates.left)/this.stencilCoordinates.width,i=(e.offsetTop+t.halfHeight-this.stencilCoordinates.top)/this.stencilCoordinates.height,o=s({x:n,y:i});this.$emit("change",o,!1);function s({x:r,y:a}){return r>=0&&r<=1&&a>=0&&a<=1?{x:Math.abs(Math.round(r*100)),y:Math.abs(Math.round(a*100))}:{x:null,y:null}}},checkCropperCoordinatesDiff(e,t){return Object.entries(e).some(([n,i])=>t[n]!==i)},storeStencilCoordinates(){const e=document.querySelector("[data-stencil]"),t=window.getComputedStyle(e),n=new window.DOMMatrixReadOnly(t.transform);this.stencilCoordinates={left:n.m41,top:n.m42,width:e.clientWidth,height:e.clientHeight}},getFocalPointSize(){const{focalPoint:e}=this.$refs,t={width:e.clientWidth+e.clientLeft*2,height:e.clientHeight+e.clientTop*2};return{...t,halfWidth:t.width/2,halfHeight:t.height/2}},placeFocalPointInStencil(){const{focalPoint:e}=this.$refs,t=this.docFields.data.x||50,n=this.docFields.data.y||50,i=this.getFocalPointSize(),o=Math.round(t/100*this.stencilCoordinates.width+this.stencilCoordinates.left-i.halfWidth),s=Math.round(n/100*this.stencilCoordinates.height+this.stencilCoordinates.top-i.halfHeight);e.style.left=`${o}px`,e.style.top=`${s}px`}}};function PSe(e,t,n,i,o,s){const r=E("cropper"),a=xi("apos-tooltip");return p(),y("div",{class:"apos-image-cropper",style:Vt({height:o.cropperHeight}),onClick:t[1]||(t[1]=(...l)=>s.onImageClick&&s.onImageClick(...l))},[Ke(A("span",{ref:"focalPoint",class:"apos-image-focal-point",onMousedown:t[0]||(t[0]=(...l)=>s.onFocalPointMouseDown&&s.onFocalPointMouseDown(...l))},null,544),[[a,"apostrophe:focalPoint"]]),D(r,{ref:"cropper",src:n.attachment._urls.uncropped?n.attachment._urls.uncropped.original:n.attachment._urls.original,debounce:0,"default-size":e.defaultSize,"default-position":e.defaultPosition,"stencil-props":o.stencilProps,"min-width":n.minSize[0],"min-height":n.minSize[1],onReady:s.onCropperReady,onChange:s.onCropperChange},null,8,["src","default-size","default-position","stencil-props","min-width","min-height","onReady","onChange"])],4)}const HSe=I(RSe,[["render",PSe]]),VSe=[[1,1],[2,3],[3,4],[3,2],[4,3],[5,4],[16,9],[9,16],[4,5]],zSe=e=>[{label:e,value:0},...VSe.map(([n,i])=>({label:`${n}:${i}`,value:n/i}))],NSe={name:"AposImageRelationshipEditor",mixins:[ks],props:{schema:{type:Array,default:null},widget:{type:Object,default:null},widgetSchema:{type:Array,default:()=>[]},widgetOptions:{type:Object,default:null},item:{type:Object,default:null}},emits:["modal-result"],data(){const e=this.getWidgetOptions(),{aspectRatio:t,aspectRatioChoices:n,disableAspectRatio:i}=this.getAspectRatioData(e),o=e.minSize||[],s=this.getImage(),r=this.setDataValues(s);return{image:s,original:{...r},docFields:{data:r},fieldSchema:this.getFieldSchema(),errors:{},modal:{active:!1,type:"overlay",showModal:!0},modalTitle:{key:"apostrophe:editImageRelationshipTitle",title:s.title},currentTab:null,aspectRatio:t,aspectRatioChoices:n,disableAspectRatio:i,minSize:o,correctingSizes:!1,maxWidth:s.attachment.width,maxHeight:s.attachment.height,minWidth:o[0]||1,minHeight:o[1]||1,containerHeight:0}},computed:{isModified(){return ko(this.fieldSchema,this.original,this.docFields.data)}},async mounted(){this.modal.active=!0,this.$nextTick(()=>{this.containerHeight=this.$refs.cropperContainer.clientHeight}),this.computeMaxSizes(),this.computeMinSizes()},methods:{getWidgetOptions(){if(this.widgetOptions)return this.widgetOptions;const[e={}]=apos.area.widgetOptions||[];return e},getImage(){var e,t;return this.item||((t=(e=this.widget)==null?void 0:e._image)==null?void 0:t[0])},getFieldSchema(){var e;return this.schema||((e=this.widgetSchema.find(t=>t.name==="_image"))==null?void 0:e.schema)||[]},computeMaxSizes(){const{width:e,height:t}=this.image.attachment;if(!this.aspectRatio){this.maxWidth=e,this.maxHeight=t;return}if(this.aspectRatio===1){const o=e<t?e:t;this.maxWidth=o,this.maxHeight=o;return}const i=t/e*this.aspectRatio;this.maxWidth=i>1?e:Math.round(t*this.aspectRatio),this.maxHeight=i>1?Math.round(e/this.aspectRatio):t},computeMinSizes(){if(!this.minSize||!this.minSize.length)return;const[e,t]=this.minSize;if(!this.aspectRatio){this.minWidth=e,this.minHeight=t;return}if(this.aspectRatio===1){const o=e>t?e:t;this.minWidth=o,this.minHeight=o;return}const i=t/e*this.aspectRatio;i>1?(this.minWidth=Math.round(t*this.aspectRatio),this.minHeight=t):i<1&&(this.minWidth=e,this.minHeight=Math.round(e/this.aspectRatio))},setDataValues(e){return e._fields&&e._fields.width&&e._fields.height?{...e._fields}:{width:e.attachment.width,height:e.attachment.height,top:0,left:0,x:null,y:null}},async submit(){if(this.image.attachment&&await apos.http.post(`${apos.attachment.action}/crop`,{body:{_id:this.image.attachment._id,crop:this.docFields.data},busy:!0}),!this.widget)this.$emit("modal-result",this.docFields.data);else{const e={...this.image,_fields:this.docFields.data},t={...this.widget,_image:[e]};this.$emit("modal-result",t)}this.modal.showModal=!1},updateDocFields(e,t=!0){this.docFields={data:{...this.docFields.data,...e},updateCoordinates:t}},inputWidth(e){this.input(e,"width")},inputHeight(e){this.input(e,"height")},input({target:e},t){const n=parseInt(e.value,10);isNaN(n)||(this.computeAspectRatio(n,t),this.updateDocFields({[t]:n}))},blurInput(){const{width:e,height:t}=this.docFields.data;if(!this.aspectRatio){const{widthUpdated:n,minWidthUpdated:i}=e>this.maxWidth?{widthUpdated:this.maxWidth}:e<this.minWidth&&{widthUpdated:this.minWidth,minWidthUpdated:!0},{heightUpdated:o,minHeightUpdated:s}=t>this.maxHeight?{heightUpdated:this.maxHeight}:t<this.minHeight&&{heightUpdated:this.minHeight,minHeightUpdated:!0};this.updateDocFields({...n&&{width:n},...o&&{height:o}},!1),(i||s)&&this.minSizeUpdated();return}if(e>this.maxWidth||t>this.maxHeight){if(this.aspectRatio===1){const n=this.maxWidth<this.maxHeight?this.maxWidth:this.maxHeight;this.updateDocFields({width:n,height:n},!1)}else this.updateDocFields({width:this.maxWidth,height:this.maxHeight},!1);return}if(e<this.minWidth||t<this.minHeight){if(this.aspectRatio===1){const n=this.minWidth>this.minHeight?this.minWidth:this.minHeight;this.updateDocFields({width:n,height:n},!1)}else this.updateDocFields({width:this.minWidth,height:this.minHeight},!1);this.minSizeUpdated()}},minSizeUpdated(){this.correctingSizes=!0,setTimeout(()=>{this.correctingSizes=!1},1500)},switchPane(e){this.currentTab=e},getAspectRatioData(e={}){if(!Array.isArray(e.aspectRatio)||e.aspectRatio.length!==2)return{aspectRatio:null,disableAspectRatio:!1,aspectRatioChoices:zSe(this.$t("apostrophe:aspectRatioFree"))};const[t,n]=e.aspectRatio,i=t/n;return{aspectRatio:i,disableAspectRatio:!0,aspectRatioChoices:[{label:`${t}:${n}`,value:i}]}},updateAspectRatio(e){this.aspectRatio=e,this.computeMaxSizes(),this.computeMinSizes()},computeAspectRatio(e,t){if(!this.aspectRatio)return;const n=t==="width",i=n?"height":"width",o=n?e/this.aspectRatio:e*this.aspectRatio;this.updateDocFields({[i]:Math.round(o)},!1)}}},BSe={class:"apos-schema"},FSe={class:"apos-field","data-apos-field":"aspectRatio"},WSe={class:"apos-field__label"},USe={class:"apos-field__label"},jSe={class:"apos-schema__aligned-fields"},qSe={class:"apos-field","data-apos-field":"width"},KSe=["value","min","max"],GSe={class:"apos-field","data-apos-field":"height"},JSe=["value","min","max"],YSe={ref:"cropperContainer",class:"apos-image-cropper__container"};function ZSe(e,t,n,i,o,s){const r=E("AposButton"),a=E("AposIndicator"),l=E("AposSelect"),c=E("AposModalRail"),u=E("AposImageCropper"),f=E("AposModal");return p(),R(f,{class:"apos-doc-editor",modal:o.modal,"modal-title":e.$t("apostrophe:editImageRelationshipTitle"),onInactive:t[4]||(t[4]=m=>o.modal.active=!1),onShowModal:t[5]||(t[5]=m=>o.modal.showModal=!0),onEsc:e.confirmAndCancel},{secondaryControls:Q(()=>[D(r,{type:"default",label:"apostrophe:cancel",onClick:e.confirmAndCancel},null,8,["onClick"])]),primaryControls:Q(()=>[D(r,{type:"primary",label:"apostrophe:update",disabled:!s.isModified,attrs:{"data-apos-focus-priority":!0},onClick:s.submit},null,8,["disabled","onClick"])]),leftRail:Q(()=>[D(c,null,{default:Q(()=>[A("div",BSe,[A("div",FSe,[A("label",WSe,[Et($(e.$t("apostrophe:aspectRatio"))+" ",1),o.disableAspectRatio?(p(),R(a,{key:0,class:"apos-field__tooltip",icon:"information-outline-icon","fill-color":"var(--a-primary)",tooltip:e.$t("apostrophe:aspectRatioWarning")},null,8,["tooltip"])):x("",!0)]),D(l,{selected:o.aspectRatio,choices:o.aspectRatioChoices,disabled:o.disableAspectRatio,onChange:s.updateAspectRatio},null,8,["selected","choices","disabled","onChange"])]),A("label",USe,$(e.$t("apostrophe:cropAndSize")),1),o.minSize[0]||o.minSize[1]?(p(),y("div",{key:0,class:te(["apos-field__min-size",{"apos-field__min-size--correcting":o.correctingSizes}])},$(e.$t("apostrophe:minSize",{width:o.minSize[0]||"???",height:o.minSize[1]||"???"})),3)):x("",!0),A("div",jSe,[A("div",qSe,[t[6]||(t[6]=A("label",{class:"apos-field__label apos-field__label--aligned"}," W ",-1)),A("input",{value:o.docFields.data.width,class:"apos-input apos-input--text",type:"number",min:o.minWidth,max:o.maxWidth,onInput:t[0]||(t[0]=(...m)=>s.inputWidth&&s.inputWidth(...m)),onBlur:t[1]||(t[1]=(...m)=>s.blurInput&&s.blurInput(...m))},null,40,KSe)]),A("div",GSe,[t[7]||(t[7]=A("label",{class:"apos-field__label apos-field__label--aligned"}," H ",-1)),A("input",{value:o.docFields.data.height,class:"apos-input apos-input--text",type:"number",min:o.minHeight,max:o.maxHeight,onInput:t[2]||(t[2]=(...m)=>s.inputHeight&&s.inputHeight(...m)),onBlur:t[3]||(t[3]=(...m)=>s.blurInput&&s.blurInput(...m))},null,40,JSe)])])])]),_:1})]),main:Q(()=>[A("div",YSe,[D(u,{attachment:o.image.attachment,"doc-fields":o.docFields,"aspect-ratio":o.aspectRatio,"min-size":o.minSize,"container-height":o.containerHeight,onChange:s.updateDocFields},null,8,["attachment","doc-fields","aspect-ratio","min-size","container-height","onChange"])],512)]),_:1},8,["modal","modal-title","onEsc"])}const XSe=I(NSe,[["render",ZSe],["__scopeId","data-v-1884cdef"]]),QSe=500,e3e={mixins:[ks,l0],props:{moduleName:{type:String,required:!0}},emits:["archive","save","search","piece-relationship-query"],data(){return{items:[],isFirstLoading:!0,isLoading:!1,isScrollLoading:!1,skipLoadObserver:!1,lock:0,loadRef:null,totalPages:1,currentPage:1,tagList:[],batchTags:[],filterValues:{},modal:{active:!1,type:"overlay",showModal:!1},editing:void 0,modified:!1,lastSelected:null,emptyDisplay:{title:"apostrophe:noMediaFound",message:"apostrophe:uploadedMediaPlaceholder",emoji:""},cancelDescription:"apostrophe:discardImageChangesPrompt",debouncedGetMedia:na(this.getMedia,QSe,{onSuccess:this.appendMedia}),scrollQueue:H4(),loadObserver:new IntersectionObserver(this.handleIntersect,{root:null,rootMargin:"30px",threshold:0}),uploaded:!1}},computed:{modalTitle(){let e;return this.relationshipField?e={key:"apostrophe:chooseDocType",type:this.$t(this.moduleLabels.plural)}:e={key:"apostrophe:manageDocType",type:this.$t(this.moduleLabels.plural)},e},moduleOptions(){return window.apos.modules[this.moduleName]},toolbarFilters(){return!this.moduleOptions||!this.moduleOptions.filters?null:this.moduleOptions.filters.filter(e=>e.name!=="_tags")},moduleLabels(){return this.moduleOptions?{singular:this.moduleOptions.label,plural:this.moduleOptions.pluralLabel}:null},accept(){return this.moduleOptions.schema.find(e=>e.name==="attachment").accept},isModified(){return this.editing&&this.modified||this.relationshipIsModified()},headers(){return[]},saveRelationshipLabel(){return this.relationshipField&&this.relationshipField.max===1?{key:"apostrophe:selectOneLabel",typeLabel:this.$t(this.moduleLabels.singular)}:{key:"apostrophe:selectManyLabel",typeLabel:this.$t(this.moduleLabels.plural)}},isLastPage(){return this.totalPages>1&&this.currentPage===this.totalPages&&!this.isScrollLoading},checkedDocsTags(){return Object.fromEntries(this.checkedDocs.map(e=>[e._id,e.tagsIds]))}},watch:{items(e){e.length===0&&(this.uploaded=!1)},async checked(e,t){var n,i;if(this.lastSelected=e.at(-1),e.length>1||e.length===0){!this.checked.includes((n=this.editing)==null?void 0:n._id)&&t.includes((i=this.editing)==null?void 0:i._id)&&!await this.updateEditing(null)&&(this.checked=t),this.modified===!1&&await this.updateEditing(null);return}await this.updateEditing(e.at(0))},isLastPage(e){e&&this.disconnectObserver()}},created(){this.setDefaultFilters()},async mounted(){this.modal.active=!0,apos.bus.$on("content-changed",this.onContentChanged),apos.bus.$on("command-menu-manager-close",this.confirmAndCancel),await this.scrollQueue.add(async()=>{const e=await this.getMedia({tags:!0});await this.appendMedia(e),this.isFirstLoading=!1}),await this.getTags()},beforeUnmount(){this.debouncedGetMedia.cancel(),apos.bus.$off("content-changed",this.onContentChanged),apos.bus.$off("command-menu-manager-close",this.confirmAndCancel)},methods:{hasScroll(){var n,i,o,s;const e=(i=(n=this.$refs.display)==null?void 0:n.$el)==null?void 0:i.offsetHeight,t=(s=(o=this.$refs.modalBody)==null?void 0:o.getBodyMainRef())==null?void 0:s.offsetHeight;return e>t},setDefaultFilters(){this.moduleOptions.filters.forEach(e=>{this.filterValues[e.name]=e.def})},editorModified(e){this.modified=e},async getMedia(e={}){const t={},n={...this.filterValues,page:this.currentPage,viewContext:this.relationshipField?"relationship":"manage"};e._ids&&(n._ids=e._ids,n.perPage=e._ids.length,n.page=1);const i=!!Object.keys(this.filterValues).length;this.moduleOptions&&Array.isArray(this.moduleOptions.filters)&&this.moduleOptions.filters.forEach(s=>{!s.choices&&n.choices?n.choices+=`,${s.name}`:s.choices||(n.choices=s.name)}),this.relationshipField&&apos.bus.$emit("piece-relationship-query",n);for(const s in n)n[s]===void 0&&delete n[s];const o=await apos.http.post(this.moduleOptions.action,{body:{__aposGetWithQuery:n},draft:!0});if(e.tags)if(i){const s=await apos.http.get(this.moduleOptions.action,{busy:!0,qs:{choices:"_tags",perPage:1,project:{title:1}},draft:!0});t.tagList=s.choices._tags}else t.tagList=o.choices?o.choices._tags:[];t.options=e,t.currentPage=o.currentPage,t.totalPages=o.pages,t.items=[];for(const s of o.results)t.items.push(s);return t},async appendMedia({tagList:e,currentPage:t,totalPages:n,items:i,options:o={}}){if(typeof o.lock=="number"&&o.lock!==this.lock)return;Array.isArray(e)&&(this.tagList=e),this.currentPage=t,this.totalPages=n;const s=o.loadMoreIfSkipped&&!o.loadMore?new Set(this.items.map(a=>a._id)):new Set;let r=0;for(const a of i){if(s.has(a._id)){r++;continue}this.items.push(a)}return o.loadMore?(this.isLoading=!1,await this.$nextTick(),await this.loadUntilScroll(o.lock)):o.loadMoreIfSkipped&&r>0&&await this.loadWhenIntersecting(o.lock),r},async refetchMedia(e){this.isLoading=!0,this.currentPage=1,this.items=[],await this.debouncedGetMedia.skipDelay(e),this.isLoading=!1,this.modified=!1,this.clearSelected()},async filter(e,t){this.filterValues[e]=t,this.refetchMedia()},createPlaceholder(e){this.items.unshift(e)},async completeUploading(e){var a;this.uploaded=!0;const[t={}]=apos.area.widgetOptions,[n,i]=t.minSize||[];let o=!1;const s=e.filter(l=>{var c,u,f,m;return n&&((c=l.attachment)!=null&&c.width)&&n>l.attachment.width?(o=!0,((u=this.editing)==null?void 0:u._id)===l._id&&this.updateEditing(null),!1):i&&((f=l.attachment)!=null&&f.height)&&i>l.attachment.height?(o=!0,((m=this.editing)==null?void 0:m._id)===l._id&&this.updateEditing(null),!1):!0}),r=s.map(l=>l._id);if(this.items=this.items.map(l=>l.__placeholder?s.shift():l).filter(l=>!!l&&!l.__placeholder),o&&await apos.notify("apostrophe:minSize",{type:"danger",icon:"alert-circle-icon",dismiss:!0,interpolate:{width:n,height:i}}),Array.isArray(r)&&r.length){const l=this.checked.concat(r);this.checked=l.slice(0,((a=this.relationshipField)==null?void 0:a.max)||l.length),!this.editing&&r.length===1&&this.updateEditing(r[0])}},clearSelected(){this.checked=[]},async updateEditing(e){let t=this.items.find(n=>n._id===e);return t||(t=this.checkedDocs.find(n=>n._id===e)),this.editing&&this.modified&&!await apos.confirm({heading:this.cancelHeading,description:this.cancelDescription,negativeLabel:this.cancelNegativeLabel,affirmativeLabel:this.cancelAffirmativeLabel})?!1:t!=null&&t._edit?(this.editing=t,!0):(this.editing=null,!0)},select(e){this.checked.includes(e)?this.updateEditing(e):this.relationshipField&&(this.relationshipField.max>1||!this.relationshipField.max)?this.selectAnother(e):this.checked=[e]},selectAnother(e){var t;if(((t=this.relationshipField)==null?void 0:t.max)===1){this.select(e);return}this.checked.includes(e)?this.checked=this.checked.filter(n=>n!==e):this.checked=[...this.checked,e]},selectSeries(e){var l,c;if(!this.lastSelected||((l=this.relationshipField)==null?void 0:l.max)===1){this.select(e);return}const t=this.items.findIndex(u=>u._id===this.lastSelected),n=this.items.findIndex(u=>u._id===e),i=t>n?-1:1,o=i<0?n:t,s=i<0?t:n+1,r=this.items.slice(o,s).map(u=>u._id).filter(u=>!this.checked.includes(u)),a=this.checked.concat(r);this.checked=a.slice(0,((c=this.relationshipField)==null?void 0:c.max)||a.length)},async selectClick(){await this.updateEditing(null)&&this.selectAll()},archiveClick(){this.$emit("archive",this.checked)},async search(e){this.lock++,this.skipLoadObserver=!0,this.filterValues.autocomplete=e,this.currentPage=1,this.items=[],this.isLoading=!0,await this.debouncedGetMedia({loadMore:!0,lock:this.lock}),this.isLoading=!1,this.skipLoadObserver=!1},async onContentChanged({action:e,doc:t,docIds:n,docTypes:i}){if(this.getContentChangedTypes(t,i).includes(this.moduleName)){if(n&&e==="tag"){await this.refreshData(n);return}this.modified=!1,e==="update"?this.updateStateDoc(t):this.refetchMedia(),await this.updateEditing(null)}},async refreshData(e){const{items:t,tagList:n}=await this.getMedia({...e&&{_ids:e},tags:!0});t.forEach(this.updateStateDoc),await this.getTags(),Array.isArray(n)&&(this.tagList=n),await this.updateEditing(null),this.editing&&t.length===1&&(this.modified=!1,await this.$nextTick(),await this.updateEditing(t.at(0)._id))},updateStateDoc(e){const t=this.items.findIndex(i=>i._id===e._id),n=this.checkedDocs.findIndex(i=>i._id===e._id);t!==-1&&(this.items[t]=e),n!==-1&&(this.checkedDocs[n]=e)},removeStateDoc(e){const t=this.items.findIndex(o=>o._id===e._id),n=this.checked.findIndex(o=>o===e._id),i=this.checkedDocs.findIndex(({_id:o})=>o===e._id);t!==-1&&this.items.splice(t,1),n!==-1&&this.checked.splice(n,1),i!==-1&&this.checkedDocs.splice(i,1)},async loadUntilScroll(e){let t=0,n=!0;for(;!this.hasScroll()&&n&&t<20;)n=await this.loadWhenIntersecting(e),t++,await this.$nextTick()},async handleIntersect(e){for(const t of e)t.isIntersecting&&!this.isFirstLoading&&!this.skipLoadObserver&&this.scrollQueue.add(async()=>{await this.loadWhenIntersecting(),await this.$nextTick(),await this.loadUntilScroll()}).catch(console.error)},async loadWhenIntersecting(e){if(this.currentPage<this.totalPages&&this.items.length){this.currentPage++,this.isScrollLoading=!0;const t=await this.getMedia({lock:e,loadMoreIfSkipped:this.uploaded});return typeof e=="number"&&e!==this.lock?(this.isScrollLoading=!1,!1):(await this.appendMedia(t),this.isScrollLoading=!1,!0)}return!1},observeLoadRef(){this.totalPages<2||!this.loadRef||this.loadObserver.observe(this.loadRef)},disconnectObserver(){this.loadObserver&&this.loadObserver.disconnect()},setLoadRef(e){this.loadRef=e,this.disconnectObserver(),e&&this.observeLoadRef()},async handleBatchAction({label:e,action:t,requestOptions:n={},messages:i}){if(t)try{await apos.http.post(`${this.moduleOptions.action}/${t}`,{body:{...n,_ids:this.checked,messages:i,type:this.checked.length===1?this.moduleLabels.singular:this.moduleLabels.plural}})}catch{apos.notify("apostrophe:errorBatchOperationNoti",{interpolate:{operation:this.$t(e)},type:"danger"})}},async getTags(){var e;try{const{withType:t="@apostrophecms/image-tag"}=this.moduleOptions.schema.find(s=>s._name==="_tags")||{},n=(e=apos.modules[t])==null?void 0:e.action;if(!n)return[];const o=((await apos.http.get(n,{draft:!0,qs:{sort:{title:1}}})).results||[]).map(s=>({...s,searchText:s.title.toLowerCase(),label:s.title}));this.batchTags=o}catch(t){apos.notify(t.message)}}}};function t3e(e,t,n,i,o,s){const r=E("AposButton"),a=E("AposUtilityOperations"),l=E("AposTagList"),c=E("AposModalRail"),u=E("AposLoadingBlock"),f=E("AposDocsManagerToolbar"),m=E("AposMediaManagerDisplay"),g=E("AposModalBody"),v=E("AposMediaManagerEditor"),w=E("AposMediaManagerSelections"),_=E("AposModal");return p(),R(_,{modal:o.modal,"modal-title":s.modalTitle,class:"apos-media-manager",onInactive:t[3]||(t[3]=k=>o.modal.active=!1),onShowModal:t[4]||(t[4]=k=>o.modal.showModal=!0),onEsc:e.confirmAndCancel},il({primaryControls:Q(()=>[D(a,{"module-options":s.moduleOptions,"has-relationship-field":!!e.relationshipField},null,8,["module-options","has-relationship-field"]),e.relationshipField?(p(),R(r,{key:0,type:"primary",label:s.saveRelationshipLabel,disabled:!!e.relationshipErrors,attrs:{"data-apos-focus-priority":!0},onClick:e.saveRelationship},null,8,["label","disabled","onClick"])):x("",!0)]),leftRail:Q(()=>[D(c,null,{default:Q(()=>[D(l,{title:"apostrophe:filterByTag",tags:o.tagList,onUpdate:t[0]||(t[0]=k=>s.filter("_tags",k))},null,8,["tags"])]),_:1})]),main:Q(()=>[o.isFirstLoading?(p(),R(u,{key:0})):(p(),R(g,{key:1,ref:"modalBody"},{bodyHeader:Q(()=>[D(f,{"selected-state":e.selectAllState,"total-pages":o.totalPages,"current-page":o.currentPage,filters:s.toolbarFilters,"filter-values":o.filterValues,labels:s.moduleLabels,disable:e.relationshipErrors==="min","displayed-items":o.items.length,checked:e.checked,"checked-count":e.checked.length,"checked-docs-tags":s.checkedDocsTags,"module-name":n.moduleName,options:{noPager:!0},"batch-operations":s.moduleOptions.batchOperations,"batch-tags":o.batchTags,onSelectClick:s.selectClick,onSearch:s.search,onFilter:s.filter,onBatch:s.handleBatchAction,onRefreshData:s.refreshData},null,8,["selected-state","total-pages","current-page","filters","filter-values","labels","disable","displayed-items","checked","checked-count","checked-docs-tags","module-name","batch-operations","batch-tags","onSelectClick","onSearch","onFilter","onBatch","onRefreshData"])]),bodyMain:Q(()=>[o.isLoading?(p(),R(u,{key:0})):(p(),R(m,{key:1,ref:"display",checked:e.checked,"onUpdate:checked":t[1]||(t[1]=k=>e.checked=k),accept:s.accept,items:o.items,"module-options":s.moduleOptions,"max-reached":e.maxReached(),"is-last-page":s.isLastPage,"relationship-field":e.relationshipField,"is-scroll-loading":o.isScrollLoading,onEdit:s.updateEditing,onSelect:s.select,onSelectSeries:s.selectSeries,onSelectAnother:s.selectAnother,onUploadComplete:s.completeUploading,onCreatePlaceholder:s.createPlaceholder,onSetLoadRef:s.setLoadRef},null,8,["checked","accept","items","module-options","max-reached","is-last-page","relationship-field","is-scroll-loading","onEdit","onSelect","onSelectSeries","onSelectAnother","onUploadComplete","onCreatePlaceholder","onSetLoadRef"]))]),_:1},512))]),rightRail:Q(()=>[D(c,{type:"right"},{default:Q(()=>[A("div",{class:te(["apos-media-manager__sidebar",{"apos-media-manager__sidebar--empty":!e.checked.length}])},[Ke(D(v,{media:o.editing,"is-modified":s.isModified,"module-labels":s.moduleLabels,onBack:t[2]||(t[2]=k=>s.updateEditing(null)),onModified:s.editorModified},null,8,["media","is-modified","module-labels","onModified"]),[[on,o.editing]]),Ke(D(w,{items:e.checkedDocs,onClear:s.clearSelected,onEdit:s.updateEditing},null,8,["items","onClear","onEdit"]),[[on,!o.editing]])],2)]),_:1})]),_:2},[e.relationshipField?{name:"secondaryControls",fn:Q(()=>[D(r,{type:"default",label:"apostrophe:cancel",onClick:e.confirmAndCancel},null,8,["onClick"])]),key:"0"}:{name:"secondaryControls",fn:Q(()=>[D(r,{type:"default",label:"apostrophe:exit",onClick:e.confirmAndCancel},null,8,["onClick"])]),key:"1"}]),1032,["modal","modal-title","onEsc"])}const n3e=I(e3e,[["render",t3e],["__scopeId","data-v-217ac130"]]),i3e={props:{maxReached:{type:Boolean,default:!1},checked:{type:[Array,Boolean],default:!1},moduleOptions:{type:Object,required:!0},items:{type:Array,default(){return[]}},options:{type:Object,default(){return{hideCheckboxes:!1}}},accept:{type:String,required:!1,default:null},largePreview:{type:Boolean,default:!1},relationshipField:{type:[Object,Boolean],default:!1},isLastPage:{type:Boolean,default:!1},isScrollLoading:{type:Boolean,default:!1}},emits:["update:checked","select","select-series","select-another","upload-started","upload-complete","create-placeholder","set-load-ref"],computed:{checkedProxy:{get(){return this.checked},set(e){var t;this.$emit("update:checked",((t=this.relationshipField)==null?void 0:t.max)===1?[].concat(e.at(-1)||[]):e)}},itemsWithKeys(){return this.items.map(e=>({...e,__key:this.idFor(e)}))}},watch:{async isLastPage(e){await this.$nextTick(),this.$emit("set-load-ref",this.$refs.scrollLoad)},async checked(e){var t;if(e.length){await this.$nextTick();const n=e[e.length-1];(t=this.$el.querySelector(`#btn-${n.replaceAll(":","-")}`))==null||t.focus()}}},mounted(){this.$emit("set-load-ref",this.$refs.scrollLoad)},methods:{getCellStyles(e){if(this.largePreview&&e.dimensions)return{width:`${e.dimensions.width}px`,height:`${e.dimensions.height}px`}},addDragClass(e){e.target.classList.add("apos-is-hovering")},removeDragClass(e){e.target.classList.remove("apos-is-hovering")},idFor(e){return`${e._id}-${qt()}`},canSelect(e){var t,n;return this.checked.includes(e)||((t=this.relationshipField)==null?void 0:t.max)===1||((n=this.relationshipField)==null?void 0:n.max)&&!this.maxReached}}},o3e={class:"apos-media-manager-display"},s3e={class:"apos-media-manager-display__grid"},r3e={class:"apos-media-manager-display__checkbox"},a3e=["id","disabled","onClick"],l3e=["src","alt"],c3e={key:1,class:"apos-media-manager-display__placeholder"},d3e={key:1,class:"apos-media-manager-display__cell apos-is-hidden","aria-hidden":"true"},u3e={key:1,class:"apos-media-manager-display__end-reached"};function h3e(e,t,n,i,o,s){const r=E("AposMediaUploader"),a=E("AposCheckbox"),l=E("AposLoading");return p(),y("div",o3e,[A("div",s3e,[n.moduleOptions.canCreate?(p(),R(r,{key:0,action:n.moduleOptions.action,accept:n.accept,onUploadStarted:t[0]||(t[0]=c=>e.$emit("upload-started")),onUploadComplete:t[1]||(t[1]=c=>e.$emit("upload-complete",c)),onCreatePlaceholder:t[2]||(t[2]=c=>e.$emit("create-placeholder",c))},null,8,["action","accept"])):x("",!0),(p(!0),y(Ce,null,Ie(s.itemsWithKeys,c=>{var u;return p(),y("div",{key:c.__key,class:te(["apos-media-manager-display__cell",{"apos-is-selected":n.checked.includes(c._id)}]),style:Vt(s.getCellStyles(c))},[A("div",r3e,[Ke(D(a,{modelValue:s.checkedProxy,"onUpdate:modelValue":t[3]||(t[3]=f=>s.checkedProxy=f),tabindex:"-1",field:{name:c._id,hideLabel:!0,label:e.$t({key:"apostrophe:toggleSelectionOf",title:c.title}),disableFocus:!0,readOnly:s.canSelect(c._id)===!1},choice:{value:c._id}},null,8,["modelValue","field","choice"]),[[on,c._id!=="placeholder"&&!n.options.hideCheckboxes]])]),A("button",{id:`btn-${(c._id||c.__placeholder||"").replaceAll(":","-")}`,disabled:c._id==="placeholder"||s.canSelect(c._id)===!1,class:"apos-media-manager-display__select",onClick:[Ue(f=>e.$emit("select",c._id),["exact"]),Ue(f=>e.$emit("select-series",c._id),["shift"]),Ue(f=>e.$emit("select-another",c._id),["meta"]),Ue(f=>e.$emit("select-another",c._id),["ctrl"])]},[(u=c.attachment)!=null&&u._urls?(p(),y("img",{key:0,class:"apos-media-manager-display__media",src:c.attachment._urls["one-sixth"],alt:c.description||c.title},null,8,l3e)):(p(),y("div",c3e))],8,a3e)],6)}),128)),n.items.length===0?(p(),y("div",d3e,t[4]||(t[4]=[A("button",{disabled:"true",class:"apos-media-manager-display__select"},null,-1)]))):x("",!0)]),n.isLastPage?(p(),y("div",u3e,[A("p",null,$(e.$t("apostrophe:mediaLibraryEndReached")),1)])):(p(),y("div",{key:0,ref:"scrollLoad",class:te(["apos-media-manager-display__scroll-load",{"apos-media-manager-display__scroll-load--loading":n.isScrollLoading}])},[n.isScrollLoading?(p(),R(l,{key:0,class:"apos-loading"})):x("",!0)],2))])}const f3e=I(i3e,[["render",h3e],["__scopeId","data-v-573c1a34"]]);var aT={exports:{}};(function(e,t){(function(n,i){e.exports=i()})(wi,function(){return function(n,i){var o=i.prototype,s=o.format;o.format=function(r){var a=this,l=this.$locale();if(!this.isValid())return s.bind(this)(r);var c=this.$utils(),u=(r||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,function(f){switch(f){case"Q":return Math.ceil((a.$M+1)/3);case"Do":return l.ordinal(a.$D);case"gggg":return a.weekYear();case"GGGG":return a.isoWeekYear();case"wo":return l.ordinal(a.week(),"W");case"w":case"ww":return c.s(a.week(),f==="w"?1:2,"0");case"W":case"WW":return c.s(a.isoWeek(),f==="W"?1:2,"0");case"k":case"kk":return c.s(String(a.$H===0?24:a.$H),f==="k"?1:2,"0");case"X":return Math.floor(a.$d.getTime()/1e3);case"x":return a.$d.getTime();case"z":return"["+a.offsetName()+"]";case"zzz":return"["+a.offsetName("long")+"]";default:return f}});return s.bind(this)(u)}}})})(aT);var p3e=aT.exports;const m3e=Mc(p3e);Kr.extend(m3e);const g3e={mixins:[lr,nu,ks],props:{media:{type:Object,default(){return{}}},isModified:{type:Boolean,default:!1},moduleLabels:{type:Object,required:!0}},emits:["back","modified"],data(){return{activeMedia:at(this.media),restoreOnly:this.media&&this.media.archived,original:at(this.media),lipKey:"",triggerValidation:!1,showReplace:!1}},computed:{moduleOptions(){return window.apos.modules[this.activeMedia.type]||{}},canLocalize(){return this.moduleOptions.canLocalize&&this.activeMedia._id},moreMenu(){const e=[{label:"apostrophe:discardChanges",action:"cancel"}];return this.canLocalize&&e.push({label:"apostrophe:localize",action:"localize"}),this.activeMedia._id&&this.activeMedia._delete&&!this.restoreOnly&&e.push({label:"apostrophe:archiveImage",action:"archive",modifiers:["danger"]}),e},fileSize(){if(!this.activeMedia.attachment||!this.activeMedia.attachment.length)return"";const e=this.activeMedia.attachment.length,t=new Intl.NumberFormat(apos.locale,{maximumFractionDigits:2});if(e>=1e6){const n=t.format(e/1e6);return this.$t("apostrophe:mediaMB",{size:n})}else{const n=t.format(e/1e3);return this.$t("apostrophe:mediaKB",{size:n})}},createdDate(){return!this.activeMedia.attachment||!this.activeMedia.attachment.createdAt?"":Kr(this.activeMedia.attachment.createdAt).format(this.$t("apostrophe:dayjsMediaCreatedDateFormat"))},isArchived(){var e;return(e=this.media)==null?void 0:e.archived}},watch:{"docFields.data":{deep:!0,handler(e,t){this.evaluateConditions(),this.$nextTick(()=>{Object.keys(t).length>0&&Object.keys(e).length>0?this.$emit("modified",ko(this.schema,this.original,e)):this.$emit("modified",!1)}),this.activeMedia.attachment&&!e.attachment?this.updateActiveAttachment({}):(e.attachment&&!this.activeMedia.attachment||this.activeMedia.attachment&&!e.attachment||!ol.isEqual(e.attachment,this.activeMedia.attachment))&&this.updateActiveAttachment(e.attachment)}},async media(e){await this.updateActiveDoc(e)}},mounted(){this.generateLipKey(),this.$emit("modified",!1)},methods:{moreMenuHandler(e){this[e.action]()},async updateActiveDoc(e){e=e||{},this.showReplace=!1,this.activeMedia=at(e),this.restoreOnly=!!this.activeMedia.archived,this.original=at(e),this.docFields.data=at(e),this.evaluateConditions(),await this.evaluateExternalConditions(),this.generateLipKey(),await this.unlock(),e._id&&(await this.lock(`${this.moduleOptions.action}/${e._id}`)||this.lockNotAvailable())},async archive(){if(!await apos.confirm({heading:"apostrophe:areYouSure",description:"apostrophe:willMoveImageToArchive"}))return;const e=`${this.moduleOptions.action}/${this.activeMedia._id}`;try{const t=await apos.http.patch(e,{busy:!0,body:{archived:!0},draft:!0});apos.bus.$emit("content-changed",{doc:t,action:"archive"}),await apos.notify("apostrophe:contentArchived",{type:"success",icon:"archive-arrow-down-icon",dismiss:!0}),await this.cancel()}catch{await apos.notify("apostrophe:errorWhileArchiving",{type:"danger",icon:"alert-circle-icon",dismiss:!0})}},async save(){this.triggerValidation=!0;const e=`${this.moduleOptions.action}/${this.activeMedia._id}`;if(this.docFields.data.attachment=this.activeMedia.attachment,await this.$nextTick(),this.docFields.hasErrors){this.triggerValidation=!1,await apos.notify("apostrophe:resolveErrorsBeforeSaving",{type:"warning",icon:"alert-circle-icon",dismiss:!0});return}let t=this.docFields.data;this.addLockToRequest(t);try{const n=this.restoreOnly?apos.http.patch:apos.http.put;this.restoreOnly&&(t={archived:!1});const i=await n(e,{busy:!0,body:t,draft:!0});apos.bus.$emit("content-changed",{doc:i,action:this.restoreOnly?"restore":"update"}),this.original=at(this.docFields.data);const o=this.restoreOnly?"apostrophe:contentRestored":"apostrophe:changesPublished";apos.notify(o,{type:"success",dismiss:!0})}catch(n){if(this.isLockedError(n))await this.showLockedError(n),this.lockNotAvailable();else{const i=this.restoreOnly?this.$t("apostrophe:mediaManagerErrorRestoring"):this.$t("apostrophe:mediaManagerErrorSaving");await this.handleSaveError(n,{fallback:`${i} ${this.moduleLabels.singular}`})}}finally{this.showReplace=!1}},generateLipKey(){this.lipKey=qt()},cancel(){this.showReplace=!1,this.$emit("back")},lockNotAvailable(){this.$emit("modified",!1),this.cancel()},updateActiveAttachment(e){this.activeMedia.attachment=e},viewMedia(){window.open(this.activeMedia.attachment._urls.original,"_blank")},async localize(e){if(this.isModified){if(!await this.confirmAndCancel())return;await this.cancel(),await this.updateActiveDoc(this.activeMedia)}apos.bus.$emit("admin-menu-click",{itemName:"@apostrophecms/i18n:localize",props:{doc:this.activeMedia}})},async close(){await this.cancel()}}},b3e={key:0,class:"apos-media-editor__inner"},y3e={class:"apos-media-editor__thumb-wrapper"},v3e=["src","alt"],w3e={class:"apos-media-editor__details"},_3e={key:0,class:"apos-media-editor__detail"},C3e={key:1,class:"apos-media-editor__detail"},A3e={key:2,class:"apos-media-editor__detail"},k3e={class:"apos-media-editor__links"},S3e={class:"apos-media-editor__link","aria-hidden":"true"},x3e={key:0,class:"apos-media-editor__link"},M3e={key:1,class:"apos-media-editor__link"},T3e={class:"apos-media-editor__lip"};function E3e(e,t,n,i,o,s){const r=E("AposButton"),a=E("AposSchema"),l=E("AposContextMenu"),c=E("AposModalLip");return p(),y("div",{class:te(["apos-media-editor",{"apos-is-replacing":o.showReplace}])},[o.activeMedia?(p(),y("div",b3e,[A("div",y3e,[o.activeMedia.attachment&&o.activeMedia.attachment._urls?(p(),y("img",{key:0,class:"apos-media-editor__thumb",src:o.activeMedia.attachment._urls[o.restoreOnly?"one-sixth":"one-third"],alt:o.activeMedia.description},null,8,v3e)):x("",!0)]),A("ul",w3e,[s.createdDate?(p(),y("li",_3e,$(e.$t("apostrophe:mediaCreatedDate",{createdDate:s.createdDate})),1)):x("",!0),s.fileSize?(p(),y("li",C3e,$(e.$t("apostrophe:mediaFileSize",{fileSize:s.fileSize})),1)):x("",!0),o.activeMedia.attachment&&o.activeMedia.attachment.width?(p(),y("li",A3e,$(e.$t("apostrophe:mediaDimensions",{width:o.activeMedia.attachment.width,height:o.activeMedia.attachment.height})),1)):x("",!0)]),A("ul",k3e,[A("li",S3e,[D(r,{type:"quiet",label:"apostrophe:replace",disabled:s.isArchived,onClick:t[0]||(t[0]=u=>o.showReplace=!0)},null,8,["disabled"])]),o.activeMedia.attachment&&o.activeMedia.attachment._urls?(p(),y("li",x3e,[D(r,{type:"quiet",label:"apostrophe:view",disabled:s.isArchived,onClick:s.viewMedia},null,8,["disabled","onClick"])])):x("",!0),o.activeMedia.attachment&&o.activeMedia.attachment._urls?(p(),y("li",M3e,[D(r,{type:"quiet",label:"apostrophe:download",href:s.isArchived?null:o.activeMedia.attachment._urls.original,disabled:s.isArchived,download:""},null,8,["href","disabled"])])):x("",!0)]),e.docFields.data.title!==void 0?(p(),R(a,{key:0,ref:"schema",modelValue:e.docFields,"onUpdate:modelValue":t[1]||(t[1]=u=>e.docFields=u),schema:e.schema,modifiers:["small","inverted"],"trigger-validation":o.triggerValidation,"doc-id":e.docFields.data._id,"following-values":e.followingValues(),"conditional-fields":e.conditionalFields,"server-errors":e.serverErrors,onValidate:e.triggerValidate,onReset:t[2]||(t[2]=u=>e.$emit("modified",!1))},null,8,["modelValue","schema","trigger-validation","doc-id","following-values","conditional-fields","server-errors","onValidate"])):x("",!0)])):x("",!0),D(c,{refresh:o.lipKey},{default:Q(()=>[A("div",T3e,[o.restoreOnly?x("",!0):(p(),R(l,{key:0,button:{label:"apostrophe:moreOperations",iconOnly:!0,icon:"dots-vertical-icon",type:"subtle",modifiers:["small","no-motion"]},menu:s.moreMenu,"menu-placement":"top-end",onItemClicked:s.moreMenuHandler},null,8,["menu","onItemClicked"])),D(r,{class:"apos-media-editor__save",disabled:e.docFields.hasErrors,label:o.restoreOnly?"apostrophe:restore":"apostrophe:save",type:"primary",onClick:s.save},null,8,["disabled","label","onClick"])])]),_:1},8,["refresh"])],2)}const O3e=I(g3e,[["render",E3e],["__scopeId","data-v-2771b9d8"]]),$3e={props:{items:{type:Array,required:!0}},emits:["edit","clear"],data(){return{emptyState:{message:"apostrophe:noItemsSelected"},clearButton:{label:"apostrophe:clearSelection",type:"quiet",modifiers:["no-motion"]}}},methods:{edit(e){this.$emit("edit",e)},clear(){this.$emit("clear")}}},I3e={class:"apos-media-manager-selections"},L3e={key:0},D3e={class:"apos-media-manager-selections__heading"},R3e={class:"apos-media-manager-selections__items"},P3e={key:0,class:"apos-media-manager-selections__item-thumb-container"},H3e=["src","alt"],V3e={class:"apos-media-manager-selections__item-info"},z3e={class:"apos-media-manager-selections__item-title"},N3e={key:1,class:"apos-media-manager-selection__empty"};function B3e(e,t,n,i,o,s){const r=E("AposButton"),a=E("AposEmptyState");return p(),y("div",I3e,[n.items.length?(p(),y("div",L3e,[A("div",D3e,[Et($(n.items.length)+" items selected ",1),D(r,{label:"apostrophe:clear",type:"quiet",modifiers:["no-motion"],onClick:s.clear},null,8,["onClick"])]),A("ol",R3e,[(p(!0),y(Ce,null,Ie(n.items,l=>(p(),y("li",{key:l._id,class:"apos-media-manager-selections__item"},[l.attachment&&l.attachment._urls?(p(),y("div",P3e,[A("img",{src:l.attachment._urls["one-sixth"],alt:l.description||l.title,class:"apos-media-manager-selections__item-thumb"},null,8,H3e)])):x("",!0),A("div",V3e,[A("div",z3e,$(l.title),1),l._edit?(p(),R(r,{key:0,label:"apostrophe:edit",type:"quiet",modifiers:["no-motion"],onClick:c=>s.edit(l._id)},null,8,["onClick"])):x("",!0)])]))),128))])])):(p(),y("div",N3e,[D(a,{"empty-state":o.emptyState},null,8,["empty-state"])]))])}const F3e=I($3e,[["render",B3e],["__scopeId","data-v-12b6358f"]]),W3e={name:"AposMediaUploader",props:{action:{type:String,required:!0},disabled:{type:Boolean,default:!1},accept:{type:String,required:!1,default:null}},emits:["upload-started","upload-complete","create-placeholder"],data(){return{dragover:!1,dragoverCount:0}},computed:{},mounted(){apos.bus.$on("command-menu-manager-create-new",this.create)},unmounted(){apos.bus.$off("command-menu-manager-create-new",this.create)},methods:{create(){this.disabled||this.$refs.upload.click()},incrementDragover(){this.dragoverCount++,this.dragover=this.dragoverCount>0},decrementDragover(){this.dragoverCount--,this.dragover=this.dragoverCount>0},async uploadMedia(e){try{if(apos.bus.$emit("busy",{name:"busy",active:!0}),this.disabled)return;this.dragover=!1,this.$emit("upload-started");const t=e.dataTransfer?e.dataTransfer.files:e.target.files,n=t.length;let i=0;const o=await apos.http.post(this.action,{busy:!0,body:{_newInstance:!0},draft:!0});[...t].forEach(()=>this.createPlaceholder(o));const s=[];for(const a of t)try{const l=await this.insertImage(a,{...o});l!=null&&l._id&&s.push(l)}catch(l){i++;const c=l.body&&l.body.message?l.body.message:this.$t("apostrophe:uploadError");await apos.notify(c,{type:"danger",icon:"alert-circle-icon",dismiss:!0,localize:!1})}i>0&&await apos.notify("apostrophe:uploadedError",{type:"danger",icon:"alert-circle-icon",dismiss:!1,interpolate:{count:i}});const r=n-i;r>0&&await apos.notify("apostrophe:uploaded",{type:"success",dismiss:!0,interpolate:{count:r}}),this.$emit("upload-complete",s)}finally{apos.bus.$emit("busy",{name:"busy",active:!1}),this.$refs.upload.value=""}},createPlaceholder(e){this.$emit("create-placeholder",{...e,__placeholder:qt()})},async insertImage(e,t){const n=new window.FormData;n.append("file",e);const i=await apos.http.post("/api/v1/@apostrophecms/attachment/upload",{busy:!0,body:n}),o=Object.assign(t,{title:i.title,attachment:i});try{return await apos.http.post(this.action,{busy:!0,body:o,draft:!0})}catch(s){return await this.notifyErrors(s,this.$t("apostrophe:uploadError")),{}}},async notifyErrors(e,t){if(e.body&&e.body.data&&e.body.data.errors)for(const n of e.body.data.errors)await apos.notify(n.message||n.name||t,{type:"danger",icon:"alert-circle-icon",dismiss:!0,localize:!1})},onUploadDragAndDropKeyDown(e){const t=e.key==="Enter"||e.code==="Enter"||e.code==="NumpadEnter",n=e.keyCode===32||e.code==="Space";n&&e.preventDefault(),(t||n)&&this.create()}}},U3e=["disabled"],j3e={class:"apos-media-uploader__instructions"},q3e={class:"apos-media-uploader__primary"},K3e={key:0,class:"apos-media-uploader__secondary"},G3e=["accept","disabled"];function J3e(e,t,n,i,o,s){const r=E("AposCloudUploadIcon");return p(),y("label",{class:te(["apos-media-manager-display__cell apos-media-uploader",{"apos-media-uploader--enabled":!n.disabled}]),disabled:n.disabled?n.disabled:null,onDrop:t[2]||(t[2]=Ue((...a)=>s.uploadMedia&&s.uploadMedia(...a),["prevent"])),onDragover:t[3]||(t[3]=Ue(()=>{},["prevent"])),onDragenter:t[4]||(t[4]=(...a)=>s.incrementDragover&&s.incrementDragover(...a)),onDragleave:t[5]||(t[5]=(...a)=>s.decrementDragover&&s.decrementDragover(...a))},[A("div",{class:te(["apos-media-uploader__inner",{"apos-is-dragging":o.dragover}]),tabindex:"0","data-apos-focus-priority":"",onKeydown:t[0]||(t[0]=(...a)=>s.onUploadDragAndDropKeyDown&&s.onUploadDragAndDropKeyDown(...a))},[D(r,{class:"apos-media-uploader__icon"}),A("div",j3e,[A("p",q3e,$(e.$t(o.dragover?"apostrophe:mediaUploadViaDrop":"apostrophe:dropMedia")),1),o.dragover?x("",!0):(p(),y("p",K3e,$(e.$t("apostrophe:mediaUploadViaExplorer")),1))])],34),A("input",{ref:"upload",type:"file",class:"apos-sr-only",accept:n.accept,multiple:"true",disabled:n.disabled,tabindex:"-1",onInput:t[1]||(t[1]=(...a)=>s.uploadMedia&&s.uploadMedia(...a))},null,40,G3e)],42,U3e)}const Y3e=I(W3e,[["render",J3e],["__scopeId","data-v-87cd649b"]]),Z3e={class:"apos-media-uploader__inner"},X3e=["innerHTML"],Q3e=["innerHTML"],e4e={key:0,class:"apos-media-uploader__infos"},t4e=["accept","disabled"],n4e={__name:"AposMediaUploaderUi",props:{icon:{type:String,default:"image-icon"},diabled:{type:Boolean,default:!1},minSize:{type:Array,default:null},accept:{type:String,default:"gif,.jpg,.png,.svg,.webp,.jpeg"},placeholder:{type:String,default:null}},emits:["media","upload"],setup(e,{emit:t}){const n=tr("i18n"),i=e,o=t,s=Nf("mediaUploaderEl"),r=Nf("uploadEl"),a=Ve(0),l=Ve(0),c=n("apostrophe:mediaLibrary"),u=n("apostrophe:yourDevice"),f=n("apostrophe:imageUploadMsg",{mediaLibrary:`<button class="apos-media-uploader__btn" data-apos-click="openMedia">${c}</button>`,yourDevice:`<button class="apos-media-uploader__btn" data-apos-click="searchFile">${u}</button>`}),m=i.minSize&&n("apostrophe:minimumSize",{width:i.minSize[0]||"_",height:i.minSize[1]||"_"}),g=i.accept.replace(/\s+|\.+/g,"").split(",").map(q=>q.trim().toUpperCase()),v=g.slice(0,g.length-1).map(q=>`<strong>${q}</strong>`).join(", "),w=F(),_=n("apostrophe:imageUploadSupport",{formats:v,last:`<strong>${g[g.length-1]}</strong>`,upTo:w?" "+n("apostrophe:imageUploadUpTo",{maxSize:w}):""}),k=Je(()=>l.value>0),L=Je(()=>a.value>0),P=Je(()=>!!i.placeholder),M=Je(()=>i.placeholder?{"background-image":`url(${i.placeholder})`}:{});function F(){var N;const q=(N=apos.modules["@apostrophecms/attachment"])==null?void 0:N.maxSize;return typeof q=="number"?`<strong>${(q/1048576).toFixed(1).toString()}MB</strong>`:typeof q!="string"?null:`<strong>${q.toLowerCase().trim()}</strong>`}function z(q){var Z;(Z=q.dataTransfer)!=null&&Z.types.includes("Files")&&l.value++}function ee(q){var Z;(Z=q.dataTransfer)!=null&&Z.types.includes("Files")&&l.value--}function ie(){l.value=0}function K(){a.value++}function ae(){a.value--}As(()=>{B(),document.addEventListener("dragenter",z),document.addEventListener("dragleave",ee),document.addEventListener("drop",ie)}),pl(()=>{J()}),Au(()=>{document.removeEventListener("dragenter",z),document.removeEventListener("dragleave",ee),document.removeEventListener("drop",ie)});function B(){s.value.querySelectorAll("[data-apos-click]").forEach(q=>{q.addEventListener("click",he)})}function J(){s.value.querySelectorAll("[data-apos-click]").forEach(q=>{q.removeEventListener("click",he)})}function he(q){q.stopPropagation();const Z=q.currentTarget.getAttribute("data-apos-click");Z==="openMedia"?ne():Z==="searchFile"&&oe()}function ne(){o("media")}function oe(){i.disabled||r.value.click()}async function W(q){a.value=0;const Z=q.dataTransfer?q.dataTransfer.files:q.target.files;if(!i.accept){o("upload",Z);return}if([...Z].find(le=>{const ce=le.name.split(".").pop();return!i.accept.includes(ce)})){apos.notify("apostrophe:invalid",{type:"danger",icon:"alert-circle-icon",dismiss:!0});return}o("upload",Z)}return(q,Z)=>{const N=E("AposIndicator");return p(),y("div",{ref_key:"mediaUploaderEl",ref:s,class:te(["apos-media-uploader",{"apos-media-uploader--disabled":i.disabled,"apos-is-dragging":k.value,"apos-is-dragging--over":L.value,"apos-has-placeholder":P.value}]),style:Vt(M.value),onDrop:Ue(W,["prevent"]),onDragover:Z[1]||(Z[1]=Ue(()=>{},["prevent"])),onDragenter:K,onDragleave:ae},[A("div",Z3e,[D(N,{class:"apos-media-uploader__icon","icon-size":70,icon:i.icon},null,8,["icon"]),A("p",{class:"apos-media-uploader__instructions",innerHTML:Zt(f)},null,8,X3e),A("p",{class:"apos-media-uploader__infos",innerHTML:Zt(_)},null,8,Q3e),i.minSize?(p(),y("p",e4e,$(Zt(m)),1)):x("",!0)]),A("input",{ref_key:"uploadEl",ref:r,type:"file",class:"apos-sr-only",accept:i.accept,multiple:"true",disabled:i.disabled,tabindex:"-1",onInput:W,onClick:Z[0]||(Z[0]=Ue(()=>{},["stop"]))},null,40,t4e)],38)}}},i4e=I(n4e,[["__scopeId","data-v-e1aafaf3"]]),o4e={key:0,class:"apos-image-widget"},s4e=["innerHTML"],r4e={__name:"AposImageWidget",props:X4,emits:["edit","update"],setup(e,{emit:t}){const n=e,i=apos.modules["@apostrophecms/image"],o=apos.modules[`${n.type}-widget`],s=i.schema.find(_=>_.name==="attachment").accept,r=t,{getClasses:a,renderContent:l,rendered:c}=_de(n),u=Je(()=>{var _,k;return!!((k=(_=n.modelValue)==null?void 0:_._image)!=null&&k.length)}),f=Je(()=>o.showPlaceholder===!1?null:o.placeholderUrl);Fo(()=>n.modelValue,async _=>{u.value&&await l()},{immediate:!0});async function m(){const _=apos.modal.modals.find(L=>L.itemName==="@apostrophecms/image:manager");if(!_)return;apos.area.widgetOptions=[at(n.options),...apos.area.widgetOptions];const[k]=await apos.modal.execute(_.componentName,{..._.props,moduleName:"@apostrophecms/image",chosen:[],relationshipField:{max:1}})||[];if(apos.area.widgetOptions=apos.area.widgetOptions.slice(1),k){const L={...n.modelValue,_image:[k]};await V2(o.schema,L,n.options),r("update",L)}}function g(_){const k=n.options.minSize;return k&&(k[0]&&_.width<k[0]||k[1]&&_.height<k[1])?(apos.notify("apostrophe:minimumSize",{type:"danger",icon:"alert-circle-icon",dismiss:!0,interpolate:{width:k[0],height:k[1]}}),!1):!0}async function v(_){if(!_)return!1;try{const k=URL.createObjectURL(_);return await new Promise((P,M)=>{const F=new Image;F.onload=z=>{URL.revokeObjectURL(k),P(g(z.target))},F.onerror=()=>{URL.revokeObjectURL(k),M(new Error)},F.src=k})}catch{return apos.notify("apostrophe:uploadError",{type:"danger",icon:"alert-circle-icon",dismiss:!0}),!1}}async function w(_=[]){var P;const[k]=_;if(await v(k))try{const M=await apos.http.post(i.action,{busy:!0,body:{_newInstance:!0},draft:!0}),F=new FormData;F.append("file",k);const z=await apos.http.post("/api/v1/@apostrophecms/attachment/upload",{busy:!0,body:F}),ee=Object.assign(M,{title:z.title,attachment:z}),ie=await apos.http.post(i.action,{busy:!0,body:ee,draft:!0}),K={...n.modelValue,_image:[ie]};await V2(o.schema,K,n.options),r("update",K)}catch(M){const F=(P=M.body)!=null&&P.message?M.body.message:this.$t("apostrophe:uploadError");await apos.notify(F,{type:"danger",icon:"alert-circle-icon",dismiss:!0,localize:!1})}}return(_,k)=>{var P;const L=E("AposMediaUploaderUi");return u.value?(p(),y("div",{key:1,class:te(Zt(a)),innerHTML:Zt(c)},null,10,s4e)):(p(),y("div",o4e,[D(L,{"min-size":(P=n.options)==null?void 0:P.minSize,accept:Zt(s),placeholder:f.value,onUpload:w,onMedia:m},null,8,["min-size","accept","placeholder"])]))}}},a4e=I(r4e,[["__scopeId","data-v-9231b753"]]),l4e={name:"AposSubmittedDraftIcon",props:{action:{type:String,required:!0}},data(){return{count:0}},computed:{canPublish(){return window.apos.modules["@apostrophecms/submitted-draft"].canPublish},tooltip(){return this.count>0?"apostrophe:manageDraftSubmissions":"apostrophe:noDraftSubmissions"}},mounted(){this.updateCount()},unmounted(){this.timeout&&clearTimeout(this.timeout)},methods:{open(){apos.bus.$emit("admin-menu-click","@apostrophecms/submitted-draft:manager")},async updateCount(){try{document.visibilityState!=="hidden"&&(this.count=(await apos.http.get(apos.modules["@apostrophecms/submitted-draft"].action,{qs:{count:1,aposMode:"draft"}})).count)}catch(e){console.error(e)}finally{this.timeout=setTimeout(this.updateCount,1e4)}}}},c4e={key:0,class:"apos-submitted-drafts__counter"};function d4e(e,t,n,i,o,s){const r=E("AposButton");return p(),R(r,{icon:"tray-full-icon",type:"subtle",modifiers:["small","no-motion"],disabled:o.count<=0,tooltip:s.tooltip,"icon-only":!0,action:n.action,onClick:s.open},{label:Q(()=>[s.canPublish&&o.count>0?(p(),y("span",c4e,$(o.count),1)):x("",!0)]),_:1},8,["disabled","tooltip","action","onClick"])}const u4e=I(l4e,[["render",d4e],["__scopeId","data-v-8ad699db"]]),h4e={name:"AposCommandMenuKey",props:{label:{type:[String,Object],default:null},color:{type:String,default:null},textColor:{type:String,default:null},icon:{type:String,default:null},iconSize:{type:Number,default:12},textOnly:{type:Boolean,default:!1}},computed:{classes(){return[this.textOnly?"apos-command-menu-text":"apos-command-menu-key",!this.icon&&this.label.length>1?"apos-command-menu-key-auto":""]}}};function f4e(e,t,n,i,o,s){const r=E("AposIndicator");return p(),y("span",{class:te(s.classes)},[n.icon?(p(),R(r,{key:0,icon:n.icon,"icon-size":n.iconSize,class:"apos-button__icon","fill-color":"color"},null,8,["icon","icon-size"])):x("",!0),n.label?gt(e.$slots,"label",{key:1},()=>[Et($(e.$t(n.label)),1)],!0):x("",!0)],2)}const p4e=I(h4e,[["render",f4e],["__scopeId","data-v-f7ebe486"]]),m4e={name:"AposCommandMenuKeyList",props:{shortcut:{type:String,default:""}},computed:{keys(){const[e]=this.shortcut.split(" "),t={" ":"keyboard-space",alt:"apple-keyboard-option",arrowdown:"arrow-down-icon",arrowleft:"arrow-left-icon",arrowright:"arrow-right-icon",arrowup:"arrow-up-icon",backspace:"keyboard-backspace",caps:"apple-keyboard-caps",capslock:"apple-keyboard-caps",cmd:"apple-keyboard-command",command:"apple-keyboard-command",control:"apple-keyboard-control",ctrl:"apple-keyboard-control",enter:"keyboard-return",esc:"keyboard-esc",escape:"keyboard-esc",f10:"keyboard-f10",f11:"keyboard-f11",f12:"keyboard-f12",f1:"keyboard-f1",f2:"keyboard-f2",f3:"keyboard-f3",f4:"keyboard-f4",f5:"keyboard-f5",f6:"keyboard-f6",f7:"keyboard-f7",f8:"keyboard-f8",f9:"keyboard-f9",meta:"apple-keyboard-command",option:"apple-keyboard-option",return:"keyboard-return",shift:"apple-keyboard-shift",space:"keyboard-space",tab:"keyboard-tab"},n={delete:"del",pagedown:"pgdn",pageup:"pgup"};return e.split("+").flatMap(this.then).map(i=>{if(i==="then")return{icon:null,label:"apostrophe:commandMenuKeyThen",textOnly:!0};const o=t[i.toLowerCase()];return{icon:o,label:o?null:(n[i.toLowerCase()]||i).toLowerCase()}})}},methods:{then(e){return e.includes(",")?e.split(",").flatMap(t=>[t,"then"]).slice(0,-1):e}}},g4e={class:"apos-command-menu-keys"};function b4e(e,t,n,i,o,s){const r=E("AposCommandMenuKey");return p(),y("div",g4e,[(p(!0),y(Ce,null,Ie(s.keys,(a,l)=>(p(),R(r,{key:l,label:a.label,icon:a.icon,"text-only":a.textOnly},null,8,["label","icon","text-only"]))),128))])}const y4e=I(m4e,[["render",b4e],["__scopeId","data-v-5b43e73f"]]),v4e={name:"AposCommandMenuShortcut",emits:["safe-close"],data(){return{groups:apos.commandMenu.modals.default,modal:{busy:!1,active:!1,trapFocus:!1,type:"overlay",showModal:!1,disableHeader:!0}}},computed:{hasCommands(){return Object.keys(this.groups).length}},mounted(){apos.bus.$on("modal-launched",this.autoCloseWhenHidden),apos.bus.$on("modal-resolved",this.close),this.modal.active=!0;const e=apos.commandMenu.getModal(),t=apos.commandMenu.modals[e]||{};this.groups=t,this.hasCommands||this.$emit("safe-close")},beforeUnmount(){apos.bus.$off("modal-launched",this.autoCloseWhenHidden),apos.bus.$off("modal-resolved",this.close)},methods:{autoCloseWhenHidden(e){if(apos.modal.getProperties(e.id).itemName!=="@apostrophecms/command-menu:shortcut"){this.close();return}const n=apos.modal.getAt(-2);apos.modal.getProperties(n.id).itemName==="@apostrophecms/command-menu:shortcut"&&this.close()},close(){this.modal.showModal=!1},getLabel(e){if(typeof e=="object"&&e.key){const t=e.type?this.$t(e.type):"";return this.$t({...e,key:e.key,type:t})}return this.$t(e)}}},w4e={class:"apos-modal__header"},_4e={class:"apos-modal__header__main"},C4e={class:"apos-modal__heading"},A4e={class:"apos-command-menu-shortcut-groups"},k4e={class:"apos-command-menu-shortcut-group-title"},S4e=["aria-keyshortcuts"],x4e={class:"apos-command-menu-shortcut-command-title"};function M4e(e,t,n,i,o,s){const r=E("AposButton"),a=E("AposCommandMenuKeyList"),l=E("AposModalBody"),c=E("AposModal");return p(),R(c,{modal:o.modal,class:"apos-command-menu-shortcut",onEsc:s.close,onInactive:t[0]||(t[0]=u=>o.modal.active=!1),onShowModal:t[1]||(t[1]=u=>o.modal.showModal=!0)},{main:Q(()=>[D(l,null,{bodyMain:Q(()=>[A("header",w4e,[A("div",_4e,[D(r,{attrs:{"data-apos-focus-priority":!0},type:"default",title:e.$t("apostrophe:commandMenuEsc"),"icon-only":!0,icon:"keyboard-esc",onClick:s.close},null,8,["title","onClick"]),A("h2",C4e,$(e.$t("apostrophe:commandMenuShortcut")),1)])]),A("section",A4e,[(p(!0),y(Ce,null,Ie(o.groups,(u,f)=>(p(),y("div",{key:f,class:"apos-command-menu-shortcut-group"},[A("h3",k4e,$(s.getLabel(u.label)),1),(p(!0),y(Ce,null,Ie(u.commands,(m,g)=>(p(),y("div",{key:g,class:"apos-command-menu-shortcut-command","aria-keyshortcuts":m.shortcut},[A("div",x4e,$(s.getLabel(m.label)),1),D(a,{shortcut:m.shortcut},null,8,["shortcut"])],8,S4e))),128))]))),128))])]),_:1})]),_:1},8,["modal","onEsc"])}const T4e=I(v4e,[["render",M4e],["__scopeId","data-v-15f3fab9"]]),E4e={name:"TheAposCommandMenu",mixins:[Ou],props:{modals:{type:Object,default(){return{}}}},data(){return{previousKey:"",modal:"default"}},computed:{...q4(ia,["stack"]),shortcuts(){const e=Object.values(this.modals[this.modal]||{});return Object.fromEntries(e.flatMap(t=>Object.values(t.commands).filter(n=>n.shortcut).flatMap(n=>n.shortcut.split(" ").map(i=>[i.toUpperCase(),n.action]))))}},watch:{stack(e){this.modal=this.getFirstNonShortcutModal()}},mounted(){apos.bus.$on("@apostrophecms/command-menu:open-modal",async e=>{await apos.modal.execute(e.name,e.props)}),document.addEventListener("keydown",this.keyboardShortcutListener.bind(this))},beforeUnmount(){document.removeEventListener("keydown",this.keyboardShortcutListener)},methods:{...K4(ia,["getAt","getProperties"]),delay(e,t){return new Promise(()=>{setTimeout(e,t)})},getModal(){return this.modal},getFirstNonShortcutModal(e=-1){const t=this.getAt(e),n=this.getProperties(t.id);return n.itemName==="@apostrophecms/command-menu:shortcut"?this.getFirstNonShortcutModal(e+-1):n.itemName||"default"},keyboardShortcutListener(e){if(e.target.nodeName!=="INPUT"&&e.target.nodeName!=="TEXTAREA"&&document.activeElement.contentEditable!=="true"){const t=[["ALT",e.altKey],["CTRL",e.ctrlKey],["META",e.metaKey],["SHIFT",e.shiftKey],["KEY",e.key.toUpperCase()]].filter(([,o])=>o).map(([o,s])=>o==="KEY"?s:o).join("+"),n=this.previousKey?`${this.previousKey},${t}`:t,i=this.shortcuts[n]||this.shortcuts[n.startsWith("SHIFT+")?n.slice(6):n];if(i){e.preventDefault(),apos.bus.$emit(i.type,i.payload);return}e.key.length===1&&(this.previousKey=e.key.toUpperCase(),this.delay(()=>{this.previousKey=""},1e3))}}}};function O4e(e,t,n,i,o,s){return p(),y("div",{class:te(["apos-command-menu",e.themeClass])},null,2)}const $4e=I(E4e,[["render",O4e]]),I4e={name:"AposTranslationIndicator",props:{label:{type:String,default:null},size:{type:Number,default:16}}},L4e={class:"apos-translation-indicator","data-apos-test":"translationIndicator"},D4e=["width","height"],R4e={key:0,class:"apos-translation-indicator__text"};function P4e(e,t,n,i,o,s){return p(),y("span",L4e,[(p(),y("svg",{width:n.size,height:n.size,viewBox:"0 0 24 24"},t[0]||(t[0]=[A("defs",null,[A("linearGradient",{id:"apos-translation-gradient",x1:"0",x2:"0",y1:"0",y2:"1"},[A("stop",{class:"stop1",offset:"0%"}),A("stop",{class:"stop2",offset:"100%"})])],-1),A("path",{id:"svg-path",d:"M19,1L17.74,3.75L15,5L17.74,6.26L19,9L20.25,6.26L23,5L20.25,3.75M9,4L6.5,9.5L1,12L6.5,14.5L9,20L11.5,14.5L17,12L11.5,9.5M19,15L17.74,17.74L15,19L17.74,20.25L19,23L20.25,20.25L23,19L20.25,17.74"},null,-1)]),8,D4e)),n.label?(p(),y("p",R4e,$(e.$t(n.label)),1)):x("",!0)])}const H4e=I(I4e,[["render",P4e]]),V4e=e=>Si.create({name:"anchor",priority:1e3,keepOnSplit:!1,addAttributes(){return{id:{default:null}}},parseHTML(){return[{tag:"span[id]"}]},renderHTML({HTMLAttributes:t}){return["span",Bt(this.options.HTMLAttributes,t),0]},addCommands(){return{setAnchor:t=>({chain:n})=>n().setMark(this.name,t).run(),toggleAnchor:t=>({chain:n})=>n().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).run(),unsetAnchor:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).run()}}}),z4e=e=>{const t={};return[...e.nodes||[],...e.marks||[]].forEach(i=>{var s;const o=(s=i.tag)==null?void 0:s.toLowerCase();o&&(t[o]=(t[o]||[]).concat(...i.class?i.class.split(" "):[]))}),xn.create({addCommands(){return{toggleClassOrToggleMark:(i,o)=>({editor:s,commands:r})=>{if(s.isActive("textStyle")){let a,l=s.getAttributes("textStyle").class;typeof l=="string"&&(l=l.split(" ")),Array.isArray(l)?l=l.filter(c=>typeof c=="string"&&c.length>0):l=[],l.includes(o.class)?a=l.filter(c=>c!==o.class):a=l.concat(o.class),a.length===0?r.toggleMark("textStyle",{class:o.class}):r.updateAttributes("textStyle",{class:a.length?a.join(" "):null})}else r.toggleMark("textStyle",{class:o.class})}}},addGlobalAttributes(){return[{types:Object.keys(e.types),attributes:{class:{default:null,renderHTML(i){return{class:i.class}},parseHTML(i){const o=i.tagName.toLowerCase();if(!t[o])return null;const s=(i.getAttribute("class")||"").split(" ").filter(r=>t[o].includes(r));return s.length?s.join(" "):null}}}}]}})},N4e=e=>{if(!e.children.length)return;const t=e.querySelectorAll("span");t&&t.forEach(n=>{var i,o;const s=n.getAttribute("style"),r=(o=(i=n.parentElement)===null||i===void 0?void 0:i.closest("span"))===null||o===void 0?void 0:o.getAttribute("style");n.setAttribute("style",`${r};${s}`)})},B4e=Si.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{},mergeNestedSpanStyles:!1}},parseHTML(){return[{tag:"span",getAttrs:e=>e.hasAttribute("style")?(this.options.mergeNestedSpanStyles&&N4e(e),{}):!1}]},renderHTML({HTMLAttributes:e}){return["span",Bt(this.options.HTMLAttributes,e),0]},addCommands(){return{removeEmptyTextStyle:()=>({tr:e})=>{const{selection:t}=e;return e.doc.nodesBetween(t.from,t.to,(n,i)=>{if(n.isTextblock)return!0;n.marks.filter(o=>o.type===this.type).some(o=>Object.values(o.attrs).some(s=>!!s))||e.removeMark(i,i+n.nodeSize,this.type)}),!0}}}}),F4e=xn.create({name:"color",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:e=>{var t;return(t=e.style.color)===null||t===void 0?void 0:t.replace(/['"]+/g,"")},renderHTML:e=>e.color?{style:`color: ${e.color}`}:{}}}}]},addCommands(){return{setColor:e=>({chain:t})=>t().setMark("textStyle",{color:e}).run(),unsetColor:()=>({chain:e})=>e().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}}),W4e=e=>F4e.extend({}),lT=Fn.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(e=>({tag:`h${e}`,attrs:{level:e}}))},renderHTML({node:e,HTMLAttributes:t}){return[`h${this.options.levels.includes(e.attrs.level)?e.attrs.level:this.options.levels[0]}`,Bt(this.options.HTMLAttributes,t),0]},addCommands(){return{setHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.setNode(this.name,e):!1,toggleHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.toggleNode(this.name,"paragraph",e):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((e,t)=>({...e,[`Mod-Alt-${t}`]:()=>this.editor.commands.toggleHeading({level:t})}),{})},addInputRules(){return this.options.levels.map(e=>Yb({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${e}})\\s$`),type:this.type,getAttributes:{level:e}}))}}),U4e={heading:lT,paragraph:u5},j4e=e=>{const t=[...e.nodes,...e.marks],[n]=t.filter(s=>s.def);if(!n)return;const i="defaultNode",o={class:n.options.class||null};if(n.type==="heading"||n.type==="paragraph")return U4e[n.type].extend({name:i,addOptions(){var s;return{...(s=this.parent)==null?void 0:s.call(this),HTMLAttributes:o,levels:n.options.level?[n.options.level]:null}},parseHTML(){return[{tag:"p",getAttrs:s=>n.options.class?s.getAttribute("class")===n.options.class:!s.hasAttribute("class")}]}});if(n.type==="textStyle")return Fn.create({group:"block",content:"text*",name:i,addOptions(){var s;return{...(s=this.parent)==null?void 0:s.call(this),HTMLAttributes:o}},renderHTML:()=>["span",o,0],parseHTML(){return[{tag:"span",getAttrs:s=>s.hasAttribute("style")?{}:!1}]}})},q4e=e=>Fn.create({name:"div",addOptions(){return{HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,parseHTML(){return[{tag:"div"}]},renderHTML({HTMLAttributes:t}){return["div",Bt(this.options.HTMLAttributes,t),0]},addCommands(){return{setDiv:t=>({commands:n})=>n.setNode(this.name,t),toggleDiv:t=>({commands:n})=>n.toggleNode(this.name,"paragraph",t)}}}),K4e=e=>{const t=e.nodes.filter(i=>i.def)[0];let n="block+";return t&&(n="(defaultNode|block)+"),Fn.create({name:"doc",topNode:!0,content:n})},G4e=e=>{const t=e.nodes.filter(o=>o.type==="heading"),n=t.map(o=>o.options.level),i=t.filter(o=>o.def).length?t.filter(o=>o.def)[0].options.level:n[0];return lT.extend({addOptions(){var o;return{...(o=this.parent)==null?void 0:o.call(this),levels:n}},addAttributes(){var o;return{...(o=this.parent)==null?void 0:o.call(this),level:{default:i,rendered:!1}}},addKeyboardShortcuts(){const o=Object.keys(this.editor.schema.marks);return this.options.levels.reduce((s,r)=>({...s,[`Mod-Alt-${r}`]:()=>this.editor.commands.toggleHeading({level:r}),Enter:()=>o.forEach(a=>this.editor.commands.unsetMark(a))}),{})}})},J4e=e=>Fn.create({name:"image",addOptions(){return{addPasteHandler:!0,openOnClick:!1,HTMLAttributes:{}}},allowGapCursor:!0,atom:!0,selectable:!0,group:"block",content:"inline*",draggable:!0,addAttributes(){var t;return{...(t=this.parent)==null?void 0:t.call(this),...apos.modules["@apostrophecms/rich-text-widget"].linkSchema.filter(n=>!!n.htmlAttribute).filter(n=>!n.extensions||n.extensions.includes("Image")).reduce((n,i)=>(n[i.htmlAttribute]={default:i.def??null,parseHTML:o=>{var s;return(s=o.querySelector("a"))==null?void 0:s.getAttribute(i.htmlAttribute)}},n),{}),imageId:{default:null,parseHTML:n=>{var a;const o=((a=n.querySelector("img"))==null?void 0:a.getAttribute("src")).replace(/\?.*$/,"").split("/");return o.length<2||o.pop()!=="src"?!1:o.pop()}},href:{default:null,parseHTML:n=>{var i;return(i=n.querySelector("a"))==null?void 0:i.getAttribute("href")}},title:{default:null,parseHTML:n=>{var i;return(i=n.querySelector("a"))==null?void 0:i.getAttribute("title")}},rel:{default:null,parseHTML:n=>{var i;return(i=n.querySelector("a"))==null?void 0:i.getAttribute("rel")}},caption:{default:"",parseHTML:n=>{var i;return((i=n.querySelector("figcaption"))==null?void 0:i.innerText)||""}},style:{default:null,parseHTML:n=>n.getAttribute("class")},alt:{default:null,parseHTML:n=>{var i;return(i=n.querySelector("img"))==null?void 0:i.getAttribute("alt")}}}},parseHTML(){return[{tag:"figure",contentElement:"figcaption"}]},renderHTML({HTMLAttributes:t}){const n=apos.getActiveLocale(),i=["figure",Bt(this.options.HTMLAttributes,{class:t.style})],o={src:`${apos.modules["@apostrophecms/image"].action}/${t.imageId}/src?aposLocale=${n}&aposMode=draft`,alt:t.alt,draggable:!1,contenteditable:!1};if(t.href){const s=apos.modules["@apostrophecms/rich-text-widget"].linkSchema.filter(r=>!!r.htmlAttribute).filter(r=>!r.extensions||r.extensions.includes("Image")).reduce((r,a)=>(r[a.htmlAttribute]=t[a.htmlAttribute],r),{});i.push(["a",Bt(s,{href:t.href,title:t.title,target:t.target,rel:t.rel,draggable:!1,contenteditable:!1}),["img",o]])}else i.push(["img",o]);return i.push(["figcaption",0]),i},addNodeView(){return({editor:t,node:n,getPos:i,HTMLAttributes:o,decorations:s})=>{const r=apos.getActiveLocale(),a=t.isEditable?"ProseMirror-selectednode":"",l=new Set(["imageId","href","title","caption","style","alt"]),c=Object.keys(o).filter(w=>!l.has(w)),u=document.createElement("figure");o.style&&(u.className=o.style);const f=document.createElement("img");f.src=`${apos.modules["@apostrophecms/image"].action}/${n.attrs.imageId}/src?aposLocale=${r}&aposMode=draft`,o.alt&&(f.alt=o.alt),f.draggable=!1;const m=document.createElement("figcaption");m.innerText=o.caption||"",m.contentEditable="false";let g=null;if(o.href){g=document.createElement("a");for(const w of c)o[w]!==null&&g.setAttribute(w,o[w]);o.rel&&(g.rel=o.rel),g.href=o.href,o.title&&(g.title=o.title),g.appendChild(f),g.addEventListener("click",v),u.appendChild(g)}else u.appendChild(f);u.appendChild(m);function v(w){t.isEditable&&w.preventDefault()}return{dom:u,update:w=>{if(w.type!==n.type)return!1;w.attrs.style?u.className=a+" "+w.attrs.style:u.className=a,f.alt=w.attrs.alt,f.src=w.attrs.imageId?`${apos.modules["@apostrophecms/image"].action}/${w.attrs.imageId}/src?aposLocale=${r}&aposMode=draft`:"",m.innerText=w.attrs.caption||"";const _=u.querySelector("a");if(w.attrs.href&&!_?(g=document.createElement("a"),g.addEventListener("click",v),u.insertBefore(g,f),g.appendChild(f)):!w.attrs.href&&_&&(g=u.querySelector("a"),u.insertBefore(f,g),g.removeEventListener("click",v),g.remove(),g=null),g){for(const k of c)w.attrs[k]!==null?g.setAttribute(k,w.attrs[k]):g.removeAttribute(k);g.href=w.attrs.href,w.attrs.title?g.title=w.attrs.title:g.removeAttribute("title"),w.attrs.rel?g.rel=w.attrs.rel:g.removeAttribute("rel")}return!0}}}},addCommands(){return{setImage:t=>({chain:n})=>n().focus().insertContent({type:this.name,attrs:t,content:t!=null&&t.caption?[{type:"text",text:t.caption}]:[]}).run()}}}),Y4e="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2ntley5rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6logistics9properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3ncaster6d0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2psy3ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",Z4e="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",Sc=(e,t)=>{for(const n in t)e[n]=t[n];return e},yy="numeric",vy="ascii",wy="alpha",Nd="asciinumeric",yd="alphanumeric",_y="domain",cT="emoji",X4e="scheme",Q4e="slashscheme",X1="whitespace";function exe(e,t){return e in t||(t[e]=[]),t[e]}function ja(e,t,n){t[yy]&&(t[Nd]=!0,t[yd]=!0),t[vy]&&(t[Nd]=!0,t[wy]=!0),t[Nd]&&(t[yd]=!0),t[wy]&&(t[yd]=!0),t[yd]&&(t[_y]=!0),t[cT]&&(t[_y]=!0);for(const i in t){const o=exe(i,n);o.indexOf(e)<0&&o.push(e)}}function txe(e,t){const n={};for(const i in t)t[i].indexOf(e)>=0&&(n[i]=!0);return n}function Li(e=null){this.j={},this.jr=[],this.jd=null,this.t=e}Li.groups={};Li.prototype={accepts(){return!!this.t},go(e){const t=this,n=t.j[e];if(n)return n;for(let i=0;i<t.jr.length;i++){const o=t.jr[i][0],s=t.jr[i][1];if(s&&o.test(e))return s}return t.jd},has(e,t=!1){return t?e in this.j:!!this.go(e)},ta(e,t,n,i){for(let o=0;o<e.length;o++)this.tt(e[o],t,n,i)},tr(e,t,n,i){i=i||Li.groups;let o;return t&&t.j?o=t:(o=new Li(t),n&&i&&ja(t,n,i)),this.jr.push([e,o]),o},ts(e,t,n,i){let o=this;const s=e.length;if(!s)return o;for(let r=0;r<s-1;r++)o=o.tt(e[r]);return o.tt(e[s-1],t,n,i)},tt(e,t,n,i){i=i||Li.groups;const o=this;if(t&&t.j)return o.j[e]=t,t;const s=t;let r,a=o.go(e);if(a?(r=new Li,Sc(r.j,a.j),r.jr.push.apply(r.jr,a.jr),r.jd=a.jd,r.t=a.t):r=new Li,s){if(i)if(r.t&&typeof r.t=="string"){const l=Sc(txe(r.t,i),n);ja(s,l,i)}else n&&ja(s,n,i);r.t=s}return o.j[e]=r,r}};const _t=(e,t,n,i,o)=>e.ta(t,n,i,o),hn=(e,t,n,i,o)=>e.tr(t,n,i,o),dk=(e,t,n,i,o)=>e.ts(t,n,i,o),ke=(e,t,n,i,o)=>e.tt(t,n,i,o),Us="WORD",Cy="UWORD",dT="ASCIINUMERICAL",uT="ALPHANUMERICAL",yu="LOCALHOST",Ay="TLD",ky="UTLD",Df="SCHEME",Gl="SLASH_SCHEME",nv="NUM",Sy="WS",iv="NL",Bd="OPENBRACE",Fd="CLOSEBRACE",bp="OPENBRACKET",yp="CLOSEBRACKET",vp="OPENPAREN",wp="CLOSEPAREN",_p="OPENANGLEBRACKET",Cp="CLOSEANGLEBRACKET",Ap="FULLWIDTHLEFTPAREN",kp="FULLWIDTHRIGHTPAREN",Sp="LEFTCORNERBRACKET",xp="RIGHTCORNERBRACKET",Mp="LEFTWHITECORNERBRACKET",Tp="RIGHTWHITECORNERBRACKET",Ep="FULLWIDTHLESSTHAN",Op="FULLWIDTHGREATERTHAN",$p="AMPERSAND",ov="APOSTROPHE",Ip="ASTERISK",Dr="AT",Lp="BACKSLASH",Dp="BACKTICK",Rp="CARET",zr="COLON",sv="COMMA",Pp="DOLLAR",ss="DOT",Hp="EQUALS",rv="EXCLAMATION",go="HYPHEN",Wd="PERCENT",Vp="PIPE",zp="PLUS",Np="POUND",Ud="QUERY",av="QUOTE",hT="FULLWIDTHMIDDLEDOT",lv="SEMI",rs="SLASH",jd="TILDE",Bp="UNDERSCORE",fT="EMOJI",Fp="SYM";var pT=Object.freeze({__proto__:null,WORD:Us,UWORD:Cy,ASCIINUMERICAL:dT,ALPHANUMERICAL:uT,LOCALHOST:yu,TLD:Ay,UTLD:ky,SCHEME:Df,SLASH_SCHEME:Gl,NUM:nv,WS:Sy,NL:iv,OPENBRACE:Bd,CLOSEBRACE:Fd,OPENBRACKET:bp,CLOSEBRACKET:yp,OPENPAREN:vp,CLOSEPAREN:wp,OPENANGLEBRACKET:_p,CLOSEANGLEBRACKET:Cp,FULLWIDTHLEFTPAREN:Ap,FULLWIDTHRIGHTPAREN:kp,LEFTCORNERBRACKET:Sp,RIGHTCORNERBRACKET:xp,LEFTWHITECORNERBRACKET:Mp,RIGHTWHITECORNERBRACKET:Tp,FULLWIDTHLESSTHAN:Ep,FULLWIDTHGREATERTHAN:Op,AMPERSAND:$p,APOSTROPHE:ov,ASTERISK:Ip,AT:Dr,BACKSLASH:Lp,BACKTICK:Dp,CARET:Rp,COLON:zr,COMMA:sv,DOLLAR:Pp,DOT:ss,EQUALS:Hp,EXCLAMATION:rv,HYPHEN:go,PERCENT:Wd,PIPE:Vp,PLUS:zp,POUND:Np,QUERY:Ud,QUOTE:av,FULLWIDTHMIDDLEDOT:hT,SEMI:lv,SLASH:rs,TILDE:jd,UNDERSCORE:Bp,EMOJI:fT,SYM:Fp});const Ns=/[a-z]/,cd=new RegExp("\\p{L}","u"),Q1=new RegExp("\\p{Emoji}","u"),Bs=/\d/,eb=/\s/,uk="\r",tb=`
`,nxe="",ixe="",nb="";let df=null,uf=null;function oxe(e=[]){const t={};Li.groups=t;const n=new Li;df==null&&(df=hk(Y4e)),uf==null&&(uf=hk(Z4e)),ke(n,"'",ov),ke(n,"{",Bd),ke(n,"}",Fd),ke(n,"[",bp),ke(n,"]",yp),ke(n,"(",vp),ke(n,")",wp),ke(n,"<",_p),ke(n,">",Cp),ke(n,"",Ap),ke(n,"",kp),ke(n,"",Sp),ke(n,"",xp),ke(n,"",Mp),ke(n,"",Tp),ke(n,"",Ep),ke(n,"",Op),ke(n,"&",$p),ke(n,"*",Ip),ke(n,"@",Dr),ke(n,"`",Dp),ke(n,"^",Rp),ke(n,":",zr),ke(n,",",sv),ke(n,"$",Pp),ke(n,".",ss),ke(n,"=",Hp),ke(n,"!",rv),ke(n,"-",go),ke(n,"%",Wd),ke(n,"|",Vp),ke(n,"+",zp),ke(n,"#",Np),ke(n,"?",Ud),ke(n,'"',av),ke(n,"/",rs),ke(n,";",lv),ke(n,"~",jd),ke(n,"_",Bp),ke(n,"\\",Lp),ke(n,"",hT);const i=hn(n,Bs,nv,{[yy]:!0});hn(i,Bs,i);const o=hn(i,Ns,dT,{[Nd]:!0}),s=hn(i,cd,uT,{[yd]:!0}),r=hn(n,Ns,Us,{[vy]:!0});hn(r,Bs,o),hn(r,Ns,r),hn(o,Bs,o),hn(o,Ns,o);const a=hn(n,cd,Cy,{[wy]:!0});hn(a,Ns),hn(a,Bs,s),hn(a,cd,a),hn(s,Bs,s),hn(s,Ns),hn(s,cd,s);const l=ke(n,tb,iv,{[X1]:!0}),c=ke(n,uk,Sy,{[X1]:!0}),u=hn(n,eb,Sy,{[X1]:!0});ke(n,nb,u),ke(c,tb,l),ke(c,nb,u),hn(c,eb,u),ke(u,uk),ke(u,tb),hn(u,eb,u),ke(u,nb,u);const f=hn(n,Q1,fT,{[cT]:!0});ke(f,"#"),hn(f,Q1,f),ke(f,nxe,f);const m=ke(f,ixe);ke(m,"#"),hn(m,Q1,f);const g=[[Ns,r],[Bs,o]],v=[[Ns,null],[cd,a],[Bs,s]];for(let w=0;w<df.length;w++)kr(n,df[w],Ay,Us,g);for(let w=0;w<uf.length;w++)kr(n,uf[w],ky,Cy,v);ja(Ay,{tld:!0,ascii:!0},t),ja(ky,{utld:!0,alpha:!0},t),kr(n,"file",Df,Us,g),kr(n,"mailto",Df,Us,g),kr(n,"http",Gl,Us,g),kr(n,"https",Gl,Us,g),kr(n,"ftp",Gl,Us,g),kr(n,"ftps",Gl,Us,g),ja(Df,{scheme:!0,ascii:!0},t),ja(Gl,{slashscheme:!0,ascii:!0},t),e=e.sort((w,_)=>w[0]>_[0]?1:-1);for(let w=0;w<e.length;w++){const _=e[w][0],L=e[w][1]?{[X4e]:!0}:{[Q4e]:!0};_.indexOf("-")>=0?L[_y]=!0:Ns.test(_)?Bs.test(_)?L[Nd]=!0:L[vy]=!0:L[yy]=!0,dk(n,_,_,L)}return dk(n,"localhost",yu,{ascii:!0}),n.jd=new Li(Fp),{start:n,tokens:Sc({groups:t},pT)}}function mT(e,t){const n=sxe(t.replace(/[A-Z]/g,a=>a.toLowerCase())),i=n.length,o=[];let s=0,r=0;for(;r<i;){let a=e,l=null,c=0,u=null,f=-1,m=-1;for(;r<i&&(l=a.go(n[r]));)a=l,a.accepts()?(f=0,m=0,u=a):f>=0&&(f+=n[r].length,m++),c+=n[r].length,s+=n[r].length,r++;s-=f,r-=m,c-=f,o.push({t:u.t,v:t.slice(s-c,s),s:s-c,e:s})}return o}function sxe(e){const t=[],n=e.length;let i=0;for(;i<n;){let o=e.charCodeAt(i),s,r=o<55296||o>56319||i+1===n||(s=e.charCodeAt(i+1))<56320||s>57343?e[i]:e.slice(i,i+2);t.push(r),i+=r.length}return t}function kr(e,t,n,i,o){let s;const r=t.length;for(let a=0;a<r-1;a++){const l=t[a];e.j[l]?s=e.j[l]:(s=new Li(i),s.jr=o.slice(),e.j[l]=s),e=s}return s=new Li(n),s.jr=o.slice(),e.j[t[r-1]]=s,s}function hk(e){const t=[],n=[];let i=0,o="0123456789";for(;i<e.length;){let s=0;for(;o.indexOf(e[i+s])>=0;)s++;if(s>0){t.push(n.join(""));for(let r=parseInt(e.substring(i,i+s),10);r>0;r--)n.pop();i+=s}else n.push(e[i]),i++}return t}const vu={defaultProtocol:"http",events:null,format:fk,formatHref:fk,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function cv(e,t=null){let n=Sc({},vu);e&&(n=Sc(n,e instanceof cv?e.o:e));const i=n.ignoreTags,o=[];for(let s=0;s<i.length;s++)o.push(i[s].toUpperCase());this.o=n,t&&(this.defaultRender=t),this.ignoreTags=o}cv.prototype={o:vu,ignoreTags:[],defaultRender(e){return e},check(e){return this.get("validate",e.toString(),e)},get(e,t,n){const i=t!=null;let o=this.o[e];return o&&(typeof o=="object"?(o=n.t in o?o[n.t]:vu[e],typeof o=="function"&&i&&(o=o(t,n))):typeof o=="function"&&i&&(o=o(t,n.t,n)),o)},getObj(e,t,n){let i=this.o[e];return typeof i=="function"&&t!=null&&(i=i(t,n.t,n)),i},render(e){const t=e.render(this);return(this.get("render",null,e)||this.defaultRender)(t,e.t,e)}};function fk(e){return e}function gT(e,t){this.t="token",this.v=e,this.tk=t}gT.prototype={isLink:!1,toString(){return this.v},toHref(e){return this.toString()},toFormattedString(e){const t=this.toString(),n=e.get("truncate",t,this),i=e.get("format",t,this);return n&&i.length>n?i.substring(0,n)+"":i},toFormattedHref(e){return e.get("formatHref",this.toHref(e.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(e=vu.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(e){return{type:this.t,value:this.toFormattedString(e),isLink:this.isLink,href:this.toFormattedHref(e),start:this.startIndex(),end:this.endIndex()}},validate(e){return e.get("validate",this.toString(),this)},render(e){const t=this,n=this.toHref(e.get("defaultProtocol")),i=e.get("formatHref",n,this),o=e.get("tagName",n,t),s=this.toFormattedString(e),r={},a=e.get("className",n,t),l=e.get("target",n,t),c=e.get("rel",n,t),u=e.getObj("attributes",n,t),f=e.getObj("events",n,t);return r.href=i,a&&(r.class=a),l&&(r.target=l),c&&(r.rel=c),u&&Sc(r,u),{tagName:o,attributes:r,content:s,eventListeners:f}}};function Rm(e,t){class n extends gT{constructor(o,s){super(o,s),this.t=e}}for(const i in t)n.prototype[i]=t[i];return n.t=e,n}const pk=Rm("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),mk=Rm("text"),rxe=Rm("nl"),hf=Rm("url",{isLink:!0,toHref(e=vu.defaultProtocol){return this.hasProtocol()?this.v:`${e}://${this.v}`},hasProtocol(){const e=this.tk;return e.length>=2&&e[0].t!==yu&&e[1].t===zr}}),po=e=>new Li(e);function axe({groups:e}){const t=e.domain.concat([$p,Ip,Dr,Lp,Dp,Rp,Pp,Hp,go,nv,Wd,Vp,zp,Np,rs,Fp,jd,Bp]),n=[zr,sv,ss,rv,Wd,Ud,av,lv,_p,Cp,Bd,Fd,yp,bp,vp,wp,Ap,kp,Sp,xp,Mp,Tp,Ep,Op],i=[$p,ov,Ip,Lp,Dp,Rp,Pp,Hp,go,Bd,Fd,Wd,Vp,zp,Np,Ud,rs,Fp,jd,Bp],o=po(),s=ke(o,jd);_t(s,i,s),_t(s,e.domain,s);const r=po(),a=po(),l=po();_t(o,e.domain,r),_t(o,e.scheme,a),_t(o,e.slashscheme,l),_t(r,i,s),_t(r,e.domain,r);const c=ke(r,Dr);ke(s,Dr,c),ke(a,Dr,c),ke(l,Dr,c);const u=ke(s,ss);_t(u,i,s),_t(u,e.domain,s);const f=po();_t(c,e.domain,f),_t(f,e.domain,f);const m=ke(f,ss);_t(m,e.domain,f);const g=po(pk);_t(m,e.tld,g),_t(m,e.utld,g),ke(c,yu,g);const v=ke(f,go);ke(v,go,v),_t(v,e.domain,f),_t(g,e.domain,f),ke(g,ss,m),ke(g,go,v);const w=ke(g,zr);_t(w,e.numeric,pk);const _=ke(r,go),k=ke(r,ss);ke(_,go,_),_t(_,e.domain,r),_t(k,i,s),_t(k,e.domain,r);const L=po(hf);_t(k,e.tld,L),_t(k,e.utld,L),_t(L,e.domain,r),_t(L,i,s),ke(L,ss,k),ke(L,go,_),ke(L,Dr,c);const P=ke(L,zr),M=po(hf);_t(P,e.numeric,M);const F=po(hf),z=po();_t(F,t,F),_t(F,n,z),_t(z,t,F),_t(z,n,z),ke(L,rs,F),ke(M,rs,F);const ee=ke(a,zr),ie=ke(l,zr),K=ke(ie,rs),ae=ke(K,rs);_t(a,e.domain,r),ke(a,ss,k),ke(a,go,_),_t(l,e.domain,r),ke(l,ss,k),ke(l,go,_),_t(ee,e.domain,F),ke(ee,rs,F),ke(ee,Ud,F),_t(ae,e.domain,F),_t(ae,t,F),ke(ae,rs,F);const B=[[Bd,Fd],[bp,yp],[vp,wp],[_p,Cp],[Ap,kp],[Sp,xp],[Mp,Tp],[Ep,Op]];for(let J=0;J<B.length;J++){const[he,ne]=B[J],oe=ke(F,he);ke(z,he,oe),ke(oe,ne,F);const W=po(hf);_t(oe,t,W);const q=po();_t(oe,n),_t(W,t,W),_t(W,n,q),_t(q,t,W),_t(q,n,q),ke(W,ne,F),ke(q,ne,F)}return ke(o,yu,L),ke(o,iv,rxe),{start:o,tokens:pT}}function lxe(e,t,n){let i=n.length,o=0,s=[],r=[];for(;o<i;){let a=e,l=null,c=null,u=0,f=null,m=-1;for(;o<i&&!(l=a.go(n[o].t));)r.push(n[o++]);for(;o<i&&(c=l||a.go(n[o].t));)l=null,a=c,a.accepts()?(m=0,f=a):m>=0&&m++,o++,u++;if(m<0)o-=u,o<i&&(r.push(n[o]),o++);else{r.length>0&&(s.push(ib(mk,t,r)),r=[]),o-=m,u-=m;const g=f.t,v=n.slice(o-u,o);s.push(ib(g,t,v))}}return r.length>0&&s.push(ib(mk,t,r)),s}function ib(e,t,n){const i=n[0].s,o=n[n.length-1].e,s=t.slice(i,o);return new e(s,n)}const cxe=typeof console<"u"&&console&&console.warn||(()=>{}),dxe="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",en={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function uxe(){return Li.groups={},en.scanner=null,en.parser=null,en.tokenQueue=[],en.pluginQueue=[],en.customSchemes=[],en.initialized=!1,en}function gk(e,t=!1){if(en.initialized&&cxe(`linkifyjs: already initialized - will not register custom scheme "${e}" ${dxe}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(e))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);en.customSchemes.push([e,t])}function hxe(){en.scanner=oxe(en.customSchemes);for(let e=0;e<en.tokenQueue.length;e++)en.tokenQueue[e][1]({scanner:en.scanner});en.parser=axe(en.scanner.tokens);for(let e=0;e<en.pluginQueue.length;e++)en.pluginQueue[e][1]({scanner:en.scanner,parser:en.parser});return en.initialized=!0,en}function dv(e){return en.initialized||hxe(),lxe(en.parser.start,e,mT(en.scanner.start,e))}dv.scan=mT;function bT(e,t=null,n=null){if(t&&typeof t=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${t}; must be a string`);n=t,t=null}const i=new cv(n),o=dv(e),s=[];for(let r=0;r<o.length;r++){const a=o[r];a.isLink&&(!t||a.t===t)&&i.check(a)&&s.push(a.toFormattedObject(i))}return s}function fxe(e){return e.length===1?e[0].isLink:e.length===3&&e[1].isLink?["()","[]"].includes(e[0].value+e[2].value):!1}function pxe(e){return new bn({key:new Dn("autolink"),appendTransaction:(t,n,i)=>{const o=t.some(c=>c.docChanged)&&!n.doc.eq(i.doc),s=t.some(c=>c.getMeta("preventAutolink"));if(!o||s)return;const{tr:r}=i,a=Wpe(n.doc,[...t]);if(Jpe(a).forEach(({newRange:c})=>{const u=jpe(i.doc,c,g=>g.isTextblock);let f,m;if(u.length>1?(f=u[0],m=i.doc.textBetween(f.pos,f.pos+f.node.nodeSize,void 0," ")):u.length&&i.doc.textBetween(c.from,c.to," "," ").endsWith(" ")&&(f=u[0],m=i.doc.textBetween(f.pos,c.to,void 0," ")),f&&m){const g=m.split(" ").filter(k=>k!=="");if(g.length<=0)return!1;const v=g[g.length-1],w=f.pos+m.lastIndexOf(v);if(!v)return!1;const _=dv(v).map(k=>k.toObject(e.defaultProtocol));if(!fxe(_))return!1;_.filter(k=>k.isLink).map(k=>({...k,from:w+k.start+1,to:w+k.end+1})).filter(k=>i.schema.marks.code?!i.doc.rangeHasMark(k.from,k.to,i.schema.marks.code):!0).filter(k=>e.validate(k.value)).filter(k=>e.shouldAutoLink(k.value)).forEach(k=>{P0(k.from,k.to,i.doc).some(L=>L.mark.type===e.type)||r.addMark(k.from,k.to,e.type.create({href:k.href}))})}}),!!r.steps.length)return r}})}function mxe(e){return new bn({key:new Dn("handleClickLink"),props:{handleClick:(t,n,i)=>{var o,s;if(i.button!==0||!t.editable)return!1;let r=i.target;const a=[];for(;r.nodeName!=="DIV";)a.push(r),r=r.parentNode;if(!a.find(m=>m.nodeName==="A"))return!1;const l=HM(t.state,e.type.name),c=i.target,u=(o=c==null?void 0:c.href)!==null&&o!==void 0?o:l.href,f=(s=c==null?void 0:c.target)!==null&&s!==void 0?s:l.target;return c&&u?(window.open(u,f),!0):!1}}})}function gxe(e){return new bn({key:new Dn("handlePasteLink"),props:{handlePaste:(t,n,i)=>{const{state:o}=t,{selection:s}=o,{empty:r}=s;if(r)return!1;let a="";i.content.forEach(c=>{a+=c.textContent});const l=bT(a,{defaultProtocol:e.defaultProtocol}).find(c=>c.isLink&&c.value===a);return!a||!l?!1:e.editor.commands.setMark(e.type,{href:l.href})}}})}const bxe=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g;function Ra(e,t){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return t&&t.forEach(i=>{const o=typeof i=="string"?i:i.scheme;o&&n.push(o)}),!e||e.replace(bxe,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}const yxe=Si.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(e=>{if(typeof e=="string"){gk(e);return}gk(e.scheme,e.optionalSlashes)})},onDestroy(){uxe()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(e,t)=>!!Ra(e,t.protocols),validate:e=>!!e,shouldAutoLink:e=>!!e}},addAttributes(){return{href:{default:null,parseHTML(e){return e.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:e=>{const t=e.getAttribute("href");return!t||!this.options.isAllowedUri(t,{defaultValidate:n=>!!Ra(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:e}){return this.options.isAllowedUri(e.href,{defaultValidate:t=>!!Ra(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Bt(this.options.HTMLAttributes,e),0]:["a",Bt(this.options.HTMLAttributes,{...e,href:""}),0]},addCommands(){return{setLink:e=>({chain:t})=>{const{href:n}=e;return this.options.isAllowedUri(n,{defaultValidate:i=>!!Ra(i,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?t().setMark(this.name,e).setMeta("preventAutolink",!0).run():!1},toggleLink:e=>({chain:t})=>{const{href:n}=e;return this.options.isAllowedUri(n,{defaultValidate:i=>!!Ra(i,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?t().toggleMark(this.name,e,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run():!1},unsetLink:()=>({chain:e})=>e().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[sa({find:e=>{const t=[];if(e){const{protocols:n,defaultProtocol:i}=this.options,o=bT(e).filter(s=>s.isLink&&this.options.isAllowedUri(s.value,{defaultValidate:r=>!!Ra(r,n),protocols:n,defaultProtocol:i}));o.length&&o.forEach(s=>t.push({text:s.value,data:{href:s.href},index:s.start}))}return t},type:this.type,getAttributes:e=>{var t;return{href:(t=e.data)===null||t===void 0?void 0:t.href}}})]},addProseMirrorPlugins(){const e=[],{protocols:t,defaultProtocol:n}=this.options;return this.options.autolink&&e.push(pxe({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:i=>this.options.isAllowedUri(i,{defaultValidate:o=>!!Ra(o,t),protocols:t,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&e.push(mxe({type:this.type})),this.options.linkOnPaste&&e.push(gxe({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),e}}),vxe=e=>yxe.extend({addOptions(){var t;return{...(t=this.parent)==null?void 0:t.call(this),openOnClick:!1,linkOnPaste:!0,HTMLAttributes:{}}},addAttributes(){var t;return{...(t=this.parent)==null?void 0:t.call(this),title:{default:null,parseHTML:n=>n.getAttribute("title")},...apos.modules["@apostrophecms/rich-text-widget"].linkSchema.filter(n=>!!n.htmlAttribute).filter(n=>!n.extensions||n.extensions.includes("Link")).reduce((n,i)=>(n[i.htmlAttribute]={default:i.def??null},n),{})}}}),wxe=Fn.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:e}){return["li",Bt(this.options.HTMLAttributes,e),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),_xe=e=>wxe.extend({content:"defaultNode block*"}),Cxe=e=>B4e.extend({parseHTML(){return[{tag:"span"}]}}),Axe=()=>{let e=!1;apos.util.onReady(()=>{e||(e=!0,apos.bus.$on("apos-localize-batch-results",t))});async function t({log:n,ids:i}){const o=n.filter(f).length,s=n.filter(m).length;if(!o){s&&await apos.notify("apostrophe:localizingNotificationSuccess",{type:"success",icon:"translate-icon",interpolate:{count:s},dismiss:!0});return}const r=Object.entries(window.apos.i18n.locales).map(([w,_])=>({name:w,label:_.label||w})),a=n.map(w=>{const _=r.find(k=>k.name===w.locale)??r[0]??{name:"en",label:"English"};return{_id:w._id+":"+_.name,type:g(w),detail:w.detail,relationship:w.relationship,locale:_,doc:{_id:w._id,title:w.title,aposDocId:w.aposDocId,type:w.type,typeLabel:v(w.type)}}});await apos.report({heading:"apostrophe:localizingReportHeading",description:"apostrophe:localizingReportDesc",footerMessageDanger:"apostrophe:localizingReportHeading",items:a,headers:[{name:"doc.aposDocId",label:"_id",format:"last:5"},{name:"doc.typeLabel",label:"apostrophe:type",sortable:!0},{name:"locale.label",label:"apostrophe:locale",sortable:!0},{name:"relationship",label:"apostrophe:relationship",format:"yesno",visibility:"export",sortable:!0},{name:"doc.title",label:"apostrophe:title",width:"20%",sortable:!0},{name:"detail",label:"apostrophe:details",width:"20%"}]},{mode:"error"});const l=s?"warning":"danger",c={warning:"apostrophe:localizingNotificationWarning",danger:"apostrophe:localizingNotificationDanger"},u={warning:{count:s,skipCount:o},danger:{count:o}};await apos.notify(c[l],{type:l,icon:"translate-icon",interpolate:u[l],dismiss:!0});function f(w){return![!1,"conflict"].includes(w.error)}function m(w){return w.error===!1}function g(w){return w.error==="conflict"?"info":w.error?"error":"success"}function v(w){const _=apos.modules[w]||{};return _.action==="@apostrophecms/page"?"apostrophe:page":_.label||w}}},kxe=()=>{apos.i18n.crossDomainClipboard&&localStorage.setItem("aposWidgetClipboard",apos.i18n.crossDomainClipboard)},Sxe={install(e,t){e.directive("click-outside-element",{beforeMount(n,i){n.aposClickOutsideHandler=o=>{n!==o.target&&!n.contains(o.target)&&!apos.modal.onTopOf(o.target,n)&&i.value(o)},document.body.addEventListener("click",n.aposClickOutsideHandler)},beforeUnmount(n,i){document.body.removeEventListener("click",n.aposClickOutsideHandler)}})}};function Wo(e){"@babel/helpers - typeof";return Wo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wo(e)}function xxe(e,t){if(Wo(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(Wo(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function yT(e){var t=xxe(e,"string");return Wo(t)=="symbol"?t:t+""}function Mxe(e,t,n){return(t=yT(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},i=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&i.push.apply(i,Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),i.forEach(function(o){Mxe(e,o,n[o])})}return e}function ur(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bk(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,yT(i.key),i)}}function hr(e,t,n){return t&&bk(e.prototype,t),n&&bk(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function fl(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wu(e,t){if(t&&(Wo(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fl(e)}function xc(e){return xc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},xc(e)}function xy(e,t){return xy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},xy(e,t)}function Pm(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xy(e,t)}var Txe={type:"logger",log:function(t){this.output("log",t)},warn:function(t){this.output("warn",t)},error:function(t){this.output("error",t)},output:function(t,n){console&&console[t]&&console[t].apply(console,n)}},Exe=function(){function e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};ur(this,e),this.init(t,n)}return hr(e,[{key:"init",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=i.prefix||"i18next:",this.logger=n||Txe,this.options=i,this.debug=i.debug}},{key:"setDebug",value:function(n){this.debug=n}},{key:"log",value:function(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return this.forward(i,"log","",!0)}},{key:"warn",value:function(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return this.forward(i,"warn","",!0)}},{key:"error",value:function(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return this.forward(i,"error","")}},{key:"deprecate",value:function(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return this.forward(i,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(n,i,o,s){return s&&!this.debug?null:(typeof n[0]=="string"&&(n[0]="".concat(o).concat(this.prefix," ").concat(n[0])),this.logger[i](n))}},{key:"create",value:function(n){return new e(this.logger,kn({},{prefix:"".concat(this.prefix,":").concat(n,":")},this.options))}}]),e}(),er=new Exe,aa=function(){function e(){ur(this,e),this.observers={}}return hr(e,[{key:"on",value:function(n,i){var o=this;return n.split(" ").forEach(function(s){o.observers[s]=o.observers[s]||[],o.observers[s].push(i)}),this}},{key:"off",value:function(n,i){if(this.observers[n]){if(!i){delete this.observers[n];return}this.observers[n]=this.observers[n].filter(function(o){return o!==i})}}},{key:"emit",value:function(n){for(var i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];if(this.observers[n]){var r=[].concat(this.observers[n]);r.forEach(function(l){l.apply(void 0,o)})}if(this.observers["*"]){var a=[].concat(this.observers["*"]);a.forEach(function(l){l.apply(l,[n].concat(o))})}}}]),e}();function dd(){var e,t,n=new Promise(function(i,o){e=i,t=o});return n.resolve=e,n.reject=t,n}function yk(e){return e==null?"":""+e}function Oxe(e,t,n){e.forEach(function(i){t[i]&&(n[i]=t[i])})}function uv(e,t,n){function i(a){return a&&a.indexOf("###")>-1?a.replace(/###/g,"."):a}function o(){return!e||typeof e=="string"}for(var s=typeof t!="string"?[].concat(t):t.split(".");s.length>1;){if(o())return{};var r=i(s.shift());!e[r]&&n&&(e[r]=new n),Object.prototype.hasOwnProperty.call(e,r)?e=e[r]:e={}}return o()?{}:{obj:e,k:i(s.shift())}}function vk(e,t,n){var i=uv(e,t,Object),o=i.obj,s=i.k;o[s]=n}function $xe(e,t,n,i){var o=uv(e,t,Object),s=o.obj,r=o.k;s[r]=s[r]||[],s[r].push(n)}function Wp(e,t){var n=uv(e,t),i=n.obj,o=n.k;if(i)return i[o]}function wk(e,t,n){var i=Wp(e,n);return i!==void 0?i:Wp(t,n)}function vT(e,t,n){for(var i in t)i!=="__proto__"&&i!=="constructor"&&(i in e?typeof e[i]=="string"||e[i]instanceof String||typeof t[i]=="string"||t[i]instanceof String?n&&(e[i]=t[i]):vT(e[i],t[i],n):e[i]=t[i]);return e}function Fl(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var Ixe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function Lxe(e){return typeof e=="string"?e.replace(/[&<>"'\/]/g,function(t){return Ixe[t]}):e}var Hm=typeof window<"u"&&window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1;function wT(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(e){if(e[t])return e[t];for(var i=t.split(n),o=e,s=0;s<i.length;++s){if(!o||typeof o[i[s]]=="string"&&s+1<i.length)return;if(o[i[s]]===void 0){for(var r=2,a=i.slice(s,s+r).join(n),l=o[a];l===void 0&&i.length>s+r;)r++,a=i.slice(s,s+r).join(n),l=o[a];if(l===void 0)return;if(typeof l=="string")return l;if(a&&typeof l[a]=="string")return l[a];var c=i.slice(s+r).join(n);return c?wT(l,c,n):void 0}o=o[i[s]]}return o}}var Dxe=function(e){Pm(t,e);function t(n){var i,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};return ur(this,t),i=wu(this,xc(t).call(this)),Hm&&aa.call(fl(i)),i.data=n||{},i.options=o,i.options.keySeparator===void 0&&(i.options.keySeparator="."),i.options.ignoreJSONStructure===void 0&&(i.options.ignoreJSONStructure=!0),i}return hr(t,[{key:"addNamespaces",value:function(i){this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}},{key:"removeNamespaces",value:function(i){var o=this.options.ns.indexOf(i);o>-1&&this.options.ns.splice(o,1)}},{key:"getResource",value:function(i,o,s){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},a=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,l=r.ignoreJSONStructure!==void 0?r.ignoreJSONStructure:this.options.ignoreJSONStructure,c=[i,o];s&&typeof s!="string"&&(c=c.concat(s)),s&&typeof s=="string"&&(c=c.concat(a?s.split(a):s)),i.indexOf(".")>-1&&(c=i.split("."));var u=Wp(this.data,c);return u||!l||typeof s!="string"?u:wT(this.data&&this.data[i]&&this.data[i][o],s,a)}},{key:"addResource",value:function(i,o,s,r){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1},l=this.options.keySeparator;l===void 0&&(l=".");var c=[i,o];s&&(c=c.concat(l?s.split(l):s)),i.indexOf(".")>-1&&(c=i.split("."),r=o,o=c[1]),this.addNamespaces(o),vk(this.data,c,r),a.silent||this.emit("added",i,o,s,r)}},{key:"addResources",value:function(i,o,s){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(var a in s)(typeof s[a]=="string"||Object.prototype.toString.apply(s[a])==="[object Array]")&&this.addResource(i,o,a,s[a],{silent:!0});r.silent||this.emit("added",i,o,s)}},{key:"addResourceBundle",value:function(i,o,s,r,a){var l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1},c=[i,o];i.indexOf(".")>-1&&(c=i.split("."),r=s,s=o,o=c[1]),this.addNamespaces(o);var u=Wp(this.data,c)||{};r?vT(u,s,a):u=kn({},u,s),vk(this.data,c,u),l.silent||this.emit("added",i,o,s)}},{key:"removeResourceBundle",value:function(i,o){this.hasResourceBundle(i,o)&&delete this.data[i][o],this.removeNamespaces(o),this.emit("removed",i,o)}},{key:"hasResourceBundle",value:function(i,o){return this.getResource(i,o)!==void 0}},{key:"getResourceBundle",value:function(i,o){return o||(o=this.options.defaultNS),this.options.compatibilityAPI==="v1"?kn({},{},this.getResource(i,o)):this.getResource(i,o)}},{key:"getDataByLanguage",value:function(i){return this.data[i]}},{key:"toJSON",value:function(){return this.data}}]),t}(aa),_T={processors:{},addPostProcessor:function(t){this.processors[t.name]=t},handle:function(t,n,i,o,s){var r=this;return t.forEach(function(a){r.processors[a]&&(n=r.processors[a].process(n,i,o,s))}),n}},_k={},Ck=function(e){Pm(t,e);function t(n){var i,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return ur(this,t),i=wu(this,xc(t).call(this)),Hm&&aa.call(fl(i)),Oxe(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],n,fl(i)),i.options=o,i.options.keySeparator===void 0&&(i.options.keySeparator="."),i.logger=er.create("translator"),i}return hr(t,[{key:"changeLanguage",value:function(i){i&&(this.language=i)}},{key:"exists",value:function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(i==null)return!1;var s=this.resolve(i,o);return s&&s.res!==void 0}},{key:"extractFromKey",value:function(i,o){var s=o.nsSeparator!==void 0?o.nsSeparator:this.options.nsSeparator;s===void 0&&(s=":");var r=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator,a=o.ns||this.options.defaultNS;if(s&&i.indexOf(s)>-1){var l=i.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:i,namespaces:a};var c=i.split(s);(s!==r||s===r&&this.options.ns.indexOf(c[0])>-1)&&(a=c.shift()),i=c.join(r)}return typeof a=="string"&&(a=[a]),{key:i,namespaces:a}}},{key:"translate",value:function(i,o,s){var r=this;if(Wo(o)!=="object"&&this.options.overloadTranslationOptionHandler&&(o=this.options.overloadTranslationOptionHandler(arguments)),o||(o={}),i==null)return"";Array.isArray(i)||(i=[String(i)]);var a=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator,l=this.extractFromKey(i[i.length-1],o),c=l.key,u=l.namespaces,f=u[u.length-1],m=o.lng||this.language,g=o.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(m&&m.toLowerCase()==="cimode"){if(g){var v=o.nsSeparator||this.options.nsSeparator;return f+v+c}return c}var w=this.resolve(i,o),_=w&&w.res,k=w&&w.usedKey||c,L=w&&w.exactUsedKey||c,P=Object.prototype.toString.apply(_),M=["[object Number]","[object Function]","[object RegExp]"],F=o.joinArrays!==void 0?o.joinArrays:this.options.joinArrays,z=!this.i18nFormat||this.i18nFormat.handleAsObject,ee=typeof _!="string"&&typeof _!="boolean"&&typeof _!="number";if(z&&_&&ee&&M.indexOf(P)<0&&!(typeof F=="string"&&P==="[object Array]")){if(!o.returnObjects&&!this.options.returnObjects)return this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!"),this.options.returnedObjectHandler?this.options.returnedObjectHandler(k,_,kn({},o,{ns:u})):"key '".concat(c," (").concat(this.language,")' returned an object instead of string.");if(a){var ie=P==="[object Array]",K=ie?[]:{},ae=ie?L:k;for(var B in _)if(Object.prototype.hasOwnProperty.call(_,B)){var J="".concat(ae).concat(a).concat(B);K[B]=this.translate(J,kn({},o,{joinArrays:!1,ns:u})),K[B]===J&&(K[B]=_[B])}_=K}}else if(z&&typeof F=="string"&&P==="[object Array]")_=_.join(F),_&&(_=this.extendTranslation(_,i,o,s));else{var he=!1,ne=!1,oe=o.count!==void 0&&typeof o.count!="string",W=t.hasDefaultValue(o),q=oe?this.pluralResolver.getSuffix(m,o.count):"",Z=o["defaultValue".concat(q)]||o.defaultValue;!this.isValidLookup(_)&&W&&(he=!0,_=Z),this.isValidLookup(_)||(ne=!0,_=c);var N=o.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey,le=N&&ne?void 0:_,ce=W&&Z!==_&&this.options.updateMissing;if(ne||he||ce){if(this.logger.log(ce?"updateKey":"missingKey",m,f,c,ce?Z:_),a){var ye=this.resolve(c,kn({},o,{keySeparator:!1}));ye&&ye.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var Le=[],Re=this.languageUtils.getFallbackCodes(this.options.fallbackLng,o.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Re&&Re[0])for(var Se=0;Se<Re.length;Se++)Le.push(Re[Se]);else this.options.saveMissingTo==="all"?Le=this.languageUtils.toResolveHierarchy(o.lng||this.language):Le.push(o.lng||this.language);var He=function(lt,Lt,pt){r.options.missingKeyHandler?r.options.missingKeyHandler(lt,f,Lt,ce?pt:le,ce,o):r.backendConnector&&r.backendConnector.saveMissing&&r.backendConnector.saveMissing(lt,f,Lt,ce?pt:le,ce,o),r.emit("missingKey",lt,f,Lt,_)};this.options.saveMissing&&(this.options.saveMissingPlurals&&oe?Le.forEach(function(ot){r.pluralResolver.getSuffixes(ot).forEach(function(lt){He([ot],c+lt,o["defaultValue".concat(lt)]||Z)})}):He(Le,c,Z))}_=this.extendTranslation(_,i,o,w,s),ne&&_===c&&this.options.appendNamespaceToMissingKey&&(_="".concat(f,":").concat(c)),(ne||he)&&this.options.parseMissingKeyHandler&&(_=this.options.parseMissingKeyHandler(_))}return _}},{key:"extendTranslation",value:function(i,o,s,r,a){var l=this;if(this.i18nFormat&&this.i18nFormat.parse)i=this.i18nFormat.parse(i,s,r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!s.skipInterpolation){s.interpolation&&this.interpolator.init(kn({},s,{interpolation:kn({},this.options.interpolation,s.interpolation)}));var c=s.interpolation&&s.interpolation.skipOnVariables||this.options.interpolation.skipOnVariables,u;if(c){var f=i.match(this.interpolator.nestingRegexp);u=f&&f.length}var m=s.replace&&typeof s.replace!="string"?s.replace:s;if(this.options.interpolation.defaultVariables&&(m=kn({},this.options.interpolation.defaultVariables,m)),i=this.interpolator.interpolate(i,m,s.lng||this.language,s),c){var g=i.match(this.interpolator.nestingRegexp),v=g&&g.length;u<v&&(s.nest=!1)}s.nest!==!1&&(i=this.interpolator.nest(i,function(){for(var k=arguments.length,L=new Array(k),P=0;P<k;P++)L[P]=arguments[P];return a&&a[0]===L[0]&&!s.context?(l.logger.warn("It seems you are nesting recursively key: ".concat(L[0]," in key: ").concat(o[0])),null):l.translate.apply(l,L.concat([o]))},s)),s.interpolation&&this.interpolator.reset()}var w=s.postProcess||this.options.postProcess,_=typeof w=="string"?[w]:w;return i!=null&&_&&_.length&&s.applyPostProcessor!==!1&&(i=_T.handle(_,i,o,this.options&&this.options.postProcessPassResolved?kn({i18nResolved:r},s):s,this)),i}},{key:"resolve",value:function(i){var o=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,a,l,c,u;return typeof i=="string"&&(i=[i]),i.forEach(function(f){if(!o.isValidLookup(r)){var m=o.extractFromKey(f,s),g=m.key;a=g;var v=m.namespaces;o.options.fallbackNS&&(v=v.concat(o.options.fallbackNS));var w=s.count!==void 0&&typeof s.count!="string",_=s.context!==void 0&&(typeof s.context=="string"||typeof s.context=="number")&&s.context!=="",k=s.lngs?s.lngs:o.languageUtils.toResolveHierarchy(s.lng||o.language,s.fallbackLng);v.forEach(function(L){o.isValidLookup(r)||(u=L,!_k["".concat(k[0],"-").concat(L)]&&o.utils&&o.utils.hasLoadedNamespace&&!o.utils.hasLoadedNamespace(u)&&(_k["".concat(k[0],"-").concat(L)]=!0,o.logger.warn('key "'.concat(a,'" for languages "').concat(k.join(", "),`" won't get resolved as namespace "`).concat(u,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),k.forEach(function(P){if(!o.isValidLookup(r)){c=P;var M=g,F=[M];if(o.i18nFormat&&o.i18nFormat.addLookupKeys)o.i18nFormat.addLookupKeys(F,g,P,L,s);else{var z;w&&(z=o.pluralResolver.getSuffix(P,s.count)),w&&_&&F.push(M+z),_&&F.push(M+="".concat(o.options.contextSeparator).concat(s.context)),w&&F.push(M+=z)}for(var ee;ee=F.pop();)o.isValidLookup(r)||(l=ee,r=o.getResource(P,L,ee,s))}}))})}}),{res:r,usedKey:a,exactUsedKey:l,usedLng:c,usedNS:u}}},{key:"isValidLookup",value:function(i){return i!==void 0&&!(!this.options.returnNull&&i===null)&&!(!this.options.returnEmptyString&&i==="")}},{key:"getResource",value:function(i,o,s){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(i,o,s,r):this.resourceStore.getResource(i,o,s,r)}}],[{key:"hasDefaultValue",value:function(i){var o="defaultValue";for(var s in i)if(Object.prototype.hasOwnProperty.call(i,s)&&o===s.substring(0,o.length)&&i[s]!==void 0)return!0;return!1}}]),t}(aa);function ob(e){return e.charAt(0).toUpperCase()+e.slice(1)}var Rxe=function(){function e(t){ur(this,e),this.options=t,this.whitelist=this.options.supportedLngs||!1,this.supportedLngs=this.options.supportedLngs||!1,this.logger=er.create("languageUtils")}return hr(e,[{key:"getScriptPartFromCode",value:function(n){if(!n||n.indexOf("-")<0)return null;var i=n.split("-");return i.length===2||(i.pop(),i[i.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(i.join("-"))}},{key:"getLanguagePartFromCode",value:function(n){if(!n||n.indexOf("-")<0)return n;var i=n.split("-");return this.formatLanguageCode(i[0])}},{key:"formatLanguageCode",value:function(n){if(typeof n=="string"&&n.indexOf("-")>-1){var i=["hans","hant","latn","cyrl","cans","mong","arab"],o=n.split("-");return this.options.lowerCaseLng?o=o.map(function(s){return s.toLowerCase()}):o.length===2?(o[0]=o[0].toLowerCase(),o[1]=o[1].toUpperCase(),i.indexOf(o[1].toLowerCase())>-1&&(o[1]=ob(o[1].toLowerCase()))):o.length===3&&(o[0]=o[0].toLowerCase(),o[1].length===2&&(o[1]=o[1].toUpperCase()),o[0]!=="sgn"&&o[2].length===2&&(o[2]=o[2].toUpperCase()),i.indexOf(o[1].toLowerCase())>-1&&(o[1]=ob(o[1].toLowerCase())),i.indexOf(o[2].toLowerCase())>-1&&(o[2]=ob(o[2].toLowerCase()))),o.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?n.toLowerCase():n}},{key:"isWhitelisted",value:function(n){return this.logger.deprecate("languageUtils.isWhitelisted",`function "isWhitelisted" will be renamed to "isSupportedCode" in the next major - please make sure to rename it's usage asap.`),this.isSupportedCode(n)}},{key:"isSupportedCode",value:function(n){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(n=this.getLanguagePartFromCode(n)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(n)>-1}},{key:"getBestMatchFromCodes",value:function(n){var i=this;if(!n)return null;var o;return n.forEach(function(s){if(!o){var r=i.formatLanguageCode(s);(!i.options.supportedLngs||i.isSupportedCode(r))&&(o=r)}}),!o&&this.options.supportedLngs&&n.forEach(function(s){if(!o){var r=i.getLanguagePartFromCode(s);if(i.isSupportedCode(r))return o=r;o=i.options.supportedLngs.find(function(a){if(a.indexOf(r)===0)return a})}}),o||(o=this.getFallbackCodes(this.options.fallbackLng)[0]),o}},{key:"getFallbackCodes",value:function(n,i){if(!n)return[];if(typeof n=="function"&&(n=n(i)),typeof n=="string"&&(n=[n]),Object.prototype.toString.apply(n)==="[object Array]")return n;if(!i)return n.default||[];var o=n[i];return o||(o=n[this.getScriptPartFromCode(i)]),o||(o=n[this.formatLanguageCode(i)]),o||(o=n[this.getLanguagePartFromCode(i)]),o||(o=n.default),o||[]}},{key:"toResolveHierarchy",value:function(n,i){var o=this,s=this.getFallbackCodes(i||this.options.fallbackLng||[],n),r=[],a=function(c){c&&(o.isSupportedCode(c)?r.push(c):o.logger.warn("rejecting language code not found in supportedLngs: ".concat(c)))};return typeof n=="string"&&n.indexOf("-")>-1?(this.options.load!=="languageOnly"&&a(this.formatLanguageCode(n)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&a(this.getScriptPartFromCode(n)),this.options.load!=="currentOnly"&&a(this.getLanguagePartFromCode(n))):typeof n=="string"&&a(this.formatLanguageCode(n)),s.forEach(function(l){r.indexOf(l)<0&&a(o.formatLanguageCode(l))}),r}}]),e}(),Pxe=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],Hxe={1:function(t){return+(t>1)},2:function(t){return+(t!=1)},3:function(t){return 0},4:function(t){return t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},5:function(t){return t==0?0:t==1?1:t==2?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5},6:function(t){return t==1?0:t>=2&&t<=4?1:2},7:function(t){return t==1?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},8:function(t){return t==1?0:t==2?1:t!=8&&t!=11?2:3},9:function(t){return+(t>=2)},10:function(t){return t==1?0:t==2?1:t<7?2:t<11?3:4},11:function(t){return t==1||t==11?0:t==2||t==12?1:t>2&&t<20?2:3},12:function(t){return+(t%10!=1||t%100==11)},13:function(t){return+(t!==0)},14:function(t){return t==1?0:t==2?1:t==3?2:3},15:function(t){return t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2},16:function(t){return t%10==1&&t%100!=11?0:t!==0?1:2},17:function(t){return t==1||t%10==1&&t%100!=11?0:1},18:function(t){return t==0?0:t==1?1:2},19:function(t){return t==1?0:t==0||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3},20:function(t){return t==1?0:t==0||t%100>0&&t%100<20?1:2},21:function(t){return t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0},22:function(t){return t==1?0:t==2?1:(t<0||t>10)&&t%10==0?2:3}};function Vxe(){var e={};return Pxe.forEach(function(t){t.lngs.forEach(function(n){e[n]={numbers:t.nr,plurals:Hxe[t.fc]}})}),e}var zxe=function(){function e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};ur(this,e),this.languageUtils=t,this.options=n,this.logger=er.create("pluralResolver"),this.rules=Vxe()}return hr(e,[{key:"addRule",value:function(n,i){this.rules[n]=i}},{key:"getRule",value:function(n){return this.rules[n]||this.rules[this.languageUtils.getLanguagePartFromCode(n)]}},{key:"needsPlural",value:function(n){var i=this.getRule(n);return i&&i.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(n,i){return this.getSuffixes(n).map(function(o){return i+o})}},{key:"getSuffixes",value:function(n){var i=this,o=this.getRule(n);return o?o.numbers.map(function(s){return i.getSuffix(n,s)}):[]}},{key:"getSuffix",value:function(n,i){var o=this,s=this.getRule(n);if(s){var r=s.noAbs?s.plurals(i):s.plurals(Math.abs(i)),a=s.numbers[r];this.options.simplifyPluralSuffix&&s.numbers.length===2&&s.numbers[0]===1&&(a===2?a="plural":a===1&&(a=""));var l=function(){return o.options.prepend&&a.toString()?o.options.prepend+a.toString():a.toString()};return this.options.compatibilityJSON==="v1"?a===1?"":typeof a=="number"?"_plural_".concat(a.toString()):l():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&s.numbers.length===2&&s.numbers[0]===1?l():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}return this.logger.warn("no plural rule found for: ".concat(n)),""}}]),e}(),Nxe=function(){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ur(this,e),this.logger=er.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||function(n){return n},this.init(t)}return hr(e,[{key:"init",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};n.interpolation||(n.interpolation={escapeValue:!0});var i=n.interpolation;this.escape=i.escape!==void 0?i.escape:Lxe,this.escapeValue=i.escapeValue!==void 0?i.escapeValue:!0,this.useRawValueToEscape=i.useRawValueToEscape!==void 0?i.useRawValueToEscape:!1,this.prefix=i.prefix?Fl(i.prefix):i.prefixEscaped||"{{",this.suffix=i.suffix?Fl(i.suffix):i.suffixEscaped||"}}",this.formatSeparator=i.formatSeparator?i.formatSeparator:i.formatSeparator||",",this.unescapePrefix=i.unescapeSuffix?"":i.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":i.unescapeSuffix||"",this.nestingPrefix=i.nestingPrefix?Fl(i.nestingPrefix):i.nestingPrefixEscaped||Fl("$t("),this.nestingSuffix=i.nestingSuffix?Fl(i.nestingSuffix):i.nestingSuffixEscaped||Fl(")"),this.nestingOptionsSeparator=i.nestingOptionsSeparator?i.nestingOptionsSeparator:i.nestingOptionsSeparator||",",this.maxReplaces=i.maxReplaces?i.maxReplaces:1e3,this.alwaysFormat=i.alwaysFormat!==void 0?i.alwaysFormat:!1,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var n="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(n,"g");var i="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(i,"g");var o="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(o,"g")}},{key:"interpolate",value:function(n,i,o,s){var r=this,a,l,c,u=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function f(_){return _.replace(/\$/g,"$$$$")}var m=function(k){if(k.indexOf(r.formatSeparator)<0){var L=wk(i,u,k);return r.alwaysFormat?r.format(L,void 0,o,kn({},s,i,{interpolationkey:k})):L}var P=k.split(r.formatSeparator),M=P.shift().trim(),F=P.join(r.formatSeparator).trim();return r.format(wk(i,u,M),F,o,kn({},s,i,{interpolationkey:M}))};this.resetRegExp();var g=s&&s.missingInterpolationHandler||this.options.missingInterpolationHandler,v=s&&s.interpolation&&s.interpolation.skipOnVariables||this.options.interpolation.skipOnVariables,w=[{regex:this.regexpUnescape,safeValue:function(k){return f(k)}},{regex:this.regexp,safeValue:function(k){return r.escapeValue?f(r.escape(k)):f(k)}}];return w.forEach(function(_){for(c=0;a=_.regex.exec(n);){if(l=m(a[1].trim()),l===void 0)if(typeof g=="function"){var k=g(n,a,s);l=typeof k=="string"?k:""}else if(v){l=a[0];continue}else r.logger.warn("missed to pass in variable ".concat(a[1]," for interpolating ").concat(n)),l="";else typeof l!="string"&&!r.useRawValueToEscape&&(l=yk(l));var L=_.safeValue(l);if(n=n.replace(a[0],L),v?(_.regex.lastIndex+=L.length,_.regex.lastIndex-=a[0].length):_.regex.lastIndex=0,c++,c>=r.maxReplaces)break}}),n}},{key:"nest",value:function(n,i){var o=this,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r,a,l=kn({},s);l.applyPostProcessor=!1,delete l.defaultValue;function c(g,v){var w=this.nestingOptionsSeparator;if(g.indexOf(w)<0)return g;var _=g.split(new RegExp("".concat(w,"[ ]*{"))),k="{".concat(_[1]);g=_[0],k=this.interpolate(k,l),k=k.replace(/'/g,'"');try{l=JSON.parse(k),v&&(l=kn({},v,l))}catch(L){return this.logger.warn("failed parsing options string in nesting for key ".concat(g),L),"".concat(g).concat(w).concat(k)}return delete l.defaultValue,g}for(;r=this.nestingRegexp.exec(n);){var u=[],f=!1;if(r[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(r[1])){var m=r[1].split(this.formatSeparator).map(function(g){return g.trim()});r[1]=m.shift(),u=m,f=!0}if(a=i(c.call(this,r[1].trim(),l),l),a&&r[0]===n&&typeof a!="string")return a;typeof a!="string"&&(a=yk(a)),a||(this.logger.warn("missed to resolve ".concat(r[1]," for nesting ").concat(n)),a=""),f&&(a=u.reduce(function(g,v){return o.format(g,v,s.lng,kn({},s,{interpolationkey:r[1].trim()}))},a.trim())),n=n.replace(r[0],a),this.regexp.lastIndex=0}return n}}]),e}();function Bxe(e,t){for(var n=e.indexOf(t);n!==-1;)e.splice(n,1),n=e.indexOf(t)}var Fxe=function(e){Pm(t,e);function t(n,i,o){var s,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return ur(this,t),s=wu(this,xc(t).call(this)),Hm&&aa.call(fl(s)),s.backend=n,s.store=i,s.services=o,s.languageUtils=o.languageUtils,s.options=r,s.logger=er.create("backendConnector"),s.state={},s.queue=[],s.backend&&s.backend.init&&s.backend.init(o,r.backend,r),s}return hr(t,[{key:"queueLoad",value:function(i,o,s,r){var a=this,l=[],c=[],u=[],f=[];return i.forEach(function(m){var g=!0;o.forEach(function(v){var w="".concat(m,"|").concat(v);!s.reload&&a.store.hasResourceBundle(m,v)?a.state[w]=2:a.state[w]<0||(a.state[w]===1?c.indexOf(w)<0&&c.push(w):(a.state[w]=1,g=!1,c.indexOf(w)<0&&c.push(w),l.indexOf(w)<0&&l.push(w),f.indexOf(v)<0&&f.push(v)))}),g||u.push(m)}),(l.length||c.length)&&this.queue.push({pending:c,loaded:{},errors:[],callback:r}),{toLoad:l,pending:c,toLoadLanguages:u,toLoadNamespaces:f}}},{key:"loaded",value:function(i,o,s){var r=i.split("|"),a=r[0],l=r[1];o&&this.emit("failedLoading",a,l,o),s&&this.store.addResourceBundle(a,l,s),this.state[i]=o?-1:2;var c={};this.queue.forEach(function(u){$xe(u.loaded,[a],l),Bxe(u.pending,i),o&&u.errors.push(o),u.pending.length===0&&!u.done&&(Object.keys(u.loaded).forEach(function(f){c[f]||(c[f]=[]),u.loaded[f].length&&u.loaded[f].forEach(function(m){c[f].indexOf(m)<0&&c[f].push(m)})}),u.done=!0,u.errors.length?u.callback(u.errors):u.callback())}),this.emit("loaded",c),this.queue=this.queue.filter(function(u){return!u.done})}},{key:"read",value:function(i,o,s){var r=this,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:350,c=arguments.length>5?arguments[5]:void 0;return i.length?this.backend[s](i,o,function(u,f){if(u&&f&&a<5){setTimeout(function(){r.read.call(r,i,o,s,a+1,l*2,c)},l);return}c(u,f)}):c(null,{})}},{key:"prepareLoading",value:function(i,o){var s=this,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),a&&a();typeof i=="string"&&(i=this.languageUtils.toResolveHierarchy(i)),typeof o=="string"&&(o=[o]);var l=this.queueLoad(i,o,r,a);if(!l.toLoad.length)return l.pending.length||a(),null;l.toLoad.forEach(function(c){s.loadOne(c)})}},{key:"load",value:function(i,o,s){this.prepareLoading(i,o,{},s)}},{key:"reload",value:function(i,o,s){this.prepareLoading(i,o,{reload:!0},s)}},{key:"loadOne",value:function(i){var o=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",r=i.split("|"),a=r[0],l=r[1];this.read(a,l,"read",void 0,void 0,function(c,u){c&&o.logger.warn("".concat(s,"loading namespace ").concat(l," for language ").concat(a," failed"),c),!c&&u&&o.logger.log("".concat(s,"loaded namespace ").concat(l," for language ").concat(a),u),o.loaded(i,c,u)})}},{key:"saveMissing",value:function(i,o,s,r,a){var l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(o)){this.logger.warn('did not save key "'.concat(s,'" as the namespace "').concat(o,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}s==null||s===""||(this.backend&&this.backend.create&&this.backend.create(i,o,s,r,null,kn({},l,{isUpdate:a})),!(!i||!i[0])&&this.store.addResource(i[0],o,s,r))}}]),t}(aa);function Wxe(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,whitelist:!1,nonExplicitWhitelist:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(t){var n={};if(Wo(t[1])==="object"&&(n=t[1]),typeof t[1]=="string"&&(n.defaultValue=t[1]),typeof t[2]=="string"&&(n.tDescription=t[2]),Wo(t[2])==="object"||Wo(t[3])==="object"){var i=t[3]||t[2];Object.keys(i).forEach(function(o){n[o]=i[o]})}return n},interpolation:{escapeValue:!0,format:function(t,n,i,o){return t},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!1}}}function Ak(e){return typeof e.ns=="string"&&(e.ns=[e.ns]),typeof e.fallbackLng=="string"&&(e.fallbackLng=[e.fallbackLng]),typeof e.fallbackNS=="string"&&(e.fallbackNS=[e.fallbackNS]),e.whitelist&&(e.whitelist&&e.whitelist.indexOf("cimode")<0&&(e.whitelist=e.whitelist.concat(["cimode"])),e.supportedLngs=e.whitelist),e.nonExplicitWhitelist&&(e.nonExplicitSupportedLngs=e.nonExplicitWhitelist),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e}function ff(){}var Uxe=function(e){Pm(t,e);function t(){var n,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;if(ur(this,t),n=wu(this,xc(t).call(this)),Hm&&aa.call(fl(n)),n.options=Ak(i),n.services={},n.logger=er,n.modules={external:[]},o&&!n.isInitialized&&!i.isClone){if(!n.options.initImmediate)return n.init(i,o),wu(n,fl(n));setTimeout(function(){n.init(i,o)},0)}return n}return hr(t,[{key:"init",value:function(){var i=this,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;typeof o=="function"&&(s=o,o={}),o.whitelist&&!o.supportedLngs&&this.logger.deprecate("whitelist",'option "whitelist" will be renamed to "supportedLngs" in the next major - please make sure to rename this option asap.'),o.nonExplicitWhitelist&&!o.nonExplicitSupportedLngs&&this.logger.deprecate("whitelist",'options "nonExplicitWhitelist" will be renamed to "nonExplicitSupportedLngs" in the next major - please make sure to rename this option asap.'),this.options=kn({},Wxe(),this.options,Ak(o)),this.format=this.options.interpolation.format,s||(s=ff);function r(v){return v?typeof v=="function"?new v:v:null}if(!this.options.isClone){this.modules.logger?er.init(r(this.modules.logger),this.options):er.init(null,this.options);var a=new Rxe(this.options);this.store=new Dxe(this.options.resources,this.options);var l=this.services;l.logger=er,l.resourceStore=this.store,l.languageUtils=a,l.pluralResolver=new zxe(a,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),l.interpolator=new Nxe(this.options),l.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},l.backendConnector=new Fxe(r(this.modules.backend),l.resourceStore,l,this.options),l.backendConnector.on("*",function(v){for(var w=arguments.length,_=new Array(w>1?w-1:0),k=1;k<w;k++)_[k-1]=arguments[k];i.emit.apply(i,[v].concat(_))}),this.modules.languageDetector&&(l.languageDetector=r(this.modules.languageDetector),l.languageDetector.init(l,this.options.detection,this.options)),this.modules.i18nFormat&&(l.i18nFormat=r(this.modules.i18nFormat),l.i18nFormat.init&&l.i18nFormat.init(this)),this.translator=new Ck(this.services,this.options),this.translator.on("*",function(v){for(var w=arguments.length,_=new Array(w>1?w-1:0),k=1;k<w;k++)_[k-1]=arguments[k];i.emit.apply(i,[v].concat(_))}),this.modules.external.forEach(function(v){v.init&&v.init(i)})}if(this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var c=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);c.length>0&&c[0]!=="dev"&&(this.options.lng=c[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined");var u=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];u.forEach(function(v){i[v]=function(){var w;return(w=i.store)[v].apply(w,arguments)}});var f=["addResource","addResources","addResourceBundle","removeResourceBundle"];f.forEach(function(v){i[v]=function(){var w;return(w=i.store)[v].apply(w,arguments),i}});var m=dd(),g=function(){var w=function(k,L){i.isInitialized&&!i.initializedStoreOnce&&i.logger.warn("init: i18next is already initialized. You should call init just once!"),i.isInitialized=!0,i.options.isClone||i.logger.log("initialized",i.options),i.emit("initialized",i.options),m.resolve(L),s(k,L)};if(i.languages&&i.options.compatibilityAPI!=="v1"&&!i.isInitialized)return w(null,i.t.bind(i));i.changeLanguage(i.options.lng,w)};return this.options.resources||!this.options.initImmediate?g():setTimeout(g,0),m}},{key:"loadResources",value:function(i){var o=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ff,r=s,a=typeof i=="string"?i:this.language;if(typeof i=="function"&&(r=i),!this.options.resources||this.options.partialBundledLanguages){if(a&&a.toLowerCase()==="cimode")return r();var l=[],c=function(m){if(m){var g=o.services.languageUtils.toResolveHierarchy(m);g.forEach(function(v){l.indexOf(v)<0&&l.push(v)})}};if(a)c(a);else{var u=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);u.forEach(function(f){return c(f)})}this.options.preload&&this.options.preload.forEach(function(f){return c(f)}),this.services.backendConnector.load(l,this.options.ns,r)}else r(null)}},{key:"reloadResources",value:function(i,o,s){var r=dd();return i||(i=this.languages),o||(o=this.options.ns),s||(s=ff),this.services.backendConnector.reload(i,o,function(a){r.resolve(),s(a)}),r}},{key:"use",value:function(i){if(!i)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!i.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return i.type==="backend"&&(this.modules.backend=i),(i.type==="logger"||i.log&&i.warn&&i.error)&&(this.modules.logger=i),i.type==="languageDetector"&&(this.modules.languageDetector=i),i.type==="i18nFormat"&&(this.modules.i18nFormat=i),i.type==="postProcessor"&&_T.addPostProcessor(i),i.type==="3rdParty"&&this.modules.external.push(i),this}},{key:"changeLanguage",value:function(i,o){var s=this;this.isLanguageChangingTo=i;var r=dd();this.emit("languageChanging",i);var a=function(u,f){f?(s.language=f,s.languages=s.services.languageUtils.toResolveHierarchy(f),s.translator.changeLanguage(f),s.isLanguageChangingTo=void 0,s.emit("languageChanged",f),s.logger.log("languageChanged",f)):s.isLanguageChangingTo=void 0,r.resolve(function(){return s.t.apply(s,arguments)}),o&&o(u,function(){return s.t.apply(s,arguments)})},l=function(u){!i&&!u&&s.services.languageDetector&&(u=[]);var f=typeof u=="string"?u:s.services.languageUtils.getBestMatchFromCodes(u);f&&(s.language||(s.language=f,s.languages=s.services.languageUtils.toResolveHierarchy(f)),s.translator.language||s.translator.changeLanguage(f),s.services.languageDetector&&s.services.languageDetector.cacheUserLanguage(f)),s.loadResources(f,function(m){a(m,f)})};return!i&&this.services.languageDetector&&!this.services.languageDetector.async?l(this.services.languageDetector.detect()):!i&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(l):l(i),r}},{key:"getFixedT",value:function(i,o,s){var r=this,a=function l(c,u){var f;if(Wo(u)!=="object"){for(var m=arguments.length,g=new Array(m>2?m-2:0),v=2;v<m;v++)g[v-2]=arguments[v];f=r.options.overloadTranslationOptionHandler([c,u].concat(g))}else f=kn({},u);f.lng=f.lng||l.lng,f.lngs=f.lngs||l.lngs,f.ns=f.ns||l.ns;var w=r.options.keySeparator||".",_=s?"".concat(s).concat(w).concat(c):c;return r.t(_,f)};return typeof i=="string"?a.lng=i:a.lngs=i,a.ns=o,a.keyPrefix=s,a}},{key:"t",value:function(){var i;return this.translator&&(i=this.translator).translate.apply(i,arguments)}},{key:"exists",value:function(){var i;return this.translator&&(i=this.translator).exists.apply(i,arguments)}},{key:"setDefaultNamespace",value:function(i){this.options.defaultNS=i}},{key:"hasLoadedNamespace",value:function(i){var o=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var r=this.languages[0],a=this.options?this.options.fallbackLng:!1,l=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;var c=function(m,g){var v=o.services.backendConnector.state["".concat(m,"|").concat(g)];return v===-1||v===2};if(s.precheck){var u=s.precheck(this,c);if(u!==void 0)return u}return!!(this.hasResourceBundle(r,i)||!this.services.backendConnector.backend||c(r,i)&&(!a||c(l,i)))}},{key:"loadNamespaces",value:function(i,o){var s=this,r=dd();return this.options.ns?(typeof i=="string"&&(i=[i]),i.forEach(function(a){s.options.ns.indexOf(a)<0&&s.options.ns.push(a)}),this.loadResources(function(a){r.resolve(),o&&o(a)}),r):(o&&o(),Promise.resolve())}},{key:"loadLanguages",value:function(i,o){var s=dd();typeof i=="string"&&(i=[i]);var r=this.options.preload||[],a=i.filter(function(l){return r.indexOf(l)<0});return a.length?(this.options.preload=r.concat(a),this.loadResources(function(l){s.resolve(),o&&o(l)}),s):(o&&o(),Promise.resolve())}},{key:"dir",value:function(i){if(i||(i=this.languages&&this.languages.length>0?this.languages[0]:this.language),!i)return"rtl";var o=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam"];return o.indexOf(this.services.languageUtils.getLanguagePartFromCode(i))>=0?"rtl":"ltr"}},{key:"createInstance",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;return new t(i,o)}},{key:"cloneInstance",value:function(){var i=this,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ff,r=kn({},this.options,o,{isClone:!0}),a=new t(r),l=["store","services","language"];return l.forEach(function(c){a[c]=i[c]}),a.services=kn({},this.services),a.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},a.translator=new Ck(a.services,a.options),a.translator.on("*",function(c){for(var u=arguments.length,f=new Array(u>1?u-1:0),m=1;m<u;m++)f[m-1]=arguments[m];a.emit.apply(a,[c].concat(f))}),a.init(r,s),a.translator.options=a.options,a.translator.backendConnector.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},a}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages}}}]),t}(aa),vd=new Uxe;let On;const jxe={install(e,t){On||(On=t.i18n);const n=[On.defaultLocale];n[0]!=="en"&&n.push("en"),vd.init({lng:sb(On.adminLocale),fallbackLng:n,resources:{},debug:On.debug,interpolation:{escapeValue:!1},skipOnVariables:!1,appendNamespaceToMissingKey:!0,defaultNS:[apos.i18n.defaultNamespace],parseMissingKeyHandler(i){return i.startsWith(`${this.defaultNS[0]}:`)?i.slice(this.defaultNS[0].length+1):i}});for(const[i,o]of Object.entries(On.i18n[On.adminLocale]))vd.addResourceBundle(sb(On.adminLocale),i,o,!0,!0);if(On.adminLocale!==On.defaultLocale)for(const[i,o]of Object.entries(On.i18n[On.defaultLocale]))vd.addResourceBundle(sb(On.defaultLocale),i,o,!0,!0);if(On.adminLocale!=="en"&&On.defaultLocale!=="en")for(const[i,o]of Object.entries(On.i18n.en))vd.addResourceBundle("en",i,o,!0,!0);e.config.globalProperties.$t=Up,e.provide("i18n",Up)}};function Up(e,t={}){if(!On)return"";if(e!==null&&typeof e=="object"&&(t=e,e=t.key),t.localize===!1)return e;if(e==null||(e+="",!e.length))return"";const n=vd.t(e,{lng:On.adminLocale,...t});return On.show?n===e?e.match(/^\S+:/)?` ${n}`:` ${n}`:` ${n}`:n}function sb(e){const[t,n]=e.split("-");return n?`${t}-${n.toUpperCase()}`:e}const qxe=(e,t)=>`<div id="${e}" class="apos-tooltip" role="tooltip">
    <div class="apos-tooltip__wrapper">
      <div class="apos-tooltip__arrow"></div>
      <div class="apos-tooltip__inner">
        ${t}
      </div>
    </div>
  </div>`,Kxe={install(e){e.directive("apos-tooltip",{mounted(r,a,l){t(r,a)},updated(r,a){const l=Object.hasOwn(a.value||{},"content")?a.value.content:a.value,c=Object.hasOwn(a.oldValue||{},"content")?a.oldValue.content:a.oldValue;ol.isEqual(l,c)||(r.aposShowTooltipListener&&n(r),t(r,a))},beforeUnmount(r,a){n(r)}});function t(r,a){var g,v;let l,c;if(!a.value&&!((g=a.value)!=null&&g.content))return;const u=(v=a.value)==null?void 0:v.delay,f=s(a.value);if(!f)return;const m=`tooltip__${qt()}`;r.aposShowTooltipListener=i({el:r,value:a.value,tooltipTimeout:l,delayTimeout:c,tooltipId:m,localized:f}),r.aposHideTooltipListener=o({tooltipId:m,tooltipTimeout:l,delayTimeout:c,delay:u}),r.addEventListener("mouseenter",r.aposShowTooltipListener),r.addEventListener("mouseleave",r.aposHideTooltipListener),r.addEventListener("click",r.aposHideTooltipListener)}function n(r){r.aposHideTooltipListener&&r.aposHideTooltipListener(!0),r.removeEventListener("mouseenter",r.aposShowTooltipListener),r.removeEventListener("mouseleave",r.aposHideTooltipListener),r.removeEventListener("click",r.aposHideTooltipListener)}function i({el:r,value:a,tooltipTimeout:l,delayTimeout:c,tooltipId:u,localized:f}){return async()=>{const m=document.querySelector(`#${u}`);m?m.setAttribute("aria-hidden",!1):document.body.insertAdjacentHTML("beforeend",qxe(u,f));const g=m||document.querySelector(`#${u}`);if(!g)return;const v=g.querySelector(".apos-tooltip__arrow"),{x:w,y:_,middlewareData:k,placement:L}=await z5(r,g,{placement:a.placement||"bottom-end",middleware:[R5(11),P5({padding:5}),H5(),V5({element:v,padding:10})]}),[P]=L.split("-"),{x:M,y:F}=k.arrow;m||(g.setAttribute("x-placement",P),g.setAttribute("aria-hidden",!1)),Object.assign(g.style,{left:`${w}px`,top:`${_}px`}),Object.assign(v.style,{...M&&{left:`${M}px`},...F&&{top:`${F}px`}})}}function o({tooltipId:r,tooltipTimeout:a,delayTimeout:l,delay:c}){return(u=!1)=>{const f=document.querySelector(`#${r}`);if(f){if(u){f.remove();return}c?l=setTimeout(()=>{f.setAttribute("aria-hidden",!0)},c):f.setAttribute("aria-hidden",!0),a=setTimeout(()=>{f.remove()},5e3)}}}function s(r){if(r)return r.content?r.localize===!1?r.content:Up(r.content):Up(r)}}},Gxe=Ose(),bl=(e,t={})=>{const n=TD(e,t);n.use(jxe,{i18n:apos.modules["@apostrophecms/i18n"]}),n.use(Kxe),n.use(Sxe),n.use(Gxe);const i=[window.apos.vueComponents,window.apos.iconComponents];for(const o of i)for(const[s,r]of Object.entries(o))n.component(s,r);return n};function Jxe(){const e=apos.vueComponents.TheAposBusy,t=document.querySelector("#apos-busy");if(!t)return;bl(e).mount(t)}function Yxe(){const e=apos.vueComponents.TheAposAdminBar,t=document.querySelector("#apos-admin-bar");if(!apos.adminBar||!t||(apos==null?void 0:apos.adminBar.showAdminBar)===!1)return;bl(e,{items:apos.adminBar.items||[]}).mount(t)}function Zxe(){const e=apos.vueComponents.TheAposNotifications,t=document.querySelector("#apos-notification");if(!apos.login.user||!t)return;bl(e).mount(t);const i=i0();apos.notify=i.notify,i.poll()}function Xxe(){const e=apos.vueComponents.TheAposLogin,t=document.querySelector("#apos-login");t&&bl(e).mount(t),apos.bus.$on("admin-menu-click",async n=>{if(n==="@apostrophecms/login-logout"){await apos.http.post(`${apos.modules["@apostrophecms/login"].action}/logout`,{}),window.sessionStorage.setItem("aposStateChange",Date.now()),window.sessionStorage.setItem("aposStateChangeSeen","{}");try{await apos.http.get(location.href,{})}catch(i){if(i.status===404){location.assign("/");return}}location.reload()}})}const Qxe=()=>{apos.doc.edit=async({type:e,_id:t,copyOfId:n,copyOf:i,values:o})=>{var r,a;if(!e)throw new Error("You must specify the type of document to edit.");apos.page.validPageTypes.includes(e)&&(e="@apostrophecms/page");const s=(a=(r=apos.modules[e])==null?void 0:r.components)==null?void 0:a.editorModal;if(!s)throw new Error(`${e} is not a valid piece or page type, or cannot be edited`);if(n=n??(i==null?void 0:i._id),i&&!n)throw new Error("copyOf (deprecated) must be an object with a `_id` property, if possible pass `copyOfId` instead");return apos.modal.execute(s,{moduleName:e,docId:t,copyOfId:n,values:o})},apos.bus.$on("edit",apos.doc.edit)};function eMe(){const e=apos.vueComponents.TheAposModals,t=document.querySelector("#apos-modals");if(!t)return;bl(e).mount(t);const i=ia();apos.modal.execute=i.execute,apos.modal.get=i.get,apos.modal.getAt=i.getAt,apos.modal.getProperties=i.getProperties,apos.modal.onTopOf=i.onTopOf,apos.modal.getActiveLocale=i.getActiveLocale,apos.confirm=i.confirm,apos.alert=i.alert,apos.report=i.report}function tMe(){const e=apos.vueComponents.AposAreaEditor;let t=0;apos.area.widgetOptions=[],r(),i(),document.documentElement.style.setProperty("--a-widget-margin",apos.ui.widgetMargin),apos.bus.$on("widget-rendering",function(){t++}),apos.bus.$on("widget-rendered",a=>{t--,n(a)}),apos.bus.$on("refreshed",function(){n()});function n({edit:a=!0}={}){a&&i(),t===0&&apos.util.runPlayers()}function i(){const a=Array.from(document.querySelectorAll("[data-apos-area-newly-editable]"));a.sort((l,c)=>{const u=o(l),f=o(c);return u<f?-1:f>u?1:0});for(const l of a)s(l)}function o(a){let l=0;for(;a;)a=a.parentNode,l++;return l}function s(a){const l=JSON.parse(a.getAttribute("data-options")),c=JSON.parse(a.getAttribute("data")),u=a.getAttribute("data-field-id"),f=JSON.parse(a.getAttribute("data-choices")),m={},g=c._docId;for(const v of a.querySelectorAll("[data-apos-widget]")){const w=v.getAttribute("data-apos-widget"),_=c.items.find(k=>w===k._id);_&&(m[w]={html:v.innerHTML,parameters:{_docId:g,widget:_,areaFieldId:u,type:_.type}},v.remove())}a.removeAttribute("data-apos-area-newly-editable"),apos.area.activeEditor&&apos.area.activeEditor.id===c._id?a.parentNode.replaceChild(apos.area.activeEditor.$el,a):bl(e,{options:l,id:c._id,items:c.items,choices:f,docId:g,fieldId:u,renderings:m}).mount(a)}function r(){class a{set(c){localStorage.setItem("aposWidgetClipboard",JSON.stringify(c))}get(){const c=window.localStorage.getItem("aposWidgetClipboard");return c?JSON.parse(c):null}}apos.area.widgetClipboard=new a}}function nMe(){window.addEventListener("hashchange",t=>{e()&&t.stopPropagation()}),e();async function e(){const n=(location.hash||"").match(/#apostrophe-permalink-(.*)$/);if(n){const i=n[1].replace(/\?.*$/,""),o=await apos.http.get(`${apos.doc.action}/${i}`,{});if(o._url)return location.replace(o._url),!0}}}function iMe(){document.body.addEventListener("click",e=>{if(e.target.getAttribute("data-apos-bus-event")){const t=e.target.getAttribute("data-apos-bus-event");let n,i={};try{i=JSON.parse(t),n=i.name||!1}catch{n=t}n?apos.bus.$emit(n,i.data||null):(console.error("Apostrophe bus events require a name"),apos.notify("apostrophe:error",{type:"error"}))}},!1)}const oMe=()=>{apos.ui.transformers={},apos.ui.addTransformer=(e,t)=>{apos.ui.transformers[e]=t}};function sMe(){apos.settings.restore&&(apos.modal.execute("AposSettingsManager",{restore:apos.settings.restore}),apos.settings.restore=null)}const rMe=()=>{const e=["minSize"];apos.bus.$on("piece-relationship-query",t=>{const[n={}]=apos.area.widgetOptions||[];e.forEach(i=>{n[i]&&(t[i]=n[i])})})};function aMe(){const e=apos.vueComponents.TheAposCommandMenu,t=document.querySelector("#apos-command-menu");if(!apos.commandMenu||!t)return;const i=bl(e,{modals:apos.commandMenu.modals}).mount(t);apos.commandMenu.getModal=i.getModal}window.apos.bus={$on:(...e)=>Eh.on(...e),$once:(...e)=>Eh.once(...e),$off:(...e)=>Eh.off(...e),$emit:(...e)=>Eh.emit(...e)};window.apos.iconComponents=window.apos.iconComponents||{};window.apos.iconComponents["account-box-icon"]=HD;window.apos.iconComponents["alert-circle-icon"]=UD;window.apos.iconComponents["alpha-x-icon"]=ZD;window.apos.iconComponents["anchor-icon"]=oR;window.apos.iconComponents["apple-keyboard-caps"]=uR;window.apos.iconComponents["apple-keyboard-command"]=yR;window.apos.iconComponents["apple-keyboard-control"]=SR;window.apos.iconComponents["apple-keyboard-option"]=IR;window.apos.iconComponents["apple-keyboard-shift"]=zR;window.apos.iconComponents["archive-arrow-down-icon"]=qR;window.apos.iconComponents["archive-arrow-up-icon"]=QR;window.apos.iconComponents["arrow-collapse-vertical-icon"]=rP;window.apos.iconComponents["arrow-down-icon"]=fP;window.apos.iconComponents["arrow-expand-vertical-icon"]=wP;window.apos.iconComponents["arrow-left-icon"]=MP;window.apos.iconComponents["arrow-right-icon"]=DP;window.apos.iconComponents["arrow-up-icon"]=BP;window.apos.iconComponents["binoculars-icon"]=GP;window.apos.iconComponents["calendar-icon"]=tH;window.apos.iconComponents["cellphone-icon"]=lH;window.apos.iconComponents["check-all-icon"]=mH;window.apos.iconComponents["check-bold-icon"]=CH;window.apos.iconComponents["check-circle-icon"]=EH;window.apos.iconComponents["check-decagram-icon"]=PH;window.apos.iconComponents["checkbox-blank-icon"]=WH;window.apos.iconComponents["checkbox-marked-icon"]=YH;window.apos.iconComponents["chevron-down-icon"]=iV;window.apos.iconComponents["chevron-left-icon"]=dV;window.apos.iconComponents["chevron-right-icon"]=YS;window.apos.iconComponents["chevron-up-icon"]=AV;window.apos.iconComponents["circle-icon"]=OV;window.apos.iconComponents["circle-medium-icon"]=HV;window.apos.iconComponents["clipboard-plus-icon"]=UV;window.apos.iconComponents["clipboard-plus-outline-icon"]=ZV;window.apos.iconComponents["clock-icon"]=oz;window.apos.iconComponents["close-circle-icon"]=uz;window.apos.iconComponents["close-icon"]=Ky;window.apos.iconComponents["cloud-upload-icon"]=kz;window.apos.iconComponents["code-tags-icon"]=$z;window.apos.iconComponents["cog-icon"]=Vz;window.apos.iconComponents["content-copy-icon"]=jz;window.apos.iconComponents["content-cut-icon"]=Xz;window.apos.iconComponents["content-duplicate-icon"]=sN;window.apos.iconComponents["cursor-default-click-icon"]=hN;window.apos.iconComponents["delete-icon"]=vN;window.apos.iconComponents["dots-horizontal-icon"]=xN;window.apos.iconComponents["dots-vertical-icon"]=LN;window.apos.iconComponents["drag-icon"]=NN;window.apos.iconComponents["eye-icon"]=KN;window.apos.iconComponents["file-document-icon"]=eB;window.apos.iconComponents["file-document-multiple-outline-icon"]=aB;window.apos.iconComponents["file-tree-icon"]=pB;window.apos.iconComponents["flare-icon"]=_B;window.apos.iconComponents["format-align-center-icon"]=TB;window.apos.iconComponents["format-align-justify-icon"]=RB;window.apos.iconComponents["format-align-left-icon"]=FB;window.apos.iconComponents["format-align-right-icon"]=JB;window.apos.iconComponents["format-bold-icon"]=nF;window.apos.iconComponents["format-font-icon"]=cF;window.apos.iconComponents["format-italic-icon"]=gF;window.apos.iconComponents["format-list-bulleted-icon"]=AF;window.apos.iconComponents["format-list-numbered-icon"]=OF;window.apos.iconComponents["format-quote-close-icon"]=HF;window.apos.iconComponents["format-strikethrough-variant-icon"]=UF;window.apos.iconComponents["format-subscript-icon"]=ZF;window.apos.iconComponents["format-superscript-icon"]=oW;window.apos.iconComponents["format-text-icon"]=uW;window.apos.iconComponents["format-underline-icon"]=yW;window.apos.iconComponents["help-circle-icon"]=SW;window.apos.iconComponents["image-edit-outline"]=IW;window.apos.iconComponents["image-icon"]=zW;window.apos.iconComponents["image-plus-icon"]=qW;window.apos.iconComponents["image-size-select-actual-icon"]=QW;window.apos.iconComponents["information-icon"]=ZS;window.apos.iconComponents["information-outline-icon"]=hU;window.apos.iconComponents["instagram-icon"]=vU;window.apos.iconComponents["keyboard-backspace"]=xU;window.apos.iconComponents["keyboard-esc"]=LU;window.apos.iconComponents["keyboard-f1"]=NU;window.apos.iconComponents["keyboard-f10"]=KU;window.apos.iconComponents["keyboard-f11"]=ej;window.apos.iconComponents["keyboard-f12"]=aj;window.apos.iconComponents["keyboard-f2"]=pj;window.apos.iconComponents["keyboard-f3"]=_j;window.apos.iconComponents["keyboard-f4"]=Tj;window.apos.iconComponents["keyboard-f5"]=Rj;window.apos.iconComponents["keyboard-f6"]=Fj;window.apos.iconComponents["keyboard-f7"]=Jj;window.apos.iconComponents["keyboard-f8"]=nq;window.apos.iconComponents["keyboard-f9"]=cq;window.apos.iconComponents["keyboard-return"]=gq;window.apos.iconComponents["keyboard-space"]=Aq;window.apos.iconComponents["keyboard-tab"]=Oq;window.apos.iconComponents["label-icon"]=Hq;window.apos.iconComponents["lightbulb-on-icon"]=Uq;window.apos.iconComponents["link-icon"]=Zq;window.apos.iconComponents["list-status-icon"]=oK;window.apos.iconComponents["lock-icon"]=uK;window.apos.iconComponents["magnify-icon"]=yK;window.apos.iconComponents["map-marker-icon"]=SK;window.apos.iconComponents["menu-down-icon"]=IK;window.apos.iconComponents["minus-box-icon"]=zK;window.apos.iconComponents["minus-icon"]=qK;window.apos.iconComponents["monitor-icon"]=QK;window.apos.iconComponents["paperclip-icon"]=rG;window.apos.iconComponents["pencil-icon"]=fG;window.apos.iconComponents["phone-icon"]=wG;window.apos.iconComponents["play-box-icon"]=MG;window.apos.iconComponents["playlist-edit-icon"]=DG;window.apos.iconComponents["plus-icon"]=BG;window.apos.iconComponents["redo-icon"]=GG;window.apos.iconComponents["refresh-icon"]=tJ;window.apos.iconComponents["shape-icon"]=lJ;window.apos.iconComponents["sign-text-icon"]=mJ;window.apos.iconComponents["tablet-icon"]=CJ;window.apos.iconComponents["tag-icon"]=EJ;window.apos.iconComponents["text-box-icon"]=PJ;window.apos.iconComponents["text-box-multiple-icon"]=WJ;window.apos.iconComponents["text-box-remove-icon"]=YJ;window.apos.iconComponents["trash-can-icon"]=iY;window.apos.iconComponents["trash-can-outline-icon"]=dY;window.apos.iconComponents["tune-icon"]=bY;window.apos.iconComponents["undo-icon"]=kY;window.apos.iconComponents["unfold-less-horizontal-icon"]=$Y;window.apos.iconComponents["unfold-more-horizontal-icon"]=VY;window.apos.iconComponents["video-icon"]=jY;window.apos.iconComponents["view-column-icon"]=XY;window.apos.iconComponents["water-off-icon"]=sZ;window.apos.iconComponents["web-icon"]=hZ;window.apos.iconComponents["database-export-icon"]=vZ;window.apos.iconComponents["format-color-highlight-icon"]=xZ;window.apos.iconComponents["table-icon"]=LZ;window.apos.iconComponents["palette-swatch-icon"]=NZ;window.apos.iconComponents["table-row-plus-after-icon"]=KZ;window.apos.iconComponents["table-column-plus-after-icon"]=eX;window.apos.iconComponents["table-column-remove-icon"]=aX;window.apos.iconComponents["table-row-remove-icon"]=pX;window.apos.iconComponents["table-plus-icon"]=_X;window.apos.iconComponents["table-minus-icon"]=TX;window.apos.iconComponents["table-column-icon"]=RX;window.apos.iconComponents["table-row-icon"]=FX;window.apos.iconComponents["table-split-cell-icon"]=JX;window.apos.iconComponents["table-merge-cells-icon"]=nQ;window.apos.iconComponents["earth-icon"]=cQ;window.apos.iconComponents["database-check-icon"]=gQ;window.apos.iconComponents["tray-full-icon"]=AQ;window.apos.vueComponents=window.apos.vueComponents||{};window.apos.vueComponents.AposI18nLocalize=JQ;window.apos.vueComponents.AposArrayEditor=Jee;window.apos.vueComponents.AposInputArea=Qee;window.apos.vueComponents.AposInputArray=Ute;window.apos.vueComponents.AposInputAttachment=Jte;window.apos.vueComponents.AposInputBoolean=ine;window.apos.vueComponents.AposInputCheckboxes=cne;window.apos.vueComponents.AposInputDateAndTime=gne;window.apos.vueComponents.AposInputObject=Cne;window.apos.vueComponents.AposInputPassword=Tne;window.apos.vueComponents.AposInputRadio=Pne;window.apos.vueComponents.AposInputRange=Jne;window.apos.vueComponents.AposInputRelationship=iie;window.apos.vueComponents.AposInputSelect=aie;window.apos.vueComponents.AposInputSlug=fie;window.apos.vueComponents.AposInputString=wie;window.apos.vueComponents.AposInputWrapper=Lie;window.apos.vueComponents.AposLogo=Hie;window.apos.vueComponents.AposLogoIcon=Bie;window.apos.vueComponents.AposLogoPadless=jie;window.apos.vueComponents.AposSchema=Jie;window.apos.vueComponents.AposSearchList=loe;window.apos.vueComponents.AposSubform=voe;window.apos.vueComponents.TheAposBusy=Coe;window.apos.vueComponents.AposInputRole=Soe;window.apos.vueComponents.AposPermissionGrid=Roe;window.apos.vueComponents.TheAposAdminBar=Boe;window.apos.vueComponents.TheAposAdminBarLocale=Uoe;window.apos.vueComponents.TheAposAdminBarMenu=Zoe;window.apos.vueComponents.TheAposAdminBarUser=ese;window.apos.vueComponents.TheAposContextBar=ose;window.apos.vueComponents.TheAposContextBreakpointPreviewMode=lse;window.apos.vueComponents.TheAposContextModeAndSettings=fse;window.apos.vueComponents.TheAposContextTitle=vse;window.apos.vueComponents.TheAposContextUndoRedo=kse;window.apos.vueComponents.TheAposSavingIndicator=Ese;window.apos.vueComponents.AposNotification=Use;window.apos.vueComponents.TheAposNotifications=Kse;window.apos.vueComponents.AposForgotPasswordForm=Qse;window.apos.vueComponents.AposLoginForm=lre;window.apos.vueComponents.AposResetPasswordForm=pre;window.apos.vueComponents.TheAposLogin=Are;window.apos.vueComponents.TheAposLoginHeader=$re;window.apos.vueComponents.AposDocsManagerToolbar=Dre;window.apos.vueComponents.AposModal=Zre;window.apos.vueComponents.AposModalBody=oae;window.apos.vueComponents.AposModalBreadcrumbs=lae;window.apos.vueComponents.AposModalConfirm=bae;window.apos.vueComponents.AposModalLip=xae;window.apos.vueComponents.AposModalRail=Eae;window.apos.vueComponents.AposModalReport=Nae;window.apos.vueComponents.AposModalShareDraft=nle;window.apos.vueComponents.AposModalTabs=cle;window.apos.vueComponents.AposModalTabsBody=mle;window.apos.vueComponents.AposModalToolbar=wle;window.apos.vueComponents.AposWidgetModalTabs=Mle;window.apos.vueComponents.TheAposModals=Ole;window.apos.vueComponents.AposDocContextMenu=Dle;window.apos.vueComponents.AposDocEditor=zle;window.apos.vueComponents.AposDocLocalePicker=Wle;window.apos.vueComponents.AposDocsManager=Jle;window.apos.vueComponents.AposDocsManagerDisplay=oce;window.apos.vueComponents.AposDocsManagerSelectBox=dce;window.apos.vueComponents.AposRelationshipEditor=pce;window.apos.vueComponents.AposUtilityOperations=yce;window.apos.vueComponents.AposPagesManager=kce;window.apos.vueComponents.AposAreaContextualMenu=Lce;window.apos.vueComponents.AposAreaEditor=Vce;window.apos.vueComponents.AposAreaExpandedMenu=Zce;window.apos.vueComponents.AposAreaMenu=ede;window.apos.vueComponents.AposAreaMenuItem=rde;window.apos.vueComponents.AposAreaWidget=gde;window.apos.vueComponents.AposWidgetControls=wde;window.apos.vueComponents.AposWidget=xde;window.apos.vueComponents.AposWidgetEditor=$de;window.apos.vueComponents.AposImageControlDialog=Rde;window.apos.vueComponents.AposRichTextWidgetEditor=xye;window.apos.vueComponents.AposTiptapAnchor=Iye;window.apos.vueComponents.AposTiptapButton=Rye;window.apos.vueComponents.AposTiptapColor=Nye;window.apos.vueComponents.AposTiptapDivider=Uye;window.apos.vueComponents.AposTiptapImage=Gye;window.apos.vueComponents.AposTiptapImportTable=Jye;window.apos.vueComponents.AposTiptapInsertBtn=t0e;window.apos.vueComponents.AposTiptapInsertItem=n0e;window.apos.vueComponents.AposTiptapLink=l0e;window.apos.vueComponents.AposTiptapMarks=g0e;window.apos.vueComponents.AposTiptapStyles=C0e;window.apos.vueComponents.AposTiptapTableControls=r5;window.apos.vueComponents.AposTiptapUndefined=S0e;window.apos.vueComponents.AposColor=C5;window.apos.vueComponents.AposInputColor=$ve;window.apos.vueComponents.AposInputOembed=Hve;window.apos.vueComponents.AposAvatar=Bve;window.apos.vueComponents.AposButton=Gve;window.apos.vueComponents.AposButtonGroup=Xve;window.apos.vueComponents.AposButtonSplit=awe;window.apos.vueComponents.AposCellBasic=dwe;window.apos.vueComponents.AposCellButton=fwe;window.apos.vueComponents.AposCellContextMenu=bwe;window.apos.vueComponents.AposCellDate=wwe;window.apos.vueComponents.AposCellLabels=Mwe;window.apos.vueComponents.AposCellLastEdited=Owe;window.apos.vueComponents.AposCellLink=Dwe;window.apos.vueComponents.AposCellType=Hwe;window.apos.vueComponents.AposCheckbox=Uwe;window.apos.vueComponents.AposCloudUploadIcon=Gwe;window.apos.vueComponents.AposColorCheckerboard=Xwe;window.apos.vueComponents.AposCombo=r_e;window.apos.vueComponents.AposContextMenu=N_e;window.apos.vueComponents.AposContextMenuDialog=W_e;window.apos.vueComponents.AposContextMenuItem=J_e;window.apos.vueComponents.AposContextMenuTip=Y_e;window.apos.vueComponents.AposEmptyState=i2e;window.apos.vueComponents.AposFile=d2e;window.apos.vueComponents.AposFilterMenu=p2e;window.apos.vueComponents.AposIndicator=Z4;window.apos.vueComponents.AposLabel=b2e;window.apos.vueComponents.AposLoading=_2e;window.apos.vueComponents.AposLoadingBlock=S2e;window.apos.vueComponents.AposLocale=O2e;window.apos.vueComponents.AposLocalePicker=B2e;window.apos.vueComponents.AposMinMaxCount=q2e;window.apos.vueComponents.AposPager=rCe;window.apos.vueComponents.AposPagerDots=hCe;window.apos.vueComponents.AposSelect=bCe;window.apos.vueComponents.AposSlat=TCe;window.apos.vueComponents.AposSlatList=ICe;window.apos.vueComponents.AposSpinner=BCe;window.apos.vueComponents.AposSubformPreview=GCe;window.apos.vueComponents.AposTable=tAe;window.apos.vueComponents.AposTag=sAe;window.apos.vueComponents.AposTagApply=pAe;window.apos.vueComponents.AposTagList=CAe;window.apos.vueComponents.AposTagListItem=MAe;window.apos.vueComponents.AposToggle=IAe;window.apos.vueComponents.AposTree=RAe;window.apos.vueComponents.AposTreeHeader=NAe;window.apos.vueComponents.AposTreeRows=GAe;window.apos.vueComponents.AposSettingsManager=nke;window.apos.vueComponents.AposImageCropper=HSe;window.apos.vueComponents.AposImageRelationshipEditor=XSe;window.apos.vueComponents.AposMediaManager=n3e;window.apos.vueComponents.AposMediaManagerDisplay=f3e;window.apos.vueComponents.AposMediaManagerEditor=O3e;window.apos.vueComponents.AposMediaManagerSelections=F3e;window.apos.vueComponents.AposMediaUploader=Y3e;window.apos.vueComponents.AposMediaUploaderUi=i4e;window.apos.vueComponents.AposImageWidget=a4e;window.apos.vueComponents.AposSubmittedDraftIcon=u4e;window.apos.vueComponents.AposCommandMenuKey=p4e;window.apos.vueComponents.AposCommandMenuKeyList=y4e;window.apos.vueComponents.AposCommandMenuShortcut=T4e;window.apos.vueComponents.TheAposCommandMenu=$4e;window.apos.vueComponents.AposTranslationIndicator=H4e;window.apos.tiptapExtensions=window.apos.tiptapExtensions||[];apos.tiptapExtensions.push(V4e);apos.tiptapExtensions.push(z4e);apos.tiptapExtensions.push(W4e);apos.tiptapExtensions.push(j4e);apos.tiptapExtensions.push(q4e);apos.tiptapExtensions.push(K4e);apos.tiptapExtensions.push(G4e);apos.tiptapExtensions.push(J4e);apos.tiptapExtensions.push(vxe);apos.tiptapExtensions.push(_xe);apos.tiptapExtensions.push(Cxe);document.readyState!=="loading"?setTimeout(kk,0):window.addEventListener("DOMContentLoaded",kk);function kk(){Axe(),kxe(),Jxe(),Yxe(),Zxe(),Xxe(),Qxe(),eMe(),tMe(),nMe(),iMe(),oMe(),sMe(),rMe(),aMe()}